var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e};$jscomp.createTemplateTagFirstArgWithRaw=function(e,f){e.raw=f;return e};$jscomp.arrayIteratorImpl=function(e){var f=0;return function(){return f<e.length?{done:!1,value:e[f++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.makeIterator=function(e){var f="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return f?f.call(e):$jscomp.arrayIterator(e)};
$jscomp.arrayFromIterator=function(e){for(var f,a=[];!(f=e.next()).done;)a.push(f.value);return a};$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))};$jscomp.getRestArguments=function(){for(var e=Number(this),f=[],a=e;a<arguments.length;a++)f[a-e]=arguments[a];return f};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,f,a){if(e==Array.prototype||e==Object.prototype)return e;e[f]=a.value;return e};
$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<e.length;++f){var a=e[f];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,f){var a=$jscomp.propertyToPolyfillSymbol[f];if(null==a)return e[f];a=e[a];return void 0!==a?a:e[f]};$jscomp.polyfill=function(e,f,a,b){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,f,a,b):$jscomp.polyfillUnisolated(e,f,a,b))};
$jscomp.polyfillUnisolated=function(e,f,a,b){a=$jscomp.global;e=e.split(".");for(b=0;b<e.length-1;b++){var d=e[b];if(!(d in a))return;a=a[d]}e=e[e.length-1];b=a[e];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(e,f,a,b){var d=e.split(".");e=1===d.length;b=d[0];b=!e&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var n=0;n<d.length-1;n++){var c=d[n];if(!(c in b))return;b=b[c]}d=d[d.length-1];a=$jscomp.IS_SYMBOL_NATIVE&&"es6"===a?b[d]:null;f=f(a);null!=f&&(e?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:f}):f!==a&&(void 0===$jscomp.propertyToPolyfillSymbol[d]&&(a=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+a+"$"+d),$jscomp.defineProperty(b,$jscomp.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:f})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(e){if(e)return e;var f=function(n,c){this.$jscomp$symbol$id_=n;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};f.prototype.toString=function(){return this.$jscomp$symbol$id_};var a="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",b=0,d=function(n){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new f(a+(n||"")+"_"+b++,n)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<f.length;a++){var b=$jscomp.global[f[a]];"function"===typeof b&&"function"!=typeof b.prototype[e]&&$jscomp.defineProperty(b.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6",
"es3");$jscomp.iteratorPrototype=function(e){e={next:e};e[Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,f){e instanceof String&&(e+="");var a=0,b=!1,d={next:function(){if(!b&&a<e.length){var n=a++;return{value:f(n,e[n]),done:!1}}b=!0;return{done:!0,value:void 0}}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6","es3");
$jscomp.polyfill("Array.from",function(e){return e?e:function(f,a,b){a=null!=a?a:function(h){return h};var d=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];if("function"==typeof n){f=n.call(f);for(var c=0;!(n=f.next()).done;)d.push(a.call(b,n.value,c++))}else for(n=f.length,c=0;c<n;c++)d.push(a.call(b,f[c],c));return d}},"es6","es3");/*
 JSZipUtils - A collection of cross-browser utilities to go along with JSZip.
<http://stuk.github.io/jszip-utils>

(c) 2014 Stuart Knightley, David Duponchel
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip-utils/master/LICENSE.markdown.

*/
var PUBLIC_CLIENT_VERSION_NUMBER="202303211406_tulong",PRIVATE_CLIENT_VERSION_NUMBER=20210719,CLIENT_VERSION_NUMBER=120200313,CLIENT_JS_VERSION_NUMBER=20200818,RUNLOGINCODE=0,RUNGATECODE=2857740885,RUNGATECODEX=2862262938,DEFBLOCKSIZE=16,HUMANFRAME=600,g_furious_collision_ing=!1,g_furious_collision_end=!1,g_rocker_moving=!1,g_initTimes,g_atttime=0,openRed=!1,ROLE_PLAYER=0,ROLE_HERO=1,ROLE_NPC=2,ROLE_MONSTER=3,BTN_BAG=0,BTN_TRADE=1,BTN_TEAM=2,BTN_ZHAOMU=3,BTN_REDPACKED=4,BTN_GUILD=5,BTN_BAITAN=6,BTN_FRIENDS=
7,SELL_ITEM_TYPE,DIR_UP=0,DIR_RIGHT_UP=1,DIR_RIGHT=2,DIR_RIGHT_DOWN=3,DIR_DOWN=4,DIR_LEFT_DOWN=5,DIR_LEFT=6,DIR_LEFT_UP=7,ROLE_STAND=0,ROLE_WALK=1,ROLE_RUN=2,ROLE_ATTACK_OVER=3,ROLE_ATTACK_1=4,ROLE_ATTACK_2=5,ROLE_ATTACK_3=6,ROLE_SKILL=7,ROLE_DUG=8,ROLE_BE_ATTACKED=9,ROLE_DEAD=10,CGM_DATA=1,CGM_COMPDATA=2,CGM_ACTIVE=3,ROCKER_RUN=2,ROCKER_WALK=1,CHANGEPWDSCENE_EXIST=!1,REGSCENE_EXIST=!1,DELAY_TIME=0,DELAY_INTERVAL=2E3,SOUND_PLAY={},disAfterTargetMoved=0,otherPlayerCatch=!1,g_isReLog=!1,g_relogname=
"",g_relogpsw="",CUSTOM_EVENT_SERVERCONNECT="CUSTOM_EVENT_SERVERCONNECT",CUSTOM_EVENT_ROCKERTOUCHMOVED="CUSTOM_EVENT_ROCKERTOUCHMOVED",CUSTOM_EVENT_ROCKERTOUCHEND="CUSTOM_EVENT_ROCKERTOUCHEND",CUSTOM_EVENT_SHARETHEMAINPLAYER="CUSTOM_EVENT_SHARETHEMAINPLAYER",RECEIVE_ONMESSAGEFROMSERVER="RECEIVE_ONMESSAGEFROMSERVER",RECEIVE_ONHEARTBAETFROMSVR="RECEIVE_ONHEARTBAETFROMSVR",wRace_Role=0,wRace_Actor=1,wRace_Npc=50,eWalkTime=480,eRunTime=600,g_dragItemData,g_canReceiveDrag,g_dragOnItem,g_suijiStone,g_serverRunixTime,
g_auctionList=[],g_auctionCurrency,g_aucitonItemList={},g_auctionBreakUpInfo,doubleFirePosIndex,cdTimerStart,topInfoList=[];g_cleanMap=!1;g_GameType=null;firstName=[];lastName=[];skilldesclist=[];g_ItemDesc=[];g_ItemDescTop="";g_setingItemDesc=[];sound_json=[];role_json=[];obj_config=[];g_GameMoneyType=[];g_hintAnime=[];g_customBtn=[];g_customFun=[];g_gameGold=[];Charge_Value="";g_serverconfig=[];g_serverconfigtxt=[];g_selfdropitem=[];
g_otherBtn=g_GameConfigWEB=lookHumData=g_DiyGoldList=g_DiyButtonList=g_GameConfig=g_BaseConfig=null;g_ServerList=[];g_diymonsterlist=[];g_nHeroSpellRecover=g_nHeroHealthRecover=g_nHeroPoisonRecover=g_nHeroAntiPoison=g_nHeroAntiMagic=g_nHeroSpeedPoint=g_nHeroHitPoint=g_nMySpellRecover=g_nMyHealthRecover=g_nMyPoisonRecover=g_nMyAntiPoison=g_nMyAntiMagic=g_nMySpeedPoint=g_nMyHitPoint=null;g_ridingShow=!0;g_RoleName=m_DoubleExp=m_nGameGold=null;g_RoleBodyState=0;g_RoleCallName=g_playerName=null;
g_RoleLevelUp=0;g_ItemScoreRecord=null;g_EquipScoreExList=[];g_EquipScoreList=[];IsBlendFileName=[];g_fastaccess=!1;quick_Server_ID=1;g_ServerName=g_Server_Name="";g_Cai_GameID=0;g_simScreen=g_openhook="1";g_npcTxtSize=14;g_autopick=!1;g_atlasinfo={};g_atlasRule={};g_boKeepSkill=g_boMagicGood=!1;g_autohookpoison=0;g_sdk_userUid=g_sdk_userName=g_sdk_userID="";g_strokewidth=g_MRGameH5_userId=0;
var ItemHeard=null,U_BOXITEM=-1,U_DRESS=0,U_WEAPON=1,U_RIGHTHAND=2,U_NECKLACE=3,U_HELMET=4,U_ARMRINGL=5,U_ARMRINGR=6,U_RINGL=7,U_RINGR=8,U_BUJUK=9,U_BELT=10,U_BOOTS=11,U_CHARM=12,U_HAT=13,U_DRUM=14,U_HORSE=15,U_SHIELD=16,U_JADE=17,U_FASHIONDRESS=18,U_FASHIONWEAPON=19,U_FASHIONNECKLACE=20,U_FASHIONHELMET=21,U_FASHIONARMRINGL=22,U_FASHIONARMRINGR=23,U_FASHIONRINGL=24,U_FASHIONRINGR=25,U_FASHIONRIGHTHAND=26,U_FASHIONBELT=27,U_FASHIONBOOTS=28,U_FASHIONCHARM=29,selfPlayerTransfer,firstUpdatePath,U_JEWELRY1=
30,U_JEWELRY2=31,U_JEWELRY3=32,U_JEWELRY4=33,U_JEWELRY5=34,U_JEWELRY6=35,_U_JEWELRY7=36,_U_JEWELRY8=37,_U_JEWELRY9=38,_U_JEWELRY10=39,U_JEWELRYRandom=209,U_ANYPOS=208,U_JEWELRYGODBLESSANYPOS=207,U_JEWELRYMAX=U_JEWELRY6,U_GODBLESS1=40,U_GODBLESS2=41,U_GODBLESS3=42,U_GODBLESS4=43,U_GODBLESS5=44,U_GODBLESS6=45,U_GODBLESS7=46,U_GODBLESS8=47,U_GODBLESS9=48,U_GODBLESS10=49,U_GODBLESS11=50,U_GODBLESS12=51,U_ADDUSERITEMMAX=U_GODBLESS12,U_USERITEMMAX=U_GODBLESS12,U_ICON=U_GODBLESS12+1,U_ICON2=U_GODBLESS12+
1,U_BOOK=21,U_DRUG=22,maxPackSizeBackup,MAXBAGITEM=46,GlobalCfglist={},G_RollMsg={},G_RollMsg1=[],G_newLineMsm0=[],G_newLineMsm1=[],G_newLineMsm2=[],G_SHOW_ITEM_NAME=!0,G_ATUO_GET_ITEMS=!0,G_SHOW_ROLE_NAME=!0,G_SHOW_ROLE_HP=!0,G_SHOW_EXP=!0,G_SHOW_NAME=!0,G_SHOW_MONSTER_NAME=!0,G_SHOW_TITLE=!0,G_SpotDlgMode=1,G_NPC_ID=0,G_Show_Item_Price=0,G_Trade_Other_Name="",G_Team_Grop_List=[],G_Last_Select_Team_Name="",G_Team_Group_State=!1,G_Cur_Shop_Page=0,G_Total_Shop_Page=0,G_Money_Type="",G_Notice_Guald=
"",G_KillGuilds_Guald="",G_AllyGuilds_Guald="",G_Guald_Title_List=[],G_Guald_User_List=[],G_Guald_WaiJiao_String=[],G_Guald_HangHui_World_List=[],G_Guald_Last_Name="",G_Guald_Info="",G_WaiJiaoStr="",G_Guald_Can_Lianmeng=0,G_att_type="",g_mapdesc=[],G_PRIVATE_CHAT_list=[],g_customItemAttr=null,CUSTOMITEMABIL_LEN=10,CUSTOMITEMPROGRESSBAR_LEN=2,g_BaseScale=1,g_server_area,g_isTuLongShengYu=!0,G_Cur_Store_Page=0,G_Total_Store_num=0,G_Cur_Item_Page=0,G_Total_Item_num=0,G_Guald_OnlineCount=0,G_Guald_NowCount=
0,G_Guald_MaxCount=0,G_Guald_Admin=0,G_Guald_Admin_Name="",G_Guald_Show_List=[],G_Guald_Chat_List=[],G_Guald_Notice_List=[];G_Guald_User_List=[];
var G_Guald_Show_All=!1,G_Ohter_User_Data={},G_Show_Editor_Type="",g_Trade_GameIcon=0,g_guildEventInfo=[],G_Friend_List=[],G_Friend_RedPack_List=[],G_Friend_HMD_List=[],G_Friend_Target_List=[],G_Friend_Option_Type=0,G_Friend_Info={},G_SkillTime=0,G_BaseSetList=[],G_SysSetList=[],G_FightSetList=[],G_BaiTanData=null,baitanGoldTypes=[],G_ShowBaiTanDataIsSelf=!1,G_BaiTanName="",g_nMagicItemRate=100,g_HPStoneAdd=0,g_HPStoneDec=0,g_MPStoneAdd=0,g_MPStoneDec=0,g_Move_Type=2,g_Show_Bag_Type="",g_GameInitFinish=
!1,g_CMDlist=[],g_res_clearlist=[],g_ani_clearlist={},g_ani_keeplist={},g_item_clearlist={},g_boCobWeb=!1;ItemHeard=null;
var g_GameGoldName="",g_GamePointName="",g_GameGoldNum={key:"",value:0},g_GamePointNum={key:"",value:0},g_GameCionNum={key:"",value:0},g_gameGlory={key:"",value:0},g_gamePopNum={key:"",value:0},g_bindCionNum={key:"",value:0},g_bindGoldNum={key:"",value:0},g_nGameDiamond={key:"",value:0},g_nGameGird={key:"",value:0},g_CurGameDlgZorder=99,g_ItemInfoFromShop=!1,g_showWeatherEffect=null,g_showChatItem=[],g_getAtlas={},g_cutoffset=[],TFishState={fsIdle:0,fsRodBreaking:1,fsRodBreaked:2,fsParsing:3,fsParsed:4,
fsPushing:5,fsAllowPush:6,fsPushed:7,fsFooling:8},sndacasketState={disabled:0,active:1,show:2},E_MUSICFORMAT={MP3:".mp3",WAV:".wav",OGG:".ogg"},E_PARALYSISACTIVE={WALK:"walk",RUN:"run",ATTACK:"attack",MAGIC:"magic"},E_OBJECTTYPE={MONSTER:1,NPC:2,PLAYER:3},backupLockID,g_babyList=[],g_FishInfo_List={},g_JoinInfo_List=[],G_Guald_Name="",g_npc_opt_list=G_Guald_MaxCount=G_Guald_NowCount=G_Guald_OnlineCount="",g_npc_opt_boxid=0,g_crystal_token="",g_crystal_userid="",g_crystalInfo="",g_animation_force_blend=
!0,g_sprite_force_blend=!0,g_GameMainBtnResList={btn_vip:"\u4f1a\u5458",bnt_new_user:"\u85cf\u5b9d\u9601",btn_rank_list:"\u6392\u884c\u699c",bnt_chongzi:"\u5145\u503c\u94fe\u63a5",bnt_game_hd:"\u6d3b\u52a8\u4ecb\u7ecd",bnt_game_fl:"\u798f\u5229\u5927\u5385",btn_recharge_reward:"\u9996\u51b2\u5956\u52b1",bnt_bysc:"\u94bb\u77f3\u5546\u57ce",onLine:"\u5728\u7ebf\u9886\u5956"},g_GameMainOtherBtns={btn_other1:"\u9650\u65f6\u6d3b\u52a8",btn_other2:"\u7ea2\u5305",btn_other3:"\u5145\u503c",btn_other4:"\u9996\u9886",
btn_other5:"\u53ec\u5524\u4ee4"},g_imgNpcPak=["Icon","Items","DnItems","Prguse","Prguse2","Prguse3","Items1","DoItems1","UI1","UI3","GamePlan","Magic","Magic2","Magic3","Magic4","Magic5","Magic6","Magic7","Magic8","Magic9","Magic10","magic7-16","Magic8-16","Magicico","UI2","StateEffect","Face",,"Npcface"];G_BaseSetList=[{txt:"\u5141\u8bb8\u7ec4\u961f",val:G_Team_Group_State},{txt:"\u5141\u8bb8\u7ec4\u961f1",val:G_Team_Group_State},{txt:"\u5141\u8bb8\u7ec4\u961f2",val:G_Team_Group_State}];
G_SysSetList=[{txt:"\u81ea\u52a8\u6361\u53bb\u7269\u54c1",val:G_SHOW_ITEM_NAME},{txt:"\u663e\u793a\u7269\u54c1\u540d\u5b57",val:G_ATUO_GET_ITEMS},{txt:"\u81ea\u52a8\u8865\u5145Hp",val:"\u91d1\u521b\u836f(\u5c0f)\u5305",use:"\u91d1\u521b\u836f(\u5c0f\u91cf)"},{txt:"\u81ea\u52a8\u8865\u5145Mp",val:"\u9b54\u6cd5\u836f(\u5c0f)\u5305",use:"\u9b54\u6cd5\u836f(\u5c0f\u91cf)"},{txt:"\u7d27\u6025\u9003\u547d\u5377",val:"\u968f\u673a\u4f20\u9001\u5377\u5305",use:"\u968f\u673a\u4f20\u9001\u5377"}];
G_FightSetList=[{txt:"\u81ea\u52a8\u6218\u6597",val:!0},{txt:"\u81ea\u52a8\u6218\u65971",val:!0},{txt:"\u81ea\u52a8\u6218\u65972",val:!0}];g_face_list="wx pz se fd dy hx bz shuai dk gg fn tp cy jy ng kuk lengh zk tuu tx ka baiy am jie kun jk lh hanx db fendou yiw xu yun shuai kl qiao zj kb gz qd huaix zhh yhh hq bs wq kk yx qq xia kel cd xig pj lq pp kf fan zt mg dx sa xin xs dg shd zhd dao zq pch bb yl ty lw yb qiang ruo ws bq gy qt cj aini bu hd aiq fw tiao fad oh zhq kt ht".split(" ");
var g_LegTzItemList=[],clBlack="#000000",clMaroon="#000080",clGreen="#008000",clOlive="#008080",clNavy="#800000",clPurple="#800080",clTeal="#808000",clGray="#808080",clSilver="#C0C0C0",clRed="#0000FF",clLime="#00FF00",clYellow="#FFFF00",clBlue="#FF0000",clFuchsia="#FF00FF",clAqua="#00FFFF",clLtGray="#C0C0C0",clDkGray="#808080",clWhite="#FFFFFF",StandardColorsCount=16,FRIEND_TIP={A:"\u7533\u8bf7\u52a0\u4f60\u4e3a\u597d\u53cb\uff0c\u4f60\u662f\u5426\u540c\u610f\uff1f",B:"\u597d\u53cb\u7533\u8bf7\u5df2\u53d1\u9001\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff01",
C:"\u8be5\u597d\u53cb\u5df2\u6dfb\u52a0\uff01",D:"\u8bf7\u8f93\u5165\u73a9\u5bb6\u6635\u79f0",E:"\u786e\u5b9a\u8981\u5220\u9664|\u5417\uff1f",F:"\u8bf7\u9009\u62e9\u9080\u8bf7\u7ec4\u961f\u7684\u5bf9\u8c61",G:"\u8bf7\u5f00\u542f\u5141\u8bb8\u7ec4\u961f",H:"\u8bf7\u9009\u62e9\u9080\u8bf7\u52a0\u5165\u884c\u4f1a\u7684\u5bf9\u8c61",I:"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc715\u4e2a\u5b57",J:"\u8be5\u73a9\u5bb6\u5df2\u5728\u9ed1\u540d\u5355\u4e2d",L:"\u8bf7\u8f93\u5165\u52a0\u5165\u9ed1\u540d\u5355\u6635\u79f0",
M:"\u786e\u5b9a\u8981\u4ece\u9ed1\u540d\u5355\u4e2d\u5220\u9664|\u5417\uff1f",N:"\u5df2\u52a0\u4f60\u4e3a\u597d\u53cb!",O:"\u5220\u9664\u597d\u53cb\u64cd\u4f5c\u5931\u8d25\uff01",P:"\u4e0b\u7ebf\u5566\uff01",Q:"\u4e0a\u7ebf\u5566\uff01",2:"\u597d\u53cb\u5217\u8868\u5df2\u6ee1",3:"\u540d\u79f0\u5df2\u7ecf\u5b58\u5728\u597d\u53cb\u5217\u8868\u4e2d, \u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0!",4:"\u540d\u79f0\u4e0d\u5b58\u5728\u6216\u8005\u4e0d\u5728\u7ebf!",5:"\u4e0d\u80fd\u628a\u81ea\u5df1\u52a0\u4e3a\u597d\u53cb!",
LIMITLENGTH:15},g_unpackList=[],g_ChannelId=0,g_Termial=1,S_LIMIT_FORMAT="wav",S_LOGIN_GAME="wav/log-in-long2.wav",S_BUTTON_1="wav/103.wav",S_BUTTON_2="wav/104.wav",S_BUTTON_3="wav/105.wav",S_SELECTROLE="wav/sellect-loop2.wav",S_SELECTHOAL="wav/101.wav",S_ROLE_WALK="wav/1.wav",S_ROLE_WALK2="wav/2.wav",S_ROLE_RUN="wav/3.wav",S_ROLE_RUN2="wav/4.wav",S_ROLE_LEVEL="wav/powerup.wav",s_hit_short="wav/50.wav",s_hit_wooden="wav/51.wav",s_hit_sword="wav/52.wav",s_hit_do="wav/53.wav",s_hit_axe="wav/54.wav",
s_hit_club="wav/55.wav",s_hit_long="wav/56.wav",s_hit_fist="wav/57.wav",s_cboZs1_start_m="wav/51.wav",s_cboZs1_start_w="wav/51.wav",s_cboZs2_start="wav/51.wav",s_cboZs3_start_m="",s_cboZs3_start_w="",s_cboZs4_start="",s_60HIT="wav/M51-0.wav",s_61HIT="",s_hit_ZRJF_M="",s_hit_ZRJF_W="",s_role_die_m="wav/144.wav",s_role_die_w="wav/145.wav",s_struck_m="wav/138.wav",s_struck_w="wav/139.wav",s_struck_armor_sword="wav/80.wav",s_struck_armor_axe="wav/81.wav",s_struck_armor_longstick="wav/82.wav",s_struck_armor_fist=
"wav/83.wav",s_struck_body_sword="wav/70.wav",s_struck_body_axe="wav/71.wav",s_struck_body_longstick="wav/72.wav",s_struck_body_fist="wav/73.wav",s_click_drug="wav/108.wav",s_spacemove_out="wav/109.wav",s_spacemove_in="wav/110.wav",s_click_weapon="wav/111.wav",s_click_armor="wav/112.wav",s_click_ring="wav/113.wav",s_click_armring="wav/114.wav",s_click_necklace="wav/115.wav",s_click_helmet="wav/116.wav",s_click_grobes="wav/117.wav",s_itmclick="wav/118.wav",s_temp_play=!1;
function initConstSoundSrc(){var e={};null!=sound_json&&(e=sound_json.length,e=sound_json[e-1].CONST_MUSIC);for(var f in window)-1==f.indexOf("s_")&&-1==f.indexOf("S_")||null==e[f]||(window[f]=e[f])}
function initpverallprot(){attackerID=lockingID=0;autopickstate=autohookstate=!1;lockingList=[];chaseing=!1;rolespeed=0;g_rolemovespeed=10;rockerlock=Actionlock=!0;isSocketConnected=roledielock=rockerposview=rockerfirst=!1;rw_recog=0;clickname=taskcomplete=rw_content=rw_pagings=rw_titles="";attack_call_time=skill_use_time=skill_count_cd=0;open_minimap=!1;isOpen=!0;miniflashpoint=0;g_copyName="";TaskOpen=!0;task_tile_list=[];g_RedPack_List=[];g_RedPackOpen=g_RedPackIndex=-1;G_npcShopPage=0;OpenTextColor=
!1;G_Friend_List=[];G_Friend_Target_List=[];G_countDownMsg=[];g_Zmu_MinLv="0";g_Zmu_MaxLv="55";g_Zmu_Quyu=g_Zmu_Type="0";g_Zmu_Memo="";g_Zmu_Count=0;Allsuitlist=[];Suitelementlist=[];GomSuitOpen=!1;Gomsuitlist=[];activate_skilltype=activate_skilluse=0;activate_skillpos=null;g_buffOnwerId=0;g_buffAniCache=[];g_Showitem=[];g_fleixbleItemShow=[];g_ItemImg=[];g_pak_list=[];g_FishGroup_List=[];g_main_npcdialog=null;g_main_npcdialogopen=!1;g_H_List=[];g_BagItemsList=[];for(var e=0;46>e;e++)g_BagItemsList.push(null);
g_OpenJiaoYi=g_OpenMyShop=g_OpenState=g_OpenStore=g_OpenBag=!1;g_nBagIdx=g_OpenIdx=-1;g_MoveItems={};g_WaitItems={};g_AutoItems={};g_MoveItems.Items=null;g_MoveItems.Index=-1;g_WaitItems.Index=-1;g_WaitItems.Items=null;g_AutoItems.Items=null;g_AutoItems.Index=-1;g_UserItemList=[];HighTUseItems=52;g_UserMagicList=[];g_SelectIndex=-1;g_humTitleOn=!1;g_StoreItemList=[];g_otherStoreList=[];g_StoreType=-1;player_stalls=!1;g_setDrugNumber=g_autoDrugButNumber=g_DrugButNumber=g_StoreCount=g_StoreMaxCount=
-1;g_DrugItemsList=[];for(e=0;6>e;e++)g_DrugItemsList[e]=null;g_ItemMemuList=[];g_ItemMemuListInf=[];BagDataIsInit=g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1;CanUserItem=!0;g_Move_Type=2;g_NpcShowtxt="";g_SetupMagicList=[];g_MoveSkill=null;for(e=0;8>e;e++)g_SetupMagicList[e]=null;g_StoreOnline=g_StoreName="";SelectedStoreItem=AddStoreItem=null;g_StoreItemNum=[0,0,0];g_StoreItemIndex=[0,0,0];g_MyShopList=[];g_MyShopGoldList=[];g_SelectedName="";for(e=0;20>e;e++)g_MyShopList[e]=
null,g_MyShopGoldList[e]=null;gametakelist=[];g_MyJiaoYiSum=0;g_MyJiaoYiList=[];g_HumJiaoYiList=[];for(e=0;12>e;e++)g_MyJiaoYiList[e]=null,g_HumJiaoYiList[e]=null;activate_ok=null;nGT_X=0;nGT_Y=10;testNpc_Y=testNpc_X=0;g_GameDiamondName="\u91d1\u521a\u77f3";g_GameLingFName="\u7075\u7b26";sNewNpcStr="";MissStringArray=[];g_MissCaptionList=[];for(e=0;20>e;e++)MissStringArray[e]="";g_MissIndex=0;g_sStrMissNv="";g_GlobalList=[];e=new UIAlert;e.zOrder=999998;e.name="alertLayer";Laya.stage.addChild(e);
g_tempChangerdlg=g_TempNPCLabe=!1;g_Changerpak=g_ChangerIndex=-1;g_Hit_Text=[];g_TimeIndex=-1;g_buffID=[];verify_through=itme_lock=!0;g_cardGame_infoList=[];g_show_fashion=!1;g_DiyNPCList=[];g_IconCList=[];g_ClientConfig=[];G_Guild_Name="";g_diyMonState=g_Cai_nProductID=0;gm_show_skill=gm_show_npc=gm_show_player=!0;gm_show_pl_name="";gm_show_pl_visible=!0;gm_show_map=-1;g_loadmap=gm_has_socket_timer=gm_print_msg=gm_open_seemap=gm_show_grid=!1;g_myHero=null;g_HeroLoyalPoint=0;g_OpenHeroBag=g_OpenHeroState=
!1;g_HeroItemList=[];g_HeroMagicList=[];g_HeroBagCount=g_HeroBagNum=-1;g_HeroBagItemsList=[];g_HeroLockType=0;g_boIsSafeRun=g_boIsSafeRunNPC=g_boNoAcrossNpc=g_boNoAcrossMon=g_boNoAcrossHuman=g_HeroGuardOn=!1;npc_img_name="gameres/png/npc_di.png";g_btSelfShowGodBless=g_btSelfSndacasketState=!1;g_SelfOpenedGodBless=[];for(e=0;12>e;e++)g_SelfOpenedGodBless.push(0);g_HeroOpenedGodBless=g_SelfOpenedGodBless;g_Show_Hero_Fashion=g_btHeroShowGodBless=g_btHeroSndacasketState=!1;g_Cai_ServerIP="";g_Cai_ServerPort=
0;g_tempName=g_tempJob="";g_magicId=-1;g_boOpenCaiji=!1;g_rotation=g_levelForCaiji=0;use_skill_sbys=moveing=use_move_start=!1;rocker_move_dir=-1;attack_lock_state=!1;dsOpen=attack_lock_time=0;dsClose=1;dsBroken=2;g_nBonusPoint=0;g_BonusAbilChg=g_NakedAbil=g_BonusAbil=g_BonusTick=null;g_pickPlan1=[];g_pickPlan2=[];dataFromRoleScene=[];g_show_Npcbj=!0;g_friend_request=[];g_boxid=0;g_first_entermap=!0;g_native_code=E_NewPlayerID=0;g_boxItemArr=Array(8);g_register=null;g_superMsg=[];g_mapnpc=null;g_tick_rate=
g_tick_error=0;g_tick_check=!1;g_tick_ct=0;matrix=null;native_version=g_overtime=0;version_config=[];g_itemSize=1160;g_rolelevel=g_relevel=0;g_autoEquipItemList=[];g_newTaskList=[];g_taskPanel=null;g_newTaskNodeList=[];g_newTaskNpcIcon=null;g_newTaskClickTick=0;g_mailList=[];g_mailLogo=null;g_extendBagItemCount=g_mailMaxCount=0;g_intervalDeal=!0;g_isStandbyUrl=!1;g_deleteStr=""}
function analysistxt(){Skillmodule.onanalyzeJson("json/skill.json");var e=Laya.Loader.getRes("data/json/unpackitem.txt");if(e)for(var f=e.split("\r\n"),a=0;a<f.length;a++)0!=f[a].indexOf(";")&&""!=f[a]&&-1!=f[a].indexOf(":")&&(e=f[a].split(":"),1<e.length&&(g_unpackList[e[0]]=e[1]));if(a=Laya.Loader.getRes("json/firstname.txt"))a=a.toString(),firstName=a.split("\r\n"),Laya.loader.clearRes("json/firstname.txt");if(a=Laya.Loader.getRes("json/lastname.txt"))a=a.toString(),lastName=a.split("\r\n"),Laya.loader.clearRes("json/lastname.txt");
if(a=Laya.Loader.getRes("json/register.txt"))a=a.toString(),g_register=a.split("\r\n"),Laya.loader.clearRes("json/register.txt");if(e=Laya.Loader.getRes("data/json/mapdesc.txt")){e=e.toString();e=e.split("\r\n");for(a=0;a<e.length;a++)e[a]&&""!=e[a]&&0!=e[a].indexOf(";")&&-1!=e[a].indexOf(",")&&g_mapdesc.push(e[a].split(","));Laya.loader.clearRes("data/json/mapdesc.txt")}if(a=Laya.Loader.getRes("json/cutoffset.txt"))a=a.toLowerCase(),g_cutoffset=a.split("\r\n");if(a=Laya.Loader.getRes("json/customFun.txt"))g_customFun=
a.split("\r\n"),Laya.loader.clearRes("json/customFun.txt");Charge_Value=Laya.loader.getRes("json/chargelist.txt");""!=Charge_Value&&Laya.loader.clearRes("json/chargelist.txt");if(a=Laya.Loader.getRes("json/skilldesc.txt"))a=a.toString(),skilldesclist=a.split("\r"),Laya.loader.clearRes("json/skilldesc.txt");if(a=Laya.Loader.getRes("data/json/itemdesc.txt"))a=a.toString(),g_ItemDesc=a.split("\r\n"),Laya.loader.clearRes("data/json/itemdesc.txt");(g_setingItemDesc=Laya.Loader.getRes("data/json/itemDesc.json"))&&
Laya.loader.clearRes("data/json/itemDesc.json");if(a=Laya.loader.getRes("data/json/filteitemlist.txt")){a=a.toString();var b=a.split("\r\n");e=b.length;for(a=0;a<e;a++){f=b[a].split(" ");if(6>f.length)for(var d=0;6>d;d++)f[d]||(f[d]="0");AllItemList.push({});AllItemList[a].itemtype=f[0];AllItemList[a].itemname=f[1];f[3]=1;f[4]=1;1==f[2]?f[2]=!0:f[2]=!1;1==f[3]?f[3]=!0:f[3]=!1;1==f[4]?f[4]=!0:f[4]=!1;1==f[5]?f[5]=!0:f[5]=!1;AllItemList[a].isshow=f[2];AllItemList[a].ispickup=f[3];AllItemList[a].special=
f[4];AllItemList[a].prompt=f[5];g_pickPlan1[a]=[f[2],f[3],f[4],f[5]];g_pickPlan2[a]=[f[2],f[3],f[4],f[5]]}}if(a=Laya.loader.getRes("data/json/filtemonsterlist.txt"))for(a=a.toString(),b=a.split("\r\n"),e=b.length,a=0;a<e;a++){f=b[a];f=f.split(" ");if(6>f.length)for(d=0;6>d;d++)f[d]||(f[d]="0");AllMonsterList.push({});AllMonsterList[a].monsterName=f[0];1==f[1]?f[1]=!0:f[1]=!1;AllMonsterList[a].isExclude=f[1]}if(a=Laya.loader.getRes("json/blendmode.txt"))IsBlendFileName=a.split("\r\n"),Laya.loader.clearRes("json/blendmode.txt");
if(sound_json=Laya.loader.getRes("json/sound.json")){e=sound_json.length;for(a=0;a<e;++a)sound_json[a].type&&g_sound_list.push("wav/"+sound_json[a].type);Laya.loader.clearRes("json/sound.json")}(role_json=Laya.loader.getRes("json/role.json"))&&Laya.loader.clearRes("json/role.json");(obj_config=Laya.loader.getRes("json/objectconfig.json"))&&Laya.loader.clearRes("json/objectconfig.json");a=new Laya.TTFLoader;a.fontName="Arial";a.load("font/Arial.ttf");if(a=Laya.Loader.getRes("json/serverconfig.txt")){a=
a.toString();e=a.split("\r\n");for(a=0;a<e.length;a++)e[a]&&-1!=e[a].indexOf("=")&&(f=e[a].split("="),f[0]&&f[1]&&(g_serverconfigtxt[f[0]]=f[1]),"ip"==f[0]?g_serverconfigtxt.ip=f[1]:"port"==f[0]?g_serverconfigtxt.port=f[1]:"admin"==f[0]?g_serverconfigtxt.admin=f[1]:"quickcode"==f[0]?g_serverconfigtxt.quickcode=f[1]:"quickkey"==f[0]?g_serverconfigtxt.quickkey=f[1]:"gamelist"==f[0]?g_serverconfigtxt.gamelist=f[1]+"="+f[2]:"gamelist1"==f[0]?g_serverconfigtxt.gamelist1=f[1]+"="+f[2]:"currencyShowList"==
f[0]?g_serverconfigtxt.currencyShowList=f[1]:"sLimitFormat"==f[0]?(g_serverconfigtxt.sLimitFormat=f[1],S_LIMIT_FORMAT=f[1]):"readProgressTime"==f[0]&&(g_serverconfigtxt.readProgressTime=f[1]));a=g_serverconfigtxt.ip&&g_serverconfigtxt.port&&g_serverconfigtxt.admin?!0:!1;null!=g_serverconfigtxt.gamelist==1?requestGameListWEB(g_serverconfigtxt.gamelist+""):(1==a&&(a=g_serverconfigtxt.admin,Sendmessage.connectLoginSvr(g_serverconfigtxt.ip,parseInt(g_serverconfigtxt.port)),null==a||""==a?server_uuid=
"admin":server_uuid=a),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9f99\u65cf\u503c\u73ed\u6280\u672f\uff1a\n\u4f60\u4e3a\u5565\u4e0d\u66f4\u65b0\u65b0\u5217\u8868!?",callfn:function(){}}]));(a=Laya.Loader.getRes("json/imageExportRule.json"))&&(g_atlasinfo=a);a=Laya.Loader.getRes("json/imageSetRule.json");null==a&&(a=Laya.Loader.getRes("imageSetRule.json"));a&&(g_atlasRule=a)}if(a=Laya.loader.getRes("data/json/atlasfile.txt"))a=JSON.parse(a),console.log(a);e=[];f="00000";for(a=1;7>a;a++)f=getResStuffZero(a),
e.push("gameres/animation/bonus/"+f+a+".png");for(a=1;13>a;a++)f=getResStuffZero(a),e.push("gameres/animation/maillogo/"+f+a+".png");for(a=1;7>a;a++)f=getResStuffZero(a),e.push("gameres/animation/hero_power/"+f+a+".png");for(a=1;7>a;a++)f=getResStuffZero(a),e.push("gameres/animation/halo/"+f+a+".png");Laya.loader.load(e,null,null,Laya.Loader.IMAGE);(a=Laya.loader.getRes("data/json/version.txt"))&&(version_config=a.split("\r\n"))}function getResStuffZero(e){return 10>e?"00000":"0000"}
function initgame(){cur_use_app=!1;app_imei="123132";app_simulator=!1;mac_key="";playerID=game_scene_code=gm_timefor_socket=0;open_gm=!1;g_eventBtn=[];g_funBtn=[];sectionInfo=0;server_uuid="";user_version=null;user_tpye=0;g_sound_list=[];g_cannotPick=[];MsgFromLogin=[];user_site="";g_npcCanMove=!0;E_NewRoleTime=0;E_NewRoleName="";E_NewPlayerID=0;ItemHeard=null;AllItemList=[];AllMonsterList=[];client_version=Laya.LocalStorage.getItem("cl_version");console.log("---init----------------");Laya.stage.removeChildren();
Laya.stage.bgColor="#000000";Offsetmodule=new OffsetModule;ObjectManage=new objectmanage;Movemodule=new MoveModule;Gamemessage=new GameMessage;Fightmodule=new FightModule;Mapmodule=new MapLayer;Objectcontrol=new objectcontrol;AStart=new Astart;Skillmodule=new SkillModule;Mapdata=new MapData;RelationMgr=RelationManager.getInstance();Gameconfig=new GameConfig;AutoHookmodule=new AutoHookModule;Animationmodule=new AnimationModule;Versionmgr=new VersionMgr;g_LogSocket=new LogClientSocket;Sendmessage=new SendMessage;
VoiceSocket=new voiceSocket;reEntry=new ReEntry;rerole=new ReRole;AStart.setMapData();changescreen();initpverallprot();Laya.Browser.onEdge&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e0d\u652f\u6301edge\u6d4f\u89c8\u5668,\u8bf7\u4f7f\u7528Chrome\u6d4f\u89c8\u5668",callfn:function(){}}]);analysistxt();cur_game_type=g_serverconfigtxt.login_mode?~~g_serverconfigtxt.login_mode:0;Skillmodule.onanalyzeJson("json/skill.json");Skillmodule.parseDiySkillFile();ObjectManage.parseDiyMonsterFile();window.conch?
(cur_use_app=!0,console.log("----------------on native-------------------------\x3e"),changescreen(),sendtonative("loading",100)):(console.log("----------------on web-------------------------\x3e"),1==cur_game_type&&quicksdkinit());var e=new LoginScene;e.centerX=0;e.centerY=0;Laya.stage.addChild(e);GameUtil.isIosAndOtherSDK()&&(GameUtil.isIOSAndQSY=!0,GameUtil.addMessageListen(),GameUtil.getSettingDataInIOS("agreeagreement"))}
function requestGameListWEB(e){var f=new Laya.HttpRequest;f.once(Laya.Event.COMPLETE,this,successGameListWEB);f.once(Laya.Event.ERROR,this,requestGameList1Web);Laya.timer.once(100,this,function(){f.send(e,"","get","json",["Content-Type","application/json;charset=UTF-8"])})}
function requestGameList1Web(e){g_isStandbyUrl=!0;var f=g_serverconfigtxt.gamelist1+"";console.log("<------\u8bbf\u95ee\u5907\u7528\u5217\u8868------\x3e:");console.log(f);var a=new Laya.HttpRequest;a.once(Laya.Event.COMPLETE,this,successGameListWEB);a.once(Laya.Event.ERROR,this,function(b){console.log("<------\u8bbf\u95ee\u5907\u7528\u5217\u8868\u8bf7\u6c42\u5931\u8d25------\x3e:");console.log(b)});Laya.timer.once(100,this,function(){a.send(f,"","get","json",["Content-Type","application/json;charset=UTF-8"])})}
function successGameListWEB(e){(e=e.data)?(g_ServerList=e,Laya.stage.event("getGameList"),console.log("<------\u6e38\u620f\u5217\u8868\u6570\u636e------\x3e:"),console.log(g_ServerList)):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u83b7\u53d6\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6e38\u620f\u5217\u8868",callfn:function(){}}])}var E_PLATFORMSDK={DOUYIN:"douyin",BORAN:"boran",BOX:"box",YOUMENG:"youmeng"};function LoginFunction(e,f){dyLogin(e);callAppGetIMEI()}
function OtherFunction(e,f){switch(f){case E_PLATFORMSDK.DOUYIN:dyRegister(e);break;case E_PLATFORMSDK.BOX:h5BoxRegister(e);break;case E_PLATFORMSDK.YOUMENG:register()}}var QuickbackData=null;function appcallexitgame(){Sendmessage.sendCloseGameForH5()}
function callAppGetIMEI(){1==Laya.Browser.onAndriod&&(e=1);1==Laya.Browser.onAndrIOS&&(e=2);if(0==cur_use_app){var e=3;userAgentH5(navigator.userAgent,e)}else sendtonative("getIMEI",function(f){app_imei=f;console.log((1==e?"\u5b89\u5353":"\u82f9\u679c")+"\u8bbe\u5907\u7801:"+f);userAgentH5(f,e)}.bind(this))}
function getAppIMEI(e){if(e){console.log("--------getAppIMEI--------"+e);e=e.split("/");e[0]&&(app_simulator=e[0]);e[1]&&(app_imei=e[1]);null==e[2]&&(e[2]=0);var f=new Laya.Label("version:"+e[2]+"["+e[1]+"]");f.pos(20,browser_height-20);f.color="#ffffff";Laya.stage.addChild(f);native_version=parseInt(e[2])}}function onGeneratePNG(e){var f=e.drawToCanvas(e.width,e.height,0,0);f.toBase64("image/png",.5,function(a){onScreenShot(a);f.releaseResource();f.destroy()})}
function onScreenShot(e){cur_use_app&&(console.log("============js:onScreenShot============>"),sendtonative("screenShot",e))}
function getisSimulator(){if(cur_use_app)console.log("============js:getisSimulator============>"),sendtonative("isSimulator","mr");else if(GameSdk&&GameSdk.init())GameSdk.onResume(GameUtil.setStageVolumeAndShow),GameSdk.onPause(GameUtil.setStageVolumeAndHide),GameSdk.isSimulator();else if(document&&document.location.href){console.log("-mryz-> ",document.location.href);var e=document.location.href.split("&")[1];e&&(e=e.split("="),"userId"==e[0]&&(cur_game_type=4,g_MRGameH5_userId=e[1],MRGameH5Init()))}}
function setgametype(e){-1!=e.indexOf("quickSDK")?(cur_game_type=2,console.log(" cur game type\uff1aquicksdk ")):-1!=e.indexOf("MRGame")?(cur_game_type=3,console.log(" cur game type\uff1aMRGAME ")):-1!=e.indexOf("GameSdk")&&(cur_game_type=7,console.log(" cur game type\uff1aGameSdk "))}function quicksdkinit(){QuickSDK.init(g_serverconfigtxt.quickcode,g_serverconfigtxt.quickkey,!0,function(){console.log("quick init success!")})}
function oncallLocalPhoto(){cur_use_app&&(console.log("============js:oncallLocalPhoto============>"),g_serverconfig.boPic&&sendtonative("oncallLocalPhoto",g_serverconfig.sPicUrl))}function onGetPhotoURL(e){e&&(console.log("=================js:onGetPhotoURL======================"+e),Laya.stage.event("onGetPhotoURL",[e]))}
function sendtonative(e,f){if(!cur_use_app||void 0===conchConfig||null===conchConfig)return!1;var a=conchConfig.getOS(),b;"Conch-ios"==a?b=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==a&&(b=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));if("Conch-ios"==a)return f?b.call(e+":",f):b.call(e+":","test");if("Conch-android"==a)return f?b.call(e,f):b.call(e)}
function quicksdklogin(){1==cur_game_type?QuickSDK.login(function(e){console.log(e);if(e.status){QuickbackData=e;null==e.data.uid&&(e.data.uid=e.data.username);if(null==e.data.username||""==e.data.username)e.data.username=e.data.uid;28<=e.data.username.length&&(e.data.username=e.data.uid);console.log("GameDemo:QuickSDK\u767b\u5f55\u6210\u529f: uid=>"+e.data.uid);showAlert(Base64.encode(e.data.uid)+"|"+Base64.encode(e.data.channelId));QuickSDK.setLogoutNotification(function(f){Laya.Browser.window.location.reload()})}else console.log("GameDemo:QuickSDK\u767b\u5f55\u5931\u8d25:"+
e.message)}):2==cur_game_type&&sendtonative("onLoginForSDK","login")}
function quicksdkpay(e,f,a,b,d,n){orderInfo={};1==cur_game_type&&(orderInfo.productCode=g_serverconfigtxt.quickcode);1==cur_game_type&&(orderInfo.uid=QuickbackData.data.uid);orderInfo.userRoleId=E_NewPlayerID;orderInfo.userRoleName=f;orderInfo.serverId=quick_Server_ID;orderInfo.userServer=g_Server_Name;orderInfo.userLevel=1;orderInfo.cpOrderNo="cpOrderNo000001";orderInfo.amount=d;orderInfo.subject=n;orderInfo.desc=n;orderInfo.callbackUrl="http://47.105.218.233";orderInfo.extrasParams=1==cur_game_type?
Base64.encode(f)+"|"+b+"|"+Base64.encode(g_Server_Name)+"|"+Base64.encode(n):"";orderInfo.goodsId=b;orderInfo.count=b;orderInfo.quantifier="\u4e2a";e=JSON.stringify(orderInfo);1==cur_game_type?QuickSDK.pay(e,function(c){console.log("GameDemo:\u4e0b\u5355\u901a\u77e5"+JSON.stringify(c))}):2==cur_game_type&&sendtonative("onPayForSDK",e)}
function quicksdkuploadrole(e,f,a,b){e={};e.isCreateRole=E_NewRoleName==f;e.roleCreateTime=E_NewRoleTime;1==cur_game_type&&(e.uid=QuickbackData.data.uid);e.serverId=quick_Server_ID;e.serverName=b;e.userRoleName=f;e.userRoleId=E_NewPlayerID;e.userRoleBalance=1;e.vipLevel=1;e.userRoleLevel=a;e.partyId="1";e.partyName="\u884c\u4f1a\u540d\u79f0";e.gameRoleGender="\u7537";e.gameRolePower=100;e.partyRoleId="1";e.partyRoleName="1";e.professionId="1";e.profession="1";e.friendlist="";e.isCreateRole&&(E_NewRoleName=
"");f=JSON.stringify(e);1==cur_game_type?QuickSDK.uploadGameRoleInfo(f,function(d){console.log("GameDemo:\u89d2\u8272\u66f4\u65b0"+JSON.stringify(d))}):2==cur_game_type&&sendtonative("onRoleForSDK",f)}function requestpaylist(e){var f=Charge_Value.split("\r\n");if(2<=f.length){var a={};a.value=e;a.url=f[0];e=JSON.stringify(a);sendtonative("getpaylist",e)}}
function getpaylist(e){var f=GameUtil.InstanceOfMem(rechargeUI);f||(console.log("----getpaylist---"),f=new UIRecharge,Laya.stage.addChild(f));f.updateMoney(e)}function callJS(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u6210\u529f",callfn:function(){}}])}
function changescreen(){var e=Laya.Browser.clientWidth*Laya.Browser.window.devicePixelRatio,f=Laya.Browser.clientHeight*Laya.Browser.window.devicePixelRatio;e<f&&(f=Laya.Browser.clientWidth*Laya.Browser.window.devicePixelRatio,e=Laya.Browser.clientHeight*Laya.Browser.window.devicePixelRatio);browser_width=Math.ceil(e/(f/600));1136>browser_width?(browser_width=1136,browser_height=Math.ceil(f/(e/browser_width))):browser_height=600;Laya.stage.size(browser_width,browser_height)}
function showAlert(e){-1!=e.indexOf("unionid")&&(e=JSON.parse(e).unionid);-1!=e.indexOf("BMSJ")?(e=e.split("BMSJ")[1],Sendmessage.sendLoginToken(e)):(Sendmessage.WECHATANDQQ(e),g_native_code=e)}function isWebForYYY(){return!cur_use_app&&window.GameClient}
function sdkForYYY(){isWebForYYY()&&(window.gameClient=new GameClient({gid:210,token:function(e){return(e=window.location.search.match(new RegExp("[&?]("+e+")=([^&?#]*)","i")))?e[2]:null}("token"),apikey:"e021d02cb5efc62482ead02746d68cce"}),gameClient.ready().then(function(e){return gameClient.getUserInfo(function(f){f&&f.uid?window.g_YYY=f.uid+"yyy":console.log("\u672a\u83b7\u53d6\u5230uid")})}).catch(function(e){switch(e.message){case "-1":gameClient.clientAction.relogin();break;default:console.log(e)}}))}
function getinfoforsdk(e,f,a,b){user_version&&-1!=user_version.indexOf("sdkforyyy")&&(Laya.Browser.onIOS?Laya.Browser.window.webkit.messageHandlers.jscallrecharge.postMessage({name:e,lv:f,serverid:"101",sname:b}):jscall.hello(e,f,"101","\u6218\u8bb0\u6e38\u6613\u6e38"))}
function callversion(e){changescreen();cur_use_app=!0;g_Termial=3;var f=document.getElementById("js-fullScreen"),a=document.getElementById("js-cancelFullScreen");f&&(f.style.display="none");a&&(a.style.display="none");f=new Laya.Label(e+Laya.Browser.window.screen.width+","+browser_width+","+Laya.Browser.clientWidth);f.color="#ffffff";f.bottom=0;f.zOrder=99999;f.name="versionlb";Laya.stage.addChild(f);window.flag={fake_android:!0};-1!=e.indexOf("ios")?user_tpye=2:user_tpye=1;-1!=e.indexOf("sdkforyyy")?
user_version=e:-1!=e.indexOf("sdkforbaidu")&&(user_version=e)}function callactiveforks(e){var f=new Laya.HttpRequest;f.on(Laya.Event.ERROR,this,function(b){console.log("callactiveforks - onerr",b)});f.on(Laya.Event.COMPLETE,this,function(b){console.log("callactiveforks - loadend",b)});var a="http://dy.jauok.com:8080/active?uid="+e+"&sys="+(Laya.Browser.onAndriod?"android":"ios");console.log("callactiveforks-"+e+a);f.send(a)}
var uu_url="http://47.111.117.245:8081",uu_token="8E1B1D0F787411EA8D9300163E0AFD0A",uu_key="24A36C5E6A5049CD9B93B9398FE57D30",uu_sign="",uu_id=0;function callpaylistforuu(e){var f=uu_url+"/api/app/recharge/list";if(null!=md5){var a=md5(uu_token+uu_key).toUpperCase();uu_id=e;$.post(f,{token:uu_token,sign:a,id:uu_id},function(b){if(0==b.code){var d=GameUtil.InstanceOfMem(rechargeUI);d||(d=new UIRecharge,Laya.stage.addChild(d));d.update3Money(b)}else console.log("error: for pay uu")})}}
function callpayforuu(e,f){var a=uu_url+"/api/app/order/save",b=md5(uu_token+uu_key).toUpperCase();$.post(a,{token:uu_token,sign:b,id:uu_id,account:g_RoleName,amount:e,payType:2001==f?"SMS":"ALIPAY",platform:Laya.Browser.onPC?"PC":"APP"},function(d){0==d.code?window.open(d.data):console.log("error: for pay uu")})}function audioDisconnect(){console.log("-----audioDisconnect---------");VoiceSocket.initCMG()}
function enterroomsuccess(){console.log("----enterroomsuccess-----");Laya.stage.event("VOICE_EVENT",["onenterroomsuccess"])}function checkNative(){cur_use_app&&3<version_config.length&&"1"==version_config[0]&&native_version<parseInt(version_config[1])&&Laya.stage.event("show_alert_dlg",[{type:1,txt:version_config[3],callfn:function(){sendtonative("gotowebview","openurl:"+version_config[2]);Laya.Browser.window.location.reload()}}])}function MRGameLogin(){sendtonative("MRGameLogin")}
function MRGameCheckAge(){sendtonative("MRGameCheckAge")}
function MRGameRoleUpate(e,f,a){var b=g_RoleAccountId,d={};d.isCreateRole=E_NewRoleName==e;d.ServerId=g_Server_Name;d.ServerName=g_Server_Name;d.RoleId=E_NewPlayerID;d.RoleName=g_RoleNameOnly;d.RoleLevel=f;d.RoleCTime=E_NewRoleTime;d.Balance=0;d.RoleVip=0;d.Reincarnation=g_relevel;d.FightingCapacity=0;d.PartyName=G_Guild_Name;d.UploadType=a;d.account=b;d.isCreateRole&&(E_NewRoleName="");e=JSON.stringify(d);console.log(e);sendtonative("MRGameRoleUpate",e)}
function upLoadRoleInfoInShahe(e,f,a){var b=g_RoleAccountId,d={};d.isCreateRole=E_NewRoleName==e;d.ServerId=g_Server_Name;d.ServerName=g_Server_Name;d.RoleId=E_NewPlayerID;d.RoleName=g_RoleNameOnly;d.RoleLevel=f;d.RoleCTime=E_NewRoleTime;d.Balance=0;d.RoleVip=0;d.Reincarnation=g_relevel;d.FightingCapacity=0;d.PartyName=G_Guild_Name;d.UploadType=a;d.account=b;d.isCreateRole&&(E_NewRoleName="");e=JSON.stringify(d);console.log(e);GameSdk&&GameSdk.uploadRoleInfo(e)}
function MRGamePay(e,f,a,b){var d={};d.Money=b;d.ProductName=f;d.ProductDec=f;d.ProductId=0;d.ProductCount=e;d.CurrencyName=E_NewRoleTime;d.ExchangeRate=a;d.ExtInfo=0;d.ServerId=g_Server_Name;d.ServerName=g_Server_Name;d.RoleId=E_NewPlayerID;d.RoleName=Laya.LocalStorage.getItem("g_RoleName");d.RoleLevel=g_levelForCaiji;d.Balance=0;d.RoleVip=0;d.PartyName=G_Guild_Name;d.account=g_RoleAccountId;e=JSON.stringify(d);sendtonative("MRGamePay",e)}
function openPayInShaHe(e,f,a,b){var d={};d.Money=b;d.ProductName=f;d.ProductDec=f;d.ProductId=0;d.ProductCount=e;d.CurrencyName=E_NewRoleTime;d.ExchangeRate=a;d.ExtInfo=0;d.ServerId=g_Server_Name;d.ServerName=g_Server_Name;d.RoleId=E_NewPlayerID;d.RoleName=Laya.LocalStorage.getItem("g_RoleName");d.RoleLevel=g_levelForCaiji;d.Balance=0;d.RoleVip=0;d.PartyName=G_Guild_Name;d.account=g_RoleAccountId;e=JSON.stringify(d);7==cur_game_type&&GameSdk.openPay(e)}
function MTPLogin(){var e={accid:99,world:0};e.openid=g_Server_Name+"/"+g_RoleName;e.roleid=E_NewPlayerID;e=JSON.stringify(e);sendtonative("MTPLogin",e)}function MRGameH5Init(){window.BRGameSdk&&window.BRGameSdk.initConf({appId:g_serverconfigtxt.brapp_id,appKey:g_serverconfigtxt.brapp_key})}
function MRGameH5Pay(e,f){if(null!=window.BRGameSdk){var a=g_serverconfigtxt.brapp_id,b=g_MRGameH5_userId,d=g_Server_Name,n=E_NewPlayerID,c=Laya.LocalStorage.getItem("g_RoleName"),h=g_RoleAccountId;$.ajax({url:g_serverconfigtxt.brapp_url,type:"POST",dataType:"json",data:{appId:a,userId:b,money:e,serverId:d,roleId:n,roleName:c,product:f,extInfo:"1"},beforeSend:function(m){},complete:function(m,g){},error:function(){},success:function(m){1==m.status?(m={appId:a,userId:b,money:e,serverId:d,roleId:n,
roleName:c,product:f,extInfo:"1",time:m.payTime,sign:m.paySign,account:h},console.log("H5\u8d26\u53f7account:"+h),window.BRGameSdk.gamePay(m)):console.log("payerr:",m.msg)}})}}
function MRGameH5RoleUpate(e,f){null!=window.BRGameSdk&&(e={appId:g_serverconfigtxt.brapp_id,userId:g_MRGameH5_userId,serverId:g_Server_Name,serverName:g_Server_Name,roleId:E_NewPlayerID,roleName:g_RoleNameOnly,roleLevel:e,roleVip:"0",balance:"0",fightingCapacity:"0",partyName:"0",reincarnation:g_relevel,profession:"0",sex:0,uploadType:f,account:g_RoleAccountId},console.log("BRSDK"),console.log(e),window.BRGameSdk.gameRole(e))}
function register(){if(cur_use_app)if(void 0===conchConfig||null===conchConfig)Laya.stage.event("show_alert_dlg",[{type:1,txt:"conchConfig\u70b8\u4e86",callfn:function(){}}]);else{var e={},f=conchConfig.getOS();e.describeKey="register";e.describeValue="addRegister";"Conch-ios"==f?e.code="register01":"Conch-android"==f&&(e.code="register02");e=JSON.stringify(e);sendtonative("onUmengEvent",e)}}
function dyRegister(e){if(cur_use_app){var f={};f.type=e;f.success=!0;e=JSON.stringify(f);sendtonative("onDouYinRegisterEvent",e)}}function dyLogin(e){cur_use_app&&sendtonative("onSetDouYinUserID",e)}
function dyPayData(e,f){var a={type:"H5\u76d2\u5b50\u652f\u4ed8"};a.name=e;a.id=Laya.Browser.now();a.channel="\u6296\u97f3";a.money=f;a.quota="1";a.success=!0;e=JSON.stringify(a);if(null!=window.appAndroidJS)if(window.appAndroidJS.onDouYinPayEvent)window.appAndroidJS.onDouYinPayEvent(e);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"onDouYinPayEvent\u65b9\u6cd5\u4e0d\u5b58\u5728",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"window.appAndroidJS\u4e0d\u5b58\u5728",
callfn:function(){}}])}function h5BoxCheck(){return-1!=(window.location.href+"").indexOf("douyinReport")?!0:!1}
function h5BoxRegister(e){var f={};f.type=e;f.success=!0;e=JSON.stringify(f);if(null!=window.appAndroidJS)if(window.appAndroidJS.onDouYinRegisterEvent)window.appAndroidJS.onDouYinRegisterEvent(e);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"onDouYinRegisterEvent\u65b9\u6cd5\u4e0d\u5b58\u5728",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"window.appAndroidJS\u4e0d\u5b58\u5728",callfn:function(){}}])}
function loginCheckYXF(){var e={token:"",username:""},f=new Laya.HttpRequest,a=["username=e135059397","memberkey=1630304376349907471","token=1630310574399790530"];e.token=a[2].split("=")[1];e.username=a[0].split("=")[1];console.log(JSON.stringify(e));f.once(Laya.Event.COMPLETE,this,function(b){1==b.code&&(console.log("<------\u767b\u5f55\u6821\u9a8c\u5931\u8d25------\x3e:"),console.log(b));0==b.code&&(console.log("<------\u767b\u5f55\u6821\u9a8c\u6210\u529f------\x3e:"),console.log(b),b=b.data,g_sdk_userID=
b.userInfo.userId,g_sdk_userName=b.userInfo.username,g_sdk_userUid=b.idInfo.id)});f.once(Laya.Event.ERROR,this,function(b){console.log("<------\u767b\u5f55\u6821\u9a8c\u5931\u8d25------\x3e:");console.log(b)});f.send("https://sdkapiv2.youxifan.com/sdkapi/members/checkToken",JSON.stringify(e),"post","json",["Content-Type","application/json;charset=UTF-8"])}
function payGameH5YXF(e){var f=new Laya.HttpRequest,a={uid:g_sdk_userUid+"",roleid:g_sdk_userID+"",money:e+"",serverid:g_server_area.nIdx+"",appKey:"6a022923229d32f5df632b4a1ad0fef4"};f.once(Laya.Event.COMPLETE,this,function(b){console.log("<------\u8bf7\u6c42\u6210\u529f------\x3e:");console.log(b);b={amount:e,roleid:g_sdk_userID,serverid:g_server_area.nIdx,productname:"\u523a\u6740(\u9f99\u541f)H5",attach:b.cporderid,productdesc:"\u5143\u5b9d",payCpSign:b.sign,cpUid:g_sdk_userUid};null!=window.YXFH5SDK&&
(console.log("\u652f\u4ed8\u6e38\u620fFan"),window.YXFH5SDK.openPay(b))});f.once(Laya.Event.ERROR,this,function(b){console.log("<------\u8bf7\u6c42\u5931\u8d25------\x3e:");console.log(b)});f.send("http://140.210.16.91:8066",JSON.stringify(a),"post","json",["Content-Type","application/json;charset=UTF-8"])}
function userAgentH5(e,f){var a=new Laya.HttpRequest;e={deviceCode:e.toString(),deviceType:f,gameZone:""};null!=g_GameConfigWEB&&null!=g_GameConfigWEB.id&&(e.gameZone=g_GameConfigWEB.id.toString());a.once(Laya.Event.ERROR,this,function(b){});a.once(Laya.Event.COMPLETE,this,function(b){console.log("<------userAgentH5\u4e0a\u62a5\u6210\u529f------\x3e:");console.log(b)});a.send("https://weblist.longzuyq.com/Statistics/SavePlayerLoginRecord",JSON.stringify(e),"post","json",["Content-Type","application/json;charset=UTF-8"])}
function refreshMap(){if(Mapmodule&&Mapdata){Mapmodule.refreshMapRes();var e=Laya.stage.getChildByName("alertLayer");e&&(e.root.visible=!1);GameApi.ShowNewNpcDlg(!1);(e=GameUtil.InstanceOfMem(AutoItemUI))&&e.removeSelf()}}function scToken(){return g_crystal_token}function scLogin(){updateToken()}function updateToken(){Laya.stage.event("reLogin")}function returnFromBackground(){3<Sendmessage.clsocket.getIPPortCount()&&Sendmessage.Refreshviewrange(1)}function onAppPause(){GameUtil.onAppPause()}
function onAppResume(){GameUtil.onAppResume()}
var GAME_IP="192.168.8.234",GAME_PORT=8088,port_key="",CM_QUERYUSERNAME=80,CM_QUERYBAGITEMS=81,CM_QUERYUSERSTATE=82,CM_QUERYCHR=100,CM_NEWCHR=101,CM_DELCHR=102,CM_SELCHR=103,CM_SELECTSERVER=104,CM_QUERYDELCHR=105,CM_GETBACKDELCHR=106,CM_NEWGUILD=823,CM_SHOWFASHION=933,CM_QUERYCLOSE=990,CM_DROPITEM=1E3,CM_PICKUP=1001,CM_OPENDOOR=1002,CM_TAKEONITEM=1003,CM_TAKEOFFITEM=1004,CM_EAT=1006,CM_BUTCH=1007,CM_MAGICKEYCHANGE=1008,CM_SOFTCLOSE=1009,CM_CLICKNPC=1010,CM_MERCHANTDLGSELECT=1011,CM_MERCHANTQUERYSELLPRICE=
1012,CM_USERSELLITEM=1013,CM_USERBUYITEM=1014,CM_USERGETDETAILITEM=1015,CM_DROPGOLD=1016,CM_1017=1017,CM_LOGINNOTICEOK=1018,CM_GROUPMODE=1019,CM_CREATEGROUP=1020,CM_ADDGROUPMEMBER=1021,CM_DELGROUPMEMBER=1022,CM_USERREPAIRITEM=1023,CM_MERCHANTQUERYREPAIRCOST=1024,CM_DEALTRY=1025,CM_DEALADDITEM=1026,CM_DEALDELITEM=1027,CM_DEALCANCEL=1028,CM_DEALCHGGOLD=1029,CM_DEALEND=1030,CM_USERSTORAGEITEM=1031,CM_USERTAKEBACKSTORAGEITEM=1032,CM_WANTMINIMAP=1033,CM_USERMAKEDRUGITEM=1034,CM_OPENGUILDDLG=1035,CM_GUILDHOME=
1036,CM_GUILDMEMBERLIST=1037,CM_GUILDADDMEMBER=1038,CM_GUILDDELMEMBER=1039,CM_GUILDUPDATENOTICE=1040,CM_GUILDUPDATERANKINFO=1041,CM_ADJUST_BONUS=1043,CM_AUCTIONCLIENTITEM=45114,CM_PUTONTHESHELF=45101,CM_OFFTHESHELF=45102,CM_PLUSAUCTIONPRICE=45103,CM_AUCTIONBUYOUT=45104,CM_AUCTIONLIST=45105,SM_AUCTIONLIST=45106,SM_AUCTIONITEMADD=45107,SM_AUCTIONITEMREMOVE=45108,SM_AUCTIONITEMUPDATE=45109,SM_AUCTIONPUTONTHESHELF=45110,SM_AUCTIONOFFTHESHELF=45111,SM_AUCTIONPLUSPRICE=45112,SM_AUCTIONBUYOUT=45113,SM_AUCTIONCLIENTITEM=
45115,CM_GUILDALLY=1044,CM_GUILDBREAKALLY=1045,CM_MISSIONINFO=1046,CM_USERBINDBUYITEM=1056,CM_CHGPASSWORD=1221,CM_SETPASSWORD=1222,CM_OPENREDPACK=1512,CM_AUTOMOVEACTION=1518,CM_SPEEDHACKUSER=10430,CM_IDPASSWORD=2001,CM_ADDNEWUSER=2002,CM_CHANGEPASSWORD=2003,CM_UPDATEUSER=2004,CM_GETBACKPASSWORD=2010,CM_PASSWORD=3E3,CM_THROW=3005,CM_HORSERUN=3009,CM_TURN=3010,CM_WALK=3011,CM_SITDOWN=3012,CM_RUN=3013,CM_HIT=3014,CM_HEAVYHIT=3015,CM_BIGHIT=3016,CM_SPELL=3017,CM_POWERHIT=3018,CM_LONGHIT=3019,CM_DIYHIT=
3020,CM_WIDEHIT=3024,CM_FIREHIT=3025,CM_CRSHIT=3026,CM_TWINHIT=3026,CM_SAY=3030,CM_TWNHIT=3037,CM_43HIT=3038,CM_SWORDHIT=3039,CM_60HIT=3060,CM_61HIT=3061,CM_62HIT=3062,CM_66HIT=3066,CM_100HIT=3067,CM_101HIT=3068,CM_102HIT=3069,CM_103HIT=3070,CM_VALIDATECHANGE=11029,CM_VALIDATE=11030,CM_ZHAOMU=10210,CM_RESOLVEITEM=15532,CM_CLIENTQUERYRESOLVE=15533,CM_FRIENDS=20005,CM_QUICKTAB=20007,CM_BOXITEM=20009,CM_EMOJI=20011,CM_QUERYUSERSET=49999,CM_GETSHOPITEMS=5002,CM_BUYSHOPITEM=5003,SM_BUYSHOPITEM_FAIL=5005,
CM_SENTSHOPITEM=25002,SM_SENTSHOPITEM_FAIL=25005,CM_GETRANKING=5007,CM_GETMYRANKING=5008,CM_TAKEOFFBOX=5511,SM_SHOWBOX=5011,CM_OPENBOX=5012,SM_OPENBOX_FAIL=5014,SM_OPENBOX_SUCCESS=5013,CM_ROTATIONBOX=5015,SM_SENDGETBOXITEMINDEX=5016,CM_SENDGETSELBOXITEM=5017,CM_QUERYSERVERNAME=5031,CM_DOMAINNAMEINFO=5033,CM_SENDSELLGAMEGOLDDALITEM=5036,CM_SENDBUYGAMEGOLDDALITEM=5038,CM_SENDCANCELGAMEGOLDDALITEM=5039,CM_OVERLAPITEM=5052,SM_OVERLAPITEM_OK=5054,SM_OVERLAPITEM_FAIL=5055,CM_HEROOVERLAPITEM=5053,SM_HEROOVERLAPITEM_OK=
5056,SM_HEROOVERLAPITEM_FAIL=5057,CM_PACKAGEITEM=5058,CM_HEROPACKAGEITEM=5059,CM_REPAIRFIRDRAGON=5066,CM_QUERYUSERSHOPS=5070,CM_GETUSERSHOPS=5071,CM_QUERYUSERSHOPITEMS=5073,CM_GETUSERSHOPITEMS=5074,CM_SEARCHSHOPITEMS=5076,CM_SEARCHGETSHOPITEMS=5077,CM_QUERYMYSHOPSELLINGITEMS=5079,CM_QUERYMYSHOPSELLEDITEMS=5080,CM_QUERYMYSHOPSTORAGEITEMS=5081,CM_GETMYSHOPITEMS=5082,CM_SENDADDTOMYSHOP=5086,CM_SENDCHANGEMYSHOPITEM=5089,CM_SENDMOVEMYSHOPITEM=5092,CM_QUERYSELECTSHOPINFO=5095,SM_QUERYSELECTSHOPINFO_FAIL=
5097,SM_VIEWBAITAN=7561,CM_BUYBAITANITEM=7562,CM_SENDSHOPSTALLSTATUS=5098,CM_SENDBUYUSERSHOPITEM=5099,CM_SENDDELETESELLEDITEM=5102,SM_OPENUPGRADEDLG=5108,CM_SENDUSERSPEEDING=5103,CM_CHANGESPEED=5104,CM_UPGRADEDLGITEM=5105,CM_CANCELUPGRADEDLGITEM=5121,CM_SENDCONNECT=5125,CM_SENDDISCONNECT=5126,CM_SENDDATA=5127,CM_CHALLENGETRY=5130,CM_CHALLENGEADDITEM=5131,CM_CHALLENGEDELITEM=5132,CM_CHALLENGECANCEL=5133,CM_CHALLENGECHGGOLD=5134,CM_CHALLENGECHGGAMEDIAMOND=5135,CM_CHALLENGEEND=5136,CM_SENDUPGRADEDIALOG=
5153,CM_SENDUPGRADEDIALOGEX=51530,CM_SETTINGGEM=5552,CM_SENDREMOVEGEM=5557,CM_HELPBUTTONCLICK=5158,CM_SENDPLEASEDRINK=5161,CM_SENDGIVENPCWINE=5164,CM_SENDSELECTFINGER=5167,CM_SENDDRINK=5168,CM_SENDGETBACKHERO=5175,CM_ASSESSMENTHERO=5178,CM_SENDHEROAUTOPRACTICE=5182,CM_SENDACUPOINTCLICK=5195,CM_SENDTRAININGMERIDIANCLICK=5196,CM_TRYUSECONTINUOUS=5198,CM_CHANGECONTINUOUSMAGICORDER=5202,CM_SENDMODULEMD5=5210,CM_SENDSHOPNAME=5211,CM_SELLOFFITEM=5216,CM_BUYSELLOFFITEM=5223,CM_GETSELLOFFDETAILITEM=5224,
CM_GUI=5239,CM_MSGWINDOWS=5241,CM_CUSTOMBUTTON=5243,CM_STORAGEVIEW=5245,CM_BEAD=5247,CM_GUESSFINGER=5250,CM_GOLDEXCHANGE=5253,CM_OVERLAPDRUG=5258,SM_OVERLAPDRUG_OK=5259,SM_OVERLAPDRUG_FAIL=5260,CM_QUERYNAVIGATE=6020,SM_NEWCHARSTATUSCHANGED=6021,SM_SELLOFFITEM=5217,SM_SELLITEM_OK=5218,SM_SELLITEM_FULL=5219,SM_SELLITEM_FAIL=5220,SM_SENDSELLITEMSLIST=5221,SM_GETSELLOFFDETAILITEM=5225,SM_BUYSELLOFFTEM_OK=5227,SM_BUYSELLOFFTEM_FAIL=5228,SM_BUYSELLOFFTEM_FULLBAG=5226,SM_H5FUNCBTN=8882,CM_HEROLOGON=1050,
CM_HEROLOGOUT=1051,CM_MASTERBAGTOHEROBAG=1100,CM_HEROBAGTOMASTERBAG=1101,CM_HEROTAKEONITEM=1102,CM_HEROTAKEOFFITEM=1103,CM_HEROEAT=1104,CM_HEROTARGET=1105,CM_HERODROPITEM=1106,CM_HEROGROUPATTACK=1108,CM_HEROMAGICKEYCHANGE=1109,CM_HEROPROTECT=1110,CM_FISHMESSAGE=1599,CM_CONFIG=1399;CM_HEROMAGICKEYCHANGE=1109;CM_CONFIG=1399;
var CM_GDY_MSG=45613,VCM_SENDSAYMSG=1E4,VCM_SENDCLOSEPAGES=10001,VCM_SENDOVER=10002,RCM_UNBINDITEM=100,RCM_AUTOBINDITEM=110,RCM_PLAYMAPMUSIC=101,RCM_RESTOREDEVICE=102,RCM_FREEMYHERO=103,RCM_AutoOrderItem=104,RCM_StartContinuousMagicAttack=105,RCM_PlayBGMgameover=106,RCM_FindModule=107,RCM_USEMAGIC=108,RCM_EatItem=109,CM_PROTOCOL=2E3;CM_IDPASSWORD=2001;CM_ADDNEWUSER=2002;CM_CHANGEPASSWORD=2003;CM_UPDATEUSER=2004;
var CM_RANDOMCODE=2006,CM_CHANGERANDOMCODE=2007,CM_3037=3037,CM_GAMEGIRD=4080,CM_POWERBLOCK=0,CM_ONHORSE=5059,CM_USERBIGSTORAGEITEM=3071,CM_USERTAKEBACKBIGSTORAGEITEM=3072,CM_OPENITEMBOXEX=16E3,CM_OPENMYBAITAN=7550,SM_OPENMYBAITAN=7551,CM_STOPBAITAN=7552,CM_ADDPAIMAIITEM=7553,SM_ADDPAIMAIITEMFAIL=7554,SM_ADDPAIMAIITEMOK=7555,CM_STARTBAITAN=7559,SM_SENDSHOPNAME=5212;CM_BUYBAITANITEM=7562;
var CM_VIEWBAITAN=8094,SM_BUYBAITANITEM=7563,CM_SENDTOGATE=6008,CM_MOVEDRAGON=65074,CM_OPENDRAGONBOOK=65075,CM_GETMISSITEM=1111,CM_ACTORBUFFCLICK=60092,CM_ACTORBUFFBUTTON=60091,CM_API_GETITEM=5598,CM_AUTOPICKUPITEMS=6256,CM_LoginConnect_CJ=2098,CM_SelChrConnect_CJ=2099,SM_SENDTICKCOUNT=980,CM_REFRESHVIEWRANGE=45204,SM_REFRESHVIEWRANGE=45205,SM_RUSH=6,SM_RUSHKUNG=7,SM_BACKSTEP=9,SM_TURN=10,SM_WALK=11,SM_SITDOWN=12,SM_RUN=13,SM_HIT=14,SM_HEAVYHIT=15,SM_BIGHIT=16,SM_SPELL=17,SM_POWERHIT=18,SM_LONGHIT=
19,SM_DIGUP=20,SM_DIGDOWN=21,SM_FLYAXE=22,SM_LIGHTING=23,SM_WIDEHIT=24,SM_FIREHIT=25,SM_CRSHIT=26,SM_ALIVE=27,SM_MOVEFAIL=28,SM_HIDE=29,SM_DISAPPEAR=30,SM_STRUCK=31,SM_DEATH=32,SM_SKELETON=33,SM_NOWDEATH=34,SM_HIT_FAIL=35,SM_TWNHIT=37,SM_TWINHIT1=37,SM_43HIT=38,SM_SWORDHIT=39,SM_HEAR=40,SM_FEATURECHANGED=41,SM_USERNAME=42,SM_WINEXP=44,SM_LEVELUP=45,SM_DAYCHANGING=46,SM_CUTE=47,SM_WINEEXP=48,SM_LOGON=50,SM_NEWMAP=51,SM_ABILITY=52,SM_HEALTHSPELLCHANGED=53,SM_MAPDESCRIPTION=54,SM_GAMEGOLDNAME=55,SM_GAMEPOINTNAME=
56,SM_GAMEGLORY=57,SM_60HIT=60,SM_61HIT=61,SM_62HIT=62,SM_66HIT=66,SM_100HIT=67,SM_101HIT=68,SM_102HIT=69,SM_103HIT=70,SM_SYSMESSAGE=100,SM_GROUPMESSAGE=101,SM_CRY=102,SM_WHISPER=103,SM_GUILDMESSAGE=104,SM_MOVEMESSAGE=105,SM_DELAYMESSAGE=106,SM_CENTERMESSAGE=107,SM_TOPCHATBOARDMESSAGE=108,SM_MOVEUPMESSAGE=109,SM_ADDITEM=200,SM_BAGITEMS=201,SM_DELITEM=202,SM_UPDATEITEM=203,SM_ADDMAGIC=210,SM_SENDMYMAGIC=211,SM_DELMAGIC=212,SM_SENDMAGICLIST=217,SM_PASSWD_FAIL=503,SM_NEWID_SUCCESS=504,SM_NEWID_FAIL=
505,SM_CHGPASSWD_SUCCESS=506,SM_CHGPASSWD_FAIL=507,SM_GETBACKPASSWD_SUCCESS=508,SM_GETBACKPASSWD_FAIL=509,SM_SENGSHOPITEMS=5006,SM_QUERYCHR=520,SM_NEWCHR_SUCCESS=521,SM_NEWCHR_FAIL=522,SM_DELCHR_SUCCESS=523,SM_DELCHR_FAIL=524,SM_STARTPLAY=525,SM_STARTFAIL=526,SM_QUERYCHR_FAIL=527,SM_OUTOFCONNECTION=528,SM_PASSOK_SELECTSERVER=529,SM_SELECTSERVER_OK=530,SM_NEEDUPDATE_ACCOUNT=531,SM_UPDATEID_SUCCESS=532,SM_UPDATEID_FAIL=533,SM_QUERYDELCHR=534,SM_GETBAKCHAR_SUCCESS=535,SM_GETBAKCHAR_FAIL=536,SM_DROPITEM_SUCCESS=
600,SM_DROPITEM_FAIL=601,SM_ITEMSHOW=610,SM_ITEMHIDE=611,SM_OPENDOOR_OK=612,SM_OPENDOOR_LOCK=613,SM_CLOSEDOOR=614,SM_TAKEON_OK=615,SM_TAKEON_FAIL=616,SM_STORAGEVIEW=5246,SM_TAKEOFFITEM=5026,SM_TAKEOFF_OK=619,SM_TAKEOFF_FAIL=620,SM_SENDUSEITEMS=621,SM_WEIGHTCHANGED=622,SM_CLEAROBJECTS=633,SM_CHANGEMAP=634,SM_EAT_OK=635,SM_EAT_FAIL=636,SM_BUTCH=637,SM_MAGICFIRE=638,SM_MAGICFIRE_FAIL=639,SM_MAGIC_LVEXP=640,SM_DURACHANGE=642,SM_MERCHANTSAY=643,SM_MERCHANTDLGCLOSE=644,SM_SENDGOODSLIST=645,SM_SENDUSERSELL=
646,SM_SENDBUYPRICE=647,SM_USERSELLITEM_OK=648,SM_USERSELLITEM_FAIL=649,SM_BUYITEM_SUCCESS=650,SM_BUYITEM_FAIL=651,SM_SENDDETAILGOODSLIST=652,SM_GOLDCHANGED=653,SM_CHANGELIGHT=654,SM_LAMPCHANGEDURA=655,SM_CHANGENAMECOLOR=656,SM_CHARSTATUSCHANGED=657,SM_SENDNOTICE=658,SM_GROUPMODECHANGED=659,SM_CREATEGROUP_OK=660,SM_CREATEGROUP_FAIL=661,SM_GROUPADDMEM_OK=662,SM_GROUPDELMEM_OK=663,SM_GROUPADDMEM_FAIL=664,SM_GROUPDELMEM_FAIL=665,SM_GROUPCANCEL=666,SM_GROUPMEMBERS=667,SM_SENDUSERREPAIR=668,SM_USERREPAIRITEM_OK=
669,SM_USERREPAIRITEM_FAIL=670,SM_SENDREPAIRCOST=671,SM_DEALMENU=673,SM_DEALTRY_FAIL=674,SM_DEALADDITEM_OK=675,SM_DEALADDITEM_FAIL=676,SM_DEALDELITEM_OK=677,SM_DEALDELITEM_FAIL=678,SM_DEALCANCEL=681,SM_DEALREMOTEADDITEM=682,SM_DEALREMOTEDELITEM=683,SM_DEALCHGGOLD_OK=684,SM_DEALCHGGOLD_FAIL=685,SM_DEALREMOTECHGGOLD=686,SM_DEALSUCCESS=687,SM_SENDUSERSTORAGEITEM=700,SM_STORAGE_OK=701,SM_STORAGE_FULL=702,SM_STORAGE_FAIL=703,SM_SAVEITEMLIST=704,SM_TAKEBACKSTORAGEITEM_OK=705,SM_TAKEBACKSTORAGEITEM_FAIL=
706,SM_TAKEBACKSTORAGEITEM_FULLBAG=707,SM_AREASTATE=708,SM_DELITEMS=709,SM_READMINIMAP_OK=710,SM_READMINIMAP_FAIL=711,SM_SENDUSERMAKEDRUGITEMLIST=712,SM_MAKEDRUG_SUCCESS=713,SM_MAKEDRUG_FAIL=714,SM_716=716,SM_CHANGEGUILDNAME=750,SM_SENDUSERSTATE=751,SM_SUBABILITY=752,SM_OPENGUILDDLG=753,SM_OPENGUILDDLG_FAIL=754,SM_SENDGUILDMEMBERLIST=756,SM_GUILDADDMEMBER_OK=757,SM_GUILDADDMEMBER_FAIL=758,SM_GUILDDELMEMBER_OK=759,SM_GUILDDELMEMBER_FAIL=760,SM_GUILDRANKUPDATE_FAIL=761,SM_BUILDGUILD_OK=762,SM_BUILDGUILD_FAIL=
763,SM_DONATE_OK=764,SM_DONATE_FAIL=765,SM_MYSTATUS=766,SM_MENU_OK=767,SM_GUILDMAKEALLY_OK=768,SM_GUILDMAKEALLY_FAIL=769,SM_GUILDBREAKALLY_OK=770,SM_GUILDBREAKALLY_FAIL=771,SM_DLGMSG=772,SM_SPACEMOVE_HIDE=800,SM_SPACEMOVE_SHOW=801,SM_RECONNECT=802,SM_GHOST=803,SM_SHOWEVENT=804,SM_SHOWEVENTEX=1804,SM_HIDEEVENT=805,SM_SPACEMOVE_HIDE2=806,SM_SPACEMOVE_SHOW2=807,SM_TIMECHECK_MSG=810,SM_ADJUST_BONUS=811,SM_NEWGUILD=822,SM_OPENMISSIONDLG=931,SM_DELETEDELAYMESSAGE=932,SM_SHOWFASHION=934,CM_GUILDMANAGEEDIT=
1066,SM_OPENHEALTH=1100,SM_CLOSEHEALTH=1101,SM_CHANGEFACE=1104,SM_BREAKWEAPON=1102,SM_INSTANCEHEALGUAGE=1103,SM_VERSION_FAIL=1106,SM_ITEMUPDATE=1500,SM_MONSTERSAY=1501,SM_NAVIGATIONINFO=1507,SM_MAGSBYSSHOW=1514,SM_PROGRESSBARDLG=1516,SM_PLAYMAGICBALLEFFECT=1517,SM_PLAYDICE=1200,SM_THROW=65069,SM_HANGUP=1519,SM_HANGUPCLOSE=1520,SM_SENDLEAVEGUILD=1790,SM_DIYHIT=2020,SM_DIYMAGIC=8815,SM_SUITITEMLIST=2049,SM_ZHAOMU=4001,SM_ADDZHAOMU=4002,SM_MISSIONNPC=5E3,SM_ATTATCKMODE=5001,SM_SENDGAMELIST=5002,SM_PASSWORD=
5009,SM_HORSERUN=5,SM_TAKEONITEM=5025,SM_UNBINDLIST=5048,SM_EFFECTIMAGELIST=5049,SM_CHANGESPEED=5069,SM_SPECIALCMD=5118,SM_WEATHER=5122,SM_ABILITYALCOHOL=5187,SM_OPENCOBWEBWINDING=5192,SM_CLOSECOBWEBWINDING=5193,SM_TRAININGNG=5203,SM_MAPCANRUN=5207,SM_PLUGFILE=5208,SM_MODULEMD5=5209,SM_BLACKMODULEMD5=5210,SM_SENDUSERADDEFFECT=5230,SM_PLAYMAGICBALLEFFECT_GOM=5231,SM_SENDUSEREFFECT=5111,SM_STONEVALUE=5236,SM_BEAD=5248,SM_BINDGOLDCHANGED=5256,SM_HIT_2=5232,SM_HIT_3=5233,SM_HIT_4=5234,SM_HIT_5=5235,SM_ITEMDESCLIST=
5252,SM_SAFEPOINT=5298,SM_SENDUSERICONGIF=5309,SM_FILTERITEM=15545,SM_BLUEMISSIONLIST=15547,SM_DOUBLEEXP=15612,SM_POISON_DECHEALTH=17001,SM_POISON_DAMAGEARMOR=17003,SM_POISON_STONE=17007,SM_STRUCK_BLAST=17019,SM_HEROGROUPATTACK=17022,SM_REBOUND=17023,SM_NPCHSPELLCHANGED=5257,SM_SERVERCONFIG=20002,SM_GETITEMINFO=20004,SM_FRIENDS=20006,SM_GETFRIENDINFO=5249,SM_EXCHGTAKEON_OK=65023,SM_EXCHGTAKEON_FAIL=65024,CM_GROUPLIST=45001,SM_GROUPLIST=45002,CM_GROUPAPPLY=45003,SM_GROUPAPPLY=45004,CM_GROUPACCEPT=
45005,CM_GROUPREFUSE=45006,SM_GROUPAPPLY_FAIL=45007,SM_GROUPACCEPT_FAIL=45008,CM_GROUPLEAVE=45009,SM_TEST=65037,SM_ACTION_MIN=65070,SM_ACTION_MAX=65071,SM_ACTION2_MIN=65072,SM_ACTION2_MAX=65073,SM_FLASHMISSIONBUTTON=65073,SM_OPENMISSIONWINDOWEX=65076,SM_CLOSEMISSIONWINDOWEX=65077,SM_NEWTASKLIST=65079,CM_NEWTASKOPERATE=65080,SM_NEWTASKOPERATE=65081,CM_GETMAIL=65089,SM_SENDMAILSTATE=65090,SM_SENDUSERMAIL=65091,CM_GETMAILCONTENT=65092,SM_SENDUSERMAILCONTENT=65093,CM_GETMAILITEM=65094,SM_UPDATEUSERMAILITEM=
65095,CM_GETALLMAIL=65096,CM_DELETEMAIL=65097,CM_DELETEALLMAIL=65098,CM_READMAIL=65099,CM_READALLMAIL=65100,SM_MAIL_OK=65101,SM_MAIL_FAIL=65102,SM_DELETEALLMAIL=65103,SM_ADDNEWMAIL=65104,SM_OFFLINETIME=10012,SM_EXTENDBAGSLOT=65105,CM_EXTENDLOCKEDBAGSLOT=65106,CM_OPENNEWGUILDDLG=1065,SM_OPENNEWGUILDDLG=785,TK_TICKTIME=1798,CM_GUILDOPERATE=1786,CM_GUILDMANAGERECRUIT=1067;CM_NEWGUILD=823;
var SM_OPENGUILDINFO=786,CM_GUILDMANAGEADD=1068,SM_OPENBIGMERCHANTBIGDLG=5065,SM_CLOSEBIGMERCHANTBIGDLG=5066,SM_LEGTZLIST=15546;SM_POISON_STONE=17007;var SM_LIGHTINGEX=5194,SM_SENDACTORBUFFS=6010;SM_MENU_OK=767;var SM_REDPACK=1510,SM_OpenRedPac=1511,CM_OpenRedPack=1512,CM_SENDREDPACKED=15613,CM_SENDREDPACKEDREPLY=15614,SM_OPENMISSIONWINDOW=65071,SM_CLOSECLIENTBUFF=6011;SM_CLOSECLIENTBUFF=6011;SM_ZHAOMU=4001;CM_ZHAOMU=10210;
var SM_NPCITEMSHOW=1521,SM_NEWGUIITEMSHOW=8887,SM_OPENNEWGUI=8886,SM_FISHMESSAGE=1299;CM_FISHMESSAGE=1599;var E_ROLE_CHANGE_HP=100001,E_ROLE_CHANGE_MP=100002,E_ROLE_POISONING_RED=100003,E_ROLE_POISONING_GRE=100004,E_ROLE_ALIVE=100005,E_ROLE_LULL=100006;SM_MERCHANTDLGCLOSE=644;
var SM_CORRECTPOINT=5566,SM_STOPBAITAN=7566,SM_AUTOGOTOXY=5027,SM_SCREENEFFECT=5051,SM_CUSTOMBUTTON=5244,SM_WEBH5VERSION=5567,SM_SENDH5CODE=5570,CM_H5CLOSE=5571,CM_H5ATTACKMODE=5573,SM_SENDWEBBROWSER=5110,SM_SOFTCLOSE=5159,SM_OPENUPGRADEDIALOG=5154,SM_SENDUPGRADEDIALOG_FAIl=5156,SM_SENDUPGRADEDIALOG_OK=5155,SM_LUASOCKET=6017,CM_LUASOCKET=6018,CM_WECHATANDQQ=2012,SM_WECHATANDQQ=2013,SM_WECHATANDQQRes=2014,SM_GETSERVERLIST=7280,SM_GETH5CONFIG=7281,SM_BIGDATA=15548,SM_USERICONLIST=812,SM_SENDUSERICON=
5109,SM_PACKAGEITEM_OK=5060,SM_PACKAGEITEM_FAIL=5061,CM_MAPLOADEND=5568,SM_QUERYUSERSHOPS=5072,SM_SEARCHSHOPITEMS=5078,SM_QUERYSELECTSHOPINFO=5096;SM_QUERYSELECTSHOPINFO_FAIL=5097;
var SM_QUERYUSERSHOPITEMS=5075,SM_SENDBUYUSERSHOPITEM_OK=5100,SM_SENDBUYUSERSHOPITEM_FAIL=5101,SM_SENDMOVEMYSHOPITEM_OK=5093,SM_SENDMOVEMYSHOPITEM_FAIL=5094,SM_QUERYMYSHOPSELLINGITEMS=5083,SM_QUERYMYSHOPSELLEDITEMS=5084,SM_QUERYMYSHOPSTORAGEITEMS=5085,SM_SENDADDTOMYSHOP_OK=5087,SM_SENDADDTOMYSHOP_FAIL=5088,SM_SENDCHANGEMYSHOPITEM_OK=5090,SM_SENDCHANGEMYSHOPITEM_FAIL=5091,SM_SENDSETTINGGEM_OK=5550,SM_SENDSETTINGGEM_FAIL=5551,SM_BOXITEM=20010,SM_HEROBAGCOUNT=821,SM_HEROBAGITEMS=902,SM_MASTERBAGTOHEROBAG_OK=
817,SM_MASTERBAGTOHEROBAG_FAIL=818,SM_HEROBAGTOMASTERBAG_OK=819,SM_HEROBAGTOMASTERBAG_FAIL=820,SM_HEROADDITEM=905,SM_HERODELITEM=906,SM_HEROUPDATEITEM=927,SM_HEROTAKEON_OK=907,SM_HEROTAKEON_FAIL=908,SM_HERODROPITEM_SUCCESS=920,SM_HERODROPITEM_FAIL=921,SM_HEROEAT_OK=911,SM_HEROEAT_FAIL=912,SM_HERODELITEMS=928,SM_HEROTAKEOFF_OK=909,SM_HEROTAKEOFF_FAIL=910,SM_HEROCHANGEITEM=929,SM_HERODURACHANGE=919,SM_HEROPACKAGEITEM_OK=5062,SM_HEROPACKAGEITEM_FAIL=5063,SM_HEROLOGOUT=896,SM_HEROLOGON=897,SM_HEROLOGON_OK=
930,SM_HEROLOGOUT_OK=918,SM_HEROLOYAL=898,SM_HEROABILITY=900,SM_HEROSUBABILITY=901,SM_SENDHEROUSEITEMS=903,SM_SENDMYHEROMAGIC=904,SM_HEROADDMAGIC=913,SM_HERODELMAGIC=914,SM_HEROMAGIC_LVEXP=925,SM_HEROLEVELUP=922,SM_HEROWINEXP=923,SM_HEROABILITYNG=5189,SM_HEROABILITYALCOHOL=5190,SM_HEROABILITYMERIDIANS=5191,SM_HEROWEIGHTCHANGED=924,SM_HEROANGERVALUE=916,SM_SENDSUPERSHILEDEFFECT=5112,SM_TZDESCLIST=5352,SM_OPENITEMBOXEX=6E3,SM_AUTOPICKUPITEMS=6255,SM_CJ=714,SM_API_GETITEM=5599,SM_RANDOMCODE=2008,SM_SENDNEWLINEMSG=
110,SM_SENDH5TOPEFFECT=5667,SM_UPDATIDCARD=5330,SM_UPDATIDCARD_FAIL=5331,CM_UPDATIDCARD=5329,CM_GETGAMELIST=8280,SM_ITEMSCORE=9098,SM_SERVERCLOSE=10011,SM_RUSHKUNG_STOP=3007,CM_BUYCRISTAL=25010,SM_BUYCRISTAL=25011,CM_SELLCRISTAL=25012,SM_SELLCRISTAL=25013,SM_CRISTALINFO=25014,SM_OPENCRISTALFORM=25019,CM_QUERYCRISTALINFO=25015,SM_UPDATEITEMSCORE=5265,SM_ITEMSCORETEXT=9100,CM_GUILNEWCREATE=1787,CM_GUILOPENNEWCREATE=1788,SM_SENDGUILDCREATESTUFF=1789,CM_NEWRANKING=45200,SM_NEWRANKING=45201,CM_RANKINGUSERSTATE=
45202,CM_SLAVETARGET=1801,CM_SERVERUNIXTIME=45206,SM_SERVERUNIXTIME=45207,CM_GETSTATUSCHANGED=45208,CM_TEST=2022,ET_MAPEFFECT=100,ET_FIRE=5,ET_KUNMO=4,ET_STONEMINE=11,ET_PILESTONES=3,ET_DIGOUTZOMBI=1,ET_HOLYCURTAIN=4,ET_SCULPEICE=6,ET_FIRELevel1=115,ET_FIRELevel2=116,ET_FIRELevel3=117,ET_ICEPEAK=10,ET_EYEOFDEATH=52,ET_LOCK=51;ET_MAPEFFECT=100;
var ET_FIREFLOWER_0=78,ET_FIREFLOWER_1=79,ET_FIREFLOWER_2=80,ET_FIREFLOWER_3=81,ET_FIREFLOWER_4=82,ET_FIREFLOWER_5=83,ET_FIREFLOWER_6=84,ET_FIREFLOWER_7=85,ET_FIREFLOWER_8=86,ET_FIREDRAGON=87,ET_FOUNTIAN=88,ET_LAVA=16,mtReady=0,mtFly=1,mtExplosion=2,mtFlyAxe=3,mtFireWind=4,mtFireGun=5,mtLightingThunder=6,mtThunder=7,mtExploBujauk=8,mtBujaukGroundEffect=9,mtKyulKai=10,mtFlyArrow=11,mt12=12,mt13=13,mt14=14,mt15=15,mt16=16,CCMD_CONFIG=1,SCMD_CONFIG=1,CCMD_ROOM=2,SCMD_ROOM=2,SM_PLAYSOUND=5064,SM_PLAYMUSIC=
5064;function TSocketHeader(e){var f={};f.dwCode1=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)>>>0;f.wIdent=e[4]+(e[5]<<8)>>>0;f.wReserved=e[6]+(e[7]<<8)>>>0;f.dwCode2=e[8]+(e[9]<<8)+(e[10]<<16)+(e[11]<<24)>>>0;f.dwCrc=e[12]+(e[13]<<8)+(e[14]<<16)+(e[15]<<24)>>>0;f.nLength=e[16]+(e[17]<<8)+(e[18]<<16)+(e[19]<<24);return f}
function TMessageBodyWL(e){var f={};f.lParam1=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)>>>0;f.lParam2=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24)>>>0;f.lParam3=e[8]+(e[9]<<8)+(e[10]<<16)+(e[11]<<24)>>>0;f.lTag1=e[12]+(e[13]<<8)+(e[14]<<16)+(e[15]<<24)>>>0;f.lTag2=e[16]+(e[17]<<8)+(e[18]<<16)+(e[19]<<24)>>>0;return f}
function TMessageBodyL(e){var f={};f.lParam1=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)>>>0;f.lParam2=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24)>>>0;f.lParam3=e[8]+(e[9]<<8)+(e[10]<<16)+(e[11]<<24)>>>0;return f}function TMessageBodyW(e){var f={};f.Param1=e[0]+(e[1]<<8)>>>0;f.Param2=e[2]+(e[3]<<8)>>>0;f.Tag1=e[4]+(e[5]<<8)>>>0;f.Tag2=e[6]+(e[7]<<8)>>>0;return f}function TFeature(e,f){var a={};a.feature=e;a.buffer=f;return a}
function TCharDesc(e){var f={};f.feature=e[0]>>>0;f.status=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24)>>>0;return f}
function THumFeature(e){var f={};f.wRace=e[0]+(e[1]<<8)>>>0;f.wWeapon=e[2]+(e[3]<<8)>>>0;f.wDress=e[4]+(e[5]<<8)>>>0;f.wShield=e[6]+(e[7]<<8)>>>0;f.btGender=e[8]>>>0;f.btJob=e[9]>>>0;f.btHair=e[10]>>>0;f.btHorseType=e[11]>>>0;f.btCaseltGuild=e[12]>>>0;f.boShopStall=e[13]>>>0;f.btZhaoMuCount=e[14]>>>0;f.btColor=e[15]>>>0;f.btMagBubbleLevel=e[16]>>>0;f.wDressEffType=e[18]+(e[19]<<8)>>>0;f.nWeaponEffectIndex=e[20]+(e[21]<<8);f.wWeaponEffectOffSet=e[22]+(e[23]<<8)>>>0;f.nDressEffectIndex=e[24]+(e[25]<<
8);f.wDressEffectOffSet=e[26]+(e[27]<<8)>>>0;f.nSex=e[28]>>>0;f.nIcon=e[30]+(e[31]<<8)>>>0;65530<=f.nIcon&&(f.nIcon=-1);f.boLeader=e[32];f.boWeaponNormalDraw=e[33];var a=GameUtil.slice(e,35,61);f.sIconName=gbkByteArr2UcsStr(a);f.nWeaponMakeIndex=e[64]+(e[65]<<8)+(e[66]<<16)+(e[67]<<24);f.btIconColor=e[68]>>>0;f.boDressNormalDraw=e[69];f.btHat=e[70];f.boPhantom=e[71];f.btAlpha=e[72];f.wShieldEffectOffSet=0;f.nReserve=0;f.boShieldNormalDraw=e[73];f.nShieldEffectIndex=e[74]+(e[75]<<8);65530<=f.nShieldEffectIndex&&
(f.nShieldEffectIndex=-1);f.wShieldEffectOffSet=e[76]+(e[77]<<8)>>>0;f.nReserve=e[80]+(e[81]<<8)+(e[82]<<16)+(e[83]<<24);return f}
function TShopClientItem(e){var f={};f.s=TStdItem(GameUtil.slice(e,0,258));f.GameMoney=e[258];var a=260;f.ImageIndex=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ImageCount=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);a++;f.Memo1=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+18));a+=19;f.Memo2=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+150));f.Dura=f.s.DuraMax;f.DuraMax=f.s.DuraMax;return f}
function TMonFeature(e){var f={};f.wRaceImg=e[0]+(e[1]<<8)>>>0;f.wWeapon=e[2]+(e[3]<<8)>>>0;f.wAppr=e[4]+(e[5]<<8)>>>0;f.btColor=e[6]>>>0;f.reserved=e[7]>>>0;return f}
function TAbility(e){var f={},a=new Uint32Array(e.buffer,0,96);f.Level=a[0];f.AC=a[1];f.MaxAC=a[2];f.MAC=a[3];f.MaxMAC=a[4];f.DC=a[5];f.MaxDC=a[6];f.MC=a[7];f.MaxMC=a[8];f.SC=a[9];f.MaxSC=a[10];f.HP=a[11];f.MP=a[12];f.MaxHP=a[13];f.MaxMP=a[14];f.Exp=a[15];f.MaxExp=a[16];f.Weight=a[17];f.MaxWeight=a[18];f.WearWeight=a[19];f.MaxWearWeight=a[20];f.HandWeight=a[21];f.MaxHandWeight=a[22];f.CreditPoint=a[23];f.NewValue=[];f.NewValue[0]=e[96];f.NewValue[1]=e[97];f.NewValue[2]=e[98];f.NewValue[3]=e[99];f.NewValue[4]=
e[100];f.NewValue[5]=e[101];f.NewValue[6]=e[102];f.NewValue[7]=e[103];f.NewValue[8]=e[104];f.NewValue[9]=e[105];f.NewValue[10]=e[106];f.NewValue[11]=e[107];f.NewValue[12]=e[108];f.NewValue[13]=e[109];f.NewValue[14]=e[110];f.NewValue[15]=e[111];return f}
function TNakedAbility(e){var f={};f.AC=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.MaxAC=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.MAC=e[8]+(e[9]<<8)+(e[10]<<16)+(e[11]<<24);f.MaxMAC=e[12]+(e[13]<<8)+(e[14]<<16)+(e[15]<<24);f.DC=e[16]+(e[17]<<8)+(e[18]<<16)+(e[19]<<24);f.MaxDC=e[20]+(e[21]<<8)+(e[22]<<16)+(e[23]<<24);f.MC=e[24]+(e[25]<<8)+(e[26]<<16)+(e[27]<<24);f.MaxMC=e[28]+(e[29]<<8)+(e[30]<<16)+(e[31]<<24);f.SC=e[32]+(e[33]<<8)+(e[34]<<16)+(e[35]<<24);f.MaxSC=e[36]+(e[37]<<8)+(e[38]<<16)+(e[39]<<24);
f.HP=e[40]+(e[41]<<8)+(e[42]<<16)+(e[43]<<24);f.MP=e[44]+(e[45]<<8)+(e[46]<<16)+(e[47]<<24);f.Hit=e[48]+(e[49]<<8)+(e[50]<<16)+(e[51]<<24);f.Speed=e[52]+(e[53]<<8)+(e[54]<<16)+(e[55]<<24);f.X2=e[56]+(e[57]<<8)+(e[58]<<16)+(e[59]<<24);return f}function TPoisonWeapon(e){var f={};f.nRate=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.nDecHp=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.wBaseTime=e[8]+(e[9]<<8)>>>0;f.wRandTime=e[10]+(e[11]<<8)>>>0;return f}
function TDropItem(){return{x:0,y:0,id:0,Looks:0,Color:0,Name:"",DBName:"",Width:0,Height:0,Visible:!1,FlashTime:0,FlashStepTime:0,FlashStep:0,BoFlash:!1,ShowFlash:!1,ItemTexture:0,ShowNameTime:0,ShowName:!1,ShowItem:0,NameImageInfo:0,dwGhostTick:0,DropEffectFileIndex:-1,DropEffectStartOffSet:0,DropEffectImageCount:0,DropEffectFrameTime:0,DropEffectOffsetX:0,DropEffectOffsetY:0,DropEffectNormalDraw:!1,DropTickCount:0,DropIdxImage:0}}
function TStdItem(e){var f={};f.nIdx=e[0]+(e[1]<<8)>>>0;f.Name=gbkByteArr2UcsStr(GameUtil.slice(e,3,33));f.DBName=gbkByteArr2UcsStr(GameUtil.slice(e,34,63));f.StdMode=e[64]>>>0;f.Shape=e[65]+(e[66]<<8)>>>0;f.Weight=e[67]>>>0;f.AniCount=e[68]+(e[69]<<8);f.Source=127<e[70]?e[70]-256:e[70];f.Reserved=e[71]>>>0;f.NeedIdentify=e[72]>>>0;f.Looks=e[73]+(e[74]<<8)>>>0;f.DuraMax=e[75]+(e[76]<<8)>>>0;f.Reserved1=e[77]+(e[78]<<8)>>>0;f.HP=e[79]+(e[80]<<8)+(e[81]<<16)+(e[82]<<24);f.MP=e[83]+(e[84]<<8)+(e[85]<<
16)+(e[86]<<24);f.AC=e[87]+(e[88]<<8)+(e[89]<<16)+(e[90]<<24);f.MaxAC=e[91]+(e[92]<<8)+(e[93]<<16)+(e[94]<<24);f.MAC=e[95]+(e[96]<<8)+(e[97]<<16)+(e[98]<<24);f.MaxMAC=e[99]+(e[100]<<8)+(e[101]<<16)+(e[102]<<24);f.DC=e[103]+(e[104]<<8)+(e[105]<<16)+(e[106]<<24);f.MaxDC=e[107]+(e[108]<<8)+(e[109]<<16)+(e[110]<<24);f.MC=e[111]+(e[112]<<8)+(e[113]<<16)+(e[114]<<24);f.MaxMC=e[115]+(e[116]<<8)+(e[117]<<16)+(e[118]<<24);f.SC=e[119]+(e[120]<<8)+(e[121]<<16)+(e[122]<<24);f.MaxSC=e[123]+(e[124]<<8)+(e[125]<<
16)+(e[126]<<24);f.Need=e[127]+(e[128]<<8)+(e[129]<<16)+(e[130]<<24);f.NeedLevel=e[131]+(e[132]<<8)+(e[133]<<16)+(e[134]<<24);f.Price=e[135]+(e[136]<<8)+(e[137]<<16)+(e[138]<<24);f.OverLap=e[139]+(e[140]<<8)>>>0;f.Color=e[141]>>>0;f.Light=e[142]>>>0;f.Stock=e[143]+(e[144]<<8)+(e[145]<<16)+(e[146]<<24);f.btValue=GameUtil.slice(e,147,161);f.btPower=e[161]>>>0;f.btNoHero=e[162]>>>0;f.btUpgradeCount=e[163]>>>0;f.btUpgradeCount2=e[164]>>>0;f.nCurrency=e[165]>>>0;f.AddHP=e[166]+(e[167]<<8)+(e[168]<<16)+
(e[169]<<24);f.AddMP=e[170]+(e[171]<<8)+(e[172]<<16)+(e[173]<<24);f.AddAC=e[174]+(e[175]<<8)+(e[176]<<16)+(e[177]<<24);f.AddMAC=e[178]+(e[179]<<8)+(e[180]<<16)+(e[181]<<24);f.AddDC=e[182]+(e[183]<<8)+(e[184]<<16)+(e[185]<<24);f.AddSC=e[186]+(e[187]<<8)+(e[188]<<16)+(e[189]<<24);f.AddMC=e[190]+(e[191]<<8)+(e[192]<<16)+(e[193]<<24);f.NewValue=GameUtil.slice(e,194,214);f.IsBind=e[214];f.Expand1=e[215];f.HideHair=e[216];var a=217;f.EffectFileIndex=e[a++]+(e[a++]<<8);f.EffectStartOffSet=e[a++]+(e[a++]<<
8)>>>0;f.EffectImageCount=e[a++]>>>0;f.EffectFrameTime=e[a++]+(e[a++]<<8);f.EffectOffsetX=e[a++]+(e[a++]<<8);f.EffectOffsetY=e[a++]+(e[a++]<<8);f.BodyEffectFileIndex=e[a++]+(e[a++]<<8);f.BodyEffectStartOffSet=e[a++]+(e[a++]<<8)>>>0;f.BodyEffectImageCount=e[a++]>>>0;f.BodyEffectFrameTime=e[a++]+(e[a++]<<8)>>>0;f.BodyEffectOffsetX=e[a++]+(e[a++]<<8);f.BodyEffectOffsetY=e[a++]+(e[a++]<<8);f.PoisonWeapon=TPoisonWeapon(GameUtil.slice(e,a,a+12));a+=12;f.Effect=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);
f.Upgrade=e[a++]>>>0;f.BodyEffectNormalDraw=e[a++];f.EffectNormalDraw=e[a];return f}function TItemSrcClient(e){var f={},a=0;f.MakeType=e[a++]>>>0;f.MakeDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(e,a,a+8));a+=9;f.MakeObject=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+30));a+=31;f.MakePlay=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+30));a+=31;f.MakeMap=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+30));return f}
function TOStdItem(e){var f={};f.Name=gbkByteArr2UcsStr(GameUtil.slice(e,1,15));f.StdMode=e[15]>>>0;f.Shape=e[16]>>>0;f.Weight=e[17]>>>0;f.AniCount=e[18]>>>0;f.Source=e[19];f.Reserved=e[20]>>>0;f.NeedIdentify=e[21]>>>0;f.Looks=e[22]+(e[23]<<8)>>>0;f.DuraMax=e[24]+(e[25]<<8)>>>0;f.AC=e[26]+(e[27]<<8)+(e[28]<<16)+(e[29]<<24);f.MaxAC=e[30]+(e[31]<<8)+(e[32]<<16)+(e[33]<<24);f.MAC=e[34]+(e[35]<<8)+(e[36]<<16)+(e[37]<<24);f.MaxMAC=e[38]+(e[39]<<8)+(e[40]<<16)+(e[41]<<24);f.DC=e[42]+(e[43]<<8)+(e[44]<<
16)+(e[45]<<24);f.MaxDC=e[46]+(e[47]<<8)+(e[48]<<16)+(e[49]<<24);f.MC=e[50]+(e[51]<<8)+(e[52]<<16)+(e[53]<<24);f.MaxMC=e[54]+(e[55]<<8)+(e[56]<<16)+(e[57]<<24);f.SC=e[58]+(e[59]<<8)+(e[60]<<16)+(e[61]<<24);f.MaxSC=e[62]+(e[63]<<8)+(e[64]<<16)+(e[65]<<24);f.Need=e[66]>>>0;f.NeedLevel=e[67]>>>0;f.w26=e[68]+(e[69]<<8)>>>0;f.Price=e[70]+(e[71]<<8)+(e[72]<<16)+(e[73]<<24);return f}
function TClientItem(e){var f={},a=258;f.s=TStdItem(GameUtil.slice(e,0,a));f.MakeIndex=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Dura=e[a++]+(e[a++]<<8)>>>0;f.DuraMax=e[a++]+(e[a++]<<8)>>>0;f.ItemSrc=TItemSrcClient(GameUtil.slice(e,a,a+102));a+=102;f.nFlutCount=e[a++]>>>0;f.nGemCount=e[a++]>>>0;f.GemItem=[];for(var b=0;8>b;b++)f.GemItem[b]=TOStdItem(GameUtil.slice(e,a,a+74)),a+=74;f.btResolve=e[a++];f.boDropFree=e[a++];f.TUserItemAdd=TUserItemAdd(e,a);return f}
function TUserItemAdd(e,f){var a={};a.nMakeIndex=e[f++]+(e[f++]<<8)+(e[f++]<<16)+(e[f++]<<24);var b=e[f++];a.sTitle=gbkByteArr2UcsStr(GameUtil.slice(e,f,b+f));f+=20;a.nColor=e[f++];a.arrAbilType=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMABIL_LEN));f+=CUSTOMITEMABIL_LEN;a.arrAbilColor=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMABIL_LEN));f+=CUSTOMITEMABIL_LEN;a.arrAbilValue=SetCustom(4*CUSTOMITEMABIL_LEN,"longword",GameUtil.slice(e,f,f+4*CUSTOMITEMABIL_LEN));
f+=4*CUSTOMITEMABIL_LEN;a.arrAbilMethod=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMABIL_LEN));f+=CUSTOMITEMABIL_LEN;a.arrAbilLine=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMABIL_LEN));f+=CUSTOMITEMABIL_LEN;a.arrPrgbarCaption=SetCustom(31*CUSTOMITEMPROGRESSBAR_LEN,"string",GameUtil.slice(e,f,f+31*CUSTOMITEMPROGRESSBAR_LEN));f+=31*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarColor=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMPROGRESSBAR_LEN));
f+=CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarLevel=SetCustom(2*CUSTOMITEMPROGRESSBAR_LEN,"word",GameUtil.slice(e,f,f+2*CUSTOMITEMPROGRESSBAR_LEN));f+=2*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarEnabled=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMPROGRESSBAR_LEN));f+=CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarImg=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMPROGRESSBAR_LEN));f+=CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarValueCur=SetCustom(4*CUSTOMITEMPROGRESSBAR_LEN,
"longword",GameUtil.slice(e,f,f+4*CUSTOMITEMPROGRESSBAR_LEN));f+=4*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarValueMax=SetCustom(4*CUSTOMITEMPROGRESSBAR_LEN,"longword",GameUtil.slice(e,f,f+4*CUSTOMITEMPROGRESSBAR_LEN));f+=4*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarShowMode=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(e,f,f+CUSTOMITEMPROGRESSBAR_LEN));return a}
function SetCustom(e,f,a){for(var b=[],d=0;d<e;)if("string"==f){var n=a[d++];n=gbkByteArr2UcsStr(GameUtil.slice(a,d,n+d));b.push(n);d+=30}else"word"==f?(b.push(a[d]+(a[d+1]<<8)),d+=2):"longword"==f?(b.push(a[d]+(a[d+1]<<8)+(a[d+2]<<16)+(a[d+3]<<24)),d+=4):(b.push(a[d]),d++);return b}function TClientMagic(e){var f={};f.Key=e[0];f.Level=e[1];f.CurTrain=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.TrainLevel=e[8]+(e[9]<<8)+(e[10]<<16)+(e[11]<<24);f.Def=TMagic(GameUtil.slice(e,12,e.length));return f}
function TUserStateInfo(e){var f={};f.RaceServer=(e[0]<<0)+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.Feature=TFeature((e[4]<<0)+(e[5]<<8)+(e[6]<<16)+(e[7]<<24),GameUtil.slice(e,8,263));var a=264;f.btshowGodBless=e[a]<<0;f.btSndacasketState=e[a+1]<<0;a+=2;for(var b=[],d=0;12>d;d++)b[d]=e[a+d];f.OpenedGodBless=b;a+=12;f.UserName=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+1+e[a]));a+=34;f.NAMECOLOR=(e[a]<<0)+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=317;f.GuildName=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+e[316]));
a=348;f.GuildRankName=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+e[347]));a+=30;f.UseItems=[];for(d=0;53>d;d++)f.UseItems.push(TClientItem(GameUtil.slice(e,d*g_itemSize+a,(d+1)*g_itemSize+a)));a+=53*g_itemSize;f.UserIconList=[];for(d=0;30>d;d++)f.UserIconList.push(TClientItem(GameUtil.slice(e,d*g_itemSize+a,(d+1)*g_itemSize+a)));return f}
function TUserItem(e){var f={};f.MakeIndex=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.wIndex=e[4]+(e[5]<<8)>>>0;f.Dura=e[6]+(e[7]<<8)>>>0;f.DuraMax=e[8]+(e[9]<<8)>>>0;e=GameUtil.slice(e,10,e.length);f.MsgStruct=e;return f}
function TUserItem_0(e){var f={},a=GameUtil.slice(e,0,14);f.btValue=a;f.btEffect=e[14]>>>0;f.btUpgradeCount=e[15]>>>0;f.boStartTime=e[16];f.nLimitTime=e[17]+(e[18]<<8)+(e[19]<<16)+(e[20]<<24);f.nFlutCount=e[21]>>>0;a=GameUtil.slice(e,22,38);f.nGemIdx=a;a=GameUtil.slice(e,38,45);f.OldbtValue=a;a=GameUtil.slice(e,45,65);f.btNewValue=a;f.btColor=e[65]>>>0;f.boIsBind=e[66];f.boCanotUserDropBindItem=e[67];f.boCanotUserDealBindItem=e[68];f.boCanotUserStorageBindItem=e[69];f.boCanotUserRepairBindItem=e[70];
f.boCanotUserSellBindItem=e[71];f.boCanotUserScatterBindItem=e[72];f.boDropFree=e[73];f.btValue2=e[74]>>>0;return f}function TUserItem_1(e){var f={};f.boUsed=e[0];var a=GameUtil.slice(e,1,15);f.sMapDesc=a;a=GameUtil.slice(e,15,36);f.sMapName=a;f.wCurrx=e[36]+(e[37]<<8)>>>0;f.wCurrY=e[38]+(e[39]<<8)>>>0;return f}function TUserItem_2(e){var f={},a=GameUtil.slice(e,0,8);f.dEggLastHatchDateTime=a;f.boEggHatchSucceeded=e[8];e=GameUtil.slice(e,9,17);f.dEggHatchSucceeded=e;return f}
function TMagic(e){var f={};f.MagicAttr=e[0];f.wMagicId=e[2]+(e[3]<<8);f.sMagicName=gbkByteArr2UcsStr(GameUtil.slice(e,5,35));f.btEffectType=e[35];f.btEffect=e[36];f.bt11=e[37];f.wSpell=e[38]+(e[39]<<8);f.wPower=e[40]+(e[41]<<8);f.TrainLevel=GameUtil.slice(e,42,57);f.w02=e[58]+(e[59]<<8);f.MaxTrain=[];for(var a=60;75>a;a+=4)f.MaxTrain.push(e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24));f.btTrainLv=e[124];f.btJob=e[125];f.wMagicIdx=e[126]+(e[127]<<8);f.dwDelayTime=e[128]+(e[129]<<8)+(e[130]<<16)+(e[131]<<
24);f.btDefSpell=e[132];f.btDefPower=e[133];f.wMaxPower=e[134]+(e[135]<<8);f.btDefMaxPower=e[136];f.sDescr=gbkByteArr2UcsStr(GameUtil.slice(e,138,156));return f}function pingjie(e,f,a){e.push(f.length);for(var b=0;b<a;b++)null==f[b]?e.push(0):e.push(f[b].charCodeAt())}
function objEncode6BitBuf(e){if(e){var f=[],a;for(a in e)null!=e[a]&&"function"!=typeof e[a]&&(f.push((e[a]&255)>>0),f.push((e[a]&65280)>>8),f.push((e[a]&16711680)>>16),f.push((e[a]&4278190080)>>24));return fnEncode6BitBuf(f,f.length)}}
function TUserEntry(e,f,a,b,d){this.sAccount_20=e.toLowerCase();this.sPassword_20=a;this.sUserName_20=e.toLowerCase();this.sSSNo_18="1";this.sPhone_10="operation";this.sQuiz_20=null==b?"3":b;this.sAnswer_12=null==d?"4":d;this.sEMail_40=f;TUserEntry.prototype.toArray=function(n){var c=[],h;for(h in this)if("function"!=typeof this[h]){var m=h.split("_");if("sAccount"==m[0]||"sPassword"==m[0])m[1]=n;pingjie(c,this[h],parseInt(m[1]))}return c};TUserEntry.prototype.strFormat=function(n,c){var h="";if(n.length<
c)for(var m=0;m<c-n.length;m++)h+="*";c=(n+h).split("");c.unshift(n.length);return c}}function ping_jie(e,f,a){e.push(f.length);for(var b=0;b<a;b++)null==f[b]?e.push(0):e.push(f[b].charCodeAt())}
function TUserEntryAdd(e,f,a,b,d){this.sQuiz2_20=null==a?"5":a;this.sAnswer2_12=null==b?"6":b;this.sBirthDay_10=null==d?"1990/01/01":d;this.sMobilePhone_13="operation";this.sMemo_42=e.toLowerCase();this.sMemo2_42=f;TUserEntryAdd.prototype.toArray=function(n){var c=[],h;for(h in this)if("function"!=typeof this[h]){var m=h.split("_");if("sMemo"==m[0]||"sMemo2"==m[0])10==n?m[1]=42:m[1]=32;ping_jie(c,this[h],parseInt(m[1]))}return c};TUserEntryAdd.prototype.strFormat=function(n,c){var h="";if(n.length<
c)for(var m=0;m<c-n.length;m++)h+="*";c=(n+h).split("");c.unshift(n.length);return c}}function TDeleteHumanInfo(e){var f={};f.sChrName=gbkByteArr2UcsStr(GameUtil.slice(e,1,31));f.nLevel=e[32]+(e[33]<<8)+(e[34]<<16)+(e[35]<<24);f.btJob=e[36];f.btSex=e[37];return f}function TNewValueAdd(e){var f={},a=0;f.Index=e[a];a+=4;f.Value=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);return f}
function TLEGSuitItemInfo(e){var f={},a=384;f.btValueMode=e[a];a+=4;f.MaxHP=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24)>>>0;f.MaxMP=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24)>>>0;f.AC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MAC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.DC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.SC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.HitPoint=e[a++];f.SpeedPoint=e[a++];f.nAntiMagic=e[a++];f.nAntiPoison=
e[a++];f.nPoisonRecover=e[a++];f.HealthRecover=e[a++];f.SpellRecover=e[a++];f.boItemSkill=[];for(var b=0;16>b;b++)f.boItemSkill[b]=0<e[a++];a++;f.btNewValue=[];for(b=0;11>b;b++)f.btNewValue[b]=TNewValueAdd(GameUtil.slice(e,a,a+8)),a+=8;return f}
function TLEGTzInfo(e){var f={};f.TzIndex=e[0]+(e[1]<<8)>>>0;f.nItemColor=e[2];f.nAbilColor=e[3];f.ClientShow=e[4];f.sHint=gbkByteArr2UcsStr(GameUtil.slice(e,6,6+(e[5]>>>0)));f.UserItems=gbkByteArr2UcsStr(GameUtil.slice(e,127,127+(e[126]>>>0)));f.Attribute=new TLEGSuitItemInfo(e);return f}function TBlueMission(e){var f={};f.nLabel=e[0];f.nID=e[2]+(e[3]<<8)>>>0;f.sCaption=gbkByteArr2UcsStr(GameUtil.slice(e,5,5+(e[4]>>>0)));return f}
function TOpenRedPacket(e){var f={},a=0,b=e[a];f.sUserName=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+1+b));a=31;f.nGoldValue=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);a=35;b=e[a];f.sTime=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+1+b));a=66;b=e[a];f.sNote=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+1+b));return f}
function TRedPacketInfo(e){var f={};f.sUserName=gbkByteArr2UcsStr(GameUtil.slice(e,1,1+e[0]));var a=31;f.nGoldNum=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.nRedPacketCount=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.nGoldType=e[a++];f.nType=e[a++];f.nRedRecog=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.OpenRedPacket=[];for(var b=0;100>b;b++)f.OpenRedPacket[b]=TOpenRedPacket(GameUtil.slice(e,a,a+97)),a+=97;f.nGoldBalance=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.nRandomGold=e[a++]+
(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);b=GameUtil.slice(e,a,a+8);f.nRedPacketTime=GameUtil.GetJSDateTimeFromDelphi8Bytes(b);a=e[a+9];f.sRedPacketTime=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+a));a=e[a+21];f.sMsg=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+a));f.bOpened=e[a+30];return f}function MissTabName(){return{sTabName:"",MissInf:[]}}function MyTaskInf(){return{sTabName:"",sShowtxt:"",sMemo:"",sNvStr:"",sCmdGo:""}}function TaskGloba(){return{sName:"",nCount:""}}
function TBaiTanData(e){var f={};f.nRecogId=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.Item=[];f.PriceGold=[];f.Price=[];for(var a=4,b=0;20>b;b++){var d=new TClientItem(GameUtil.slice(e,b*g_itemSize+a,(b+1)*g_itemSize+a));f.Item.push(d)}a=f.Item.length*g_itemSize+a;for(b=0;20>b;b++)f.PriceGold.push(e[a++]);for(b=0;20>b;b++)d=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24),a+=4,f.Price.push(d);return f}function TloadNpcImage(){return{Type:0,sName:"",nX:0,nY:0,sCmd:"",sText:"",sStr:""}}
function cardGameInfo(){this.deskID=g_cardGame_infoList[0];this.lastCardName=g_cardGame_infoList[1];this.lastChooseName=g_cardGame_infoList[2];this.lastOutCardType=g_cardGame_infoList[3];this.lastOutCardValue=g_cardGame_infoList[4];this.underCards=g_cardGame_infoList[5];this.isGameOver=g_cardGame_infoList[6];this.baseGoldPer=g_cardGame_infoList[7];this.multiple=g_cardGame_infoList[8];this.lastOutCard=g_cardGame_infoList[9];this.role1name=g_cardGame_infoList[10];this.role1roleCardsTab=g_cardGame_infoList[11];
this.role1chooseDiZhuChance=g_cardGame_infoList[12];this.role1isDiZhu=g_cardGame_infoList[13];this.role1outCardChance=g_cardGame_infoList[14];this.role1isReady=g_cardGame_infoList[15];this.role1isWinner=g_cardGame_infoList[16];this.role1winnerNum=g_cardGame_infoList[17];this.role1score=g_cardGame_infoList[18];this.role1isCollocation=g_cardGame_infoList[19];this.role1gameGold=g_cardGame_infoList[20];this.role2name=g_cardGame_infoList[21];this.role2roleCardsTab=g_cardGame_infoList[22];this.role2chooseDiZhuChance=
g_cardGame_infoList[23];this.role2isDiZhu=g_cardGame_infoList[24];this.role2outCardChance=g_cardGame_infoList[25];this.role2isReady=g_cardGame_infoList[26];this.role2isWinner=g_cardGame_infoList[27];this.role2winnerNum=g_cardGame_infoList[28];this.role2score=g_cardGame_infoList[29];this.role2isCollocation=g_cardGame_infoList[30];this.role2gameGold=g_cardGame_infoList[31];this.role3name=g_cardGame_infoList[32];this.role3roleCardsTab=g_cardGame_infoList[33];this.role3chooseDiZhuChance=g_cardGame_infoList[34];
this.role3isDiZhu=g_cardGame_infoList[35];this.role3outCardChance=g_cardGame_infoList[36];this.role3isReady=g_cardGame_infoList[37];this.role3isWinner=g_cardGame_infoList[38];this.role3winnerNum=g_cardGame_infoList[39];this.role3score=g_cardGame_infoList[40];this.role3isCollocation=g_cardGame_infoList[41];this.role3gameGold=g_cardGame_infoList[42];this.role1isStrongExit=g_cardGame_infoList[43];this.role2isStrongExit=g_cardGame_infoList[44];this.role3isStrongExit=g_cardGame_infoList[45];this.timerNum=
g_cardGame_infoList[46]}function cardGameType(){this.solo=[];this.double=[];this.triple=[];this.four=[];this.joker2=[]}function TFishJoinPlayInfo(e){var f={};f.sName=gbkByteArr2UcsStr(GameUtil.slice(e,1,e[0]+1));var a=32;f.Level=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=36;f.ID=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);return f}
function TAbilityFish(e){var f={};f.Level=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.Exp=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.NeedExp=e[8]+(e[9]<<8)+(e[10]<<16)+(e[11]<<24);f.BiteRate=e[12]+(e[6]<<13)+(e[14]<<16)+(e[15]<<24);return f}function TFishGropInfo(e){var f={},a=0;f.nOwnerID=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);f.sCaption=gbkByteArr2UcsStr(GameUtil.slice(e,a+5,a+5+e[a+4]));a=82;f.nBiteRate=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=42;f.dwBiteWeight=e[a]+(e[a+1]<<8);return f}
function TFishInfo(e){var f={};f.Base=TAbilityFish(GameUtil.slice(e,0,16));f.State=e[16];var a=20;f.ID=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=25;f.sName=gbkByteArr2UcsStr(GameUtil.slice(e,a,a+e[24]));a=56;f.GetCount=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);f.OutCount=e[a+4]+(e[a+5]<<8)+(e[a+6]<<16)+(e[a+7]<<24);f.Face=e[a+8]+(e[a+9]<<8)+(e[a+10]<<16)+(e[a+11]<<24);f.boAutoPars=1==e[a+12];f.dwAutoParsTime=e[a+16]+(e[a+17]<<8)+(e[a+18]<<16)+(e[a+19]<<24)>>>0;f.BaitType=e[a+20]+(e[a+21]<<8)+
(e[a+22]<<16)+(e[a+23]<<24);f.BaitDura=e[a+24]+(e[a+25]<<8)+(e[a+26]<<26)+(e[a+27]<<24);f.BaitDuraMax=e[a+28]+(e[a+29]<<8)+(e[a+30]<<16)+(e[a+31]<<24);return f}
function TActorIcon(e){var f={};f.nFileIndex=e[0]+(e[1]<<8);65535==f.nFileIndex&&(f.nFileIndex=-1);f.nIconIndex=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.nIconCount=e[8];f.nX=e[10]+(e[11]<<8);6E4<f.nX&&(f.nX-=65536);f.nY=e[12]+(e[13]<<8);6E4<f.nY&&(f.nY-=65536);f.boBlend=e[14];f.nMode=e[16]+(e[17]<<8)+(e[18]<<16)+(e[19]<<24);-1==f.nFileIndex&&(f.nMode=-1);f.nSeeMode=e[20]+(e[21]<<8)+(e[22]<<16)+(e[23]<<24);f.nPlayTimeTick=e[24]+(e[25]<<8)+(e[26]<<16)+(e[27]<<24);10>f.nPlayTimeTick&&(f.nPlayTimeTick=
10);return f}function TClientImage(e){var f={};f.FileID=e[0]+(e[1]<<8);65535==f.FileID&&(f.FileID=0);f.ImageID=e[2]+(e[3]<<8);return f}function THPBarData(e){var f={};f.OffSetX=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);f.OffSetY=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.BaseImg=TClientImage(GameUtil.slice(e,8,12));f.BarImg=TClientImage(GameUtil.slice(e,12,16));return f}
function TClientImageFrame(e){var f={};f.FileID=e[0]+(e[1]<<8);65535==f.FileID&&(f.FileID=-1);f.ImageID=e[2]+(e[3]<<8);f.Speed=e[4]+(e[5]<<8);f.Count=e[6]+(e[7]<<8);f.OffSetX=e[8]+(e[9]<<8);f.OffSetY=e[10]+(e[11]<<8);f.Mode=e[12];return f}
function TDirImageFrame(e){var f={};f.StandBaseImg=TClientImageFrame(GameUtil.slice(e,0,13));f.StandAddImg=TClientImageFrame(GameUtil.slice(e,13,26));f.ActBaseImg=TClientImageFrame(GameUtil.slice(e,26,39));f.ActAddImg=TClientImageFrame(GameUtil.slice(e,39,52));-1==f.StandAddImg.FileID&&(f.StandAddImg=f.StandBaseImg);-1==f.ActAddImg.FileID&&(f.ActAddImg=f.StandBaseImg);-1==f.ActBaseImg.FileID&&(f.ActBaseImg=f.StandBaseImg);return f}
function TDiyNpcData(e){var f={},a=e[0];f.sIdent=gbkByteArr2UcsStr(GameUtil.slice(e,1,1+a));a=24;f.Index=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);f.HPBar=THPBarData(GameUtil.slice(e,28,43));a=e[44];f.sClickSound=gbkByteArr2UcsStr(GameUtil.slice(e,45,45+a));a=75;f.UseDirs=[];for(var b=0;8>b;b++)f.UseDirs[b]=e[a+b];a=83;f.ImgFrames=[];for(b=0;8>b;b++)f.ImgFrames[b]=TDirImageFrame(GameUtil.slice(e,a+52*b,a+52*(b+1)));return f}
function TClientCMD(e){var f={},a=e[0];f.sCmd=gbkByteArr2UcsStr(GameUtil.slice(e,1,a+1));a=e[26];f.sCaption=gbkByteArr2UcsStr(GameUtil.slice(e,27,27+a));return f}
function TClientConfig(e){var f={};f.btConfigDlgType=e[0];f.btItemSpeed=e[1];f.boParalyCanRun=e[2];f.boParalyCanWalk=e[3];f.boParalyCanHit=e[4];f.boParalyCanSpell=e[5];f.boNoAcrossHuman=e[6];f.boNoAcrossMon=e[7];f.boNoAcrossNpc=e[8];var a=9;f.nMoveTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=13;f.nHitTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=17;f.nSpellTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);f.boIsSafeRunNPC=e[21];f.boIsSafeRun=e[22];a=23;f.nHighLevel=e[a]+(e[a+1]<<8)+(e[a+2]<<
16)+(e[a+3]<<24);f.btDieColor=e[27];a=28;f.nFireHitDelayTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=32;f.nKTZHitDelayTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=36;f.nPKJHitDelayTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=40;f.nSwordHitDelayTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=44;f.nLYJFHitWaitTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=48;f.nSkill114HitWaitTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=52;f.nMagicItemRate=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+
3]<<24);f.boStartGameAuxiliary=e[56];f.boCanOpenGameConfigDlg=e[57];f.boNotCanUseClientConfig=e[58];f.boNewHealth=e[59];f.boShowMiss=e[60];f.boShowBlast=e[61];f.boShowRebound=e[62];f.boShowPoisonStone=e[63];f.boShowPoisonDeChealth=e[64];f.boShowPoisonDaMageArmor=e[65];f.boShowHeroGroupAttack=e[66];f.boShowRevival=e[67];f.boShowRecoveryHP=e[68];f.boShowRecoveryMP=e[69];f.boShowPlus=e[70];f.boShowMinus=e[71];f.boItemNewAbilAllowUse=e[72];f.boWeaponSimple=e[73];f.boClothesSimple=e[74];f.boMonSimple=
e[75];f.nWeaponZ=e[76]+(e[77]<<8);f.nWeaponF=e[78]+(e[79]<<8);f.nWeaponD=e[80]+(e[81]<<8);f.nClothesZ=e[82]+(e[83]<<8);f.nClothesF=e[84]+(e[85]<<8);f.nClothesD=e[86]+(e[87]<<8);f.nMonAppr=e[88]+(e[89]<<8);f.nNPCAppr=e[90]+(e[91]<<8);f.nMoveSpeed=e[92]+(e[93]<<8);32767<=f.nMoveSpeed&&(f.nMoveSpeed-=65536);f.nAttackSpeed=e[94]+(e[95]<<8);32767<=f.nAttackSpeed&&(f.nAttackSpeed-=65536);f.nSpellSpeed=e[96]+(e[97]<<8);32767<=f.nSpellSpeed&&(f.nSpellSpeed-=65536);f.dwUserMoveTime=e[98]+(e[99]<<8)+(e[100]<<
16)+(e[101]<<24);f.DActionLogButton=e[102];f.DBotMissionButton=e[103];f.DBotFriendButton=e[104];f.DControlHelpButton=e[105];f.DBotRankButton=e[106];f.DBotWhisperButton=e[107];f.DOpenShopButton=e[108];f.DBotUserShopButton=e[109];f.DWebButton=e[110];f.DOpenHeroButton=e[111];f.DBotChallengeButton=e[112];f.boShowHintWindowFrame=e[113];f.btHintWindowbackgroundColor=e[114];f.btHintWindowbackgroundAlpha=e[115];f.boShowBoundary=e[116];f.btFontSize=e[117]+(e[118]<<8)+(e[119]<<16)+(e[120]<<24);f.boFontWeight=
e[121];f.btSuspensionShowItem=e[122];f.boShowItemValue=e[123];f.boShowItemNewValue=e[124];f.boItem25Value=e[125];f.boShowHPLabel=e[126];f.boShowNumberLable=e[127];f.boShowJobAndLevel=e[128];f.boFilterExp=e[129];f.boShowGreenHint=e[130];f.boShowUserName=e[131];f.boOnlyShowCharName=e[132];f.boShowMoveLable=e[133];f.boShowItemName=e[134];f.boShowFilterItem=e[135];f.boItemHint=e[136];f.boDisableSelfStruck=e[137];f.boSpeedSlow=e[138];f.boMagicLock=e[139];f.boAutoPickUpItem=e[140];f.boAutoOrderItem=e[141];
f.boAutoCloseGroup=e[142];f.boShowDura=e[143];f.boDuraWarning=e[144];f.boNotNeedShift=e[145];f.boHideGhost=e[146];f.boHideHumEffect=e[147];f.boHideWeaponEffect=e[148];f.boShowMapDesc=e[149];f.boShowHighlightHPLabel=e[150];f.boAutoHideMode=e[151];f.boAutoTakeOnItem=e[152];f.boHumAutoShield=e[153];f.boHumStruckShield=e[154];f.boSmartLongHit=e[155];f.boSmartPosLongHit=e[156];f.boSmartWalkLongHit=e[157];f.boSmartWideHit=e[158];f.boSmartFireHit=e[159];f.boSmartSwordHit=e[160];f.boSmartCrsHit=e[161];f.boSmartTwnHit=
e[162];f.boBGMusic=e[163];f.boRepeatBGMusic=e[164];f.boShowMonName=e[165];f.boNotParaly=e[166];f.boHumManuallySnowWind=e[167];f.boHumManuallyFireBoom=e[168];f.boHumShootLightenLockTarget=e[169];f.boHumManuallyMeteorShower=e[170];f.boAutoCHangePoison=e[171];f.boAutoBindItem=e[172];f.boTabCopyHumName=e[173];f.boShowHorseButton=e[174];f.boShowMyShopButton=e[175];f.boHideNeiGuaSpeed=e[176];f.boShowBagGold=e[177];f.boShowHelpButton=e[178];f.boChatShowExp=e[179];f.boDoubleButton=e[180];f.boDynamicButton=
e[181];f.boNewItemShowMode=e[182];f.boNoSmartPosLongHit=e[183];f.Params=[];for(var b=0;10>b;b++)a=184+4*b,f.Params[b]=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=224;f.ClientConfigs=[];for(b=0;11>b;b++)f.ClientConfigs[b]=e[a+b];f.boUseSuperMedica=e[235];f.DMerchantDlgHelp=e[236];a=237;f.DBotFuncs=[];for(b=0;6>b;b++)f.DBotFuncs[b]=e[a+b];f.boViewFog=e[243];f.boCanStartRun=e[244];f.boCanFirewind=e[245];f.boAllNameShow=e[246];f.boShowNPCHPBar=e[247];f.boLiveShield=e[248];f.boCanBossHint=e[249];f.boAutoPickItem=
e[250];f.boShowAllUserName=e[251];a=252;f.ClientConfigTabSheetVisibles=[];for(b=0;10>b;b++)f.ClientConfigTabSheetVisibles[b]=e[a+b];f.UseSuperMedicaItemNames=[];for(b=0;54>b;b++)a=262+31*b,f.UseSuperMedicaItemNames[b]=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+30));a=1936;f.sHomePage=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+50));a=1987;f.nHumNeedMagicItem=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);f.boCanMoveChatDlg=e[1991];f.boGuaji=e[1992];a=1993;f.AcupointLevels=[];for(b=0;5>b;b++){f.AcupointLevels[b]=
[];for(var d=0;5>d;d++)f.AcupointLevels[b][d]=e[a+5*b+d]}f.boUserMoveCanOnItemEx=e[2018];f.boQuickTab=e[2019];a=e[2020];f.sQuickTab=gbkByteArr2UcsStr(GameUtil.slice(e,a+1,a+60));f.boClosePresentOfShop=e[2081];f.boZhaoMuFunction=e[2082];a=2083;f.nHeroIconStyle=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);f.boMutHeroSelect=e[2087];f.boHideGlory=e[2088];f.boHideWeather=e[2089];f.boShowHeroLock=e[2090];f.boShowGemIcon=e[2091];f.btShowItemType=e[2092];a=2093;f.nNPCDlgLabelX=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+
(e[a+3]<<24);a+=4;f.nNPCDlgLabelY=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.boMiniMapAutoFindPath=e[a];a+=1;f.nGreenHintInfoX=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nGreenHintInfoY=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nShowDuraHintX=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nShowDuraHintY=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nShowExpHintX=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nShowExpHintY=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);
a+=4;f.nRedPackGoldMin=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGoldMax=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameGoldMin=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameGoldMax=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGamePointMin=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGamePointMax=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameDiamondMin=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameDiamondMax=
e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameGirdMin=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameGirdMax=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameGloryMin=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nRedPackGameGloryMax=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.btRedPackGameUsesOptions=e[a];a+=1;f.nBagItemRBtnFunc=e[a];a+=1;f.boSendItemDescToClient=e[a];a+=1;f.boItemInfoFollowMouse=e[a];a+=1;f.boItemSrcShow=e[a];a+=1;f.boDisabledDoubleFireHitSkill=
e[a];a+=1;f.nShowUserIcon=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nUseHPInterval=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nUseMPInterval=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nUseHPMPInterval=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nUseOtherTypeInterval=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nUpHouse=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nDownHouse=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.boDropOverLapItem=e[a];a+=1;f.OrderFee=
e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.TaxRate=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.OrderExpireHours=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a=a+4+8;f.boCanFoundry=e[a];a+=1;f.nWeaponDura=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.nDressDura=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.MoveIntervalTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.AttackIntervalTime=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+(e[a+3]<<24);a+=4;f.SpellIntervalTime=e[a]+(e[a+1]<<8)+(e[a+
2]<<16)+(e[a+3]<<24);a+=4;f.nMyShopType=e[a];f.boHideMissionFrom=e[a+1];return f}
function TClientUserShop(e){var f={},a=e[0];f.sShopName=gbkByteArr2UcsStr(GameUtil.slice(e,1,a+1));a=e[31];f.sMasterName=gbkByteArr2UcsStr(GameUtil.slice(e,32,32+a));f.dCreateDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(e,64,72));f.nSellingItemCount=e[72]+(e[73]<<8)+(e[74]<<16)+(e[75]<<24);f.nSelledItemCount=e[76]+(e[77]<<8)+(e[78]<<16)+(e[79]<<24);f.nStorageItemCount=e[80]+(e[81]<<8)+(e[82]<<16)+(e[83]<<24);f.boBusiness=e[84];f.nCareValue=e[88]+(e[89]<<8)+(e[90]<<16)+(e[91]<<24);f.btState=
e[92]>>>0;return f}function TClientUserShopItem(e){var f={Item:[]},a=e[0];f.sShopName=gbkByteArr2UcsStr(GameUtil.slice(e,1,a+1));a=e[31];f.sMasterName=gbkByteArr2UcsStr(GameUtil.slice(e,32,32+a));a=e[62];f.sBuyName=gbkByteArr2UcsStr(GameUtil.slice(e,63,63+a+1));f.btMoneyType=e[93]>>>0;f.btItemType=e[94]>>>0;f.dCreateDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(e,96,104));f.boAllowSell=e[104];f.boGetMoney=e[105];f.Item=TClientItem(GameUtil.slice(e,106,e.length-1));return f}
function TBaseObjectEffect(e){var f={};f.nEffectFileIndex=e[0]+(e[1]<<8)-65536;f.nEffectImageOffSet=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.wEffectImageCount=e[8]+(e[9]<<8);f.wEffectFrameTime=e[10]+(e[11]<<8);f.wLoopCount=e[12]+(e[13]<<8);f.nX=e[14]+(e[15]<<8);f.nY=e[16]+(e[17]<<8);f.dwEffectTick=e[20]+(e[21]<<8)+(e[22]<<16)+(e[23]<<24);return f}
function TBaseObjectEffectGom(e){var f={};f.nEffectFileIndex=e[0]+(e[1]<<8);f.nEffectImageOffSet=e[4]+(e[5]<<8)+(e[6]<<16)+(e[7]<<24);f.wEffectImageCount=e[8]+(e[9]<<8);f.wEffectFrameTime=e[10]+(e[11]<<8);f.wLoopCount=e[12]+(e[13]<<8);f.nX=e[14]+(e[15]<<8);f.nY=e[16]+(e[17]<<8);return f}
function TClientList(e){var f={},a=e[0];f.sServerName=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(e,1,a+1));a=e[41];f.sServerip=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(e,42,42+a));f.nPort=e[62]+(e[63]<<8)+(e[64]<<16)+(e[65]<<24);a=e[66];f.sPassWord=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(e,67,67+a));f.btFun=[];for(a=0;21>a;a++)f.btFun[a]=e[a+87];f.nListIdx=e[108]+(e[109]<<8)+(e[110]<<16)+(e[111]<<24);if(112<e.length){a=e[112];var b=Math.min(a+113,e.length);f.sGroupName=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(e,
113,b))}112>=e.length&&(f.sGroupName="");return f}
function TBaseConfig(e){var f={};f.nJobmode=e[0];f.nHelmet=e[1];f.nCollect=e[2];f.nSpeed=e[3]+(e[4]<<8);32767<=f.nSpeed&&(f.nSpeed-=65536);f.nQuickregister=e[5];f.nAutohook=e[6];f.nUimode=e[7];f.nSimScreen=e[8];f.nAutopick=e[9];f.nNpcTxtSize=e[10];f.nAtkRange=e[11];f.boVoice=e[12];f.boPic=e[13];f.nVoicePort=e[14]+(e[15]<<8);f.boSmooth=e[16];f.boVirtual=e[17];var a=e[18];f.sVoiceIP=gbkByteArr2UcsStr(GameUtil.slice(e,19,19+a));a=e[39];f.sPicUrl=gbkByteArr2UcsStr(GameUtil.slice(e,40,40+a));f.idx=e[240]+
(e[241]<<8)+(e[242]<<16)+(e[243]<<24);e[244]&&(f.nH5TxtSize=e[244]);e[245]&&(f.nAppTxtSize=e[245]);return f}
function TGameConfig(e){var f={},a=0;f.nOnlyName=e[a++];f.nShowName=e[a++];f.nMonName=e[a++];f.nNpcName=e[a++];f.nBBName=e[a++];f.nShiTi=e[a++];f.nChenghao=e[a++];f.nXueTiao=e[a++];f.nShowExp=e[a++];f.nPingBiHum=e[a++];f.nPingBiMon=e[a++];f.nAutoPack=e[a++];f.nHeroDun=e[a++];f.nYingYue=e[a++];f.nJingZhiMov=e[a++];f.nJingZhiLock=e[a++];f.nDaoDaoCiSha=e[a++];f.nBanYue=e[a++];f.nAutoLongYing=e[a++];f.nChiXuDun=e[a++];f.nChixuShifa=e[a++];f.nAutoFu=e[a++];f.nChiXuYingShen=e[a++];f.nMyZiYu=e[a++];f.nAutoLieHuo=
e[a++];f.nAutoZhuRi=e[a++];f.nGeWeiCiSsha=e[a++];f.nAutoKaiTian=e[a++];f.nAutoHP=e[a++];f.nAutoMP=e[a++];f.nShunAutoHP=e[a++];f.nShunAutoMP=e[a++];f.nChuanSongHP=e[a++];f.nChuanSongMP=e[a++];f.nFaShiDanTi=e[a++];f.nFaShiQunTi=e[a++];f.nDaoShiDanTi=e[a++];f.nDaoShiQunTi=e[a++];f.nDaoShiBB=e[a++];f.nDaoShiShiDu=e[a++];f.nDaoShiZhiLiao=e[a++];f.nAutoLianGong=e[a++];f.nHeroAutoHP=e[a++];f.nHeroAutoMP=e[a++];f.nHeroShunAutoHP=e[a++];f.nHeroShunAutoMP=e[a++];f.nHeroZhaoHui=e[a++];f.boUpdate=e[a++];f.nSmooth=
e[a++];f.nHumShowBlue=e[a++];f.nAutoMagicMo=e[a++];f.nAutoMagicMFang=e[a++];return f}function TDiyButton(e){var f={};f.nIdx=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);var a=e[4];f.sName=gbkByteArr2UcsStr(GameUtil.slice(e,5,a+5));f.nX=e[21]+(e[22]<<8);f.nY=e[23]+(e[24]<<8);a=e[25];f.sCmd=gbkByteArr2UcsStr(GameUtil.slice(e,26,a+26));f.nColor=e[42];f.nSize=e[43];f.boOpen=e[44];return f}
function TDiyGold(e){var f={};f.nIdx=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);var a=e[4];f.sVarName=gbkByteArr2UcsStr(GameUtil.slice(e,5,a+5));a=e[25];f.sGoldName=gbkByteArr2UcsStr(GameUtil.slice(e,26,a+26));a=e[46];f.sShowUI=gbkByteArr2UcsStr(GameUtil.slice(e,47,a+47));f.boOpen=e[97];f.nX=e[98]+(e[99]<<8);f.nY=e[100]+(e[101]<<8);return f}
function TItemScoreRecord(e){var f={},a=0;f.BoOpen=e[a++];a=4;f.AC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MaxAC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MAC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MaxMAC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.DC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MaxDC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MaxMC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.SC=e[a++]+(e[a++]<<8)+(e[a++]<<
16)+(e[a++]<<24);f.MaxSC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MaxHP=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MaxMP=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.HPRecover=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MPRecover=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.PoisonRecover=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Anger=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.AddDnger=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Crit=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<
24);f.Preciseness=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Alacrity=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.AckSpeed=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Lucky=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Curse=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.TeamUpHurt=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.SacredAdd=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.SacredLess=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ADDHurt=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<
24);f.CloseDefense=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.TargetCrit=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.BagWeight=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.WearWeight=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.DecAC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.DecMAC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Rebound=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ItemAttachEXP=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.AntiPoison=e[a++]+(e[a++]<<8)+(e[a++]<<
16)+(e[a++]<<24);f.AntiMC=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Teleport=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.GuildTeleport=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.HideMode=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Paralysis=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Revival=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.FlameRing=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.RecoveryRing=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MagicShield=e[a++]+(e[a++]<<
8)+(e[a++]<<16)+(e[a++]<<24);f.MuscleRing=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.FastTrain=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ProbeNecklace=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.SupermanItem=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.HongMoSuite=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.MoXieSuite=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.DropExp=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.DroLevel=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.Memory=
e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.NoDropItem=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.NoDropUseItem=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.UnParalysis=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.UnRevival=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.UnMagicShield=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.boBagShow=e[a];a+=4;var b=e[a++];f.ResourceName=gbkByteArr2UcsStr(GameUtil.slice(e,a,b+a));a+=15;f.ImageStart=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ImageEnd=
e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.boStartArrow=e[a];a+=4;f.PlaySpeed=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.PlayIndex=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ArrowX=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.ArrowY=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.boItemBaseScore=e[a++];f.boOpenShowItemScore=e[a++];f.boJobShowItemScore=e[a++];return f}
function TClientItemItemScore(e){var f={},a=0;f.MakeIndex=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.stdIndex=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);f.iExtItemScore=e[a++]+(e[a++]<<8)+(e[a++]<<16)+(e[a++]<<24);return f}function TActionInfo(e){for(var f=e.buff,a={ActionArr:[]},b=0;3>=b;b++)a.ActionArr[b]=f[e.pos++]|f[e.pos++]<<8;a.boDir_Boolean=0!=f[e.pos++];return a}
function TCompleteActionInfo(e){var f=e.buff,a={};a.ActionInfo=TActionInfo(e);a.ActionEffInfo=TActionInfo(e);a.EffFileIdx=f[e.pos++]|f[e.pos++]<<8|f[e.pos++]<<16|f[e.pos++]<<24;return a}
function TClientMonMagicInfo(e){for(var f=e.buff,a={AttMaigcEffInfo:[]},b=0;4>=b;b++)a.AttMaigcEffInfo[b]=TActionInfo(e);a.btFlyMaigcType=[];for(b=0;4>=b;b++)a.btFlyMaigcType[b]=f[e.pos++];a.DelayShowMagicTimeArr=[];for(b=0;4>=b;b++)a.DelayShowMagicTimeArr[b]=f[e.pos++]|f[e.pos++]<<8;a.EffFileIdxArr=[];for(b=0;4>=b;b++)a.EffFileIdxArr[b]=f[e.pos++]|f[e.pos++]<<8|f[e.pos++]<<16|f[e.pos++]<<24;a.EffSoundIdxAr=[];for(b=0;4>=b;b++)a.EffSoundIdxAr[b]=f[e.pos++]|f[e.pos++]<<8|f[e.pos++]<<16|f[e.pos++]<<
24;a.boBlendArr=[];for(b=0;4>=b;b++)a.boBlendArr[b]=0!=f[e.pos++];a.AttBowMagic=[];for(b=0;4>=b;b++)a.AttBowMagic[b]=TActionInfo(e);a.BowFileIdxArr=[];for(b=0;4>=b;b++)a.BowFileIdxArr[b]=f[e.pos++]|f[e.pos++]<<8|f[e.pos++]<<16|f[e.pos++]<<24;a.BowSoundIdxArr=[];for(b=0;4>=b;b++)a.BowSoundIdxArr[b]=f[e.pos++]|f[e.pos++]<<8|f[e.pos++]<<16|f[e.pos++]<<24;a.EffectFiyedDrawMethod=[];for(b=0;4>=b;b++)a.EffectFiyedDrawMethod[b]=0!=f[e.pos++];return a}
function TClientSmartMonster(e){var f=e.buff,a={};a.MonAppr=f[e.pos++]+(f[e.pos++]<<8);a.ActionFileIdx=f[e.pos++]+(f[e.pos++]<<8)+(f[e.pos++]<<16)+(f[e.pos++]<<24);a.SoundMonFileidx=f[e.pos++]+(f[e.pos++]<<8)+(f[e.pos++]<<16)+(f[e.pos++]<<24);a.HPImageX=f[e.pos++]+(f[e.pos++]<<8);a.HPImageY=f[e.pos++]+(f[e.pos++]<<8);a.BaseAction=[];for(var b=0;11>=b;++b)a.BaseAction[b]=TCompleteActionInfo(e);a.LiveAndDieEff=TActionInfo(e);a.EffFileIdx=f[e.pos++]+(f[e.pos++]<<8)+(f[e.pos++]<<16)+(f[e.pos++]<<24);
a.ClientMonMagicInfo=TClientMonMagicInfo(e);a.HPImageFileIdx=f[e.pos++]+(f[e.pos++]<<8)+(f[e.pos++]<<16)+(f[e.pos++]<<24);a.HPimageIndex=f[e.pos++]+(f[e.pos++]<<8)+(f[e.pos++]<<16)+(f[e.pos++]<<24);a.HPbgImageX=f[e.pos++]+(f[e.pos++]<<8);a.HPbgImageY=f[e.pos++]+(f[e.pos++]<<8);a.HPsImageX=f[e.pos++]+(f[e.pos++]<<8);a.HPsImageY=f[e.pos++]+(f[e.pos++]<<8);return a}
function TClientDiySkillBaseData(e){var f=e.buff,a={};a.btIconFileIndex=f[e.pos++];a.wIconImageIndex=f[e.pos++]|f[e.pos++]<<8;a.btUsesActionType=f[e.pos++];a.wSoundID=f[e.pos++]|f[e.pos++]<<8;a.sSoundFileNameUses=readDephiString(e,20);a.sSoundFileNameFly=readDephiString(e,20);a.sSoundFileNameExp=readDephiString(e,20);a.sSoundFileNameAttackMan=readDephiString(e,20);a.sSoundFileNameAttackMon=readDephiString(e,20);return a}
function readDephiString(e,f){var a=e.buff[e.pos++];a=GameUtil.slice(e.buff,e.pos,e.pos+a);e.pos+=f;return gbkByteArr2UcsStr(a)}function TClientDiySkillBaseEffect(e){var f=e.buff,a={};a.btFileIndex=f[e.pos++];a.dwStartIndex=f[e.pos++]|f[e.pos++]<<8|f[e.pos++]<<16|f[e.pos++]<<24;a.btCount=f[e.pos++];a.btSkip=f[e.pos++];a.btBlendMode=f[e.pos++];a.wFrameTime=f[e.pos++]|f[e.pos++]<<8;a.btDirType=f[e.pos++];return a}
function TClientDiySkillEffect(e){var f={};f.Base=TClientDiySkillBaseEffect(e);f.Add=TClientDiySkillBaseEffect(e);return f}function TClientDiySkillEffectsFileData(e){var f={};f.Action=TClientDiySkillEffect(e);f.Fly=TClientDiySkillEffect(e);f.Exp=TClientDiySkillEffect(e);return f}
function TClientDiySkillDataFileData(e){var f=e.buff,a={};a.btType=f[e.pos++];a.boCanLockTarget=0!=f[e.pos++];a.boNewEffect=0!=f[e.pos++];a.boFiyFried=0!=f[e.pos++];a.btWarriorSkillType=f[e.pos++];a.Bases=[];for(f=0;4>=f;f++)a.Bases[f]=TClientDiySkillBaseData(e);a.Effect=[];for(f=0;4>=f;f++)a.Effect[f]=TClientDiySkillEffectsFileData(e);a.WarriorSkillAddEff=TClientDiySkillBaseEffect(e);return a}
function TClientDiySkillFileData(e){var f=e.buff,a={};a.wMagicId=f[e.pos++]+(f[e.pos++]<<8)>>>0;a.Data=TClientDiySkillDataFileData(e);return a}
function TClientMailViewInf(e,f){var a={};f*=79;a.nMailIdx=e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24;f++;a.sSendName=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));f+=30;f++;a.sCaption=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));f+=30;a.btState=e[f++];a.SendDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(e,f,f+8));f+=8;a.nLimited=e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24;return a}
function TClientMailItemInfo(e){var f={},a=0;f.btIndex=e[a++];f.nCount=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;f.nCurrentCount=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;f.item=TClientItem(GameUtil.slice(e,a,e.length));return f}
function TClientMailInf(e,f){var a={},b=0;b++;a.sCharName=gbkByteArr2UcsStr(GameUtil.slice(e,b,b+30));b+=30;b++;a.sMemo=gbkByteArr2UcsStr(GameUtil.slice(e,b,b+255));b+=255;a.btType=e[b++];a.btState=e[b++];b+=4;a.items=[];for(var d=0;d<f;d++)a.items.push(TClientMailItemInfo(GameUtil.slice(e,b,b+g_itemSize+9+1))),b+=g_itemSize+9;return a}
function TGuildEventInfo(e,f){for(var a=[],b=0,d=0;d<f;d++)a[d]=[],a[d].push(e[b++]),b++,a[d].push(gbkByteArr2UcsStr(GameUtil.slice(e,b,b+30))),b+=30,b++,a[d].push(gbkByteArr2UcsStr(GameUtil.slice(e,b,b+30))),b+=30,b++,a[d].push(gbkByteArr2UcsStr(GameUtil.slice(e,b,b+30))),b+=30,b+=2,a[d].push(GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(e,b,b+8))),b+=8;if(1<f)return a;if(1==f)return a[0]}
function TSimpleAuctionItemInfo(e,f){var a={};f*=136;a.nRecog=e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24;f++;a.sOwner=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));f+=30;f++;a.sHighestBidder=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));f=f+30+6;a.ShelvesDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(e,f,f+8));a.dateCompareNum=GameUtil.GetDateTimeFromDelphi8Bytes(GameUtil.slice(e,f,f+8));f+=8;a.btMoneyType=e[f++];f+=3;a.nAuctionPrice=e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24;a.nCurrentPrice=e[f++]|
e[f++]<<8|e[f++]<<16|e[f++]<<24;0==a.nCurrentPrice&&(a.nCurrentPrice=a.nAuctionPrice);a.nBuyOutPrice=e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24;a.btStdMode=e[f++];f++;a.wShape=e[f++]|e[f++]<<8;a.Looks=e[f++]|e[f++]<<8;a.wCount=e[f++]|e[f++]<<8;f++;a.sItemName=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));return a}
function TSimpleRankingData(e,f){var a={};f*=68;f++;a.name=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));f+=30;f++;a.level=e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24;f++;a.guildName=gbkByteArr2UcsStr(GameUtil.slice(e,f,f+30));return a}
var USE_NEW_MAP_FORMAT=!0,MapLayer=function(){function e(){this.init()}var f=e.prototype;f.init=function(a){this.object_list=[];this.sp_lists=[];this.grid=[];this.data_lists=[];this.ene_pos=new Laya.Point;Laya.timer.loop(500,this,this.SceneHeartbeat)};f.SceneHeartbeat=function(){if(null!=this.root)for(var a=this.root._childs.length-1;0<=a;a--){var b=this.root._childs[a];b&&(b.sp?(b.is_die?b.zOrder=Math.floor(b.y-b.height-100):b.zOrder=Math.floor(b.y-b.height),-86>=b.height&&(b.zOrder+=b.height+32),
b.skin_feature&&98==b.skin_feature.wRaceImg&&(b.zOrder-=100)):b.resname&&(b.zOrder=Math.floor(b.y-32)))}};f.oldMapProcess=function(a,b,d){d&&b==this.sceneid&&(a=new DataView(d.slice(0,4)),this.width_=a.getUint16(0,!0),this.height_=a.getUint16(2,!0),this.map_data=d,this.pieceSize_=Math.floor((this.map_data.byteLength-4)/(this.width_*this.height_)),this.columnByteSize_=this.pieceSize_*this.width_,this.mapMaxX=this.width_,this.mapMaxY=this.height_,this.maxPicCols=Math.ceil(48*this.mapMaxX/480),this.maxPicRows=
Math.ceil(32*this.mapMaxY/512),this.onanalyzeJson())};f.newMapProcess=function(a,b,d){if(d&&b==this.sceneid){var n=d.byteLength-8;a=new DataView(d);b=a.getInt32(n,!0);n=a.getInt32(n+4,!0);for(var c=0,h=Array(n),m=Array(n),g=0;g<n;g++){var l=Array(b),p=Array(b);h[g]=l;m[g]=p;for(var q=0;q<b;q++)l[q]=a.getInt8(c++),p[q]=0==l[q]?1:0}AStart.setMapData(this.sceneid,m);this.width_=b;this.height_=n;this.map_data=d;this.map_flags=h;this.old_map_flags=m;this.pieceSize_=Math.floor((this.map_data.byteLength-
4)/(this.width_*this.height_));this.mapMaxX=this.width_;this.mapMaxY=this.height_;this.maxPicCols=Math.ceil(48*this.mapMaxX/480);this.maxPicRows=Math.ceil(32*this.mapMaxY/512);this.columnByteSize_=this.pieceSize_*this.width_;this.onanalyzeJson();ObjectManage.updateAlpha()}};f.initmap=function(a,b,d){this.columnByteSize_=this.pieceSize_=this.height_=this.width_=0;Laya.loader.load(a,Laya.Handler.create(this,(USE_NEW_MAP_FORMAT?this.newMapProcess:this.oldMapProcess).bind(this),[a,d]),null,Laya.Loader.BUFFER)};
f.getFlagByGridPos=function(a){var b=this.map_flags;return b&&b[0]&&a.y<b.length&&a.x<b[0].length?b[a.y][a.x]:0};f.getgridinfo=function(a,b){a=4+this.columnByteSize_*b+a*this.pieceSize_;a=new DataView(this.map_data.slice(a,a+3));return new Laya.Point(a.getUint8(0),a.getUint16(1,!0))};f.setParent=function(a){this.root=a};f.loadmapdata=function(){USE_NEW_MAP_FORMAT?this.initmap("map/"+this.sceneid+".bin",!0,this.sceneid):(AStart.obsdata(this.sceneid),this.initmap("data/mapdata/mapbin/"+this.sceneid+
".bin",!0,this.sceneid))};f.enterMap=function(a,b,d,n){this.cur_x==b&&this.cur_y==d&&this.sceneid==a?Actionlock=rockerlock=!1:(this.grid=[],this.cur_x=b,this.cur_y=d,this.ene_pos.x=b,this.ene_pos.y=d,this.sceneid=a,0==g_first_entermap&&this.loadmapdata())};f.onLocation=function(a,b){a&&(this.cur_x=a);b&&(this.cur_y=b);this.root.pos(-(48*this.cur_x*this.root.scaleX-browser_width/2)-20,-(32*this.cur_y*this.root.scaleY-browser_height/2+20));Laya.stage.event("LocationLoad",[this.cur_x,this.cur_y])};f.onanalyzeJson=
function(){for(var a=0;a<this.sp_lists.length;a++)this.sp_lists[a]._style&&this.root.removeChild(this.sp_lists[a]);this.sp_lists=[];this.drawmap(this.cur_x,this.cur_y);this.drawmask(this.cur_x,this.cur_y);this.onLocation()};f.drawmask=function(a,b){if(!(5<=ObjectManage.object_list.length)){var d=USE_NEW_MAP_FORMAT?12:10,n=USE_NEW_MAP_FORMAT?12:16,c=Math.max(0,a-d);a=Math.min(this.mapMaxX,a+d+10);d=Math.max(0,b-n);b=Math.min(this.mapMaxY,b+n+16);var h=this;if(!USE_NEW_MAP_FORMAT)for(n=c;n<a;++n)for(var m=
d;m<b;++m)if(null==this.grid[n+"_"+m]){var g=this.getgridinfo(n,m);if(0!=g.x||0!=g.y){var l=GameUtil.getprefixname(g.y-1,5);g=0==g.x?"data/objects/"+l+".png":"data/objects"+(g.x+1)+"/"+l+".png";this.grid[n+"_"+m]=1;Laya.loader.load(g,Laya.Handler.create(this,function(p,q,r){var u=Laya.loader.getRes(p);if(u&&u.bitmap&&!u.bitmap._recreateLock){var v=new Laya.Image;v.graphics.drawTexture(u,0,-u.height);v.pos(48*q,32*(r+1));v.posx=q;v.posy=r;v.alpha=.7;v.resname=p;h.root.addChild(v);h.sp_lists.push(v)}},
[g,n,m]),null,Laya.Loader.IMAGE)}else this.grid[n+"_"+m]=0}this.clearMaskImage(c,a,d,b)}};f.clearMaskImage=function(a,b,d,n){for(var c=this.root._childs.length-1;0<=c;c--){var h=this.root._childs[c];if(null==h.file){if(h._urls){var m=new Laya.Point;h._pos?(m.x=h._pos.x+h.x,m.y=h._pos.y+h.y):(m.x=h.x,m.y=h.y)}h.posx<a||h.posx>b||h.posy<d||h.posy>n?(delete this.grid[h.posx+"_"+h.posy],h.removeSelf()):m&&(m.x/48<a||m.x/48>b||m.y/32<d||m.y/32>n)&&Animationmodule.removeAni(h)}}};f.drawmap=function(a,b){var d=
Math.ceil(48*this.width_/480),n=12,c=12;USE_NEW_MAP_FORMAT&&(n=10,c=16);var h=Math.floor(a/n),m=Math.floor(b/c);this.cur_x=a;this.cur_y=b;if(this.ene_pos.x!=m||this.ene_pos.y!=h){this.ene_pos.x=m;this.ene_pos.y=h;for(var g=-1;2>g;g++)for(var l=-2;3>l;l++)if(0<=m+g&&0<=h+l&&m+g<=this.mapMaxY/c&&h+l<=this.mapMaxX/n)if(USE_NEW_MAP_FORMAT){var p=m+g,q=h+l;if(!(q+1>this.maxPicCols||p+1>this.maxPicRows)){var r=GameUtil.getprefixname(d*p+q,5);r="map/"+this.sceneid+"/"+r+".png";this.newmap_createmaps(r,a,
b,g,l,this.ene_pos.x,this.ene_pos.y,p,q)}}else p=GameUtil.getprefixname(m+g,3),q=GameUtil.getprefixname(h+l,4),r="data/map/"+this.sceneid+"/"+p+q+".png",this.createmaps(r,a,b,g,l,this.ene_pos.x,this.ene_pos.y);this.clearMapImage()}};f.drawMap=function(a,b){var d=Math.ceil(48*this.width_/480),n=12,c=12;USE_NEW_MAP_FORMAT&&(n=10,c=16);var h=Math.floor(a/n),m=Math.floor(b/c);this.cur_x=a;this.cur_y=b;this.ene_pos.x=m;this.ene_pos.y=h;for(var g=-1;2>g;g++)for(var l=-2;3>l;l++)if(0<=m+g&&0<=h+l&&m+g<=
this.mapMaxY/c&&h+l<=this.mapMaxX/n)if(USE_NEW_MAP_FORMAT){var p=m+g,q=h+l;if(!(q+1>this.maxPicCols||p+1>this.maxPicRows)){var r=GameUtil.getprefixname(d*p+q,5);r="map/"+this.sceneid+"/"+r+".png";this.newmap_createmaps(r,a,b,g,l,this.ene_pos.x,this.ene_pos.y,p,q)}}else p=GameUtil.getprefixname(m+g,3),q=GameUtil.getprefixname(h+l,4),r="data/map/"+this.sceneid+"/"+p+q+".png",this.createmaps(r,a,b,g,l,this.ene_pos.x,this.ene_pos.y)};f.createmaps=function(a,b,d,n,c,h,m){if(null==this.grid[a]){var g=this;
Laya.loader.load(a,Laya.Handler.create(this,function(l,p,q,r,u,v,w){var z=Laya.loader.getRes(l);if(z){g.grid[l]=1;var A=new Laya.Image,C=48*(p-12*w),B=32*(q-12*v);A.name=l;A.height=z.height;A.width=z.width;A.zOrder=0;A.px=v+r;A.py=w+u;A.graphics.drawTexture(z);A.pos(48*p+u*z.width-C,32*q+r*z.height-B);g.root.addChild(A);g.sp_lists.push(A)}},[a,b,d,n,c,h,m]),null,Laya.Loader.IMAGE,0)}};f.newmap_createmaps=function(a,b,d,n,c,h,m,g,l){if(null==this.grid[a]){var p=this;Laya.loader.load(a,Laya.Handler.create(this,
function(q,r,u,v,w,z,A,C,B){if(r=Laya.loader.getRes(q))p.grid[q]=1,u=new Laya.Image,u.name=q,u.height=r.height,u.width=r.width,u.zOrder=0,u.px=z+v,u.py=A+w,u.graphics.drawTexture(r),u.pos(480*B,512*C),p.root.addChild(u),p.sp_lists.push(u)},[a,b,d,n,c,h,m,g,l]),null,Laya.Loader.IMAGE,0)}};f.refreshMapRes=function(){for(var a=0;a<this.sp_lists.length;a++){var b=this.sp_lists[a];Laya.loader.clearRes(b.name);Laya.loader.load(b.name,Laya.Handler.create(this,function(d){var n=Laya.loader.getRes(d.name);
n&&(d.graphics.clear(),d.graphics.drawTexture(n))},[b]),null,Laya.Loader.IMAGE,0)}};f.clearMapImage=function(){for(var a=this.sp_lists.length-1;0<=a;a--){var b=this.sp_lists[a];b&&(b.px-1>this.ene_pos.x||b.px+1<this.ene_pos.x||b.py-2>this.ene_pos.y||b.py+2<this.ene_pos.y)&&(delete this.grid[b.name],this.root.removeChild(b),this.sp_lists.splice(a,1))}};f.pointlegality=function(a){return 0>=a.x||0>=a.y||a.x>=this.mapMaxX||a.y>=this.mapMaxY?!1:AStart.cur_matx&&AStart.cur_matx.length>a.y&&AStart.cur_matx[0].length>
a.x?1!=AStart.cur_matx[a.y][a.x]:!1};f.CanMove=function(a,b,d){if(null==AStart.cur_matx)return!1;var n=!1;switch(d){case 1:d=GameUtil.getMovePoint(a,b,1);n=this.pointlegality(d);AStart.cur_matx&&AStart.cur_matx.length>d.y&&AStart.cur_matx[0].length>d.x&&0!=AStart.cur_matx[d.y][d.x]&&1!=AStart.cur_matx[d.y][d.x]&&!this.isopendoor&&Sendmessage.sendOpenDoor(d.x,d.y,AStart.cur_matx[d.y][d.x]);break;case 2:d=GameUtil.getMovePoint(a,b,1);var c=GameUtil.getMovePoint(a,b,2);n=this.pointlegality(d)&&this.pointlegality(c);
AStart.cur_matx&&AStart.cur_matx.length>d.y&&AStart.cur_matx.length>c.y&&AStart.cur_matx[0].length>d.x&&AStart.cur_matx[0].length>c.x&&0!=AStart.cur_matx[c.y][c.x]&&1!=AStart.cur_matx[c.y][c.x]&&!this.isopendoor&&Sendmessage.sendOpenDoor(c.x,c.y,AStart.cur_matx[c.y][c.x]);break;case 3:d=GameUtil.getMovePoint(a,b,1),c=GameUtil.getMovePoint(a,b,2),a=GameUtil.getMovePoint(a,b,3),n=this.pointlegality(d)&&this.pointlegality(c)&&this.pointlegality(a)}return n};f.opendoor=function(a){if(!(AStart.cur_matx[0].length<
a.x)){this.isopendoor=!0;for(var b=a.x-2;b<a.x+2;b++)for(var d=a.y-2;d<a.y+2;d++)b!=a.x&&d!=a.y&&1>=AStart.cur_matx[d][b]&&(AStart.cur_matx[d][b]=0)}};f.closedoor=function(a){this.isopendoor=!1};return e}(),AnimationModule=function(){function e(){this.init()}_proto=e.prototype;_proto.init=function(){this.ani_list=[];Laya.timer.clear(this,this.heartbeat);Laya.timer.frameLoop(1,this,this.heartbeat)};_proto.removeAniname=function(f){for(var a=this.ani_list.length-1;0<=a;a--)this.ani_list[a].name!=f||
0>=this.ani_list.length||(this.ani_list[a].destroy(),this.ani_list.splice(a,1))};_proto.removeAni=function(f){if(null==f){var a=0;for(f=this.ani_list.length;a<f;a++)this.ani_list[a].destroy();this.ani_list=[]}else a=this.ani_list.indexOf(f),-1==a||this.isDorpItemAni(f)||(this.ani_list[a].destroy(),this.ani_list.splice(a,1))};_proto.isDorpItemAni=function(f){return f.dorpItem};_proto.clearAniCacheAssets=function(){for(var f=this.ani_list.length-1;0<=f;f--)this.ani_list[f]&&this.isclearlist(this.ani_list[f])&&
(this.setclearcache(this.ani_list[f]._urls),this.ani_list[f].destroy(),this.ani_list.splice(f,1));for(var a in g_ani_clearlist)a&&(GameUtil.clearResByUrl(a),delete g_ani_clearlist[a])};_proto.clearRoleAniCacheAssets=function(){for(var f=this.ani_list.length-1;0<=f;f--)this.ani_list[f]&&this.isRoleclearlist(this.ani_list[f])&&(this.setclearcache(this.ani_list[f]._urls),this.ani_list[f].destroy(),this.ani_list.splice(f,1));for(var a in g_ani_clearlist)a&&(GameUtil.clearResByUrl(a),delete g_ani_clearlist[a])};
_proto.setclearcache=function(f){for(var a=0;a<f.length;a++)""==f[a]||g_ani_keeplist[f[a]]||(g_ani_clearlist[f[a]]=!0)};_proto.isclearlist=function(f){for(var a=f._urls,b=f.parent,d=0;d<a.length;d++){var n=a[d];if(-1!=n.indexOf("gameres/animation/addskills/")||-1!=n.indexOf("gameres/animation/bonus/")||-1!=n.indexOf("gameres/animation/task/")||-1!=n.indexOf("gameres/animation/hero_power/")||-1!=n.indexOf("gameres/animation/hp_ani/")||-1!=n.indexOf("gameres/animation/minimap/")||-1!=n.indexOf("gameres/animation/moveing/")||
-1!=n.indexOf("gameres/animation/halo/")||-1!=n.indexOf("gameres/animation/autohook/")||"skilllockani"==f.name||"heroatt"==f.name||"RedPacket"==f.name||-1!=n.indexOf("gameres/animation/mainhint/")||-1!=n.indexOf("gameres/animation/mouse_click/")||"buffani"==f.name||"RedPacket2"==f.name||"friendAni"==f.name||b&&b.data&&b.data.record==playerID||0==f.name.indexOf("icongif")||0==f.name.indexOf("humicon")||0==f.name.indexOf("screeneffect")||-1!=f.name.indexOf("buffanidonotclear")||-1!=f.name.indexOf("btn_halo"))return g_ani_keeplist[n]=
!0,!1}return!0};_proto.isRoleclearlist=function(f){for(var a=f._urls,b=0;b<a.length;b++){var d=a[b];if(-1!=f.name.indexOf("buffanidonotclear"))return g_ani_keeplist[d]=!1,!0}return!1};_proto.heartbeat=function(){for(var f=Laya.Browser.now(),a=this.ani_list.length-1;0<=a;a--){var b=this.ani_list[a];if(b&&f-b._playtime>=b._time){b._playtime=f;if(b._index>=b._urls.length&&(b._loop&&(b._index=0),b._app&&b._callback&&b._callback.call(b._app),b._remove)){b.destroy();this.ani_list.splice(a,1);continue}var d=
Laya.loader.getRes(b._urls[b._index]);if(d){-1==b._usepos&&(b.visible=!1);var n=0,c=0;if(!b._off)continue;b._off[b._index]&&(n=b._off[b._index].x,c=b._off[b._index].y);void 0===n&&(n=0);void 0===c&&(c=0);null!=b._pos&&(n+=Math.floor(b._pos.x-(b._usepos?d.width/2:0)),c+=Math.floor(b._pos.y-(b._usepos?d.height/2:0)));d.bitmap&&!d.bitmap._recreateLock&&(b.graphics.clear(),b.graphics.drawTexture(d,n,c))}b._index++}}};_proto.getAtlas=function(f,a){var b={};a=("000000"+a).slice(-6);f=GameUtil.getImageSetNameByPath(f+
a);a=f.replace(".atlas","/"+a+".png");b.img=a;b.atlas=f;return b};_proto.playframe=function(f,a,b,d,n,c,h,m,g,l,p,q,r,u){function v(){D&&(D._isblend&&null!=D._style&&GameUtil.IfOpenBlend(b,d)&&(D.blendMode=Laya.BlendMode.OVERLAY),D._off=Offsetmodule.getoffsets(r,d,n))}function w(){if(D){for(var E=0,F=A.length;E<F;E++)D._isblend&&null!=D._style&&GameUtil.IfOpenBlend(A[E],d)&&(D.blendMode=Laya.BlendMode.OVERLAY);D._off=Offsetmodule.getoffsets(r,d,n)}}if(null!=a){var z=[],A=[],C=!0;0==b.indexOf("gameres/animation")&&
(C=!1);if(q)for(q=n;q>=d;q--){var B=GameUtil.getprefixname(q,6);C?(B=this.getAtlas(b,B),null!=B&&""!=B.img&&(z.push(B.img),A.push(B.atlas))):z.push(b+B+".png")}else for(q=d;q<=n;q++)B=GameUtil.getprefixname(q,6),C?(B=this.getAtlas(b,B),null!=B&&""!=B.img&&(z.push(B.img),A.push(B.atlas))):z.push(b+B+".png");var D=Laya.Pool.getItemByClass("sprite",Laya.Sprite);D.zOrder=999999;D._loop=h;D._remove=m;D._app=l;D._callback=p;D._pos=g;D._index=0;D._urls=z;D._time=c;D._isblend=1==g_animation_force_blend?!0:
f;D._playtime=0;D._usepos=null==u||u?!0:!1;null==r&&(r=b);a.addChild(D);this.ani_list.push(D);C?Laya.loader.load(A,Laya.Handler.create(this,w),null,Laya.Loader.ATLAS):Laya.loader.load(z,Laya.Handler.create(this,v),null,Laya.Loader.IMAGE);return D}};return e}(),AutoHookModule=function(){function e(){this.init()}_prototype=e.prototype;_prototype.init=function(){this.autocorrect=0;this.findPos=!0;this.randPos=null;this.goDir=-1;this.itemId=this.summontime=this.poison_num=this.errCount=0;this.itemPos=
new Laya.Point};_prototype.autorule=function(){var f=ObjectManage.findobject(playerID);f.skin_feature&&this.autoskill(f)};_prototype.canuseskill=function(f){var a=f.skin_feature.btJob;return(1==a&&this.hastriggerskill(f,GlobalCfglist.single_fs_list)||2==a&&this.hastriggerskill(f,GlobalCfglist.single_ds_list)&&this.canuseAmulet())&&(a=ObjectManage.findobject(lockingID))&&a.grid?6>f.grid.distance(a.grid.x,a.grid.y):!1};_prototype.rangelegal=function(f,a){if(f&&a)return 9>f.grid.distance(a.grid.x,a.grid.y)};
_prototype.escaperule=function(f,a){if(4>f.grid.distance(a.grid.x,a.grid.y)){a=GameUtil.getorientation(f.grid,a.grid);for(var b=GameUtil.escapedir(a),d=!0,n=null,c=0;c<b.length;c++){var h=b[c];if(h!=a){var m=GameUtil.moverule(f.grid,h,2);d=ObjectManage.has2obstacle(f.grid,h,2);if(!d&&m){n=h;break}}}if(m&&!d&&null!=n&&!chaseing)return Objectcontrol.executemove(m,n,3),!0}return!1};_prototype.lastMoveTarget=[];_prototype.isPathJammed=function(){if(3<=this.lastMoveTarget.length){var f=this.lastMoveTarget[0],
a=this.lastMoveTarget[2],b=0;if(f.length!=a.length)return!1;for(var d=0,n=f.length;d<n;d++)f[d].x==a[d].x&&f[d].y==a[d].y&&b++;return b==f.length}return!1};_prototype.setSkill=function(f,a){if(f){var b=Skillmodule.getskilldata(f.Def.btEffect,f.Def.wMagicId);b&&0==b.mode&&0!=b.fly_frame&&!this.checkFly()&&autohookstate?(f=ObjectManage.findobject(playerID),a=ObjectManage.findobject(lockingID),f&&a&&(a=a.grid,this.isPathJammed()&&(a.x+=4),Movemodule.startmove(f.grid,a),3<=this.lastMoveTarget.length&&
this.lastMoveTarget.shift(),this.lastMoveTarget.push(Movemodule.move_list))):(Movemodule.stopmove(),this.lastMoveTarget=[],activate_skilluse=f.Def.btEffect,activate_skilltype=f.Def.wMagicId,(activate_skillpos=a)?Objectcontrol.useskill(f.Def.btEffect,f.Def.wMagicId,a):Objectcontrol.useskill(f.Def.btEffect,f.Def.wMagicId))}};_prototype.checkFly=function(){var f=ObjectManage.findobject(playerID),a=ObjectManage.findobject(lockingID);if(f&&a){var b=GameUtil.getorientation(f.grid,a.grid);if(-1!=b){for(var d=
f.grid,n=f.grid.distance(a.grid.x,a.grid.y);f.grid.distance(d.x,d.y)<n;)if(b=GameUtil.getorientation(d,a.grid),d=GameUtil.getMovePoint(d,b,1),1==AStart.cur_matx[d.y][d.x])return!1;return!0}}return!1};_prototype.autoskill=function(f){var a=this.hastriggerskill(f,GlobalCfglist.single_ds_list),b=this.hastriggerskill(f,"\u65bd\u6bd2\u672f"),d=this.hastriggerskill(f,GlobalCfglist.ds_summon_list),n=this.hastriggerskill(f,GlobalCfglist.group_ds_list),c=this.hastriggerskill(f,GlobalCfglist.ds_cure_list),
h=ObjectManage.findobject(lockingID);if(null==h)lockingID=0;else{var m=this.rangelegal(f,h),g=this.nearbyenemynum(),l=Laya.Browser.now();c&&GlobalCfglist.ds_cure&&l-Gameconfig.cure_time>1E3*GlobalCfglist.ds_time_slider&&l-Gameconfig.cure_time>1E3*c.Def.w02&&f&&f.m_Abil&&!f.is_die&&f.m_Abil.HP<=f.m_Abil.MaxHP*GlobalCfglist.ds_limit_slider/100?(this.setSkill(c,f.grid),Gameconfig.cure_time=l):(GlobalCfglist.ds_summon&&this.canuseAmulet()&&5E3<l-this.summontime&&d&&this.checkcallpet(f,GlobalCfglist.ds_summon_list)?
(this.setSkill(d),this.summontime=l):g>=GlobalCfglist.group_skill_num&&GlobalCfglist.group_ds&&n?m?this.setSkill(n):Movemodule.startmove(f.grid,h.grid):GlobalCfglist.poison_ds&&b&&this.canusePoison()&&2>g_autohookpoison?m?this.setSkill(b):Movemodule.startmove(f.grid,h.grid):GlobalCfglist.single_ds&&a&&(13!=a.Def.wMagicId&&10!=a.Def.btEffect||this.canuseAmulet())?m&&0==h.ddl_state?this.setSkill(a):Movemodule.startmove(f.grid,h.grid):0==h.ddl_state?Objectcontrol.fight():Movemodule.startmove(f.grid,
h.grid),a&&!Objectcontrol.use_skill&&!Objectcontrol.use_attack&&GlobalCfglist.auto_dodge&&this.escaperule(f,h))}};_prototype.autoskillforZS=function(f){var a=this.hastriggerskill(f,"\u65bd\u6bd2\u672f"),b=this.hastriggerskill(f,GlobalCfglist.ds_summon_list),d=ObjectManage.findobject(lockingID),n=this.rangelegal(f,d),c=Laya.Browser.now();GlobalCfglist.ds_summon&&this.canuseAmulet()&&5E3<c-this.summontime&&b&&this.checkcallpet(f,GlobalCfglist.ds_summon_list)?(this.setSkill(b),this.summontime=c):GlobalCfglist.poison_ds&&
a&&this.canusePoison()&&2>g_autohookpoison?n?this.setSkill(a):Movemodule.startmove(f.grid,d.grid):Objectcontrol.fight()};_prototype.autoskillforFS=function(f){var a=this.hastriggerskill(f,GlobalCfglist.single_fs_list),b=this.hastriggerskill(f,GlobalCfglist.group_fs_list),d=this.hastriggerskill(f,"\u65bd\u6bd2\u672f"),n=this.hastriggerskill(f,GlobalCfglist.ds_summon_list),c=ObjectManage.findobject(lockingID);if(null==c)lockingID=0;else{var h=this.rangelegal(f,c),m=Laya.Browser.now(),g=this.nearbyenemynum(),
l=f.getChildByName("eqsecure"+playerID);if(GlobalCfglist.f_autoskill_1&&!l)for(l=0;l<g_UserMagicList.length;l++)if(g_UserMagicList[l]&&"\u9b54\u6cd5\u76fe"==g_UserMagicList[l].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[l],f)){activate_skilluse=29;activate_skilltype=31;Objectcontrol.useskill(29,31);return}GlobalCfglist.ds_summon&&this.canuseAmulet()&&5E3<m-this.summontime&&n&&this.checkcallpet(f,GlobalCfglist.ds_summon_list)&&(this.setSkill(n),this.summontime=m);2<=g&&GlobalCfglist.group_fs&&
b?h?this.setSkill(b):Movemodule.startmove(f.grid,c.grid):GlobalCfglist.poison_ds&&d&&this.canusePoison()&&2>g_autohookpoison?h?this.setSkill(d):Movemodule.startmove(f.grid,c.grid):a&&GlobalCfglist.single_fs?h&&0==c.ddl_state?this.setSkill(a):Movemodule.startmove(f.grid,c.grid):0==c.ddl_state?Objectcontrol.fight():Movemodule.startmove(f.grid,c.grid);a&&!Objectcontrol.use_skill&&!Objectcontrol.use_attack&&GlobalCfglist.auto_dodge&&this.escaperule(f,c)}};_prototype.autoskillforDZ=function(f){var a=this.hastriggerskill(f,
GlobalCfglist.single_ds_list),b=this.hastriggerskill(f,"\u65bd\u6bd2\u672f"),d=this.hastriggerskill(f,GlobalCfglist.ds_summon_list),n=this.hastriggerskill(f,GlobalCfglist.group_ds_list),c=ObjectManage.findobject(lockingID);if(null==c)lockingID=0;else{var h=this.rangelegal(f,c),m=this.nearbyenemynum(),g=Laya.Browser.now(),l=this.hastriggerskill(f,GlobalCfglist.ds_cure_list);l&&GlobalCfglist.ds_cure&&g-Gameconfig.cure_time>1E3*GlobalCfglist.ds_time_slider&&g-Gameconfig.cure_time>1E3*l.Def.w02&&f&&f.m_Abil&&
!f.is_die&&f.m_Abil.HP<=f.m_Abil.MaxHP*GlobalCfglist.ds_limit_slider/100?(this.setSkill(l,f.grid),Gameconfig.cure_time=g):(GlobalCfglist.ds_summon&&this.canuseAmulet()&&5E3<g-this.summontime&&d&&this.checkcallpet(f,GlobalCfglist.ds_summon_list)?(this.setSkill(d),this.summontime=g):2<=m&&GlobalCfglist.group_ds&&n?h?this.setSkill(n):Movemodule.startmove(f.grid,c.grid):GlobalCfglist.poison_ds&&b&&this.canusePoison()&&2>g_autohookpoison?h?this.setSkill(b):Movemodule.startmove(f.grid,c.grid):GlobalCfglist.single_ds&&
a&&this.canuseAmulet()?h&&0==c.ddl_state?this.setSkill(a):Movemodule.startmove(f.grid,c.grid):0==c.ddl_state?Objectcontrol.fight():Movemodule.startmove(f.grid,c.grid),a&&!Objectcontrol.use_skill&&!Objectcontrol.use_attack&&GlobalCfglist.auto_dodge&&this.escaperule(f,c))}};_prototype.nearbyenemynum=function(){var f=0,a=ObjectManage.findobject(lockingID);if(a)for(var b=0;b<ObjectManage.object_list.length;b++){var d=ObjectManage.object_list[b];if(d.data&&1==d.type&&!d.is_die&&!this.isMyPet(d)){var n=
d.grid.x-a.grid.x;d=d.grid.y-a.grid.y;4>n&&-4<n&&4>d&&-4<d&&f++}}return f};_prototype.isMyPet=function(f){return f.OwnerID?f.OwnerID==playerID:!1};_prototype.haswearAmulet=function(){var f=g_UserItemList[9];return f&&(-1!=f.s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==f.s.Name)&&1<=f.Dura};_prototype.haswearGreenP=function(){var f=g_UserItemList[9];return f&&-1!=f.s.Name.indexOf("\u7070\u8272\u836f\u7c89")};_prototype.haswearRedP=function(){var f=g_UserItemList[9];return f&&-1!=
f.s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")};_prototype.hasBagAmulet=function(){for(var f=0;f<g_BagItemsList.length;f++){var a=g_BagItemsList[f];if(a&&(-1!=a.s.Name.indexOf("\u62a4\u8eab\u7b26")||-1!=a.s.Name.indexOf("\u5929\u5c0a\u9053\u7b26")))return!0}return!1};_prototype.hasBagGreenP=function(){for(var f=0;f<g_BagItemsList.length;f++){var a=g_BagItemsList[f];if(a&&-1!=a.s.Name.indexOf("\u7070\u8272\u836f\u7c89"))return!0}return!1};_prototype.hasBagRedP=function(){for(var f=0;f<g_BagItemsList.length;f++){var a=
g_BagItemsList[f];if(a&&-1!=a.s.Name.indexOf("\u9ec4\u8272\u836f\u7c89"))return!0}return!1};_prototype.checkcallpet=function(f,a){if(!this.hassubordinates()&&this.hastriggerskill(f,a))return this.canuseAmulet()};_prototype.canuseAmulet=function(){return this.haswearAmulet()||this.hasBagAmulet()&&(3==g_ClientConfig.Params[4]||GlobalCfglist.d_autoskill_3)||1==g_ClientConfig.Params[4]};_prototype.canusePoison=function(){return this.hasBagRedP()&&(3==g_ClientConfig.Params[4]||GlobalCfglist.d_autoskill_3)||
this.hasBagGreenP()&&(3==g_ClientConfig.Params[4]||GlobalCfglist.d_autoskill_3)||this.haswearGreenP()||this.haswearRedP()||1==g_ClientConfig.Params[4]};_prototype.hastriggerskill=function(f,a){a=this.hasskill(a);var b=ObjectManage.findobject(lockingID);return f&&a&&(b&&0==b.ddl_state||"\u6cbb\u6108\u672f"==a.Def.sMagicName||"\u7fa4\u4f53\u6cbb\u7597\u672f"==a.Def.sMagicName)&&GameUtil.JudgeMagicMp(a,f)?a:null};_prototype.petCount=function(){for(var f=ObjectManage.findobject(playerID).txt_name.text,
a=0,b=0;b<ObjectManage.object_list.length;b++){var d=ObjectManage.object_list[b];d&&d.data&&d.data.record==playerID||!d.txt_name||-1==d.txt_name.text.indexOf(f)||-1==d.txt_name.text.indexOf("\u795e\u517d")&&-1==d.txt_name.text.indexOf("\u767d\u864e")&&-1==d.txt_name.text.indexOf("\u9ab7\u9ac5")||a++}return a};_prototype.hassubordinates=function(){ObjectManage.findobject(playerID);for(var f=0;f<ObjectManage.object_list.length;f++){var a=ObjectManage.object_list[f];if((!a||!a.data||a.data.record!=playerID)&&
a.OwnerID&&a.OwnerID==playerID&&0==a.is_die)return!0}return!1};_prototype.hasskill=function(f){for(var a=0;a<g_UserMagicList.length;a++){var b=g_UserMagicList[a];if(b.Def.sMagicName==f)return b}return null};_prototype.randomPoint=function(f,a,b,d){this.randPos=null;for(var n=Mapmodule.width_,c=Mapmodule.height_,h=20;h--;){var m=Math.floor(Math.random()*(a-f+1)+f-1),g=Math.floor(Math.random()*(d-b+1)+b-1);if(0<m&&m<n&&0<g&&g<c&&AStart.cur_matx&&AStart.cur_matx[0]&&g<AStart.cur_matx.length&&m<AStart.cur_matx[0].length&&
0==AStart.cur_matx[g][m]){this.randPos=[m,g];break}}};_prototype.getPos=function(){var f=Mapmodule.width_,a=Mapmodule.height_;if(72>f&&48>a&&(this.randomPoint(0,f,0,a),null!=this.randPos))return;a=ObjectManage.findobject(playerID);f=a.grid.x-12;a=a.grid.y-8;if(0>this.goDir||7<this.goDir)this.goDir=Math.floor(8*Math.random());switch(this.goDir){case 0:var b=f;var d=f-24;goMaxY=a;goMinY=a-16;break;case 1:b=f+24;d=f;goMaxY=a;goMinY=a-16;break;case 2:b=f+48;d=f+24;goMaxY=a;goMinY=a-16;break;case 3:b=
f+48;d=f+24;goMaxY=a+16;goMinY=a;break;case 4:b=f+48;d=f+24;goMaxY=a+32;goMinY=a+16;break;case 5:b=f+24;d=f;goMaxY=a+32;goMinY=a+16;break;case 6:b=f;d=f-24;goMaxY=a+32;goMinY=a+16;break;case 7:b=f,d=f-24,goMaxY=a+16,goMinY=a}this.randomPoint(d,b,goMinY,goMaxY);null==this.randPos&&(this.goDir=-1)};_prototype.autoflow=function(){if(Objectcontrol.self_obj&&autohookstate&&!rockerfirst&&4!=Objectcontrol.self_obj.cur_state)if(roledielock)autohookstate=!1,Laya.stage.event("guaji_pic");else if(!(Actionlock||
rockerlock||player_stalls)){var f=Objectcontrol.self_obj;if(!this.getMapItem(999,!0))if(this.findMonster())this.autorule(),this.randPos=null;else if(null==this.randPos?this.getPos():(1==f.cur_state||6==f.cur_state)&&3<this.errCount++&&(this.errCount=0,this.goDir=-1,this.randPos=null),null!=this.randPos&&!moveing){var a=new Laya.Point(this.randPos[0],this.randPos[1]);Fightmodule.leavefight();Movemodule.startmove(f.grid,a)}}};_prototype.findMonster=function(){var f=Objectcontrol.self_obj;if(0!=lockingID)return this.randPos=
null,!0;var a=ObjectManage.findlateobject(f.grid,12);if(a){var b=Movemodule.find4path(f.grid,a.grid);f=Math.floor(f.grid.distance(a.grid.x,a.grid.y));if(b||1>=f)return Fightmodule.leavefight(),GameUtil.addhalo(a),Movemodule.stopmove(),this.randPos=null,g_autohookpoison=0,!0}return!1};_prototype.maxBag=function(){for(var f=0;f<g_BagItemsList.length;f++)if(!g_BagItemsList[f])return!1;Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return!0};_prototype.canGet=function(f,
a){for(var b=0;b<ObjectManage.object_list.length;b++){var d=ObjectManage.object_list[b];if(d&&!d.is_die&&d.grid.x==f&&d.grid.y==a)return!1}return!0};_prototype.getMapItem=function(f,a){var b=f,d=ObjectManage.findobject(playerID),n=ObjectManage.GetAttr(playerID);if(d&&n&&0==lockingID&&!this.maxBag()&&n.Weight<n.MaxWeight){for(n=0;n<Gameconfig.pickItemList.length;n++){var c=Gameconfig.pickItemList[n];if(!(c&&c.id&&g_cannotPick[c.id]||!(c&&c.x&&c.y&&AStart.cur_matx[0]&&c.x<AStart.cur_matx[0].length&&
c.y<AStart.cur_matx.length&&0==AStart.cur_matx[c.y][c.x]&&this.canGet(c.x,c.y))||autohookstate&&!Gameconfig.itemCheck(c.Name,3)||autopickstate&&!Gameconfig.itemCheck(c.Name,1))){var h=parseInt(d.grid.distance(c.x,c.y));if(h<=b){b=h;this.itemPos.x=c.x;this.itemPos.y=c.y;this.itemId=c.id;var m=c}}}if(b!=f){if((f=ObjectManage.findlateobject(d.grid,b))&&a&&(!GlobalCfglist.pickItemsFirst||this.checkItemsDyingOnPickFirst(m)))return Fightmodule.leavefight(),GameUtil.addhalo(f),Movemodule.stopmove(),!0;Fightmodule.leavefight();
a=Laya.Browser.now();if((!g_cannotPick[this.itemId]||3E3<a-g_cannotPick[this.itemId])&&ItemMgr.getInstance().existThisItemInMap(m))return d.grid.x==this.itemPos.x&&d.grid.y==this.itemPos.y||Movemodule.start3move(d.grid,this.itemPos)?!0:!1}}return!1};_prototype.checkItemsDyingOnPickFirst=function(f){return GlobalCfglist.pickItemsFirst&&!ItemMgr.getInstance().existThisItemInMap(f)};return e}(),FightModule=function(){function e(){this.init()}_prototype=e.prototype;_prototype.init=function(){this.att_time=
this.use_type=0;this.use_autoattack=!0;this.path_list=[];this.end_point=new Laya.Point;this.AttOff_list=[];this.path=[]};_prototype.leavefight=function(){chaseing=!1;this.path_list=[];attackerID=0;this.path=[]};_prototype.attactsound=function(f){f.data&&f.data.fea&&f.data.fea.buffer&&(f=THumFeature(f.data.fea.buffer),GameUtil.WeaponAttackSound(SM_HIT,f.wWeapon,f.nSex))};_prototype.canuseskill=function(f,a){for(var b=ObjectManage.findobject(playerID),d=0;d<g_UserMagicList.length;++d)if(g_UserMagicList[d]&&
g_UserMagicList[d].Def.btEffect==f&&g_UserMagicList[d].Def.wMagicId==a&&b&&GameUtil.JudgeMagicMp(g_UserMagicList[d],b))return!0;return!1};_prototype.checkcd=function(f){var a=Laya.Browser.now(),b=!0;switch(f){case 24:b=a>Gameconfig.lastFireHitTime+Skillmodule.checklegal(24,26)+1E3;break;case 23:b=0==Objectcontrol.is_open_by;break;case 43:b=a>Gameconfig.lastKTZTime+Skillmodule.checklegal(43,95)+1E3;break;case 53:b=a>Gameconfig.lastZRTime+Skillmodule.checklegal(53,76)+1E3;break;case 38:b=a>Gameconfig.lastLYTime+
Skillmodule.checklegal(38,43)+1E3}return b};_prototype.newAutohookstateFindPath=function(f,a,b){var d=Math.floor(f.grid.distance(a.grid.x,a.grid.y));this.path=b||a&&0==a.target_pos.x||0==a.target_pos.y?Movemodule.find4path(f.grid,a.grid):Movemodule.find4path(f.grid,a.target_pos);if(0<this.path.length){Objectcontrol.move_call_result=!0;b=this.path[0];if(this.path[1]&&(this.path[1].x!=a.grid.x||this.path[1].y!=a.grid.y))var n=this.path[1];f=GameUtil.getorientation(f.grid,b);if(n&&3!=d&&(d=GameUtil.getorientation(b,
n),f==d&&Objectcontrol.executemove(n,f,3))){this.AttOff_list=[];this.path.splice(0,2);return}Objectcontrol.executemove(b,f,2)&&(this.path.shift(),this.AttOff_list=[])}else GameUtil.delhalo(lockingID),g_boMagicGood=!1};_prototype.startchaseing=function(f,a){if(0!=chaseing){if(autohookstate)if(0==this.path_list.length&&(this.path_list=Movemodule.find4path(f.grid,a.grid)),0<this.path_list.length){Objectcontrol.move_call_result=!0;var b=this.path_list[0];if(this.path_list[1]&&(this.path_list[1].x!=a.grid.x||
this.path_list[1].y!=a.grid.y)&&(this.path_list[1].x!=a.target_pos.x||this.path_list[1].y!=a.target_pos.y))var d=this.path_list[1];f=GameUtil.getorientation(f.grid,b);if(d){var n=GameUtil.getorientation(b,d);if(f==n&&(this.move_index++,Objectcontrol.executemove(d,f,3))){this.path_list.splice(0,2);return}}if(b.x==a.target_pos.x&&b.y==a.target_pos.y||b.x==a.grid.x&&b.y==a.grid.y)return;Objectcontrol.executemove(b,f,2)&&this.path_list.shift()}else chaseing=!1,this.path_list=[],this.path=[],autohookstate&&
0!=lockingID&&(-1==this.AttOff_list.indexOf(lockingID)&&this.AttOff_list.push(lockingID),GameUtil.delhalo(lockingID),lockingID=0),f&&1==f.cur_state&&(attackerID=0);else this.newAutohookstateFindPath(f,a,firstUpdatePath);firstUpdatePath&&(firstUpdatePath=!1)}};_prototype.longrangeattack=function(f,a,b,d){GlobalCfglist.z_autoskill_2&&1>=d&&this.canuseskill(24,26)&&this.checkcd(24)?Objectcontrol.useskill(24,26):GlobalCfglist.zs_zrjf&&4>=d&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(53,76)&&this.checkcd(53)?
Objectcontrol.useskill(53,76):GlobalCfglist.z_autoskill_4&&4>=d&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(43,95)&&this.checkcd(43)?Objectcontrol.useskill(43,95):GlobalCfglist.zs_lyjf&&4>=d&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(38,43)&&this.checkcd(38)?Objectcontrol.useskill(38,43):GlobalCfglist.z_autoskill_3&&this.can_auto_by(f)&&1>=d&&this.canuseskill(23,25)&&!Objectcontrol.is_open_by?Objectcontrol.useskill(23,25):GlobalCfglist.z_autoskill_3&&!this.can_auto_by(f)&&1>=d&&this.canuseskill(23,
25)&&Objectcontrol.is_open_by&&Objectcontrol.useskill(23,25)};_prototype.isexcavate=function(f){return f&&f.visible&&f.is_die&&(11==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&160==f.skin_feature.wAppr||11==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&161==f.skin_feature.wAppr||19==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&43==f.skin_feature.wAppr||19==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&70==f.skin_feature.wAppr||16==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&
24==f.skin_feature.wAppr||52==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&39==f.skin_feature.wAppr||19==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&113==f.skin_feature.wAppr||52==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&93==f.skin_feature.wAppr)};_prototype.excavate=function(f,a){a=GameUtil.getorientation(f,a);f.changestate(null,12,a,!1,"play_over_test");Sendmessage.sendButchAnimal(f.grid.x,f.grid.y,f.cur_dir,lockingID)};_prototype.hasquadis=function(f,a){var b=Math.abs(f.x-
a.x);f=Math.abs(f.y-a.y);return 0==b||0==f||b==f};_prototype.can_auto_by=function(f){var a=f.cur_dir,b=0,d=0==a?GameUtil.getMovePoint(f.grid,7,1):GameUtil.getMovePoint(f.grid,(a-1)%7,1),n=GameUtil.getMovePoint(f.grid,a%7,1),c=GameUtil.getMovePoint(f.grid,(a+1)%7,1);a=GameUtil.getMovePoint(f.grid,(a+2)%7,1);for(var h=0;h<ObjectManage.object_list.length;h++){var m=ObjectManage.object_list[h];m!=f&&2!=m.type&&!m.is_die&&(m.grid.x==d.x&&m.grid.y==d.y||m.grid.x==n.x&&m.grid.y==n.y||m.grid.x==c.x&&m.grid.y==
c.y||m.grid.x==a.x&&m.grid.y==a.y)&&b++}return 1<b};_prototype.startattack=function(f,a){attackerID=lockingID;var b=ObjectManage.findobject(playerID),d=ObjectManage.findobject(attackerID);if(b&&d){b.grid.x=Math.floor(b.x/48);b.grid.y=Math.floor(b.y/32);a=GameUtil.getorientation(b.grid,d.grid);var n=0==d.target_pos.x&&0==d.target_pos.y?Math.floor(b.grid.distance(d.grid.x,d.grid.y)):Math.floor(b.grid.distance(d.target_pos.x,d.target_pos.y));if(this.isexcavate(d))1>=n?(this.excavate(b,d),this.path_list=
[],this.path=[]):(chaseing=!0,this.startchaseing(b,d));else{var c=Math.floor(b.grid.distance(d.grid.x,d.grid.y));0<disAfterTargetMoved&&(n+=disAfterTargetMoved);this.longrangeattack(b,d,f,n);this.useattack(b,d,f,a,n,c)?g_ClientConfig.boDisabledDoubleFireHitSkill&&24==f&&void 0!=doubleFirePosIndex&&(Laya.stage.event("skillcd_ani",doubleFirePosIndex),doubleFirePosIndex=void 0):(chaseing=!0,this.startchaseing(b,d))}}else b&&b.grid&&(d=2,g_serverconfig.nAtkRange&&(d=g_serverconfig.nAtkRange),(d=ObjectManage.findlateobject(b.grid,
d))?(GameUtil.addhalo(d),this.startattack(f)):(chaseing=!1,this.path_list=[],this.path=[],a||Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u6ca1\u6709\u53ef\u653b\u51fb\u76ee\u6807\uff01",color:"#ff0000"}]),this.attacking(0,0,b,b,b.cur_dir),this.keepSkillIdOnEmptyAttack(f)))};_prototype.keepSkillIdOnEmptyAttack=function(f){-1<[24].indexOf(f)&&(Objectcontrol.atttype=f,Objectcontrol.controltype=3,Objectcontrol.skillList.push(f))};_prototype.canCiSha=function(f,a,b,d,n){return f?GlobalCfglist.zs_gwcs&&
2==f&&this.noRagingFire(b)||GlobalCfglist.z_autoskill_1&&1>=a&&this.noRagingFire(b):this.hasquadis(d.grid,n.grid)&&GlobalCfglist.zs_gwcs&&2==a||GlobalCfglist.z_autoskill_1&&1>=a};_prototype.noRagingFire=function(f){return 23!=f&&(!this.canuseskill(24,26)||24!=f&&!this.checkcd(24))};_prototype.useattack=function(f,a,b,d,n,c){if(!autohookstate&&0==n)return!1;if(1>=n&&24==b&&this.canuseskill(24,26)&&(type=26)||4>=n&&53==b&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(53,76)&&(type=76)||4>=n&&43==
b&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(43,95)&&(type=95)||4>=n&&38==b&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(38,43)&&(type=43)||1>=n&&5==b&&this.hasquadis(f.grid,a.grid)&&this.canuseskill(5,7)&&(type=7)||1>=n&&Objectcontrol.is_open_by&&this.canuseskill(23,25)&&0==b&&(b=23)&&(type=25)||this.canCiSha(c,n,b,f,a)&&Objectcontrol.is_open_cs&&this.canuseskill(13,12)&&(0==b||5==b)&&(b=13)&&(type=12)||1>=n&&0==b){if(2<=n&&5==b&&!GlobalCfglist.zs_gwcs)return!1;this.attacking(b,type,f,
a,d);return!0}if(1>=n)return this.attacking(0,type,f,a,d),!0;var h;2!=f.cur_state&&3!=f.cur_state||2!=a.cur_state&&3!=a.cur_state||f.cur_dir==a.cur_dir||0<disAfterTargetMoved&&(h=n-disAfterTargetMoved);return h&&0==b&&1>=h?(this.attacking(b,type,f,a,d),!0):!1};_prototype.attacking=function(f,a,b,d,n,c){if(autohookstate&&b&&d&&b.grid.x==d.grid.x&&b.grid.y==d.grid.y)for(c=0;8>c;c++){for(var h=GameUtil.GetNextPoint(b.grid.x,b.grid.y,c),m=!1,g=0;g<ObjectManage.object_list.length;++g){var l=ObjectManage.object_list[g];
if((!l||!l.is_die)&&l&&l.grid.x==h.x&&l.grid.y==h.y){m=!0;break}}if(!m){this.leavefight();Movemodule.startmove(b.grid,h);return}}attack_lock_state&&-1!=rocker_move_dir&&(n=rocker_move_dir,l=ObjectManage.hasobstacleID(b.grid,n))&&(d=l,GameUtil.addhalo(l));this.attactsound(b);n=this.getActualDirAndPos(n,b.grid,b,d);Skillmodule.openMsg(f,n[1],n[0]);n=0==d.target_pos.x?d.grid:d.target_pos;c=this.getSkillLevel(f,a);Skillmodule.playself(f,a,b,n,d.data.record,c);attack_call_time=Laya.Browser.now();Movemodule.stopmove();
Objectcontrol.atttype=0};_prototype.getActualDirAndPos=function(f,a,b,d){if(0==d.target_pos.x||0==d.target_pos.y||0==b.target_pos.x||0==b.target_pos.y)return[f,a];a=GameUtil.getorientation(b.grid,d.target_pos);return void 0==a||null==a?[f,b.target_pos]:[a,b.target_pos]};_prototype.getSkillLevel=function(f,a){for(var b=0;b<g_UserMagicList.length;b++){var d=g_UserMagicList[b];if(d.Def.btEffect==f&&d.Def.wMagicId==a)return d.Level}};return e}(),GameConfig=function(){function e(){this.init()}_prototype=
e.prototype;_prototype.init=function(){this.changePoison=!0;this.drugType=this.cure_time=this.lastLYTime=this.lastZRTime=this.lastKTZTime=this.lastFireHitTime=-1;this.exerciseTime=this.transfer_time1=this.transfer_time=this.autoItem_time=this.hp_mp_time=this.mp_time=this.hp_time=0;this.pickItemList=[];this.sszjs_time=this.yld_time=this.transfer_timeH=this.hp_mp_timeH=this.mp_timeH=this.hp_timeH=0;Laya.stage.on("update_pick_item",this,this.addPickItem);Laya.stage.on("del_pick_item",this,this.delPickItem);
Laya.stage.on("spellUseSkillStart",this,this.spellUseSkillStart);Laya.stage.on("clearSpellUseSkillTimer",this,this.clearSpellUseSkillTimer);this.itemlist=[];this.monsterlist=[]};_prototype.timerManager=function(){Laya.timer.clear(this,this.gameconfigupdate);Laya.timer.loop(500,this,this.gameconfigupdate);Laya.timer.clear(this,this.autoSkill);Laya.timer.loop(1E3,this,this.autoSkill)};_prototype.setItemlist=function(){for(var f=0;f<AllItemList.length;f++){var a=AllItemList[f];this.itemlist[a.itemname]=
[a.isshow,a.ispickup,a.special,a.prompt]}};_prototype.setMonsterList=function(){for(var f=0;f<AllMonsterList.length;f++){var a=AllMonsterList[f];this.monsterlist[a.monsterName]=[a.isExclude]}};_prototype.monsterCheck=function(f){if(this.monsterlist[f])return this.monsterlist[f][0]};_prototype.itemCheck=function(f,a){if(this.itemlist[f])switch(f=this.itemlist[f],a){case 0:return f[0];case 1:return f[1];case 2:return f[2];case 3:return f[3]}};_prototype.gameconfigupdate=function(){var f=Laya.Browser.now(),
a=ObjectManage.findobject(playerID);if(a&&a.m_Abil&&!a.is_die){if(a.m_Abil)var b=a.m_Abil.HP,d=a.m_Abil.MaxHP,n=a.m_Abil.MP,c=a.m_Abil.MaxMP,h=1E3*GlobalCfglist.hptimetext,m=1E3*GlobalCfglist.mptimetext,g=1E3*GlobalCfglist.hptimetext1;GlobalCfglist.autohp_mp&&f-this.hp_mp_time>g&&b<d*GlobalCfglist.hppercentagetext1/100?(g=GlobalCfglist.hpS_img?GlobalCfglist.hpS_img.s?GlobalCfglist.hpS_img.s.Name:GlobalCfglist.hpS_img:"\u9ed8\u8ba4")&&this.useBagItem(g,0)&&(this.hp_mp_time=f):GlobalCfglist.autohp_mp2&&
f-this.hp_mp_time>g&&n<c*GlobalCfglist.hppercentagetext2/100&&(g=GlobalCfglist.mpS_img?GlobalCfglist.mpS_img.s?GlobalCfglist.mpS_img.s.Name:GlobalCfglist.mpS_img:"\u9ed8\u8ba4")&&this.useBagItem(g,1)&&(this.hp_mp_time=f);GlobalCfglist.autohp&&f-this.hp_time>h&&b<d*GlobalCfglist.hppercentagetext/100?(b=GlobalCfglist.hpN_img?GlobalCfglist.hpN_img.s?GlobalCfglist.hpN_img.s.Name:GlobalCfglist.hpN_img:"\u9ed8\u8ba4")&&this.useBagItem(b,0)&&(this.hp_time=f):GlobalCfglist.automp&&f-this.mp_time>m&&n<c*GlobalCfglist.mppercentagetext/
100&&(g=GlobalCfglist.mpN_img?GlobalCfglist.mpN_img.s?GlobalCfglist.mpN_img.s.Name:GlobalCfglist.mpN_img:"\u9ed8\u8ba4")&&this.useBagItem(g,1)&&(this.mp_time=f)}g_myHero&&g_myHero.m_Abil&&0<g_myHero.m_Abil.HP&&(b=g_myHero.m_Abil.HP,d=g_myHero.m_Abil.MaxHP,n=g_myHero.m_Abil.MP,c=g_myHero.m_Abil.MaxMP,h=1E3*GlobalCfglist.hptimetextH,m=1E3*GlobalCfglist.mptimetextH,g=1E3*GlobalCfglist.hptimetext1H,GlobalCfglist.autohp_mpH&&f-this.hp_mp_timeH>g&&b<d*GlobalCfglist.hppercentagetext1H/100?((b=GlobalCfglist.hpS_imgH?
GlobalCfglist.hpS_imgH.s?GlobalCfglist.hpS_imgH.s.Name:GlobalCfglist.hpS_imgH:"\u9ed8\u8ba4")&&this.useHeroItem(b,0),this.hp_mp_timeH=f):GlobalCfglist.autohp_mp2H&&f-this.hp_mp_timeH>m&&n<c*GlobalCfglist.hppercentagetext2H/100?((b=GlobalCfglist.mpS_imgH?GlobalCfglist.mpS_imgH.s?GlobalCfglist.mpS_imgH.s.Name:GlobalCfglist.mpS_imgH:"\u9ed8\u8ba4")&&this.useHeroItem(b,1),this.hp_mp_timeH=f):GlobalCfglist.autohpH&&f-this.hp_timeH>h&&b<d*GlobalCfglist.hppercentagetextH/100?((b=GlobalCfglist.hpN_imgH?GlobalCfglist.hpN_imgH.s?
GlobalCfglist.hpN_imgH.s.Name:GlobalCfglist.hpN_imgH:"\u9ed8\u8ba4")&&this.useHeroItem(b,0),this.hp_timeH=f):GlobalCfglist.autompH&&f-this.mp_timeH>m&&n<c*GlobalCfglist.mppercentagetextH/100&&((b=GlobalCfglist.mpN_imgH?GlobalCfglist.mpN_imgH.s?GlobalCfglist.mpN_imgH.s.Name:GlobalCfglist.mpN_imgH:"\u9ed8\u8ba4")&&this.useHeroItem(b,1),this.mp_timeH=f));a&&g_UserItemList&&(Laya.stage.event("showDuraHead"),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("showDuraHum"))};_prototype.transfer=function(f,
a){var b=Laya.Browser.now();f<=a*GlobalCfglist.tppercentagetext/100&&b-this.transfer_time>=1E3*GlobalCfglist.tptimetext&&GlobalCfglist.tp_img&&this.useBagItem(GlobalCfglist.tp_img.s?GlobalCfglist.tp_img.s.Name:GlobalCfglist.tp_img)&&(this.transfer_time=b)};_prototype.transfer1=function(f,a){var b=Laya.Browser.now();f<=a*GlobalCfglist.tppercentagetext1/100&&b-this.transfer_time1>=1E3*GlobalCfglist.tptimetext1&&GlobalCfglist.tp1_img&&this.useBagItem(GlobalCfglist.tp1_img.s?GlobalCfglist.tp1_img.s.Name:
GlobalCfglist.tp1_img)&&(this.transfer_time1=b)};_prototype.heroCllback=function(f,a){var b=Laya.Browser.now();f<=a*GlobalCfglist.tppercentagetextH/100&&b-this.transfer_timeH>=1E3*GlobalCfglist.tptimetextH&&(g_myHero&&g_myHero.m_Abil&&(Sendmessage.sendConfig(!0),Sendmessage.SendHeroCall()),this.transfer_timeH=b)};_prototype.useBagItem=function(f,a){if(!CanUserItem)return!1;for(var b=0;b<g_BagItemsList.length;b++){var d=g_BagItemsList[b];if(d&&(!(0==d.s.StdMode&&0<d.s.AC&&0<d.s.MAC)||GlobalCfglist.autohp_mp||
GlobalCfglist.autohp_mp2)&&("\u9ed8\u8ba4"==f&&0==d.s.StdMode&&(0==a&&0<d.s.AC||1==a&&0<d.s.MAC)||d.s.Name==f))return this.eat(d),CanUserItem=!1,!0}GameApi.autounpack(2,f);return!1};_prototype.useHeroItem=function(f,a){for(var b=0;b<g_HeroBagItemsList.length;b++){var d=g_HeroBagItemsList[b];if(d&&(!(0==d.s.StdMode&&0<d.s.AC&&0<d.s.MAC)||GlobalCfglist.autohp_mp||GlobalCfglist.autohp_mp2)&&("\u9ed8\u8ba4"==f&&0==d.s.StdMode&&(0==a&&0<d.s.AC||1==a&&0<d.s.MAC)||d.s.Name==f)){d&&(g_AutoItems.Items=d,211!=
g_AutoItems.Items.s.StdMode&&GameUtil.DelHeroBagItems(g_AutoItems.Items.MakeIndex),Sendmessage.heroEat(g_AutoItems.Items.MakeIndex,g_AutoItems.Items.s.Name),this.checkDrugIdx(g_AutoItems.Items.s.Name));return}}GameApi.heroAutounpack(2,f)};_prototype.eat=function(f){f&&(g_AutoItems.Items=f,211!=g_AutoItems.Items.s.StdMode&&GameUtil.DelBagItems(g_AutoItems.Items.MakeIndex),Sendmessage.sendEat(0,g_AutoItems.Items.MakeIndex,g_AutoItems.Items.s.Name),this.checkDrugIdx(g_AutoItems.Items.s.Name))};_prototype.checkDrugIdx=
function(f){for(;0<g_DrugItemsList.length;){var a=g_DrugItemsList[0];null!=a&&a.s.Name==f&&(g_autoDrugButNumber=0);break}};_prototype.autoChangePoison=function(){GlobalCfglist.d_autoskill_3&&("\u4e92\u6362"==GlobalCfglist.d_autoskill_1?(this.changePoison?this.check_userItme(2)||this.changeLD():this.check_userItme(3)||this.changeHD(),this.changePoison=!this.changePoison):"\u7ea2\u6bd2"==GlobalCfglist.d_autoskill_1?(this.check_userItme(3)||this.changeHD(),this.changePoison=!1):"\u7eff\u6bd2"==GlobalCfglist.d_autoskill_1&&
(this.check_userItme(2)||this.changeLD(),this.changePoison=!0))};_prototype.autoChangeFu=function(){GlobalCfglist.d_autoskill_3&&!this.check_userItme(1)&&this.changeF()};_prototype.changeLD=function(){for(var f=0;f<g_BagItemsList.length;f++)if(null!=g_BagItemsList[f]&&-1!=g_BagItemsList[f].s.Name.indexOf("\u7070\u8272\u836f\u7c89")){g_WaitItems.Items=g_BagItemsList[f];g_WaitItems.Index=9;Sendmessage.TakeOnItem2(g_BagItemsList[f],9);GameUtil.DelBagItems(g_BagItemsList[f].MakeIndex);break}};_prototype.changeHD=
function(){for(var f=0;f<g_BagItemsList.length;f++)if(null!=g_BagItemsList[f]&&-1!=g_BagItemsList[f].s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")){g_WaitItems.Items=g_BagItemsList[f];g_WaitItems.Index=9;Sendmessage.TakeOnItem2(g_BagItemsList[f],9);GameUtil.DelBagItems(g_BagItemsList[f].MakeIndex);break}};_prototype.changeF=function(){for(var f=0;f<g_BagItemsList.length;f++)if(null!=g_BagItemsList[f]&&(-1!=g_BagItemsList[f].s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==g_BagItemsList[f].s.Name)){g_WaitItems.Items=
g_BagItemsList[f];g_WaitItems.Index=9;Sendmessage.TakeOnItem2(g_BagItemsList[f],9);GameUtil.DelBagItems(g_BagItemsList[f].MakeIndex);break}};_prototype.spellUseSkillStart=function(){Laya.timer.clear(this,this.checkSpellUseSkill);GlobalCfglist.f_keepskill_1&&g_ClientConfig.SpellIntervalTime&&0<g_ClientConfig.SpellIntervalTime&&Laya.timer.loop(g_ClientConfig.SpellIntervalTime,this,this.checkSpellUseSkill)};_prototype.checkSpellUseSkill=function(){var f=Objectcontrol.self_obj;f&&!f.is_die&&f.m_Abil&&
(f=ObjectManage.findobject(lockingID))&&!f.is_die&&g_boMagicGood&&0<g_magicId&&Objectcontrol.useskill(g_magicId,g_magicType)};_prototype.clearSpellUseSkillTimer=function(){Laya.timer.clear(this,this.checkSpellUseSkill)};_prototype.autoSkill=function(){var f=ObjectManage.findobject(playerID);if(f&&!f.is_die&&f.m_Abil){var a=f.getChildByName("eqsecure"+playerID);if(GlobalCfglist.f_autoskill_1&&!a)for(var b=0;b<g_UserMagicList.length;b++)if(g_UserMagicList[b]&&"\u9b54\u6cd5\u76fe"==g_UserMagicList[b].Def.sMagicName&&
GameUtil.JudgeMagicMp(g_UserMagicList[b],f)){activate_skilluse=29;activate_skilltype=31;Objectcontrol.useskill(29,31);break}if(GlobalCfglist.d_autoskill_2&&.7!=f.alpha)for(b=0;b<g_UserMagicList.length;b++)g_UserMagicList[b]&&"\u9690\u8eab\u672f"==g_UserMagicList[b].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[b],f)&&(this.check_userItme(1)||GlobalCfglist.d_autoskill_3&&this.autoChangeFu(),activate_skilluse=g_UserMagicList[b].Def.btEffect,Objectcontrol.useskill(16,18));if(GlobalCfglist.clear)for(a=
0;a<ObjectManage.object_list.length;a++)if((b=ObjectManage.object_list[a])&&b.is_die){if(1==b.type){var d=TMonFeature(b.data.fea.buffer);if(d&&(901==d.wAppr||902==d.wAppr||903==d.wAppr)&&98==d.wRaceImg)continue}b.obj_frames[b.obj_frames.length-1]&&(b.visible=!1)}a=Laya.Browser.now();if(autohookstate&&GlobalCfglist.ds_cure&&a-this.cure_time>1E3*GlobalCfglist.ds_time_slider&&(b=AutoHookmodule.hastriggerskill(f,GlobalCfglist.ds_cure_list))&&f&&f.m_Abil&&!f.is_die&&a-this.cure_time>1E3*b.Def.w02&&f.m_Abil.HP<=
f.m_Abil.MaxHP*GlobalCfglist.ds_limit_slider/100){AutoHookmodule.setSkill(b,f.grid);this.cure_time=a;return}GlobalCfglist.exercise&&(b=AutoHookmodule.hasskill(GlobalCfglist.exercise_list))&&a-this.exerciseTime>1E3*GlobalCfglist.exercise_slider&&GameUtil.JudgeMagicMp(b,f)&&(AutoHookmodule.setSkill(b),this.exerciseTime=a);a=Laya.Browser.now();if(GlobalCfglist.d_autoskill_5&&a-this.yld_time>1E3*GlobalCfglist.d_autoskill_7)for(b=0;b<g_UserMagicList.length;b++)if(g_UserMagicList[b]&&"\u5e7d\u7075\u76fe"==
g_UserMagicList[b].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[b],f)&&AutoHookmodule.canuseAmulet()&&f&&f.m_Abil&&!f.is_die){AutoHookmodule.setSkill(g_UserMagicList[b],f.grid);this.yld_time=a;break}a=Laya.Browser.now();if(GlobalCfglist.d_autoskill_6&&a-this.sszjs_time>1E3*GlobalCfglist.d_autoskill_8)for(b=0;b<g_UserMagicList.length;b++)if(g_UserMagicList[b]&&"\u795e\u5723\u6218\u7532\u672f"==g_UserMagicList[b].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[b],f)&&AutoHookmodule.canuseAmulet()&&
f&&f.m_Abil&&!f.is_die){AutoHookmodule.setSkill(g_UserMagicList[b],f.grid);this.sszjs_time=a;break}f=ObjectManage.findobject(playerID);a=ObjectManage.findobject(lockingID);f=AutoHookmodule.hastriggerskill(f,"\u65bd\u6bd2\u672f");a&&!a.is_die&&f&&GlobalCfglist.poison_ds&&AutoHookmodule.canusePoison()&&1!=a.havePoison&&2!=a.havePoison&&(g_autohookpoison=0)}Laya.stage.event("buffCountDown")};_prototype.add_Use_Up=function(f){-1!=f.s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==f.s.Name?
this.changeF():-1!=f.s.Name.indexOf("\u7070\u8272\u836f\u7c89")?this.changeLD():-1!=f.s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")&&this.changeHD()};_prototype.check_userItme=function(f){for(var a=0;a<g_UserItemList.length;a++)switch(f){case 1:if(null!=g_UserItemList[a]&&(-1!=g_UserItemList[a].s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==g_UserItemList[a].s.Name))return!0;break;case 2:if(null!=g_UserItemList[a]&&-1!=g_UserItemList[a].s.Name.indexOf("\u7070\u8272\u836f\u7c89"))return!0;
break;case 3:if(null!=g_UserItemList[a]&&-1!=g_UserItemList[a].s.Name.indexOf("\u9ec4\u8272\u836f\u7c89"))return!0}return!1};_prototype.addPickItem=function(f){f&&this.pickItemList.push(f)};_prototype.delPickItem=function(f){for(var a=0;a<this.pickItemList.length;a++){var b=this.pickItemList[a];if(f&&b&&b.id==f){this.pickItemList.splice(a,1);break}}};return e}(),GUIModule=function(){function e(){this.init()}_proto=e.prototype;_proto.init=function(){this.zorder=1};_proto.initView=function(f){for(var a=
0;a<f._childs.length;a++){var b=f._childs[a];if(b.name&&-1!=b.name.indexOf("on")){var d=b.name.split("_");b.extend_event=d[0];b.extend_data=d[1];this.bangdingEvent(b)}if(0<b._childs.length)return this.initView(b)}return!0};_proto.bangdingEvent=function(f){switch(f.extend_event){case "onmove":this.moveUI(f);break;case "onclose":this.closeUI(f);break;case "onhide":this.hideUI(f);break;case "onlistdata":this.listdataUI(f);break;case "onclick":this.clickUI(f)}};_proto.openUI=function(f,a){var b=Laya.stage.getChildByName(f);
if(a||null==b)b=new Laya.__classmap[f],Laya.stage.addChild(b);b&&(b.visible=!0,b.zOrder=this.zorder++);return b};_proto.closeUI=function(f){f.on(Laya.Event.CLICK,this,function(a){for(;f._parent;){if(f._parent==Laya.stage){f.removeSelf();break}f=f._parent}})};_proto.hideUI=function(f){f.on(Laya.Event.CLICK,this,function(a){for(;f._parent;){if(f._parent==Laya.stage){f.visible=!1;break}f=f._parent}})};_proto.moveUI=function(f){function a(d){f.off(Laya.Event.MOUSE_MOVE,this,b);f.off(Laya.Event.MOUSE_OUT,
this,a);f.off(Laya.Event.MOUSE_UP,this,a)}function b(d){for(var n=f;n._parent&&n._parent!=Laya.stage;)n=n._parent;n.x+=d.stageX-f.startpos.x;n.y+=d.stageY-f.startpos.y;f.startpos.x=d.stageX;f.startpos.y=d.stageY}f.startpos=new Laya.Point;f.on(Laya.Event.MOUSE_DOWN,this,function(d){f.startpos.x=d.stageX;f.startpos.y=d.stageY;f.on(Laya.Event.MOUSE_UP,this,a);f.on(Laya.Event.MOUSE_OUT,this,a);f.on(Laya.Event.MOUSE_MOVE,this,b)})};_proto.listdataUI=function(f){Laya.stage.on(f.extend_data+"",this,function(a){f.array=
a});f.renderHandler=new Laya.Handler(this,function(a,b){console.log("----updateItem--\x3e",b);for(b=0;b<a._childs.length;b++){var d=a._childs[b];if(d.name&&-1!=d.name.indexOf("on")){var n=d.name.split("_");d.extend_event=n[0];d.extend_data=n[1];this.bangdingEvent(d)}}})};_proto.clickUI=function(f){f.on(Laya.Event.CLICK,this,function(){Eventmodule.onHandleMsgtoUI(f.extend_data,f)})};return e}(),ItemMgr=function(){function e(){this.InBagList=[];this.InBagMap={};this.UseItemList=[];this.UseItemMap={};
this.DropItemList=[];this.DropItemMap={};this.InDepotRoomList=[];this.InDepotRoomMap={};this.BuyItemRoomList=[];this.BuyItemInfoRoomList=[];this.TradeItemList=[];this.TradeOtherList=[];this.BaiTanList=[];this.LastDragItem=this.LastUseItem=this.LastTradeItem=null;this.LastDragFrom="";this.LastBaiTanBuyItem=this.LastBaiTanItem=this.LastRepaceItem=null;this.MainDlgUseList=[null,null,null,null,null,null];this.MainDlgUseMap={};this.ShopItemList=[];this.StrageList=[];this.LastShopItem=null;this.LastTakeOnPos=
0;this.CurSelecItem=null;this.CanTakeOnItems=!1;this.SelectEquipNPos=-1;this.UseItemLock=!1}var f=null,a=e.prototype;a.AddItemToBag=function(b,d){void 0==d&&(d=!0);if(null!=b&&void 0!=b.s){var n=this.FindItemFromDropList(b.MakeIndex);n&&this.DelItemFromMap(n.MakeIndex);0==d?(void 0==this.InBagMap[b.MakeIndex]&&this.InBagList.push(b),this.InBagMap[b.MakeIndex]=b):1!=this.IsAddItemToMainDlg(b)&&(this.InBagList.length>=GameUtil.MaxBagItems()?Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",
color:"#00ff00"}]):(void 0==this.InBagMap[b.MakeIndex]&&this.InBagList.push(b),this.InBagMap[b.MakeIndex]=b))}};a.DeleteTradeItem=function(b){for(var d=0;d<this.TradeItemList.length;d++)this.TradeItemList[d].id==b&&this.TradeItemList.splice(d,1)};a.DeleteTradeOtherItem=function(b){for(var d=0;d<this.TradeOtherList.length;d++)this.TradeOtherList[d].id==b&&this.TradeOtherList.splice(d,1)};a.AddItemToRole=function(b){void 0!=b.s&&(void 0==this.UseItemMap[b.MakeIndex]&&this.UseItemList.push(b),this.UseItemMap[b.MakeIndex]=
b)};a.FindItemFromDropList=function(b){for(var d=0;d<this.DropItemList.length;d++)if(this.DropItemList[d].MakeIndex==b)return this.DropItemList[d];return null};a.AddItemToMap=function(b){return void 0==this.DropItemMap[b.id]?(this.DropItemList.push(b),this.DropItemMap[b.id]=b,Laya.stage.event("update_pick_item",[b]),Objectcontrol.autodrop(b),!0):!1};a.existThisItemInMap=function(b){return b&&this.DropItemMap?this.DropItemMap[b.id]?!0:!1:!1};a.AddItemToDepot=function(b){void 0!=b.s&&(void 0==this.InDepotRoomMap[b.MakeIndex]&&
this.InDepotRoomList.push(b),this.InDepotRoomMap[b.MakeIndex]=b)};a.IsAddItemToMainDlg=function(b){if(6<=this.getMainDlgItemLength())return!1;var d=this.getMainDlgItemPos();return 3>=b.s.StdMode?(this.MainDlgUseList[d]||(this.MainDlgUseList[d]=b),Laya.stage.event("udpate_maindlg_items"),!0):!1};a.getMainDlgItemLength=function(){for(var b=0,d=0;d<this.MainDlgUseList.length;d++)null!=this.MainDlgUseList[d]&&b++;return b};a.getMainDlgItemPos=function(){for(var b=0;b<this.MainDlgUseList.length;b++)if(null==
this.MainDlgUseList[b])return b;return 0};a.AddItemToMainDlg=function(b){if(void 0==this.MainDlgUseMap[b.MakeIndex])var d=this.getMainDlgItemPos();this.MainDlgUseList[d]=b;this.MainDlgUseMap[b.MakeIndex]=b};a.RemoveItemFromMainDlg=function(b){for(var d=0;d<this.MainDlgUseList.length;d++)this.MainDlgUseList[d]&&this.MainDlgUseList[d].MakeIndex==b&&(this.MainDlgUseList[d]=null);this.MainDlgUseMap[b]&&delete this.MainDlgUseMap[b];Laya.stage.event("udpate_maindlg_items")};a.DelItemFromMap=function(b){void 0==
b&&(this.DropItemList=[],this.DropItemMap={});for(var d=0;d<this.DropItemList.length;d++)if(this.DropItemList[d].id==b){this.DropItemList.splice(d,1);g_cannotPick[b]&&(g_cannotPick[b]=null);break}this.DropItemMap[b]&&delete this.DropItemMap[b];Laya.stage.event("del_pick_item",[b])};a.clearItemAni=function(b,d){if(d.isDorp&&Animationmodule.ani_list){var n;d=Animationmodule.ani_list;for(var c=0;c<d.length;c++)d[c].id==b&&(n=d[c]);Animationmodule.removeAni(n)}};a.HasDropItemById=function(b){return!!this.DropItemMap[b]};
a.DeleteItemFromDepot=function(b){for(var d=0;d<this.InDepotRoomList.length;d++)this.InDepotRoomList[d].MakeIndex!=b&&0!=this.InDepotRoomList[d]||this.InDepotRoomList.splice(d,1);this.InDepotRoomMap[b]&&delete this.InDepotRoomMap[b]};a.DeleteItem=function(b,d){void 0==d&&(d=!0);if(d){for(d=0;d<this.InBagList.length;d++)this.InBagList[d].MakeIndex==b&&this.InBagList.splice(d,1);this.InBagMap[b]&&delete this.InBagMap[b];Laya.stage.event("show_bag_items")}else{for(d=0;d<this.UseItemList.length;d++)this.UseItemList[d].MakeIndex==
b&&this.UseItemList.splice(d,1);this.UseItemMap[b]&&delete this.UseItemMap[b];Laya.stage.event("update_roleeditor")}};a.FindItemFromInBagList=function(b){for(var d=0;d<this.InBagList.length;d++)if(this.InBagList[d].MakeIndex==b)return{tag:d,item:this.InBagList[d]};return null};a.FindItemShapeFromInBag=function(b,d){for(var n=0;n<g_BagItemsList.length;n++)if(g_BagItemsList[n]&&g_BagItemsList[n].s.StdMode==b&&g_BagItemsList[n].s.Shape==d)return{tag:n,item:g_BagItemsList[n]};return null};a.FindItemFromUseList=
function(b){for(var d=0;d<this.UseItemList.length;d++)if(this.UseItemList[d].MakeIndex==b)return{tag:d,item:this.UseItemList[d]};return null};a.FindUseItemByType=function(b){for(var d=[],n=0;n<this.UseItemList.length;n++)GameUtil.GetItemType(this.UseItemList[n].s)==b&&d.push(this.UseItemList[n]);return d};a.FindUseItemByNpos=function(b){for(var d=0;d<this.UseItemList.length;d++)if(this.UseItemList[d].tag==b)return this.UseItemList[d];return null};a.RepleaseUseItem=function(b,d){for(var n=0;n<this.UseItemList.length;n++)this.UseItemList[n].MakeIndex==
b&&(this.UseItemList[n]=d,this.UseItemMap[b]=d)};a.UpdateItem=function(b){var d=this.FindItemFromInBagList(b.MakeIndex);d&&(this.InBagList[d.tag]=b,this.InBagMap[b.MakeIndex]=b,Laya.stage.event("show_bag_items"));if(d=this.FindItemFromUseList(b.MakeIndex))this.UseItemList[d.tag]=b,this.UseItemMap[b.s.MakeIndex]=b,Laya.stage.event("update_roleeditor")};a.AutoAddHP=function(){e.getInstance();var b=this.GetItemListByName(g_AutoAddHPItemName);this.GetItemListByName(g_AutoAddHPItemGroupName);var d=0,n=
0;if(playerID){var c=ObjectManage.findObject(playerID);c&&c.m_Abil&&(n=c.m_Abil.MaxHP,d=c.m_Abil.HP)}(0!=d||0!=n)&&100<n-d&&0<b.length&&this.UseItem(b[0])};a.AutoAddMP=function(){};a.UseItem=function(b){1==this.UseItemLock?Laya.stage.event("show_log",[{txt:"\u7981\u6b62\u8fde\u7eed\u4f7f\u7528\u7269\u54c1",color:"#ff0000"}]):(this.UseItemLock=!0,(this.LastUseItem=b)&&Sendmessage.SendUseItem(b.MakeIndex,b.s.Name),GameUtil.ClickSound(b))};a.GetItemListByName=function(b){for(var d=[],n=0;n<this.InBagList.length;n++)this.InBagList[n].s.DBName==
b&&d.push(this.InBagList[n]);return d};a.GetItemListByType=function(b){for(var d=[],n=0;n<this.InBagList.length;n++){var c=GameUtil.GetItemType(this.InBagList[n].s);c==b?d.push(this.InBagList[n]):5==b||6==b?5!=c&&6!=c||d.push(this.InBagList[n]):7!=b&&8!=b||8!=c&&7!=c||d.push(this.InBagList[n])}return d};a.RemoveShopRoomItem=function(b){for(var d=!1,n=0;n<this.BuyItemInfoRoomList.length;n++)b.MakeIndex==this.BuyItemInfoRoomList[n].MakeIndex&&(this.BuyItemInfoRoomList.splice(n,1),d=!0);for(n=0;n<this.BuyItemRoomList.length;n++)b.MakeIndex==
this.BuyItemRoomList[n].MakeIndex&&(d=!0,this.BuyItemRoomList.splice(n,1));return d};a.GetDropItemByActor=function(b){b=new Laya.Point(b.x,b.y);for(var d=null,n=99999,c,h=0;h<this.DropItemList.length;h++)c=b.distance(this.DropItemList[h].x,this.DropItemList[h].y),c<n&&(n=c,d=this.DropItemList[h]);return d};a.GetPotionItems=function(){for(var b=[],d=0;d<this.InBagList.length;d++)3>=this.InBagList[d].s.StdMode&&b.push(this.InBagList[d]);return b};a.GetUseItemCntByName=function(b){for(var d=0,n=0;n<
this.UseItemList.length;n++)this.UseItemList[n].s.Name==b&&d++;return d};a.GetUseItemByName=function(b){for(var d=0;d<this.UseItemList.length;d++)if(this.UseItemList[d].s.Name==b)return this.UseItemList[d];return null};a.FindUseItemByPos=function(b){for(var d=0;d<g_UserItemList.length;d++)if(g_UserItemList[d]&&d==b)return g_UserItemList[d];return null};a.ClearItem=function(){this.InBagList=[];this.InBagMap={};this.UseItemList=[];this.UseItemMap={};this.DropItemList=[];this.DropItemMap={};this.InDepotRoomList=
[];this.InDepotRoomMap={};this.BuyItemRoomList=[];this.BuyItemInfoRoomList=[];this.TradeItemList=[];this.TradeOtherList=[];this.LastDragItem=this.LastUseItem=this.LastTradeItem=null;this.LastDragFrom="";this.LastRepaceItem=null;this.MainDlgUseList=[null,null,null,null,null,null];this.MainDlgUseMap={}};a.AddItemToBaiTan=function(b){var d=this.FindItemFromInBagList(b.id).item;this.DeleteItem(d.MakeIndex);this.BaiTanList.push({item:d,price:b.num,type:b.type});Laya.stage.event("show_bag_items")};a.AddBaiTanItemToBag=
function(){for(var b=0;b<this.BaiTanList.length;b++)this.AddItemToBag(this.BaiTanList[b].item,!1);this.BaiTanList=[];Laya.stage.event("show_bag_items")};return{getInstance:function(){null==f&&(f=new e);return f}}}(),MagicMgr=function(){function e(){this.OnRoleList=[];this.OnRoleMap={};this.UseList=[];this.UseMap=[];this.LastDragMagicNode=null;this.CurSelectIdx=-1;this.StaticMagicList=[]}var f=null,a=e.prototype;a.AddMagicToRole=function(b){void 0==this.OnRoleMap[b.Def.wMagicId]&&(this.OnRoleList.push(b),
this.OnRoleMap[b.Def.wMagicId]=b,13==b.Key&&Laya.stage.event("add_magic_attack",[b]))};a.FindMagicFromStatic=function(b){for(var d=0;d<Skillmodule.skill_data.length;d++)if(Skillmodule.skill_data[d].id==b)return Skillmodule.skill_data[d].name;return null};a.GetOnRoleMagicList=function(){return this.OnRoleList};a.DeleteFromOnRole=function(b){if(this.OnRoleMap[b]){for(var d=0;d<this.OnRoleList.length;d++)this.OnRoleList[d].Def.wMagicId==b&&(Laya.stage.event("show_log",[{txt:this.OnRoleList[d].Def.sMagicName+
" \u5df2\u4ece\u6280\u80fd\u5217\u8868\u5220\u9664",color:"#ff0000"}]),this.OnRoleList.splice(d,1));delete this.OnRoleMap[b]}};a.IsUsedNpos=function(b){for(var d=0;d<this.UseList.length;d++)if(this.UseList[d].Key==b)return!0;return!1};a.AddMagicToUseList=function(b){if(void 0==this.UseMap[b.Def.wMagicId]){for(var d=0;d<this.UseList.length;d++)if(this.UseList[d].Key==b.Key)return!1;this.UseList.push(b);this.UseMap[b.Def.wMagicId]=b;Laya.stage.event("show_log",[{txt:b.Def.sMagicName+" \u5df2\u6dfb\u52a0\u5230\u5feb\u6377\u680f\u4e2d",
color:"#00ff00"}]);return!0}return!1};a.DeleteFromUseList=function(b){if(this.UseMap[b]){for(var d=0;d<this.UseList.length;d++)this.UseList[d].Def.wMagicId==b&&(Laya.stage.event("show_log",[{txt:this.UseList[d].Def.sMagicName+" \u5df2\u4ece\u5feb\u6377\u680f\u5220\u9664",color:"#00ff00"}]),this.UseList.splice(d,1));delete this.UseList[b]}};a.DeleteFromUseNpos=function(b){for(var d=0,n=0;n<this.UseList.length;n++)this.UseList[n].Key==b&&(d=this.UseList[n].Def.wMagicId,this.OnRoleMap[d].Key=0,Sendmessage.SendMagicKey(this.UseList[n]),
Laya.stage.event("show_log",[{txt:this.UseList[n].Def.sMagicName+" \u5df2\u4ece\u5feb\u6377\u680f\u5220\u9664",color:"#00ff00"}]),this.UseList.splice(n,1));0!=d&&delete this.UseMap[d]};a.GetUseListIndexFromNpos=function(b){for(var d=0;d<this.UseList.length;d++)if(this.UseList[d].Key==b)return d;return-1};a.FindMagicFromUseList=function(b){return this.UseMap[b]};a.FindMagicFromOnRoleList=function(b){return this.OnRoleList[b]};a.DestoryMagic=function(b){var d=this.FindMagicFromUseList(b);d&&(12>=d.Key?
Laya.stage.event("remove_magic",[d.Key-1]):13==d.Key&&Laya.stage.event("add_magic_attack"));this.DeleteFromOnRole(b);this.DeleteFromUseList(b);Laya.stage.event("update_magic_list")};a.GetMagicByKey=function(b){for(var d=0;d<this.UseList.length;d++)if(this.UseList[d].Key==b)return this.UseList[d];return null};a.ClearMagic=function(){this.OnRoleList=[];this.OnRoleMap={};this.UseList=[];this.UseMap=[];this.LastDragMagicNode=null;this.CurSelectIdx=-1};return{getInstance:function(){null==f&&(f=new e);
return f}}}(),MapData=function(){function e(){this.init()}_prototype=e.prototype;_prototype.init=function(){this.map_npc_data=[];this.npc_type=[];this.cur_music=this.cur_type=this.cur_id=this.cur_name="";this.safeZone=[];this.root=this.cover_sp=this.root_img=null;this.img_list=[];for(var f=0;100>f;f++){var a=new Laya.Image;this.img_list.push(a)}};_prototype.setdata=function(f,a){this.map_npc_data=f;this.npc_type=a};_prototype.getNPClist=function(){for(var f=[],a=0;a<this.map_npc_data.length;++a){var b=
this.map_npc_data[a];b.mapid==this.cur_id&&f.push(b)}return f};_prototype.setParent=function(f){this.root=f;this.root_img=new Laya.Image;this.root_img.on(Laya.Event.CLICK,this,function(){isOpen&&(open_minimap=!0);Sendmessage.sendOpenMinimap()});f.addChild(this.root_img);this.cover_sp=new Laya.Sprite;this.cover_sp.pos(0,0);this.cover_sp.name="coversp";this.root_img.addChild(this.cover_sp);this.cover_sp.zOrder=2};_prototype.drawminimap=function(f){this.root_img.graphics.clear();this.cover_sp.graphics.clear();
for(this.cover_sp.removeChildren();this.root_img.getChildByName("descName");)this.root_img.removeChildByName("descName");this.minipoint_visible=!1;if(0<=f&&65535>=f){var a="",b=0;1E4<=f?(a="mmap10",b=f-1E4):999<=f?(a="mmap",b=f-999):800<=f?(a="mmap1",b=f-800):(a="mmap",b=f);GameUtil.loadImg(b,a,function(n){Laya.loader.getRes(n)&&(d.root_img.loadImage(n),d.drawDesc(),d.minipoint_visible=!0)});var d=this}};_prototype.drawDesc=function(){for(var f=this.root_img.width/Mapmodule.mapMaxX,a=this.root_img.height/
Mapmodule.mapMaxY,b=0;b<g_mapdesc.length;b++){var d=g_mapdesc[b];if(d&&5<d.length&&d[0]==Mapdata.cur_name&&"1"==d[5]){var n=new Laya.Text;n.text=d[3];n.color="#"+Get3RGB(d[4].substr(1));n.stroke=1;n.strokeColor="#000000";n.name="descName";var c=parseInt(d[1])*f;d=parseInt(d[2])*a;n.pos(c-n.width/2,d-n.height/2);this.root_img.addChild(n);n.zOrder=1}}};_prototype.updateminimap=function(f,a,b){this.minipoint_visible&&this.root_img&&this.root_img.width&&this.root_img.height&&Mapmodule.mapMaxX&&(b*=this.root_img.height/
Mapmodule.mapMaxY,a=Math.floor(-(this.root_img.width/Mapmodule.mapMaxX*a-f.pl_mini.width/2)),b=Math.floor(-(b-f.pl_mini.height/2)),a>this.root_img.width&&(a=0),0<b&&(b=0),this.root_img.pos(a,b),this.root_img.x<=-this.root_img.width+f.pl_mini.width&&(this.root_img.x=-this.root_img.width+f.pl_mini.width),0<=this.root_img.x&&(this.root_img.x=0),this.root_img.y<=-this.root_img.height+f.pl_mini.height&&(this.root_img.y=-this.root_img.height+f.pl_mini.height),0<=this.root_img.y&&(this.root_img.y=0),this.updatelistpos())};
_prototype.updatelistpos=function(){if(null!=this.cover_sp||null!=this.root_img){this.cover_sp.removeChildren();for(var f=this.root_img.width/Mapmodule.mapMaxX,a=this.root_img.height/Mapmodule.mapMaxY,b=0;b<ObjectManage.object_list.length;++b){var d=ObjectManage.object_list[b];if(!d.is_die&&this.img_list[b]){var n=a*(d.grid.y-1)-1.5;this.img_list[b].x=f*(d.grid.x-1)-1.5;this.img_list[b].y=n;1==d.type?(this.img_list[b].skin="gameres/ui/minimap_red.png",this.img_list[b].zOrder=7,this.cover_sp.addChild(this.img_list[b])):
2==d.type?(this.img_list[b].skin="gameres/ui/minimap_green.png",this.img_list[b].zOrder=8,this.cover_sp.addChild(this.img_list[b])):3==d.type&&(d.data.record==playerID?(this.img_list[b].skin="gameres/ui/dir_"+d.cur_dir+".png",this.img_list[b].zOrder=10,this.img_list[b].y-=9,this.img_list[b].x-=5):(this.img_list[b].skin="gameres/ui/minimap_yellow.png",this.img_list[b].zOrder=9),this.cover_sp.addChild(this.img_list[b]))}}}};return e}(),MoveModule=function(){function e(){this.init()}_prototype=e.prototype;
_prototype.init=function(){this.move_list=[];this.springbacktimes=this.refindpathtimes=this.move_index=0;this.end_point=null;Laya.stage.on("movespringback",this,function(){moveing&&(this.springbacktimes+=1)})};_prototype.startmove=function(f,a){if(f.x!=a.x||f.y!=a.y)this.move_list=this.find4path(f,a),0<this.move_list.length?(moveing=!0,this.move_index=0):(autohookstate&&0!=lockingID&&(-1==Fightmodule.AttOff_list.indexOf(lockingID)&&Fightmodule.AttOff_list.push(lockingID),GameUtil.delhalo(lockingID),
lockingID=0),attackerID=0)};_prototype.start3move=function(f,a){this.move_list=this.find4path(f,a);return 0<this.move_list.length?(moveing=!0,this.move_index=0,!0):!1};_prototype.start2move=function(f,a,b){b||(this.refindpathtimes=0);this.springbacktimes=0;a=this.haveObj(a);this.move_list=this.find2path(f,a);if(0<this.move_list.length)for(moveing=!0,this.move_index=0,f=this.move_list.length-this.move_index,50<this.move_list.length-this.move_index&&(f=50),a=this.move_index+1;a<f;++a)this.drawXunluPoint(this.move_list[a].x,
this.move_list[a].y)};_prototype.drawXunluPoint=function(f,a){var b=Laya.Pool.getItemByClass("xunlu_point",Laya.Image);b.skin="gameres/ui/xunlu_point.png";b.name="xunlu";b.pos(48*f+15,32*a+5);Mapmodule.root.addChild(b)};_prototype.moveing=function(f){if(moveing&&Objectcontrol.self_obj&&null!=Objectcontrol.self_obj.lastMoveTarget)this.move_list=[],Objectcontrol.objectmove(null,Objectcontrol.self_obj.lastMoveTarget),Objectcontrol.self_obj.lastMoveTarget=null;else{if(this.end_point&&f.x==this.end_point.x&&
f.y==this.end_point.y){if(g_mapnpc&&void 0!=g_mapnpc.x&&void 0!=g_mapnpc.y)for(var a=0;a<ObjectManage.object_list.length;++a){var b=ObjectManage.object_list[a];if(b&&2==b.type&&b.grid.x==g_mapnpc.x&&b.grid.y==g_mapnpc.y){GameApi.ShowNewNpcDlg(!1);Sendmessage.sendNPCClick(b.data.record);g_mapnpc=null;break}}this.end_point=null}if(!autohookstate&&2<this.springbacktimes&&0<this.move_list.length&&5>=this.refindpathtimes)this.retrymove(f);else if(moveing||0!=this.move_list.length||null==this.end_point)if(!moveing||
this.move_index>=this.move_list.length||5<this.refindpathtimes)this.refindpathtimes=0,this.stopmove();else if(Objectcontrol.self_obj&&Objectcontrol.self_obj.obj_hores){if(a=this.move_list[this.move_index],b=GameUtil.getorientation(f,a),a){var d=this.move_list[this.move_index+1],n=this.move_list[this.move_index+2];if(d&&n){var c=GameUtil.getorientation(a,d);d=GameUtil.getorientation(d,n);if(b==c&&c==d){Objectcontrol.executemove(n,b,4)?this.move_index+=3:this.retrymove(f);return}}Objectcontrol.executemove(a,
b,2)?this.move_index++:this.retrymove(f)}}else{a=this.move_list[this.move_index];d=this.move_list[this.move_index+1];b=GameUtil.getorientation(f,a);if(d&&(c=GameUtil.getorientation(a,d),b==c)){Objectcontrol.executemove(d,b,3)?this.move_index+=2:this.retrymove(f);return}Objectcontrol.executemove(a,b,2)?this.move_index++:this.retrymove(f)}else this.retrymove(f)}};_prototype.retrymove=function(f){var a=this.end_point;this.stopmove();a&&this.start2move(f,a);this.springbacktimes=0;this.refindpathtimes+=
1};_prototype.stopmove=function(){if(!(0<disAfterTargetMoved)){AutoHookmodule.randPos=null;moveing=!1;this.move_index=0;this.move_list=[];Fightmodule.path_list=[];Laya.stage.getChildByName("moveing")&&Animationmodule.removeAniname("moveing");for(var f=Mapmodule.root._childs.length-1;0<=f;f--){var a=Mapmodule.root._childs[f];a&&"xunlu"==a.name&&(Laya.Pool.recover("minimap_point",a),a.removeSelf())}}};_prototype.findpath=function(f,a){f=AStart.findpath(f,a);f.splice(0,1);f.splice(f.length-1,1);return f};
_prototype.find2path=function(f,a){var b=[];if(f=AStart.findpath(f,a))for(f.splice(0,1),a=0;a<f.length;a++)b.push(new Laya.Point(f[a][0],f[a][1]));return b};_prototype.find4path=function(f,a){f=AStart.find2path(f,a);var b=[];if(f){for(;f.x;)b.unshift(new Laya.Point(f.x,f.y)),f=f.father;b.splice(0,1);b.push(new Laya.Point(a.x,a.y))}return b};_prototype.find3path=function(f,a){f=AStart.find2path(f,a);a=[];if(f){for(;f.x;)a.unshift(new Laya.Point(f.x,f.y)),f=f.father;a.splice(0,1)}return a};_prototype.find5path=
function(f,a){var b=GameUtil.getorientation(f,a),d=ObjectManage.hasobstacle(f,b,2),n=Mapmodule.CanMove(f,b,2);a=Math.floor(f.distance(a.x,a.y))-1;a=!(Objectcontrol.is_open_cs&&2>a);if(d&&n&&a)return f=GameUtil.getMovePoint(f,b,2),{pos:f,dir:b,state:2};d=ObjectManage.hasobstacle(f,b,1);n=Mapmodule.CanMove(f,b,1);return d&&n?(f=GameUtil.getMovePoint(f,b,1),{pos:f,dir:b,state:1}):null};_prototype.haveObj=function(f){for(var a=0;a<ObjectManage.object_list.length;++a){var b=ObjectManage.object_list[a];
if(!b.is_die&&b.grid.x==f.x&&b.grid.y==f.y)for(b=0;8>b;b++){var d=GameUtil.GetNextPoint(f.x,f.y,b);if(AStart.cur_matx&&AStart.cur_matx[0]&&d.y<AStart.cur_matx.length&&d.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[d.y][d.x]){this.end_point=f=d;break}}}return f};_prototype.autoMove=function(f){if(AStart.cur_matx&&f.x<AStart.cur_matx[0].length&&f.y<AStart.cur_matx.length&&0==AStart.cur_matx[f.y][f.x]){Fightmodule.leavefight();this.stopmove();autohookstate&&Laya.stage.event("onhook",["0"]);this.end_point=
f;var a=ObjectManage.findobject(playerID);a&&(20<a.grid.distance(f.x,f.y)?this.start2move(a.grid,f):this.startmove(a.grid,f),f=Laya.stage.getChildByName("moveing"),Laya.stage.event("startCalPosTrue"),null==f&&(f=new Laya.Point(browser_width/2,browser_height/2+115),f=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/moveing/",1,12,100,!0,!1,f),f.name="moveing",f.zOrder=0))}};return e}(),OffsetModule=function(){function e(){this.init()}_prototype=e.prototype;_prototype.init=function(){this.dv_=
[];this.pieceCount_=[]};_prototype.getoffsets=function(f,a,b){var d=[];if(-1!=f.indexOf("data/"))for(;a<=b;a++){var n=("000000"+a).slice(-6),c=GameUtil.getImageSetNameByPath(f+n);null!=c&&""!=c&&d.push(this.getoffsetfromatlas(c,n))}return d};_prototype.getoffset=function(f,a){if(f){var b=new Laya.Point(0,0);-1!=f.indexOf("data/")&&(a=("000000"+a).slice(-6),f=GameUtil.getImageSetNameByPath(f+a),null==f||""==f)&&(b=this.getoffsetfromatlas(f,a));return b}};_prototype.getoffsetfromatlas=function(f,a){var b=
new Laya.Point;(f=Laya.loader.getRes(f))&&f.frames&&(a=f.frames[a+".png"])&&a.frame&&(b.x=a.frame.offsetx,b.y=a.frame.offsety);return b};_prototype.parseFile=function(){var f=Laya.loader.getRes("data/json/offsetlist.bin");Laya.loader.clearRes("data/json/offsetlist.bin");for(var a=new Uint8Array(f),b=0,d=a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24,n=0;n<d;n++){var c=a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24,h=a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24,m=GameUtil.slice(a,c+1,c+1+a[c]);m=gbkByteArr2UcsStr(m);c+=
64;m=m.replace(".bin","");c=f.slice(c,c+h-64);c=new Int16Array(c);this.dv_[m]=c;this.pieceCount_[m]=c.length/2-1}};return e}(),SkillModule=function(){function e(){this.init()}_prototype=e.prototype;_prototype.init=function(){this.fly_list=[];this.target=[];this.skillClass=[];this.getskillClass()};_prototype.getskillClass=function(){var f=Laya.Loader.getRes("json/skillClass.txt");if(f&&""!=f){f=f.split("\r\n");for(var a=0;a<f.length;a++)f[a]&&""!=f[a]&&0!=f[a].indexOf(";")&&-1!=f[a].indexOf("/")&&
this.skillClass.push(f[a].split("/"))}};_prototype.getskillid=function(f,a){for(var b=0;b<this.skillClass.length;b++){var d=this.skillClass[b];if(f==d[1]){d[2]&&-1!=d[2].indexOf("-")&&(d[2].substring(0,d[2].indexOf("-")),d[2].substring(d[2].indexOf("-")+1));if(d[3]&&-1!=d[3].indexOf("-"))var n=d[3].substring(0,d[3].indexOf("-")),c=d[3].substring(d[3].indexOf("-")+1);if(d[4]&&-1!=d[4].indexOf("-"))var h=d[4].substring(0,d[4].indexOf("-")),m=d[4].substring(d[4].indexOf("-")+1);if(d[5]&&-1!=d[5].indexOf("-"))var g=
d[5].substring(0,d[5].indexOf("-")),l=d[5].substring(d[5].indexOf("-")+1);if(n&&c&&a>=n&&a<=c)return f+2E3;if(h&&m&&a>=h&&a<=m)return f+3E3;if(g&&l&&a>=g&&a<=l)return f+4E3;break}}return f};_prototype.setParent=function(f){this.root=f};_prototype.getSkillParent=function(){return this.root};_prototype.onanalyzeJson=function(f){this.skill_data=Laya.Loader.getRes(f)};_prototype.parseDiySkillFile=function(){this.customSkill=[];var f=Laya.loader.getRes("json/DiySkill.tdm");Laya.loader.clearRes("json/DiySkill.tdm");
var a=new Uint8Array(f);f={buff:a,pos:0};var b=a[f.pos++]|a[f.pos++]<<8|a[f.pos++]<<16|a[f.pos++]<<24;if(0==(a.length-4)%903)for(a=0;a<b;a++)for(var d=TClientDiySkillFileData(f),n=0;5>n;n++){var c={isCustomSkill:!0};c.id=d.wMagicId;c.name="Unknown";c.type=d.Data.btType;c.levelIndex=n;c.boCanLockTarget=d.Data.boCanLockTarget;c.boFiyFried=d.Data.boFiyFried;c.boNewEffect=d.Data.boNewEffect;c.btWarriorSkillType=d.Data.btWarriorSkillType;c.multilevel=[];var h=d.Data.Bases[n];c.iconFileIndex=h.btIconFileIndex-
1;c.usesActionType=h.btUsesActionType;c.sSoundFileNameAttackMan=h.sSoundFileNameAttackMan;c.sSoundFileNameAttackMon=h.sSoundFileNameAttackMon;c.sSoundFileNameExp=h.sSoundFileNameExp;c.sSoundFileNameFly=h.sSoundFileNameFly;c.sSoundFileNameUses=h.sSoundFileNameUses;c.wIconImageIndex=h.wIconImageIndex;c.WSoundID=h.wSoundID;h=d.Data.Effect[n].Action.Base;c.self_start=h.dwStartIndex;c.self_frame_count=h.btCount;c.self_dir=h.btDirType;c.self_empty=h.btSkip;c.self_blend_mode=h.btBlendMode;c.self_file_index=
h.btFileIndex;c.self_frame_time=h.wFrameTime;h=d.Data.Effect[n].Action.Add;c.self_start_add=h.dwStartIndex;c.self_frame_add=h.btCount;c.self_dir_add=h.btDirType;c.self_empty_add=h.btSkip;c.self_blend_mode_add=h.btBlendMode;c.self_file_index_add=h.btFileIndex;c.self_frame_time_add=h.wFrameTime;h=d.Data.Effect[n].Fly.Base;c.fly_start=h.dwStartIndex;c.fly_frame_count=h.btCount;c.fly_dir=h.btDirType;c.fly_empty=h.btSkip;c.fly_blend_mode=h.btBlendMode;c.fly_file_index=h.btFileIndex;c.fly_frame_time=h.wFrameTime;
h=d.Data.Effect[n].Fly.Add;c.fly_start_add=h.dwStartIndex;c.fly_frame_count_add=h.btCount;c.fly_dir_add=h.btDirType;c.fly_empty_add=h.btSkip;c.fly_blend_mode_add=h.btBlendMode;c.fly_file_index_add=h.btFileIndex;c.fly_frame_time_add=h.wFrameTime;h=d.Data.Effect[n].Exp.Base;c.exp_start=h.dwStartIndex;c.exp_frame_count=h.btCount;c.exp_dir=h.btDirType;c.exp_empty=h.btSkip;c.exp_blend_mode=h.btBlendMode;c.exp_file_index=h.btFileIndex;c.exp_frame_time=h.wFrameTime;h=d.Data.Effect[n].Exp.Add;c.exp_start_add=
h.dwStartIndex;c.exp_frame_count_add=h.btCount;c.exp_dir_add=h.btDirType;c.exp_empty_add=h.btSkip;c.exp_blend_mode_add=h.btBlendMode;c.exp_file_index_add=h.btFileIndex;c.exp_frame_time_add=h.wFrameTime;this.customSkill.push(c)}};_prototype.findCustomSkill=function(f,a){if(null==this.customSkill)return null;for(var b=this.customSkill.length,d=0;d<b;d++){var n=this.customSkill[d];if(n.id==f&&(0==n.levelIndex&&0<=a&&3>=a||1==n.levelIndex&&4<=a&&7>=a||2==n.levelIndex&&8<=a&&11>=a||3==n.levelIndex&&12<=
a&&15>=a))return n.isCustomSkill=!0,n}return null};_prototype.getskilldata=function(f,a){if(null!=this.skill_data)for(var b=0;b<this.skill_data.length;b++)if(a||0==a){if(this.skill_data[b].type==f&&this.skill_data[b].id==a)return this.skill_data[b]}else if(this.skill_data[b].type==f)return this.skill_data[b]};_prototype.playCustomSkillForTarget=function(f,a,b,d){if(null!=a){d=GameUtil.getorientation(a.grid,b);a.grid.x==b.x&&a.grid.y==b.y&&(d=a.cur_dir);attack_lock_state&&-1!=rocker_move_dir&&(d=rocker_move_dir);
if(0!=f.usesActionType){b=11;switch(f.usesActionType){case 1:b=11;break;case 2:b=7;break;case 3:b=11}14!=a.cur_state&&a.changestate(null,b,d,!1,"play_over_test")}f.sSoundFileNameUses&&""!=f.sSoundFileNameUses&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(f.sSoundFileNameUses));if(0!=f.self_file_index&&(b=g_pak_list[f.self_file_index-1])){var n=f.self_start;f.self_dir&&(n+=d*(f.self_frame_count+f.self_empty));var c=n+f.self_frame_count;Animationmodule.playframe(!0,a,"data/"+b+"/",n,c,100,!1,
!0)}0!=f.self_file_index_add&&(b=g_pak_list[f.self_file_index_add])&&(n=f.self_start_add,f.self_dir&&(n+=d*(f.self_frame_count_add+f.self_empty_add)),c=n+f.self_frame_count_add,Animationmodule.playframe(!0,a,"data/"+b+"/",n,c,100,!1,!0))}};_prototype.applyCustomSkillForOther=function(f){var a=ObjectManage.findobject(f.record);if(null!=a){var b=f.magicid,d=f.newlv,n=this.findCustomSkill(b,d);n&&(f=new Laya.Point(f.param,f.tag),a.currMagicId=b,this.playCustomSkillForTarget(n,a,f,d))}};_prototype.playCustomSkillMagicfire=
function(f,a,b){var d=this.findCustomSkill(a,b.lv);if(d){var n=0!=b.targetid;a=new Laya.Point(b.tx,b.ty);b=GameUtil.getorientation(f.grid,a);f.grid.x==a.x&&f.grid.y==a.y&&(b=f.cur_dir);var c=GameUtil.getAngle(f.grid,a);c=GameUtil.getorientation16(c);var h=d.fly_file_index,m=0,g=0,l=null;0!=h&&(l=g_pak_list[h-1])&&(m=d.fly_start,2==d.fly_dir?m+=b*(d.fly_frame_count+d.fly_empty):1==d.fly_dir&&(m+=c*(d.fly_frame_count+d.fly_empty)),g=m+d.fly_frame_count-1);h=d.exp_file_index;var p=0,q=0,r=null;0!=h&&
(r=g_pak_list[h-1])&&(p=d.exp_start,2==d.exp_dir?p+=b*(d.exp_frame_count+d.exp_empty):1==d.exp_dir&&(p+=c*(d.exp_frame_count+d.exp_empty)),q=p+d.exp_frame_count-1);h=d.exp_file_index_add;var u=0,v=0,w=null;0!=h&&(w=g_pak_list[h-1])&&(u=d.exp_start_add,2==d.exp_dir_add?u+=b*(d.exp_frame_count_add+d.exp_empty_add):1==d.exp_dir_add&&(u+=c*(d.exp_frame_count_add+d.exp_empty_add)),v=u+d.exp_frame_count_add-1);h=new Laya.Point(48*a.x,32*a.y);var z=d.type;switch(z){case 0:d.sSoundFileNameFly&&""!=d.sSoundFileNameFly&&
Laya.SoundManager.playSound(GameUtil.FindSoundByID(d.sSoundFileNameFly));n||(GameUtil.getorientation(f.grid,a),h=new Laya.Point(48*a.x,32*a.y));b=Animationmodule.playframe(!0,this.root,"data/"+l+"/",m,g,100,!1,!0);b.pos(48*f.grid.x,32*f.grid.y);a=60*a.distance(f.grid.x,f.grid.y);Laya.Tween.to(b,{x:h.x,y:h.y},a,null,Laya.Handler.create(this,function(A,C,B,D,E){Animationmodule.removeAni(A);if(n||d.boFiyFried)d.sSoundFileNameExp&&""!=d.sSoundFileNameExp&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(d.sSoundFileNameExp)),
r&&(A=Animationmodule.playframe(!0,this.root,"data/"+r+"/",p,q,100,!1,!0),A.pos(D.x,D.y)),w&&(A=Animationmodule.playframe(!0,this.root,"data/"+w+"/",u,v,100,!1,!0),A.pos(D.x,D.y))},[b,z,f,h,n]));break;case 1:case 2:h=d.exp_file_index,q=p=0,r=null,0!=h&&(r=g_pak_list[h-1])&&(p=d.exp_start,1==d.exp_dir?p+=b*(d.exp_frame_count+d.exp_empty):2==d.exp_dir&&(p+=c*(d.exp_frame_count+d.exp_empty)),q=p+d.exp_frame_count-1),d.sSoundFileNameExp&&""!=d.sSoundFileNameExp&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(d.sSoundFileNameExp)),
r&&(b=Animationmodule.playframe(!0,f,"data/"+r+"/",p,q,100,!1,!0)),w&&(b=Animationmodule.playframe(!0,f,"data/"+w+"/",u,v,100,!1,!0))}}};_prototype.playself=function(f,a,b,d,n,c){if(null!=b){var h=11;5==f||13==f||23==f||24==f||0==f||43==f||53==f||38==f?h=7:8!=f&&(c=parseInt(c/2));99<f&&2E3>f&&(h=3);if(119==f||121==f||110==f||120==f)h=11;if(b.data.record!=playerID&&4==f)var m=0==c%2;f&&c&&(f=this.getskillid(f,c));var g=this.getskilldata(f,a);if(25!=f)if(n=GameUtil.getorientation(b.grid,d),b.grid.x==
d.x&&b.grid.y==d.y&&(n=b.cur_dir),attack_lock_state&&-1!=rocker_move_dir&&(n=rocker_move_dir),14==b.cur_state||0==f&&75==a||b.changestate(null,h,n,!1,"play_over_test"),null==g||0==g.self_frame)10==f&&13==a&&3<c&&Animationmodule.playframe(!0,b,"data/magic8-16/",580,589,100,!1,!0),g&&b&&b.skin_feature&&(13==g.id&&-1<g.name.indexOf("\u7075\u9b42\u706b\u7b26")&&b.skin_feature.btGender?GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(g.id,!b.skin_feature.btGender)):GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(g.id,
b.skin_feature.btGender)));else{h=0;16==g.self_dir?(d=GameUtil.getAngle(b.grid,d),h=GameUtil.getorientation16(d)*(g.self_frame+g.self_empty)):8==g.self_dir&&(h=n*(g.self_frame+g.self_empty));var l=g.self_start+h,p=l+g.self_frame-1;if(b&&b.skin_feature&&29==f&&31==a&&3<b.skin_feature.btMagBubbleLevel)Animationmodule.playframe(!0,b,"data/magic6/",690,699,100,!1,!0);else if(20==f&&22==a&&3<c)Animationmodule.playframe(!0,b,"data/magic7-16/",80,87,100,!1,!0);else if(9==f&&11==a&&3<c)Animationmodule.playframe(!0,
b,"data/magic7-16/",200,203,b.ftime,!1,!0);else if(31==f&&33==a&&3<c)l=80,p=89,Animationmodule.playframe(!0,b,"data/magic8-16/",l,p,b.ftime,!1,!0);else if(4!=f&&2004!=f&&3004!=f&&4004!=f||6!=a){var q=ObjectManage.analyspeed(b.cur_state,b.type,b.ftime,b);q=Math.max(1,b.ftime-q);43==f&&95==a?Animationmodule.playframe(!0,b,g.fl_name,l,p,q,!1,!0,null,this,function(){Animationmodule.playframe(!0,b,g.fl_name,l+85,p+85,q,!1,!0)}):Animationmodule.playframe(!0,b,g.fl_name,l,p,q,!1,!0)}else{f="green";if(b.data.record==
playerID)for(m=0;m<g_UserItemList.length;m++){if(g_UserItemList[m])if(-1!=g_UserItemList[m].s.Name.indexOf("\u7070\u8272\u836f\u7c89")){f="green";break}else if(-1!=g_UserItemList[m].s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")){f="red";break}}else void 0!=m&&(m?f="green":f="red");"green"==f?Animationmodule.playframe(!0,b,g.fl_name,l,p,b.ftime,!1,!0):"red"==f&&c&&(3>=c?Animationmodule.playframe(!0,b,"data/magic/",600,609,b.ftime,!1,!0):4<=c&&7>=c?Animationmodule.playframe(!0,b,"data/magic7-16/",710,
719,b.ftime,!1,!0):8<=c&&11>=c?Animationmodule.playframe(!0,b,"data/magic7-16/",730,730,b.ftime,!1,!0):12<=c&&15>=c&&Animationmodule.playframe(!0,b,"data/magic7-16/",750,759,b.ftime,!1,!0));autohookstate&&g_autohookpoison++;console.log("shidushu")}b.skin_feature&&(c=b.skin_feature.btGender?0==b.skin_feature.btGender?1:0:b.skin_feature.btGender,-1<g.name.indexOf("\u653b\u6740\u5251\u672f")&&(c=b.skin_feature.btGender),GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(g.id,c)))}}};_prototype.playEQsecurestruck=
function(f){var a=f.getChildByName("eqsecure"+f.data.record);a&&(58==a.type?(a=this.getskilldata(29,58),Animationmodule.playframe(!0,f,a.fl_name,723,725,80,!1,!0)):(a=this.getskilldata(29),Animationmodule.playframe(!0,f,a.fl_name,3900,3902,80,!1,!0)))};_prototype.playfly=function(f,a,b,d,n,c,h){f&&c&&(f=this.getskillid(f,c));var m=this.getskilldata(f);if(null!=m){var g=GameUtil.getAngle(b.grid,d);g=GameUtil.getorientation16(g);var l=m.fly_start+g*(m.fly_frame+m.fly_empty),p=l+m.fly_frame-1;g=new Laya.Point(b.grid.x,
b.grid.y);if(999==f&&999==a||1E3==f&&1E3==a||1001==f&&1001==a)g.y-=2,d.y-=2;if(l=Animationmodule.playframe(!0,this.root,m.fl_name,l,p,b.ftime,!0,!1))l.pos(48*g.x,32*g.y),g=60*d.distance(g.x,g.y),Laya.Tween.to(l,{x:48*d.x,y:32*d.y},g,null,Laya.Handler.create(this,function(q,r,u,v,w,z,A){Animationmodule.removeAni(q);(r||h)&&this.playhit(u,v,w,z,r,c)},[l,n,f,a,b,d,h]));f=0;b&&b.skin_feature&&(f=b.skin_feature.btGender?b.skin_feature.btGender:0==b.skin_feature.btGender?1:0);GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(m.id,
f))}};_prototype.playhit=function(f,a,b,d,n,c,h){if(29!=f&&(f&&c&&(f=this.getskillid(f,c)),h=this.getskilldata(f,h),null!=h&&!(0>=h.gethit_frame))){var m=h.gethit_start,g=m+h.gethit_frame-1;if(n=ObjectManage.findobject(n))d=n.grid;if(99==f){m=GameUtil.getorientation(b.grid,d)*(h.gethit_start+h.fly_empty);m=h.gethit_start+m;g=m+h.gethit_frame-1;var l=Animationmodule.playframe(!0,this.root,h.fl_name,m,g,80,!1,!0,null,null);l&&l.pos(48*d.x,32*d.y)}18==f||30==f?Animationmodule.playframe(!0,n,h.fl_name,
m,g,80,!1,!0):119==f?(Animationmodule.playframe(!0,b,h.fl_name,m,g,80,!1,!0,null,null),Laya.stage.event("delskillani")):1016==f&&1016==a&&c?(3<c&&8>c?(m=90,g=106):7<c&&12>c?(m=110,g=127):11<c&&(m=130,g=147),(l=Animationmodule.playframe(!0,this.root,"data/magic8-16/",m,g,80,!1,!0,null,null))&&l.pos(48*d.x,32*d.y)):121==f?(f=Animationmodule.playframe(!0,this.root,h.fl_name,m,g,80,!1,!0,null,null),a=Animationmodule.playframe(!0,this.root,h.fl_name,m,g,80,!1,!0,null,null),c=Animationmodule.playframe(!0,
this.root,h.fl_name,m,g,80,!1,!0,null,null),n=Animationmodule.playframe(!0,this.root,h.fl_name,m,g,80,!1,!0,null,null),m=Animationmodule.playframe(!0,this.root,h.fl_name,m,g,80,!1,!0,null,null),f&&a&&c&&n&&m&&(f.pos(48*d.x,32*d.y),a.pos(48*d.x-65,32*d.y-65),c.pos(48*d.x+65,32*d.y-65),n.pos(48*d.x-65,32*d.y+65),m.pos(48*d.x+65,32*d.y+65))):(f=this.root,n&&(f=n),(l=b?Animationmodule.playframe(!0,f,h.fl_name,m,g,80,!1,!0,null,this,function(){b.is_call=!0}):Animationmodule.playframe(!0,f,h.fl_name,m,
g,80,!1,!0,null,null))&&!n&&l.pos(48*d.x,32*d.y));GameUtil.PlayMusicFormat(GameUtil.SkillExplosionSound(h.id))}};_prototype.playhellfire=function(f,a,b,d,n){5<this.fire_index?Laya.timer.clear(this,this.playhellfire):(d=GameUtil.getMovePoint(d.grid,n,this.fire_index++),(f=Animationmodule.playframe(!0,this.root,f,a,b,80,!1,!0))&&f.pos(48*d.x,32*d.y))};_prototype.hellfire=function(f,a,b,d,n){this.fire_index=0;f&&n&&(f=this.getskillid(f,n));f=this.getskilldata(f);a=f.fly_start;n=a+f.fly_frame-1;d=GameUtil.getAngle(b.grid,
d);d=GameUtil.get8orientation(d);Laya.timer.loop(100,this,this.playhellfire,[f.fl_name,a,n,b,d])};_prototype.closeEQsecure=function(f){var a=ObjectManage.findobject(f);if(a){var b=a.getChildByName("eqsecure"+f);a=a.getChildByName("eqsecure2"+f);b&&Animationmodule.removeAniname("eqsecure"+f);a&&Animationmodule.removeAniname("eqsecure2"+f)}};_prototype.EQsecure=function(f,a,b){this.fire_index=0;f=this.getskilldata(f,b);var d=f.fly_start,n=d+f.fly_frame-1,c=a.getChildByName("eqsecure"+a.data.record);
a.getChildByName("eqsecure2"+a.data.record);if(null==c){if(a&&a.skin_feature&&3<a.skin_feature.btMagBubbleLevel){f=Animationmodule.playframe(!0,a,f.fl_name,d,n,80,!0,!1);var h=Animationmodule.playframe(!0,a,"data/magic6/",720,722,80,!0,!1)}else f=Animationmodule.playframe(!0,a,f.fl_name,d,n,80,!0,!1);58==b&&(f.type=58);f&&(f.name="eqsecure"+a.data.record);h&&(h.name="eqsecure2"+a.data.record)}};_prototype.firewall=function(f,a,b,d){a=this.getskilldata(a);var n=a.gethit_start,c=n+a.gethit_frame-1,
h=this.root.getChildByName(""+f);!h&&(h=115==b?Animationmodule.playframe(!0,this.root,"data/magic7-16/",90,97,80,!0,!1):116==b?Animationmodule.playframe(!0,this.root,"data/magic7-16/",100,107,80,!0,!1):117==b?Animationmodule.playframe(!0,this.root,"data/magic7-16/",110,117,80,!0,!1):Animationmodule.playframe(!0,this.root,a.fl_name,n,c,80,!0,!1))&&(h.name=""+f,h.pos(48*d.x,32*d.y),h.zOrder=1)};_prototype.play2skill=function(f,a,b,d,n,c,h,m,g){n=new Laya.Point(d,n);d=ObjectManage.findobject(f);if(null!=
d)switch(0!=c||1!=b&&8!=b||(n=GameUtil.getorientation(d.grid,n),n=GameUtil.getMovePoint(d.grid,n,10)),b){case 1:this.playfly(a,b,d,n,c,h);break;case 2:4==a&&3<h&&0==m?this.playhit(1015,1015,d,n,c,h):31==a&&3<h?this.playhit(1016,1016,d,n,c,h):this.playhit(a,b,d,n,c,h,g);break;case 3:break;case 4:6==a&&f==playerID&&(f=Objectcontrol.getskillpos(6,null,8),this.playself(6,8,Objectcontrol.self_obj,f,null,h));this.playhit(a,b,d,n,c,h);break;case 5:this.hellfire(a,b,d,n,c,h);break;case 6:break;case 7:3<h?
this.playhit(a,b,d,n,c):this.playhit(a,b,d,n,c,h);break;case 8:3<h&&(4<=h&&7>=h?this.playfly(20101,20101,d,n,c,h):8<=h&&11>=h?this.playfly(30101,30101,d,n,c,h):12<=h&&15>=h&&this.playfly(40101,40101,d,n,c,h));this.playfly(a,b,d,n,c,h);break;case 9:this.playfly(a,b,d,n,c,h,!0);break;case 10:break;case 14:this.playhit(a,b,d,n,c);break;default:this.playfly(a,b,d,n,c,h)}};_prototype.hideskill=function(f){null!=this.root&&(f=this.root.getChildByName(""+f))&&(f.removeSelf(),ObjectManage.del2object(f))};
_prototype.checklegal=function(f,a){for(var b=0;b<g_UserMagicList.length;++b){var d=g_UserMagicList[b];if(d.Def.btEffect==f&&d.Def.wMagicId==a)return 0==d.Def.w02||13==f||23==f?d.Def.dwDelayTime:1E3*d.Def.w02}return 0};_prototype.handlepoison=function(){if(GlobalCfglist.d_autoskill_1)switch(GlobalCfglist.d_autoskill_1){case "\u4e92\u6362":return"0";case "\u7eff\u6bd2":return"1";case "\u7ea2\u6bd2":return"2"}};_prototype.sendMsg=function(f,a,b,d,n,c){if(b=1E3<=d&&1500>=d?Skillmodule.findCustomSkill(d,
n):this.getskilldata(f,d)){6==b.mode&&(Objectcontrol.move_call_result=!1);n=6==b.id?n=this.handlepoison():n=null;if(GlobalCfglist.d_autoskill_4&&"\u6cbb\u6108\u672f"==b.name){if(f=ObjectManage.findobject(playerID))a=f.grid,Sendmessage.sendSpellMessage(CM_SPELL,a.x,a.y,b.id,null,n)}else{var h=!1;if(17==f&&19==b.id||40==b.type&&57==b.id||40==b.type&&500==b.id)for(var m=0;m<ObjectManage.object_list.length;++m){var g=ObjectManage.object_list[m];g.grid.x==a.x&&g.grid.y==a.y&&(Sendmessage.sendSpellMessage(CM_SPELL,
a.x,a.y,b.id,g.data.record,n),h=!0)}h||Sendmessage.sendSpellMessage(CM_SPELL,a.x,a.y,b.id,lockingID,n);29!=f&&28!=f&&16!=f&&17!=f&&11!=f&&12!=f&&15!=f&&(g_magicId=f,g_magicType=d)}for(m=0;m<g_SetupMagicList.length;m++)if(g_SetupMagicList[m]&&(g_SetupMagicList[m].Def.sMagicName==b.name||1E3<=d&&1500>=d&&b.id==g_SetupMagicList[m].Def.wMagicId)){c?doubleFirePosIndex=m:Laya.stage.event("skillcd_ani",m);break}}};_prototype.openMsg=function(f,a,b){switch(f){case 0:Sendmessage.sendSpellMessage(CM_HIT,a.x,
a.y,b,lockingID);break;case 5:Sendmessage.sendSpellMessage(CM_POWERHIT,a.x,a.y,b,lockingID);break;case 13:Sendmessage.sendSpellMessage(CM_LONGHIT,a.x,a.y,b,lockingID);break;case 23:Sendmessage.sendSpellMessage(CM_WIDEHIT,a.x,a.y,b,lockingID);break;case 24:Sendmessage.sendSpellMessage(CM_FIREHIT,a.x,a.y,b,lockingID);break;case 38:Sendmessage.sendSpellMessage(CM_TWNHIT,a.x,a.y,b,lockingID);break;case 43:Sendmessage.sendSpellMessage(CM_66HIT,a.x,a.y,b,lockingID);break;case 53:Sendmessage.sendSpellMessage(CM_SWORDHIT,
a.x,a.y,b,lockingID)}};return e}(),TNewItem=function(){function e(){this.InBagList=[]}var f=null;e.prototype.AddBagItem=function(a){this.InBagList.push(a);console.log(">>>",this.InBagList.length)};return{getInstance:function(){null==f&&(f=new e);return f}}}();
(function(){function e(a,b,d,n,c,h,m){e.__super.call(this);this.Init(a,b,d,n,c,h,m)}Laya.class(e,"CBlood",Laya.Component);var f=e.prototype;f.Init=function(a,b,d,n,c,h,m){var g=GameUtil.InstanceOfMem(GameSceneUI).maplayer;this.people=h;this.maxBlood=a;this.curBlood=b;this.maxMp=c;this.curMp=n;this.isMainRole=d;this.width=28;this.height=10;m&&(this.job=m.getJob(),this.roleLevel=m.getLevel());this.bgSpr=new Laya.Sprite;a=Laya.loader.getRes("gameres/ui/000000.png");this.bgSpr.graphics.drawTexture(a,
0,0);this.bgSpr.anchorX=0;this.bgSpr.anchorY=.5;GameUtil.addChildToGameSceneMapLayer(this.bgSpr,g,999995);this.bloodSpr=new Laya.Sprite;a=Laya.loader.getRes("gameres/ui/000001.png");this.bloodSpr.graphics.drawTexture(a,0,0);this.bloodSpr.anchorX=0;this.bloodSpr.anchorY=.5;GameUtil.addChildToGameSceneMapLayer(this.bloodSpr,g,999996);this.bloodSpr.scaleX=(this.curBlood/this.maxBlood).toFixed(2);this.mpSpr=new Laya.Sprite;a=Laya.loader.getRes("gameres/ui/000004.png");this.mpSpr.graphics.drawTexture(a,
0,0);this.mpSpr.anchorX=0;this.mpSpr.anchorY=.5;GameUtil.addChildToGameSceneMapLayer(this.mpSpr,g,999997);this.mpSpr.scaleX=(this.curMp/this.maxMp).toFixed(2);this.mpSpr.visible=!1;this.showBlueBar(m);this.textBlood=new Laya.Text;this.textBlood.color="#FFFFFF";this.textBlood.stroke=g_strokewidth?g_strokewidth:0;this.textBlood.fontSize=14;this.textBlood.text="";GameUtil.addChildToGameSceneMapLayer(this.textBlood,g,999998)};f.updateBloodPos=function(){this.bgSpr&&(this.bgSpr.x=this.x,this.bgSpr.y=this.y);
this.bloodSpr&&(this.bloodSpr.x=this.x,this.bloodSpr.y=this.y);this.mpSpr&&(this.mpSpr.x=this.x,this.mpSpr.y=this.y);this.textBlood&&(this.textBlood.x=this.x+this.getTextBloodOffsetValueX(),this.textBlood.y=this.y+this.getTextBloodOffsetValueY())};f.getTextBloodOffsetValueX=function(){return(32-this.textBlood.width)/2};f.getTextBloodOffsetValueY=function(){return-18};f.showBlueBar=function(a){this.mpSpr&&(this.mpSpr.visible=GlobalCfglist.showBlue?a.boMagicShield:!1)};f.SetCurBloodNum=function(a,b,
d,n,c){a&&(this.curBlood=a);if(this.textBlood){this.textBlood.text=this.people&&"1"==Mapdata.cur_type?Math.ceil(this.curBlood/this.maxBlood*100)+"/100":GameUtil.makeBigNum(this.curBlood)+"/"+GameUtil.makeBigNum(this.maxBlood);this.dangerHpEffectHandle(c,a,n);if(void 0!=this.bloodSpr||null!=this.bloodSpr)this.bloodSpr.scaleX=(this.curBlood/this.maxBlood).toFixed(2);b&&d&&this.mpSpr&&(this.mpSpr.scaleX=(b/d).toFixed(2))}};f.dangerHpEffectHandle=function(a,b,d){a&&(this.isDangerHp(b,d)?(this.dangerTopSp||
(a=GameUtil.InstanceOfMem(GameSceneUI).maplayer.parent.gameMain.root,this.dangerTopSp=a.topSp,this.dangerRightSp=a.rightSp,this.dangerBottomSp=a.bottomSp,this.dangerLeftSp=a.leftSp,this.dangerTopSp&&(this.dangerTopSp.visible=!1)),this.dangerTopSp&&!this.dangerTopSp.visible&&Laya.timer.frameLoop(4,this,this.dangerEffect,[10]),this.dangerTopSp&&(this.dangerTopSp.visible=!0),this.dangerRightSp&&(this.dangerRightSp.visible=!0),this.dangerBottomSp&&(this.dangerBottomSp.visible=!0),this.dangerLeftSp&&(this.dangerLeftSp.visible=
!0)):(this.dangerTopSp&&(this.dangerTopSp.visible&&Laya.timer.clear(this,this.dangerEffect),this.dangerTopSp.visible=!1),this.dangerRightSp&&(this.dangerRightSp.visible=!1),this.dangerBottomSp&&(this.dangerBottomSp.visible=!1),this.dangerLeftSp&&(this.dangerLeftSp.visible=!1)))};f.dangerEffect=function(a){if(void 0==this.effectIndex||null==this.effectIndex)this.effectIndex=0;this.effectIndex>=a&&(this.effectIndex=0);this.updateDangerSkin("gameres/animation/dangerHp/dangerHp_top"+this.effectIndex+
".png",this.dangerTopSp,"top");this.updateDangerSkin("gameres/animation/dangerHp/dangerHp_right"+this.effectIndex+".png",this.dangerRightSp,"right");this.updateDangerSkin("gameres/animation/dangerHp/dangerHp_bottom"+this.effectIndex+".png",this.dangerBottomSp,"bottom");this.updateDangerSkin("gameres/animation/dangerHp/dangerHp_left"+this.effectIndex+".png",this.dangerLeftSp,"left");this.effectIndex++};f.updateDangerSkin=function(a,b,d){b.graphics.clear();var n=0,c=0;if(a=Laya.loader.getRes(a)){switch(d){case "top":n=
Laya.stage.width;c=a.sourceHeight;var h="repeat-x";break;case "right":n=a.sourceWidth;c=Laya.stage.height;h="repeat-y";b.pos(Laya.stage.width-a.sourceWidth,0);break;case "bottom":n=Laya.stage.width;c=a.sourceHeight;h="repeat-x";b.pos(0,Laya.stage.height-a.sourceHeight);break;case "left":c=n=Laya.stage.height,h="repeat-y"}b.graphics.fillTexture(a,0,0,n,c,h)}};f.isDangerHp=function(a,b){return 10>a/b*100};f.addJobAndLevel=function(a,b,d){if(!(null==b&&void 0==b||null==d&&void 0==d)){switch(b){case 0:var n=
"Z";break;case 1:n="F";break;case 2:n="D"}return a?a+"/"+n+d:a+n+d}return a};f.SetMaxBloodNum=function(a){this.maxBlood=a};f.AliveBlood=function(){this.bloodSpr&&this.curBlood&&this.textBlood&&(this.curBlood=this.maxBlood,this.bloodSpr.scaleX=(this.curBlood/this.maxBlood).toFixed(2),this.textBlood.text=this.people&&"1"==Mapdata.cur_type?Math.ceil(this.curBlood/this.maxBlood*100)+"/100":GameUtil.makeBigNum(this.curBlood)+"/"+GameUtil.makeBigNum(this.maxBlood));this.mpSpr&&this.curMp&&(this.curMp=this.maxMp,
this.mpSpr.scaleX=(this.curMp/this.maxMp).toFixed(2))};f.removeBlood=function(){this.bgSpr&&(this.bgSpr.destroy(),this.bgSpr=null);this.bloodSpr&&(this.bloodSpr.destroy(),this.bloodSpr=null);this.mpSpr&&(this.mpSpr.destroy(),this.mpSpr=null);this.textBlood&&(this.textBlood.destroy(),this.textBlood=null)};f.setBloodVisible=function(a){this.bgSpr&&(this.bgSpr.visible=a);this.bloodSpr&&(this.bloodSpr.visible=a);this.textBlood&&(this.textBlood.visible=a)};f.setOffsetPos=function(a,b){this.x=a+8;this.y=
b-55}})();
var ChatBox=function(e){function f(){this.__super.call(this);this.init()}Laya.class(f,"ChatBox",e);f.prototype.init=function(){this.timeOut=null;this.displayTime=3E3;this.skin="gameres/png/chat_spr.png";this.sizeGrid="8,8,20,20";this.chat_txt=new Laya.Text;this.chat_txt.color="#ffffff";this.chat_txt.fontSize=16;this.chat_txt.x=10;this.chat_txt.y=10;this.chat_txt.wordWrap=!0;this.addChild(this.chat_txt);this.chat_name=new Laya.Text;this.chat_name.color=Get2RGB("251");this.chat_name.fontSize=16;this.chat_name.x=
10;this.chat_name.y=10;this.chat_name.wordWrap=!1;this.addChild(this.chat_name);this.chat_bg=new Laya.Image;this.chat_bg.skin="gameres/png/img_3jibg.png";this.chat_bg.alpha=.3;this.chat_bg.x=10;this.chat_bg.y=10;this.addChild(this.chat_bg)};f.prototype.showMsg=function(a){a=a.split(":");this.chat_name.text=a[0]+":";a[1]&&(this.chat_txt.text=-1!=a[1].indexOf("IMG")?"[\u56fe\u7247]":a[1]);this.chat_txt.pos(this.chat_name.x+this.chat_name.width,this.chat_name.y);this.chat_bg.width=this.chat_name.width;
this.chat_bg.height=this.chat_name.height;this.width=this.chat_txt.width+this.chat_name.width+20;this.height=this.chat_txt.height+30+.1*this.chat_txt.height;this.x=-this.chat_txt.width/2-10;this.y=-65;this.pivotY=this.height;this.zOrder=1E6;this.visible=!0;this.hideMsg()};f.prototype.hideMsg=function(a){this.timeOut&&clearTimeout(this.timeOut);this.timeOut=setTimeout(function(){this.chat_txt.text="";this.visible=!1;this.timeOut=null}.bind(this),this.displayTime)};return f}(Laya.Image),Name=function(e){function f(a,
b){this.__super.call(this);this.init(a,b);this.cur_name=""}Laya.class(f,"Name",e);f.prototype.init=function(a,b){this.y=-25;this.fontSize=14;this.stroke=g_strokewidth;this.align="center";this.color="#ffffff";this.wordWrap=!0;this.strokeColor="#000000";this.zOrder=999994;this.nameList=[];this.nameColor="";b&&-1===["maindoor","leftwall","centerwall","rightwall"].indexOf(b.split("/")[0].split("\\")[0].toLowerCase())&&(b=b.split("/")[0].split("\\"),b=b.filter(function(d){return""!==d}),3===a.type&&1<
b.length&&this.createTitle(a))};f.prototype.checkSlash=function(a){return(-1<a.indexOf("\\/")||-1<a.indexOf("//"))&&!/[\u4E00-\u9FA5]+/g.test(a)};f.prototype.update=function(a,b,d){if(!a||this.checkSlash(a))this.noNameClickAreaHandle(d);else if(this.cur_name=a,-1===["maindoor","leftwall","centerwall","rightwall"].indexOf(a.split("/")[0].split("\\")[0].toLowerCase())){var n=-1!=a.indexOf("(")?a.indexOf("(")+1:a.indexOf("("),c=a.indexOf(")");-1!=n&&-1!=c&&a.slice(n,c)==g_playerName&&1==d.type&&0==d.OwnerID&&
(d.OwnerID=playerID);0!=a.indexOf("#0")&&(n=a.split("#0"),a=n[0],n[1]&&-1!=n[1].indexOf("{")&&(n=JSON.parse(n[1])))&&(d.OwnerID=n.OwnerID);n=a.split("/")[1];this.nametites=a.split("\\\\");a=a.split("/")[0].split("\\");c=[];for(var h=0;h<a.length;h++)""!==a[h]&&"#0"!==a[h]&&c.push(a[h]);this.nameList=a=c;n=(n=n?Number(n):void 0)||b||"#ffffff";n="number"===typeof n?Get2RGB(n):n;switch(d.type){case 1:this.updateMon(a,n,d);break;case 2:this.updateNpc(a,n,d);break;case 3:this.updateRole(a,n,d)}}};f.prototype.noNameClickAreaHandle=
function(a){a&&(a.npcClickAreaData=[],a=a.npcClickAreaData,a[0]=-5,a[1]=-30,a[2]=60,a[3]=70)};f.prototype.createTitle=function(a){a.txt_Img=new Laya.Text;a.txt_Img.y=-25;a.txt_Img.align="center";a.txt_Img.zOrder=999993;a.txt_Img.fontSize=14;a.txt_Img.stroke=g_strokewidth;a.txt_Img.strokeColor="#000000";var b=GameUtil.InstanceOfMem(GameSceneUI).maplayer;b&&b.addChild(a.txt_Img)};f.prototype.updateRole=function(a,b,d){var n="",c=0;if(0<a.length)if(1==a.length)n+=a[0],c=a[0].length;else{for(var h=0;h<
a.length;h++)c<a[h].length&&(c=a[h].length),0!=h&&(n+=a[h]+"\n");n+=a[0]}if(a[0]&&-1!=a[0].indexOf("\\")){var m=a[0].split("\\");this.text=m[0];m.shift()}else this.text=n;this.color=b;this.y=-25;this.width=(c+1)*this.fontSize;this.height=a.length*this.fontSize;this.pivotX=-25+this.width/2;this.typeset();1<a.length&&(d.txt_Img||this.createTitle(d),a.shift(),d.txt_Img.width=0,d.txt_Img.text=m?m.concat(a).join("\n"):a.join("\n"),d.txt_Img.color=b,d.txt_Img.width+=2,d.txt_Img.pivotX=-25+d.txt_Img.width/
2);this.visible=GlobalCfglist.nameshow3;!0===GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName&&0==d.is_halo&&(a=n.split("\n"),this.text=a[a.length-1]);d.txt_Img&&(d.txt_Img.visible=!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName,d.txt_Img.visible&&(this.y+=d.txt_Img.height))};f.prototype.updateNpc=function(a,b,d){a.reverse();this.width=0;var n="";a[1]&&(n+=a[1]+"\n");a[0]&&(n+=a[0]+"\n");a[2]&&(n+=a[2]+"\n");this.text=n;this.width+=2;this.wordWrap=!1;this.pivotX=-25+this.width/2;this.color=
b;this.visible=GlobalCfglist.nameshow2;this.npcClickHandle(d)};f.prototype.npcClickHandle=function(a){a&&(this.drawNpcClickArea(a),this.setNpcClickAreaData(a))};f.prototype.drawNpcClickArea=function(a){(a=a.npcClickSp)&&a.graphics.drawRect(this.x-this.pivotX,this.y-30,this.width,this.height+40,null,16777215,1)};f.prototype.setNpcClickAreaData=function(a){if(a=a.npcClickAreaData)a[0]=0,a[1]=-30,a[2]=this.width,a[3]=this.height+40};f.prototype.updateMon=function(a,b,d){if(a[0])var n=0!=d.OwnerID;a.reverse();
this.width=0;this.text=a.join("\n");this.width=this.fontSize*(this.text.length+1);this.pivotX=-25+this.width/2;this.color=b;this.visible=n?GlobalCfglist.nameshow4:GlobalCfglist.nameshow1};f.prototype.setOffsetPos=function(a,b){this.x=a;this.y=b-25};return f}(Laya.Text),object=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"object",Laya.Sprite);e=f.prototype;e.addNpcClickAreaSprite=function(){this.npcClickSp=new Laya.Sprite;this.addChild(this.npcClickSp)};e.releaseAttr=function(){this.data&&
(this.data=null);this.chat_txt&&(this.chat_txt=null);this.res_config_list=this.buff_list=this.subsp_frames=this.shdeff_frames=this.wapeff_frames=this.wing_frames=this.hores_frames=this.shield_frames=this.weapon_frames=this.hair_frames=this.npcClickAreaData=this.skin_feature=this.bind_list=this.frame_sprits=this.cur_frames=this.m_Abil=null};e.init=function(){this.on(Laya.Event.REMOVED,this,this.onRemovedEvent);this.npcClickAreaData=[];this.m_Abil=[];this.type=0;this.data=null;this.cur_frames=[];this.cur_frame_index=
0;this.frame_sprits=[];this.click_sp=null;this.bind_list=[];this.is_loop=!1;this.call_str="";this.cur_state=0;this.skin_feature=this.cur_dis=null;this.nameString="";this.is_born=this.is_die=!1;this.born_count=0;this.obj_hores=null;this.is_halo=!1;this.grid=new Laya.Point;this.sp=new Laya.Sprite;this.dobule_sp=new Laya.Sprite;this.selfname=new Laya.Sprite;this.sp.zOrder=1;this.addChild(this.sp);this.dobule_sp.zOrder=1;this.addChild(this.dobule_sp);this.chat_txt=null;this.havePoison=0;this.use_hores=
this.digfragment=this.is_remove=this.reverseani=!1;this.moveshift=new Laya.Point(48,32);this.msg_list=[];this.play_time=0;this.target_pos=new Laya.Point;this.is_springback=this.is_backstep=!1;this.mouseThrough=!0;this.sp.mouseThrough=!0;this.next_name=null;this.boMagicShield=!1;this.hair_frames=[];this.weapon_frames=[];this.shield_frames=[];this.hores_frames=[];this.wing_frames=[];this.wapeff_frames=[];this.shdeff_frames=[];this.subsp_frames=[];this.sub_file=null;this.action_over=!0;this.ddl_state=
0;this.paralysis_state=!1;this.color_num=0;this.fl_name=null;this.off=new Laya.Point;this.buff_list=[];this.isNewBuff=!0;this.guildName="";this.is_use_offest=!0;this.BindGameGold=this.BindGold=0;this.cur_dir=null;this.use_dobule_sp=!1;this.sub_index=0;this.is_moveing=this.res_lock=!1;this.obj_wing=new Laya.Sprite;this.addChild(this.obj_wing);this.super_time=!1;this.res_config_list=[];this.realSpeed=this.skillsp=this.attsp=this.movesd=this.die_msg=this.play_count=this.trans_count=0;this.is_call=!0;
this.lastMoveTarget=null;this.invisable=!1;this.lastBtHair;this.OwnerID=this.lastState=0};e.initdata=function(a,b){this.msg_list=[];this.type=b;this.data=a;this.obj_frames=[];this.ftime=0;1==b||2==b||3==b?(this.grid.x=a.param,this.grid.y=a.tag,this.pos(48*a.param,32*a.tag),this.initobjname(a.str),ObjectManage.updateObjectHp(1,1,a.record)):(this.pos(0,0),this.zOrder=99998);"\u3000/255"==a.str?4==b:""!=a.str&&(a=Laya.loader.getRes("gameres/png/yingzi.png"))&&this.sp.graphics.drawTexture(a);this.type=
b;3==this.type&&(b=new Laya.Rectangle(-10,-60,70,90),this.sp.setBounds(b));2==this.type&&g_newTaskNpcIcon&&GameMission.SetNewTaskNpcIcon(this,g_newTaskNpcIcon);this.updateAlpha()};e.initobjname=function(a){this.txt_name=new Name(this,a);GameUtil.addChildToGameSceneMapLayer(this.txt_name);this.changename(a)};e.isMyRole=function(){return this.data&&this.data.record==playerID};e.isMonster=function(){return 1==this.type};e.changename=function(a,b){this.txt_name||(this.txt_name=new Name(this,a),GameUtil.addChildToGameSceneMapLayer(this.txt_name));
this.txt_name.update(a,b,this)};e.showChatTxt=function(a){this.chat_txt||(this.chat_txt=new ChatBox,this.addChild(this.chat_txt));this.chat_txt.showMsg(a)};e.addJobAndLevel=function(a){if(this.Blood){var b="",d=this.Blood.textBlood.text,n=d.lastIndexOf("/");-1<n&&(b=d.substring(0,n));this.Blood.textBlood.text=this.Blood.addJobAndLevel(b,this.getJob(),a)}};e.updateObjectBlood=function(a,b,d,n,c,h){null==this.Blood||void 0==this.Blood?(this.Blood=new CBlood(a,b,d,n,c,h,this),GameUtil.addChildToGameSceneMapLayer(this.Blood)):
(this.Blood.SetCurBloodNum(b,n,c,a,d),this.data.record==lockingID&&Laya.stage.event("updateTargetHp",[b,a,h]));this.Blood.textBlood.text=this.Blood.addJobAndLevel(this.Blood.textBlood.text,this.getJob(),this.getLevel());this.is_die?(this.setObjectNameVisible(!1),this.Blood&&(this.Blood.visible=!1,this.Blood.setBloodVisible(!1))):(this.Blood&&(this.Blood.visible=G_SHOW_ROLE_HP,this.Blood.setBloodVisible(G_SHOW_ROLE_HP&&GlobalCfglist.showhp)),this.type==E_OBJECTTYPE.MONSTER&&0==GlobalCfglist.nameshow1||
this.setObjectNameVisible(G_SHOW_ROLE_HP))};e.visibleObjectBlood=function(a){this.Blood&&(this.is_die?(this.Blood.visible=!1,this.setObjectNameVisible(!1),this.Blood.setBloodVisible(!1)):(this.Blood.visible=a,this.Blood.setBloodVisible(a)))};e.setObjectNameVisible=function(a){this.txt_Img&&(this.txt_Img.visible=a&&GlobalCfglist.nameshow3);this.txt_name&&(this.txt_name.visible=a&&GlobalCfglist.nameshow3)};e.changeskin=function(a,b,d,n,c){a&&0<a.length&&(a=a[this.cur_frame_index])&&(c&&!this.is91to100Npc()&&
(this.sp.graphics.clear(),this.dobule_sp.graphics.clear()),this.createframeobj(a,b,d,n))};e.is91to100Npc=function(){return 2==this.type&&this.skin_feature&&50==this.skin_feature.wRaceImg&&91<=this.skin_feature.wAppr&&100>=this.skin_feature.wAppr};e.updateselfskin=function(a){this.is_moveing&&a&&this.updateselfpos();5==this.cur_dir||6==this.cur_dir||7==this.cur_dir||0==this.cur_dir?(this.weapon_frames&&0<this.weapon_frames.length?(this.changeskin(this.weapon_frames,this.weapon_file,5,this.sp,!0),this.changeskin(this.wapeff_frames,
this.wapeff_file,8,this.sp),this.changeskin(this.obj_frames,this.file,this.type,this.sp)):this.changeskin(this.obj_frames,this.file,this.type,this.sp,!0),this.shield_frames&&0<this.shield_frames.length&&(this.changeskin(this.shield_frames,this.shield_file,11,this.sp),this.changeskin(this.shdeff_frames,this.shdeff_file,12,this.sp))):(this.shield_frames&&0<this.shield_frames.length?(this.changeskin(this.shield_frames,this.shield_file,11,this.sp,!0),this.changeskin(this.shdeff_frames,this.shdeff_file,
12,this.sp),this.changeskin(this.obj_frames,this.file,this.type,this.sp)):this.changeskin(this.obj_frames,this.file,this.type,this.sp,!0),this.changeskin(this.weapon_frames,this.weapon_file,5,this.sp),this.changeskin(this.wapeff_frames,this.wapeff_file,8,this.sp));this.changeskin(this.wing_frames,this.wing_file,7,this.sp);this.changeskin(this.hair_frames,this.hair_file,4,this.sp);this.changeskin(this.hores_frames,this.hores_file,6,this.sp);this.dobuleSkinbymon(this.file,this.type);this.cur_frame_index++;
if(this.isMyRole()&&(this.cur_frame_index>=this.obj_frames.length||1==this.cur_state||6==this.cur_state)){this.playorder();a=!1;if(Objectcontrol.use_skill)a=Objectcontrol.useskill(activate_skilluse,activate_skilltype,activate_skillpos);else if(Objectcontrol.use_attack||chaseing||attackerID)a=Objectcontrol.fight();a||(moveing||null!=Movemodule.end_point?Movemodule.moveing(this.grid):autohookstate?AutoHookmodule.autoflow():autopickstate&&(autopickstate=AutoHookmodule.getMapItem(5,!1)));this.is_die||
this.ddl_state||(this.action_over=!0)}this.updateframe(this.obj_frames);this.setPosOfObjectNameAndBlood();this.updateAlpha()};e.setPosOfObjectNameAndBlood=function(){this.Blood&&(this.Blood.setOffsetPos(this.x,this.y),this.Blood.updateBloodPos());this.txt_name&&this.txt_name.setOffsetPos(this.x,this.y)};e.checkChase=function(a,b){return a?b==SM_POWERHIT||b==SM_LONGHIT||b==SM_WIDEHIT||b==SM_FIREHIT||b==SM_66HIT||b==SM_TWNHIT||b==SM_SWORDHIT||b==SM_HEAVYHIT||b==SM_BACKSTEP||b==SM_HIT_2||b==SM_HIT_3||
b==SM_HIT_4||b==SM_HIT_5||b==SM_60HIT||b==SM_61HIT||b==SM_62HIT||b==SM_CRSHIT||b==SM_43HIT||b==SM_101HIT||b==SM_102HIT||b==SM_103HIT||b==SM_FLYAXE||b==SM_SPELL||b==SM_MAGICFIRE:!1};e.playorder=function(a){if(0<this.msg_list.length){var b=this.msg_list[0],d=this.msg_list[1],n=this.msg_list[2];b&&(b.msg.ident==SM_HIT||this.checkChase(a,b.msg.ident))?(d&&n&&n.msg.ident==d.msg.ident&&this.msg_list.splice(2,1),d&&b.msg.ident==d.msg.ident&&this.msg_list.splice(1,1)):4!=this.cur_state&&10<this.msg_list.length&&
6!=b.msg.ident?this.super_time=!0:this.super_time=!1;a=this.msg_list[0];Gamemessage.onhandlmsg(a.msg,a.bodystr);this.msg_list.splice(0,1)}};e.getstep=function(){var a=0;1==this.type?9==this.cur_state?a=2:a=1:3==this.type&&(2==this.cur_state||4==this.cur_state||15==this.cur_state?a=1:3==this.cur_state&&this.obj_hores?a=3:3==this.cur_state&&(a=2));return a};e.updateselfpos=function(a){if(0<this.obj_frames.length&&this.cur_frame_index<this.obj_frames.length||a){var b=this.getstep();if(0<b){this.data.record==
playerID&&(1==this.cur_frame_index?2==b?GameUtil.PlayMusicFormat(S_ROLE_WALK):GameUtil.PlayMusicFormat(S_ROLE_RUN):4==this.cur_frame_index&&(2==b?GameUtil.PlayMusicFormat(S_ROLE_WALK2):GameUtil.PlayMusicFormat(S_ROLE_RUN2)));var d=this.cur_dir;this.is_backstep&&(d=GameUtil.reverse8dis(this.cur_dir),this.cur_frame_index++);var n=this.cur_frame_index+1;if(!GlobalCfglist.smooth){var c=GameUtil.moveshift(d,b,n,this.obj_frames.length,this.grid.x,this.grid.y);b=GameUtil.movestep(d,this.grid,c,b);b.x&&(this.x=
b.x);b.y&&(this.y=b.y);this.selfname.x=this.x;this.selfname.y=this.y;this.data.record==playerID&&Mapmodule.root&&(b.x&&(Mapmodule.root.x=-(b.x*Mapmodule.root.scaleX-browser_width/2)-20),b.y&&(Mapmodule.root.y=-(b.y*Mapmodule.root.scaleY-browser_height/2+20)))}if(n>this.obj_frames.length-1||a)this.trans_count=this.play_count=0,this.action_over=!0,this.is_backstep=!1,use_move_start||(this.is_moveing=!1),this.is_springback=!1,this.grid.x=this.target_pos.x,this.grid.y=this.target_pos.y,this.data.record==
playerID&&(Mapmodule.drawmap(this.grid.x,this.grid.y,!1),autohookstate&&AutoHookmodule.autoflow(),Laya.stage.event("updatepos"))}}};e.createframeobj=function(a,b,d,n){var c=!1;b&&0==b.indexOf("graphics/")&&(c=!0);c=GameUtil.getresfilename(this,d,b,c)+a;if((c=GameUtil.getImageSetNameByPath(c))&&""!=c){var h;var m=c.replace(".atlas","/"+a+".png");(h=Laya.loader.getRes(m))?this.getobjPlacements(a,m,b,d,n,h,c):this.specialHandleOfWall(c,n,d,b,a,m)}};e.specialHandleOfWall=function(a,b,d,n,c,h){var m=this;
if(1==this.type){var g=TMonFeature(this.data.fea.buffer);(98==g.wRaceImg&&(901==g.wAppr||902==g.wAppr||903==g.wAppr)||99==g.wRaceImg&&900==g.wAppr)&&Laya.loader.load(a,Laya.Handler.create(this,function(l){m.getobjPlacements(c,h,n,d,b,Laya.loader.getRes(h),a)}),null,Laya.Loader.ATLAS)}};e.getobjPlacements=function(a,b,d,n,c,h,m){m=Offsetmodule.getoffsetfromatlas(m,a);if(h&&m&&h.bitmap&&!h.bitmap._recreateLock){if(1==n||2==n||3==n)this.fl_name=b,this.off=m,c.height=h.height;if(6==n&&this.obj_hores&&
null!=c._style)this.obj_hores.graphics.clear(),this.obj_hores.graphics.drawTexture(h,m.x,m.y),this.obj_hores.zOrder=c.zOrder;else if(7==n&&this.obj_wing&&null!=c._style)this.obj_wing.graphics.clear(),this.obj_wing.graphics.drawTexture(h,m.x,m.y),this.obj_wing.blendMode="overlay",this.obj_wing.zOrder=c.zOrder+1;else if(8==n&&this.obj_wapeff&&null!=c._style)this.obj_wapeff.graphics.clear(),this.obj_wapeff.graphics.drawTexture(h,m.x,m.y),this.obj_wapeff.blendMode="overlay",this.obj_wapeff.zOrder=c.zOrder+
1;else{a=parseInt(a);1==this.type&&null!=c._style&&"mon4"==d&&(2860<=a&&2869>=a?c.blendMode="overlay":c.blendMode="normal");this.setblendmode(d,a);if(-1!=d.indexOf("hum")||1==this.type||2==this.type)this.height=m.y;this.width=h.width+m.x;this.is_use_offest?c.graphics.drawTexture(h,m.x,m.y):c.graphics.drawTexture(h)}}};e.getCurLooksResData=function(){var a={skins:[],xy:[]},b=this.addSingleResData(this.sp);b&&(a.skins.push.apply(a.skins,$jscomp.arrayFromIterable(b.skins)),a.xy.push.apply(a.xy,$jscomp.arrayFromIterable(b.xy)));
if(b=this.addSingleResData(this.obj_wing))a.skins.push.apply(a.skins,$jscomp.arrayFromIterable(b.skins)),a.xy.push.apply(a.xy,$jscomp.arrayFromIterable(b.xy));return a};e.addSingleResData=function(a){if(a&&a.graphics&&(a=a.graphics.cmds?a.graphics.cmds:[a.graphics._one])&&0<a.length){for(var b=!1,d={skins:[],xy:[]},n=0;n<a.length;n++){var c=a[n];c&&c[0]&&c[0]instanceof Laya.Texture&&(b=!0,d.skins.push(c[0].url),d.xy.push({x:c[1],y:c[2]}))}if(b)return d}};e.setblendmode=function(a,b){if(this.skin_feature&&
0!=this.skin_feature.wAppr&&50==this.skin_feature.wRaceImg){var d=this.skin_feature.wAppr;null==this.sp._style||83!=d&&84!=d&&85!=d&&86!=d&&87!=d||(this.sp.blendMode="overlay")}this.use_dobule_sp&&null!=this.dobule_sp._style&&(this.dobule_sp.blendMode="overlay");1==g_sprite_force_blend&&1==GameUtil.IfOpenBlend(void 0===a?"":a,void 0===b?-1:b)&&(this.sp.blendMode="overlay")};e.findframeobj=function(a){for(var b=null,d=0;d<this.frame_sprits.length;++d)this.frame_sprits[d].visible=!1,a==this.frame_sprits[d].name&&
(b=this.frame_sprits[d]);return b};e.updateframe=function(a){var b=this;this.cur_frame_index>=a.length&&(this.is_born&&(this.is_born=!1,this.born_count=0,this.changestate(null,1,null,!0)),0<this.msg_list.length?this.playorder():(this.is_loop&&(this.cur_frame_index=0),this.call_str?(Laya.stage.event(this.call_str,[this]),this.call_str=null):this.is_die||this.ddl_state||this.isMyRole()&&use_move_start||moveing||(1==this.type||2==this.type?this.changestate(null,1,this.cur_dir,!0):!this.noMove()&&this.checkSameDirForSelfObj()&&
this.checkLimitDisForSelfObj()?setTimeout(function(){b.is_moveing||b.changestate(null,1,b.cur_dir,!0)},40):this.changestate(null,1,this.cur_dir,!0)),this.is_remove&&(ObjectManage.del2object(this),this.clearstart())))};e.checkSameDirForSelfObj=function(){return Objectcontrol&&Objectcontrol.self_obj?GameUtil.isSameDir(Objectcontrol.self_obj.cur_dir,this.cur_dir):!1};e.checkLimitDisForSelfObj=function(){return Objectcontrol&&Objectcontrol.self_obj?2<=Objectcontrol.self_obj.grid.distance(this.grid.x,
this.grid.y):!1};e.noMove=function(){return 2!=this.cur_state&&3!=this.cur_state};e.checkObJIsMove=function(){return!0};e.changestate=function(a,b,d,n,c,h,m){null!=b&&null!=d&&(this.cur_frame_index=0);this.is_moveing=1==this.type&&(2==b||9==b)||3==this.type&&(2==b||3==b||4==b);if(b==this.cur_state&&d==this.cur_dir&&0<this.obj_frames.length||(this.is_born||this.ddl_state)&&!this.is_die){this.is_born&&this.born_count++;if(1>this.born_count)return;this.born_count=0}this.data&&ObjectManage.resetCollisionValueOnStanding(this.data.record,
1==b);this.is_moveing&&(this.trans_count=0);this.updateskin(a,d,b,n,c);this.resetTargetDisOnNoMoveState();h&&(Laya.stage.event(c,[this]),this.call_str=null);m&&(a=1==m?a=this.obj_frames[this.obj_frames.length-1]:a=this.obj_frames[0],this.obj_frames=[],this.obj_frames.push(a))};e.resetTargetDisOnNoMoveState=function(){this.data&&otherPlayerCatch&&this.data.record==playerID&&2!=this.cur_state&&3!=this.cur_state&&(otherPlayerCatch=!1,disAfterTargetMoved=0);attackerID||(otherPlayerCatch=!1,disAfterTargetMoved=
0);this.data&&this.data.record==attackerID&&2!=this.cur_state&&3!=this.cur_state&&(otherPlayerCatch=!1,disAfterTargetMoved=0)};e.syndata=function(a){for(var b in a)a.hasOwnProperty(b)&&(this.data[b]=a[b])};e.updateskin=function(a,b,d,n,c){null!=a&&this.syndata(a);null!=b&&(this.cur_dir=b);null!=d&&void 0!=d&&(this.cur_state!==d&&(this.lastState=this.cur_state),this.cur_state=d);null!=n&&(this.is_loop=n);this.call_str=c;null==this.cur_state&&(this.cur_state=1);null==this.cur_dir&&(this.cur_dir=0);
if(this.data){switch(this.type){case E_OBJECTTYPE.MONSTER:this.updateSkinbymon();break;case E_OBJECTTYPE.NPC:this.updateSkinbymon();break;case E_OBJECTTYPE.PLAYER:this.updateSkinbyplayer()}3==this.type&&(this.updateSkinByHair(),this.updateskinbyweapon(),this.updateskinbyshield(),this.updateskinbyhores(),this.updateskinbywing(),this.updateskinbywapeff(),this.updateskinbyshdeff(),this.updateskinIcon())}this.reverseani&&this.obj_frames.reverse()};e.updateskinIcon=function(){this.skin_feature=THumFeature(this.data.fea.buffer);
-1===this.skin_feature.nIcon?this.title&&(this.title.visible=!1):(this.title||(this.title=new Title,this.addChild(this.title)),this.title.update(this))};e.getIconTitleZorder=function(){return 1==this.type&&!g_customItemAttr.IconGifts[1]||2==this.type&&!g_customItemAttr.IconGifts[2]||3==this.type&&!g_customItemAttr.IconGifts[0]?4:0};e.updateskinbywing=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(50!=this.skin_feature.wDressEffType||!g_ClientConfig||GlobalCfglist.humsimple&&0!=
g_ClientConfig.boClothesSimple||g_ClientConfig.boHideHumEffect)if(!(0<this.skin_feature.wDressEffType&&g_ClientConfig)||GlobalCfglist.humsimple&&0!=g_ClientConfig.boClothesSimple||g_ClientConfig.boHideHumEffect){if(a=this.getChildByName("HumBodyEffect"))b=ObjectManage.object_list.indexOf(a),-1!=b&&ObjectManage.object_list.splice(b,1),a.removeSelf(),Animationmodule.removeAni(a)}else{a=GameUtil.rulebywing(this.skin_feature.wDressEffType,this.skin_feature.btGender,this.cur_state,this.cur_dir);this.ftime=
a.ftime;this.wing_file=a.file;this.wing_frames=a.frames;a=this.cur_dir+"_"+this.skin_feature.wDressEffType+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_6";this.loadallatlas(a,this.wing_frames,this.wing_file);var a=this.getChildByName("HumBodyEffect");if(a){var b=ObjectManage.object_list.indexOf(a);-1!=b&&ObjectManage.object_list.splice(b,1);a.removeSelf();Animationmodule.removeAni(a)}}else GameUtil.HumBodyEffect(this);(a=GameUtil.DreesEffect(this.skin_feature.nDressEffectIndex,this.skin_feature.wDressEffectOffSet,
this.skin_feature.btGender,this.cur_state,this.cur_dir))&&!this.obj_hores&&(!GlobalCfglist.humsimple||g_ClientConfig&&0==g_ClientConfig.boClothesSimple)?(this.ftime=a.ftime,this.wing_file=a.file,this.wing_frames=a.frames,a=this.cur_dir+"_"+this.skin_feature.nDressEffectIndex+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_10_"+this.skin_feature.wDressEffectOffSet+"_"+this.cur_dir,this.loadallatlas(a,this.wing_frames,this.wing_file)):0<this.wing_frames.length&&(0>=this.skin_feature.wDressEffType||
g_ClientConfig&&GlobalCfglist.humsimple&&1==g_ClientConfig.boClothesSimple)&&(this.wing_frames=[],this.obj_wing&&this.obj_wing.graphics.clear())};e.updateskinbyshdeff=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(0<this.skin_feature.nShieldEffectIndex&&65535!=this.skin_feature.nShieldEffectIndex&&(!GlobalCfglist.weaponsimple||g_ClientConfig&&0==g_ClientConfig.boWeaponSimple)){var a=GameUtil.rulebyShieldEffect(this.skin_feature.nShieldEffectIndex,this.skin_feature.wShieldEffectOffSet,
this.skin_feature.btGender,this.cur_state,this.cur_dir);a&&(this.ftime=a.ftime,this.shdeff_file=a.file,this.shdeff_frames=a.frames,this.loadallatlas(this.cur_dir+"_"+this.skin_feature.nShieldEffectIndex+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_12_"+this.skin_feature.wShieldEffectOffSet,this.shdeff_frames,this.shdeff_file),null==this.obj_shdeff&&(this.obj_shdeff=new Laya.Sprite,this.obj_shdeff.visible=!GlobalCfglist.hidePlayer,this.addChild(this.obj_shdeff)))}else this.shdeff_frames=[],
this.obj_shdeff&&(this.obj_shdeff.graphics.clear(),this.obj_shdeff.removeSelf(),this.obj_shdeff=null)};e.updateskinbywapeff=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(!(0<this.skin_feature.nWeaponEffectIndex&&65535!=this.skin_feature.nWeaponEffectIndex&&g_ClientConfig)||GlobalCfglist.weaponsimple&&0!=g_ClientConfig.boWeaponSimple||g_ClientConfig.boHideWeaponEffect||null!=this.obj_hores)this.wapeff_frames=[],this.obj_wapeff&&(this.obj_wapeff.graphics.clear(),this.obj_wapeff.removeSelf(),
this.obj_wapeff=null);else{var a=GameUtil.rulebyweaponeeffect(this.skin_feature.nWeaponEffectIndex,this.skin_feature.wWeaponEffectOffSet,this.skin_feature.btGender,this.cur_state,this.cur_dir);a&&(this.ftime=a.ftime,this.wapeff_file=a.file,this.wapeff_frames=a.frames,this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wWeaponEffectOffSet+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_8_"+this.skin_feature.nWeaponEffectIndex,this.wapeff_frames,this.wapeff_file),null==this.obj_wapeff&&(this.obj_wapeff=
new Laya.Sprite,this.obj_wapeff.visible=!GlobalCfglist.hidePlayer,this.addChild(this.obj_wapeff)))}};e.dobuleSkinbymon=function(a,b){if(this.skin_feature){var d=this.skin_feature.wAppr;50==this.skin_feature.wRaceImg&&0<this.subsp_frames.length&&this.sub_file&&0==this.checkNpcDiy(d)&&(this.use_dobule_sp=!0,d=this.sub_index>=this.subsp_frames.length?d=this.subsp_frames[this.sub_index=0]:d=this.subsp_frames[this.sub_index++],this.sub_file&&(a=this.sub_file,b=13),this.createframeobj(d,a,b,this.dobule_sp))}};
e.checkNpcDiy=function(a){return 1E4<=a&&65535>=a?!0:!1};e.updateSkinbymon=function(){this.skin_feature=TMonFeature(this.data.fea.buffer);var a=g_ClientConfig&&null==g_ClientConfig.boMonSimple?0:g_ClientConfig.boMonSimple;g_ClientConfig&&1==this.type&&1==a&&GlobalCfglist.monsimple&&98!=this.skin_feature.wRaceImg&&99!=this.skin_feature.wRaceImg&&900!=this.skin_feature.wAppr&&901!=this.skin_feature.wAppr&&902!=this.skin_feature.wAppr&&903!=this.skin_feature.wAppr&&(this.skin_feature.wAppr=g_ClientConfig.nMonAppr);
null==this.cur_dir&&(this.cur_dir=0);a=this.skin_feature.wRaceImg+"_"+this.skin_feature.wAppr+"_"+this.cur_state+"_"+this.cur_dir;this.is91to100Npc()&&(this.cur_state=1,this.cur_dir=0);if(null==this.res_config_list[a]){if(999!=this.skin_feature.wAppr){if(1==this.type&&156==this.skin_feature.wRaceImg)for(var b=0;b<g_diymonsterlist.length;b++){var d=g_diymonsterlist[b];if(d&&d.MonAppr==this.skin_feature.wAppr){var n=GameUtil.ruleByDiyMon(this,d);break}}else n=GameUtil.rulebymon(this.skin_feature.wRaceImg,
this.skin_feature.wAppr,this.cur_state,this.cur_dir,this.data.series);n&&n.frames&&0!=n.frames.length&&(this.file=n.file,this.obj_frames=n.frames,this.subsp_frames=n.sub_frames,this.sub_file=n.sub_file,this.ftime=n.ftime,this.res_config_list[a]={file:n.file,frames:n.frames,sub_frames:n.sub_frames,ftime:n.ftime});this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wRaceImg+"_"+this.skin_feature.wAppr+"_"+this.cur_state+"_1_"+this.data.series,this.obj_frames,this.file);(n=this.cur_dir+"_"+this.skin_feature.wRaceImg+
"_"+this.skin_feature.wAppr+"_"+this.cur_state+"_2_"+this.data.series)&&this.sub_file&&this.loadallatlas(n,this.subsp_frames,this.sub_file)}}else this.file=this.res_config_list[a].file,this.obj_frames=this.res_config_list[a].frames,this.subsp_frames=this.res_config_list[a].sub_frames,this.ftime=this.res_config_list[a].ftime};e.updateCustomMon=function(a){GameUtil.ruleByDiyMon(this,a)};e.getJob=function(){return this.skin_feature?this.skin_feature.btJob:this.data&&this.data.fea&&this.data.fea.buffer?
THumFeature(this.data.fea.buffer).btJob:null};e.getLevel=function(){if(this.m_Abil)if(isNaN(this.m_Abil.Level)){if(this.level)return this.level;if(this.data)return this.data.level}else return this.m_Abil.Level;return null};e.updateSkinbyplayer=function(){this.skin_feature=THumFeature(this.data.fea.buffer);var a=g_ClientConfig&&null==g_ClientConfig.boClothesSimple?0:g_ClientConfig.boClothesSimple;if(g_ClientConfig&&1==a&&GlobalCfglist.humsimple&&1==g_ClientConfig.boClothesSimple&&0!=this.skin_feature.wDress){a=
THumFeature(this.data.fea.buffer).btJob;var b=this.skin_feature.btGender;switch(a){case 0:this.skin_feature.wDress=2*g_ClientConfig.nClothesZ+b;break;case 1:this.skin_feature.wDress=2*g_ClientConfig.nClothesF+b;break;case 2:this.skin_feature.wDress=2*g_ClientConfig.nClothesD+b}}if(0<this.skin_feature.btHorseType)a=GameUtil.rulebydressforhores(this.skin_feature.wDress,0,this.cur_state,this.cur_dir),this.ftime=a.ftime,this.file=a.file,this.obj_frames=a.frames,this.use_hores=!0,a=this.cur_dir+"_"+this.skin_feature.wDress+
"_0_"+this.cur_state+"_3",this.loadallatlas(a,this.obj_frames,this.file);else if(a=GameUtil.rulebydress(this.skin_feature.wDress,0,this.cur_state,this.cur_dir),this.ftime=a.ftime,this.obj_frames=a.frames,this.use_hores=!1,this.file=a.file,this.yf_xid=a.xid,a=this.cur_dir+"_"+this.skin_feature.wDress+"_0_"+this.cur_state+"_2",this.loadallatlas(a,this.obj_frames,this.file),6==this.cur_state)for(a=0;5>a;a++)this.obj_frames.push("")};e.updateskinbyhores=function(){this.skin_feature=THumFeature(this.data.fea.buffer);
if(0<this.skin_feature.btHorseType){var a=GameUtil.rulebyhores(this.skin_feature.btHorseType,0,this.cur_state,this.cur_dir);this.hores_file=a.file;this.hores_frames=a.frames;null==this.obj_hores&&(this.obj_hores=new Laya.Sprite,this.obj_hores.visible=!GlobalCfglist.hidePlayer,this.addChild(this.obj_hores));this.loadallatlas(this.cur_dir+"_"+this.skin_feature.btHorseType+"_0_"+this.cur_state+"_4",this.hores_frames,this.hores_file)}else this.hores_file=null,this.hores_frames=[],this.obj_hores&&(this.obj_hores.graphics.clear(),
this.obj_hores.removeSelf(),this.obj_hores=null)};e.updateSkinByHair=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(255!=this.skin_feature.btHat){var a=GameUtil.rulebyhat(this.skin_feature.btGender,this.skin_feature.btHat,this.cur_state,this.cur_dir);this.hair_frames=a.frames;this.hair_file=a.file;a=this.cur_dir+"_"+this.skin_feature.btGender+"_"+this.skin_feature.btHat+"_"+this.cur_state+"_5"}else this.use_hores=0<this.skin_feature.btHorseType,a=GameUtil.rulebyhair(this.skin_feature.btHair,
this.skin_feature.btGender,this.skin_feature.btHorseType,this.cur_state,this.cur_dir),this.hair_frames=a.frames,this.hair_file=a.file,a=this.cur_dir+"_"+this.skin_feature.btGender+"_"+this.skin_feature.btHorseType+"_"+this.cur_state+"_9_"+this.skin_feature.btHair;this.loadallatlas(a,this.hair_frames,this.hair_file);this.updateNeiGuanHairOnChangeHairstyle(this.skin_feature.btGender,this.skin_feature.btHair);this.lastBtHair=this.skin_feature.btHair};e.updateNeiGuanHairOnChangeHairstyle=function(a,b){this.hasChangeHairStyle(b)&&
Laya.stage.event("updateNeiGuanHair",[b,a])};e.hasChangeHairStyle=function(a){return void 0!=this.lastBtHair&&this.lastBtHair!=a};e.updateskinbyshield=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(0<this.skin_feature.btHorseType||0==this.skin_feature.wShield||1==this.skin_feature.wShield)this.shield_frames=null;else if(!GlobalCfglist.weaponsimple||g_ClientConfig&&0==g_ClientConfig.boWeaponSimple){var a=GameUtil.rulebyShield(this.skin_feature.wShield,this.skin_feature.btGender,
this.cur_state,this.cur_dir);this.shield_frames=a.frames;this.shield_file=a.file;this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wShield+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_11",this.shield_frames,this.shield_file)}};e.updateskinbyweapon=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(g_ClientConfig&&1==g_ClientConfig.boWeaponSimple&&GlobalCfglist.weaponsimple&&0!=this.skin_feature.wWeapon)switch(THumFeature(this.data.fea.buffer).btJob){case 0:this.skin_feature.wWeapon=
2*g_ClientConfig.nWeaponZ;break;case 1:this.skin_feature.wWeapon=2*g_ClientConfig.nWeaponF;break;case 2:this.skin_feature.wWeapon=2*g_ClientConfig.nWeaponD}if(0<this.skin_feature.btHorseType||0==this.skin_feature.wWeapon||1==this.skin_feature.wWeapon)this.weapon_frames=null;else{var a=GameUtil.rulebyWeapon(this.skin_feature.wWeapon,this.skin_feature.btGender,this.cur_state,this.cur_dir);this.weapon_frames=a.frames;this.weapon_file=a.file;this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wWeapon+
"_"+this.skin_feature.btGender+"_"+this.cur_state+"_7",this.weapon_frames,this.weapon_file)}};e.banding=function(a){this.bind_list.push(a)};e.setbodycolor=function(a){var b=null;switch(a){case 1:var d=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0];d=new Laya.ColorFilter(d);b=[d];this.havePoison=1;break;case 2:d=[0,0,0,0,0,.5,0,0,0,0,0,0,0,0,0,0,0,0,1,0];d=new Laya.ColorFilter(d);b=[d];this.havePoison=2;break;case 3:d=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0];d=new Laya.ColorFilter(d);
b=[d];break;case 4:d=[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0];d=new Laya.ColorFilter(d);b=[d];break;case 5:d=[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0];d=new Laya.ColorFilter(d);b=[d];break;case 6:d=[0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0],d=new Laya.ColorFilter(d),b=[d]}0==a&&(this.havePoison=0);GameUtil.intervalFrameDeal(32,this,function(){this.sp.filters=b}.bind(this))};e.stallssetting=function(a){a?this.openstalls():this.closestalls()};e.openstalls=function(){var a=this.sp.getChildByName("stalls");
null==a&&(a=new Laya.Image("gameres/png/00065.png"),a.name="stalls",a.pos(-15,-70),this.sp.addChild(a),this.data.record==playerID&&(player_stalls=Actionlock=!0))};e.closestalls=function(){this.sp.removeChildByName("stalls");this.sp.removeChildByName("stallstxt");this.data.record==playerID&&(Actionlock=player_stalls=!1)};e.stallsname=function(a){var b=this.sp.getChildByName("stallstxt");null==b?(b=new Laya.Text,b.color="#cd950c",b.fontSize=16,b.strokeColor="#000000",b.stroke=2,b.name="stallstxt",b.text=
a,b.align="center",b.pos(25-b.width/2,-105),this.sp.addChild(b)):b.text=a};e.addclearlist=function(a,b){g_res_clearlist.push({name:a,res:b})};e.clearRes=function(){for(var a=0;a<g_res_clearlist.length;++a)g_res_clearlist[a]&&(ObjectManage.resloadlist[g_res_clearlist[a].name]=null,GameUtil.clearResByUrl(g_res_clearlist[a].res));g_res_clearlist=[]};e.clearstart=function(a){if(a=this.getChildByName("HumBodyEffect")){var b=ObjectManage.object_list.indexOf(a);-1!=b&&ObjectManage.object_list.splice(b,1);
a.removeSelf();Animationmodule.removeAni(a)}};e.clearObjectName=function(){this.txt_Img&&(this.txt_Img.removeSelf(),this.txt_Img=null);this.txt_name&&(this.txt_name.removeSelf(),this.txt_name=null)};e.clearObjectBlood=function(){this.Blood&&(this.Blood.removeBlood(),this.Blood.removeSelf(),this.Blood=null)};e.loadallatlas=function(a,b,d){if(null==ObjectManage.resloadlist[a])for(var n=0;n<b.length;n++){var c="data/"+d+"/"+b[n];d&&0==d.indexOf("graphics/")&&(c=d+"/"+b[n]);c=GameUtil.getImageSetNameByPath(c);
null!=c&&""!=c&&(this.addclearlist(a,c),Laya.loader.load(c,null,null,Laya.Loader.ATLAS),ObjectManage.resloadlist[a]=a)}};e.setInvisable=function(a){this.invisable!=a&&(this.invisable=a)};e.updateAlpha=function(){this.alpha=2==Mapmodule.getFlagByGridPos(this.grid)||this.invisable?.7:1};e.onRemovedEvent=function(){Laya.stage.off(Laya.Event.REMOVED,this,this.onRemovedEvent);this.clearObjectName();this.clearObjectBlood();backupLockID&&3==this.type&&this.data&&this.data.record==backupLockID&&(GameUtil.loseLockIdCount=
0,Laya.timer.loop(1E3,GameUtil,GameUtil.loseLockIdCountdown));this.deleteAnimFromObj()};e.deleteAnimFromObj=function(){this.data&&this.data.record&&Title.deleteTitleAnim(this.data.record);this.clearSprite(this.obj_wapeff);this.clearSprite(this.obj_hores);this.clearSprite(this.obj_wing);this.clearSprite(this.sp);this.clearSprite(this.dobule_sp);this.releaseAttr()};e.clearSprite=function(a){a&&a.destroy()};return f}(Laya.Sprite),objectcontrol=function(){function e(){Laya.stage.on("RockerMoveStart",
this,this.objectmove);Laya.stage.on("ClickNPC",this,this.clickNPC);Laya.stage.on("RockerMoveEnd",this,this.moveend);Laya.stage.on("MOVEOVER",this,this.moveover);Laya.stage.on("MSG_SEND_RESULT",this,this.sendresult);Laya.stage.on("MSG_MOVE_RESULT",this,this.moveresult);this.mapbox=this.self_obj=null;this.atttype=this.cur_dir=0;this.skillList=[];this.controltype=0;this.is_open_by=!1;this.is_open_cs=!0;this.is_open_lh=this.is_open_ly=this.is_open_zr=this.is_open_ktz=!1;this.obj_hook=0;this.canAcross=
!1;this.path_index=0;this.path_list=[];this.open_findpath=this.find_over=!1;this.remedy_count=10;this.use_skill=this.use_attack=!1;this.show_npcdlg_pos=new Laya.Point(0,0);this.show_npcdlg_max_dis=9;this.move_call_result=!0;this.move_pos=new Laya.Point;this.lastSkillId=0}e.prototype.moveresult=function(f,a,b){var d=ObjectManage.findobject(f);d&&(d.grid.x=a,d.grid.y=b,d.pos(48*a,32*b),d.changestate(null,1,null,!0),f==playerID&&(this.mapbox.pos(-(48*a*Mapmodule.root.scaleX-browser_width/2),-(32*b*Mapmodule.root.scaleY-
browser_height/2+20)),Laya.stage.event(Laya.Event.MOUSE_UP)))};e.prototype.springback=function(f,a){this.self_obj&&(this.self_obj.is_backstep&&(f=this.self_obj.target_pos.x,a=this.self_obj.target_pos.y),this.self_obj.is_moveing=!1,this.self_obj.trans_count=0,this.self_obj.target_pos.x=f,this.self_obj.target_pos.y=a,this.self_obj.grid.x=f,this.self_obj.grid.y=a,ObjectManage.play_count=0,console.log("\u56de\u5f39--\x3e ",this.self_obj.target_pos.x,this.self_obj.target_pos.y,this.self_obj.cur_frame_index),
this.path_index=1,this.self_obj.x=48*this.self_obj.target_pos.x,this.self_obj.y=32*this.self_obj.target_pos.y,this.mapbox.x=-(48*this.self_obj.target_pos.x*Mapmodule.root.scaleX-browser_width/2)-20,this.mapbox.y=-(32*this.self_obj.target_pos.y*Mapmodule.root.scaleY-browser_height/2+20),this.move_call_result=!0,Fightmodule.path_list=[],Laya.stage.event("movespringback"))};e.prototype.sendresult=function(f){switch(this.controltype){case 1:"+FAIL!"!=f&&"+GOOD!"==f&&(this.move_pos.x=this.self_obj.target_pos.x,
this.move_pos.y=this.self_obj.target_pos.y,this.move_call_result=!0,g_boMagicGood=!1);break;case 2:"+FAIL!"==f?this.use_skill=!1:"+GOOD!"==f&&this.playskill();break;case 3:"+FAIL!"==f&&(chaseing=!1,attackerID=0,this.use_skill=this.use_attack=!1,this.self_obj.trans_count=0,ObjectManage.play_count=0,autohookstate&&(this.move_dir=GameUtil.reverse8dis(this.self_obj.cur_dir),this.contiunemove(this.move_dir,1)));break;case 5:if("=DIG!"==f)this.self_obj.digfragment=!0;else if("+GOOD!"==f&&this.self_obj.digfragment){this.self_obj.digfragment=
!1;var a=8*this.self_obj.cur_dir;if(a=Animationmodule.playframe(!0,Mapmodule.root,"data/Effect/",a,a+2,80,!1,!0))a.pos(48*this.self_obj.grid.x,32*this.self_obj.grid.y),a.zOrder=9}}if("+PWR!"==f)this.atttype=5,this.skillList.push(5);else if("+WID!"==f)this.move_call_result=this.is_open_by=!0;else if("+UWID!"==f)this.is_open_by=!1,this.move_call_result=!0;else if("+FIR!"==f)this.atttype=24,this.controltype=3,this.skillList.push(24),this.move_call_result=!0;else if("+UFIR!"==f){this.atttype=0;this.controltype=
3;for(f=0;f<this.skillList.length;f++)24==this.skillList[f]&&this.skillList.splice(f,1);this.move_call_result=!0}else"+LNG!"==f?this.move_call_result=this.is_open_cs=!0:"+ULNG!"==f?(this.is_open_cs=!1,this.move_call_result=!0):"+KTZ!"==f?(this.atttype=43,this.controltype=3,this.skillList.push(43),this.move_call_result=!0):"+UKTZ!"==f?(this.atttype=0,this.controltype=3,this.move_call_result=!0):"+SWO!"==f?(this.atttype=53,this.controltype=3,this.skillList.push(53),this.move_call_result=!0):"+USWO!"==
f?(this.atttype=0,this.controltype=3,this.move_call_result=!0):"+TWN!"==f?(this.atttype=38,this.skillList.push(38),this.move_call_result=!0):"+UTWN!"==f&&(this.atttype=0,this.move_call_result=!0)};e.prototype.clickNPC=function(f,a,b){f.data&&f.data.record!=playerID&&(2!=f.type&&(f.is_die?(11==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&160==f.skin_feature.wAppr||11==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&161==f.skin_feature.wAppr||19==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&
43==f.skin_feature.wAppr||19==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&70==f.skin_feature.wAppr||16==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&24==f.skin_feature.wAppr||52==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&39==f.skin_feature.wAppr||19==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&113==f.skin_feature.wAppr||52==f.skin_feature.wRaceImg&&0==f.skin_feature.wWeapon&&93==f.skin_feature.wAppr)&&!autohookstate&&GameUtil.addhalo(f):GameUtil.addhalo(f)),1==a?2==
f.type?(GameApi.ShowNewNpcDlg(!1),Sendmessage.sendNPCClick(f.data.record),this.show_npcdlg_pos.x=f.grid.x,this.show_npcdlg_pos.y=f.grid.y,g_ChangerIndex=g_Changerpak=-1):3==f.type&&(ObjectManage.findobject(f.data.record).data.fea.buffer[13]&&f.txt_name&&Sendmessage.QuerySelectShopInfo(GameUtil.getPureName(f),f.data.record),f.boisZmu&&(a=ObjectManage.findobject(playerID))&&(a.boisZmu?Laya.stage.event("new_chat_msg",[{info:"\u5f00\u542f\u62db\u52df\u961f\u5458\u529f\u80fd\u540e\u65e0\u6cd5\u52a0\u5165\u5176\u4ed6\u961f\u4f0d!",
front:255,bg:56,type:0}]):f.txt_name&&Sendmessage.SendAddZmu(f.txt_name.text,0))):2!=a||3==f.type&&f.data.record!=playerID||1==f.type&&lockingID&&!Actionlock&&this.fight())};e.prototype.bindobj=function(f,a,b,d){f&&(this.self_obj=f,this.mapbox=a,this.self_obj.pos(48*b,32*d),this.self_obj.grid.x=b,this.self_obj.grid.y=d)};e.prototype.updatepos=function(f,a){this.self_obj&&(this.self_obj.grid.x=f,this.self_obj.grid.y=a,this.self_obj.pos(48*f,32*a))};e.prototype.movecheck=function(f,a,b){return f.x==
a.x&&f.y==a.y||2==b&&(1<Math.abs(f.x-a.x)||1<Math.abs(f.y-a.y))||3==b&&(2<Math.abs(f.x-a.x)||2<Math.abs(f.y-a.y))?!1:!0};e.prototype.executemove=function(f,a,b){if(!autohookstate&&this.self_obj.grid.x==f.x&&this.self_obj.grid.y==f.y&&void 0==a)for(var d=0;8>d;d++){var n=ObjectManage.has2obstacle(this.self_obj.grid,d,b);n||(f=GameUtil.getMovePoint(this.self_obj.grid,d,b-1),a=GameUtil.getorientation(this.self_obj.grid,f))}if(0==b||!this.movecheck(f,this.self_obj.grid,b))return Movemodule.stopmove(),
!1;n=ObjectManage.has2obstacle(this.self_obj.grid,a,b);10<this.obj_hook&&!this.move_call_result&&(this.move_call_result=!0);if(!n&&this.move_call_result){this.move_call_result=!1;this.obj_hook=0;this.move_dir=a;this.controltype=1;this.use_skill=this.use_attack=!1;this.self_obj.action_over=!1;this.self_obj.target_pos.x=f.x;this.self_obj.target_pos.y=f.y;4==b&&this.self_obj.obj_hores?this.self_obj.changestate(null,3,a,!1):this.self_obj.changestate(null,b,a,!1);Sendmessage.sendRoleMessage(2==b?CM_WALK:
this.self_obj.obj_hores?CM_HORSERUN:CM_RUN,f.x,f.y,a);if(0!=this.show_npcdlg_pos.x||0!=this.show_npcdlg_pos.y)f=this.show_npcdlg_pos.distance(this.self_obj.grid.x,this.self_obj.grid.y),a=GameUtil.InstanceOfMem(ScreenWUI),b=GameUtil.InstanceOfMem(NewNpcWinUI),f>=this.show_npcdlg_max_dis&&!b.isMoveClose&&(this.show_npcdlg_pos=new Laya.Point(0,0),GameApi.ShowNewNpcDlg(!1),Laya.stage.event("closestore"),3!=a.InType&&4!=a.InType&&5!=a.InType||GameApi.ShowScreen(!1));return!0}n&&lockingID&&autohookstate?
GameUtil.delhalo(lockingID):autohookstate&&1==this.self_obj.cur_state&&this.obj_hook++;return!1};e.prototype.contiunemove=function(f,a){if(!(roledielock||Actionlock||player_stalls||g_furious_collision_ing)){this.self_obj.grid.x=Math.floor(this.self_obj.x/48);this.self_obj.grid.y=Math.floor(this.self_obj.y/32);var b=GameUtil.getMovePoint(this.self_obj.grid,f,1),d=GameUtil.getMovePoint(this.self_obj.grid,f,2);AStart.cur_matx&&AStart.cur_matx.length>b.y&&AStart.cur_matx.length>d.y&&AStart.cur_matx[0].length>
b.x&&AStart.cur_matx[0].length>d.x&&(0!=AStart.cur_matx[b.y][b.x]&&1!=AStart.cur_matx[b.y][b.x]||0!=AStart.cur_matx[d.y][d.x]&&1!=AStart.cur_matx[d.y][d.x])&&(a=1);2==a&&this.self_obj.obj_hores&&(a=3);(b=GameUtil.moverule(this.self_obj.grid,f,a))?1<b.length?this.executemove(b[0],f,2):this.executemove(b,f,a+1):f!=this.self_obj.cur_dir?(this.move_dir=f,this.self_obj.changestate(null,1,this.move_dir,!0),Sendmessage.ChangDir(this.self_obj.grid.x,this.self_obj.grid.y,this.move_dir)):2!=a&&(a=GameUtil.CountMoveDown(f),
(b=GameUtil.moverule(this.self_obj.grid,a,1))?this.executemove(b,a,2):(a=GameUtil.CountMoveUp(f),(b=GameUtil.moverule(this.self_obj.grid,a,1))&&this.executemove(b,a,2)))}};e.prototype.rockerrule=function(){return!this.move_call_result||this.use_attack||this.self_obj.is_springback||attack_lock_state||!(1==this.self_obj.cur_state||this.self_obj.skin_feature&&(0==this.self_obj.skin_feature.btJob||1==this.self_obj.skin_feature.btJob||2==this.self_obj.skin_feature.btJob)&&6==this.self_obj.cur_state||this.self_obj.action_over&&
5<this.self_obj.cur_frame_index)?!1:!0};e.prototype.objectmove=function(f,a){if(!(roledielock||Actionlock||rockerlock||player_stalls||null==this.self_obj||g_furious_collision_ing)){autopickstate&&(autopickstate=!1);var b=Laya.Browser.now();300<b-attack_lock_time&&(attack_lock_time=b,attack_lock_state=!1);this.rockerrule()&&(null!=f?this.contiunemove(f.dir,f.state):Movemodule.startmove(this.self_obj.grid,a),ObjectManage.resetLockID())}};e.prototype.moveend=function(){this.move_state=0;this.use_skill=
this.use_attack=!1;this.move_call_result=!0;use_move_start=!1};e.prototype.usefightrule=function(){return this.self_obj&&(1==this.self_obj.cur_state||6==this.self_obj.cur_state||13==this.self_obj.cur_state||this.self_obj.action_over&&5<this.self_obj.cur_frame_index)?!0:!1};e.prototype.getattfasttime=function(f){return Math.max(540-g_ClientConfig.nAttackSpeed/10*5.4,g_ClientConfig.AttackIntervalTime)-50-55*this.self_obj.attsp/10-rolespeed*g_ClientConfig.btItemSpeed};e.prototype.storm=function(){if(roledielock||
Actionlock||player_stalls||this.self_obj&&this.self_obj.obj_hores)return!1;if(this.usefightrule()&&this.move_call_result){if(Laya.Browser.now()-attack_call_time<this.getattfasttime())return!1;this.controltype=3;this.skillList&&0<this.skillList.length&&(this.atttype=this.skillList[0],this.skillList.shift());Fightmodule.leavefight();Movemodule.stopmove();lockingID&&GameUtil.delhalo(lockingID);var f=GameUtil.checkUseCiSha()?2:1;var a=Objectcontrol.self_obj;if(a){var b=ObjectManage.getStormObject(a,a.grid,
f,1);Fightmodule.useattack(a,b?b:a,0,a.cur_dir,f)}return!0}return!1};e.prototype.fight=function(f){if(roledielock||Actionlock||player_stalls||this.self_obj&&this.self_obj.obj_hores)return!1;if(this.usefightrule()&&this.move_call_result){if(Laya.Browser.now()-attack_call_time<this.getattfasttime())return this.use_attack=!0,!1;if(GameUtil.hasmining(this.self_obj.grid,this.self_obj.cur_dir)&&8!=this.self_obj.cur_state)this.controltype=5,this.mining();else{this.use_attack=!1;this.controltype=3;this.skillList&&
0<this.skillList.length&&(this.atttype=this.skillList[0],this.skillList.shift());if(1==this.self_obj.paralysis_state&&0==GameUtil.checkParalysisM2(E_PARALYSISACTIVE.ATTACK))return!1;Fightmodule.startattack(this.atttype,f)}return!0}this.use_skill||f||(this.use_attack=!0);return!1};e.prototype.autolocking=function(f){f==playerID||null!=lockingID&&0!=lockingID||0!=autohookstate||GlobalCfglist.notLock||(f=ObjectManage.findobject(f))&&!f.is_die&&GameUtil.addhalo(f)};e.prototype.useskillrule=function(){if(this.self_obj.action_over&&
!this.self_obj.is_die){if(1==this.self_obj.paralysis_state)return 1==GameUtil.checkParalysisM2(E_PARALYSISACTIVE.MAGIC)?!0:!1;if(1==this.self_obj.cur_state||6==this.self_obj.cur_state||5<this.self_obj.cur_frame_index)return!0}return!1};e.prototype.getskillpos=function(f,a,b){var d=new Laya.Point,n=ObjectManage.findobject(lockingID);if(a)d=a;else if(n&&!n.is_die&&GameUtil.checkFastLightLockRelease(f))d.x=n.target_pos.x?n.target_pos.x:n.grid.x,d.y=n.target_pos.y?n.target_pos.y:n.grid.y;else if(GameUtil.isselfskill(f))d=
GameUtil.getMovePoint(this.self_obj.grid,this.self_obj.cur_dir,5);else if(a=ObjectManage.findlateobject(this.self_obj.grid,8))d.x=a.target_pos.x?a.target_pos.x:a.grid.x,d.y=a.target_pos.y?a.target_pos.y:a.grid.y,GameUtil.addhalo(a);0==d.x&&0==d.y&&(d=GameUtil.getMovePoint(this.self_obj.grid,this.self_obj.cur_dir,6));25==f&&(1E3>b||1500<b)&&(d.x=this.self_obj.cur_dir,d.y=0);5!=f&&13!=f&&23!=f&&24!=f&&15!=f&&28!=f&&16!=f&&29!=f&&43!=f&&53!=f&&38!=f||!(1E3>b||1500<b)||(d.x=this.self_obj.grid.x,d.y=this.self_obj.grid.y);
return d};e.prototype.useskill=function(f,a,b,d,n){if(0==f||roledielock||Actionlock||player_stalls||null==this.self_obj||this.self_obj.obj_hores)return this.use_skill=!1;if(this.useskillrule()){skill_count_cd=Skillmodule.checklegal(f,a);var c=1E3<=a&&1500>=a?Skillmodule.findCustomSkill(a,d):Skillmodule.getskilldata(f,a);if(!c&&!c)return!1;null==c.use_time&&(c.use_time=0);if(1==(Laya.Browser.now()-c.use_time>skill_count_cd&&Laya.Browser.now()-G_SkillTime>g_ClientConfig.SpellIntervalTime)){if(g_ClientConfig.boDisabledDoubleFireHitSkill&&
24==f&&26==a&&cdTimerStart)return;G_SkillTime=Laya.Browser.now();c.use_time=Laya.Browser.now();this.self_obj.grid.x=Math.floor(this.self_obj.x/48);this.self_obj.grid.y=Math.floor(this.self_obj.y/32);b=this.getskillpos(f,b,a);Fightmodule.AttOff_list=[];GlobalCfglist.d_autoskill_3&&2==g_ClientConfig.Params[4]&&((4==f||46==f&&38==a)&&Gameconfig.autoChangePoison(),10!=f&&28!=f&&16!=f&&17!=f&&11!=f&&12!=f&&15!=f||Gameconfig.autoChangeFu());this.useskill_id=f;this.useskill_pos=b;this.useskill_type=a;activate_skilluse=
0;activate_skillpos=null;this.use_skill=!1;if(13==f||23==f||24==f||43==f||53==f||38==f&&43==a){this.controltype=3;switch(f){case 24:Gameconfig.lastFireHitTime=Laya.Browser.now();break;case 38:Gameconfig.lastLYTime=Laya.Browser.now();break;case 43:Gameconfig.lastKTZTime=Laya.Browser.now();break;case 53:Gameconfig.lastZRTime=Laya.Browser.now()}43==f&&41==a&&Skillmodule.playself(this.useskill_id,this.useskill_type,this.self_obj,this.useskill_pos,null,d)}else{this.controltype=2;if(void 0==d)for(var h=
0;h<g_UserMagicList.length;h++){var m=g_UserMagicList[h];f==m.Def.btEffect&&a==m.Def.wMagicId&&(d=m.Level)}c.isCustomSkill?Skillmodule.playCustomSkillForTarget(c,this.self_obj,this.useskill_pos,void 0==d?0:d):6!=this.useskill_id&&8!=this.useskill_type&&Skillmodule.playself(this.useskill_id,this.useskill_type,this.self_obj,this.useskill_pos,null,d)}25!=f&&6!=this.useskill_id&&8!=this.useskill_type?(this.self_obj.currMagicId=a,Skillmodule.sendMsg(f,b,this.self_obj.cur_dir,a,d,n)):this.useFuriousCollisionSkillHandle(f,
b,a,d);return!0}}else this.use_attack||(this.use_skill=!0),!autohookstate||15!=f&&28!=f||(AutoHookmodule.summontime=0);return!1};e.prototype.useFuriousCollisionSkillHandle=function(f,a,b,d){var n=this;g_furious_collision_ing=g_furious_collision_end=!1;setTimeout(function(){6!=f&&8!=b&&(g_furious_collision_ing=!0);Skillmodule.sendMsg(f,a,n.self_obj.cur_dir,b,d)},35)};e.prototype.isAutoAuxiliaryUseSkill=function(f){return-1!=[14,15,31,2,58].indexOf(f)&&autohookstate?!0:!1};e.prototype.playskill=function(){};
e.prototype.mining=function(){if(this.self_obj&&5==this.controltype){var f=ItemMgr.getInstance().FindUseItemByPos(U_WEAPON);f&&f.s&&6==f.s.StdMode&&19==f.s.Shape&&(Sendmessage.sendRoleMessage(CM_HEAVYHIT,this.self_obj.grid.x,this.self_obj.grid.y,this.self_obj.cur_dir),this.self_obj.changestate(null,8,null,!1,"play_by_mining"))}};e.prototype.autodrop=function(f){};return e}(),objectmanage=function(){function e(){this.object_list=[];this.str_attover="play_over_test";this.str_stand="play_by_stand";this.str_dieeff=
"play_by_die_effects";this.str_mining="play_by_mining";this.move_time=0;Laya.stage.on(this.str_attover,this,this.playover);Laya.stage.on(this.str_stand,this,this.playtostand);Laya.stage.on(this.str_dieeff,this,this.dieeffects);Laya.stage.on(this.str_mining,this,this.callmining);Laya.stage.on("gm_show_role",this,this.gmshowrole);Laya.stage.on("EVENT_START_OBJECT_HB",this,this.startHB);this.obj_load_res=[];this.lock_list=[];this.lock_idx=0;this.resloadlist=[];this.play_count=0;this.shy_a=new Laya.Point;
this.shy_b=new Laya.Point;this.fps_time=0;this.fps_list=[];this.collisionCount=0}var f=e.prototype;f.startHB=function(){Laya.timer.clear(this,this.SkinToHeartbeat);Laya.timer.loop(20,this,this.SkinToHeartbeat)};f.analyspeed=function(a,b,d,n){return 3==b?7==a||8==a||6==a?(a=Math.floor(d*(1E3-g_ClientConfig.nAttackSpeed)/1E3),b=Math.floor(n.attsp/100*a),d-a+b+(void 0!=n.realSpeed?n.realSpeed:rolespeed)*g_ClientConfig.btItemSpeed/6):11==a?(a=Math.max(0,d-Math.floor(d*n.skillsp/100)),b=Math.floor(a*g_ClientConfig.nSpellSpeed/
1E3),d-a+b):Math.floor(d*g_ClientConfig.nMoveSpeed/1E3):0};f.SkinToHeartbeat=function(){var a=0;null!=g_ClientConfig&&(a=null!=g_ClientConfig.nMoveSpeed?g_ClientConfig.nMoveSpeed:1E3);a=Math.max(1,100-Math.floor(100*a/1E3))-g_rolemovespeed;a-=a%10;var b=(this.play_count+=20)>a;b&&(this.play_count=0);for(var d=this.object_list.length-1;0<=d;d--){var n=this.object_list[d];if(n&&n.data&&null!=n.obj_frames&&0!=n.obj_frames.length)if((1==n.cur_state||6==n.cur_state)&&0<n.msg_list.length)n.playorder();
else if(n.is_moveing){var c=Math.floor(a/20)+1,h=c*n.obj_frames.length;n.is_backstep&&(h=Math.floor(h/2));GlobalCfglist.smooth&&(n.grid.x!=n.target_pos.x||n.grid.y!=n.target_pos.y)&&n.trans_count<h&&(this.shy_a.setTo(48*n.grid.x,32*n.grid.y),this.shy_b.setTo(48*n.target_pos.x,32*n.target_pos.y),this.shy_a.x==this.shy_b.x&&(this.shy_a.x+=1),h=GameUtil.equalcoordinate(this.shy_a,this.shy_b,h,++n.trans_count),n.x=h.x,n.y=h.y,n.selfname.x=n.x,n.selfname.y=n.y,n.setPosOfObjectNameAndBlood(),n.data&&n.data.record==
playerID&&Mapmodule.root&&(Mapmodule.root.x=-(n.x*Mapmodule.root.scaleX-browser_width/2)-20,Mapmodule.root.y=-(n.y*Mapmodule.root.scaleY-browser_height/2+20)),this.collisionGhostHandler(n),this.collisionPoint&&this.collisionCount++);if(b||n.super_time)n.trans_count<c&&(n.trans_count+=c-n.trans_count),n.play_time=Laya.timer.currTimer,n.updateselfskin(!0)}else{c=n.ftime;switch(n.cur_state){case 1:c=200;break;case 2:c=80;break;case 3:c=100;break;case 4:c=100;break;case 5:c=100;break;case 6:c=200;break;
case 7:c=90;break;case 8:c=80;break;case 9:c=90;break;case 10:c=60;break;case 11:c=50;break;case 12:c=300;break;case 13:c=60;break;case 14:c=120}c=Math.max(1,c-this.analyspeed(n.cur_state,n.type,c,n));3!=n.type||1!==n.cur_state||0!==n.cur_frame_index||2!==n.lastState&&3!==n.lastState||(c=Math.min(80,c));h=Laya.timer.currTimer;var m=h-attack_call_time,g=Objectcontrol.getattfasttime(n);if(h-n.play_time>=c||n.data.record==playerID&&m>g&&m<g+50||n.super_time&&n.data&&n.data.record!=playerID||3==n.type&&
n.data.record==playerID&&moveing||this.isFuriousCollisionEnd())1===n.cur_state&&(n.lastState=1),n.play_time=h,n.updateselfskin(!1)}}};f.isFuriousCollisionEnd=function(){return g_rocker_moving&&0==g_furious_collision_ing&&1==g_furious_collision_end?(g_furious_collision_end=!1,!0):!1};f.collisionGhostHandler=function(a){this.collisionPoint&&a.data&&this.collisionPoint.objID==a.data.record&&(this.collisionPoint.x==a.grid.x&&this.collisionPoint.y==a.grid.y&&(this.collisionPoint=this.gameScene=null,this.collisionCount=
0),0==this.collisionCount%5&&this.drawCurSelfSkin(a.x,a.y,a.getCurLooksResData(),this.gameScene),5<this.collisionCount&&(this.collisionCount=0))};f.checkFps=function(){var a=Laya.Browser.now();0==this.fps_time&&(this.fps_time=a);this.fps_list.push(a-this.fps_time);50==this.fps_list.length&&(this.fps_list.sort(),30<=this.fps_list[25]&&Laya.stage.event("setSimple"),this.fps_list=[]);this.fps_time=a};f.isloadres=function(a,b,d,n,c){for(var h=0;h<this.obj_load_res.length;h++){var m=this.obj_load_res[h];
if(m._race==a&&m._wappr==b&&m._state==d&&m._type==n&&m._off==c)return!0}return!1};f.callmining=function(a){a.changestate(null,6,null,!1);if(a&&a.data.record==playerID)Laya.timer.once(Math.max(200,MinLevelFastTime-g_ClientConfig.nAttackSpeed),this,function(){Objectcontrol.mining()})};f.dieeffects=function(a){if(null!=a||null!=a.skin_feature)18==a.skin_feature.wRaceImg&&27==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon3/",2860,2869,100,!1,!0):15==a.skin_feature.wRaceImg&&21==a.skin_feature.wAppr?
Animationmodule.playframe(!0,a,"data/mon3/",340,359,100,!1,!0):40==a.skin_feature.wRaceImg&&205==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon5/",341,348,100,!1,!0):109==a.skin_feature.wRaceImg&&325==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon33/",2770,2779,160,!1,!0):109==a.skin_feature.wRaceImg&&326==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon33/",2880,2889,160,!1,!0):112==a.skin_feature.wRaceImg&&336==a.skin_feature.wAppr?Animationmodule.playframe(!0,
a,"data/mon34/",3300,3305,200,!1,!0):112==a.skin_feature.wRaceImg&&337==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon34/",3360,3365,200,!1,!0):165==a.skin_feature.wRaceImg&&376==a.skin_feature.wAppr&&Animationmodule.playframe(!0,a,"data/mon38/",3091,3099,200,!1,!0)};f.attackeffect=function(a,b,d){if(a.grid){var n=new Laya.Point(48*a.grid.x,32*a.grid.y);if(24==d.wDress&&16==d.wRace){var c=1445+10*b,h=c+5-1;(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon3/",c,h,100,!1,!0))&&
d.pos(n.x,n.y)}else if(140==d.wDress&&33==d.wRace)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon15/",100,109,100,!1,!0))&&d.pos(n.x,n.y);else if(31==d.wDress&&20==d.wRace)c=1800+10*b,h=c+7-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon4/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(55==d.wRace)c=820+10*b,h=c+5-1,setTimeout(function(){var r=Animationmodule.playframe(!0,Mapmodule.root,"data/mon18/",c,h,100,!1,!0);r&&r.pos(n.x,n.y)},300);else if(34==d.wDress&&21==d.wRace)c=1900+10*
b,h=c+6-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon4/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(63==d.wDress&&49==d.wRace)c=1680+10*b,h=c+8-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon7/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(140==d.wDress&&49==d.wRace)c=1680+10*b,h=c+8-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon7/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(206==d.wDress&&71==d.wRace)c=2783+10*b,h=c+3-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon21/",
c,h,200,!1,!0))&&d.pos(n.x,n.y);else if(166==d.wDress&&33==d.wRace)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon15/",100,109,100,!1,!0))&&d.pos(n.x,n.y);else if(182==d.wDress&&62==d.wRace)c=860+10*b,h=c+6-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon19/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(221==d.wDress&&78==d.wRace)c=3442+10*b,h=c+4-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon22/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(443==d.wDress&&78==d.wRace)c=3442+
10*b,h=c+4-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon22/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(449==d.wDress&&78==d.wRace)c=3442+10*b,h=c+4-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon22/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(320==d.wDress&&101==d.wRace)c=352+10*b,h=c+4-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(325==d.wDress&&109==d.wRace)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",2750,
2759,100,!1,!0))&&d.pos(n.x,n.y);else if(326==d.wDress&&109==d.wRace)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",2860,2869,100,!1,!0))&&d.pos(n.x,n.y);else if(370==d.wDress&&162==d.wRace)c=430+10*b,h=c+6-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(373==d.wDress&&165==d.wRace)c=1760+10*b,h=c+5-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(375==d.wDress&&165==d.wRace)c=
2573+10*b,h=c+3-1,Laya.timer.once(300,this,function(){var r=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0);r&&r.pos(n.x,n.y)});else if(376==d.wDress&&165==d.wRace)c=3013+10*b,h=c+3-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(377==d.wDress&&165==d.wRace)c=3530+10*b,h=c+6-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(3710==d.wDress&&165==d.wRace){d=5090+10*b;
var m=5173+10*b,g=m+3-1;(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",d,d+10-1,100,!1,!0))&&d.pos(n.x,n.y);Laya.timer.once(400,this,function(){var r=GameUtil.getMovePoint(a.grid,b,1),u=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",m,g,100,!1,!0);u&&u.pos(48*r.x,32*r.y)})}else if(3711==d.wDress&&165==d.wRace)c=5693+10*b,h=c+3-1,Laya.timer.once(200,this,function(){var r=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0);r&&r.pos(n.x,n.y)});else if(3713==
d.wDress&&165==d.wRace)c=7340+10*b,h=c+10-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(340==d.wDress&&113==d.wRace)c=503+10*b,h=c+7-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon35/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(263==d.wDress&&151==d.wRace)c=1610+10*b,h=c+6-1,(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon27/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if(524==d.wDress&&78==d.wRace)c=3442+10*b,h=c+4-1,(d=Animationmodule.playframe(!0,
Mapmodule.root,"data/mon22/",c,h,100,!1,!0))&&d.pos(n.x,n.y);else if((904==d.wDress||d.wDress)&&83==d.wRace||(341==d.wDress||342==d.wDress)&&114==d.wRace){var l=function(){if(2<++q.use_num)Laya.timer.clear(q,l);else for(var r=4+Math.floor(100*Math.random()%4),u=0;u<r;u++){var v=230+10*Math.floor(100*Math.random()%6),w=v+5-1,z=new Laya.Point(a.grid.x+(8-Math.floor(100*Math.random()%16)),a.grid.y+(8-Math.floor(100*Math.random()%16)));(v=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",v,w,
100,!1,!0))&&v.pos(48*z.x,32*z.y)}};if(8<Math.floor(10*Math.random()+1)){d=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",60,80,100,!1,!0);var p=new Laya.Point(a.grid.x,a.grid.y);d&&d.pos(48*p.x,32*p.y)}var q=this;this.use_num=0;Laya.timer.loop(500,q,l)}}};f.levelup=function(a){if(a=this.findobject(a))Animationmodule.playframe(!0,a.sp,"data/prguse2/",110,124,100,!1,!0),GameUtil.PlayMusicFormat(S_ROLE_LEVEL),a.txt_name.text===g_RoleName&&g_RoleLevelUp++};f.raiseKL=function(a){var b=Animationmodule.playframe(!0,
Mapmodule.root,"data/mon4/",2860,2869,100,!1,!0);b&&b.pos(48*a.grid.x,32*a.grid.y)};f.attback=function(){if(0!=lockingID)Fightmodule.attackcallback();else{var a=this.findobject(playerID);a&&a.changestate(null,1,null,!0)}};f.playover=function(a){null!=a&&1!=a.type&&(1==a.type?a.changestate(null,1,null,!1):3==a.type&&(a.data.record==playerID&&(Objectcontrol.use_attack=!1,Objectcontrol.use_skill=!1),a.changestate(null,6,a.cur_dir,!1)))};f.playtostand=function(a){a.changestate(null,1,null,!0)};f.newobject=
function(a){if(null==a.fea)return null;var b=THumFeature(a.fea.buffer).wRace;if(0==b||1==b||150==b){var d=new object;d.initdata(a,3);a.record==playerID&&(b=CodeUtil._LOBYTE(a.series),d.changestate(a,1,b,!0));d.updateObjectBlood(1,1,a.record==playerID,1,1,!0)}else d=new object,50!=b?(33==a.ident&&(d.is_die=!0),b=1,d.updateObjectBlood(1,1,a.record==playerID,1,1,!1)):b=2,d.initdata(a,b);this.object_list.push(d);Laya.stage.event("CREATE_OBJECT",d);3==d.type&&d.data.record!=playerID&&(d.sp&&(d.sp.visible=
!GlobalCfglist.hidePlayer),d.obj_wing&&(d.obj_wing.visible=!GlobalCfglist.hidePlayer));1==d.type&&(d.sp.visible=!GlobalCfglist.hideMonster);return d};f.mouseClickCheck=function(){for(var a=0;a<this.object_list.length;++a){var b=this.object_list[a];if((null!=b._style||null!=b.sp)&&b.data&&b.sp.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))return!0}return!1};f.checkInArea=function(a,b,d){if(d&&!(0>=d.length)){var n=new Laya.Point(d[0],d[1]);a=a.localToGlobal(n);if(!(b.x<a.x||b.x>a.x+d[2]||b.y<a.y||
b.y>a.y+d[3]))return!0}};f.clickNPC=function(a,b){for(var d=0;d<this.object_list.length;++d){var n=this.object_list[d];if(!(null==n._style&&null==n.sp||1==n.type&&n.OwnerID==playerID)&&n.data&&n.sp.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))if(2==n.type){var c=this.NpcClickHandle(n,b,a,d);if(c)return c}else if(c=this.clickObjHandle(n,b,a))return n.type}return!1};f.NpcClickHandle=function(a,b,d,n){if(this.checkInArea(a.txt_name,new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),a.npcClickAreaData))return this.clickObjHandle(a,
b,d);a=this.object_list;for(var c=n+1<a.length?n+1:a.length-1;c<a.length;c++)if(n=a[c],2!=n.type&&n.sp.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))return this.clickObjHandle(n,b,d)};f.checkOtherOrMonsterHide=function(a){if(1==a.type&&GlobalCfglist.hideMonster||3==a.type&&GlobalCfglist.hidePlayer&&a.data.record!=playerID)return!0};f.clickObjHandle=function(a,b,d){if(!this.checkOtherOrMonsterHide(a))if(a.data.record!=playerID&&a.visible){if((!a.is_die||11==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&
160==a.skin_feature.wAppr||11==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&161==a.skin_feature.wAppr||19==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&43==a.skin_feature.wAppr||19==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&70==a.skin_feature.wAppr||16==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&24==a.skin_feature.wAppr||52==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&39==a.skin_feature.wAppr||19==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&113==a.skin_feature.wAppr||
52==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&93==a.skin_feature.wAppr)&&Laya.loader.getRes(a.fl_name))return Laya.stage.event("ClickNPC",[a,d,b]),a.type}else ObjectManage.findobject(a.data.record).data.fea.buffer[13]&&GameApi.ShowMyShop(!0)};f.filterlockin=function(a){for(var b=0;b<lockingList.length;++b){var d=this.findobject(lockingList[b]);if(d&&d.data&&d.data.record==a)return!0}return!1};f.findlateobject=function(a,b,d){d||(d=1);for(var n=null,c=this.findobject(playerID).txt_name.text,
h=0;h<this.object_list.length;++h){var m=this.object_list[h];if(!(m.data&&m.data.record==playerID||m.txt_name&&""==m.txt_name.text||!m.txt_name||m.txt_name&&-1!=m.txt_name.text.indexOf(c)||m.txt_name&&-1!=m.txt_name.text.indexOf("(")||m.OwnerID&&0!=m.OwnerID)){if(m.data&&1==m.type){var g=TMonFeature(m.data.fea.buffer);if(71==g.wAppr)continue;if(0==g.wAppr)continue}m.data&&-1!=Fightmodule.AttOff_list.indexOf(m.data.record)||(g=m.txt_name.text&&-1!=m.txt_name.text.indexOf("\n")?m.txt_name.text.split(/[\n/]/)[1]:
m.txt_name.text,autohookstate&&g&&Gameconfig.monsterCheck(g)||!(m.type==d||3==m.type&&m.skin_feature&&150==m.skin_feature.wRace)||m.is_die||(g=Math.floor(a.distance(m.grid.x,m.grid.y)),g<=b&&(b=g,n=m)))}}return n};f.getStormObject=function(a,b,d,n){n||(n=1);b=this.findobject(playerID).txt_name.text;for(var c=0;c<this.object_list.length;++c){var h=this.object_list[c];if(!(h.data&&h.data.record==playerID||h.txt_name&&""==h.txt_name.text||!h.txt_name||h.txt_name&&-1!=h.txt_name.text.indexOf(b)||h.txt_name&&
-1!=h.txt_name.text.indexOf("(")||h.OwnerID&&0!=h.OwnerID)){if(h.data&&1==h.type){var m=TMonFeature(h.data.fea.buffer);if(71==m.wAppr)continue;if(0==m.wAppr)continue}if(!h.data||-1==Fightmodule.AttOff_list.indexOf(h.data.record))if(m=h.txt_name.text&&-1!=h.txt_name.text.indexOf("\n")?h.txt_name.text.split(/[\n/]/)[1]:h.txt_name.text,!(autohookstate&&m&&Gameconfig.monsterCheck(m))&&(h.type==n||3==h.type&&h.skin_feature&&150==h.skin_feature.wRace)&&!h.is_die&&GameUtil.checkAttackDirObjOnRange(a.cur_dir,
a.grid,h.grid,d))return h}}return null};f.findlateobject1=function(a,b,d){d||(d=1);var n=this.findobject(playerID);if(n){for(var c=0;c<this.object_list.length;++c){var h=!0,m=this.object_list[c];if(!(m.data&&m.data.record==playerID||m.txt_name&&""==m.txt_name.text||!m.txt_name||m.txt_name&&-1!=m.txt_name.text.indexOf(n.txt_name.text)||m.txt_name&&-1!=g_babyList.indexOf(m.record)||m.OwnerID&&0!=m.OwnerID)){if(m.data&&1==m.type){var g=TMonFeature(m.data.fea.buffer);if(71==g.wAppr)continue;if(0==g.wAppr)continue}if(!m.data||
-1==Fightmodule.AttOff_list.indexOf(m.data.record)){if(m.txt_name&&m.txt_name.nametites)var l=m.txt_name.nametites[0];if(!(autohookstate&&l&&Gameconfig.monsterCheck(l))){if(3==m.type){if("[\u592b\u59bb\u653b\u51fb]"==G_att_type){g=GameUtil.getPureName(n);if(m.txt_name.cur_name)var p=m.txt_name.cur_name;g&&p&&""!=p&&(-1!=p.indexOf(g+"\u7684\u8001\u516c")||-1!=p.indexOf(g+"\u7684\u8001\u5a46"))&&(h=!1)}else if("[\u5e08\u5f92\u653b\u51fb]"==G_att_type){g=GameUtil.getPureName(n);if(m.txt_name.cur_name)var q=
m.txt_name.cur_name;g&&q&&""!=q&&(-1!=q.indexOf(g+"\u7684\u5e08\u5085")||-1!=q.indexOf(g+"\u7684\u5f92\u5f1f"))&&(h=!1)}else if("[\u7ec4\u961f\u653b\u51fb]"==G_att_type){g=RelationManager.getInstance().teamGropList;for(var r=0;r<g.length;r++){var u=g[r];u&&-1<m.txt_name.text.indexOf(u.name)&&(h=!1)}}else if("[\u884c\u4f1a\u653b\u51fb]"==G_att_type){var v,w;n.guildName&&(v=n.guildName.substring(0,n.guildName.indexOf("[")));m.guildName&&(w=m.guildName.substring(0,m.guildName.indexOf("[")));v&&w&&""!=
v&&v==w&&(h=!1)}else"[\u7ea2\u540d\u653b\u51fb]"!=G_att_type&&"[\u548c\u5e73\u653b\u51fb]"==G_att_type&&(h=!1);if(!h)continue}(m.type==d||3==m.type&&m.skin_feature&&150==m.skin_feature.wRace)&&!m.is_die&&Math.floor(a.distance(m.grid.x,m.grid.y))<=b&&this.lock_list.push(m)}}}}a=this.checkLock();this.lock_list=[];return a}};f.checkLock=function(){var a=this.findobject(playerID);this.lock_list.sort(function(d,n){return a.grid.distance(d.grid.x,d.grid.y)-a.grid.distance(n.grid.x,n.grid.y)});for(var b=
0;b<this.lock_list.length;b++){if(b==this.lock_idx)return this.lock_idx++,this.lock_list[b];if(b==this.lock_list.length-1&&this.lock_list&&this.lock_list[0])return this.lock_idx=1,this.lock_list[0]}this.lock_idx=0;return null};f.resetLockID=function(){this.lock_idx=0};f.findobjectforname=function(a){for(var b=0;b<this.object_list.length;++b){var d=this.object_list[b];if(d&&d.txt_name&&d.txt_name.text==a)return d}return null};f.findobject=function(a){for(var b=0;b<this.object_list.length;++b){var d=
this.object_list[b];if(d&&d.data&&d.data.record==a)return d}return null};f.del2object=function(a){for(var b=0;b<this.object_list.length;b++)if(this.object_list[b]==a){this.object_list[b].getChildByName("halo")&&(lockingID=0);this.object_list[b].clearstart();t.msg_list&&(t.msg_list=null);this.object_list[b].destroy();this.object_list.splice(b,1);break}};f.delobject=function(a){if(null!=a)for(var b=0,d=this.object_list.length;b<d;b++){var n=this.object_list[b];if(n&&n.data&&n.data.record==a){if(d=n.getChildByName("halo"))lockingID=
0,Laya.stage.event("del_unlock_icon"),Laya.stage.event("show_target_head",[!1]);n.clearstart();n.msg_list&&(n.msg_list=null);n.destroy();this.object_list.splice(b,1);break}}else for(b=this.object_list.length-1;0<=b;b--)if(n=this.object_list[b]){if(-1!=a){if(n.data&&n.data.record==playerID)continue;if(n._parent&&n._parent.data&&n._parent.data.record==playerID)continue}if(d=n.getChildByName("halo"))lockingID=0,Laya.stage.event("del_unlock_icon");n.msg_list&&(n.msg_list=null);n.clearstart(!0);n.clearRes();
n.destroy();this.object_list.splice(b,1)}};f.hasobstacleID=function(a,b){a=GameUtil.getMovePoint(a,b,1);for(b=0;b<this.object_list.length;++b){var d=this.object_list[b];if(!(d.data&&d.data.record==playerID||2!=d.type&&1!=d.type&&3!=d.type||d.is_die||a.x!=d.grid.x||a.y!=d.grid.y||d.is_die))return d}return null};f.is_in_safezone=function(a){for(var b=0;b<Mapdata.safeZone.length;++b){var d=Mapdata.safeZone[b];if(d[0]==Mapdata.cur_id&&5<=d.length&&a.x>=d[1]-d[4]&&a.x<=parseInt(d[1])+parseInt(d[4])&&a.y>=
d[2]-d[4]&&a.y<=parseInt(d[2])+parseInt(d[4]))return!0}return!1};f.boCanAcross=function(a,b){return 2==a&&!g_boNoAcrossNpc||1==a&&!g_boNoAcrossMon||3==a&&!g_boNoAcrossHuman};f.obstructRule=function(a,b,d){var n=b[0].x==a.x&&b[0].y==a.y,c=b[1].x==a.x&&b[1].y==a.y;a=b[2].x==a.x&&b[2].y==a.y;b=!1;switch(d){case 2:b=n;break;case 3:b=n||c;break;case 4:b=n||c||a}return b};f.useAnticipation=function(a,b,d){return this.obstructRule(a.grid,b,d)||this.obstructRule(a.target_pos,b,d)?!0:!1};f.has2obstacle=function(a,
b,d){var n=GameUtil.getMovePoint(a,b,d-1);if(g_boIsSafeRun&&this.is_in_safezone(n))return!1;n=[];n.push(GameUtil.getMovePoint(a,b,1));n.push(GameUtil.getMovePoint(a,b,2));n.push(GameUtil.getMovePoint(a,b,3));for(a=0;a<this.object_list.length;++a)if(b=this.object_list[a],!(b.data&&b.data.record==playerID||b.is_die||!autohookstate&&this.boCanAcross(b.type)&&3==d)&&this.useAnticipation(b,n,d))return!0;return!1};f.hasobstacle=function(a,b,d,n){var c=!1,h=!0,m=!0,g=!0,l=GameUtil.getMovePoint(a,b,1),p=
GameUtil.getMovePoint(a,b,2);b=GameUtil.getMovePoint(a,b,3);a=this.is_in_safezone(a)&&this.is_in_safezone(p);if(1!=d&&g_boIsSafeRun&&a)return!0;new Laya.Point;for(var q=0;q<this.object_list.length;++q){var r=this.object_list[q];if(!(r.data&&r.data.record==playerID||r.is_die)){if(l.x==r.grid.x&&l.y==r.grid.y||l.x==r.target_pos.x&&l.y==r.target_pos.y)h=1!=d&&this.boCanAcross(r.type,a)?!0:n&&1!=n&&this.boCanAcross(r.type,a)?!0:!1;if(p.x==r.grid.x&&p.y==r.grid.y||p.x==r.target_pos.x&&p.y==r.target_pos.y)m=
1!=d&&this.boCanAcross(r.type,a)?!0:!1;if(b.x==r.grid.x&&b.y==r.grid.y||b.x==r.target_pos.x&&b.y==r.target_pos.y)1!=d&&this.boCanAcross(r.type,a)?result13=!0:g=!1}}switch(d){case 1:c=h;break;case 2:c=h&&m;break;case 3:c=h&&m&&g}return c};f.hasobstacle_ktz=function(a,b,d){var n=!1;a=GameUtil.getMovePoint(a,b,d);for(b=0;b<this.object_list.length;++b)d=this.object_list[b],d.data&&d.data.record==playerID||2!=d.type&&1!=d.type&&3!=d.type&&d.is_die||a.x!=d.grid.x||a.y!=d.grid.y||d.is_die||(n=!0);return n?
!0:n};f.posHasObject=function(a,b,d){a=GameUtil.getMovePoint(a,b,d);b=this.findobject(playerID).txt_name.text;for(d=0;d<this.object_list.length;++d){var n=this.object_list[d];if(!(n.is_die||n.data&&n.data.record==playerID||n.txt_name&&""==n.txt_name.text||n.txt_name&&-1!=n.txt_name.text.indexOf(b)||n.txt_name&&-1!=n.txt_name.text.indexOf("("))){if(n.data){var c=TMonFeature(n.data.fea.buffer);if(71==c.wAppr)continue;if(0==c.wAppr)continue}if(n.grid.x==a.x&&n.grid.y==a.y)return n}}};f.setObjectMaxBlood=
function(a,b){(a=this.findobject(a))&&a.Blood&&a.Blood.SetMaxBloodNum(b)};f.setObjectCurBlood=function(a,b){(a=this.findobject(a))&&a.Blood&&a.Blood.SetCurBloodNum(b)};f.setObjectName=function(a,b,d){if(a=this.findobject(a))if(a.changename(b,d),d=this.findobject(playerID)){a="("+d.txt_name.text+")";var n=d.txt_name.text+"\u7684\u5b9d\u5b9d";d&&d.txt_name&&(-1!=b.indexOf(a)||-1!=b.indexOf(n))&&Laya.stage.event("show_petBtn")}};f.updateObjectHp=function(a,b,d,n,c,h){var m=this.findobject(d);m&&m.m_Abil&&
(m.m_Abil.HP=0!=b?b:m.m_Abil.HP,m.m_Abil.MaxHP=a,m.Blood&&(m.Blood.SetMaxBloodNum(a),m.updateObjectBlood(a,b,d==playerID,n,c,h)))};f.SetAttribute=function(a,b){if(a=this.findobject(a))a.m_Abil=b};f.GetAttr=function(a){return(a=this.findobject(a))?a.m_Abil:null};f.visibleHpSpr=function(a,b){(a=this.findobject(a))&&a.visibleObjectBlood(b)};f.setObjectNameColor=function(a,b){if(a=this.findobject(a))a.txt_Img&&(a.txt_Img.color=Get2RGB(b)),a.txt_name&&""!=a.txt_name.text&&(a.txt_name.color=Get2RGB(b),
a.txt_name.typeset())};f.showChatTxt=function(a,b){(a=this.findobject(a))&&a.showChatTxt(b)};f.setNamePos=function(a,b){a.txt_name&&(a.txt_name.visible=b);3===a.type&&a.txt_Img&&(a.txt_Img.visible=!0===b&&!1===GlobalCfglist.ShowName,a.txt_name.y=a.txt_Img.visible?a.txt_name.y+a.txt_Img.height:-25)};f.ReObjectVisible=function(a){for(var b=0;b<this.object_list.length;++b){var d=this.object_list[b];d&&d.txt_name&&(1==a&&1==d.type&&0==d.OwnerID?this.setNamePos(d,GlobalCfglist.nameshow1):2==a&&2==d.type?
this.setNamePos(d,GlobalCfglist.nameshow2):3==a&&3==d.type?this.setNamePos(d,GlobalCfglist.nameshow3):4==a&&1==d.type&&0<d.OwnerID&&(d.txt_name.visible=GlobalCfglist.nameshow4))}};f.ShowName=function(){for(var a=0;a<this.object_list.length;++a)if(3==this.object_list[a].type&&this.object_list[a].txt_Img){this.object_list[a].txt_Img.visible=!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName;if(!0===GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName){var b=this.object_list[a].txt_name;b.text=
b.lines[b.lines.length-1]}else!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName&&(b=this.object_list[a].txt_name,b.update(b.cur_name,b.color,this.object_list[a]));this.object_list[a].txt_name.y=this.object_list[a].txt_Img.visible?this.object_list[a].txt_Img.x+this.object_list[a].txt_Img.height-25:-25}};f.ShowMonsterName=function(){for(var a=0;a<this.object_list.length;a++)1==this.object_list[a].type&&this.object_list[a].txt_Img&&(this.object_list[a].txt_Img.visible=G_SHOW_MONSTER_NAME,this.object_list[a].txt_name.visible=
G_SHOW_MONSTER_NAME)};f.ShowTitle=function(){for(var a=0;a<this.object_list.length;++a)if(this.object_list[a]&&3==this.object_list[a].type){this.object_list[a].title&&(this.object_list[a].title.visible=!GlobalCfglist.ShowTitle);for(var b=0;6>b;b++){var d=this.object_list[a].getChildByName("icongif"+b),n=this.object_list[a].getChildByName("humicon"+b);d&&(d.visible=!GlobalCfglist.ShowTitle);n&&(n.visible=!GlobalCfglist.ShowTitle)}}};f.ReObjHpvisible=function(a){for(var b=0;b<this.object_list.length;++b)this.object_list[b].visibleObjectBlood(a)};
f.ChangeState=function(a,b){var d=this.findobject(a.record),n=0;null==d&&(d=this.newobject(a))&&2!=d.type&&Sendmessage.getObjState(a.record);if(null!=d&&(a.level&&(void 0!=d.level&&null!=d.level&&d.level==a.level||d.addJobAndLevel(a.level),d.level=a.level),null!=a.fea&&(d.boisZmuCount=a.fea.buffer[14],0==d.boisZmuCount&&(d.boisZmuCount=1)),d.is_die&&20<d.die_msg++&&(d.is_die=!1,d.die_msg=0),!d.is_die||SM_ALIVE==a.ident||SM_SKELETON==a.ident)){if(a&&a.str){d.changename(a.str);var c=this.findobject(playerID);
if(c&&d.OwnerID){var h=c.txt_name.text+"\u7684\u5b9d\u5b9d";c&&c.txt_name&&(-1!=a.str.indexOf(g_RoleNameOnly)||-1!=a.str.indexOf(h))&&(-1==g_babyList.indexOf(a.record)&&g_babyList.push(a.record),Laya.stage.event("show_petBtn"))}}if(d.data&&d.data.fea&&d.data.fea.buffer)if(3==d.type){var m=THumFeature(d.data.fea.buffer);GameUtil.WeaponAttackSound(a.ident,m.wWeapon,m.nSex,m.wDress)}else m=TMonFeature(d.data.fea.buffer);switch(a.ident){case SM_BACKSTEP:1==d.type&&156==m.wRaceImg&&(g_diyMonState=1);var g=
CodeUtil._LOBYTE(a.series);d.target_pos.x=a.param;d.target_pos.y=a.tag;d.is_backstep=!0;d.changestate(a,2,g,!1);break;case SM_SPACEMOVE_SHOW:case SM_TURN:if(a.record==playerID&&1==Mapdata.cur_type){d.changestate(a,d.cur_state,null);break}if(0!=(a.state&2))d.changestate(a,7,g,!1,null,null,2),d.ddl_state=a.state;else{1==d.type&&156==m.wRaceImg&&(g_diyMonState=0);g=CodeUtil._LOBYTE(a.series);33==m.wRaceImg&&(g=0);m&&1==d.type&&71!=m.wAppr&&0!=m.wAppr&&37!=m.wAppr&&72!=m.wAppr&&253!=m.wAppr&&260!=m.wAppr&&
261!=m.wAppr&&(b="wav/"+(10*m.wAppr+200)+"-1.wav",g_sound_list&&-1!=g_sound_list.indexOf(b)&&GameUtil.PlayMusicFormat(b));1==d.type&&(m=TMonFeature(d.data.fea.buffer));if(1>d.msg_list.length&&d.obj_frames&&1>d.obj_frames.length||m&&0==m.wAppr)a.record!=playerID&&(d.pos(48*a.param,32*a.tag),d.grid.x=a.param,d.grid.y=a.tag),d.changestate(a,1,g,!0);d.cur_dir!=g&&d.changestate(a,1,g,null);d.ddl_state=0;GameUtil.setbodycolor(d,a.state,a.record)}900==m.wAppr&&99==m.wRaceImg&&(g=CodeUtil._LOBYTE(a.series),
3>g?GameUtil.ApplyDoorState(d.grid.x,d.grid.y,dsClose):GameUtil.ApplyDoorState(d.grid.x,d.grid.y,dsOpen));break;case SM_RUSH:case SM_RUSHKUNG:g=CodeUtil._LOBYTE(a.series);GameUtil.canUseYeMan(d.grid,g,1)&&(Movemodule.end_point=null,Movemodule.stopmove(),this.move_call_result=!0,d.is_springback=!0,d.target_pos.x=a.param,d.target_pos.y=a.tag,d.changestate(a,4,g,!1),this.collisionPoint={objID:d.data.record,x:d.target_pos.x,y:d.target_pos.y},this.gameScene=GameUtil.InstanceOfMem(GameSceneUI));break;case SM_WALK:case SM_100HIT:if(a.record==
playerID)break;1==d.type&&156==m.wRaceImg&&a.ident==SM_WALK&&(g_diyMonState=1);g=CodeUtil._LOBYTE(a.series);(1<Math.abs(d.grid.x-a.param)||1<Math.abs(d.grid.y-a.tag))&&d.updateselfpos(!0);d.target_pos.x=a.param;d.target_pos.y=a.tag;this.targetMoveHandle(a,d);d.changestate(a,2,g,!1);break;case SM_RUN:case SM_HORSERUN:if(a.record==playerID)break;g=CodeUtil._LOBYTE(a.series);(2<Math.abs(d.grid.x-a.param)||2<Math.abs(d.grid.y-a.tag))&&d.updateselfpos(!0);d.target_pos.x=a.param;d.target_pos.y=a.tag;this.targetMoveHandle(a,
d);b=340==m.wAppr&&113==m.wRaceImg?b=9:b=3;d.changestate(a,b,g,!1);break;case SM_POWERHIT:g=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(5,7,d,m,a.record,b);break;case SM_LONGHIT:g=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(13,12,d,m,a.record,b);break;case SM_WIDEHIT:g=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(23,25,d,m,a.record,b);break;case SM_FIREHIT:g=CodeUtil._LOBYTE(a.series);
m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(24,26,d,m,a.record,b);break;case SM_66HIT:g=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(43,95,d,m,a.record,b);break;case SM_TWNHIT:g=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(38,43,d,m,a.record,b);break;case SM_SWORDHIT:g=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(d.grid,g,1);Skillmodule.playself(53,76,d,m,a.record,b);break;case SM_HEAVYHIT:g=CodeUtil._LOBYTE(a.series);
d.changestate(null,8,g,!1,this.str_mining);break;case SM_HIT:case SM_HIT_2:case SM_HIT_3:case SM_HIT_4:case SM_HIT_5:case SM_60HIT:case SM_61HIT:case SM_62HIT:case SM_CRSHIT:case SM_43HIT:case SM_101HIT:case SM_102HIT:case SM_103HIT:case SM_FLYAXE:if(1==d.type&&156==m.wRaceImg){if(a.ident==SM_HIT){g_diyMonState=5;var l=0}else a.ident==SM_HIT_2?(g_diyMonState=6,l=1):a.ident==SM_HIT_3?(g_diyMonState=7,l=2):a.ident==SM_HIT_4?(g_diyMonState=8,l=3):a.ident==SM_HIT_5&&(g_diyMonState=9,l=4);b&&parseInt(b);
for(g=0;g<g_diymonsterlist.length;g++)if((n=g_diymonsterlist[g])&&n.MonAppr==d.skin_feature.wAppr&&null!=b){GameUtil.diyMonSpecilHit(n,d,l,b);break}}m&&1==d.type&&71!=m.wAppr&&0!=m.wAppr&&37!=m.wAppr&&253!=m.wAppr&&260!=m.wAppr&&261!=m.wAppr&&(b="wav/"+(10*m.wAppr+200)+"-2.wav",g_sound_list&&-1!=g_sound_list.indexOf(b)&&GameUtil.PlayMusicFormat(b));g=CodeUtil._LOBYTE(a.series);d.pos(48*a.param,32*a.tag);d.grid.x=a.param;d.grid.y=a.tag;d.target_pos.x=a.param;d.target_pos.y=a.tag;3==d.type?d.changestate(null,
7,g,!1,this.str_attover):(b=THumFeature(d.data.fea.buffer),33==b.wRace?d.changestate(null,4,0,!1):d.changestate(null,3,g,!1),this.attackeffect(d,g,b));break;case SM_BIGHIT:g=CodeUtil._LOBYTE(a.series);3==d.type?d.changestate(null,9,g,!1,this.str_attover):d.changestate(null,3,g,!1,this.str_stand);break;case SM_STRUCK:m&&(1==d.type&&156==m.wRaceImg&&(g_diyMonState=2),g_ClientConfig.Params&&1==d.type&&!g_ClientConfig.Params[0]?(d.changestate(null,5,d.cur_dir,!1),1==d.type&&71!=m.wAppr&&0!=m.wAppr&&37!=
m.wAppr&&253!=m.wAppr&&260!=m.wAppr&&261!=m.wAppr&&(b="wav/"+(10*m.wAppr+200)+"-4.wav",g_sound_list&&-1!=g_sound_list.indexOf(b)&&GameUtil.PlayMusicFormat(b))):g_ClientConfig.Params&&1<g_ClientConfig.Params.length&&3==d.type&&!g_ClientConfig.Params[1]&&!g_ClientConfig.Params[0]&&(d.changestate(null,13,d.cur_dir,!1),0==m.nSex?GameUtil.PlayMusicFormat(s_struck_m):GameUtil.PlayMusicFormat(s_struck_w),Skillmodule.playEQsecurestruck(d)));break;case SM_STRUCK_BLAST:case SM_HEROGROUPATTACK:case SM_REBOUND:m&&
(1==d.type&&71!=m.wAppr&&0!=m.wAppr&&37!=m.wAppr&&253!=m.wAppr&&260!=m.wAppr&&261!=m.wAppr?(b="wav/"+(10*m.wAppr+200)+"-4.wav",g_sound_list&&-1!=g_sound_list.indexOf(b)&&GameUtil.PlayMusicFormat(b)):0==m.nSex?GameUtil.PlayMusicFormat(s_struck_m):GameUtil.PlayMusicFormat(s_struck_w),a.ident==SM_STRUCK_BLAST&&(a=new Laya.Point(20,-20),Animationmodule.playframe(!1,d,"gameres/animation/struck/",0,5,80,!1,!0,a)));break;case SM_DEATH:case SM_NOWDEATH:1==d.type&&156==m.wRaceImg&&(g_diyMonState=3);d.is_die=
!0;d.data.record==lockingID&&GameUtil.delhalo(lockingID);g=CodeUtil._LOBYTE(a.series);d.is_born=!1;3==d.type?n=14:n=6;0==d.cur_state&&null==d.cur_dir?d.changestate(a,n,g,!1,null,null,1):(d.changestate(a,n,g,!1,this.str_dieeff,!0),m&&(1==d.type&&71!=m.wAppr&&0!=m.wAppr&&253!=m.wAppr&&260!=m.wAppr&&261!=m.wAppr?(b="wav/"+(10*m.wAppr+200)+"-5.wav",g_sound_list&&-1!=g_sound_list.indexOf(b)&&GameUtil.PlayMusicFormat(b)):void 0!=m.nSex&&(0==m.nSex?GameUtil.PlayMusicFormat(s_role_die_m):GameUtil.PlayMusicFormat(s_role_die_w))));
900==m.wAppr&&99==m.wRaceImg&&GameUtil.ApplyDoorState(d.grid.x,d.grid.y,dsBroken);break;case SM_FEATURECHANGED:1==d.type&&156==m.wRaceImg&&(g_diyMonState=0);d.data&&d.data.fea.buffer.toString()!=a.fea.buffer.toString()&&(n=1!=d.cur_state?d.cur_state:null,d.updateskin(a,null,n));break;case SM_DIGUP:1==d.type&&156==m.wRaceImg&&(g_diyMonState=11);d.ddl_state=a.state;g=CodeUtil._LOBYTE(a.series);a&&a.fea&&(b=THumFeature(a.fea.buffer),33==b.wRace?(d.changestate(a,2,0,!1),d.visible=!0):(d.reverseani=!1,
d.changestate(a,7,g,!1),d.visible=!0,d.is_born=!0));900==m.wAppr&&99==m.wRaceImg&&(GameUtil.ApplyDoorState(d.grid.x,d.grid.y,dsOpen),d.obj_frames=[]);break;case SM_DIGDOWN:a&&a.fea&&(b=THumFeature(a.fea.buffer),33==b.wRace?(d.changestate(a,7,0,!1),Laya.timer.once(1E3,this,function(){d.visible=!1;d.data&&d.data.record&&this.delobject(d.data.record)})):13==b.wRace?(g=CodeUtil._LOBYTE(a.series),d.reverseani=!0,d.changestate(a,7,g,!1),Laya.timer.once(1E3,this,function(){d.visible=!1;d.data&&d.data.record&&
this.delobject(d.data.record)})):(g=CodeUtil._LOBYTE(a.series),d.reverseani=!0,d.changestate(null,4,g,!1),d.is_born=!0));900==m.wAppr&&99==m.wRaceImg&&GameUtil.ApplyDoorState(d.grid.x,d.grid.y,dsClose);break;case SM_BUTCH:case SM_SITDOWN:g=CodeUtil._LOBYTE(a.series);d.changestate(null,12,g,!1,this.str_stand);break;case SM_SKELETON:1==d.type&&156==m.wRaceImg&&(g_diyMonState=4);d.sp.blendMode="overlay";d.changestate(a,7,0,!1);break;case SM_ALIVE:1==d.type&&156==m.wRaceImg&&(g_diyMonState=4);d.is_die=
!1;d.visibleObjectBlood(!0);d.Blood.AliveBlood();d.changestate(a,7,0,!1);a.record==playerID&&Laya.stage.event("ROLE_ALIVE");900==m.wAppr&&99==m.wRaceImg&&GameUtil.ApplyDoorState(d.grid.x,d.grid.y,dsClose);break;case SM_SPELL:m=a.series,g=a.magicid,l=new Laya.Point(a.param,a.tag),61==m||62==m||64==m?(d=ObjectManage.findobject(a.record),n=THumFeature(d.data.fea.buffer).btJob,61==m&&0==n?Skillmodule.playself(611,g,d,l,a.record,b):61==m&&2==n?Skillmodule.playself(61,g,d,l,a.record,b):62==m&&0==n?Skillmodule.playself(621,
g,d,l,a.record,b):62==m&&1==n?Skillmodule.playself(62,g,d,l,a.record,b):64==m&&1==n?Skillmodule.playself(641,g,d,l,a.record,b):64==m&&2==n&&Skillmodule.playself(64,g,d,l,a.record,b)):Skillmodule.playself(m,g,d,l,a.record,b)}}};f.targetMoveHandle=function(a,b){if(3==b.type){var d=ObjectManage.findobject(playerID);d&&d.grid&&(a.record==attackerID?(disAfterTargetMoved=Math.floor(d.grid.distance(a.param,a.tag)),2>disAfterTargetMoved?disAfterTargetMoved=0:0!=d.target_pos.x&&0!=d.target_pos.y&&(chaseing=
d.is_moveing=!0,firstUpdatePath||(firstUpdatePath=!0))):attackerID||(disAfterTargetMoved=Math.floor(b.grid.distance(d.grid.x,d.grid.y)),otherPlayerCatch=!0,0!=b.target_pos.x&&0!=b.target_pos.y&&(b.is_moveing=!0)))}};f.updateAlpha=function(){};f.parseDiyMonsterFile=function(){var a=Laya.loader.getRes("json/Monster.dat");if(a){var b=new Uint8Array(a);a={buff:b,pos:0};if(0==b.length%502){b=b.length/502;g_diymonsterlist=[];for(var d=0;d<b;d++){var n=TClientSmartMonster(a);g_diymonsterlist.push(n)}}}};
f.drawCurSelfSkin=function(a,b,d,n){if(d&&n&&d.xy&&0!=d.xy.length&&d.skins&&0!=d.skins.length){var c=new Laya.Sprite;c.x=a;c.y=b;c.alpha=.5;c.zOrder=1;n.maplayer.addChild(c);a=d.skins;d=d.xy;b=0;for(n=a.length;b<n;b++)c.loadImage(a[b],d[b].x,d[b].y);var h=Laya.Tween.to(c,{alpha:0},1E3,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){c.removeSelf();Laya.Tween.clear(h)}))}};f.resetCollisionValueOnStanding=function(a,b){this.collisionPoint&&a==this.collisionPoint.objID&&b&&(this.collisionCount=
0,this.collisionPoint=this.gameScene=null,a=this.findobject(a))&&(a.is_springback=!1)};return e}(),Title=function(e){function f(){this.__super.call(this)}Laya.class(f,"Title",e);f.prototype.update=function(a){if(!(0>g_ClientConfig.nShowUserIcon||g_ClientConfig.nShowUserIcon>=g_pak_list.length)){var b=g_pak_list[g_ClientConfig.nShowUserIcon];if(""!==b){GameUtil.loadImg(a.skin_feature.nIcon,b,function(n){var c=Laya.loader.getRes(n);d.parent&&c&&(d.skin=n,d.zOrder=1E6,d.y=-(c.height+76),d.x=25-c.width/
2,d.width=c.width,d.height=c.height,a.skin_feature.sIconName?(d.titleName&&d.titleName._style?d.titleName.text=a.skin_feature.sIconName:(d.titleName=new Laya.Text,d.titleName.fontSize=14,d.titleName.stroke=2,d.titleName.align="center",d.titleName.color="#ffffff",d.titleName.strokeColor="#000000",d.titleName.text=a.skin_feature.sIconName,d.addChild(d.titleName)),d.titleName.visible=!0,d.titleName.color=0<a.skin_feature.btIconColor?GetRGB(a.skin_feature.btIconColor):"#bea80a",d.titleName.pivotX=-d.width,
d.titleName.pivotY=-d.height/2,d.titleName.y=-d.titleName.height/2,d.x=25-(d.width+d.titleName.width)/2):d.titleName&&(d.titleName.visible=!1))});3==a.type&&(this.visible=!GlobalCfglist.ShowTitle);var d=this}}};f.SetIconGif=function(a,b){var d=f.getIconGifData(a,b);if(d){a=d.obj;b=d.iconNums;var n=d.data;d=d.record;for(var c=0,h=1;c<b;c++,h++){var m=GameUtil.slice(n,28*c+h,28*c+h+28);m=TActorIcon(m);if(null==m.nSeeMode||1!=m.nSeeMode||d==playerID){if(f.aniList[""+d]&&f.aniList[""+d][c]){var g=f.aniList[""+
d][c];if(-1===m.nFileIndex){f.clearSingleTitleAni(g,d,c);continue}else if(g.dataName==f.getAniDataName(m))continue;else f.clearSingleTitleAni(g,d,c)}else(g=a.getChildByName("icongif"+c))&&f.clearSingleTitleAni(g,d,c);if(-1!==m.nFileIndex){g=g_pak_list[m.nFileIndex];var l=new Laya.Point(m.nX-70,m.nY-100);aniName="icongif"+c;f.setTitleAnim(m,a,g,m.nIconIndex,m.nIconIndex+m.nIconCount-1,m.nPlayTimeTick,l,aniName,c)}}}}};f.clearSingleTitleAni=function(a,b,d){Animationmodule.removeAni(a);f.aniList[""+
b][d]=null};f.getIconGifData=function(a,b){if(!(1>a.series)&&a.param===b.length){var d=ObjectManage.findobject(a.record);if(d)return b=fnDecode6BitBuf(b,b.length,!1),b=(new Zlib.Inflate(b.pszDest)).decompress(),{obj:d,iconNums:a.series,data:b,record:a.record}}};f.aniList={};f.getAniDataName=function(a){return a.nFileIndex+"_"+a.nX+"_"+a.nY+"_"+a.nIconIndex+"_"+a.nIconCount+"_"+a.nPlayTimeTick};f.pushAniFromObj=function(a,b,d){f.aniList[""+a]||(f.aniList[""+a]=[]);f.aniList[""+a][d]=b};f.SetIcon=function(a,
b){var d=f.getIconGifData(a,b);if(d){a=d.obj;b=d.iconNums;var n=d.data;d=d.record;a.icon||(a.icon=[]);for(var c=0;c<a.icon.length;c++)a.removeChild(a.icon[c]);a.icon=[];c=0;for(var h=1;c<b;c++,h++){var m=GameUtil.slice(n,28*c+h,28*c+h+28);m=TActorIcon(m);var g=a.getChildByName("humicon"+c);g&&f.clearSingleTitleAni(g,d,c+4);if(-1!==m.nFileIndex){var l=new Laya.Point(m.nX+10,m.nY-100);aniName="humicon"+c;switch(m.nFileIndex){case 2E3:g="icon";break;case 65534:g="prguse3";m.nIconIndex=295;m.nIconCount=
1;break;case 65535:g="prguse3";m.nIconIndex=296;m.nIconCount=1;break;default:g=g_pak_list[m.nFileIndex]}for(m.nIconIndex=String(m.nIconIndex);5>m.nIconIndex.length;)m.nIconIndex="0"+m.nIconIndex;f.setTitleAnim(m,a,g,m.nIconIndex,"0"+(+m.nIconIndex+m.nIconCount-1),m.nPlayTimeTick,l,aniName,c+4)}}}};f.setTitleAnim=function(a,b,d,n,c,h,m,g,l){if(d=Animationmodule.playframe(!1,b,"data/"+d+"/",n,c,h,!0,!1,m,null,null,null,null,!1))d.zOrder=b.getIconTitleZorder(),d.name=g,d.dataName=f.getAniDataName(a),
3==b.type&&(d.visible=!GlobalCfglist.ShowTitle),f.pushAniFromObj(b.data.record,d,l)};f.deleteTitleAnim=function(a){if(a){var b=f.aniList[""+a];if(b&&0<b.length){for(var d=b.length-1;0<=d;d--)b[d]&&(Animationmodule.removeAni(f.aniList[""+a][d]),f.aniList[""+a][d]=null);f.aniList[""+a]=null;delete f.aniList[""+a]}}};return f}(Laya.Image),ChangePwdScene=function(e){function f(){e.call(this);this.init()}var a=Laya.Event,b=null,d=!1;Laya.class(f,"ChangePwdScene",e);f.prototype.init=function(){CHANGEPWDSCENE_EXIST=
!0;this.onAssetLoaded();Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect)};f.prototype.onSvrConnect=function(){d=!0};f.prototype.onMsgFromSvr=function(n){if("#"===n[0]){var c=n.substring(1,n.length-1);n=c.substring(0,16);c=c.substring(16,c.length);n=DecodeMessage(n);DecodeString(c);switch(n.ident){case SM_CHGPASSWD_FAIL:this.onChangePwdErrorResult(n.record);break;case SM_CHGPASSWD_SUCCESS:this.onChangePwdSuccess()}}};
f.prototype.onChangePwdErrorResult=function(n){-1==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8f93\u5165\u7684\u539f\u59cb\u5bc6\u7801\u4e0d\u6b63\u786e!",callfn:function(){}}]):-2==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u88ab\u9501\u5b9a\uff01",callfn:function(){}}]):100==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u4e2d\u5fc3\u64cd\u4f5c\u5931\u8d25\uff01",callfn:function(){}}]):101==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",
callfn:function(){}}]):102==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==n?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):108==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):109==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):110==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e73\u53f0\u4e0d\u5b58\u5728\u6b64\u8d26\u53f7\uff01",callfn:function(){}}]):111==n?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u6b64\u8d26\u53f7\u65e0\u6cd5\u767b\u9646\u6b64\u5206\u533a,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):112==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\u6b21\u6570\u8fc7\u591a,\u5df2\u88ab\u6c38\u4e45\u9501\u5b9a\uff0c\u89e3\u9501\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):113==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u8d26\u53f7\u5df2\u7ed1\u5b9a\u5fae\u4fe1\uff01",callfn:function(){}}]):
114==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u8d26\u53f7\u5df2\u7ed1\u5b9a\u90ae\u7bb1\u6216\u624b\u673a\uff01",callfn:function(){}}]):180==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65b0\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):181==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65b0\u5bc6\u7801\u548c\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c\uff01",callfn:function(){}}]):182==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6743\u9650\u5f02\u5e38\uff01",
callfn:function(){}}]):183==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u975e\u5f53\u524d\u6e38\u620f\u6ce8\u518c\u8d26\u53f7\u65e0\u6cd5\u901a\u8fc7\u6b64\u529f\u80fd\u4fee\u6539\u5bc6\u7801\uff01",callfn:function(){}}]):184==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4fee\u6539\u5bc6\u7801\u5f02\u5e38\uff01",callfn:function(){}}]):185==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4fee\u6539\u5bc6\u7801\u5931\u8d25\uff01",callfn:function(){}}]):-1E3==n?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u5e10\u53f7\u670d\u52a1\u5668\u672a\u83b7\u53d6\u5206\u533aID\uff01",callfn:function(){}}]):-1001==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):-1002==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\uff01\uff01",callfn:function(){}}]):-1003==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u8d26\u53f7\u4e0d\u53ef\u767b\u9646\u5230\u6b64\u5206\u533a\uff01",callfn:function(){}}]):-1005==
n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):-1999==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u8d85\u65f6\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8f93\u5165\u7684\u65b0\u5bc6\u7801\u957f\u5ea6\u5c0f\u4e8e5\u4f4d\uff01",callfn:function(){}}])};f.prototype.onChangePwdSuccess=function(){this.removeSelf();Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u4fee\u6539\u6210\u529f",callfn:function(){}}])};f.prototype.onAssetLoaded=function(){b=new ChangePwdSceneUI;b.x=Laya.stage.width-b.width>>1;b.y=Laya.stage.height-b.height>>1;this.addChild(b);this.initregUI()};f.prototype.initregUI=function(){b.getChildByName("bg2").skin="gameres/png/00773.png";b.getChildByName("btn_ChangePwd").on(a.CLICK,this,this.onBtnClick);b.getChildByName("btn_reback").on(a.CLICK,this,this.onRebackClick);Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT)};f.prototype.onBtnClick=
function(){var n=b.getChildByName("username").text,c=b.getChildByName("oldpassword").text,h=b.getChildByName("password").text,m=b.getChildByName("confirmpassword").text;""===n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u540d\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""===c?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u539f\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""===h?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",
callfn:function(){}}]):0<h.indexOf(" ")?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u5305\u542b\u7a7a\u683c\u5b57\u7b26",callfn:function(){}}]):""===m?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):h!=m?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",callfn:function(){}}]):d&&(b.getChildByName("username").text="",b.getChildByName("oldpassword").text=
"",b.getChildByName("password").text="",b.getChildByName("confirmpassword").text="",Sendmessage.sendChangePassword(n,c,h))};f.prototype.onRebackClick=function(){b.getChildByName("username").text="";b.getChildByName("oldpassword").text="";b.getChildByName("password").text="";b.getChildByName("confirmpassword").text="";this.removeSelf()};return f}(Laya.View),GameScene=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"GameScene",GameSceneUI);f.prototype.init=function(){var a=this;
this.right=this.left=this.bottom=this.top=0;this.gameMain=new UIMain;this.gameMain.top=0;this.gameMain.bottom=0;this.gameMain.left=0;this.gameMain.right=0;this.addChild(this.gameMain);sendtonative("openReLogin","1");this.ctrl_role_type=1;this.movetype="walk";this.moveInterval=null;this.lock_drag_screen=!1;this.lasty=this.lastx=this.lastendtime=this.lastclicktime=this.cd_time=0;this.canpick=!0;this.roleEditorLayer=this.bagLayer=null;Skillmodule.setParent(this.maplayer);Mapmodule.setParent(this.maplayer);
this.area=new Laya.Sprite;this.area.size(240,360);this.area.pos(0,180);this.area_Y=this.area.y;this.addChild(this.area);this.area.on(Laya.Event.MOUSE_DOWN,this,this.rocker_area);this.walk_rocker=new RockerUI;this.walk_rocker.pos(100,280);this.walk_rocker.visible=!0;this.addChild(this.walk_rocker);this.walk_rocker.setRockerType(g_Move_Type);this.double_rocker=new DoubleRocker;this.double_rocker.alpha=1;this.double_rocker.pos(0,260);this.addChild(this.double_rocker);this.rockertip=new Laya.Image;this.rockertip.loadImage("gameres/ui/rocke_qiu.png");
this.rockertip.alpha=1;this.rockertip.left=108;this.rockertip.bottom=125;this.addChild(this.rockertip);this.chatLayer=new UIChat;this.chatLayer.zOrder=1;this.addChild(this.chatLayer);Laya.stage.on("switchRocker",this,this.singleRockerOrDoubleRocker);Laya.stage.on("togologin",this,this.initgamedata);Laya.stage.on("DrawMiniMap",this,this.drawminimap);Laya.stage.on("UPDATA_MAP",this,this.updatamap);Laya.stage.on("CREATE_PLAYER",this,this.createplayer);Laya.stage.on("LocationLoad",this,this.LocationLoad);
Laya.stage.on("CREATE_OBJECT",this,this.createobject);Laya.stage.on("ROLE_DIE",this,this.roledie);Laya.stage.on("ROLE_ALIVE",this,this.rolealive);Laya.stage.on("UPDATEBUFFER",this,this.updatebuff);Laya.stage.on("CLEARBUFFER",this,this.clearbuff);Laya.stage.on("update_map_items",this,this.UpdateItems);Laya.stage.on("delete_map_items",this,this.DeleteItems);Laya.stage.on("game_dlg_cmd",this,this.DlgCmd);Laya.stage.on(Laya.Event.RESIZE,this,this.changSize);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,
this.onSvrConnect);Laya.stage.on("remove_hanghui_dlg",this,function(){this.HangHuiLayer1&&(this.HangHuiLayer1=null)});Laya.stage.on("rockertip",this,function(b){GlobalCfglist.doubleRocker||rockerposview||(this.rockertip.visible=b)});Laya.stage.on("hideSingleRocker",this,function(b){this.rockertip.visible=b});Laya.stage.on("playDice",this,this.playDice);this.RoleMenu=this.uibox=this.fishLayer=this.fishWarmLayer=this.baitanLayer=this.itemInfoLayer=this.magicEditorLayer=this.magicinfoLayer=this.Auxiliary=
this.setLayer=this.friendLayer=this.HangHuiWorldLayer=this.HangHuiLayer=this.npcshopLayer=this.teamLayer=this.tradeLayer=this.shopLayer=this.depotLayer=null;this.mapItemList=[];this.StartDragPos=new Laya.Point(0,0);this.DragItemMoved=!1;this.self_object=this.lastClickAnim=null;Laya.stage.on("gameLoadSuccess",this,this.loadSuccessCall);Laya.stage.on("updatepos",this,this.updatepos);Laya.stage.on("playMapMusic",this,this.playMapMusic);Laya.timer.clear(this,this.updatemini);Laya.timer.loop(1E3,this,
this.updatemini);this.maplayer.on(Laya.Event.DOUBLE_CLICK,this,this.clickattack);this.maplayer.on(Laya.Event.MOUSE_DOWN,this,this.onMousedown);this.maplayer.on(Laya.Event.MOUSE_UP,this,this.onMouseup);this.LoadDropItemAni();Laya.SoundManager.useAudioMusic=!1;window.onunload=function(){Sendmessage.sendCloseGameForH5();dyLogin(null)};window.onbeforeunload=function(){Sendmessage.sendCloseGameForH5();dyLogin(null)};Gameconfig.timerManager();this.changSize();g_serverconfig.boVoice&&VoiceSocket.connect(g_serverconfig.sVoiceIP,
g_serverconfig.nVoicePort);this.mail=new mail;this.firstAuctionOpen=!0;Laya.stage.on("openAuctionWin",this,function(){g_customItemAttr.AuctionEnable&&(a.auctionWin=GameUtil.openWin(a.auctionWin,a,UIAuctionHouseWin),a.auctionWin.createCountDown(),a.firstAuctionOpen&&(a.firstAuctionOpen=!1,Laya.stage.event("Auction_create_currency"),Sendmessage.sendRequestAuctionList()),a.auctionWin.setCurrencyMoney(),a.auctionWin.updateAuctionData())});this.firstRankOpen=!0;this.rankWin;Laya.stage.on("openUIRankWin",
this,function(){a.rankWin=GameUtil.openWin(a.rankWin,a,UIRank);Sendmessage.requestRankDataByType(0)})};f.prototype.loadSuccessCall=function(){this.playMapMusic();setTimeout(function(){GameSdk&&7==cur_game_type&&GameSdk.loadingComplete()},20)};f.prototype.singleRockerOrDoubleRocker=function(){this.rockertip.visible=!GlobalCfglist.doubleRocker;this.walk_rocker.visible=GlobalCfglist.doubleRocker?!1:!this.rockertip.visible;var a=!this.rockertip.visible&&!this.walk_rocker.visible;this.double_rocker.visible=
GlobalCfglist.doubleRocker||a;this.double_rocker.visible&&Laya.stage.event("updateRocker")};f.prototype.changSize=function(){this.area.y=this.area_Y+(Laya.stage.height-500)};f.prototype.drawminimap=function(a){this.gameMain&&this.gameMain.root&&Mapdata.drawminimap(a,this.gameMain.root)};f.prototype.onSvrConnect=function(){this.startGameScene()};f.prototype.clickattack=function(a){activate_ok||215>(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)).distance(Laya.stage.width,Laya.stage.height)||ObjectManage.clickNPC(2,
a)};f.prototype.onMousedown=function(a){autopickstate&&(autopickstate=!1);a=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY);if(!(215>a.distance(Laya.stage.width,Laya.stage.height))){var b=this.maplayer.globalToLocal(a);b=new Laya.Point(Math.floor(b.x/48),Math.floor((b.y+16)/32));var d=ObjectManage.findobject(playerID),n=Laya.stage.getChildByName("openimage");n&&n.removeSelf();if(activate_ok&&d)GameUtil.JudgeMagicMp(activate_ok,d)?(activate_skilluse=activate_ok.Def.btEffect,activate_skilltype=
activate_ok.Def.wMagicId,activate_skillpos=b,Objectcontrol.useskill(activate_ok.Def.btEffect,activate_ok.Def.wMagicId,b,activate_ok.Level)):Laya.stage.event("show_log",[{txt:"\u9b54\u6cd5\u4e0d\u8db3",color:"#ff0000"}]);else if(g_myHero&&g_HeroGuardOn)Sendmessage.heroGuard(b),g_HeroGuardOn=!1,Animationmodule.playframe(!1,this.maplayer,"gameres/animation/mouse_click/",1,9,100,!1,!0,a);else if(!ObjectManage.clickNPC(1)&&(this.RoleMenu&&(this.RoleMenu.visible=!1),Laya.stage.event("close_target_menu"),
!Actionlock)){if(d&&1==d.paralysis_state){n=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.WALK);var c=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.RUN);if(0==n||0==c)return}null!=this.lastClickAnim&&Animationmodule.removeAni(this.lastClickAnim);this.lastClickAnim=Animationmodule.playframe(!1,this.maplayer,"gameres/animation/mouse_click/",1,9,100,!1,!0,a);this.lastClickAnim.name="mousefloor";this.is_has_item?(g_boCobWeb?(g_Move_Type=1,a=GameUtil.getorientation(d.grid,b),Objectcontrol.objectmove({dir:a,
state:g_Move_Type})):(Objectcontrol.self_obj.lastMoveTarget=this.pos,Objectcontrol.objectmove(null,this.pos)),this.is_has_item=!1):GlobalCfglist.banCkilcMove||(g_boCobWeb?(g_Move_Type=1,a=GameUtil.getorientation(d.grid,b),Objectcontrol.objectmove({dir:a,state:g_Move_Type})):(Objectcontrol.self_obj.lastMoveTarget=b,Objectcontrol.objectmove(null,b)))}}};f.prototype.onMouseup=function(a){a.touchId!=this.curTouchid||rockerposview||(this.walk_rocker.visible=!1,this.walk_rocker.is_move=!1,this.walk_rocker.rocker.pos(this.walk_rocker.use_w,
this.walk_rocker.use_h),this.walk_rocker.onDragEnd())};f.prototype.rocker_area=function(a){this.curTouchid=a.touchId;this.rockertip.visible=!1;this.walk_rocker.visible=!GlobalCfglist.doubleRocker;rockerposview||this.walk_rocker.pos(Laya.stage.mouseX-this.walk_rocker.use_w,Laya.stage.mouseY-this.walk_rocker.use_h);this.walk_rocker.onDragStart(a)};f.prototype.roledie=function(){result=[new Laya.ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])];this.maplayer.filters=
result;0!=lockingID&&GameUtil.delhalo(lockingID);roledielock=!0};f.prototype.rolealive=function(){this.maplayer.filters=null;roledielock=!1};f.prototype.DlgCmd=function(a){g_CurGameDlgZorder++;if("show_chongzhi"==a.id&&isWebForYYY())this.addChild(new UIRecharge);else if("show_depot"==a.id)null==this.depotLayer?(this.depotLayer=new UIDepot,this.addChild(this.depotLayer)):this.depotLayer.visible=!0,this.depotLayer.zOrder=g_CurGameDlgZorder,this.depotLayer.x=0,this.depotLayer.y=0,Laya.stage.event("update_depot");
else if("show_trade"==a.id)g_Show_Bag_Type="game_trade",null==this.tradeLayer?(this.tradeLayer=new UITrade,this.addChild(this.tradeLayer)):(this.tradeLayer.visible=!0,this.tradeLayer.ResetTradeUI()),this.tradeLayer.zOrder=g_CurGameDlgZorder,this.Bag();else if("hide_trade"==a.id)this.tradeLayer&&(this.tradeLayer.visible=!1);else if("show_hanghui"==a.id)null==this.HangHuiLayer1?(this.HangHuiLayer1=new UIHangHui1,Laya.stage.addChild(this.HangHuiLayer1)):this.HangHuiLayer1.visible=!0,this.HangHuiLayer1.zOrder=
g_CurGameDlgZorder;else if("show_hanghui_world"==a.id)(a=GameUtil.InstanceOfMem(HangHuiWorldUI))?a.visible=!0:(a=new UIHangHuiWorld,Laya.stage.addChild(a)),a.zOrder=g_CurGameDlgZorder;else if("show_equip"==a.id)this.RoleEditor(),Laya.stage.event("update_roleeditor");else if("show_Auxiliary"==a.id)null==this.Auxiliary?(this.Auxiliary=new uiAuxiliary,Laya.stage.addChild(this.Auxiliary)):(this.Auxiliary.visible=!this.Auxiliary.visible,this.Auxiliary.visible?(this.Auxiliary.ShowDlg(),a=Laya.loader.getRes("gameres/png/setting_bg.png"),
a||(this.Auxiliary.removeSelf(),this.Auxiliary=new uiAuxiliary,Laya.stage.addChild(this.Auxiliary))):this.Auxiliary.BtnClick()),this.Auxiliary.zOrder=g_CurGameDlgZorder;else if("show_friend"==a.id)this.socialWin=GameUtil.openWin(this.socialWin,this,UISocialWin,!0),this.socialWin.visible&&Laya.stage.event("updateSocialDirectory",1),this.socialWin.zOrder=g_CurGameDlgZorder;else if("show_team"==a.id)this.socialWin=GameUtil.openWin(this.socialWin,this,UISocialWin,!0),this.socialWin.visible&&Laya.stage.event("updateSocialDirectory",
2),this.socialWin.zOrder=g_CurGameDlgZorder;else if("show_bag"==a.id)this.Bag();else if("show_skills"==a.id)this.RoleEditor(),Laya.stage.event("update_roleeditor");else if("show_npc_shop"==a.id)this.npcshopLayer=Laya.stage.getChildByName("UIShop"),null==this.npcshopLayer?(Sendmessage.GetShopItems(0),Sendmessage.GetStrangeItems(),this.npcshopLayer=new UIShop,this.npcshopLayer.name="UIShop",Laya.stage.addChild(this.npcshopLayer)):(this.npcshopLayer.root.visible=!0,a=Laya.loader.getRes("gameres/png/shopping_bg1.png"),
a||(this.npcshopLayer.removeSelf(),Sendmessage.GetShopItems(0),Sendmessage.GetStrangeItems(),this.npcshopLayer=new UIShop,this.npcshopLayer.name="UIShop",Laya.stage.addChild(this.npcshopLayer))),this.npcshopLayer.zOrder=g_CurGameDlgZorder;else if("actor_att"==a.id)if(Fightmodule.leavefight(),Movemodule.stopmove(),Objectcontrol.fight(),1==a.type)a=Laya.Browser.now(),0==attack_lock_time?attack_lock_time=a:300>a-attack_lock_time?(attack_lock_time=a,attack_lock_state=!0):1E3<a-attack_lock_time&&(attack_lock_time=
a,attack_lock_state=!1);else{var b=ObjectManage.findobject(playerID),d=g_SetupMagicList[12];d&&b&&(GameUtil.israngeskill(d.Def.btEffect)?activate_ok&&activate_ok.Def.btEffect==d.Def.btEffect&&activate_ok.Def.wMagicId==d.Def.wMagicId?(activate_ok=null,Laya.stage.event("show_log",[{txt:"\u6280\u80fd\u5df2\u53d6\u6d88\uff01",color:"#ff0000"}]),Animationmodule.removeAniname("skilllockani")):(Laya.stage.event("show_log",[{txt:"\u70b9\u51fb\u9009\u62e9\u91ca\u653e\u7684\u533a\u57df\uff01",color:"#ff0000"}]),
activate_ok=d,Animationmodule.removeAniname("skilllockani"),a=Animationmodule.playframe(!1,a.target,"gameres/animation/mouse_click/",41,52,100,!0,!1),a.name="skilllockani",a.pos(-12,-15)):b.m_Abil.MP>=d.Def.wSpell+d.Def.btDefSpell?(Objectcontrol.useskill(d.Def.btEffect,d.Def.wMagicId),activate_skilluse=d.Def.btEffect,activate_skilltype=d.Def.wMagicId):Laya.stage.event("show_log",[{txt:"\u9b54\u6cd5\u4e0d\u8db3",color:"#ff0000"}]))}else"task_scene"==a.id?Laya.stage.addChild(new TaskScene):"exit_to_role"==
a.id?this.exitgame():"change_move_type"==a.id?g_Move_Type=1==g_Move_Type?2:1:"show_magicinfo"==a.id?(null==this.magicinfoLayer?(this.magicinfoLayer=new UIMagicInfo,this.addChild(this.magicinfoLayer)):this.magicinfoLayer.ResetUI(),this.magicinfoLayer.zOrder=g_CurGameDlgZorder):"show_magiceditor"==a.id?(null==this.magicEditorLayer?(this.magicEditorLayer=new UIMagicEditor,this.addChild(this.magicEditorLayer)):this.magicEditorLayer.ResetUI(),this.magicEditorLayer.zOrder=g_CurGameDlgZorder):"show_iteminfo"==
a.id?(null==this.itemInfoLayer?(this.itemInfoLayer=new UIItemInfo,Laya.stage.addChild(this.itemInfoLayer)):this.itemInfoLayer.ResetUI(a.state),this.itemInfoLayer.zOrder=99999):"show_box"==a.id?(null==this.uibox?(this.uibox=new UIBox(a.boxid),Laya.stage.addChild(this.uibox)):this.uibox.ResetUI(a.boxid),this.uibox.zOrder=99999):"show_roleMenu"==a.id?(null==this.RoleMenu?(this.RoleMenu=new UIRoleMenu(a.x,a.y,a.name,a.record,a.click_x,a.click_y),this.RoleMenu.zOrder=100,Laya.stage.addChild(this.RoleMenu)):
(this.RoleMenu.visible=!0,this.RoleMenu.ResetUI(a.x,a.y,a.name,a.record,a.click_x,a.click_y)),this.RoleMenu.zOrder=g_CurGameDlgZorder):"open_box"==a.id?this.uibox?this.uibox.showboxitemlist(a.items):a.items&&(this.uibox=new UIBox(a.boxid),Laya.stage.addChild(this.uibox),this.uibox.zOrder=99999,this.uibox.showboxitemlist(a.items)):"openbox_fail"==a.id?this.uibox&&this.uibox.ClosesBox():"getbox_itemindex"==a.id?this.uibox.GetBoxItemIndex(a.itemindex):"remvoe_friend"==a.id?this.friendLayer&&(this.friendLayer.removeSelf(),
this.friendLayer=null):"show_baitan"==a.id?(null==this.baitanLayer?(this.baitanLayer=new UIBaiTan(a.data),this.addChild(this.baitanLayer)):this.baitanLayer.ShowDlg(a.data),this.baitanLayer.zOrder=g_CurGameDlgZorder):"show_fishwarm"==a.id?(null==this.fishWarmLayer?(this.fishWarmLayer=new FishWarn(a.data,a.tag),this.addChild(this.fishWarmLayer)):this.fishWarmLayer.ShowDlg(a.data,a.tag),this.fishWarmLayer.zOrder=g_CurGameDlgZorder):"show_fish"==a.id?(null==this.fishLayer?(this.fishLayer=new UIFish,this.addChild(this.fishLayer)):
this.fishLayer.ShowDlg(),this.fishLayer.zOrder=g_CurGameDlgZorder):"open_user_mail"==a.id&&this.mail&&this.mail.openMail()};f.prototype.UpdateItems=function(a){var b=this;GameUtil.loadImg(a.Looks,"dnitems",function(d){if(ItemMgr.getInstance().HasDropItemById(a.id)){var n=new Laya.Image(d);g_item_clearlist[d]=!0;n.zOrder=999991;n.isDorp=!0;n.anchorX=.5;n.anchorY=.5;n.pivotX=n.width/2;n.pivotY=n.height/2;d=new Laya.Text;d.text=a.Name;Gameconfig.itemCheck(d.text,2)?d.color=Get2RGB(a.Color):d.color=Get2RGB(8);
d.strokeColor="#000000";d.stroke=g_strokewidth;Gameconfig.itemCheck(d.text,0)||(d.visible=!1);b.maplayer.addChild(d);d.zOrder=999992;d.id=a.id;d.fontSize=16;b.mapItemList.push(d);n.on(Laya.Event.MOUSE_DOWN,b,b.ClickMapItem);n.x=48*a.x+24;n.y=32*a.y+16;n.id=a.id;b.mapItemList.push(n);b.maplayer.addChild(n);d.x=n.x-d.width/2;d.y=n.y-d.height-10;if(-1!=a.DropEffectFileIndex){d="";g_pak_list[a.DropEffectFileIndex]&&(d="data/"+g_pak_list[a.DropEffectFileIndex]+"/");var c=a.DropEffectStartOffSet,h=a.DropEffectImageCount+
c-1;n=new Laya.Point(n.x+a.DropEffectOffsetX+15,n.y+a.DropEffectOffsetY+15);if(n=Animationmodule.playframe(!a.DropEffectNormalDraw,b.maplayer,d,c,h,a.DropEffectFrameTime,!0,!1,n,null,null,null,null,!1))n.name="item"+a.id,n.id=a.id,n.dorpItem=!0,n.zOrder=999990}}})};f.prototype.LoadDropItemAni=function(){this.reslist=[];for(var a=0;11>a;a++){var b="gameres/animation/drop_item_ani/000"+(600+a)+".png";this.reslist.push(b)}a=[];b=this.reslist;a.push({url:b,type:Laya.Loader.IMAGE});Laya.loader.load(a,
Laya.Handler.create(this,function(){}))};f.prototype.ShowDropItemAni=function(a){if(void 0==a._childs[1]){var b=new Laya.Image;b.blendMode="overlay";a.addChild(b)}var d=0,n=this;a.droptimer=setInterval(function(c){c._childs[1].skin="";n.reslist[d]?(c._childs[1].skin=n.reslist[d],c._childs[1].pivotX=c._childs[1].width/2-c.width/2,c._childs[1].pivotY=c._childs[1].height/2-c.width/2,d++):(c._childs[1].skin="",clearInterval(c.droptimer))},80,a)};f.prototype.ClickMapItem=function(a){a=new Laya.Point(Math.floor(a.target.x/
48),Math.floor(a.target.y/32));this.is_has_item=!0;this.pos=a};f.prototype.DeleteItems=function(a,b){for(var d=this.mapItemList.length-1;0<=d;d--){var n=this.mapItemList[d];if(n.id==a||1==a)this.mapItemList.splice(d,1),n.visible=!1,n.id==a&&Animationmodule.removeAniname("item"+a),n.destroy(),b&&this.pickUpGoodsHandler(n)}};f.prototype.pickUpGoodsHandler=function(a){a instanceof Laya.Image&&(!this.pickupTime||200<Laya.Browser.now()-this.pickupTime)&&(this.pickupTime=Laya.Browser.now(),Laya.stage.event("pickGoodsAnimHandler",
[{x:a.x,y:a.y,url:a.skin}]))};f.prototype.ParseItemNameFormat=function(a){var b="";1E4<=a&&(a-=1E4);for(var d=a.toString().length;5>d;d++)b+="0";return 1E4<=a?"data/dnitems1/"+b+a+".png":"data/dnitems/"+b+a+".png"};f.prototype.ParseNameFormat=function(a){for(var b="",d=a.toString().length;5>d;d++)b+="0";return"data/magicion/"+b+a+".png"};f.prototype.createplayer=function(a){this.self_object=ObjectManage.newobject(a);Objectcontrol.bindobj(this.self_object,this.maplayer,a.param,a.tag)};f.prototype.createobject=
function(a){this.maplayer.addChild(a)};f.prototype.updatebuff=function(a){this.gameMain&&GameUtil.updatebuff(a,this.gameMain)};f.prototype.clearbuff=function(a){this.gameMain&&this.gameMain.root&&this.gameMain.root.onLine_bonus&&(a=this.gameMain.root.onLine_bonus.getChildByName(a))&&a.removeSelf()};f.prototype.updatemini=function(){this.self_object&&this.gameMain&&this.gameMain.root&&this.gameMain.root&&Mapdata.updateminimap(this.gameMain.root,this.self_object.grid.x,this.self_object.grid.y);g_tick_check&&
g_tick_rate++};f.prototype.playMapMusic=function(){Laya.timer.once(350,this,function(){Laya.SoundManager.stopAll();null!=Mapdata&&""!=Mapdata.cur_music&&GameUtil.PlayMusicFormat(Mapdata.cur_music);selfPlayerTransfer&&(selfPlayerTransfer=null,GameUtil.PlayMusicFormat("wav/110.wav"))}.bind(this))};f.prototype.updatepos=function(){if(this.self_object){var a=Math.floor(this.self_object.x/48),b=Math.floor(this.self_object.y/32);if(a!=this.lastx||b!=this.lasty)this.canpick=!0;if(!this.self_object.is_die)for(var d=
ItemMgr.getInstance().DropItemList,n=0;n<d.length;n++){var c=d[n].y;if(d[n].x==a&&c==b){var h=d[n].Name;if(h){var m=!0;for(c=0;c<g_BagItemsList.length;c++)null==g_BagItemsList[c]&&(m=!1);if(m){this.canpick&&(Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]),this.lastx=a,this.lasty=b,this.canpick=!1);break}Gameconfig.itemCheck(h,1)&&!autohookstate?(d[n].show=!1,Sendmessage.ClickMapItem(a,b)):autohookstate&&Gameconfig.itemCheck(h,3)&&(d[n].show=!1,Sendmessage.ClickMapItem(a,
b),c=Laya.Browser.now(),g_cannotPick[d[n].id]=c)}}}this.gameMain&&this.gameMain.root&&this.gameMain.AttNode&&this.self_object&&this.gameMain.root.panel_node&&this.gameMain.root.lbl_map_name&&this.gameMain.root.lbl_map_grid&&Mapdata&&(this.gameMain.root.lbl_map_name.text=Mapdata.cur_name,this.gameMain.root.lbl_map_grid.text=this.self_object.grid.x+":"+this.self_object.grid.y,this.btn_edge.y=32*this.self_object.grid.y-this.btn_edge.height/2,this.btn_edge.x=-400,ObjectManage.is_in_safezone(this.self_object.grid)?
(this.gameMain.root.lbl_map_safe.text="\u5b89\u5168\u533a\u57df",this.gameMain.root.lbl_map_safe.color="#47ff00"):(this.gameMain.root.lbl_map_safe.text="\u5371\u9669\u533a\u57df",this.gameMain.root.lbl_map_safe.color="#ff0000"));if(Movemodule.move_list&&0<Movemodule.move_list.length&&null!=Movemodule.end_point){for(c=Mapmodule.root._childs.length-1;0<=c;c--)(a=Mapmodule.root._childs[c])&&"xunlu"==a.name&&(Laya.Pool.recover("minimap_point",a),a.removeSelf());a=Movemodule.move_list.length-Movemodule.move_index;
50<Movemodule.move_list.length-Movemodule.move_index&&(a=50);for(c=Movemodule.move_index+1;c<a+Movemodule.move_index;++c)Movemodule.drawXunluPoint(Movemodule.move_list[c].x,Movemodule.move_list[c].y)}}};f.prototype.Bag=function(){null==this.bagLayer?(this.bagLayer=new UIBag,this.bagLayer.name="bagLayer",this.addChild(this.bagLayer)):(this.bagLayer.visible=!0,this.bagLayer.ShowDlg());g_CurGameDlgZorder++;this.bagLayer.zOrder=g_CurGameDlgZorder};f.prototype.Trade=function(){};f.prototype.RoleEditor=
function(a){0!=playerID&&(null==this.roleEditorLayer?(this.roleEditorLayer=new UIRoleEditor(0),this.roleEditorLayer.name="roleEditorLayer",this.roleEditorLayer.zOrder=g_CurGameDlgZorder,this.addChild(this.roleEditorLayer)):(this.roleEditorLayer.visible=!0,this.roleEditorLayer.zOrder=g_CurGameDlgZorder,this.roleEditorLayer.ShowDlg(),Laya.stage.event("update_roleeditor")))};f.prototype.initgamedata=function(){var a=Laya.stage.getChildByName("superTxt");a&&(g_superMsg=[],a.removeSelf());if(a=Laya.stage.getChildByName("roll_img"))G_RollMsg=
[],a.removeSelf();Laya.stage.event("npc_log_close");Laya.stage.event("closeTimer_simplescreen");ObjectManage.delobject(-1);Animationmodule.removeAniname("autohook");Laya.stage.removeChildren();Sendmessage.SendExitToLogin();Laya.timer.clear(Gameconfig,Gameconfig.gameconfigupdate);Laya.timer.clearAll(this.gameMain);Laya.timer.clearAll(this.walk_rocker);Laya.timer.clearAll(this);Laya.stage.event("clearSkillcd_timer");Laya.stage.off("togologin",this,this.initgamedata);Laya.stage.off("DrawMiniMap",this,
this.drawminimap);Laya.stage.off("UPDATA_MAP",this,this.updatamap);Laya.stage.off("CREATE_PLAYER",this,this.createplayer);Laya.stage.off("LocationLoad",this,this.LocationLoad);Laya.stage.off("CREATE_OBJECT",this,this.createobject);Laya.stage.off("ROLE_DIE",this,this.roledie);Laya.stage.off("ROLE_ALIVE",this,this.rolealive);Laya.stage.off("UPDATEBUFFER",this,this.updatebuff);Laya.stage.off("CLEARBUFFER",this,this.clearbuff);Laya.stage.off("update_map_items",this,this.UpdateItems);Laya.stage.off("delete_map_items",
this,this.DeleteItems);Laya.stage.off("game_dlg_cmd",this,this.DlgCmd);Laya.stage.off(Laya.Event.RESIZE,this,this.changSize);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.offAll("new_chat_msg");Laya.stage.off("switchRocker",this,this.singleRockerOrDoubleRocker);Laya.stage.offAll("remove_hanghui_dlg");Laya.stage.offAll("rockertip");Laya.stage.offAll("hideSingleRocker");Laya.stage.off("updatepos",this,this.updatepos);Laya.stage.off("playMapMusic",this,this.playMapMusic);
Laya.stage.offAll(Laya.Event.MOUSE_MOVE);Laya.stage.offAll(Laya.Event.MOUSE_OUT);Laya.stage.offAll(Laya.Event.MOUSE_UP);Laya.stage.offAll("updateRocker");Laya.stage.offAll("move_position");Laya.stage.offAll("dragEnd");Laya.stage.offAll("UPDATETASK");Laya.stage.offAll("closeTimer_simplescreen");Laya.stage.offAll("update_circum_hum");Laya.stage.offAll("update_circum_item");Laya.stage.offAll("show_alert_dlg");Laya.stage.offAll("setDrugImg");Laya.stage.offAll("update_m2set");Laya.stage.offAll("update_autoSkill");
Laya.stage.offAll("update_baitan_items");Laya.stage.offAll("show_chat_from_editor");Laya.stage.offAll("show_chat_dlg");Laya.stage.offAll("get_chat_name");Laya.stage.offAll("onGetPhotoURL");Laya.stage.offAll("setCMDlist");Laya.stage.offAll("update_depot");Laya.stage.offAll("update_friend_list");Laya.stage.offAll("show_input_node");Laya.stage.offAll("update_friend_info");Laya.stage.offAll("friendRequest");Laya.stage.offAll("update_world_list");Laya.stage.offAll("show_guild_info");Laya.stage.offAll("update_magic_editor");
Laya.stage.offAll("update_magic_info");Laya.stage.offAll("update_items");Laya.stage.offAll("UpDown");Laya.stage.offAll("buy_npc_item");Laya.stage.offAll("reset_img_item");Laya.stage.offAll("add_magic");Laya.stage.offAll("remove_magic");Laya.stage.offAll("update_icon");Laya.stage.offAll("skillrocke");Laya.stage.offAll("skillcd_ani");Laya.stage.offAll("update_teamlist");Laya.stage.offAll("show_input_node1");Laya.stage.offAll("update_trade_item");Laya.stage.offAll("trade_cmd");Laya.stage.offAll("update_items");
Laya.stage.offAll("cannel_trade");Laya.stage.offAll("playDice");this.mail&&this.mail.clearEvent();ObjectManage.delobject(playerID);initpverallprot();GameApi.ShowMyShopMsg(!1);GameApi.ShowMyShop(!1);GameApi.ShowLookHum(!1);GameApi.Showskillwin(!1);GameApi.ShowNewNpcShop(!1);GameApi.ShowDrug(!1);GameApi.ShowScreen(!1);GameUtil.ShowNewStore(!1);GameUtil.ShowNewLogo(!1);GameUtil.ShowNewBag(!1);GameUtil.NewShowItemsClose();GameApi.LookHumShop(!1);this.uibox&&this.uibox.ClosesBox();G_Team_Grop_List=[];
G_Friend_List=[];G_Friend_Target_List=[];g_showWeatherEffect&&(g_showWeatherEffect.removeSelf(),g_showWeatherEffect=null);ItemMgr.getInstance().ClearItem();MagicMgr.getInstance().ClearMagic();Mapmodule.cur_x=0;Mapmodule.cur_y=0;Mapmodule.sceneid=null;Animationmodule.clearRoleAniCacheAssets();g_buffAniCache=[];doubleFirePosIndex=cdTimerStart=void 0};f.prototype.exitgame=function(){this.initgamedata();Laya.stage.bgColor="#000000";var a="";switch(Math.floor(100*Math.random()%3)){case 0:a="gameres/png/bj_ds.png";
break;case 1:a="gameres/png/bj_fs.png";break;case 2:a="gameres/png/bj_zs.png"}g_serverconfig.nJobmode&&0==g_serverconfig.nJobmode&&(a="gameres/png/bj_zs.png");var b=new Laya.Sprite;b.name="bj_sprite";b.loadImage(a,0,0,0,0,Laya.Handler.create(this,function(){b.pivotX=b.width/2;b.pivotY=b.height/2;b.pos(browser_width/2,browser_height/2)}));Laya.stage.addChild(b);this.gameMain&&this.gameMain.clienmsg();Laya.timer.once(1E3,this,function(){var d=new RoleScene;d.centerX=0;d.centerY=0;d.getParamFromLogin(MsgFromLogin);
Laya.stage.addChild(d)})};f.prototype.sendhb=function(){null==Laya.timer._getHandler(Mapmodule,Mapmodule.SceneHeartbeat)&&(Laya.timer.clear(Mapmodule,Mapmodule.SceneHeartbeat),Laya.timer.loop(500,Mapmodule,Mapmodule.SceneHeartbeat));null==Laya.timer._getHandler(Animationmodule,Animationmodule.heartbeat)&&(Laya.timer.clear(Animationmodule,Animationmodule.heartbeat),Laya.timer.loop(100,Animationmodule,Animationmodule.heartbeat))};f.prototype.sendHearBeat=function(){Sendmessage.sendhearbeat()};f.prototype.updatamap=
function(a,b,d,n){g_getAtlas={};this.updateWindow();Mapmodule.clearMapImage();Laya.loader.clearUnLoaded();Sendmessage.sendhearbeat();open_minimap=!1;Sendmessage.sendOpenMinimap();Movemodule.stopmove();this.self_object&&(this.self_object.is_moveing=!1);Movemodule.end_point&&(Movemodule.end_point=null);Laya.stage.event("delete_map_items",1);ItemMgr.getInstance().DelItemFromMap();Laya.timer.clear(this,this.sendhb);Laya.timer.loop(5E3,this,this.sendhb);Laya.timer.clear(this,this.sendHearBeat);Laya.timer.loop(DELAY_INTERVAL,
this,this.sendHearBeat);attackerID=0;rockerlock=Actionlock=!0;rockerfirst=chaseing=!1;lockingID&&GameUtil.delhalo(lockingID);g_cannotPick=[];Fightmodule.path_list=[];this.walk_rocker&&(this.walk_rocker.is_move=!1);this.double_rocker&&(this.double_rocker.isMoving=!1);ObjectManage.delobject();ObjectManage.resloadlist=[];Mapmodule.enterMap(a,b,d,n);Animationmodule.clearAniCacheAssets();GameUtil.clearMapItemCacheAssets();Laya.timer.clear(ObjectManage,ObjectManage.attback);g_loadmap=!0;this.self_object&&
(this.self_object.cur_state=1,this.self_object.grid.x=b,this.self_object.grid.y=d,this.self_object.target_pos.x=b,this.self_object.target_pos.y=d,this.self_object.selfname.x=48*b,this.self_object.selfname.y=32*d,this.self_object.updateskin(null,this.self_object.cur_dir,!0));GameUtil.ShowNewStore(!1);Laya.stage.event("close");this.updatepos()};f.prototype.LocationLoad=function(a,b){Objectcontrol.updatepos(a,b)};f.prototype.getDataForRoleScene=function(a){dataFromRoleScene=a;GAME_PORT=parseInt(a.port);
Sendmessage.connectGameSvr(GAME_IP,GAME_PORT)};f.prototype.startGameScene=function(){Sendmessage.sendRunLogin(dataFromRoleScene.uid,dataFromRoleScene.name,dataFromRoleScene.code)};f.prototype.playDice=function(a,b){var d=b.slice(27);b=b.slice(0,27);var n=DecodeString(d);d=fnDecode6BitBuf(b,b.length);d=TMessageBodyWL(d.pszDest);var c=GameUtil.InstanceOfMem(NewNpcWinUI);""!=b&&(this.mouseEnabled=!1,c&&(c.visible=!1));d=[CodeUtil._LOBYTE(CodeUtil._LOWORD(d.lParam1)),CodeUtil._HIBYTE(CodeUtil._LOWORD(d.lParam1)),
CodeUtil._LOBYTE(CodeUtil._HIWORD(d.lParam1)),CodeUtil._HIBYTE(CodeUtil._HIWORD(d.lParam1)),CodeUtil._LOBYTE(CodeUtil._LOWORD(d.lParam2)),CodeUtil._HIBYTE(CodeUtil._LOWORD(d.lParam2)),CodeUtil._LOBYTE(CodeUtil._HIWORD(d.lParam2)),CodeUtil._HIBYTE(CodeUtil._HIWORD(d.lParam2)),CodeUtil._LOBYTE(CodeUtil._LOWORD(d.lTag1)),CodeUtil._HIBYTE(CodeUtil._LOWORD(d.lTag1))];Laya.stage.getChildByName("dice")&&Laya.stage.getChildByName("dice").removeSelf();var h=new Laya.Image("gameres/png/img_mask.png");h.width=
Laya.stage.width;h.height=Laya.stage.height;h.mouseThrough=!0;Laya.stage.addChild(h);h.zOrder=999999999;var m=new Laya.Image("gameres/png/bg_online.png");m.name="dice";h.addChild(m);m.pos((Laya.stage.width-355)/2,(Laya.stage.height-202)/2);var g=[];for(b=0;b<a.param;b++)g.push("gameres/animation/dicing/00001"+d[b]);var l=this;g=(355-50*a.param)/2;for(b=0;b<a.param;b++){var p=new Laya.Point(50*b+g,86),q=new Laya.Image("gameres/animation/dicing/00001"+d[b]+".png");m.addChild(q);q.name="dicenum"+b;q.x=
p.x;q.y=p.y;q.visible=!1;null==m.getChildByName("dicing"+b)&&(q=Animationmodule.playframe(!1,m,"gameres/animation/dicing/",1,4,100,!0,!1,null,this))&&(q.name="dicing"+b,q.num=0,q.pos(p.x,p.y))}d=parseInt(4*Math.random()+3);for(b=0;b<a.param;b++)Laya.timer.once(1E3*d,this,function(){for(var r=0;r<a.param;r++)if(m.getChildByName("dicing"+r)&&m.getChildByName("dicenum"+r)&&0==m.getChildByName("dicenum"+r).visible){Animationmodule.removeAniname("dicing"+r);m.getChildByName("dicenum"+r).visible=!0;break}});
Laya.timer.once(1E3*d+3E3,this,function(){Sendmessage.SendNpcCMD(n,a.record);h.removeSelf();l.mouseEnabled=!0;c&&(c.visible=!0)})};f.prototype.updateWindow=function(){GameApi.ShowMyShopMsg(!1);GameApi.ShowMyShop(!1);GameApi.ShowLookHum(!1);GameApi.Showskillwin(!1);GameApi.ShowNewNpcShop(!1);GameApi.ShowDrug(!1);GameApi.ShowScreen(!1);GameUtil.ShowNewStore(!1);GameUtil.NewShowItemsClose();GameApi.LookHumShop(!1);this.RoleMenu&&(this.RoleMenu.visible=!1);var a=GameUtil.InstanceOfMem(HumWinUI);if(a&&
1==a.visible){var b=a.SkillListType;a.visible=!1;Laya.timer.frameOnce(5,this,function(){a.visible=!0;if(1==b)a.onState_skill();a.ShowItemico(-1)})}var d=GameUtil.InstanceOfMem(NewBagUI);d&&1==a.visible&&(d.close(),Laya.timer.frameOnce(5,this,function(){var n=new NewBag;Laya.stage.addChild(n)}))};return f}(GameSceneUI),LoginScene=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.btn=new Laya.Button("gameres/ui/area_button_left.png");this.btn.x=6;this.btn.labelColors=
"#D7B581,#D7B581";this.btn.labelPadding="6,0,6,0";this.btn.labelStrokeCol="#000000";this.btn.labelStroke=2;this.btn.labelSize=18;this.btn.stateNum=2;this.addChild(this.btn);this.data=[];this.setlable=function(d,n){d&&(d=d.group_name,this.app_parent=n,this.btn.label=d)}}function b(){b.__super.call(this);this.btn1=new Laya.Button("gameres/ui/00733.png");this.btn1.x=6;this.btn1.width=257;this.btn1.height=73;this.btn1.labelColors="#D7B581,#D7B581";this.btn1.stateNum=1;this.addChild(this.btn1);this.setlable=
function(d,n){this.app_parent=n;n=d[0];-1!=n.indexOf(",")&&(n=n.split(",")[0]);this.btn1.label=n;this.btn1.name=d[0];this.btn1.labelBold=!0;this.btn1.labelStroke=3;this.btn1.labelSize=24;this.btn1.labelStrokeCol="#000000";this.btn1.once(Laya.Event.CLICK,this,function(){if(this.app_parent){sectionInfo=d[1];GameUtil.PlayMusicFormat(S_BUTTON_1);Sendmessage.sendSelectServer(this.btn1.name);g_Server_Name=this.btn1.label;var c=GameUtil.getSaveData("username");g_LogSocket.AddGameDataLog(502,c,0,this.btn1.name,
"")}isWebForYYY()&&gameClient.clientAction.selectServer({serverId:1,serverName:g_Server_Name},function(h){console.log(h)},function(h){console.log(h)})})}}Laya.class(f,"LoginScene",LoginSceneUI);Laya.class(a,"serveRender",Laya.Box);Laya.class(b,"sectionRender",Laya.Box);f.prototype.init=function(){var d=this;this.nameKey="";this.hasChooseServer=this.noticeContentEmpty=this.clickNoticeShow1Copy=!1;this.group_list=[];this.lastClickAnim=null;this.img_account_list.visible=!1;this.img_register.visible=
!1;this.img_select.visible=!1;this.can_click=this.use_qqweixin=this.reqservering=!0;this.serveArray=[];this.sectionArray=[];this.notice1_bg.visible=!1;this.imageLogin.visible=!1;this.img_account.visible=!1;this.arer_near1.visible=!1;this.arer_near2.visible=!1;this.tex_name.maxChars=20;this.tex_psw.maxChars=20;this.arerArrayQSY=[];this.currAreaCell=null;this.notice_show1_copy.visible=!1;this.resetLoginIndex=0;this.list_select.visible=!1;this.nameKey=null==g_serverconfigtxt.gamelist&&null==g_serverconfigtxt.gamelist1?
"sServerName":"serverName";this.last_select_index=-1;Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.on("mouseFocus",this,this.mouseFocus);this.btn_login.on(Laya.Event.CLICK,this,this.onlogin);this.btn_zc.on(Laya.Event.CLICK,this,this.onSignInClick);this.btn_xg.on(Laya.Event.CLICK,this,this.onChangePasClick);this.btn_backserver.on(Laya.Event.CLICK,this,this.backserver);this.btn_closeaccount_qishiyou.on(Laya.Event.CLICK,
this,this.backserver);this.btn_server_quit.on(Laya.Event.CLICK,this,this.serverquit);this.btn_qq.on(Laya.Event.CLICK,this,this.qqlogin);this.label_qq.on(Laya.Event.CLICK,this,this.qqlogin);this.btn_wx.on(Laya.Event.CLICK,this,this.wxlogin);this.label_wx.on(Laya.Event.CLICK,this,this.wxlogin);this.tex_name.on(Laya.Event.FOCUS,this,this.OnFocus);this.tex_psw.on(Laya.Event.FOCUS,this,this.OnFocus);this.tex_name.on(Laya.Event.BLUR,this,this.OnBlur);this.tex_psw.on(Laya.Event.BLUR,this,this.OnBlur);this.username.on(Laya.Event.FOCUS,
this,this.OnFocus);this.username.on(Laya.Event.BLUR,this,this.OnBlur);this.password.on(Laya.Event.FOCUS,this,this.OnFocus);this.password.on(Laya.Event.BLUR,this,this.OnBlur);this.confirmpassword.on(Laya.Event.FOCUS,this,this.OnFocus);this.confirmpassword.on(Laya.Event.BLUR,this,this.OnBlur);Laya.stage.on("ResetLogin",this,this.ResetLogin);Laya.stage.on(Laya.Event.CLICK,this,this.clickAni);this.notice_ok.on(Laya.Event.CLICK,this,function(){this.notice_bg.visible=!1;this.lastSelectControl()});this.know_notice1_btn.on(Laya.Event.CLICK,
this,function(){this.notice1_bg.visible=!1;this.clickNoticeShow1Copy&&(this.clickNoticeShow1Copy=!1)});this.notic_show.on(Laya.Event.CLICK,this,function(){this.updateNoticeContentArray(this.noticeListData.noticeContentArray[0]);this.notice_bg.visible=!0});this.notic_show1.on(Laya.Event.CLICK,this,function(){this.newGetNotice(this.notice1_panel,"data/json/notice1.txt");this.notice1_bg.visible=!0});this.notice_show1_copy.on(Laya.Event.CLICK,this,function(){this.clickNoticeShow1Copy=!0;this.imageLogin.visible=
!1;this.newGetNotice(this.notice1_panel,"data/json/notice1.txt");this.notice1_bg.visible=!0});this.change_select.on(Laya.Event.CLICK,this,function(){this.last_select.visible=!1;this.list_select.visible=!0;this.img_account_list.visible=!0;this.notice_show1_copy.visible=!0;this.img_select.visible=!1;this.showHistoryList();this.lastSelectControl()});setTimeout(function(){d.checkBox_agreeMent.selected="true"!=GameUtil.getSaveData("agreeagreement")?!1:!0},1E3);this.img_userAgreement_bg.visible=!1;this.img_privatePolicy_bg.visible=
!1;this.newGetNotice(this.panel_userAgreement,"data/json/userAgreement.txt");this.newGetNotice(this.panel_privatePolicy,"data/json/privatePolicy.txt");this.checkBox_agreeMent.on(Laya.Event.CHANGE,this,this.onAgreement);this.txt_userAgreement.on(Laya.Event.CLICK,this,function(){this.img_userAgreement_bg.visible=!0});this.txt_privatePolicy.on(Laya.Event.CLICK,this,function(){this.img_privatePolicy_bg.visible=!0});this.no_agreement.on(Laya.Event.CLICK,this,function(){this.img_userAgreement_bg.visible=
!1});this.no_policy.on(Laya.Event.CLICK,this,function(){this.img_privatePolicy_bg.visible=!1});this.clickStartIntervalTime=Laya.Browser.now();this.start_select.on(Laya.Event.CLICK,this,function(){if(this.agreeUserAgreementAndPrivatePolicy()){if(this.canClickStartBtn()){var l="",p=this.serveArray[this.last_name.idx],q=this.getHistoryLogin(),r=GameUtil.getSaveData("lastLoginIdx")||this.lastLoginIdxData;null!=q[0]&&-1!=q[0].indexOf(r)&&q[0].split("+")[1]===p.serverName&&(l=q[0]);null!=q[1]&&-1!=q[1].indexOf(r)&&
q[1].split("+")[1]===p.serverName&&(l=q[1]);p=this.getGroupAndIndexByLastNameIdx(l);this.serve_list.selectedIndex=-1==p[0]?0:p[0];this.chooseserver(p[0]);this.groupListSelect(p[1],!0);GameUtil.setSaveData("lastLoginIdx",l.split("+")[2]+"");this.lastLoginIdxData=l.split("+")[2]+""}this.clickStartIntervalTime=Laya.Browser.now()}});var n=GameUtil.getSaveData("role_set_cfglist");n&&(GlobalCfglist=JSON.parse(n),Laya.SoundManager.soundVolume=GlobalCfglist.gameVoice/100,GlobalCfglist.backmusic?Laya.SoundManager.setMusicVolume(1):
Laya.SoundManager.setMusicVolume(0));this.btn_zc1.on(Laya.Event.CLICK,this,function(){this.agreeUserAgreementAndPrivatePolicy()&&(this.reg_bg.visible=!0)});this.btn_reg.on(Laya.Event.CLICK,this,this.regAccount);this.btn_reback.on(Laya.Event.CLICK,this,function(){this.username.text="";this.password.text="";this.confirmpassword.text="";this.reg_bg.visible=!1});this.btn_closeaccount_list.on(Laya.Event.CLICK,this,function(){this.list_select.visible=!1;this.img_select.visible=!0;this.img_account_list.visible=
!1;this.last_select.visible=!0;this.backSeverByNoChooseServer()});n=GameUtil.getSaveData("username");var c=GameUtil.getSaveData("userpsw");null==n?this.tex_name.text="":this.tex_name.text=n;null==c?this.tex_psw.text="":this.tex_psw.text=c;Laya.SoundManager.useAudioMusic=!1;GameUtil.PlayMusicFormat(S_LOGIN_GAME);this.str_length=20;n=Laya.stage.getChildByName("loading");null==n&&(n=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),n=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/loading/",
1,8,100,!0,!1,n),n.name="loading",n.zOrder=999999);this.show_qq_wx(!1);if(window.location&&window.location.href&&(n=window.location.href,""!=n)){c=n.indexOf("gdyusername=");var h=n.indexOf("gdypassword=");if(-1!=c&&-1!=c)var m=n.slice(c+12,h-1),g=n.slice(h+12,n.length);m&&g&&(this.tex_name.text=m,this.tex_psw.text=g)}m="";document&&document.referrer&&-1!=document.referrer.indexOf("p=")?m=document.referrer:window.location&&window.location.href&&-1!=window.location.href.indexOf("p=")&&(m=window.location.href);
""!=m&&(g=m.indexOf("p="),-1!=g&&(m=m.slice(g+2,m.length),g_ChannelId=parseInt(m)));if(this.serversite=Laya.Loader.getRes("json/serversite.txt")){this.serversite=this.serversite.toString();this.serversite=this.serversite.split("\r\n");this.routeSel.labels="";for(m=0;m<this.serversite.length;m++)this.routeSel.labels+="\u7ebf\u8def"+(m+1)+",";this.routeSel.labels+="\u9ed8\u8ba4";this.routeSel.y=455;this.routeSel.x=(870-this.routeSel.width)/2}m=GameUtil.getSaveData("routeSel");if(null==m||"null"==m||
void 0==m)m=-1;this.routeSel.selectedIndex=m&&-1!=m?m:this.routeSel._childs.length-1;this.routeSel.selectHandler=new Laya.Handler(this,this.routeSelect);this.btn_forgetPsw.on(Laya.Event.CLICK,this,function(){this.bg1.visible=!0});this.btn_reback1.on(Laya.Event.CLICK,this,this.closeFind);this.btn_FindPwd.on(Laya.Event.CLICK,this,function(){Sendmessage.getBackPassword(this.find_name.text+"\t"+this.find_q1.text+"\t"+this.find_a1.text+"\t"+this.find_q2.text+"\t"+this.find_a2.text+"\t"+this.find_birthday.text);
this.closeFind()});this.btn_findPas.on(Laya.Event.CLICK,this,function(){this.tex_psw.text=this.pas_findPas.text;this.img_findPas.visible=!1;this.pas_findPas.text=""});Laya.stage.on("dupdate_account",this,function(){this.set_name.text=this.tex_name.text;this.bg2.visible=!0});this.btn_reback2.on(Laya.Event.CLICK,this,this.closeUpdate);this.btn_update.on(Laya.Event.CLICK,this,function(){if(""!=this.set_birthday.text&&""!=this.set_q1.text&&""!=this.set_a1.text&&""!=this.set_q2.text&&""!=this.set_a2.text&&
this.checkBirthday(this.set_birthday.text)){var l=new TUserEntry(this.tex_name.text,"jauTec@chuanqi.com",this.tex_psw.text),p=new TUserEntryAdd(this.tex_name.text,this.tex_psw.text);l.sQuiz_20=this.set_q1.text;l.sAnswer_12=this.set_a1.text;p.sBirthDay_10=this.set_birthday.text;p.sQuiz2_20=this.set_q2.text;p.sAnswer2_12=this.set_a2.text;Sendmessage.sendUpdateAccount(l.toArray(this.str_length),p.toArray(this.str_length))}});this.cache.visible=!1;cur_use_app&&(this.cache.visible=!0,this.cache.on(Laya.Event.CLICK,
this,function(){Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u6e05\u7406\u672c\u5730\u8d44\u6e90...",callfn:function(){}}]);sendtonative("clearAllCache")}));getisSimulator();this.real_ui.btn_ok.on(Laya.Event.CLICK,this,function(){var l=this.real_ui.ti_id.text+"/"+this.real_ui.ti_name.text+"/"+this.tex_name.text+"/"+this.tex_psw.text;console.log("--\x3e ",l);Sendmessage.SendUpdatidcard(l)});Laya.stage.on("getGameList",this,this.listInitShow);Laya.stage.on("GameConfigSuccess",this,this.enterGameFunction)};
f.prototype.checkIsQSY=function(){return isQiShiYou=g_serverconfigtxt.brapp_id};f.prototype.checkBoRan=function(){return 3==cur_game_type||7==cur_game_type};f.prototype.backSeverByNoChooseServer=function(){this.hasChooseServer||this.backserver()};f.prototype.canClickStartBtn=function(){return 600<=Laya.Browser.now()-this.clickStartIntervalTime};f.prototype.onAgreement=function(){GameUtil.setSaveData("agreeagreement",this.checkBox_agreeMent.selected?"true":"false")};f.prototype.clickAni=function(d){var n=
GameUtil.InstanceOfMem(GameSceneUI);if(!n||d.target!=n.maplayer||ObjectManage.mouseClickCheck())d=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),null!=this.lastClickAnim&&Animationmodule.removeAni(this.lastClickAnim),this.lastClickAnim=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/mouse_click/",10,12,8,!1,!0,d),this.lastClickAnim.name="mouseclick"};f.prototype.show_qq_wx=function(d){this.label_qq.visible=d;this.label_wx.visible=d;this.btn_qq.visible=d;this.btn_wx.visible=d;if(this.label_qqwx.visible=
d)this.panel_login.y=80};f.prototype.OnFocus=function(d){d=d.name;!cur_use_app||"tex_name"!=d&&"tex_psw"!=d?!cur_use_app||"username"!=d&&"useremail"!=d?!cur_use_app||"password"!=d&&"confirmpassword"!=d||(this.reg_bg.top=-100):this.reg_bg.top=0:this.imageLogin.centerY=-150};f.prototype.OnBlur=function(d){d=d.name;!cur_use_app||"tex_name"!=d&&"tex_psw"!=d?!cur_use_app||"username"!=d&&"useremail"!=d&&"password"!=d&&"confirmpassword"!=d||(this.reg_bg.y=40):this.imageLogin.centerY=0};f.prototype.routeSelect=
function(d){d==this.routeSel._childs.length-1||-1==d?GameUtil.setSaveData("routeSel",-1):GameUtil.setSaveData("routeSel",d);(d=GameUtil.getSaveData("routeSel"))&&this.serversite&&(i=-1==d?Math.floor(100*Math.random()%this.serversite.length):d,Laya.URL.setsite(this.serversite[i]),user_site=this.serversite[i])};f.prototype.mouseFocus=function(d){d?this.tex_name.focus=!0:this.tex_psw.focus=!0};f.prototype.regAccount=function(){var d=this.username.text,n=this.password.text,c=this.confirmpassword.text;
""==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u540d\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):/^[\u4e00-\u9fa5]+$/.test(d)?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u540d\u4e0d\u80fd\u5305\u542b\u4e2d\u6587",callfn:function(){}}]):4>d.length?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u5fc5\u987b\u5927\u4e8e\u6216\u7b49\u4e8e4\u4e2a\u5b57\u7b26",callfn:function(){}}]):""==n?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",
callfn:function(){}}]):0<=n.indexOf(" ")?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u5305\u542b\u7a7a\u683c\u5b57\u7b26",callfn:function(){}}]):""==c?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):n!=c?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",callfn:function(){}}]):4>n.length||4>c.length?Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e4\u4e2a\u5b57\u7b26",callfn:function(){}}]):this.checkBirthday(this.reg_birthday.text)?""==this.reg_que1.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u95ee\u9898\u4e00\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""==this.reg_que2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u95ee\u9898\u4e8c\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""==this.reg_ans1.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7b54\u6848\u4e00\u4e0d\u80fd\u4e3a\u7a7a",
callfn:function(){}}]):""==this.reg_ans2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7b54\u6848\u4e8c\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):this.reg_que1.text==this.reg_que2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u95ee\u9898\u4e00\u548c\u95ee\u9898\u4e8c\u4e0d\u80fd\u76f8\u540c",callfn:function(){}}]):(c=new TUserEntry(d,"jauTec@chuanqi.com",n,this.reg_que1.text,this.reg_ans1.text),d=new TUserEntryAdd(d,n,this.reg_que2.text,this.reg_ans2.text,this.reg_birthday.text),
isSocketConnected&&Sendmessage.sendNewAccount(c.toArray(this.str_length),d.toArray(this.str_length))):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u751f\u65e5\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u586b\u5199\u3002",callfn:function(){}}])};f.prototype.noticeItemHeight=0;f.prototype.updateNoticeContentArray=function(d){var n=d[d.length-1].positionY+d[d.length-1].fontSize;this.notice_panel.repeatY=n<this.notice_panel.height?0:d.length;this.noticeItemHeight=Math.ceil(n/d.length);this.presetNoticeItemHeight(this.notice_panel._cells,
this.noticeItemHeight);this.notice_panel.array=d;this.notice_panel.scrollBar.value=0};f.prototype.presetNoticeItemHeight=function(d,n){var c,h;for(h in d)if(c=d[h])c.height=n};f.prototype.updateNoticeContent=function(d,n){n=d.dataSource;d.fontSize=n.fontSize;d.color=Get2RGB(n.colorValue);d.text=n.content;d.height=this.noticeItemHeight;d.pos(n.positionX,n.positionY)};f.prototype.initNoticeContentList=function(){this.notice_bg.visible=!0;this.notice_panel.selectEnable||(this.notice_panel.vScrollBarSkin=
"",this.notice_panel.repeatX=1,this.notice_panel.selectEnable=!0,this.notice_panel.renderHandler=new Laya.Handler(this,this.updateNoticeContent));this.updateNoticeContentArray(this.noticeListData.noticeContentArray[0])};f.prototype.initNoticeTitleList=function(){this.notice_bg.visible=!0;this.noticeListData||(this.noticeListData=Laya.Loader.getRes("data/json/test.json"));this.notice_directory_list.selectEnable?this.notice_directory_list.array=this.noticeListData.titleDirectoryArray:(this.selectNoticeTitleIndex=
0,this.notice_directory_list.vScrollBarSkin="",this.notice_directory_list.repeatX=1,this.notice_directory_list.selectEnable=!0,this.notice_directory_list.selectHandler=new Laya.Handler(this,this.chooseNoticeTitleDirectory),this.notice_directory_list.renderHandler=new Laya.Handler(this,this.updateNoticeDirectory),this.notice_directory_list.array=this.noticeListData.titleDirectoryArray,this.notice_title_lab.text=this.noticeListData.titleDirectoryArray[0].titleContent);this.noticeListData.titleDirectoryArray[0]||
(this.notice_bg.visible=!1,this.noNoticeHandle())};f.prototype.chooseNoticeTitleDirectory=function(d){this.notice_title_lab.text=this.notice_directory_list.selectedItem.titleContent;this.notice_directory_list.selection._childs[0].selected=!0;this.selectNoticeTitleIndex=d;for(var n=0;n<this.notice_directory_list._childs.length;n++)this.notice_directory_list._childs[n]._childs[0].selected=n==d;this.updateNoticeContentArray(this.noticeListData.noticeContentArray[d])};f.prototype.updateNoticeDirectory=
function(d,n){var c=d._childs;c[0].label=d.dataSource.titleContent;c[1].visible=d.dataSource.newTitle;c[0].selected=this.selectNoticeTitleIndex==n};f.prototype.onselcetserver=function(d){d=d.split("/");for(var n=0;n<d.length;n++)if(""!=d[n]){var c=fnDecode6BitBuf(d[n],d[n].length,!1);c=TClientList(c.pszDest);""!=c.sServerName&&this.serveArray.push(c)}this.groupServerList();this.serve_list.vScrollBarSkin="";this.serve_list.repeatX=1;this.serve_list.repeatY=9;this.serve_list.itemRender=a;this.serve_list.selectEnable=
!0;this.serve_list.selectHandler=new Laya.Handler(this,this.chooseserver);this.serve_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.serve_list.array=this.group_list};f.prototype.getGroupAndIndexByLastNameIdx=function(d){var n=[],c=0,h=(void 0===d?"":d).split("+");d=h[2];for(h=h[1];c<this.group_list.length;){for(var m=this.group_list[c],g=0;g<m.group_list.length;g++){var l=m.group_list[g],p=null==l.id?l.nListIdx:l.id;if(l[this.nameKey]==h&&p==d){n[0]=c;n[1]=g;break}}c+=1}return n};
f.prototype.groupServerList=function(){for(var d=0,n={};null!=this.serveArray[d]&&void 0!=this.serveArray[d];){var c=this.serveArray[d],h=""==c.sGroupName?"default":c.sGroupName;if(null==n[h]){var m={group_name:c.sGroupName,group_list:[]};""==c.sGroupName&&(m.group_name="\u9ed8\u8ba4\u5206\u533a");m.group_list=m.group_list.concat(c);n[h]=m}else n[h].group_list.push(c);d++}for(h in n)this.group_list.push(n[h])};f.prototype.groupServerListWEB=function(){for(var d=0,n={};null!=this.serveArray[d]&&void 0!=
this.serveArray[d];){var c=this.serveArray[d],h=""==c.groupName?"default":c.groupName;if(null==n[h]){var m={group_name:c.groupName,group_list:[]};""==c.groupName&&(m.group_name="\u9ed8\u8ba4\u5206\u533a");m.group_list=m.group_list.concat(c);n[h]=m}else n[h].group_list.push(c);d++}for(h in n)this.group_list.push(n[h])};f.prototype.GetBaseConfig=function(d,n){if(""!=n){if(0==d){var c=n.split("/");if(2<=c.length){if(""!=c[0]){var h=fnDecode6BitBuf(c[0],c[0].length,!1);g_serverconfig=TBaseConfig(h.pszDest);
ItemHeard=1==g_serverconfig.nHelmet;g_rolemovespeed=g_serverconfig.nSpeed;g_openhook=g_serverconfig.nAutohook;g_GameType=g_serverconfig.nUimode;g_simScreen=g_serverconfig.nSimScreen;1==g_serverconfig.nAutopick?g_autopick=!0:g_autopick=!1;g_npcTxtSize=g_serverconfig.nNpcTxtSize;g_strokewidth=cur_use_app?g_serverconfig.nAppTxtSize:g_serverconfig.nH5TxtSize;console.log("BaseConfig ok")}""!=c[1]&&(h=fnDecode6BitBuf(c[1],c[1].length,!1),g_GameConfig=TGameConfig(h.pszDest),console.log("GameConfig ok"))}}if(1==
d){console.log("GetDiyButtion ok");c=n.split("/");for(var m=0;m<c.length;m++)""!=c[m]&&(h=fnDecode6BitBuf(c[m],c[m].length,!1),h=TDiyButton(h.pszDest),1==h.boOpen&&g_customBtn.push(h))}if(3==d){console.log("GetDiyGold ok");c=n.split("/");for(m=0;m<c.length;m++)""!=c[m]&&(h=fnDecode6BitBuf(c[m],c[m].length,!1),d=TDiyGold(h.pszDest),g_gameGold.push(d),d&&eval(d.sVarName)&&(eval(d.sVarName).key=d.sGoldName));Sendmessage.clsocket.End();Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT);this.str_length=20;
this.txt_tip.visible=!0;this.can_click=!1;Animationmodule.removeAniname("loading")}}else 1!=d&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u914d\u7f6e\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}])};f.prototype.GetBase2Config=function(d,n){if(""!=n){if(0==d){var c=fnDecode6BitBuf(n,n.length,!1);g_serverconfig=TBaseConfig(c.pszDest);ItemHeard=1==g_serverconfig.nHelmet;g_rolemovespeed=g_serverconfig.nSpeed;g_openhook=g_serverconfig.nAutohook;g_GameType=g_serverconfig.nUimode;
g_simScreen=g_serverconfig.nSimScreen;1==g_serverconfig.nAutopick?g_autopick=!0:g_autopick=!1;g_npcTxtSize=g_serverconfig.nNpcTxtSize;g_strokewidth=cur_use_app?g_serverconfig.nAppTxtSize:g_serverconfig.nH5TxtSize;console.log("BaseConfig ok")}2==d&&(c=fnDecode6BitBuf(n,n.length,!1),g_GameConfig=TGameConfig(c.pszDest),console.log("GameConfig ok"));if(1==d){console.log("GetDiyButtion ok");var h=n.split("/"),m=null!=g_serverconfigtxt.gamelist;if(1==m)return;for(m=0;m<h.length;m++)""!=h[m]&&(c=fnDecode6BitBuf(h[m],
h[m].length,!1),c=TDiyButton(c.pszDest),1==c.boOpen&&g_customBtn.push(c))}if(3==d&&(console.log("GetDiyGold ok"),h=n.split("/"),m=null!=g_serverconfigtxt.gamelist,1!=m)){for(m=0;m<h.length;m++)""!=h[m]&&(c=fnDecode6BitBuf(h[m],h[m].length,!1),d=TDiyGold(c.pszDest),g_gameGold.push(d),d&&eval(d.sVarName)&&(eval(d.sVarName).key=d.sGoldName));Sendmessage.clsocket.End();Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT);this.str_length=20;this.txt_tip.visible=!0;this.can_click=!1;Animationmodule.removeAniname("loading")}}else 1!=
d&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u914d\u7f6e\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}])};f.prototype.chooseserver=function(d){var n=this.serve_list.selectedItem,c=null==n?null:n;this.account_list.vScrollBarSkin="";this.account_list.selectEnable=!0;this.account_list.renderHandler=null==g_serverconfigtxt.gamelist?new Laya.Handler(this,this.UpdateGroupItem):new Laya.Handler(this,this.UpdateGroupItemWEB);this.account_list.selectHandler=new Laya.Handler(this,this.newSelectServer);
this.account_list.array=null==c?[]:c.group_list;this.account_list.refresh();if(null!=n){c=0;this.selectReset();for(var h=0;h<this.serve_list.cells.length;h++){var m=this.serve_list.cells[h].dataSource;if(m&&m.group_name==n.group_name){c=h;break}}this.serve_list.cells[c]._childs[0].selected=!0}this.last_select_index!=d&&(this.last_select_index=d)};f.prototype.getIndexByServerId=function(d,n){if(0<this.serveArray.length)for(var c=0;c<this.serveArray.length;c++)if(this.serveArray[c].id==n)return c;return d};
f.prototype.newSelectServer=function(d){if(d=this.groupListSelect(d))this.img_select.visible=!0,this.last_name.text=d.serverName,this.last_name.idx=this.getIndexByServerId(this.last_name.idx,d.id),Animationmodule.removeAniname("fireQiu"),2!=d.isConnection&&(d=new Laya.Point(13,13),Animationmodule.playframe(!1,this.change_select,"gameres/animation/serverhot/",1,10,100,!0,!1,d).name="fireQiu"),this.list_select.visible=!1,this.img_select.visible=!0,this.img_account_list.visible=!1,this.last_select.visible=
!0};f.prototype.selectReset=function(){for(var d=0;d<this.serve_list.cells.length;d++){var n=this.serve_list.cells[d];null!=n&&(n._childs[0].selected=!1)}};f.prototype.selectServerLogin=function(d,n){n=void 0===n?!1:n;if(d){checkNative();var c=null==g_serverconfigtxt.gamelist?d.sServerip:d.serverAddr,h=null==g_serverconfigtxt.gamelist?d.nPort:d.port;-1!=c.indexOf("http:")?sendtonative("gotowebview","openurl:"+c):(n&&Sendmessage.connectLoginSvr(c,h),g_server_area=d,null==g_serverconfigtxt.gamelist?
(GAME_IP=d.sServerip,GAME_PORT=parseInt(d.nPort),port_key=d.sPassWord,g_eventBtn=d.btFun.slice(0,10),g_ServerName=d.sServerName):(GAME_IP=d.serverAddr,GAME_PORT=parseInt(d.port),port_key=d.passWord,g_eventBtn=d.btFun.slice(0,10),g_ServerName=d.serverName),GameUtil.setSaveData("lastserver",g_ServerName),GameUtil.isIOSAndQSY&&GameUtil.getSettingDataInIOS("lastserver"))}};f.prototype.refreshGameOnLoginPageTimeOut=function(){Laya.timer.once(15E3,this,function(){0==isSocketConnected&&Laya.Browser.window.location.reload()})};
f.prototype.groupListSelect=function(d,n){n=void 0===n?!1:n;this.currAreaCell=d=this.account_list.array[d];if(null!=d&&void 0!=d){var c=""==d.groupName?"\u9ed8\u8ba4\u5217\u8868":d.groupName;c=c+"+"+d.serverName+"+"+d.id;GameUtil.setSaveData("lastLoginIdx",d.id+"");this.lastLoginIdxData=d.id+"";this.saveHistoryLogin(c);this.splitGameConfigWEB(d,n)}this.list_select.visible=!1;this.img_account_list.visible=!1;if(d)return d};f.prototype.onselcetsection=function(d){for(var n=0;n<d.length;n+=2)if(""!=
d[n]){var c=d[n].split("|");this.sectionArray.push(c)}Sendmessage.sendSelectServer(d[0]);GameUtil.PlayMusicFormat(S_BUTTON_1);g_Server_Name=d[0];n=GameUtil.getSaveData("username");g_LogSocket.AddGameDataLog(502,n,0,d[0],"")};f.prototype.UpdateItem=function(d,n){d.setlable(d.dataSource,this)};f.prototype.UpdateSection=function(d,n){d.setlable(d.dataSource,this)};f.prototype.UpdateGroupItem=function(d,n){var c=d._childs[1],h=d.dataSource;d._childs[0].label=h.sServerName;c&&(c.skin=0==this.serve_list.selectedIndex&&
0==n?"gameres/ui/area_blue.png":2==h.isConnection?"gameres/ui/area_gray.png":"gameres/ui/area_red.png")};f.prototype.UpdateGroupItemWEB=function(d,n){var c=d._childs[1],h=d.dataSource;d._childs[0].label=h.serverName;c&&(c.skin=0==this.serve_list.selectedIndex&&0==n?"gameres/ui/area_blue.png":2==h.isConnection?"gameres/ui/area_gray.png":"gameres/ui/area_red.png")};f.prototype.UpdateGroupItemQiShiYou=function(d,n){d._childs[0].label=d.dataSource.arer_btn.label};f.prototype.ontest=function(){var d=GameUtil.InstanceOfMem(ShousWinUI);
d||(d=new ShousWin,Laya.stage.addChild(d))};f.prototype.onlogin=function(){if(cur_use_app&&"true"==app_simulator&&g_serverconfig.boVirtual)Laya.Browser.window.location.reload();else if(this.agreeUserAgreementAndPrivatePolicy())if(this.img_register.visible=!1,GameUtil.PlayMusicFormat(S_BUTTON_1),""==this.tex_name.text||""==this.tex_psw.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u540d\u6216\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]);else if(isSocketConnected){var d=
GameApi.Trim(this.tex_name.text,"g"),n=GameApi.Trim(this.tex_psw.text,"g"),c=this.getActualLoginInfoByPlatform(d,n);Sendmessage.sendLogin(c[0],c[1]);GameUtil.setSaveData("username",d);GameUtil.setSaveData("userpsw",n);g_relogname=d;g_relogpsw=n;this.ResetLogin();LoginFunction(d,n)}};f.prototype.getActualLoginInfoByPlatform=function(d,n){if(g_serverconfigtxt&&g_serverconfigtxt.onGDYPlatform)return g_RoleAccountId=d+"@2",[d.toLowerCase()+"@2",n];g_RoleAccountId=d;return[d.toLowerCase(),n]};f.prototype.onSvrConnect=
function(){if(this.reqservering)this.reqservering=!1,Sendmessage.sendreqserver(server_uuid);else if(isSocketConnected=!0,this.img_select.visible=!1,this.txt_tip.visible=!1,g_LogSocket.AddGameDataLog(200,"",0,"",""),user_version)this.imageLogin.visible=!1;else if(isWebForYYY())showAlert(g_YYY);else{this.checkIsQSY()?this.imageLogin.visible=!1:this.imageLogin.visible=0==cur_game_type;this.checkBoRan()&&(this.imageLogin.visible=!1);this.imageLogin.visible&&this.refreshGameOnLoginPageTimeOut();0==cur_game_type&&
(this.notice_show1_copy.visible=!0);var d=window.location.href;-1!=d.indexOf("token=")&&(d=d.split("token=")[1],Sendmessage.sendLoginToken(d))}};f.prototype.onMsgFromSvr=function(d){if("!"===d[d.length-1]){var n=this,c=d.substring(0,d.length-1);d=c.substring(0,16);var h=c.substring(16,c.length);c=DecodeMessage(d);h=DecodeString(h);switch(c.ident){case SM_PASSWD_FAIL:this.onPasswordErrorResult(c.record);break;case SM_PASSOK_SELECTSERVER:this.onGetServerListResult(h,c.series);break;case SM_SELECTSERVER_OK:this.onSelectSvrResult(h);
break;case SM_NEWID_FAIL:this.onRegErrorResult(c.record);break;case SM_NEWID_SUCCESS:this.onRegSuccess();break;case SM_WEBH5VERSION:Animationmodule.removeAniname("loading");GameUtil.setSaveData("cl_version",c.record+"."+c.param+"."+c.tag);if(user_version&&-1!=user_version.indexOf("sdkforyyy"))this.imageLogin.visible=!1,1==user_tpye?jscall.hello("opensdk"):2==user_tpye&&Laya.Browser.window.webkit.messageHandlers.jscall.postMessage("opensdk");else if(user_version&&-1!=user_version.indexOf("sdkforbaidu"))this.imageLogin.visible=
!1,1==user_tpye?jscall.hello("openbaidu"):2==user_tpye&&Laya.Browser.window.webkit.messageHandlers.jscall.postMessage("openbaidu");else if(0!=cur_game_type)if(this.imageLogin.visible=!1,3==cur_game_type)2<=Sendmessage.clsocket.getIPPortCount()&&MRGameLogin();else if(4==cur_game_type&&0!=g_MRGameH5_userId)showAlert(g_MRGameH5_userId);else if(7==cur_game_type)GameSdk.login(showAlert);else Laya.timer.once(500,this,quicksdklogin);""!=h&&g_LogSocket.OpenServer(h);cur_use_app&&"1"==g_serverconfigtxt.qqweixin&&
this.show_qq_wx(c.series);break;case SM_WECHATANDQQ:this.arerArrayQSY=[];var m=h.split("|");for(d=0;d<m.length;d++){var g=m[d].split("/");5===g.length&&this.arerArrayQSY.push({arer:g[0],id:+g[1],punching:g[2],password:g[3],time:+g[4]})}if(1<this.arerArrayQSY.length){for(d=0;d<this.arerArrayQSY.length;d++)for(h=0;h<this.arerArrayQSY.length-1;h++)this.arerArrayQSY[h].id>this.arerArrayQSY[h+1].id&&(c=this.arerArrayQSY[h],this.arerArrayQSY[h]=this.arerArrayQSY[h+1],this.arerArrayQSY[h+1]=c);this.img_qishiyou_list.visible=
!0;this.qishiyou_account_list.vScrollBarSkin="gameres/ui/vscroll.png";this.qishiyou_account_list.selectEnable=!0;this.qishiyou_account_list.renderHandler=new Laya.Handler(this,this.UpdateGroupItemQiShiYou);this.qishiyou_account_list.selectHandler=new Laya.Handler(this,function(l){l=this.qishiyou_account_list.array[l];this.tex_name.text=l.punching;this.tex_psw.text=l.password;null!=l.arer_btn&&this.saveHistoryLoginQiShiYou(l);this.onlogin();this.qishiyou_account_list.visible=!0});this.qishiyou_account_list.array=
[];c=this.arerArrayQSY[0];h=this.arerArrayQSY[1];for(d=0;d<this.arerArrayQSY.length;d++)this.qishiyou_account_list.array.push({arer_btn:{label:this.arerArrayQSY[d].arer},punching:this.arerArrayQSY[d].punching,password:this.arerArrayQSY[d].password}),2<this.arerArrayQSY.length&&(c.time<this.arerArrayQSY[d].time&&(c=this.arerArrayQSY[d]),h.time<=this.arerArrayQSY[d].time&&c.time>=this.arerArrayQSY[d].time&&(c.arer!==this.arerArrayQSY[d].arer?h=this.arerArrayQSY[d]:this.arerArrayQSY[d-1]&&(h=this.arerArrayQSY[d-
1])));this.qishiyou_account_list.refresh();this.qishiyou_arer_near1.label=c.arer;this.qishiyou_arer_near1.visible=!0;console.log("\u6700\u8fd1\u767b\u5f551:"+c.arer);this.qishiyou_arer_near1.once(Laya.Event.CLICK,this,this.historyLogin.bind(this,c));this.qishiyou_arer_near2.label=h.arer;this.qishiyou_arer_near2.visible=!0;console.log("\u6700\u8fd1\u767b\u5f552:"+h.arer);this.qishiyou_arer_near2.once(Laya.Event.CLICK,this,this.historyLogin.bind(this,h))}else if(1===this.arerArrayQSY.length)if(1==c.tag){console.log(c.tag,
h);d=this.arerArrayQSY[0].punching;c=this.arerArrayQSY[0].password;this.tex_name.text=d;this.tex_psw.text=c;1==cur_game_type||2==cur_game_type||3==cur_game_type||4==cur_game_type?(this.img_account.visible=!1,this.onlogin()):this.img_account.visible=!0;this.account_name.text=d;this.account_psw.text=c;this.btn_login.visible=!1;this.btn_backserver.visible=!1;this.btn_know.on(Laya.Event.CLICK,this,function(){this.img_account.visible=!1;n.onlogin()});if(cur_use_app&&!this.checkBoRan())Laya.timer.once(100,
this,function(){onGeneratePNG(this.img_account)});1==h5BoxCheck()?OtherFunction("\u76d2\u5b50"+this.tex_name.text,E_PLATFORMSDK.BOX):OtherFunction("\u6cca\u7136"+this.tex_name.text,E_PLATFORMSDK.DOUYIN)}else console.log(c.tag,h),quick_Server_ID=parseInt(h.split("/")[1]),quick_Server_ID=null==quick_Server_ID||0==quick_Server_ID?1:quick_Server_ID,this.imageLogin.visible=this.checkIsQSY()?!1:!0,this.checkBoRan()&&(this.imageLogin.visible=!1),this.refreshGameOnLoginPageTimeOut(),d=this.arerArrayQSY[0].punching,
c=this.arerArrayQSY[0].password,this.tex_name.text=d,this.tex_psw.text=c,GameUtil.setSaveData("username",d),GameUtil.setSaveData("userpsw",c),this.onlogin();break;case SM_GETSERVERLIST:null==g_serverconfigtxt.gamelist&&(Animationmodule.removeAniname("loading"),this.onselcetserver(h),content_list=h,this.initNoticeTitleList(),this.initNoticeContentList(),this.showSelect());break;case SM_GETH5CONFIG:99==c.tag?this.GetBase2Config(c.record,h):this.GetBaseConfig(c.record,h);cur_use_app&&"true"==app_simulator&&
g_serverconfig.boVirtual&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u65e0\u6cd5\u4f7f\u7528\u6a21\u62df\u5668\u767b\u9646\uff01",callfn:function(){Laya.Browser.window.location.reload()}}]);break;case SM_RANDOMCODE:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5f00\u542f\u4e86\u9a8c\u8bc1\uff0c\u65e0\u6cd5\u767b\u5f55\u3002",callfn:function(){}}]);break;case SM_UPDATIDCARD:this.real_ui.visible=!0;break;case SM_UPDATIDCARD_FAIL:switch(c.record){case 0:Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u8ba4\u8bc1\u7cfb\u7edf\u6709\u8bef\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5904\u7406\u3002",callfn:function(){}}]);break;case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5b9e\u540d\u9a8c\u8bc1\u5931\u8d25\uff01\u8bf7\u8f93\u5165\u4fe1\u606f\u4e0d\u5b8c\u6574\u3002",callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5b9e\u540d\u9a8c\u8bc1\u5931\u8d25\uff01\u8fd4\u56de\u4fe1\u606f\u6709\u8bef\u3002",callfn:function(){}}]);break;case -3:Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u5b9e\u540d\u9a8c\u8bc1\u5931\u8d25\uff01\u8bf7\u8f93\u5165\u771f\u5b9e\u4fe1\u606f\u3002",callfn:function(){}}])}break;case SM_GETBACKPASSWD_SUCCESS:this.findPasword_s(h);break;case SM_GETBACKPASSWD_FAIL:0==c.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u8d26\u53f7\u4e0d\u5b58\u5728\u3002",callfn:function(){}}]):-1==c.record||-3==c.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4fdd\u62a4\u8d44\u6599\u6216\u751f\u65e5\u4e0d\u6b63\u786e\u3002",
callfn:function(){}}]):-4==c.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u5173\u95ed\u5bc6\u7801\u627e\u56de\u670d\u52a1\u3002",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u586b\u5199\u6b63\u786e\u4fe1\u606f\u3002",callfn:function(){}}]);break;case SM_NEEDUPDATE_ACCOUNT:Laya.stage.event("dupdate_account");break;case SM_UPDATEID_SUCCESS:n=this;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u7684\u5e10\u53f7\u4fe1\u606f\u66f4\u65b0\u6210\u529f\u3002\r\n\u8bf7\u59a5\u5584\u4fdd\u7ba1\u60a8\u7684\u5e10\u53f7\u548c\u5bc6\u7801\u3002\r\n\u5e76\u4e14\u4e0d\u8981\u56e0\u4efb\u4f55\u539f\u56e0\u628a\u5e10\u53f7\u548c\u5bc6\u7801\u544a\u8bc9\u4efb\u4f55\u5176\u4ed6\u4eba\u3002\r\n\u5982\u679c\u5fd8\u8bb0\u4e86\u5bc6\u7801\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6211\u4eec\u7684\u4e3b\u9875\u91cd\u65b0\u627e\u56de\u3002",
callfn:function(){n.closeUpdate()}}]);break;case SM_UPDATEID_FAIL:n=this,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u66f4\u65b0\u8d26\u53f7\u5931\u8d25\u3002",callfn:function(){n.closeUpdate()}}])}}};f.prototype.historyLogin=function(d){this.agreeUserAgreementAndPrivatePolicy()&&(this.tex_name.text=d.punching,this.tex_psw.text=d.password,this.onlogin(),this.qishiyou_account_list.visible=!0)};f.prototype.lastSelectControl=function(){this.chooseserver(0)};f.prototype.showHistoryList=function(d,
n){n=d=null;var c=this.getHistoryLogin();null!=c[0]&&(d=""==c[0]?null:c[0].split("+")[1]);null!=c[1]&&(n=""==c[1]?null:c[1].split("+")[1]);null!=d&&(this.arer_near1.label=d,this.arer_near1.visible=!0,this.arer_near1.on(Laya.Event.CLICK,this,this.recentlyLoginShow.bind(this,c[0])),this.showHistoryImg(c[0],this.near1_state));null!=n&&(this.arer_near2.label=n,this.arer_near2.visible=!0,this.arer_near2.on(Laya.Event.CLICK,this,this.recentlyLoginShow.bind(this,c[1])),this.showHistoryImg(c[1],this.near2_state))};
f.prototype.showHistoryImg=function(d,n){if(d&&n){d=d.split("+");for(var c=0;c<this.serve_list.cells.length;c++){var h=this.serve_list.cells[c];if(h&&h._dataSource&&(h=h._dataSource.group_list))for(var m=0;m<h.length;m++){var g=h[m];g&&g.serverName&&g.serverName==d[1]&&g.id&&g.id==d[2]&&(n.skin=0==c&&0==m?"gameres/ui/area_blue.png":2==g.isConnection?"gameres/ui/area_gray.png":"gameres/ui/area_red.png")}}}};f.prototype.recentlyLoginShow=function(d){if(this.agreeUserAgreementAndPrivatePolicy()){var n=
d.split("+")[1];if(null!=n){d=this.getGroupAndIndexByLastNameIdx(d);var c=GameUtil.getSaveData("historyLoginsQiShiYou");if(null!=c){d=null;JSON.parse(c);for(c=0;c<this.serveArray.length;c++)if(this.serveArray[c].serverName==n){d=this.serveArray[c];break}null!=d&&void 0!=d&&(this.currAreaCell=d,n=d.groupName+"+"+d.serverName+"+"+d.id,null==g_serverconfigtxt.gamelist?(this.saveHistoryLogin(n),this.selectServerLogin(d,!0)):(this.saveHistoryLogin(n),this.splitGameConfigWEB(d,!0)))}else this.serve_list.selectedIndex=
-1==d[0]?0:d[0],this.chooseserver(d[0]),this.groupListSelect(d[1],!0);this.img_account_list.visible=!1;this.list_select.visible=!1}}};f.prototype.onPasswordErrorResult=function(d){-1==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\uff01",callfn:function(){}}]):-2==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u8f93\u5165\u9519\u8bef\u8d85\u8fc73\u6b21\uff0c\u6b64\u5e10\u53f7\u5df2\u88ab\u6682\u65f6\u9501\u5b9a\uff0c\u8bf7\u7a0d\u5019\u518d\u767b\u5f55\uff01",
callfn:function(){}}]):-3==d?(d=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),ani=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/loading/",1,8,100,!0,!1,d),ani.name="loading",ani.zOrder=999999,this.onlogin()):-4==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e2a\u5e10\u53f7\u8bbf\u95ee\u5931\u8d25\uff01\u8bf7\u4f7f\u7528\u5176\u4ed6\u5e10\u53f7\u767b\u5f55\uff0c\u6216\u8005\u7533\u8bf7\u4ed8\u8d39\u6ce8\u518c",callfn:function(){}}]):-5==d?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u8fd9\u4e2a\u5e10\u53f7\u88ab\u9501\u5b9a\uff01",callfn:function(){}}]):100==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u4e2d\u5fc3\u64cd\u4f5c\u5931\u8d25\uff01",callfn:function(){}}]):101==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):102==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==d?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u7528\u6237\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):107==d?Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u7528\u6237\u6ce8\u518c\u7c7b\u578b\u65e0\u6548\uff01",callfn:function(){}}]):108==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):109==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):110==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e73\u53f0\u4e0d\u5b58\u5728\u6b64\u8d26\u53f7\uff01",callfn:function(){}}]):111==d?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u6b64\u8d26\u53f7\u65e0\u6cd5\u767b\u9646\u6b64\u5206\u533a,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):112==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\u6b21\u6570\u8fc7\u591a\uff0c\u5df2\u88ab\u6c38\u4e45\u9501\u5b9a\uff0c\u89e3\u9501\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):-1E3==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u670d\u52a1\u5668\u672a\u83b7\u53d6\u5206\u533aID\uff01",callfn:function(){}}]):
-1001==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u767b\u5f55\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):-1002==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\uff01\uff01",callfn:function(){}}]):-1003==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u8d26\u53f7\u4e0d\u53ef\u767b\u9646\u5230\u6b64\u5206\u533a\uff01",callfn:function(){}}]):-1005==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",
callfn:function(){}}]):-1999==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u8d85\u65f6\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u51fa\u73b0\u672a\u77e5\u9519\u8bef\uff01\uff01",callfn:function(){}}])};f.prototype.onGetServerListResult=function(d,n){this.bg2.visible||(isWebForYYY()&&(this.img_select.visible=!1),Animationmodule.removeAniname("loading"),this.imageLogin.visible=
!1,this.real_ui.visible=!1,d=d.split("/"),this.onselcetsection(d),d=GameUtil.getSaveData("username"),g_LogSocket.AddGameDataLog(530,d,0,g_ChannelId,g_ServerName))};f.prototype.onSelectSvrResult=function(d){this.list_select.visible=!1;roleNetParam=d.split("/");Sendmessage.roleNetParam=roleNetParam;roleNetParam.push(this.tex_name.text);Animationmodule.playframe(!1,this,"gameres/animation/door/",22,31,100,!1,!0,null,this,this.call2back).name="door"};f.prototype.clearlogres=function(){Laya.loader.clearRes("gameres/png/00732.png");
Laya.loader.clearRes("gameres/png/00790.png");Laya.loader.clearRes("gameres/png/imageLogin.png");Laya.loader.clearRes("gameres/png/img_regbg.png");Laya.loader.clearRes("gameres/png/login0.png");Laya.loader.clearRes("gameres/png/login1.png");Laya.loader.clearRes("gameres/png/login2.png");Laya.loader.clearRes("gameres/png/main_load.png");Laya.loader.clearRes("gameres/png/main_load_bg.png");Laya.loader.clearRes("gameres/png/main_load$bar.png");Laya.loader.clearRes("gameres/png/notice_bg.png");Laya.loader.clearRes("gameres/png/select_area.png")};
f.prototype.call2back=function(){Laya.stage.off(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.off("mouseFocus",this,this.mouseFocus);Laya.stage.off(Laya.Event.CLICK,this,this.clickAni);Laya.stage.offAll("dupdate_account");this.getChildByName("door");this.getChildByName("loading");Laya.stage.removeChildByName("versionlb");Laya.SoundManager.stopAll();this.clearlogres();this.removeSelf();Animationmodule.clearAniCacheAssets();
var d=new RoleScene;d.centerX=0;d.centerY=0;MsgFromLogin=roleNetParam;d.getParamFromLogin(roleNetParam);for(var n=!1,c=0;c<Laya.stage._childs.length;c++)Laya.stage._childs[c]instanceof RoleScene&&(n=!0);n||Laya.stage.addChild(d);Laya.loader.clearRes(S_LOGIN_GAME)};f.prototype.randNum=function(){for(var d="",n=0;4>n;n++)d+=Math.round(9*Math.random());return d};f.prototype.randLetter=function(){for(var d="",n=0;4>n;n++){var c=Math.round(25*Math.random());c=String.fromCharCode(c+97);d+=c}return d};f.prototype.randAccount=
function(){var d=this.randNum();d=this.randLetter()+d;var n=!0;if(g_register)for(var c=0;c<g_register.length;c++){var h=g_register[c];if(""!=g_register[c]&&-1!=d.indexOf(h)){n=!1;break}}return n?d:this.randAccount()};f.prototype.agreeUserAgreementAndPrivatePolicy=function(){this.checkBox_agreeMent.selected||Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u786e\u8ba4\u7528\u6237\u534f\u8bae\u548c\u9690\u79c1\u653f\u7b56\uff01\uff01\uff01",callfn:function(){}}]);return!0===this.checkBox_agreeMent.selected};
f.prototype.onSignInClick=function(){if(this.agreeUserAgreementAndPrivatePolicy())if(0==g_serverconfig.nQuickregister)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u670d\u52a1\u5668\u672a\u5f00\u542f\u4e00\u952e\u6ce8\u518c\u529f\u80fd\uff0c\u8bf7\u624b\u52a8\u6ce8\u518c\uff01",callfn:function(){}}]);else{var d=this.randAccount(),n=this.randNum(),c=this.randLetter()+n;d&&c&&(this.register_name.text=d,this.register_psw.text=c,this.img_register.visible=!1,n=new TUserEntry(d,"jauTec@chuanqi.com",
c),d=new TUserEntryAdd(d,c),isSocketConnected&&Sendmessage.sendNewAccount(n.toArray(this.str_length),d.toArray(this.str_length)))}};f.prototype.onRegErrorResult=function(d){0==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u5df2\u88ab\u6ce8\u518c\uff01",callfn:function(){}}]):-2==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u5e10\u53f7\u540d\u5df2\u88ab\u6ce8\u518c\u6216\u88ab\u7981\u6b62\u4f7f\u7528\uff01",callfn:function(){}}]):-3==d?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u8d26\u53f7\u548c\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c\uff01",callfn:function(){}}]):-4==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u4fdd\u95ee\u9898\u548c\u7b54\u6848\u4e0d\u80fd\u76f8\u540c\uff01",callfn:function(){}}]):100==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u4e2d\u5fc3\u64cd\u4f5c\u5931\u8d25\uff01",callfn:function(){}}]):101==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):
102==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==d?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):107==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6ce8\u518c\u7c7b\u578b\u65e0\u6548\uff01 ",callfn:function(){}}]):108==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u683c\u5f0f\u9519\u8bef\uff01 ",callfn:function(){}}]):109==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01 ",callfn:function(){}}]):113==d?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):114==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e6\u4f4d\u4e14\u5e94\u5305\u542b\u591a\u79cd\u7ec4\u5408\u3002",callfn:function(){}}]):115==d||116==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u95ee\u9898\u4e00\u3002",callfn:function(){}}]):117==d||118==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u56de\u7b54\u4e8c\u3002",
callfn:function(){}}]):140==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):141==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u95ee\u9898\u4e00\uff01",callfn:function(){}}]):142==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u56de\u7b54\u4e00\uff01",callfn:function(){}}]):143==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u95ee\u9898\u4e8c\uff01",
callfn:function(){}}]):144==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u56de\u7b54\u4e00\uff01",callfn:function(){}}]):145==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6635\u79f0\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):146==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):147==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u542b\u6709\u5c4f\u853d\u8bcd\uff01 ",
callfn:function(){}}]):148==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u8d26\u53f7\u5728\u5e73\u53f0\u4e0a\u5df2\u88ab\u5360\u7528\uff01 ",callfn:function(){}}]):149==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u65f6\u5f02\u5e38\uff01",callfn:function(){}}]):150==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u6743\u9650\u5f02\u5e38\uff0c\u7528\u6237\u5df2\u88ab\u5c4f\u853d\uff01",callfn:function(){}}]):151==d?Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u521b\u5efa\u6743\u9650\u5931\u8d25\uff0c\u7528\u6237\u5df2\u88ab\u5c4f\u853d\uff01",callfn:function(){}}]):-1E3==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u670d\u52a1\u5668\u672a\u83b7\u53d6\u5206\u533aID\uff01",callfn:function(){}}]):-1001==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u6ce8\u518c\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):-1004==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u5df2\u88ab\u6ce8\u518c\uff01",callfn:function(){}}]):
-1005==d?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u521b\u5efa\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u5e10\u53f7\u662f\u5426\u5305\u62ec\u7a7a\u683c\u3001\u53ca\u975e\u6cd5\u5b57\u7b26\uff01",callfn:function(){}}])};f.prototype.onRegSuccess=function(){if(this.reg_bg.visible)this.tex_name.text=this.username.text,this.tex_psw.text=this.password.text,this.reg_bg.visible=
!1,this.register_name.text=this.username.text,this.register_psw.text=this.password.text,this.checkBoRan()||(this.img_register.visible=!0),this.btn_registerimg.visible=!1,this.btn_register.on(Laya.Event.CLICK,this,this.onlogin),this.username.text="",this.password.text="",this.confirmpassword.text="";else{this.tex_name.text=this.register_name.text;this.tex_psw.text=this.register_psw.text;this.checkBoRan()||(this.img_register.visible=!0);this.btn_register.mouseEnabled=!1;var d=Laya.Tween.to(this.btn_registerimg,
{height:0},5E3,null,Laya.Handler.create(this,function(n,c){n.mouseEnabled=!0;c.visible=!1;Laya.Tween.clear(d)},[this.btn_register,this.btn_registerimg]));this.btn_register.on(Laya.Event.CLICK,this,this.onlogin);if(cur_use_app&&!this.checkBoRan())Laya.timer.once(200,this,function(){onGeneratePNG(this.img_register)})}OtherFunction(null,E_PLATFORMSDK.YOUMENG);OtherFunction("\u975e\u6cca\u7136"+this.tex_name.text,E_PLATFORMSDK.DOUYIN);this.btn_login.visible=!1;this.btn_zc1.visible=!1;this.btn_backserver.visible=
!1};f.prototype.prtscr=function(d,n,c){d.mouseEnabled=!0;n.visible=!1};f.prototype.onChangePasClick=function(){CHANGEPWDSCENE_EXIST||(changePwdScene=new ChangePwdScene);Laya.stage.addChild(changePwdScene)};f.prototype.serverquit=function(){this.img_select.visible=!1;this.imageLogin.visible=this.checkIsQSY()?!1:!0;this.checkBoRan()&&(this.imageLogin.visible=!1)};f.prototype.backserver=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fd4\u56de\u767b\u5f55\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",
callfn:function(){Laya.Browser.window.location.reload()}}])};f.prototype.qqlogin=function(){if(this.use_qqweixin)if(cur_use_app){if(void 0!==conchConfig&&null!==conchConfig&&conchConfig){var d=conchConfig.getOS(),n;"Conch-ios"==d?n=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==d&&(n=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));"Conch-ios"==d?n.call("qqlogiin:","hello"):"Conch-android"==d&&n.call("qqlogin")}}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u4f7f\u7528APP\u7aef\u767b\u5f55\uff01",
callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u7981\u6b62QQ\u3001\u5fae\u4fe1\u6ce8\u518c\u767b\u5f55",callfn:function(){}}])};f.prototype.wxlogin=function(){if(this.use_qqweixin)if(cur_use_app){if(conchConfig&&conchConfig){var d=conchConfig.getOS(),n;"Conch-ios"==d?n=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==d&&(n=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));"Conch-ios"==d?n.call("wxlogiin:","hello"):"Conch-android"==
d&&n.call("wxlogin")}}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u4f7f\u7528APP\u7aef\u767b\u5f55\uff01",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u7981\u6b62QQ\u3001\u5fae\u4fe1\u6ce8\u518c\u767b\u5f55",callfn:function(){}}])};f.prototype.closeFind=function(){this.bg1.visible=!1;this.find_name.text="";this.find_birthday.text="";this.find_q1.text="";this.find_a1.text="";this.find_q2.text="";this.find_a2.text=""};f.prototype.closeUpdate=
function(){this.bg2.visible=!1;this.set_name.text="";this.set_birthday.text="";this.set_q1.text="";this.set_a1.text="";this.set_q2.text="";this.set_a2.text="";this.btn_login.visible=!0;this.btn_zc1.visible=!0;this.backserver()};f.prototype.findPasword_s=function(d){if(d&&(this.pas_findPas.text=d,this.img_findPas.visible=!0,cur_use_app&&!this.checkBoRan()))Laya.timer.once(200,this,function(){onGeneratePNG(this.img_findPas)})};f.prototype.checkBirthday=function(d){if(-1!=d.indexOf("/")){var n=d.split("/");
if(3==n.length){d=parseInt(n[0]);var c=parseInt(n[1]);n=parseInt(n[2]);if(1890<d&&2101>=d&&0<c&&13>c&&0<n&&32>n)return!0}}return!1};f.prototype.noticeListData;f.prototype.newGetNotice=function(d,n){var c=Laya.Loader.getRes(n),h=n=5;if(c&&""!=c&&(d.removeChildren(),c=c.split("\\"),Array.isArray(c)))for(var m=0;m<c.length;m++){for(;-1!=c[m].indexOf("<")&&-1!=c[m].indexOf(">");){if(0!=c[m].indexOf("<")){var g=c[m].indexOf("<");var l=c[m].split("<");c[m]=c[m].substr(g);""!=l[0]&&(g=this.MakeNoticeLabel(l[0],
n,h,d))&&(n=g.x,h=g.y)}g=c[m].indexOf("<");l=c[m].indexOf(">");if(-1!=g&&-1!=l){if(g=c[m].substr(g+1,l-g-1),c[m]=c[m].substr(l+1),g=this.MakeNoticeLabel(g,n,h,d))n=g.x,h=g.y}else g=this.MakeNoticeLabel(c[m],n,h,d),n=g.x,h=g.y}if(g=this.MakeNoticeLabel(c[m],n,h,d))h=g.y;n=5;h+=16}};f.prototype.noNoticeHandle=function(){var d=this;this.img_account_list.visible=!1;this.list_select.visible=!1;this.noticeContentEmpty=!0;setTimeout(function(){d.hasChooseServer||d.openChooseServerByNoNotice()},300)};f.prototype.openChooseServerByNoNotice=
function(){this.noticeContentEmpty=!1;this.list_select.visible=!0;this.img_account_list.visible=!0;this.notice_show1_copy.visible=!0;this.lastSelectControl()};f.prototype.MakeNoticeLabel=function(d,n,c,h){d=d.toLowerCase();var m=d.split(":");d="";var g=18,l="#ffffff";n=new Laya.Point(n,c);"txt"==m[0]&&4==m.length?(d=m[1],g=m[2],l=Get2RGB(m[3])):"pos"==m[0]&&3==m.length?(n.x+=parseInt(m[1]),n.y+=parseInt(m[2])):d=m[0];""!=d&&(c=new Laya.Text,c.fontSize=g,c.color=l,c.text=d,c.valign="top",c.pos(n.x,
n.y),h.addChild(c),h.vScrollBarSkin="",n.x+=GameApi.newcount(c)+GameApi.GetSpWidth(c.text));return n};f.prototype.showSelect=function(){this.img_select.visible=!0;var d=GameUtil.getSaveData("lastserver");if(d&&0<this.serveArray.length)for(var n=0;n<this.serveArray.length;n++){var c=null==g_serverconfigtxt.gamelist?this.serveArray[n].sServerName:this.serveArray[n].serverName;if(this.serveArray[n]&&c==d){this.last_name.text=d;this.last_name.idx=n;this.last_select.visible=!0;this.list_select.visible=
!1;this.hasChooseServer=!0;2!=this.serveArray[n].isConnection&&(d=new Laya.Point(13,13),d=Animationmodule.playframe(!1,this.change_select,"gameres/animation/serverhot/",1,10,100,!0,!1,d),d.name="fireQiu");return}}else if(this.serveArray&&this.serveArray[0]){this.last_name.text=this.serveArray[0].serverName;this.last_name.idx=0;this.last_select.visible=!0;this.list_select.visible=!1;this.hasChooseServer=!0;2!=this.serveArray[0].isConnection&&(d=new Laya.Point(13,13),d=Animationmodule.playframe(!1,
this.change_select,"gameres/animation/serverhot/",1,10,100,!0,!1,d),d.name="fireQiu");this.serve_list.selectedIndex=0;this.chooseserver(0);this.groupListSelect(0);return}this.list_select.visible=!this.noticeContentEmpty;this.last_select.visible=!1;this.img_account_list.visible=!this.noticeContentEmpty;this.img_account_list.visible&&(this.notice_show1_copy.visible=!0);this.notice_show1_copy.visible=!0};f.prototype.saveHistoryLoginQiShiYou=function(d){null==GameUtil.getSaveData("historyLoginsQiShiYou")&&
GameUtil.setSaveData("historyLoginsQiShiYou",JSON.stringify(d))};f.prototype.saveHistoryLogin=function(d){this.historyLoginsData;d.split("+");var n=GameUtil.getSaveData("historyLogins");if(null==n)GameUtil.setSaveData("historyLogins",d+"|"),this.historyLoginsData=d+"|";else{var c="";n=n.split("|");if(1==n.length){if(n[0]==d)return;c=n[0]+"|"+d}if(2==n.length){if(n[0]==d||n[2]==d)return;c=d+"|"+n[0]}GameUtil.setSaveData("historyLogins",c);this.historyLoginsData=c}};f.prototype.getHistoryLogin=function(){var d=
[],n=[],c=GameUtil.getSaveData("historyLogins")||this.historyLoginsData;null!=c&&(d=c.split("|"));for(c=0;c<d.length;c++)""!=d[c]&&n.push(d[c]);return n};f.prototype.requestGameConfigWEB=function(d,n){var c=new Laya.HttpRequest;c.once(Laya.Event.COMPLETE,this,function(h){g_GameConfigWEB=h.data;g_otherBtn=g_GameConfigWEB.funActivity.otherbtn;console.log("<------GM\u914d\u7f6e\u6570\u636e------\x3e");console.log(g_GameConfigWEB);if(null!=g_GameConfigWEB){for(h=0;h<g_ServerList.length;h++)g_ServerList[h].btFun=
[],g_ServerList[h].nListIdx=h+1,g_ServerList[h].btFun=this.getAuxiliaryShowData();this.setBaseConfig();this.setCustomerButton();this.setCustomerGlod();this.str_length=20;n&&(this.txt_tip.visible=!0);this.can_click=!1;Laya.stage.event("GameConfigSuccess",n)}}.bind(this));c.once(Laya.Event.ERROR,this,function(h){console.log("<------\u8bf7\u6c42\u5931\u8d25------\x3e:");console.log(h)});c.send(d,"","get","json",["Content-Type","application/json;charset=UTF-8"])};f.prototype.listInitShow=function(){Animationmodule.removeAniname("loading");
this.checkServerList();this.serveArray=g_ServerList;this.groupServerListWEB();this.serve_list.vScrollBarSkin="";this.serve_list.repeatX=1;this.serve_list.repeatY=9;this.serve_list.itemRender=a;this.serve_list.selectEnable=!0;this.serve_list.selectHandler=new Laya.Handler(this,this.chooseserver);this.serve_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.serve_list.array=this.group_list;this.initNoticeTitleList();this.initNoticeContentList();this.showSelect()};f.prototype.checkServerList=
function(){0==g_ServerList.length&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u5217\u8868\u4e3a\u7a7a\uff0c\u8bf7\u524d\u5f80\u540e\u53f0\u6dfb\u52a0\u6e38\u620f",callfn:function(){}}])};f.prototype.enterGameFunction=function(d){null!=this.currAreaCell&&(this.selectServerLogin(this.currAreaCell,d),Laya.timer.once(500,this,function(){d&&(Sendmessage.clsocket.End(),Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT))}))};f.prototype.getAuxiliaryShowData=function(){var d=[];g_otherBtn=[];
var n=g_GameConfigWEB.funActivity.fun,c=g_GameConfigWEB.funActivity.acty,h;for(h in c)0==c[h]&&d.push(0),1==c[h]&&d.push(1),-1<h.indexOf("custom")&&(0==c[h]&&g_otherBtn.push(0),1==c[h]&&g_otherBtn.push(1));for(var m in n)0==n[m]&&d.push(0),1==n[m]&&d.push(1);return d};f.prototype.setBaseConfig=function(){var d=g_GameConfigWEB.funActivity;g_serverconfig.nHelmet=d.helmet;g_serverconfig.nAutohook=d.autoHook;g_serverconfig.nUimode=d.uiMode;g_serverconfig.nSimScreen=d.simScreen;g_serverconfig.nAutopick=
d.autoPick;g_serverconfig.nNpcTxtSize=d.npcTxtSize;g_serverconfig.nAppTxtSize=d.appFontMarginSize;g_serverconfig.nH5TxtSize=d.h5FontMarginSize;g_serverconfig.nSpeed=d.speed;g_serverconfig.sPicUrl=d.picUrl;g_serverconfig.nJobmode=d.jobMode;g_serverconfig.nCollect=d.collect;g_serverconfig.sVoiceIP=d.voiceIP;g_serverconfig.nVoicePort=d.voicePort;g_serverconfig.boPic=d.pic;g_serverconfig.nQuickregister=d.quickRegister;g_serverconfig.nAtkRange=d.atkRange;g_serverconfig.boSmoot=d.smooth;g_serverconfig.boVirtual=
d.virtual;g_serverconfig.boVoice=d.voice;ItemHeard=1==g_serverconfig.nHelmet;g_rolemovespeed=g_serverconfig.nSpeed;g_openhook=g_serverconfig.nAutohook;g_GameType=g_serverconfig.nUimode;g_simScreen=g_serverconfig.nSimScreen;1==g_serverconfig.nAutopick?g_autopick=!0:g_autopick=!1;g_npcTxtSize=g_serverconfig.nNpcTxtSize;g_strokewidth=cur_use_app?g_serverconfig.nAppTxtSize:g_serverconfig.nH5TxtSize;cur_use_app&&"true"==app_simulator&&g_serverconfig.boVirtual&&Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u5f53\u524d\u65e0\u6cd5\u4f7f\u7528\u6a21\u62df\u5668\u767b\u9646\uff01",callfn:function(){Laya.Browser.window.location.reload()}}])};f.prototype.setCustomerButton=function(){var d=g_GameConfigWEB.h5DIYButtons;null!=g_customBtn.length&&0!=g_customBtn.length&&(g_customBtn.splice(0,g_customBtn.length),g_customBtn=[]);for(var n in d)if(0!=d[n].open){var c=d[n];g_customBtn.push({boOpen:c.open,nColor:c.color,nIdx:c.id,nSize:c.size,nX:c.x,nY:c.y,sCmd:c.cmd,sName:c.name})}};f.prototype.setCustomerGlod=
function(){var d=g_GameConfigWEB.h5DIYGolds;null!=g_gameGold.length&&0!=g_gameGold.length&&(g_gameGold.splice(0,g_gameGold.length),g_gameGold=[]);for(var n in d){var c=d[n];c={boOpen:c.open,nIdx:c.id,nX:c.x,nY:c.y,sShowUI:c.showUI,sVarName:c.varName,sGoldName:c.goldName};g_gameGold.push(c);c&&eval(c.sVarName)&&(eval(c.sVarName).key=c.sGoldName)}};f.prototype.splitGameConfigWEB=function(d,n){n=void 0===n?!1:n;null!=d&&(d=(g_isStandbyUrl?g_serverconfigtxt.gamelist1+"":g_serverconfigtxt.gamelist+"").split(this.getSplitUrlValueByPlatform())[0]+
"GameConfig?gameId="+d.id,this.requestGameConfigWEB(d,n))};f.prototype.getSplitUrlValueByPlatform=function(){return"GameList"};f.prototype.isDomainName=function(d){d=d.split(".");var n=!1,c;for(c in str){var h=str.charCodeAt(c);if(65<=h&&90>=h||97<=h&&122>=h){n=!0;break}}4==d.length&&!1;return 1==n?!0:!1};f.prototype.ResetLogin=function(){2>=Sendmessage.clsocket.getIPPortCount()||Laya.timer.loop(500,this,this.CheckIsEnterGame)};f.prototype.CheckIsEnterGame=function(){this.resetLoginIndex+=1;var d=
Sendmessage.clsocket.getIPPortCount();if(40<=this.resetLoginIndex)if(4<=d)Laya.timer.clear(this,this.CheckIsEnterGame);else if(isSocketConnected){d=GameApi.Trim(this.tex_name.text,"g");var n=GameApi.Trim(this.tex_psw.text,"g");Sendmessage.sendLogin(d.toLowerCase(),n);GameUtil.setSaveData("username",d);GameUtil.setSaveData("userpsw",n);g_relogname=d;g_relogpsw=n}};return f}(LoginSceneUI),RoleScene=function(e){function f(){f.__super.call(this);this.size(230,30);this.role_panel=new Laya.Panel;this.role_panel.size(270,
30);this.addChild(this.role_panel);this.role_kuang=new Laya.Image;this.role_kuang.skin="gameres/png/role_editor_skill_item_bg2.png";this.role_kuang.size(270,30);this.role_kuang.visible=!1;this.role_panel.addChild(this.role_kuang);this.lb_name=new Laya.Text;this.lb_name.color="#ffffff";this.lb_name.fontSize=18;this.lb_name.size(115,25);this.lb_name.align="center";this.lb_name.valign="middle";this.lb_name.pos(0,2);this.role_panel.addChild(this.lb_name);this.lb_sex=new Laya.Text;this.lb_sex.color="#ffffff";
this.lb_sex.fontSize=18;this.lb_sex.size(45,25);this.lb_sex.align="center";this.lb_sex.valign="middle";this.lb_sex.pos(122,2);this.role_panel.addChild(this.lb_sex);this.lb_lvl=new Laya.Text;this.lb_lvl.color="#ffffff";this.lb_lvl.fontSize=18;this.lb_lvl.size(45,25);this.lb_lvl.align="center";this.lb_lvl.valign="middle";this.lb_lvl.pos(170,2);this.role_panel.addChild(this.lb_lvl);this.lb_job=new Laya.Text;this.lb_job.color="#ffffff";this.lb_job.fontSize=18;this.lb_job.size(45,25);this.lb_job.align=
"center";this.lb_job.valign="middle";this.lb_job.pos(217,2);this.role_panel.addChild(this.lb_job);this.settxt=function(b){this.lb_name.text=b.sChrName;this.lb_sex.text=b.btSex?"\u5973":"\u7537";this.lb_lvl.text=""+b.nLevel;this.lb_job.text=GameUtil.getJobName(b.btJob)}}function a(){a.__super.call(this);this.init()}Laya.class(f,"recoverylist",Laya.Box);Laya.class(a,"RoleScene",e);e=a.prototype;e.loadDangerHpRes=function(){var b=[];for(i=0;10>i;i++)b.push("gameres/animation/dangerHp/dangerHp_top"+i+
".png"),b.push("gameres/animation/dangerHp/dangerHp_right"+i+".png"),b.push("gameres/animation/dangerHp/dangerHp_bottom"+i+".png"),b.push("gameres/animation/dangerHp/dangerHp_left"+i+".png");Laya.loader.load(b,Laya.Handler.create(this,function(){}),null,Laya.Loader.IMAGE)};e.init=function(){GameUtil.clearResByUrl("gameres/png/login_bg.png");this.loadDangerHpRes();Laya.loader.clearRes("gameres/png/00733.png");this.isCreateSubmit=0;verify_through=!0;this.sex=this.job=0;this.recoveryrole=null;this.btn_start.mouseEnabled=
!1;this.img_start.visible=!0;this.img_start.height=62;this.SelectIndex=-1;Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.on(Laya.Event.RESIZE,this,this.changeSize);this.btn_s1.on(Laya.Event.CLICK,this,this.onselect1);this.btn_s2.on(Laya.Event.CLICK,this,this.onselect2);this.btn_dr.on(Laya.Event.CLICK,this,this.ondelrole);this.btn_del_ok.on(Laya.Event.CLICK,this,this.ondelok);this.btn_del_qx.on(Laya.Event.CLICK,
this,this.ondelqx);this.btn_cr.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_zs.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_fs.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_ds.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_sj.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_qx.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_ok.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_nan.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_nv.on(Laya.Event.CLICK,
this,this.oncreaterole);this.btn_rr.on(Laya.Event.CLICK,this,this.onrecovery);this.btn_hf_ok.on(Laya.Event.CLICK,this,this.onrecovery);this.btn_hf_qx.on(Laya.Event.CLICK,this,this.onrecovery);this.btn_start.on(Laya.Event.CLICK,this,this.onstart);this.Random.on(Laya.Event.CLICK,this,this.RandomName);this.jobInVersion=this.getJobInVersion();1!=g_serverconfig.nJobmode&&(this.btn_c_fs.visible=!1,this.btn_c_ds.visible=!1,this.btn_c_sj.visible=!1,this.btn_c_nv.visible=!1,this.btn_c_nan.visible=!1,0==g_serverconfig.nJobmode?
(this.btn_c_nan.visible=!0,this.btn_c_zs.pos(132,194),this.btn_c_nan.pos(132,302)):2==g_serverconfig.nJobmode?(this.btn_c_nv.visible=!0,this.btn_c_zs.pos(132,194),this.btn_c_nv.pos(132,302)):3==g_serverconfig.nJobmode&&(this.btn_c_nv.visible=!0,this.btn_c_nan.visible=!0,this.btn_c_zs.pos(132,194)));Laya.SoundManager.useAudioMusic=!1;GameUtil.PlayMusicFormat(S_SELECTROLE);console.log("--rolescene-init-");this.changeSize();this.lb_ServerName.text=g_Server_Name;this.box_l.on(Laya.Event.CLICK,this,this.onselect1);
this.box_r.on(Laya.Event.CLICK,this,this.onselect2);this.submit_btn.on(Laya.Event.CLICK,this,this.returnSelectServerListWin)};e.getJobInVersion=function(){return 0==g_serverconfig.nJobmode?1:2==g_serverconfig.nJobmode?2:3==g_serverconfig.nJobmode?3:4};e.returnSelectServerListWin=function(){Laya.Browser.window.location.reload()};e.changeSize=function(){Laya.stage.getChildByName("health_hint")};e.getParamFromLogin=function(b){msgFromLogin=b;Sendmessage.connectRoleSvr(GAME_IP,parseInt(msgFromLogin[1]))};
e.onSvrConnect=function(){var b=msgFromLogin[3].toLowerCase(),d=msgFromLogin[2];(b,d)&&Sendmessage.sendQueryRole(b,d)};e.onMsgFromSvr=function(b){if("!"===b[b.length-1]){b=b.substring(0,b.length-1);var d=b.substring(0,16);b=b.substring(16,b.length);d=DecodeMessage(d);var n=DecodeString(b);switch(d.ident){case SM_OUTOFCONNECTION:this.onOutOfConnectResult();break;case SM_QUERYCHR:this.onQueryRoleResult(n);this.isCreateSubmit?(1==this.isCreateSubmit?this.onselect1():this.onselect2(),this.isCreateSubmit=
0,this.onstart()):this.popCreateRoleWinHandle();break;case SM_QUERYCHR_FAIL:this.onQueryRoleFailResult();break;case SM_NEWCHR_SUCCESS:E_NewRoleName=g_tempName;E_NewRoleTime=parseInt(new Date/1E3);this.onSvrConnect();g_LogSocket.AddGameDataLog(519,GameUtil.getSaveData("username"),0,g_tempJob,g_tempName);break;case SM_NEWCHR_FAIL:this.onCreateRoleFailResult(d.record);break;case SM_DELCHR_SUCCESS:this.onSvrConnect();break;case SM_DELCHR_FAIL:this.onDeleteRoleFailResult(d.record,d.param);break;case SM_QUERYDELCHR:this.onQueryDelCHRSuccResult(b);
break;case SM_GETBAKCHAR_SUCCESS:this.onSvrConnect();break;case SM_GETBAKCHAR_FAIL:this.onGetBackRoleFailResult(d.record,d.Series);break;case SM_STARTPLAY:this.onStartGameResult(n);break;case SM_STARTFAIL:this.onStartGameFail()}}};e.onOutOfConnectResult=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u8d85\u65f6\uff01",callfn:function(){}}])};e.callback=function(){if(0==this.selecttype){var b=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),0);if(b){b=Animationmodule.playframe(!1,
this.box_l,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1);b.name="curani1";b.scale(.7,.7);var d=this;setTimeout(function(){d.box_l.removeChildByName("curani2")},150)}}else if(b=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),0))b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1),b.name="curani1",b.scale(.7,.7),d=this,setTimeout(function(){d.box_r.removeChildByName("curani2")},150);this.btn_s1.mouseEnabled=!0;this.btn_s2.mouseEnabled=!0;
this.box_l.mouseEnabled=!0;this.box_r.mouseEnabled=!0};e.onselect1=function(){if(2==this.left_state){this.selecttype=0;var b=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),1);if(b){b=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",b.start,b.start+b.total-1,120,!1,!0,null,this,this.callback);b.name="curani2";b.scale(.7,.7);this.left_state=1;var d=this;setTimeout(function(){d.box_l.removeChildByName("curani0")},120)}1==this.right_state&&(b=this.getroledata(parseInt(this.strs[6]),
parseInt(this.strs[9]),1))&&(b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,b.start+b.total-1,120,!1,!1,null,null,null,!0),b.name="curani2",b.scale(.7,.7),this.right_state=2,d=this,setTimeout(function(){d.box_r.removeChildByName("curani1")},120));b=Animationmodule.playframe(!0,this.box_l,"data/chrsel/",4,17,100,!1,!0);b.scale(.7,.7);GameUtil.PlayMusicFormat(S_BUTTON_1);GameUtil.PlayMusicFormat(S_SELECTHOAL);this.btn_s2.mouseEnabled=!1;this.box_r.mouseEnabled=!1}};e.onselect2=function(){if(2==
this.right_state){this.selecttype=1;var b=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),1);if(b){b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,b.start+b.total-1,120,!1,!0,null,this,this.callback);b.name="curani2";b.scale(.7,.7);this.right_state=1;var d=this;setTimeout(function(){d.box_r.removeChildByName("curani0")},120)}1==this.left_state&&(b=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),1))&&(b=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",
b.start,b.start+b.total-1,120,!1,!1,null,null,null,!0),b.name="curani2",b.scale(.7,.7),this.left_state=2,d=this,setTimeout(function(){d.box_l.removeChildByName("curani1")},120));b=Animationmodule.playframe(!0,this.box_r,"data/chrsel/",4,17,100,!1,!0);b.scale(.7,.7);GameUtil.PlayMusicFormat(S_BUTTON_1);GameUtil.PlayMusicFormat(S_SELECTHOAL);this.btn_s1.mouseEnabled=!1;this.box_l.mouseEnabled=!1}};e.onQueryRoleResult=function(b){if(""==b)this.lb_name1.text="",this.lb_job1.text="",this.lb_lvl1.text=
"",this.lb_name2.text="",this.lb_job2.text="",this.lb_lvl2.text="",this.box_l.removeChildren(),this.box_r.removeChildren(),b=Laya.stage.getChildByName("CreateRole"),null==b&&(b=new Laya.Point(77,27),b=Animationmodule.playframe(!1,this.btn_cr,"gameres/animation/createrole/",1,8,100,!0,!1,b),b.name="CreateRole");else{"/"==b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1));this.strs=b.split("/");this.lb_name1.text=this.strs[0]?this.strs[0]:"";this.lb_job1.text=this.strs[1]?GameUtil.getJobName(parseInt(this.strs[1])):
"";this.lb_lvl1.text=this.strs[3]?this.strs[3]:"";this.lb_name2.text=this.strs[5]?this.strs[5]:"";this.lb_job2.text=this.strs[6]?GameUtil.getJobName(parseInt(this.strs[6])):"";this.lb_lvl2.text=this.strs[8]?this.strs[8]:"";this.box_l.removeChildren();this.box_r.removeChildren();this.left_state=0;if(""!=this.lb_name1.text)if("*"==this.lb_name1.text.substr(0,1)||""==this.lb_name2.text||"*"!=this.lb_name1.text.substr(0,1)&&"*"!=this.lb_name2.text.substr(0,1)){if(this.selecttype=0,"*"==this.lb_name1.text.substr(0,
1)&&(this.lb_name1.text=this.strs[0].substr(1,this.strs[0].length)),b=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),0))b=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1),b.name="curani1",b.scale(.7,.7),this.left_state=1}else if(b=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),1))b=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",b.start,b.start,150,!0,!1),b.name="curani0",b.scale(.7,.7),this.left_state=2;this.right_state=
0;if(""!=this.lb_name2.text)if("*"==this.lb_name2.text.substr(0,1)){if(this.selecttype=1,this.lb_name2.text=this.strs[5].substr(1,this.strs[5].length),b=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),0))b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1),b.name="curani1",b.scale(.7,.7),this.right_state=1}else if(b=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),1))b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,
b.start,150,!0,!1),b.name="curani0",b.scale(.7,.7),this.right_state=2;Laya.Tween.to(this.img_start,{height:0},2E3,null,Laya.Handler.create(this,this.ShowStart,[this.btn_start,this.img_start]))}};e.ShowStart=function(b,d){b.mouseEnabled=!0;d.visible=!1};e.RandomName=function(){if(firstName&&lastName){var b=parseInt(Math.random()*firstName.length),d=parseInt(Math.random()*lastName.length);""!=firstName[b]&&""!=lastName[d]&&(this.tex_name.text=firstName[b]+lastName[d])}};e.getroledata=function(b,d,n){if(role_json)for(var c=
0;c<role_json.length;++c)if(role_json[c].job==b&&role_json[c].sex==d&&role_json[c].state==n)return role_json[c];return null};e.ondelrole=function(){if(""!==this.lb_name1.text||""!==this.lb_name2.text){var b="";this.selecttype?b=this.lb_name2.text:b=this.lb_name1.text;this.lb_del.text=b+" \u662f\u5426\u786e\u8ba4\u5220\u9664\u6b64\u6e38\u620f\u89d2\u8272\uff1f";this.img_del.centerX=0;this.img_del.centerY=0;this.img_del.visible=!0;GameUtil.PlayMusicFormat(S_BUTTON_1)}};e.ondelqx=function(){this.img_del.visible=
!1};e.ondelok=function(){var b="";this.selecttype?b=this.lb_name2.text:b=this.lb_name1.text;Sendmessage.sendDeleteRole(b);this.img_del.visible=!1};e.onQueryRoleFailResult=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u67e5\u8be2\u89d2\u8272\u5931\u8d25\uff01",callfn:function(){}}])};e.onDeleteRoleFailResult=function(b,d){switch(b){case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u5929\u5185\u53ea\u80fd\u5220\u9664"+d+"\u4e2a\u89d2\u8272\uff01",callfn:function(){}}]);break;
case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5220\u9664\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]);break;case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5220\u9664\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]);break;default:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5220\u9664\u6e38\u620f\u89d2\u8272\u65f6\u51fa\u73b0\u9519\u8bef\uff01",callfn:function(){}}])}};e.popCreateRoleWinHandle=function(){""==this.lb_name1.text&&""==
this.lb_name2.text&&this.popCreateRoleWin()};e.getFinalJob=function(){return 1==this.jobInVersion||2==this.jobInVersion||3==this.jobInVersion?0:Math.floor(3*Math.random())};e.getFinalSex=function(){return 1==this.jobInVersion||2==this.jobInVersion?0:Math.floor(2*Math.random())};e.popCreateRoleWin=function(){this.img_create.visible=!0;this.RandomName();this.job=this.getFinalJob();this.sex=this.getFinalSex();this.setShowBtn(this.job,this.sex);2==g_serverconfig.nJobmode&&(this.sex=1);if(""==this.lb_name1.text){this.img_create.x=
642;this.img_create.y=-17;this.box_l.removeChildren();var b=this.getroledata(this.job,this.sex,0);b&&(b=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1),b.scale(.7,.7))}else if(this.img_create.x=185,this.img_create.y=-17,this.box_r.removeChildren(),b=this.getroledata(this.job,this.sex,0))b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1),b.scale(.7,.7)};e.setShowBtn=function(b,d){this.btn_c_nan.selected=0==d;this.btn_c_nv.selected=
!this.btn_c_nan.selected;this.btn_c_zs.selected=0==b;this.btn_c_fs.selected=1==b;this.btn_c_ds.selected=2==b;this.nantxt_img.visible=this.nvtxt_img.visible=!(1==this.jobInVersion||2==this.jobInVersion)};e.oncreaterole=function(b){b=b.target.name;if("btn_cr"==b)""!=this.lb_name2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u4e2a\u8d26\u53f7\u6700\u591a\u53ea\u80fd\u521b\u5efa\u4e8c\u4e2a\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]):this.popCreateRoleWin();else if("btn_c_qx"==
b)""!==this.lb_name1.text?this.box_r.removeChildren():this.box_l.removeChildren(),this.img_create.visible=!1,this.tex_name.text="",this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.btn_c_nv.selected=!1,this.btn_c_nan.selected=!1;else if("btn_c_ok"==b)""!=this.tex_name.text&&(Sendmessage.sendNewRole(msgFromLogin[3].toLowerCase(),this.tex_name.text,1,this.job,this.sex),this.img_create.visible=!1,this.btn_cr.removeChildByName("CreateRole"),this.isCreateSubmit=""==this.lb_name1.text?
1:2),this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.btn_c_nv.selected=!1,this.btn_c_nan.selected=!1;else{"btn_c_zs"==b?(this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.job=0,this.btn_c_zs.selected=!0):"btn_c_fs"==b?(this.btn_c_zs.selected=!1,this.btn_c_ds.selected=!1,this.job=1,this.btn_c_fs.selected=!0):"btn_c_ds"==b?(this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.job=2,this.btn_c_ds.selected=!0):"btn_c_nan"==b?(this.sex=0,this.btn_c_nan.selected=
!0,this.btn_c_nv.selected=!1):"btn_c_nv"==b?(this.sex=1,this.btn_c_nv.selected=!0,this.btn_c_nan.selected=!1):"btn_c_sj"==b&&(this.job=Math.floor(3*Math.random()),this.sex=Math.floor(2*Math.random()),this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.btn_c_nv.selected=!1,this.btn_c_nan.selected=!1);if(""==this.lb_name1.text){if(this.box_l.removeChildren(),b=this.getroledata(this.job,this.sex,0))b=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",b.start,b.start+
b.total-1,150,!0,!1),b.scale(.7,.7)}else if(this.box_r.removeChildren(),b=this.getroledata(this.job,this.sex,0))b=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",b.start,b.start+b.total-1,150,!0,!1),b.scale(.7,.7);GameUtil.PlayMusicFormat(S_BUTTON_1)}};e.onCreateRoleFailResult=function(b){0==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8f93\u5165\u7684\u89d2\u8272\u540d\u5305\u542b\u975e\u6cd5\u5b57\u7b26\uff01",callfn:function(){}}]):2==b?Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u521b\u5efa\u89d2\u8272\u540d\u79f0\u5df2\u88ab\u5176\u4ed6\u4eba\u4f7f\u7528\uff01",callfn:function(){}}]):3==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u53ea\u80fd\u521b\u5efa\u4e24\u4e2a\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]):4==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u89d2\u8272\u65f6\u51fa\u73b0\u9519\u8bef\uff01",callfn:function(){}}]):5==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u521b\u5efa\u65b0\u89d2\u8272\uff01",
callfn:function(){}}]):6==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5efa\u7acb\u5305\u542b\u6570\u5b57\u7684\u89d2\u8272\u540d\uff01",callfn:function(){}}]):7==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5efa\u7acb\u5168\u82f1\u6587\u7684\u89d2\u8272\u540d\uff01",callfn:function(){}}]):100==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5206\u533a\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):101==b?Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):102==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"Mac\u65e0\u6548\uff01",callfn:function(){}}]):
106==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"IP\u65e0\u6548\uff01",callfn:function(){}}]):201==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u89d2\u8272\u521b\u5efa\u4e2d,\u8bf7\u7b49\u5f85\uff01",callfn:function(){}}]):202==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u52ff\u91cd\u590d\u521b\u5efa\u76f8\u540c\u89d2\u8272\u540d\uff01",callfn:function(){}}]):203==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6570\u636e\u5e93\u7c7b\u578b\u9519\u8bef,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",
callfn:function(){}}]):204==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u672a\u67e5\u627e\u5230\u89d2\u8272\u521b\u5efa\u7f13\u5b58\u4fe1\u606f\uff01",callfn:function(){}}]):205==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u63d2\u5165\u65b0\u5efa\u89d2\u8272\u6570\u636e\u5931\u8d25\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u89d2\u8272\u5931\u8d25\uff01",callfn:function(){}}]);""==this.lb_name1.text?this.box_l.removeChildren():this.box_r.removeChildren()};
e.onrecovery=function(b){this.btn_cr.removeChildByName("CreateRole");b=b.target.name;"btn_rr"==b?(Sendmessage.sendQueryDeleteChr(msgFromLogin[3].toLowerCase()),this.img_hf.visible=!0):"btn_hf_ok"==b?(this.recoveryrole&&Sendmessage.sendGetBackBeleteChr(msgFromLogin[3].toLowerCase(),this.recoveryrole),this.img_hf.visible=!1):"btn_hf_qx"==b&&(this.img_hf.visible=!1);GameUtil.PlayMusicFormat(S_BUTTON_1);this.SelectIndex=-1};e.onQueryDelCHRSuccResult=function(b){var d=[];b=b.split("/");b.pop();for(i in b){var n=
fnDecode6BitBuf(b[i],b[i].length,!1);n=TDeleteHumanInfo(n.pszDest);d.push(n)}this.rolelist.itemRender=f;this.rolelist.repeatX=1;this.rolelist.repeatY=10;this.rolelist.vScrollBarSkin="";this.rolelist.selectEnable=!0;this.rolelist.renderHandler=new Laya.Handler(this,this.updateitem);this.rolelist.selectHandler=new Laya.Handler(this,this.select);this.rolelist.array=d};e.updateitem=function(b,d){b.settxt(b.dataSource);this.SelectIndex==d?(b.lb_name.color="#ff0000",b.lb_sex.color="#ff0000",b.lb_job.color=
"#ff0000",b.lb_lvl.color="#ff0000",b.role_kuang.visible=!0,this.recoveryrole=b.lb_name.text):(b.lb_name.color="#ffffff",b.lb_sex.color="#ffffff",b.lb_job.color="#ffffff",b.lb_lvl.color="#ffffff",b.role_kuang.visible=!1)};e.select=function(b){this.SelectIndex=b};e.onGetBackRoleFailResult=function(b,d){switch(b){case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u4e2a\u8d26\u6237\u53ea\u80fd\u67092\u4e2a\u89d2\u8272\uff01",callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u7981\u6b62\u627e\u56de\u4eba\u7269!",callfn:function(){}}]);break;default:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u627e\u56de\u4eba\u7269\u5931\u8d25\uff01",callfn:function(){}}])}};e.onstart=function(){var b=Laya.stage.getChildByName("bj_sprite");b&&b.removeSelf();""==this.lb_name1.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u9009\u62e9\u8981\u4f7f\u7528\u7684\u89d2\u8272!",callfn:function(){}}]):(b="",this.selecttype?b=this.lb_name2.text:b=this.lb_name1.text,
Sendmessage.sendSelectRole(msgFromLogin[3].toLowerCase(),b),Laya.loader.clearRes("json/firstname.txt"),Laya.loader.clearRes("json/lastname.txt"))};e.clearlogres=function(){Laya.loader.clearRes("gameres/png/hfkuang.png");Laya.loader.clearRes("gameres/png/rolescene_00702.png");Laya.loader.clearRes("gameres/png/rolescene_bg.png")};e.onStartGameResult=function(b){GameUtil.PlayMusicFormat(S_BUTTON_1);b=b.split("/");var d=b[0],n=b[1],c="";this.selecttype?c=this.lb_name2.text:c=this.lb_name1.text;b=0;this.selecttype?
b=this.lb_lvl2.text:b=this.lb_lvl1.text;g_playerName=g_RoleName=g_RoleNameOnly=c;g_levelForCaiji=b;var h=msgFromLogin[2],m=msgFromLogin[3].toLowerCase();d={ip:d,port:n,code:h,name:c,uid:m};n=!0;for(h=0;h<Laya.stage._childs.length;++h)Laya.stage._childs[h]instanceof GameScene&&(n=!1);(h=Laya.stage.getChildByName("bj_sprite"))&&h.removeSelf();if(n){var g=function(q,r){1<=p&&(Laya.stage.event("loadMainGame"),Sendmessage.GetShopItems(0),Sendmessage.GetStrangeItems(),l.npcshopLayer=new UIShop,l.npcshopLayer.name=
"UIShop",Laya.stage.addChild(l.npcshopLayer),l.npcshopLayer.root.visible=!1,GameUtil.ShowNewLogo(!0),GameUtil.ShowNewLogo(!1),GameUtil.ShowNewBag(!0),GameUtil.ShowNewBag(!1),l.Auxiliary=new uiAuxiliary,Laya.stage.addChild(l.Auxiliary),l.Auxiliary.visible=!1,q.progressBar.visible=!1,q.lb_tip.visible=!1,Laya.timer.clear(this,g),q.removeSelf(),GameUtil.clearResByUrl(c),Laya.stage.event("gameLoadSuccess"),l.visible=!0,Laya.SoundManager.soundVolume=GlobalCfglist.gameVoice?GlobalCfglist.gameVoice/100:.5,
Laya.loader.clearRes(S_SELECTROLE));q.progressBar.value=p+=r;q.barNum.text=parseInt(100*q.progressBar.value)+"%"};Laya.SoundManager.stopAll();Laya.SoundManager.soundVolume=0;Mapmodule.cur_x=0;Mapmodule.cur_y=0;Mapmodule.sceneid=null;n=new health_hintUI;Laya.stage.addChild(n);var l=new GameScene;l.getDataForRoleScene(d);Laya.stage.addChild(l);l.visible=!1;n.btn_ok.visible=!1;c="gameres/png/hint_00"+Math.floor(4*Math.random())+".png";n.img_bg.skin=c;n.zOrder=999999;var p=.1;d=null;d=g_serverconfigtxt.readProgressTime?
1/(1E3*g_serverconfigtxt.readProgressTime/100):1/30;Laya.timer.loop(100,this,g,[n,d]);n.progressBar.value=0}Laya.stage.off(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);this.box_l.off(Laya.Event.CLICK,this,this.onselect1);this.box_r.off(Laya.Event.CLICK,this,this.onselect2);Animationmodule.clearAniCacheAssets();this.clearlogres();this.removeSelf();getinfoforsdk(g_RoleName,b,"1",g_ServerName);isWebForYYY()&&(b=function(q){console.log(q)},
gameClient.clientAction.saveRole({roleName:g_RoleName,level:Number(g_levelForCaiji),isNew:!1,onSuccess:b,onCancel:b}));GameUtil.setSaveData("g_RoleName",g_RoleName)};e.onStartGameFail=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f00\u59cb\u6e38\u620f\u5931\u8d25!",callfn:function(){}}])};return a}(RoleSceneUI),ClientSocket=function(){function e(){this.byte=new Laya.Byte;this.byte.endian=Laya.Byte.LITTLE_ENDIAN;this.socket=new Laya.Socket;this.socket.endian=Laya.Byte.LITTLE_ENDIAN;
this.socket.disableInput=!0;this.socket.on(Laya.Event.OPEN,this,this.openHandler);this.socket.on(Laya.Event.MESSAGE,this,this.receiveHandler);this.socket.on(Laya.Event.CLOSE,this,this.closeHandler);this.socket.on(Laya.Event.ERROR,this,this.socketErrorCatch);Laya.timer.clear(this,this.loopToGetMessage);Laya.timer.loop(50,this,this.loopToGetMessage);this.connect_num=0}var f=[],a=!1,b=!1;this.connectToGameGate=!1;var d=0,n="";e.prototype.getIPPortCount=function(){return d};e.prototype.setIPPortCount=
function(){d=0};e.prototype.connect=function(c,h){a||(console.log("\u8fde\u63a5\u7f51\u5173:",c,h),GameUtil.setDevicesValue(),Laya.Browser.onEdge||this.socket.connect(c,h),a=!0)};e.prototype.openHandler=function(c){a=!1;0==d&&g_isReLog&&(this.End(),Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT));2==d?Sendmessage.SendCaiji(CM_LoginConnect_CJ):3!=d&&1==d&&Sendmessage.sendGetGameList(g_server_area.nListIdx);n="";console.log("\u8fde\u63a5\u7f51\u5173\u6210\u529f\uff01---------",c.target.url);Laya.timer.once(500,
this,function(){isSocketConnected=!0;Laya.stage.event(CUSTOM_EVENT_SERVERCONNECT);b&&(Sendmessage.Refreshviewrange(0),b=!1)});this.connect_num=0;d++;g_tick_ct=g_tick_rate=0};e.prototype.send=function(c){this.socket.connected&&this.socket.send(c)};e.prototype.openWorker=function(){var c=this;Worker&&(this.worker=new Worker("data:,"+scriptWorker),this.worker.onmessage=function(h){c.ExecBuffers(h.data.pMsg,h.data.msgBuff,h.data.length)},this.worker.onmessageerror=function(h){console.log(h);c.worker.terminate();
throw Error("ClientSocket\u6a21\u5757\uff0c\u4e3b\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u5e8f\u5217\u5316\u5931\u8d25\u3002");},this.worker.onerror=function(h){console.log(h);if("Uncaught Error: xlh"===h.message)throw c.worker.terminate(),Error("ClientSocket\u6a21\u5757\uff0c\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u7ed9\u4e3b\u7ebf\u7a0b\u5e8f\u5217\u5316\u5931\u8d25\u3002");c.worker.terminate();throw Error("ClientSocket\u6a21\u5757\uff0c\u5f00\u542f\u7684\u7ebf\u7a0b\u5f02\u5e38\u3002");})};e.prototype.receiveHandler=
function(c){if(this.connectToGameGate){if(0<c.byteLength&&!this.worker&&(c=new Uint8Array(c),f.push.apply(f,c),20<f.length))for(;;){c=new TSocketHeader(f);if(c.dwCode1==RUNGATECODE&&c.dwCode2==RUNGATECODEX){if(c.nLength+20>f.length)break;var h=f.slice(20,c.nLength+20);if(c.wIdent==CGM_COMPDATA&&c.dwCrc!=Crc32(h,h.length)){f.shift();if(20>f.length)break;continue}this.ExecBuffers(c,h,h.length);f.splice(0,20+c.nLength)}else f.shift();if(20>f.length)break}}else"#"===c[0]&&(n+=c)};e.prototype.loopToGetMessage=
function(){if(""!=n&&null!=Gamemessage&&-1!=n.indexOf("!")&&"!"==n[n.length-1]){for(var c=n.split("#"),h=0;h<c.length;++h)if(this.connectToGameGate)Gamemessage.onMsgFromSvr(c[h]);else Laya.stage.event(RECEIVE_ONMESSAGEFROMSERVER,c[h]);n=""}};e.prototype.ExecBuffers=function(c,h,m){switch(c.wIdent){case CGM_DATA:n+=byteArray2String(h,m);break;case CGM_COMPDATA:c=(new Zlib.Inflate(h)).decompress();n+=byteArray2String(c,c.length);break;case CGM_ACTIVE:this.socket.send("*")}};e.prototype.oneconnect=function(){Sendmessage.reconnectGameSvr(GAME_IP,
GAME_PORT);b=!0};e.prototype.closeHandler=function(c){a=!1;g_tick_ct=g_tick_rate=0;Laya.Browser.now();if(0==game_scene_code&&0!=playerID)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7f51\u7edc\u5f02\u5e38\uff01\u8bf7\u91cd\u65b0\u767b\u5f55\u6e38\u620f\uff01",callfn:function(){Laya.Browser.window.location.reload()}}]);else if(0!=playerID)Laya.timer.once(1E3,this,function(){if(!g_isReLog)this.oneconnect()})};e.prototype.setrelink=function(){Laya.timer.once(1E3,this,function(){this.oneconnect()})};
e.prototype.End=function(){this.socket.close()};e.prototype.ResetLogin=function(){if(3===d)Laya.timer.once(1E4,function(){Laya.stage.event("ResetLogin")})};e.prototype.socketErrorCatch=function(c){console.log(c);console.log("WebSocket\u51fa\u73b0\u9519\u8bef\uff01\u6267\u884c\u65ad\u7ebf\u91cd\u8fde\u903b\u8f91");Laya.timer.once(1E3,this,function(){this.oneconnect()})};return e}(),GameMessage=function(){function e(){this.playerSelf=null;this.TK_TICKTIME_TIME=-1;this.TK_DELAY_TIME=0;this.TK_CHEKTIME_TAG=
!1;this.init()}var f,a,b,d=null,n=null,c=null,h=null,m=3*DELAY_INTERVAL;e.prototype.init=function(){Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr)};e.prototype.onMsgFromSvr=function(g){g.length<DEFBLOCKSIZE&&Objectcontrol.sendresult(g);var l=g.substr(0,DEFBLOCKSIZE);g=g.substr(DEFBLOCKSIZE,g.length-1-DEFBLOCKSIZE);l=DecodeMessage(l);var p=ObjectManage.findobject(l.record);if(!p||2==p.type||l.ident!=SM_RUN&&l.ident!=SM_WALK&&l.ident!=SM_RUSH&&l.ident!=SM_100HIT&&l.ident!=SM_RUSHKUNG&&
l.ident!=SM_POWERHIT&&l.ident!=SM_LONGHIT&&l.ident!=SM_WIDEHIT&&l.ident!=SM_FIREHIT&&l.ident!=SM_66HIT&&l.ident!=SM_TWNHIT&&l.ident!=SM_SWORDHIT&&l.ident!=SM_HEAVYHIT&&l.ident!=SM_BACKSTEP&&l.ident!=SM_HIT&&l.ident!=SM_HIT_2&&l.ident!=SM_HIT_3&&l.ident!=SM_HIT_4&&l.ident!=SM_HIT_5&&l.ident!=SM_60HIT&&l.ident!=SM_61HIT&&l.ident!=SM_62HIT&&l.ident!=SM_CRSHIT&&l.ident!=SM_43HIT&&l.ident!=SM_101HIT&&l.ident!=SM_102HIT&&l.ident!=SM_103HIT&&l.ident!=SM_FLYAXE&&l.ident!=SM_SPELL&&l.ident!=SM_MAGICFIRE)this.onhandlmsg(l,
g);else{var q=[];q.msg=l;q.bodystr=g;p.msg_list.push(q)}};e.prototype.onhandlmsg=function(g,l){switch(g.ident){case SM_OPENMISSIONWINDOW:this.UpGlobaInf(l);break;case SM_SENDNOTICE:console.log("---\u516c\u544a---");var p=g.param,q="";0==g.record&&0==p?q=zDecodeString(l):(q=l.split("/"),(l=DecodeString(q[0]))&&98==g.series&&"0"==l[0]&&(l=l.substr(1)),-1!=l.indexOf("/")&&(l=l.split("/")[0]),q=zDecodeString(q[1]),loadmapname="data/mapdata/"+l+".map");(g=Laya.stage.getChildByName("health_hint"))&&q&&
(g.txt.text=q);Sendmessage.sendNoticeOK();g_isReLog=!1;(q=Laya.stage.getChildByName("relinkMask"))&&q.removeSelf();if(g=GameUtil.InstanceOfMem(GameSceneUI))g.mouseEnabled=!0;break;case SM_SERVERCONFIG:this.GetServerConfig(l,g);break;case SM_NEWMAP:(q=Laya.stage.getChildByName("relinkMask"))&&q.removeSelf();l=DecodeString(l);this.clientEnterNewMap(g,l);break;case SM_CHANGEMAP:this.clientRecvChangeMapMessage(g,l);break;case SM_LOGON:g_GameInitFinish=!0;Sendmessage.QueryBagItems();this.clientRevLogon(g,
l);break;case SM_USERNAME:this.clientRevChangeName(g,l);break;case SM_STONEVALUE:g_HPStoneAdd=g.record;g_HPStoneDec=g.param;g_MPStoneAdd=g.tag;g_MPStoneDec=g.series;E_NewPlayerID=DecodeString(l);cur_use_app&&MTPLogin();break;case SM_CHARSTATUSCHANGED:this.clientRoleStateChanged(g,l);break;case SM_OPENCOBWEBWINDING:this.OpenCobWebWinding(g,l);g_boCobWeb=!0;break;case SM_CLOSECOBWEBWINDING:this.CloseCobWebWinding(g,l);g_boCobWeb=!1;break;case SM_MAPDESCRIPTION:this.clientGetMapDescription(g,l);break;
case SM_GAMEGOLDNAME:this.clientGetGameGoldName(g,l);break;case SM_SERVERUNIXTIME:this.parseServerRunixTime(g,l);break;case SM_AUCTIONLIST:this.parseAuctionListData(g,l);break;case SM_AUCTIONITEMADD:this.parseSingleAuctionData(g,l);break;case SM_AUCTIONITEMREMOVE:this.offSaleAuctionHandle(g,l);break;case SM_AUCTIONITEMUPDATE:this.updateAuctionInfo(g,l);break;case SM_AUCTIONPUTONTHESHELF:this.newAuctionTipHandle(g,l);break;case SM_AUCTIONOFFTHESHELF:this.offSaleAuctionTip(g,l);break;case SM_AUCTIONPLUSPRICE:this.bidAuctionTip(g,
l);break;case SM_AUCTIONBUYOUT:this.oncePriceTip(g,l);break;case SM_AUCTIONCLIENTITEM:this.updateAuctionItemInfo(g,l);break;case SM_GAMEPOINTNAME:this.clientGetNewGamePointName(g,l);break;case SM_NEWRANKING:this.parseRankData(g,l);break;case SM_GAMEGLORY:if(""!=l&&g_boOpenCaiji){var r="";g.record>g_gameGlory.value&&(r="\u589e\u52a0/\u975e\u7ed1\u5b9a/");g.record<g_gameGlory.value&&(r="\u51cf\u5c11/\u975e\u7ed1\u5b9a/");g_LogSocket.AddGameDataLog(115,"\u8363\u8a89",g.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+
DecodeString(l),g.record-g_gameGlory.value)}g_gameGlory.value=g.record;Laya.stage.event("updateAuctionHouseMoney",8);Laya.stage.event("Update_Bag");break;case SM_SPECIALCMD:if(""!=l){q=fnDecode6BitBuf(l,l.length,!1);l=new Zlib.Inflate(q.pszDest);q=l.decompress();0<g.series&&(g_CMDlist=[]);for(l=0;l<g.series;l++)g_CMDlist.push(TClientCMD(GameUtil.slice(q,52*l,52*(l+1))));Laya.stage.event("setCMDlist")}break;case SM_SAFEPOINT:this.clientObjGetSafeZoneInfo(g,l);break;case SM_STONEVALUE:g_HPStoneAdd=
g.record;g_HPStoneDec=g.param;g_MPStoneAdd=g.tag;g_MPStoneDec=g.series;break;case SM_ATTATCKMODE:Laya.stage.event("update_att_mode",[g.record]);g_first_entermap&&(console.log("--------------------------SM_CHANGESPEED---------------------------------------------\x3e"),Mapmodule.loadmapdata(),g_first_entermap=!1);break;case SM_NAVIGATIONINFO:this.clientGetNavigationInfo(g,l);break;case SM_CHANGELIGHT:this.clientChangeRoleLight(g);break;case SM_SHOWFASHION:this.ShowDressGodBless(g);break;case SM_CHANGESPEED:if(p=
ObjectManage.findobject(g.record))l=DecodeString(l),p.realSpeed=l?parseInt(l):0,p.movesd=6E4<g.param?g.param-65536:g.param,p.attsp=6E4<g.tag?g.tag-65536:g.tag,p.skillsp=6E4<g.series?g.series-65536:g.series;break;case SM_MAGIC_LVEXP:this.UpdateMagicData(g,l);break;case SM_CHANGENAMECOLOR:this.clientChangeRoleNameColor(g);break;case SM_BACKSTEP:case SM_TURN:this.clientRoleDoTurn(g,l);break;case SM_RUSHKUNG:case SM_RUSH:case SM_WALK:case SM_100HIT:this.clientRecvWalkMessage(g,l);break;case SM_RUSHKUNG_STOP:g_furious_collision_ing=
!1;g_furious_collision_end=!0;Objectcontrol.move_call_result=!0;break;case SM_RUN:case SM_HORSERUN:this.clientRecvRunMessage(g,l);break;case SM_HIT:case SM_HIT_2:case SM_HIT_3:case SM_HIT_4:case SM_HIT_5:case SM_HEAVYHIT:case SM_POWERHIT:case SM_LONGHIT:case SM_WIDEHIT:case SM_BIGHIT:case SM_FIREHIT:case SM_60HIT:case SM_61HIT:case SM_62HIT:case SM_66HIT:case SM_TWNHIT:case SM_CRSHIT:case SM_43HIT:case SM_SWORDHIT:case SM_101HIT:case SM_102HIT:case SM_103HIT:this.clientRecvHitMessage(g,l);break;case SM_STRUCK:case SM_STRUCK_BLAST:case SM_HEROGROUPATTACK:case SM_NPCHSPELLCHANGED:case SM_REBOUND:this.clientRecvStruckMessage(g,
l);break;case SM_BUTCH:case SM_SITDOWN:this.clientRecvRoleSitDownMessage(g);break;case SM_SPELL:this.clientRecvSpellMessage(g,l);break;case SM_DIGUP:this.clientRecvDigUpMessage(g,l);break;case SM_DIGDOWN:this.clientRecvDigDownMessage(g);break;case SM_FLYAXE:this.clientRecvFlyAXEMessage(g,l);break;case SM_LIGHTING:this.clientRecvLigthingMessage(g,l);break;case SM_SKELETON:case SM_ALIVE:this.clientRecvAliveMessage(g,l);break;case SM_DEATH:case SM_NOWDEATH:this.clientRecvDeathMessage(g,l);break;case SM_FEATURECHANGED:this.clientChangeRoleFeature(g,
l);break;case SM_QUERYSELECTSHOPINFO_FAIL:this.QuerySelectShopInfoFaild(g,l);break;case SM_VIEWBAITAN:this.ViewBaiTan(g,l);break;case SM_OPENMYBAITAN:this.OpenMyBaiTan(g,l);break;case SM_ADDPAIMAIITEMFAIL:this.AddBaiTanItemFaild(g,l);break;case SM_ADDPAIMAIITEMOK:this.AddBaiTanItemOk(g,l);break;case SM_SENDSHOPNAME:g_boOpenCaiji?this.SendBaiTanName_Caiji(g,l):this.SendBaiTanName(g,l);break;case SM_BUYBAITANITEM:this.BuySomeItem(g,l);break;case SM_SENDSUPERSHILEDEFFECT:this.Play_htsd(g);break;case SM_QUERYUSERSHOPS:this.QueryShop(g,
l);break;case SM_QUERYSELECTSHOPINFO:this.QuerySelectShopInfo(g,l);break;case SM_SEARCHSHOPITEMS:this.SearchShopItems(g,l);break;case SM_QUERYUSERSHOPITEMS:this.QueryUserShopItems(g,l);break;case SM_SENDBUYUSERSHOPITEM_OK:this.SendBuyUserShopItemOk(g,l);break;case SM_SENDBUYUSERSHOPITEM_FAIL:this.SendBuyUserShopItemFail(g,l);break;case SM_SENDMOVEMYSHOPITEM_OK:this.SendMoveMyShopItemOk(g,l);break;case SM_SENDMOVEMYSHOPITEM_FAIL:this.SendMoveMyShopItemFail(g,l);break;case SM_QUERYMYSHOPSELLINGITEMS:this.QueryMyShopSellingItems(g,
l);break;case SM_QUERYMYSHOPSELLEDITEMS:this.QueryMyShopSelledItems(g,l);break;case SM_QUERYMYSHOPSTORAGEITEMS:this.QueryMyShopStorageItems(g,l);break;case SM_SENDADDTOMYSHOP_OK:this.SendAddToMyShopOk(g,l);break;case SM_SENDADDTOMYSHOP_FAIL:this.SendAddToMyShopFail(g,l);break;case SM_SENDCHANGEMYSHOPITEM_OK:this.SendChangeMyShopItemOk(g,l);break;case SM_SENDCHANGEMYSHOPITEM_FAIL:this.SendChangeMyShopItemFail(g,l);break;case SM_DISAPPEAR:case SM_HIDE:this.clientRecvHideMessage(g,l);break;case SM_MOVEFAIL:this.clientRecvMoveFailMessage(g,
l);break;case SM_HEALTHSPELLCHANGED:this.clientRecvHealthSpellChanged(g,l);break;case SM_BEAD:this.clientChangeBead(g,l);break;case SM_ABILITY:this.clientRecvAbilityMessage(g,l);break;case SM_POISON_DECHEALTH:this.PoisonDechealth(g,l);break;case SM_POISON_DAMAGEARMOR:this.PoisonDamagearmor(g,l);break;case SM_POISON_STONE:this.PoisonStone(g,l);break;case SM_SUBABILITY:this.clientRecvSubAbilityMessage(g,l);break;case SM_DAYCHANGING:this.clientChangeLightOnDay(g);break;case SM_WEATHER:this.setWeatherEffect(g);
break;case SM_ADJUST_BONUS:this.updateRoleBaseAttri(g,l);break;case SM_ITEMDESCLIST:this.clientRecvItemDescList(g,l);break;case SM_LAMPCHANGEDURA:this.ChangeUseDura(g,l);break;case SM_DURACHANGE:this.ChangeItemDura(g,l);break;case SM_OPENMISSIONWINDOWEX:this.openmissonwindowex(g,l);break;case SM_MISSIONNPC:this.openDialog(g,l);break;case SM_BLUEMISSIONLIST:this.bluemissionlist(g,l);break;case SM_MERCHANTSAY:this.open2Dialog(g,l);break;case SM_NEWTASKLIST:this.newTaskList(l);break;case SM_NEWTASKOPERATE:this.newTaskOperate(g,
l);break;case SM_SENDMAILSTATE:this.mailstate(g,l);break;case SM_SENDUSERMAIL:this.getUserMail(g,l);break;case SM_SENDUSERMAILCONTENT:this.getUserMailContent(g,l);break;case SM_UPDATEUSERMAILITEM:this.getUserMailUpdate(g,l);break;case SM_MAIL_OK:this.getMailOkCode(g);break;case SM_MAIL_FAIL:this.getMailFailCode(g);break;case SM_DELETEALLMAIL:this.deleteAllMail(g,l);break;case SM_ADDNEWMAIL:this.addNewMail(g,l);break;case SM_EXTENDBAGSLOT:this.updateExtendBagItemCount(g);break;case SM_SENDUSEITEMS:this.clientGetSenduseItems(g,
l);break;case SM_DROPITEM_SUCCESS:this.clientRecvDropItemSucc(g,l);break;case SM_DROPITEM_FAIL:this.clientRecvDropItemFail(g,l);break;case SM_ITEMSHOW:this.clientRecvShowItemMsg(g,l);break;case SM_ITEMHIDE:this.clientRecvHideItemMsg(g,l);break;case SM_STORAGEVIEW:this.MsgDepotItems(g,l);break;case SM_ADDMAGIC:this.AddMagicToRole(g,l);break;case SM_SENDMYMAGIC:this.SelfMagicData(g,l);break;case SM_FRIENDS:this.onFriendOption(g,l);break;case SM_GETFRIENDINFO:this.onFriendInfo(g,l);break;case SM_SENDMAGICLIST:this.MagicStaticList(g,
l);break;case SM_BINDGOLDCHANGED:g_boOpenCaiji&&""!=l&&(g.record>g_bindCionNum.value&&1!=g.series?g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g.record,"\u589e\u52a0/\u7ed1\u5b9a/"+DecodeString(l),g.record-g_bindCionNum.value):g.record<g_bindCionNum.value&&1!=g.series&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g.record,"\u51cf\u5c11/\u7ed1\u5b9a/"+DecodeString(l),g.record-g_bindCionNum.value),q=CodeUtil._MAKELONG(g.param,g.tag),g_bindGoldNum.value<q?g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",
g.record,"\u589e\u52a0/\u7ed1\u5b9a/"+DecodeString(l),q-g_bindGoldNum.value):g_bindGoldNum.value>q&&g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",g.record,"\u51cf\u5c11/\u7ed1\u5b9a/"+DecodeString(l),q-g_bindGoldNum.value));if(l=ObjectManage.findobject(playerID))g_bindCionNum.value=g.record,Laya.stage.event("updateAuctionHouseMoney",2),g_bindGoldNum.value=CodeUtil._MAKELONG(g.param,g.tag),Laya.stage.event("updateAuctionHouseMoney",4),Laya.stage.event("Update_Bag"),GameUtil.InstanceOfMem(HumWinUI)&&
Laya.stage.event("updateHum");break;case SM_DOUBLEEXP:m_DoubleExp=g.record;break;case SM_CHANGEGUILDNAME:this.IsHaveGrild(g,l);break;case SM_SPACEMOVE_HIDE:this.clientRecvSpaceMoveHideMsg(g);case SM_SPACEMOVE_HIDE2:this.clientRecvSpaceMove2HideMsg(g);break;case SM_SPACEMOVE_SHOW:case SM_SPACEMOVE_SHOW2:case SM_MAGSBYSSHOW:this.clientRecvSpaceMoveShowMsg(g,l);break;case SM_LEVELUP:q=g.record;this.clientRecvlevelup(g,l);break;case SM_HEAR:this.clientRecvActorSay(g,l);break;case SM_WINEXP:this.clientRecvWinExp(g,
l);break;case SM_CUTE:this.clientRecvCuteMsg(g,l);break;case SM_WINEEXP:this.clientRecvWineMagic(g,l);break;case SM_GHOST:this.clientRecvHideMessage(g,l);break;case SM_CRY:this.clientRecvPlayerTalkMsg(g,l,6);break;case SM_GROUPMESSAGE:this.clientRecvPlayerTalkMsg(g,l,5);break;case SM_GUILDMESSAGE:this.clientRecvPlayerTalkMsg(g,l,3);break;case SM_WHISPER:this.clientRecvPlayerTalkMsg(g,l,2);break;case SM_SYSMESSAGE:this.clientRecvPlayerTalkMsg(g,l,0);break;case SM_MOVEMESSAGE:this.clientRecvMoveMessage(g,
l);break;case SM_DELAYMESSAGE:this.clientRecvDelayMsg(g,l);break;case SM_CENTERMESSAGE:this.clientRecvCenterMsg(g,l);break;case SM_TOPCHATBOARDMESSAGE:this.clientRecvMsgShowOnChatTop(g,l);break;case SM_ADDITEM:this.clientRecvAddItemMessage(g,l);break;case SM_BAGITEMS:this.clientRecvGetBagItmes(g,l);break;case SM_EAT_OK:this.clientEatMsg(g,l,!0);break;case SM_EAT_FAIL:this.clientEatMsg(g,l,!1);break;case SM_DELITEM:this.clientRecvDelectItem(g,l);break;case SM_DELITEMS:this.clientRecvDelectItems(g,
l);break;case SM_SENDGOODSLIST:this.ShopFormNpcItemList(g,l);break;case SM_SENDDETAILGOODSLIST:this.ShopItemInfoList(g,l);break;case SM_SENDREPAIRCOST:case SM_SENDBUYPRICE:G_Show_Item_Price=g.record;break;case SM_SENDUSEREFFECT:this.SendUserEffect(g,l);break;case SM_SENDUSERADDEFFECT:this.SendUserAddEffect(g,l);break;case SM_PLAYMAGICBALLEFFECT_GOM:this.SendUserAddEffectGom(g,l);break;case SM_USERREPAIRITEM_FAIL:Laya.stage.event("show_log",[{txt:"\u60a8\u4e0d\u80fd\u4fee\u7406\u6b64\u7269\u54c1",
color:"#ff0000"}]);break;case SM_BUYITEM_SUCCESS:l=DecodeString(l);if(g_boOpenCaiji&&""!=l){r=l.split("/");p=r[1];q=r[2];var u=r[3],v=r[0].split(":");r="\u975e\u7ed1\u5b9a";var w="\u975e\u7ed1\u5b9a\u7269\u54c1";"1"==v[0]&&(r="\u7ed1\u5b9a",w="\u5df2\u7ed1\u5b9a\u7269\u54c1");var z=DecodeString(v[1]).split("/");v=z[0]&&-1!=z[0].indexOf("+")?z[1]:z[2];var A=z[0].replace("+","");g_LogSocket.AddGameDataLog(9,A,u,p,w+"/"+q+"/"+z[4]+"/"+v+"/"+r);p="\u51cf\u5c11/"+r+"/\u8d2d\u4e70\u7269\u54c1/NPC/"+p+"/"+
A+"/"+u;u="-"+v;"\u91d1\u5e01"==q&&("\u7ed1\u5b9a"==r?g_LogSocket.AddGameDataLog(13,q,g.record,p,u):g_LogSocket.AddGameDataLog(13,q,g_GameCionNum.value-v,p,u));"\u5143\u5b9d"==q&&("\u7ed1\u5b9a"==r?g_LogSocket.AddGameDataLog(111,q,g_bindGoldNum.value-v,p,u):g_LogSocket.AddGameDataLog(111,q,g_GameGoldNum.value-v,p,u))}if("1"==l.split(":")[0]){if(l=ObjectManage.findobject(playerID))l.BindGold=g.record}else g_GameCionNum.value=g.record,Laya.stage.event("updateAuctionHouseMoney",1);Laya.stage.event("Update_Bag");
Laya.stage.event("npc_shop_BUYITEM_SUCCESS");break;case SM_BUYITEM_FAIL:this.BuyItemFailed(g,l);break;case SM_SENDUSERREPAIR:this.EpairItem(g,l);break;case SM_SENDUSERSELL:this.ShellItems(g,l);break;case SM_USERREPAIRITEM_OK:g_GameCionNum.value=g.record;Laya.stage.event("updateAuctionHouseMoney",1);null!=g_MoveItems.Items&&(Laya.stage.event("show_alert_dlg",[{type:1,txt:g_MoveItems.Items.s.Name+"  \u4fee\u590d\u6210\u529f\uff01\uff01",callfn:function(){}}]),GameApi.UpdateBagItemsDura(g_MoveItems.Items.MakeIndex,
g.param,g.tag));break;case SM_USERSELLITEM_OK:g_boOpenCaiji&&""!=l&&(l=DecodeString(l),l=l.split("/"),p=l[0],v=l[1],g_WaitItems.Items&&(A=g_WaitItems.Items.s.Name,u=g_WaitItems.Items.MakeIndex,w="\u975e\u7ed1\u5b9a\u7269\u54c1",g_WaitItems.Items.s.IsBind&&(w="\u5df2\u7ed1\u5b9a\u7269\u54c1"),r="\u7ed1\u5b9a",g_GameCionNum.value!=g.record&&(r="\u975e\u7ed1\u5b9a",g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/\u51fa\u552e\u7269\u54c1/NPC/"+p+"/"+A+"/"+u,v)),
g_LogSocket.AddGameDataLog(10,A,u,p,w+"/\u91d1\u5e01/1/"+v+"/"+r)));g_GameCionNum.value=g.record;Laya.stage.event("updateAuctionHouseMoney",1);Laya.stage.event("Update_Bag");Laya.stage.event("Screen_Refresh_Items");break;case SM_USERSELLITEM_FAIL:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u7269\u54c1\u65e0\u6cd5\u51fa\u552e\uff01\uff01\uff01",callfn:function(){}}]);null!=g_WaitItems.Items&&(GameUtil.AddItemNewBag(g_WaitItems.Items),Laya.stage.event("Show_Bag_Item_ico"),Laya.stage.event("Screen_Add_Items",
g_WaitItems.Items),g_WaitItems.Items=null);break;case SM_UPDATEITEM:this.clientRecvUpdateItem(g,l);break;case SM_DELMAGIC:this.clientRecvDeleteMagic(g.record);break;case SM_SENDMAGICLIST:this.clientRecvMagicList(g,l);break;case SM_DEALTRY_FAIL:Laya.stage.event("show_log",[{txt:"\u53ea\u6709\u4e8c\u4eba\u9762\u5bf9\u9762\u624d\u80fd\u8fdb\u884c\u4ea4\u6613\u3002",color:"#ff0000"}]);break;case SM_CREATEGROUP_FAIL:this.CreateTeamFaild(g,l);break;case SM_SENDSETTINGGEM_OK:this.setGem(g,l);break;case SM_BOXITEM:this.boxitem(g,
l);break;case SM_SENDSETTINGGEM_FAIL:console.log("\u9576\u5d4c\u5b9d\u77f3\u5931\u8d25");break;case SM_CREATEGROUP_OK:this.CreateTeamOk(g,l);break;case SM_GROUPMEMBERS:this.setTeamGroupList(g,l);break;case SM_GROUPLIST:this.nearTeamListHandle(g,l);break;case SM_GROUPAPPLY:this.applyTeamHandle(g,l);break;case SM_GROUPAPPLY_FAIL:this.applyTeamFail(g,l);break;case SM_GROUPACCEPT_FAIL:this.acceptTeamFail(g,l);break;case SM_GROUPDELMEM_FAIL:this.DeleteTeamGroupItemFaild(g,l);break;case SM_GROUPDELMEM_OK:this.DeleteTeamGroupItemOk(g,
l);break;case SM_GROUPMODECHANGED:this.ChangeTeamGroupState(g,l);break;case SM_GROUPADDMEM_FAIL:this.AddTeamMemberFaild(g,l);break;case SM_GROUPADDMEM_OK:this.AddTeamMemberOk(g,l);break;case SM_GROUPCANCEL:this.ClearTeamGroupList(g,l);break;case SM_DEALMENU:G_Trade_Other_Name=DecodeString(l);GameUtil.ShowNewBag(!0);GameApi.ShowJiaoYi(!0);break;case SM_DEALADDITEM_FAIL:null!=g_WaitItems.Items&&(GameUtil.AddItemNewBag(g_WaitItems.Items),g_WaitItems.Items=null,Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u65e0\u6cd5\u653e\u7f6e\u66f4\u591a\u7269\u54c1\u4e86\uff01\uff01",callfn:function(){}}]));DragItem.backToOriginHandler();break;case SM_DEALCHGGOLD_FAIL:this.dealgold=!1;g_GameCionNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",1);Laya.stage.event("Show_Me_Gold",g.record);Laya.stage.event("Update_Bag");break;case SM_DEALCHGGOLD_OK:this.dealgold=!0;g_GameCionNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",1);Laya.stage.event("Show_Me_Gold",
g.record);Laya.stage.event("Update_Bag");GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");g_boOpenCaiji&&""!=l&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g_GameCionNum.value,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/\u4ea4\u6613\u653e\u5165\u91d1\u5e01/\u73a9\u5bb6/"+DecodeString(l),"-"+g.record);break;case SM_DEALREMOTECHGGOLD:Laya.stage.event("Show_Hum_Gold",[g.record]);break;case SM_DEALADDITEM_OK:null!=g_WaitItems.Items&&(GameApi.AddJiaoYiItems(g_WaitItems.Items),g_WaitItems.Items=null);
break;case SM_DEALREMOTEADDITEM:q=fnDecode6BitBuf(l,l.length,!1);g=TClientItem(q.pszDest);GameApi.AddHumJiaoYiItems(g);break;case SM_DEALDELITEM_FAIL:null!=g_WaitItems.Items&&(GameApi.AddJiaoYiItems(g_WaitItems.Items),g_WaitItems.Items=null);DragItem.backToOriginHandler();break;case SM_DEALDELITEM_OK:null!=g_WaitItems.Items&&(GameUtil.AddItemNewBag(g_WaitItems.Items),Laya.stage.event("Show_Bag_Item_ico"),g_WaitItems.Items=null);break;case SM_DEALREMOTEDELITEM:q=fnDecode6BitBuf(l,l.length,!1);g=TClientItem(q.pszDest);
GameApi.DelHumJiaoYiItems(g.MakeIndex);break;case SM_DEALSUCCESS:GameApi.ShowJiaoYi(!1);break;case SM_DEALCANCEL:GameApi.CloseJiaoYi();GameApi.ShowJiaoYi(!1);this.dealgold&&(g_GameCionNum.value+=g_MyJiaoYiSum,Laya.stage.event("updateAuctionHouseMoney",1));Laya.stage.event("Update_Bag");g_boOpenCaiji&&""!=l&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g_GameCionNum.value,"\u589e\u52a0/\u975e\u7ed1\u5b9a/\u4ea4\u6613\u53d6\u6d88\u8fd4\u56de\u91d1\u5e01/\u73a9\u5bb6/"+DecodeString(l),g_MyJiaoYiSum);
g_MyJiaoYiSum=0;break;case SM_SENGSHOPITEMS:this.ShopItemList(g,l);break;case SM_BUYSHOPITEM_FAIL:this.BuyShopItemFailed(g,l);break;case SM_SENTSHOPITEM_FAIL:this.GiftItemFailed(g,l);break;case SM_OPENDOOR_OK:p=new Laya.Point(g.param,g.tag);Mapmodule.opendoor(p);break;case SM_OPENDOOR_LOCK:this.clientRecvDoorLockMsg();break;case SM_CLOSEDOOR:p=new Laya.Point(g.param,g.tag);Mapmodule.closedoor(p);break;case SM_SENDUSERSTATE:this.LookAtUserState(g,l);break;case SM_OPENNEWGUILDDLG:this.openGuildDlg(g,
l);break;case SM_OPENGUILDINFO:this.OpenGuildInfo(g,l);break;case SM_GUILDMAKEALLY_FAIL:this.GuildOptFaild(g,l);break;case SM_OPENGUILDDLG_FAIL:Laya.stage.event("show_log",[{txt:"\u6253\u5f00\u884c\u4f1a\u754c\u9762\u5931\u8d25",color:"#ff0000"}]);break;case SM_GUILDBREAKALLY_FAIL:this.GuildFialdFail(g,l);break;case SM_SENDGUILDMEMBERLIST:this.guildMemberList(g,l);break;case SM_GUILDADDMEMBER_OK:Sendmessage.sendGuildMemberList();Laya.stage.event("show_log",[{txt:"\u52a0\u5165\u884c\u4f1a\u6210\u529f\uff01",
color:"#ff0000"}]);break;case SM_GUILDADDMEMBER_FAIL:l="";1==g.record?l="\u4f60\u6ca1\u6709\u6743\u5229\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u3002":2==g.record?l="\u60f3\u52a0\u5165\u8fdb\u6765\u7684\u6210\u5458\u5e94\u8be5\u6765\u9762\u5bf9\u638c\u95e8\u4eba\u3002":3==g.record?l="\u5bf9\u65b9\u5df2\u7ecf\u52a0\u5165\u6211\u4eec\u7684\u884c\u4f1a\u3002":4==g.record?l="\u5bf9\u65b9\u5df2\u7ecf\u52a0\u5165\u5176\u4ed6\u884c\u4f1a\u3002":5==g.record?l="\u5bf9\u65b9\u4e0d\u5141\u8bb8\u52a0\u5165\u884c\u4f1a\u3002":
6==g.record?l="\u884c\u4f1a\u6210\u5458\u5df2\u7ecf\u6ee1\u5458\u3002":7==g.record&&(l="\u4e0d\u540c\u56fd\u5bb6\u7981\u6b62\u52a0\u5165\u884c\u4f1a\u3002");Laya.stage.event("show_log",[{txt:l,color:"#ff0000"}]);break;case SM_GUILDDELMEMBER_OK:Sendmessage.sendGuildMemberList();break;case SM_GUILDRANKUPDATE_FAIL:l="";-2==g.record?l="\u638c\u95e8\u4eba\u4f4d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a\u3002":-3==g.record?l="\u65b0\u7684\u884c\u4f1a\u638c\u95e8\u4eba\u5df2\u7ecf\u88ab\u4f20\u4f4d\u3002":-4==g.record?
l="\u4e00\u4e2a\u884c\u4f1a\u6700\u591a\u53ea\u80fd\u6709\u4e8c\u4e2a\u638c\u95e8\u4eba\u3002":-5==g.record?l="\u638c\u95e8\u4eba\u4f4d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a\u3002":-6==g.record?l="\u4e0d\u80fd\u6dfb\u52a0\u6210\u5458/\u5220\u9664\u6210\u5458\u3002":-7==g.record&&(l="\u804c\u4f4d\u91cd\u590d\u6216\u8005\u51fa\u9519\u3002");Laya.stage.event("show_log",[{txt:l,color:"#ff0000"}]);break;case SM_GUILDDELMEMBER_FAIL:l="";1==g.record?l="\u4e0d\u80fd\u4f7f\u7528\u547d\u4ee4\uff01":2==g.record?l="\u6b64\u4eba\u975e\u672c\u884c\u4f1a\u6210\u5458!":
3==g.record?l="\u884c\u4f1a\u638c\u95e8\u4eba\u4e0d\u80fd\u5f00\u9664\u81ea\u5df1!":4==g.record&&(l="\u4e0d\u80fd\u4f7f\u7528\u547d\u4ee4Z!");Laya.stage.event("show_log",[{txt:l,color:"#ff0000"}]);break;case SM_TAKEON_OK:this.clientRecvTakeOnOk(g,l);break;case SM_TAKEON_FAIL:this.clientRecvTakeFailMsg(g,l);break;case SM_TAKEOFFITEM:l=g_UserItemList[g.param];g_UserItemList[g.param]=null;Laya.stage.event("Show_Item_ico",g.param);18<=g.param&&29>=g.param&&Laya.stage.event("updateHumNewDress");4==g.param&&
Laya.stage.event("Show_Item_ico",13);l&&Animationmodule.removeAniname("bodyeffect"+l.MakeIndex);GameUtil.InstanceOfMem(ShousWinUI)&&Laya.stage.event("update_shengxiao",[g_UserItemList]);GameUtil.InstanceOfMem(ShoushiUI)&&Laya.stage.event("show_shoushi_box",[g_UserItemList]);break;case SM_TAKEOFF_OK:this.clientRecvTakeOffMsg(g,l);break;case SM_TAKEOFF_FAIL:this.clientRecvTakeOffFail(g,l);break;case SM_SHOWEVENT:case SM_SHOWEVENTEX:this.showmapevent(g,l);break;case SM_HIDEEVENT:this.hidemapevent(g,
l);break;case SM_MAGICFIRE:this.magicfire(g,l);g_boMagicGood=!0;break;case SM_MAGICFIRE_FAIL:this.magicfirefail(g,l);g_boMagicGood=!1;break;case SM_CHANGEFACE:this.changeface(g,l);break;case SM_READMINIMAP_OK:this.readminimapok(g,l);break;case SM_READMINIMAP_FAIL:this.readminimapfail(g,l);break;case SM_GOLDCHANGED:g_boOpenCaiji&&""!=l&&(g.record>g_GameCionNum.value?g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+DecodeString(l),g.record-g_GameCionNum.value):
g.record<g_GameCionNum.value&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+DecodeString(l),g.record-g_GameCionNum.value),q=CodeUtil._MAKELONG(g.param,g.tag),g_GameGoldNum.value<q?g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d,",g.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+DecodeString(l),q-g_GameGoldNum.value):g_GameGoldNum.value>q&&g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",g.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+DecodeString(l),q-g_GameGoldNum.value));
g.record>g_GameCionNum.value&&Laya.stage.event("show_log",[{txt:"\u5df2\u83b7\u5f97"+(g.record-g_GameCionNum.value)+g_GameCionNum.key,color:"#00ff00"}]);g_GameCionNum.value=g.record;Laya.stage.event("updateAuctionHouseMoney",1);g_GameGoldNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",3);Laya.stage.event("Update_Bag");break;case SM_WEIGHTCHANGED:(p=ObjectManage.findobject(playerID))&&p.m_Abil&&(p.m_Abil.Weight=g.record,p.m_Abil.WearWeight=g.param,p.m_Abil.WearWeight=
g.tag,Laya.stage.event("update_role_attri"),Laya.stage.event("update_bag_info"),Laya.stage.event("Update_Bag"));break;case SM_LEGTZLIST:this.GetLegTZList(g,l);break;case SM_OPENBIGMERCHANTBIGDLG:this.GetNpcWindows(g,l);break;case SM_CLOSEBIGMERCHANTBIGDLG:npc_img_name="gameres/png/npc_di.png";GameApi.ShowNewNpcDlgEx(!1);break;case SM_EFFECTIMAGELIST:this.GetPakList(g,l);break;case SM_716:this.clientRecv716(g);break;case SM_LIGHTINGEX:this.clientRecvLightingEX(g,l);break;case SM_MENU_OK:this.ShowMessageDLG(g,
l);break;case SM_REDPACK:this.GetRedPack(g,l);break;case SM_OpenRedPac:this.GetRedPackinf(g,l);break;case SM_BUILDGUILD_OK:this.clientRecvbuildok(g,l);break;case SM_BUILDGUILD_FAIL:this.clientRecvbuildfail(g,l);break;case SM_CLOSECLIENTBUFF:this.clientclosebuff(g,l);break;case SM_ZHAOMU:this.getzhaomupay(g,l);break;case SM_NPCITEMSHOW:this.GetNpcItemShow(g,l);case SM_NEWGUIITEMSHOW:this.GetFleixbleItemShow(g,l);break;case SM_OPENNEWGUI:this.openNewGUI(g,l);break;case SM_SHOWBOX:this.OpenBox(g,l);
break;case SM_OPENBOX_FAIL:Laya.stage.event("game_dlg_cmd",[{id:"openbox_fail"}]);Laya.stage.event("show_log",[{txt:"\u7f3a\u5c11\u5b9d\u7bb1\u94a5\u5319\uff01",color:"#ff0000"}]);break;case SM_OPENBOX_SUCCESS:this.OpenBoxSuccess(g,l);break;case SM_SENDGETBOXITEMINDEX:this.GetBoxItemIndex(g);break;case SM_FISHMESSAGE:this.GetFishInfo(g,l);break;case SM_MERCHANTDLGCLOSE:GameApi.ShowNewNpcDlg(!1);break;case SM_CORRECTPOINT:this.correctpoint(g);break;case SM_BREAKWEAPON:this.breakweapon(g,l);break;case SM_STOPBAITAN:g_boOpenCaiji?
this.StopMyShop_Caiji(g,l):GameApi.StopMyShop();break;case SM_TAKEONITEM:this.GameTakeAotoOnItem(g,l);break;case SM_SENDUSERICONGIF:this.HumIcon(g,l);break;case SM_PROGRESSBARDLG:this.TreasureMap(g,l);break;case SM_AUTOGOTOXY:this.xunlu(g,l);break;case SM_OPENHEALTH:this.openhealth(g,l);break;case SM_SCREENEFFECT:this.Get_SCREENEFFECT(g,l);break;case SM_SENDH5CODE:game_scene_code=g.record;break;case SM_SOFTCLOSE:Laya.stage.event("game_dlg_cmd",[{id:"exit_to_role"}]);n&&(n.removeSelf(),n=null,Laya.timer.clear(this,
this.onAssetsDestroy));c&&(c.removeSelf(),c=null);break;case SM_SENDWEBBROWSER:this.getMoneyPay(l);break;case SM_LUASOCKET:146==g.param&&this.getSuitInfo(l);break;case SM_OPENUPGRADEDLG:this.openDLG(l,g.record);break;case SM_PACKAGEITEM_OK:this.packageitemok(g,l);break;case SM_PACKAGEITEM_FAIL:this.packageitemfail(g,l);break;case SM_PLAYDICE:Laya.stage.event("playDice",[g,l]);break;case SM_HEROLOGON:q=l.slice(0,20);q=fnDecode6BitBuf(q,q.length);q=TMessageBodyWL(q.pszDest).lParam1;l=l.slice(27,l.length);
l=fnDecode6BitBuf(l,256);l=TFeature(q,l.pszDest);if(g=ObjectManage.findobject(g.record))g.data.fea=l,l=Animationmodule.playframe(!0,g,"data/effect/",770,789,30,!1,!0);break;case SM_HEROLOGOUT:(g=ObjectManage.findobject(g.record))&&(l=Animationmodule.playframe(!0,Mapmodule.root,"data/effect/",800,819,30,!1,!0))&&l.pos(48*g.grid.x,32*g.grid.y);break;case SM_HEROLOGON_OK:l=DecodeString(l);q=l.split("\\");q[0]&&(g_HeroLoyalPoint=q[0]);Laya.stage.event("heroCall_OK",[g,l]);g_myHero&&g_myHero.m_Abil&&Laya.stage.event("update_hero_info",
[g_myHero.m_Abil]);break;case SM_HEROLOGOUT_OK:g_HeroBagItemsList=[];Laya.stage.event("heroExit_OK");break;case SM_HEROLOYAL:g_myHero&&g_myHero.data.record==g.record&&(g_HeroLoyalPoint=DecodeString(l),g_myHero&&g_myHero.m_Abil&&Laya.stage.event("update_hero_info",[g_myHero.m_Abil]));break;case SM_HEROANGERVALUE:g_myHero&&(g_myHero.AngryValue=g.param,g_myHero.AngryValueMax=g.tag,Laya.stage.event("update_AngryValue"));break;case SM_HEROABILITY:CodeUtil._LOBYTE(g.param);CodeUtil._HIBYTE(g.param);q=fnDecode6BitBuf(l,
l.length,!1);l=new Zlib.Inflate(q.pszDest);q=l.decompress();l=TAbility(q);null==g_myHero&&(g_myHero=ObjectManage.findobject(g.record));g_myHero&&(g_myHero.m_Abil=l);g_myHero.m_Abil&&(g_myHero.m_Abil.name=g_myHero.txt_name?g_myHero.txt_name.text:"");break;case SM_HEROSUBABILITY:g_nHeroHitPoint=CodeUtil._LOBYTE(g.param);g_nHeroSpeedPoint=CodeUtil._HIBYTE(g.param);g_nHeroAntiPoison=CodeUtil._LOBYTE(g.tag);g_nHeroPoisonRecover=CodeUtil._HIBYTE(g.tag);g_nHeroHealthRecover=CodeUtil._LOBYTE(g.series);g_nHeroSpellRecover=
CodeUtil._HIBYTE(g.series);g_nHeroAntiMagic=CodeUtil._LOBYTE(CodeUtil._MAKELONG(g.record));l=DecodeString(l);GameUtil.InstanceOfMem(HeroWinUI)&&Laya.stage.event("updateHero");break;case SM_SENDHEROUSEITEMS:this.getHeroItems(g,l);break;case SM_SENDMYHEROMAGIC:this.getHeroSkill(g,l);break;case SM_HEROADDMAGIC:g_myHero&&this.addHreroSkill(g,l);break;case SM_HERODELMAGIC:g_myHero&&this.delHreroSkill(g.record);break;case SM_HEROMAGIC_LVEXP:g_myHero&&this.UpdateHeroMagicData(g);break;case SM_HEROLEVELUP:g_myHero&&
g_myHero.m_Abil&&(this.HeroLevelup(g),Laya.stage.event("update_hero_info",[g_myHero.m_Abil]));break;case SM_HEROWINEXP:g_myHero&&g_myHero.m_Abil&&(0==g.series&&(g_myHero.m_Abil.Exp=g.record),g_myHero&&g_myHero.m_Abil&&Laya.stage.event("update_hero_info",[g_myHero.m_Abil]));break;case SM_HEROBAGCOUNT:g_HeroBagNum=g.param;break;case SM_HEROBAGITEMS:g_myHero&&this.getHeroBagItems(g,l);break;case SM_HEROTAKEON_OK:g_myHero&&this.heroTakeOn(l);break;case SM_HEROTAKEON_FAIL:Sendmessage.QueryHeroBagItems();
break;case SM_HEROTAKEOFF_OK:g_myHero&&null!=g_WaitItems.Items&&(g_HeroItemList[g_WaitItems.Index]=null,Laya.stage.event("Show_HeroItem_ico",g_WaitItems.Index),4==g_WaitItems.Index&&Laya.stage.event("Show_HeroItem_ico",13),g_WaitItems.Items=null,Laya.stage.event("updateHeroNewDress"));break;case SM_HEROBAGTOMASTERBAG_FAIL:Sendmessage.QueryHeroBagItems();break;case SM_HEROADDITEM:g_myHero&&this.heroBagAddItem(g,l);break;case SM_HERODELITEM:g_myHero&&this.heroDelectItem(g,l);break;case SM_HEROUPDATEITEM:""!=
l&&(q=fnDecode6BitBuf(l,l.length,!1),g=TClientItem(q.pszDest),GameUtil.UpdateHeroItems(g));break;case SM_HERODROPITEM_SUCCESS:g_myHero&&this.heroDropSuccess(g,l);break;case SM_HERODROPITEM_FAIL:g_myHero&&this.heroDropfail(g,l);break;case SM_HEROEAT_OK:g_WaitItems.Items&&!GameApi.heroAutounpack(2,g_WaitItems.Items.s.Name,g_WaitItems.Items.s.AniCount)&&(g_WaitItems.Items=null,g_DrugButNumber=-1);break;case SM_HEROEAT_FAIL:g_WaitItems.Items&&GameUtil.HeroAddItem(g_WaitItems.Items);g_WaitItems.Items=
null;break;case SM_HERODELITEMS:g_myHero&&this.heroDropItem(g,l);break;case SM_HERODURACHANGE:g_myHero&&g_HeroItemList[g.param]&&(g_HeroItemList[g.param].Dura=g.record,g_HeroItemList[g.param].DuraMax=CodeUtil._MAKELONG(g.tag,g.series));break;case SM_HEROWEIGHTCHANGED:g_myHero&&g_myHero.m_Abil&&(g_myHero.m_Abil.Weight=g.record,g_myHero.m_Abil.WearWeight=g.param,g_myHero.m_Abil.HandWeight=g.tag,GameUtil.InstanceOfMem(HeroWinUI)&&Laya.stage.event("updateHero"));break;case SM_HEROPACKAGEITEM_OK:this.heropackageitemok(g,
l);break;case SM_HEROPACKAGEITEM_FAIL:this.heropackageitemfail(g,l);break;case SM_USERICONLIST:this.MakeIcon(l,g);break;case SM_SENDUSERICON:this.SendSetUserICON(l,g);break;case SM_BIGDATA:this.NewMakeNpc(l,g);break;case SM_OPENITEMBOXEX:this.OpenBoxEX(l,g);break;case SM_CJ:this.SM_Caiji(l,g);break;case SM_HANGUP:Laya.stage.event("onhook",["1"]);break;case SM_HANGUPCLOSE:Laya.stage.event("onhook",["0"]);break;case SM_API_GETITEM:""!=l&&(q=fnDecode6BitBuf(l,l.length,!1),g=TClientItem(q.pszDest),console.log("API_GETITEM:",
g),Laya.stage.event("api_sendItem",[g]));break;case SM_SENDNEWLINEMSG:this.sendNewLineMsg(l,g);break;case SM_DELETEDELAYMESSAGE:for(l=0;l<G_countDownMsg.length;l++)G_countDownMsg[l]&&G_countDownMsg[l].id==g.record&&(G_countDownMsg[l].removeSelf(),G_countDownMsg.splice(l,1));break;case SM_SELLOFFITEM:GameApi.ShowScreen(!0,0,13);break;case SM_SELLITEM_FULL:g_WaitItems.Items&&GameUtil.SelfAddItem(g_WaitItems.Items);g_WaitItems.Items=null;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u7684\u5bc4\u552e\u7269\u54c1\u6570\u91cf\u5df2\u6ee1\uff0c\u4e0d\u80fd\u518d\u5bc4\u552e\u5176\u4ed6\u7269\u54c1\u4e86\u3002",
callfn:function(){}}]);break;case SM_SELLITEM_FAIL:g_WaitItems.Items&&GameUtil.SelfAddItem(g_WaitItems.Items);g_WaitItems.Items=null;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u7269\u54c1\u4e0d\u80fd\u5bc4\u552e\u3002",callfn:function(){}}]);break;case SM_SENDSELLITEMSLIST:this.TranslateItemList(g,l);break;case SM_GETSELLOFFDETAILITEM:this.saleItemList(g,l);break;case SM_BUYSELLOFFTEM_OK:Laya.stage.event("Update_Bag");Laya.stage.event("npc_sale_BUYITEM_SUCCESS");break;case SM_BUYSELLOFFTEM_FAIL:Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u60a8\u65e0\u6cd5\u8d2d\u4e70\u5bc4\u552e\u7269\u54c1\u3002",callfn:function(){}}]);break;case SM_BUYSELLOFFTEM_FULLBAG:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u65e0\u6cd5\u643a\u5e26\u66f4\u591a\u7269\u3002",callfn:function(){}}]);break;case SM_SENDH5TOPEFFECT:9<g.record?Laya.stage.event("otherBtnHandler",[g.record,g.param,g.series]):Laya.stage.event("topeffect",[g.record,g.param,g.series]);break;case SM_AUTOPICKUPITEMS:this.autoPickItems(g);break;case SM_GETBACKPASSWD_SUCCESS:Laya.stage.event("findPasword_s",
[l]);break;case SM_GETBACKPASSWD_FAIL:switch(g.series){case 0:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u8d26\u53f7\u4e0d\u5b58\u5728\u3002",callfn:function(){}}]);break;case -1:case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4fdd\u62a4\u8d44\u6599\u6216\u751f\u65e5\u4e0d\u6b63\u786e\u3002",callfn:function(){}}]);break;case -4:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u5173\u95ed\u5bc6\u7801\u627e\u56de\u670d\u52a1\u3002",callfn:function(){}}])}break;
case SM_NEEDUPDATE_ACCOUNT:Laya.stage.event("dupdate_account");break;case SM_UPDATEID_SUCCESS:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u7684\u5e10\u53f7\u4fe1\u606f\u66f4\u65b0\u6210\u529f\u3002\r\n\u8bf7\u59a5\u5584\u4fdd\u7ba1\u60a8\u7684\u5e10\u53f7\u548c\u5bc6\u7801\u3002\r\n\u5e76\u4e14\u4e0d\u8981\u56e0\u4efb\u4f55\u539f\u56e0\u628a\u5e10\u53f7\u548c\u5bc6\u7801\u544a\u8bc9\u4efb\u4f55\u5176\u4ed6\u4eba\u3002\r\n\u5982\u679c\u5fd8\u8bb0\u4e86\u5bc6\u7801\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6211\u4eec\u7684\u4e3b\u9875\u91cd\u65b0\u627e\u56de\u3002",
callfn:function(){}}]);break;case SM_UPDATEID_FAIL:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u66f4\u65b0\u8d26\u53f7\u5931\u8d25\u3002",callfn:function(){}}]);break;case SM_ITEMSCORE:this.ItemScore(g,l);break;case SM_SERVERCLOSE:4!=g.record&&5!=g.record||GameUtil.reLogin();break;case SM_SENDTICKCOUNT:0!=g.param&&(g_tick_check=!0,0!=g_tick_rate&&8<=g_tick_rate-g.param*g_tick_ct?Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u975e\u6cd5\u52a0\u901f\uff01\uff01",callfn:function(){}}]):g_tick_ct++,
100<=g_tick_rate&&(g_tick_rate=0,g_tick_ct=1));break;case SM_HIT_FAIL:lockingID&&(p=ObjectManage.findobject(lockingID))&&(g=new Laya.Image,200<p.sp.height&&(p.sp.height=170),g.skin="gameres/ui/000310.png",g.alpha=.2,g.pos(0,-p.sp.height),p.addChild(g),Laya.Tween.to(g,{y:-(p.sp.height+60),alpha:1},300,Laya.Ease.cubicInOut,Laya.Handler.create(this,this.delvaule,[g])));break;case SM_MOVEUPMESSAGE:this.superMoveMsg(g,l);break;case SM_OVERLAPDRUG_OK:g_BagItemsList[g_WaitItems.index]=null;break;case SM_OVERLAPDRUG_FAIL:DragItem.backToOriginHandler();
break;case SM_OVERLAPITEM_OK:g_BagItemsList[g_WaitItems.index]=null;break;case SM_OVERLAPITEM_FAIL:DragItem.backToOriginHandler();break;case SM_HEROOVERLAPITEM_OK:g_HeroBagItemsList[g_WaitItems.index]=null;for(g=0;g<g_HeroBagItemsList.length;g++)null==g_HeroBagItemsList[g]&&(g_HeroBagItemsList.splice(g,1),g_HeroBagItemsList.push(null));g_OpenHeroBag&&Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems");break;case SM_OPENUPGRADEDIALOG:this.openUpgrade();break;case SM_SENDUPGRADEDIALOG_OK:q=
fnDecode6BitBuf(l,l.length,!1);g=TClientItem(q.pszDest);Laya.stage.event("upgradeOK",[g]);break;case SM_SENDUPGRADEDIALOG_FAIl:Laya.stage.event("upgradeFaild",[g,l]);break;case SM_GETITEMINFO:g.param==l.length&&(g=decryStringK(l,mac_key),8==(g[0]&15)&&(l=new Zlib.Inflate(g),q=l.decompress(),(g=TClientItem(q))&&g_showChatItem.push(g)));break;case SM_TZDESCLIST:this.getGomList(l);break;case SM_H5FUNCBTN:this.makeH5scrpt(g,l);break;case TK_TICKTIME:this.TK_DELAY_TIME=0;g=Laya.Browser.now()-DELAY_TIME;
this.TK_TICKTIME_TIME=DELAY_TIME=Laya.Browser.now();0==this.TK_CHEKTIME_TAG&&(this.TK_CHEKTIME_TAG=!0,Laya.timer.loop(100,this,this.checkOverTimeTK.bind(this)));Laya.stage.event("DELAY_TIME",g);break;case SM_NEWGUILD:g_relevel=g.series;break;case 12316:0==g.param&&0!=g.record&&ItemMgr.getInstance().DelItemFromMap(g.record);break;case SM_OFFLINETIME:g_overtime=g.record;60>g_overtime&&(g_overtime=60);break;case SM_PLAYSOUND:case SM_PLAYMUSIC:this.playSoundScript(g,l);break;case CM_GDY_MSG:this.alertMessageGDY(g.bodystr);
break;case SM_BUYCRISTAL:1==g.record?(l=DecodeString(l),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u51b6\u70bcCQB\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u6c34\u6676\u94b1\u5305\u901a\u4fe1\u5b8c\u6210\u540e\u67e5\u770b\u8d26\u6237\uff01",callfn:function(){}}]),Laya.stage.event("update_cqbInfo",[l,1])):2==g.record&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u51b6\u70bcCQB\u5931\u8d25\uff01",callfn:function(){}}]);break;case SM_SELLCRISTAL:1==g.record?(l=DecodeString(l),Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u5151\u6362\u6218\u7eaa\u5e01\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u6c34\u6676\u94b1\u5305\u901a\u4fe1\u5b8c\u6210\u540e\u67e5\u770b\u8d26\u6237\uff01",callfn:function(){}}]),Laya.stage.event("update_cqbInfo",[l,2])):2==g.record&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5151\u6362\u6218\u7eaa\u5e01\u5931\u8d25\uff01",callfn:function(){}}]);break;case SM_CRISTALINFO:g_crystalInfo=l;Laya.stage.event("update_crystal",[g_crystalInfo]);console.log("\u6c34\u6676\u5e73\u53f0\u4fe1\u606f\uff1a",
g_crystalInfo);break;case SM_OPENCRISTALFORM:(g=GameUtil.InstanceOfMem(crystalUI))?g.visible=!0:(g=new crystal,Laya.stage.addChild(g));Sendmessage.sendCqbInfo();break;case SM_UPDATEITEMSCORE:""!=l&&(g=fnDecode6BitBuf(l,l.length),(g=TClientItemItemScore(g.pszDest))&&g_EquipScoreExList.push(g));break;case SM_ITEMSCORETEXT:g_EquipScoreList=zDecodeString(l).split("\r");break;case SM_SENDGUILDCREATESTUFF:g=DecodeString(l);Laya.stage.event("update_creatGuild",[g]);break;case SM_SENDLEAVEGUILD:(g=GameUtil.InstanceOfMem(HangHui21UI))&&
g.removeSelf();G_Guald_Last_Name="";break;case SM_NEWCHARSTATUSCHANGED:q=g.record;u=fnDecode6BitBuf(l,l.length).pszDest;r=[];for(l=p=0;32>l;l++)r[l]=[],r[l][0]=u[p++]|u[p++]<<8|u[p++]<<16|u[p++]<<24,r[l][1]=u[p++]|u[p++]<<8,r[l][2]=l,p+=2;CodeUtil._MAKELONG(g.param,g.tag);if(p=ObjectManage.findobject(q))p.buff_list=r,p.buff_time=Laya.Browser.now(),p.isNewBuff=!0,g_buffOnwerId==q&&Laya.stage.event("updateBuffInfo",[q]);break;case SM_REFRESHVIEWRANGE:ItemMgr.getInstance().DelItemFromMap(),Laya.stage.event("delete_map_items",
1)}};e.prototype.delvaule2=function(g){Laya.Tween.to(g,{alpha:0},400,Laya.Ease.quartIn,Laya.Handler.create(e,e.delvaule,[g]))};e.prototype.delvaule=function(g){g.removeSelf()};e.prototype.updateBag_ico=function(){GameUtil.InstanceOfMem(NewBagUI)&&Laya.stage.event("Show_Bag_Item_ico");GameUtil.InstanceOfMem(NewHeroBagUI)&&Laya.stage.event("Show_HeroBag_Item_ico")};e.prototype.getHeroItems=function(g,l){if(g.param==l.length){GameUtil.IntHeroItems(HighTUseItems);l=fnDecode6BitBuf(l,l.length,!1);l=(new Zlib.Inflate(l.pszDest)).decompress();
for(var p=0,q=0;q<g.series;q++){var r=l[p];p++;var u=GameUtil.slice(l,p,p+g_itemSize);u=TClientItem(u);p+=g_itemSize;0<=r&&r<=HighTUseItems&&(g_HeroItemList[r]=u,u.tag=r)}}};e.prototype.getHeroSkill=function(g,l){var p=g.series;if(g.param==l.length)for(g=fnDecode6BitBuf(l,l.length,!1),g=(new Zlib.Inflate(g.pszDest)).decompress(),g_HeroMagicList=[],l=0;l<p;l++){var q=GameUtil.slice(g,172*l,172*(l+1));q=TClientMagic(q);g_HeroMagicList.push(q)}};e.prototype.addHreroSkill=function(g,l){g=fnDecode6BitBuf(l,
l.length,!1);g=TClientMagic(g.pszDest);GameUtil.AddHeroMagic(g)};e.prototype.delHreroSkill=function(g){GameUtil.DelMagic(g)};e.prototype.UpdateHeroMagicData=function(g){var l=g.record,p=CodeUtil._LOBYTE(g.param);g=CodeUtil._MAKELONG(g.tag,g.series);GameUtil.UpdateHeroMagicLvExp(l,p,g,0)};e.prototype.HeroLevelup=function(g){ObjectManage.levelup(g.record);GameUtil.InstanceOfMem(HeroWinUI)&&Laya.stage.event("updateHero")};e.prototype.getHeroBagItems=function(g,l){if(g.param==l.length){l=fnDecode6BitBuf(l,
l.length,!1);l=(new Zlib.Inflate(l.pszDest)).decompress();GameUtil.IntHeroBagList();g_HeroBagCount=g.series;for(var p=0;p<g.series;p++){var q=GameUtil.slice(l,g_itemSize*p,g_itemSize*(p+1));q=TClientItem(q);GameUtil.HeroAddItem(q)}GameUtil.LoadBagItemIcon(g_HeroBagItemsList,0)}};e.prototype.HeroBagStack=function(){for(var g=g_HeroBagItemsList.length-1;0<=g;g--){for(var l=0;l<g_HeroBagItemsList.length;l++)if(null!=g_HeroBagItemsList[l]&&null!=g_HeroBagItemsList[g]&&0<=g_HeroBagItemsList[l].Dura&&g_HeroBagItemsList[l].s.Name==
g_HeroBagItemsList[g].s.Name&&g_HeroBagItemsList[g].MakeIndex!=g_HeroBagItemsList[l].MakeIndex&&49!=g_HeroBagItemsList[l].Dura&&49!=g_HeroBagItemsList[g].Dura&&(17==g_HeroBagItemsList[l].s.StdMode||18==g_HeroBagItemsList[l].s.StdMode||41==g_HeroBagItemsList[l].s.StdMode||40==g_HeroBagItemsList[l].s.StdMode||42==g_HeroBagItemsList[l].s.StdMode||31==g_HeroBagItemsList[l].s.StdMode&&-1!=g_HeroBagItemsList[l].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){g_WaitItems.index=g;Sendmessage.sendHeroStackThing(g_HeroBagItemsList[g].MakeIndex,
g_HeroBagItemsList[l].MakeIndex,g_HeroBagItemsList[l].s.DBName,0);var p=!0;break}if(p)break}for(g=0;g<g_HeroBagItemsList.length;g++)null==g_HeroBagItemsList[g]&&(g_HeroBagItemsList.splice(g,1),g_HeroBagItemsList.push(null));g_OpenHeroBag&&Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems")};e.prototype.heroTakeOn=function(g){null!=g_WaitItems.Items&&0<=g_WaitItems.Index&&52>=g_WaitItems.Index&&(g_HeroItemList[g_WaitItems.Index]=g_WaitItems.Items,g_HeroItemList[g_WaitItems.Index].tag=
g_WaitItems.Index,Laya.stage.event("Show_HeroItem_ico",g_WaitItems.Index),g_WaitItems.Items=null,GameUtil.InstanceOfMem(HeroWinUI)&&(Laya.stage.event("updateHero"),Laya.stage.event("updateHeroNewDress")),GameApi.ShowScreen(!1))};e.prototype.heroBagAddItem=function(g,l){g=g.tag;""!=l&&(l=fnDecode6BitBuf(l,l.length,!1),l=TClientItem(l.pszDest),GameUtil.HeroAddItem(l),GameUtil.HeroAutoHandleItem(l,g))};e.prototype.heroDropSuccess=function(g,l){g=g.record;DecodeString(l);null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==
g&&(g_WaitItems.Items=null)};e.prototype.heroDropfail=function(g,l){g=g.record;DecodeString(l);null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==g&&(GameUtil.HeroAddItem(g_WaitItems.Items),g_WaitItems.Items=null)};e.prototype.SendUserEffect=function(g,l){var p=ObjectManage.findobject(g.record);if(p&&l){g=fnDecode6BitBuf(l,l.length);g=(new Zlib.Inflate(g.pszDest)).decompress();var q=TBaseObjectEffect(g);g=q.nEffectImageOffSet;l=q.wEffectImageCount;var r=q.wEffectFrameTime,u=q.wLoopCount-1;if(q)if(100<=
g&&150>g)Laya.loader.load("gameres/animation/particle/gold.part",Laya.Handler.create(this,function(z){h||(h=new Laya.Particle2D(z),p.addChild(h),h.pos(0,-230),h.emitter&&h.emitter.start(),h.play(),Laya.timer.once(r*u*80,this,this.onAssetsDestroy))}),null,Laya.loader.JSON);else{var v=l*r*u;q=new Laya.Point(q.nX,q.nY);var w=Animationmodule.playframe(!1,p,"data/effectex/",g,g+l-1,r,!0,!1,q);if(w)Laya.timer.once(v,this,function(){Animationmodule.removeAni(w)},[w])}}};e.prototype.SendUserAddEffect=function(g,
l){var p=ObjectManage.findobject(g.record);g=null;if(p&&l){l=fnDecode6BitBuf(l,l.length);l=(new Zlib.Inflate(l.pszDest)).decompress();l=TBaseObjectEffect(l);var q=l.nEffectImageOffSet,r=l.wEffectFrameTime/10,u=l.wLoopCount;l&&(-1==l.nEffectFileIndex?g="data/effect/":-2==l.nEffectFileIndex?g="data/effect_ex/":-3==l.nEffectFileIndex?g="data/effect_se/":-4==l.nEffectFileIndex&&(g="data/effectex/"),g&&(109<q&&150>q?Laya.loader.load("gameres/animation/particle/snow.part",Laya.Handler.create(this,function(v){c||
(c=new Laya.Particle2D(v),p.addChild(c),c.pos(0,-230),c.emitter&&c.emitter.start(),c.play())}),null,Laya.loader.JSON):0<=q&&80>q&&Laya.loader.load("gameres/animation/particle/flower.part",Laya.Handler.create(this,function(v){n||(n=new Laya.Particle2D(v),p.addChild(n),n.pos(0,-250),n.emitter&&n.emitter.start(),n.play(),Laya.timer.once(r*u*80,this,this.onAssetsDestroy))}),null,Laya.Loader.JSON)))}};e.prototype.SendUserAddEffectGom=function(g,l){if((g=ObjectManage.findobject(g.record))&&l){l=fnDecode6BitBuf(l,
l.length);l=(new Zlib.Inflate(l.pszDest)).decompress();l=TBaseObjectEffectGom(l);var p=l.nEffectImageOffSet,q=l.wEffectImageCount,r=l.wEffectFrameTime,u=q*r*l.wLoopCount;new Laya.Point(l.nX,l.nY);var v=Animationmodule.playframe(!0,g,"data/"+g_pak_list[l.nEffectFileIndex]+"/",p,p+q-1,r,!0,!1);if(v)Laya.timer.once(u,this,function(){Animationmodule.removeAni(v)},[v])}};e.prototype.onAssetsDestroy=function(){n?(n.removeSelf(),n=null):h&&(h.removeSelf(),h=null)};e.prototype.heroDropItem=function(g,l){if(1!=
g.tag&&""!=l)for(g=DecodeString(l).split("/"),l=1;l<g.length;l+=2)GameUtil.DelHeroBagItems(parseInt(g[l])),GameUtil.DelHeroItems(parseInt(g[l]))};e.prototype.heroTakeOffOk=function(g,l){null!=g_WaitItems.Items&&(g_HeroItemList[g_WaitItems.Index]=null,Laya.stage.event("Show_HeroItem_ico",g_WaitItems.Index),4==g_WaitItems.Index&&Laya.stage.event("Show_HeroItem_ico",13),g_WaitItems.Items=null)};e.prototype.heroTakeOffFail=function(g,l){Laya.stage.event("show_log",[{txt:"\u82f1\u96c4\u8131\u7269\u54c1\u5931\u8d25",
color:"#ff0000"}])};e.prototype.packageitemok=function(g,l){g=fnDecode6BitBuf(l,l.length,!1);g=TClientItem(g.pszDest);GameUtil.AddItemNewBag(g)};e.prototype.packageitemfail=function(g,l){g_auctionBreakUpInfo&&(GameUtil.onShowTip("\u8bf7\u786e\u4fdd\u80cc\u5305\u81f3\u5c11\u7559\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7a7a\u4f4d"),g_auctionBreakUpInfo=null);GameUtil.AddItemNewBag(g_WaitItems.Items)};e.prototype.heropackageitemok=function(g,l){g=fnDecode6BitBuf(l,l.length,!1);g=TClientItem(g.pszDest);GameUtil.HeroAddItem(g)};
e.prototype.heropackageitemfail=function(g,l){GameUtil.HeroAddItem(g_WaitItems.Items)};e.prototype.openhealth=function(g,l){var p=CodeUtil._MAKELONG(g.param,g.tag);l=CodeUtil._MAKELONG(g.series,parseInt(DecodeString(l),0));ObjectManage.updateObjectHp(l,p,g.record)};e.prototype.xunlu=function(g,l){ObjectManage.findobject(playerID);var p=new Laya.Point(g.param,g.tag);g=ObjectManage.findobject(g.record);Fightmodule.leavefight();p&&g&&Movemodule.autoMove(p);""!=l&&(g_mapnpc=p)};e.prototype.callbar=function(g,
l,p,q,r){g.value+=100/(1E3*r.record);l+=100;p.text=q[0]+parseInt(100*g.value)+"%";p.x=(g.width-100)/2;l>=1E3*r.record&&(g.removeSelf(),Laya.timer.clear(this,callbar))};e.prototype.TreasureMap=function(g,l){l=DecodeString(l);var p=Laya.stage.getChildByName("cgb");if(null==p&&0<g.record){p=new Laya.ProgressBar("gameres/png/00950.png");var q=new Laya.Label;q.x=p.width/4;q.color="#ffffff";q.fontSize=12;str=l.split("%");p.addChild(q);p.name="cgb";Laya.stage.addChild(p);var r=this;Laya.loader.load("gameres/png/00950.png",
Laya.Handler.create(this,function(){p.sizeGrid="2,2,2,2";p.x=(Laya.stage.width-p.width)/2;p.y=Laya.stage.height/2;p.value=0;Laya.timer.loop(100,r,r.callbar,[p,0,q,str,g])}),null,Laya.Loader.IMAGE)}else p&&p.removeSelf(),this.callbar&&Laya.timer.clear(this,this.callbar),g_suijiStone&&(g_suijiStone=!1,setTimeout(function(){Laya.stage.event("keepGo")},500))};e.prototype.breakweapon=function(g,l){var p=ObjectManage.findobject(g.record);p&&(p.wapeff_frames=[]);g.record==playerID&&g_boOpenCaiji&&g_LogSocket.AddGameDataLog(21,
DecodeString(l),g.record,"","")};e.prototype.correctpoint=function(g){Objectcontrol.springback(g.tag,g.series)};e.prototype.clientclosebuff=function(g,l){Laya.stage.event("CLEARBUFFER",[g.record])};e.prototype.clientRecvbuildok=function(g,l){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u884c\u4f1a\u5efa\u7acb\u6210\u529f",callfn:function(){}}])};e.prototype.clientRecvbuildfail=function(g,l){-1==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u5df2\u7ecf\u52a0\u5165\u5176\u5b83\u884c\u4f1a",
callfn:function(){}}]):-2==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7f3a\u5c11\u521b\u5efa\u8d39\u7528",callfn:function(){}}]):-3==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u51c6\u5907\u597d\u9700\u8981\u7684\u5168\u90e8\u7269\u54c1",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u884c\u4f1a\u5931\u8d25\uff01\uff01\uff01",callfn:function(){}}])};e.prototype.clientRecvLightingEX=function(g,l){var p=ObjectManage.findobject(g.record);
if(p){l=fnDecode6BitBuf(l,l.length);var q=TMessageBodyWL(l.pszDest),r=q.lTag1;l=q.lParam1;var u=q.lParam2,v=g.series,w=new Laya.Point(48*p.grid.x,32*p.grid.y),z=CodeUtil._LOWORD(q.lTag2),A=CodeUtil._HIBYTE(CodeUtil._HIWORD(q.lTag2)),C=CodeUtil._LOBYTE(CodeUtil._HIWORD(q.lTag2)),B=null;p.data.fea.buffer&&(B=THumFeature(p.data.fea.buffer));if(B&&3712==B.wDress&&165==B.wRace)A=6552+10*v,(A=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",A,A+6-1,100,!1,!0))&&A.pos(w.x,w.y),l=new Laya.Point(l,
u),v=GameUtil.getorientation(p.grid,l),p.changestate(null,10,v,!1);else if(B&&3713==B.wDress&&165==B.wRace)A=7530+10*v,(A=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",A,A+8-1,100,!1,!0))&&A.pos(w.x,w.y),l=new Laya.Point(l,u),v=GameUtil.getorientation(p.grid,l),p.changestate(null,10,v,!1);else{l=new Laya.Point(q.lParam1,q.lParam2);var D=99,E=99;if(B&&254==B.wDress&&92==B.wRace||B&&173==B.wDress&&100==B.wRace)D=39,E=44;B&&253==B.wDress&&92==B.wRace&&(D=34,E=45);B&&236==B.wDress&&75==B.wRace&&
(D=31,E=33);156==p.skin_feature.wRaceImg&&(D=A,E=C);Skillmodule.playself(99,99,p,l);setTimeout(function(){Skillmodule.play2skill(g.record,D,E,q.lParam1,q.lParam2,r,1,null,z)},500)}}};e.prototype.clientRecv716=function(g){switch(g.series){case 1:var l=new Laya.Point(g.param,g.tag),p=Animationmodule.playframe(!0,Mapmodule.root,"data/mon14/",410,415,50,!1,!0);p&&p.pos(48*l.x,32*l.y);case 8:if(null==g_myHero)break;l=ObjectManage.findobject(playerID);p=20*l.cur_dir;var q=20*g_myHero.cur_dir;g.record==
playerID&&Animationmodule.playframe(!0,l,"data/magic4/",10+p,26+p,85,!1,!0);g.record==g_myHero.data.record&&Animationmodule.playframe(!0,g_myHero,"data/magic4/",10+q,26+q,85,!1,!0);break;case 4:g=new Laya.Point(g.param,g.tag),l=Skillmodule.getSkillParent(),null!=l&&(l=Animationmodule.playframe(!0,l,"data/magic2/",10,14,80,!1,!0),null!=l&&l.pos(48*g.x,32*g.y))}};e.prototype.bluemissionlist=function(g,l){l=fnDecode6BitBuf(l,l.length);l=(new Zlib.Inflate(l.pszDest)).decompress();for(var p=0;p<g.series;++p){var q=
GameUtil.slice(l,260*p,260*(p+1));q=TBlueMission(q);task_tile_list.push(q)}};e.prototype.openmissonwindowex=function(g,l){this.UpGlobaInf(l);if(10==g.record||11==g.record)for(l=0;l<g_MissCaptionList.length;l++)g_MissCaptionList[l].sList=[],Sendmessage.gettmissitem(rw_recog,g.record,"@"+g_MissCaptionList[l].sTabName)};e.prototype.newTaskList=function(g){if(g){g=zDecodeString(g);g=g.split("\u0001");g_newTaskList=[];for(var l=0;l<g.length;l++){for(var p=g[l].split("\u0002"),q=0;q<p.length;q++)p[q]=p[q].trim(),
0===q&&(p[q]=Number(p[q]));if(0<p.length&&!isNaN(p[0])&&0<p[0]){q=p[5].split("|");3<q.length&&(q=q.slice(0,2));for(var r=0;r<q.length;r++){var u=Number(q[r]);q[r]=1!=u&&2!=u&&3!=u?0:u}u=3-q.length;for(r=0;r<u;r++)q.push(0);p[5]=q;p[6]=isNaN(Number(p[6]))?0:Number(p[6]);g_newTaskList.push(p)}}}};e.prototype.newTaskOperate=function(g,l){l=DecodeString(l);GameMission.newTaskHandle(g,l)};e.prototype.mailstate=function(g,l){g_mailMaxCount=g.record;0===g.param&&Laya.stage.event("new_mail_notice")};e.prototype.getUserMail=
function(g,l){var p=0;if(0<g.record)for(l=fnDecode6BitBuf(l,l.length),l=(new Zlib.Inflate(l.pszDest)).decompress(),i=0;i<g.record;i++)g_mailList.push(TClientMailViewInf(l,i)),2>g_mailList[i].btState&&p++;Laya.stage.event("get_user_mail",[p])};e.prototype.getUserMailContent=function(g,l){if(0<g.record){l=fnDecode6BitBuf(l,l.length);l=(new Zlib.Inflate(l.pszDest)).decompress();for(var p=0;p<g_mailList.length;p++){var q=g_mailList[p];if(q.nMailIdx==g.record){q.content=TClientMailInf(l,g.param);q.btState=
q.content.btState;Laya.stage.event("update_mail_state",[q,g.tag]);Laya.stage.event("get_mail_content",[q]);break}}}};e.prototype.getUserMailUpdate=function(g,l){if(0<g.record){l=fnDecode6BitBuf(l,l.length);var p=(new Zlib.Inflate(l.pszDest)).decompress();l=[];for(var q=0,r=0;r<g.param;r++)l.push(p[q++]|p[q++]<<8|p[q++]<<16|p[q++]<<24);for(r=0;r<g_mailList.length;r++)if(p=g_mailList[r],p.nMailIdx==g.record&&(p.btState=g.tag,Laya.stage.event("update_mail_state",[p]),p.content)){p.content.btState=g.tag;
for(g=0;g<p.content.items.length;g++)p.content.items[g].nCurrentCount=l[g];Laya.stage.event("get_mail_content",[p,!0]);break}}};e.prototype.getMailOkCode=function(g,l){};e.prototype.getMailFailCode=function(g,l){switch(g.record){case 1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5220\u9664\u5931\u8d25",callfn:function(){}}]);break;case 2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u80cc\u5305\u5df2\u6ee1",callfn:function(){}}]);break;case 3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u90ae\u4ef6\u5df2\u8fc7\u671f",
callfn:function(){}}])}};e.prototype.deleteAllMail=function(g,l){var p=[];if(""!=l){l=fnDecode6BitBuf(l,l.length);l=(new Zlib.Inflate(l.pszDest)).decompress();for(var q=0,r=0;r<g.record;r++)p.push(l[q++]|l[q++]<<8|l[q++]<<16|l[q++]<<24);0<p.length&&Laya.stage.event("delete_all_mail",[p])}};e.prototype.addNewMail=function(g,l){""!=l&&(g=fnDecode6BitBuf(l,l.length),g=(new Zlib.Inflate(g.pszDest)).decompress(),g=TClientMailViewInf(g,0),g_mailList.unshift(g),Laya.stage.event("add_new_mail",[g]))};e.prototype.updateExtendBagItemCount=
function(g){g_extendBagItemCount=g.record;var l=GameUtil.MaxBagItems();if(g_BagItemsList.length<l){l-=g_BagItemsList.length;for(var p=0;p<l;p++)g_BagItemsList.push(null)}else if(g_BagItemsList.length>l)for(l=g_BagItemsList.length-l,p=g_BagItemsList.length-1;0<=p;p--)if(null==g_BagItemsList[p]&&(g_BagItemsList.splice(p,1),l--),0>=l){GameUtil.LoadBagItemIcon(g_BagItemsList,0);break}1===g.param&&GameUtil.UpdateExtendBagItemCount()};e.prototype.readminimapok=function(g,l){open_minimap?(open_minimap=!1,
l=new minimap,l.setMapdata(g.param-1),Laya.stage.addChild(l),isOpen=!1):Laya.stage.event("DrawMiniMap",[g.param-1])};e.prototype.readminimapfail=function(g,l){Laya.stage.event("DrawMiniMap",[-1])};e.prototype.clientRecvlevelup=function(g,l){ObjectManage.levelup(g.record);GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");if(g_boOpenCaiji){var p=ObjectManage.findobject(g.record);p&&g_myHero==p&&g_LogSocket.AddGameDataLog(12,"??",2,p.m_Abil.Level,"")}playerID==g.record?(l=l.split("|"),
"0"!=l[0]&&(g_relevel=Number(l[0])),g_rolelevel=Number(l[1])):(l=l.split("|"),(g=ObjectManage.findobject(g.record))&&g.addJobAndLevel(l[1]));getinfoforsdk(g_RoleName,g_levelForCaiji,"1",g_ServerName)};e.prototype.backstep=function(g,l){};e.prototype.changeface=function(g,l){if(11<l.length){var p=fnDecode6BitBuf(l,l.length);p=TCharDesc(p.pszDest).feature;l=l.slice(11,l.length);CodeUtil.getFeatureLen(p);l=fnDecode6BitBuf(l,256).pszDest;TFeature(p,l);CodeUtil._MAKELONG(g.param,g.tag)}};e.prototype.clientEnterNewMap=
function(g,l){var p=g.param,q=g.tag;g=g.series;Mapdata.cur_type=l.substr(0,1);l=l.substr(1);var r=l.split("/");2<=r.length?(l=r[0],Mapdata.cur_id=r[1]):Mapdata.cur_id=l;loadmapname="data/mapdata/"+l+".map";Laya.stage.event("UPDATA_MAP",[l,p,q,g]);GameUtil.setSaveData("PlayerMapID",loadmapname);Sendmessage.getNpcInfo()};e.prototype.clientRecvChangeMapMessage=function(g,l){var p=g.param,q=g.tag,r=ObjectManage.findobject(playerID);r&&r.changestate(null,1,r.cur_dir,!0);g=g.series;r=DecodeString(l);l=
r.substr(1);var u=Mapdata.cur_type;Mapdata.cur_type=r.substr(0,1);Mapdata.cur_type!==u?ObjectManage.object_list.forEach(function(v){v.data.record==playerID&&GameUtil.setbodycolor(v,g_RoleBodyState,v.data.record);v.Blood&&v.Blood.people&&v.Blood.SetCurBloodNum()}):ObjectManage.object_list.forEach(function(v){v.data.record==playerID&&GameUtil.setbodycolor(v,g_RoleBodyState,v.data.record)});r=l.split("/");if(2<=r.length){if(Mapmodule.cur_x==p&&Mapmodule.cur_y==q&&Mapdata.cur_id==r[1])return;l=r[0];Mapdata.cur_id=
r[1]}else Mapdata.cur_id=l;loadmapname="data/mapdata/"+l+".map";Laya.stage.event("UPDATA_MAP",[l,p,q,g]);GameUtil.setSaveData("PlayerMapID",loadmapname);c&&(c.removeSelf(),c=null)};e.prototype.clientObjGetSafeZoneInfo=function(g,l){var p=zDecodeString(l).split("\r\n");g=[];l=[];for(var q=0;q<p.length;q++){var r=p[q].split("\t"),u=p[q].split(";");""!=r&&2>u.length&&g.push(r)}for(q=0;q<g.length;q++){p=[];for(u=0;u<g[q].length;u++){r=g[q][u].split(" ");g[q][u]=r;for(var v=0;v<r.length;v++)""!=r[v]&&
p.push(r[v])}l.push(p)}Mapdata.safeZone=l};e.prototype.clientRevLogon=function(g,l){if(123<=l.length){var p=l.slice(0,20);p=fnDecode6BitBuf(p,20);p=TMessageBodyWL(p.pszDest);l=l.slice(27,l.length);l=fnDecode6BitBuf(l,256).pszDest;l=TFeature(l.length,l);playerID=g.record;Laya.stage.event("CREATE_PLAYER",[{record:g.record,param:g.param,tag:g.tag,series:g.series,fea:l,lParam2:p.lParam2}]);CodeUtil._LOBYTE(p.lTag1);1==CodeUtil._LOBYTE(p.lTag1)?G_BaseSetList[0].val=!0:G_BaseSetList[0].val=!1;Objectcontrol.self_obj&&
(THumFeature(Objectcontrol.self_obj.data.fea.buffer),GameUtil.getSaveData("username"))}};e.prototype.clientRevChangeName=function(g,l){var p=g.record;g=g.param;l=DecodeString(l);var q=l.split("\\\\"),r=q[0];-1!=r.indexOf("\\")&&(r=r.split("\\"));q=q[1];var u=ObjectManage.findobject(p);u&&(u.guildName=q);p==playerID&&(r.constructor==Array?g_RoleName=r[0]:g_RoleName=r,Laya.stage.event("update_roleeditor"),Laya.stage.event("update_actor_name",[{name:l,color:g}]));ObjectManage.setObjectName(p,l,g)};e.prototype.clientRoleStateChanged=
function(g,l){var p=g.record;l=DecodeString(l);var q=CodeUtil._MAKELONG(g.param,g.tag);p==playerID&&(""==l?rolespeed=g.series:rolespeed=parseInt(l));if(l=ObjectManage.findobject(g.record))l.realSpeed=void 0!=g.series?g.series:l.realSpeed,GameUtil.setbodycolor(l,q,g.record),l.color_num=q,null!=g_RoleBodyState&&g.record==playerID&&(g_RoleBodyState=q)};e.prototype.PoisonDechealth=function(g,l){(g=ObjectManage.findobject(g.record))&&(g.getChildByName("lvdu")||GameUtil.showvaule(null,E_ROLE_POISONING_GRE,
g))};e.prototype.PoisonDamagearmor=function(g,l){(g=ObjectManage.findobject(g.record))&&(g.getChildByName("hongdu")||GameUtil.showvaule(null,E_ROLE_POISONING_RED,g))};e.prototype.PoisonStone=function(g,l){g=g.record;if(l=ObjectManage.findobject(g))l.getChildByName("mabi")||GameUtil.showvaule(null,E_ROLE_LULL,l),g==playerID&&(l.paralysis_state=!0)};e.prototype.OpenCobWebWinding=function(g,l){if(g=ObjectManage.findobject(g.record)){l=g.getChildByName("zhizhuwang");var p=new Laya.Point(18,-3);l&&l.removeSelf();
if(g=Animationmodule.playframe(!0,g,"data/mon24/",3740,3749,100,!0,!1,p))g.name="zhizhuwang",g.res_lock=!0}};e.prototype.CloseCobWebWinding=function(g,l){(g=ObjectManage.findobject(g.record))&&g.getChildByName("zhizhuwang")&&Animationmodule.removeAniname("zhizhuwang")};e.prototype.clientGetMapDescription=function(g,l){g_boNoAcrossHuman=1==g.record?!1:!0;g_boNoAcrossMon=1==g.param?!1:!0;g_boNoAcrossNpc=1==g.tag?!1:!0;g=0;var p="";l=DecodeString(l);for(var q=l.length-1;0<=q;q--){var r=l[q];if(""!==
r&&"\r"!==r&&"\n"!=r)if(255>r.charCodeAt())p+=l[q];else{if(""!=p){var u=p.split("").reverse();u=u.join("")}g=q;break}}g=l.slice(0,g+1);Mapdata.cur_name=g;Mapdata.cur_music=u;Laya.stage.event("updatepos");Laya.stage.event("playMapMusic")};e.prototype.clientRoleHurt=function(g,l){g=fnDecode6BitBuf(l,l.length);TMessageBodyWL(g.pszDest)};e.prototype.clientGetGameGoldName=function(g,l){if(""!=l){var p=DecodeString(l);g_boOpenCaiji?-1!=p.indexOf("/")?(l=p.split("/"),g_GameGoldName=l[0],g_GamePointName=
l[1]):(l=DecodeString(p),g.record!=g_GameGoldNum.value&&""!=l&&(g.record>g_GameGoldNum.value?g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",g.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+l,g.record-g_GameGoldNum.value):g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",g.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+l,g.record-g_GameGoldNum.value)),p=CodeUtil._MAKELONG(g.param,g.tag),p!=g_GamePointNum.value&&""!=l&&(p>g_GamePointNum.value?g_LogSocket.AddGameDataLog(112,"\u6e38\u620f\u70b9",p,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+
l,p-g_GamePointNum.value):g_LogSocket.AddGameDataLog(112,"\u6e38\u620f\u70b9",p,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+l,p-g_GamePointNum.value))):(l=DecodeString(l).split("\r"),g_GameGoldName=l[0],l[2]&&"1"==l[2]&&-1==g_GameMoneyType.indexOf(g_GameGoldName)&&g_GameMoneyType.push(g_GameGoldName),g_GamePointName=l[1],l[3]&&"1"==l[3]&&-1==g_GameMoneyType.indexOf(g_GamePointName)&&g_GameMoneyType.push(g_GamePointName),l[4]&&"1"==l[4]&&-1==g_GameMoneyType.indexOf("\u91d1\u5e01")&&g_GameMoneyType.push("\u91d1\u5e01"))}g_GameGoldNum.value=
g.record;Laya.stage.event("updateAuctionHouseMoney",3);g_GamePointNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",5);Laya.stage.event("Update_Bag");GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum")};e.prototype.clientGetNewGamePointName=function(g,l){if(""!=l)if(l=DecodeString(l),g_boOpenCaiji)if(-1!=l.indexOf("/"))l=l.split("/"),g_GameDiamondName=l[0],g_GameLingFName=l[1];else if(l=DecodeString(l),g_nGameDiamond.value!=g.record&&""!=l)g.record>
g_nGameDiamond.value?g_LogSocket.AddGameDataLog(113,"\u91d1\u521a\u77f3",g.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+l,g.record-g_nGameDiamond.value):g_LogSocket.AddGameDataLog(113,"\u91d1\u521a\u77f3",g.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+l,g.record-g_nGameDiamond.value);else{var p=CodeUtil._MAKELONG(g.param,g.tag);g_nGameGird.value!=p&&""!=l&&(p>g_nGameGird.value?g_LogSocket.AddGameDataLog(114,"\u7075\u7b26",p,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+l,p-g_nGameGird.value):g_LogSocket.AddGameDataLog(114,
"\u7075\u7b26",p,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+l,p-g_nGameGird.value))}else l=l.split("\r"),g_GameDiamondName=l[0],l[2]&&"1"==l[2]&&-1==g_GameMoneyType.indexOf(g_GameDiamondName)&&g_GameMoneyType.push(g_GameDiamondName),g_GameLingFName=l[1],l[3]&&"1"==l[3]&&-1==g_GameMoneyType.indexOf(g_GameLingFName)&&g_GameMoneyType.push(g_GameLingFName);g_nGameDiamond.value=g.record;Laya.stage.event("updateAuctionHouseMoney",6);g_nGameGird.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",
7);Laya.stage.event("update_cqbInfo");GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");Laya.stage.event("Update_Bag")};e.prototype.showmapevent=function(g,l){DecodeString(l);var p=new Laya.Point(g.tag,g.series);l=fnDecode6BitBuf(l,l.length);var q=TMessageBodyWL(l.pszDest),r=CodeUtil._LOWORD(q.lTag2);CodeUtil._HIWORD(q.lTag2);l="";0<=r&&r<g_pak_list.length&&(l=g_pak_list[r]);CodeUtil._HIBYTE(g.param);r=q.lParam1;var u=q.lParam1+q.lParam2-1;q=q.lTag1;var v=CodeUtil._LOBYTE(g.param);if(255!=
v)if(v==ET_MAPEFFECT)""!=l&&(p.x*=48,p.y*=32,l=Animationmodule.playframe(!0,Mapmodule.root,"data/"+l+"/",r,u,q,!0,!1))&&(l.res_lock=!0,l.name=""+g.record,l.pos(p.x,p.y),l.zOrder=9E3);else if(83==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",160,170,120,!1,!0))&&l.pos(48*p.x,32*p.y);else if(80==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",100,112,120,!1,!0))&&l.pos(48*p.x,32*p.y);else if(81==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",120,135,
120,!1,!0))&&l.pos(48*p.x,32*p.y);else if(82==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",140,155,120,!1,!0))&&l.pos(48*p.x,32*p.y);else if(79==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",80,99,120,!1,!0))&&l.pos(48*p.x,32*p.y);else if(78==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",60,79,120,!1,!0))&&l.pos(48*p.x,32*p.y);else if(84==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",160,170,120,!1,!0))&&l.pos(48*p.x,32*p.y),
(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",100,112,120,!1,!0))&&l.pos(48*p.x,32*p.y),(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",120,135,120,!1,!0))&&l.pos(48*p.x,32*p.y),(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",140,155,120,!1,!0))&&l.pos(48*p.x,32*p.y),(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",80,99,120,!1,!0))&&l.pos(48*p.x,32*p.y),(l=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",60,79,120,!1,!0))&&l.pos(48*
p.x,32*p.y);else if(ET_FIRE==v||115==v||116==v||117==v)Skillmodule.firewall(g.record,20,v,p);else if(ET_KUNMO==v)Skillmodule.firewall(g.record,14,0,p);else if(ET_PILESTONES==v)!Mapmodule.root.getChildByName(""+g.record)&&(l=Animationmodule.playframe(!0,Mapmodule.root,"data/Effect/",64,68,100,!1,!1))&&(l.name=""+g.record,l.pos(48*p.x,32*p.y),l.zOrder=9);else if(ET_MAPEFFECT==v){if(v=Mapmodule.root.getChildByName(""+g.record),!v&&(l=Animationmodule.playframe(!1,Mapmodule.root,"data/"+l+"/",r,u,q,!0,
!1)))l.res_lock=!0,l.name=""+g.record,l.pos(48*p.x,32*p.y),l.zOrder=100}else if(9==v||10==v||11==v||12==v||13==v||14==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",230,234,120,!0,!1))&&l.pos(48*p.x,32*p.y);else if(15==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",350,384,120,!0,!1))&&l.pos(48*p.x,32*p.y);else if(18==v)(l=Animationmodule.playframe(!0,Mapmodule.root,"data/effect/",880,889,120,!0,!1))&&l.pos(48*p.x,32*p.y);else if(20==v)(l=Animationmodule.playframe(!0,
Mapmodule.root,"data/effect/",328,337,120,!0,!1))&&l.pos(48*p.x,32*p.y);else if(21==v){var w=Mapmodule.root.getChildByName("MapEveEff"+g.record);w&&w.removeSelf();GameUtil.loadImg(530,"prguse2",function(z){w=new Laya.Image;w.skin=z;w.name="MapEveEff"+g.record;w.pos(48*p.x,32*p.y);w.zOrder=99999;Mapmodule.root.addChild(w)});(l=Animationmodule.playframe(!0,Mapmodule.root,"data/prguse2/",550,561,120,!0,!1))&&l.pos(48*p.x,32*p.y)}else if(30==v){if(v=Mapmodule.root.getChildByName(""+g.record),!v&&(l=Animationmodule.playframe(!0,
Mapmodule.root,"data/mon33/",2672,2676,120,!0,!1)))l.res_lock=!0,l.name=""+g.record,l.pos(48*p.x,32*p.y)}else if(1==v){if(v=Mapmodule.root.getChildByName(""+g.record),!v&&(l=Animationmodule.playframe(!1,Mapmodule.root,"data/mon6/",420,420,120,!0,!1)))l.res_lock=!0,l.name=""+g.record,l.pos(48*p.x,32*p.y),l.zOrder=0}else 88==v&&(v=Mapmodule.root.getChildByName(""+g.record),!v&&(l=Animationmodule.playframe(!1,Mapmodule.root,"data/prguse2/",550,561,120,!0,!1)))&&(l.res_lock=!0,l.name=""+g.record,l.pos(48*
p.x,32*p.y),l.zOrder=100)};e.prototype.hidemapevent=function(g,l){Mapmodule.root&&(l=Mapmodule.root.getChildByName(""+g.record))&&Animationmodule.removeAni(l);Skillmodule.hideskill(g.record)};e.prototype.clientGetNavigationInfo=function(g,l){if(g.param==l.length){g=[];var p=[];l=zDecodeString(l).split("\r\n");for(var q=0;q<l.length;q++)if(-1==l[q].indexOf(";")){var r=l[q].split("\t");if(r&&3>r.length)r[0]&&-1!=r[0].indexOf("/")&&(r[0]=r[0].slice(r[0].indexOf("/")+1)),""!=r[0]&&p.push(r[0]);else{var u=
[];u.mapid=r[0];u.mapx=r[1];u.mapy=r[2];u.npcname=r[3];u.maplvl=r[4];u.maptype=r[5];u.mapcolor=r[6];u.mapnps=r[7];g.push(u)}}Mapdata.setdata(g,p)}};e.prototype.clientChangeRoleLight=function(g){};e.prototype.clientChangeRoleNameColor=function(g){var l=g.record;g=g.param;l==playerID&&(Laya.stage.event("update_Name_Color",[g]),Laya.stage.event("UpdateNameColor",[g]));ObjectManage.setObjectNameColor(l,g)};e.prototype.clientRoleDoTurn=function(g,l){var p=l.length,q=g.param,r=g.tag;CodeUtil._LOBYTE(g.series);
CodeUtil._HIBYTE(g.series);if(11<p){var u=fnDecode6BitBuf(l,l.length);u=TCharDesc(u.pszDest);var v=CodeUtil.getFeatureLen(u.feature),w=l.slice(11,l.length),z=fnDecode6BitBuf(w,256).pszDest;z=TFeature(u.feature,z);w=l.substr(11+v,p-11-v);l=DecodeString(w);ObjectManage.ChangeState({ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:z,state:u.status,str:l});g.record==playerID&&(Mapmodule.cur_x=q,Mapmodule.cur_y=r,console.log("turn,",l,q,r))}};e.prototype.clientRecvWalkMessage=
function(g,l){var p=l.length,q="";if(11<p){if(g.ident==SM_100HIT){var r=l.indexOf("|");0<r&&(q=l.substr(r,p-r),o_content=l.substr(0,r-1))}r=fnDecode6BitBuf(l,l.length);r=TCharDesc(r.pszDest);var u=r.feature;q=l.slice(11,l.length);var v=CodeUtil.getFeatureLen(u);q=fnDecode6BitBuf(q,256).pszDest;u=TFeature(u,q);q=l.substr(11+v,p-11-v);l=DecodeString(q);l={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:u,state:r.status,str:l};p=ObjectManage.findobject(g.record)}else l={ident:g.ident,
record:g.record,param:g.param,tag:g.tag,series:g.series},p=ObjectManage.findobject(g.record);p&&p.OwnerID==playerID&&!GameUtil.checkPosPointIsTrue(p.grid,{x:g.param,y:g.tag})||ObjectManage.ChangeState(l);if(7==g.ident)Laya.timer.once(200,this,function(){var w=ObjectManage.findobject(g.record);if(w){var z=GameUtil.GetNextPoint(g.param,g.tag,w.cur_dir);GameUtil.moverule(z,w.cur_dir,4)&&Laya.stage.event("MSG_MOVE_RESULT",[g.record,z.x,z.y])}})};e.prototype.clientRecvRunMessage=function(g,l){var p=l.length;
if(11<p){var q=fnDecode6BitBuf(l,l.length);q=TCharDesc(q.pszDest);var r=q.feature,u=l.slice(11,l.length),v=CodeUtil.getFeatureLen(r);u=fnDecode6BitBuf(u,256).pszDest;r=TFeature(r,u);u=l.substr(11+v,p-11-v);l=DecodeString(u);g={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:r,state:q.status,str:l}}else g={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series};ObjectManage.ChangeState(g)};e.prototype.clientChangeRoleFeature=function(g,l){var p=CodeUtil.getFeatureLen(g.param);
p<=l.length&&(l=fnDecode6BitBuf(l,p),l=TFeature(g.param,l.pszDest),p=CodeUtil._MAKELONG(g.tag,g.series),ObjectManage.ChangeState({ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:l,level:p}),Laya.stage.event("reset_equip_dlg"),(g=ObjectManage.findobject(g.record))&&3==g.type&&g.stallssetting(l.buffer[13]))};e.prototype.clientRecvHitMessage=function(g,l){var p=g.param,q=g.tag,r=g.series;l=parseInt(l);ObjectManage.ChangeState({ident:g.ident,record:g.record,param:g.param,tag:g.tag,
series:g.series},l);g.ident==SM_HEAVYHIT&&1==l&&(g=8*r,r=g+2,p=new Laya.Point(p,q),(q=Animationmodule.playframe(!0,Mapmodule.root,"data/Effect/",g,r,80,!1,!0))&&q.pos(48*p.x,32*p.y))};e.prototype.magicfire=function(g,l,p){l=fnDecode6BitBuf(l,l.length);l=TCharDesc(l.pszDest);var q=g.record,r=CodeUtil._LOBYTE(g.series),u=CodeUtil._HIBYTE(g.series),v=g.param,w=g.tag,z=l.status;g=l.feature;var A=parseInt(g/2),C=null;C=0===g%2?!0:!1;g=ObjectManage.findobject(q);if(null!=g){var B=g.currMagicId;if(1E3<=
B&&1500>=B)g.currMagicId=0,Skillmodule.playCustomSkillMagicfire(g,B,{tx:v,ty:w,lv:A,targetid:z});else if(!g_myHero||61!=u&&62!=u&&64!=u)Laya.timer.once(Math.max(1,3*g.ftime-2.5*g.skillsp),this,function(){q&&119==u&&4==r?Skillmodule.play2skill(q,119,4,v,w,0):Skillmodule.play2skill(q,u,r,v,w,z,A,C,B)});else g=THumFeature(g.data.fea.buffer).btJob,61==u&&0==g?Skillmodule.play2skill(q,611,r,v,w,z):61==u&&2==g?Skillmodule.play2skill(q,61,r,v,w,z):62==u&&0==g?Skillmodule.play2skill(q,621,r,v,w,z):62==u&&
1==g?Skillmodule.play2skill(q,62,r,v,w,z):64==u&&1==g?Skillmodule.play2skill(q,641,r,v,w,z):64==u&&2==g&&Skillmodule.play2skill(q,64,r,v,w,z)}};e.prototype.magicfirefail=function(g,l){};e.prototype.clientRecvStruckMessage=function(g,l){var p=zDecode2String(l);if(40<=p.length){l=TMessageBodyWL(p);var q=GameUtil.slice(p,20,40),r=TMessageBodyWL(q);p=GameUtil.slice(p,40,p.length);var u=TFeature(l.lParam1,p),v={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:u,state:r};if(p=ObjectManage.findobject(g.record))if(ObjectManage.ChangeState(v),
p.data.level=v.state.lTag2,u=THumFeature(v.fea.buffer),u=u.wRace,0==u||1==u||150==u?ObjectManage.updateObjectHp(v.state.lParam2,v.state.lParam1,v.record,null,null,!0):ObjectManage.updateObjectHp(v.state.lParam2,v.state.lParam1,v.record,null,null,!1),g.ident==SM_NPCHSPELLCHANGED?(r.lParam1=q[0]+(q[1]<<8)+(q[2]<<16)+(q[3]<<24),r.lParam2=q[4]+(q[5]<<8)+(q[6]<<16)+(q[7]<<24),r.lParam3=q[8]+(q[9]<<8)+(q[10]<<16)+(q[11]<<24),r.lTag1=q[12]+(q[13]<<8)+(q[14]<<16)+(q[15]<<24),r.lTag2=q[16]+(q[17]<<8)+(q[18]<<
16)+(q[19]<<24),p.m_Abil.HP<p.m_Abil.MaxHP&&GameUtil.showvaule(r.lParam3,g.ident,p,0<r.lParam3)):(q=CodeUtil._MAKELONG(g.param,g.tag),GameUtil.showvaule(q,g.ident,p,!1)),q=new Laya.Point(48*p.grid.x,32*p.grid.y),p.skin_feature&&165==p.skin_feature.wRaceImg&&3712==p.skin_feature.wAppr&&((r=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",6530,6535,100,!1,!0))&&r.pos(q.x,q.y),l=ObjectManage.findobject(l.lTag1)))l=GameUtil.getorientation(p.grid,l.grid),p.changestate(null,11,l,!1);p&&playerID&&
g.record==playerID&&(Laya.stage.event("update_role_info",[p.m_Abil]),null!=p.obj_hores&&g_ClientConfig.nDownHouse>Math.floor(100*Math.random())&&Sendmessage.sendSay("@\u4e0b\u9a6c"),GlobalCfglist.autotp?Gameconfig.transfer(p.m_Abil.HP,p.m_Abil.MaxHP):GlobalCfglist.autotp1&&Gameconfig.transfer1(p.m_Abil.MP,p.m_Abil.MaxMP),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"))}};e.prototype.clientRecvRoleSitDownMessage=function(g){g.record!=playerID&&ObjectManage.ChangeState({ident:g.ident,
record:g.record,param:g.param,tag:g.tag,series:g.series})};e.prototype.clientRecvSpellMessage=function(g,l){var p=parseInt(l);l=CodeUtil._LOWORD(p);p=CodeUtil._HIWORD(p);p={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,magicid:l,newlv:p};1E3<=l&&1500>=l?Skillmodule.applyCustomSkillForOther(p):ObjectManage.ChangeState(p,p.newlv)};e.prototype.clientRecvDigUpMessage=function(g,l){if(27<l.length){var p=l.slice(0,20);p=fnDecode6BitBuf(p,20);p=TMessageBodyWL(p.pszDest);l=l.slice(27,
l.length);var q=fnDecode6BitBuf(l,256).pszDest;l=p.lParam1;d=l=TFeature(l,q);ObjectManage.ChangeState({ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:l,state:p.lParam2,str:""})}};e.prototype.clientRecvDigDownMessage=function(g){ObjectManage.ChangeState({ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:d})};e.prototype.clientRecvFlyAXEMessage=function(g,l){var p=ObjectManage.findobject(g.record),q=fnDecode6BitBuf(l,l.length),r=TMessageBodyW(q.pszDest),
u=CodeUtil._MAKELONG(r.Tag1,r.Tag2);q=new Laya.Point(r.Param1,r.Param2);if(p){var v=THumFeature(p.data.fea.buffer);71==v.wDress&&45==v.wRace?(Skillmodule.playself(999,999,p,q),Skillmodule.play2skill(g.record,999,999,r.Param1,r.Param2,u)):47==v.wDress&&45==v.wRace?(Skillmodule.playself(1E3,1E3,p,q),Skillmodule.play2skill(g.record,1E3,1E3,r.Param1,r.Param2,u)):323==v.wDress&&45==v.wRace?(Skillmodule.playself(1E3,1E3,p,q),Skillmodule.play2skill(g.record,1E3,1E3,r.Param1,r.Param2,u)):328==v.wDress&&45==
v.wRace?(Skillmodule.playself(1002,1002,p,q),Laya.timer.once(300,this,function(){Skillmodule.play2skill(g.record,1002,1002,r.Param1,r.Param2,u)})):329==v.wDress&&45==v.wRace?(Skillmodule.playself(1003,1003,p,q),Laya.timer.once(300,this,function(){Skillmodule.play2skill(g.record,1003,1003,r.Param1,r.Param2,u)})):372==v.wDress&&45==v.wRace?(Skillmodule.playself(1003,1003,p,q),Laya.timer.once(300,this,function(){Skillmodule.play2skill(g.record,1006,1006,r.Param1,r.Param2,u)})):374==v.wDress&&45==v.wRace?
(Skillmodule.playself(1007,1007,p,q),Laya.timer.once(300,this,function(){Skillmodule.play2skill(g.record,1007,1007,r.Param1,r.Param2,u)})):this.clientRecvHitMessage(g,l)}};e.prototype.clientRecvLigthingMessage=function(g,l){l=fnDecode6BitBuf(l,l.length);l=TMessageBodyWL(l.pszDest);var p=g.series,q=l.lParam1,r=l.lParam2,u=l.lTag1,v=l.lTag2;if((l=ObjectManage.findobject(g.record))&&l.skin_feature){1==l.type&&156==l.skin_feature.wRaceImg&&(g_diyMonState=5);var w=new Laya.Point(48*l.grid.x,32*l.grid.y);
if(26==l.skin_feature.wRaceImg&&250==l.skin_feature.wAppr){v=420+10*p;var z=v+10-1,A="data/mon26/"}else if(38==l.skin_feature.wRaceImg&&256==l.skin_feature.wAppr)v=3670+10*p,z=v+8-1,A="data/mon26/";else if(29==l.skin_feature.wRaceImg&&260==l.skin_feature.wAppr)v=2652+10*p,z=v+5-1,A="data/mon26/";else if(27==l.skin_feature.wRaceImg&&251==l.skin_feature.wAppr)v=930+10*p,z=v+6-1,A="data/mon26/";else if(113==l.skin_feature.wRaceImg&&340==l.skin_feature.wAppr)v=581+10*p,z=v+9-1,A="data/mon35/";else if(29==
l.skin_feature.wRaceImg&&255==l.skin_feature.wAppr)v=2652+10*p,z=v+5-1,A="data/mon26/";else if(151==l.skin_feature.wRaceImg&&262==l.skin_feature.wAppr)v=1610+10*p,z=v+6-1,A="data/mon27/";else if(28==l.skin_feature.wRaceImg&&241==l.skin_feature.wAppr)v=932+10*p,z=v+4-1,A="data/mon25/";else if(28==l.skin_feature.wRaceImg&&240==l.skin_feature.wAppr)v=426+10*p,z=v+4-1,A="data/mon25/";else{if(83==l.skin_feature.wRaceImg&&800==l.skin_feature.wAppr){l.is_call&&(l.is_call=!1,Skillmodule.play2skill(g.record,
1017,1017,q,r,u));return}if(101==l.skin_feature.wRaceImg&&321==l.skin_feature.wAppr){A="data/mon33/";var C=ObjectManage.findobject(u);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,3,p,!1);C&&(v&&1==v?((l=Animationmodule.playframe(!0,Mapmodule.root,A,780,788,100,!1,!0))&&l.pos(48*C.grid.x,32*C.grid.y),(l=Animationmodule.playframe(!0,Mapmodule.root,A,790,799,100,!1,!0))&&l.pos(48*C.grid.x,32*C.grid.y)):v&&2==v&&(Skillmodule.play2skill(g.record,1009,1009,q,r,u),Laya.timer.once(300,
this,function(){var B=Animationmodule.playframe(!0,Mapmodule.root,"data/magic/",1320,1335,50,!1,!0);B&&B.pos(48*C.grid.x,32*C.grid.y)})));return}if(101==l.skin_feature.wRaceImg&&322==l.skin_feature.wAppr){A="data/mon33/";C=ObjectManage.findobject(u);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,3,p,!1);C&&(v&&1==v?(p=Animationmodule.playframe(!0,Mapmodule.root,A,1320,1349,100,!1,!0))&&p.pos(48*C.grid.x,32*C.grid.y):v&&2==v&&(Skillmodule.play2skill(g.record,1009,1009,
q,r,u),Laya.timer.once(300,this,function(){var B=Animationmodule.playframe(!0,Mapmodule.root,"data/magic/",1340,1355,50,!1,!0);B&&B.pos(48*C.grid.x,32*C.grid.y)})));return}if(161==l.skin_feature.wRaceImg&&327==l.skin_feature.wAppr){A="data/mon33/";C=ObjectManage.findobject(u);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,3,p,!1);C&&(p=Animationmodule.playframe(!0,C,A,3350,3389,100,!1,!0));return}if(111==l.skin_feature.wRaceImg&&330==l.skin_feature.wAppr){A="data/magic5/";
C=ObjectManage.findobject(u);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,3,p,!1);C&&(v&&199==v?(Skillmodule.playself(1004,1004,l,l.grid),Laya.timer.once(500,this,function(){Skillmodule.play2skill(g.record,1004,1004,q,r,u);Laya.timer.once(400,this,function(){Animationmodule.playframe(!0,C,A,270,274,100,!1,!0)})})):v&&200==v&&(Skillmodule.playself(1005,1005,l,l.grid),Laya.timer.once(800,this,function(){Skillmodule.play2skill(g.record,1005,1005,q,r,u);Laya.timer.once(300,
this,function(){Animationmodule.playframe(!0,C,A,450,459,100,!1,!0)})})));return}if(165==l.skin_feature.wRaceImg&&378==l.skin_feature.wAppr){A="data/mon38/";C=ObjectManage.findobject(u);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,3,p,!1);C&&(Skillmodule.playself(1008,1008,l,l.grid),Laya.timer.once(800,this,function(){Animationmodule.playframe(!0,C,A,4220,4222,100,!1,!0)}));return}if(165==l.skin_feature.wRaceImg&&3712==l.skin_feature.wAppr){A="data/mon38/";v=6640;(p=
Animationmodule.playframe(!0,Mapmodule.root,A,v,v+6-1,100,!1,!0))&&p.pos(w.x,w.y);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,12,p,!1);return}if(165==l.skin_feature.wRaceImg&&3713==l.skin_feature.wAppr){A="data/mon38/";v=7510;z=v+7-1;p=GameUtil.getMovePoint(l.grid,p,1);w=new Laya.Point(48*p.x,32*p.y);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,11,p,!1);(p=Animationmodule.playframe(!0,Mapmodule.root,A,v,z,100,!1,!0))&&p.pos(w.x,w.y);
return}v=350+20*p;z=v+6-1;A="data/mon5/"}(p=Animationmodule.playframe(!0,Mapmodule.root,A,v,z,100,!1,!0))&&p.pos(w.x,w.y);p=new Laya.Point(q,r);p=GameUtil.getorientation(l.grid,p);l.changestate(null,3,p,!1)}};e.prototype.clientRecvAliveMessage=function(g,l){var p=l.length;CodeUtil._LOBYTE(g.series);CodeUtil._HIBYTE(g.series);if(11<p){var q=fnDecode6BitBuf(l,l.length);q=TCharDesc(q.pszDest);var r=CodeUtil.getFeatureLen(q.feature),u=l.slice(11,l.length),v=fnDecode6BitBuf(u,256).pszDest;v=TFeature(q.feature,
v);u=l.substr(11+r,p-11-r);l=DecodeString(u);l={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:v,state:q.status,str:l};ObjectManage.ChangeState(l);g.record==lockingID&&GameUtil.delhalo(lockingID);l=ObjectManage.findobject(l.record);g.ident==SM_SKELETON&&(l.is_die=!0);g.ident==SM_ALIVE&&GameUtil.showvaule(null,E_ROLE_ALIVE,l,null);l&&0==l.visible&&(l.visible=!0)}};e.prototype.clientRecvHideMessage=function(g,l){if((l=ObjectManage.findobject(g.record))&&0<l.msg_list.length)for(var p=
0;p<l.msg_list.length;p++){var q=l.msg_list[p];if(q&&10==q.msg.ident)return}g.record!=playerID&&ObjectManage.delobject(g.record)};e.prototype.clientRecvMoveFailMessage=function(g,l){if(11<l.length){var p=fnDecode6BitBuf(l,11,!1),q=TCharDesc(p.pszDest);l=l.slice(CodeUtil.getFeatureLen(q.feature),l.length);p=fnDecode6BitBuf(l,256,!1);TFeature(q.feature,p.nDestPos);Laya.stage.event("MSG_MOVE_RESULT",[g.record,g.param,g.tag])}};e.prototype.clientRecvDeathMessage=function(g,l){var p=l.length;CodeUtil._LOBYTE(g.series);
CodeUtil._HIBYTE(g.series);if(11<p){p=fnDecode6BitBuf(l,8).pszDest;p=TCharDesc(p);CodeUtil.getFeatureLen(p.feature);l=l.slice(11,l.length);l=fnDecode6BitBuf(l,256).pszDest;var q=TFeature(p.feature,l);l=THumFeature(q.buffer);p={ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:q,state:p.status,str:""};if(19!=l.wRace||290!=l.wDress&&291!=l.wDress&&292!=l.wDress){l=ObjectManage.findobject(p.record);ObjectManage.ChangeState(p);ObjectManage.visibleHpSpr(p.record,!1);if(p.record==
playerID)Laya.stage.event("ROLE_DIE"),Laya.stage.event("role_die_state");else if(null!=l&&(q=null!=l.txt_name?l.txt_name._text:"")&&-1!=q.indexOf(g_RoleNameOnly)&&l.OwnerID==playerID){p=g_babyList.indexOf(p.record);-1!=p&&g_babyList.splice(p,1);l=!0;for(q=0;q<g_babyList.length;q++)(p=ObjectManage.findobject(g_babyList[q]))&&!p.is_die&&(l=!1);l&&Laya.stage.event("close_petBtn")}g_myHero&&g_myHero.data&&g_myHero.data.record==g.record&&(g=g_myHero.m_Abil,g.HP=0,Laya.stage.event("update_hero_info",[g]))}else ObjectManage.ChangeState(p),
ObjectManage.visibleHpSpr(p.record,!1)}};e.prototype.clientRecvItemDescList=function(g,l){var p=g.param;g=l.substring(0,p);p=l.substring(p);l=zDecodeString(g);g=zDecodeString(p);p="";l&&(p=l);g&&(p=l+g);GameUtil.dismantlingItemDescText(p)};e.prototype.clientRecvSpaceMoveHideMsg=function(g){var l=g.record;if(l!=playerID){var p=ObjectManage.findobject(l);g=new Laya.Point(g.tag,g.series);p&&Skillmodule.playself(19,4,p,g);ObjectManage.delobject(l)}};e.prototype.clientRecvSpaceMove2HideMsg=function(g){var l=
g.record;if(l!=playerID){l=ObjectManage.findobject(l);var p=new Laya.Point(g.tag,g.series);l&&Skillmodule.playself(19,4,l,p);l&&3==l.type&&ObjectManage.delobject(g.record)}};e.prototype.clientRecvSpaceMoveShowMsg=function(g,l){var p=l.length;if(11<p){var q=fnDecode6BitBuf(l,l.length);q=TCharDesc(q.pszDest);var r=q.feature,u=CodeUtil.getFeatureLen(r),v=l.slice(11,l.length);v=fnDecode6BitBuf(v,256).pszDest;r=TFeature(r,v);v=l.substr(11+u,p-11-u);l=DecodeString(v);p=g.record;u=g.param;v=g.tag;var w=
ObjectManage.findobject(p);""!=l&&ObjectManage.ChangeState({ident:g.ident,record:g.record,param:g.param,tag:g.tag,series:g.series,fea:r,state:q.status});w&&(p==playerID&&ObjectManage&&ObjectManage.resetLockID(),w.x=48*u,w.y=32*v,w.grid.x=u,w.grid.y=v,w.selfname.pos(w.x,w.y),w.target_pos.x=u,w.target_pos.y=v,g_suijiStone&&(g_suijiStone=!1,setTimeout(function(){Laya.stage.event("keepGo")},500)),p==playerID&&(selfPlayerTransfer=!0,Mapmodule.enterMap(Mapmodule.sceneid,u,v)),autohookstate&&p==playerID&&
(Laya.stage.event("onhook",["0"]),Laya.timer.once(800,this,function(){Laya.stage.event("onhook",["3"])})))}Laya.stage.event("Show_Bag_Item_ico");Laya.timer.once(500,this,function(){Laya.stage.event("setAutoSkillAni")})};e.prototype.clientChangeBead=function(g,l){DecodeString(l)};e.prototype.clientRecvActorSay=function(g,l){var p=g.record;l=DecodeString(l);var q=CodeUtil._LOBYTE(g.param);g=CodeUtil._HIBYTE(g.param);var r=4;0<=l.indexOf("(!)")&&(r=6);Laya.stage.event("new_chat_msg",[{info:l,front:q,
bg:g,type:r}]);-1!=l.indexOf("</:")||-1!=l.indexOf("{pos|")||-1!=l.indexOf("<[")&&-1!=l.indexOf("]>")&&-1!=l.indexOf("\\")||ObjectManage.showChatTxt(p,l)};e.prototype.clientRecvWinExp=function(g,l){var p=0>g.record?4294967296+g.record:g.record,q=g.series,r=CodeUtil._MAKELONG(g.param,g.tag);l=DecodeString(l);var u=ObjectManage.findobject(playerID);null!=u&&(3==q?(u.m_Abil.Exp=p,Laya.stage.event("show_log",[{txt:"\u5df2\u83b7\u5f97"+parseInt(r)+"\u70b9\u7ecf\u9a8c\u503c(\u5305\u542b"+l+"\u53cc\u500d\u7ecf\u9a8c)",
color:"#00ff00"}])):0==g.series&&(u.m_Abil.Exp=p),Laya.stage.event("update_role_info",[u.m_Abil]),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"))};e.prototype.clientChangeLightOnDay=function(g){};e.prototype.clientRecvCuteMsg=function(g,l){};e.prototype.clientRecvWineMagic=function(g,l){DecodeString(l)};e.prototype.clientRecvAbilityMessage=function(g,l){g_GameCionNum.value=g.record;Laya.stage.event("updateAuctionHouseMoney",1);var p=CodeUtil._LOBYTE(g.param);g_GameGoldNum.value=CodeUtil._MAKELONG(g.tag,
g.series);Laya.stage.event("updateAuctionHouseMoney",3);g=ObjectManage.findobject(playerID);if(g_boOpenCaiji)if(-1!=l.indexOf("/")){var q=l.split("/");if(1<q.length){l=g_gamePopNum.value;var r=zDecode2String(q[0]);r=TAbility(r);q=DecodeString(q[1]);g_gamePopNum.value=r.CreditPoint;Laya.stage.event("updateAuctionHouseMoney",9);g_gamePopNum.value>l&&g_LogSocket.AddGameDataLog(116,"\u58f0\u671b",g_gamePopNum.value,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+q,g_gamePopNum.value-l);g_gamePopNum.value<l&&g_LogSocket.AddGameDataLog(116,
"\u58f0\u671b",g_gamePopNum.value,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+q,g_gamePopNum.value-l);g&&g.m_Abil.Level&&g.m_Abil.Level!=r.Level&&g_LogSocket.AddGameDataLog(12,"??",1,g.m_Abil.Level,"");Laya.stage.event("update_role_info",[r]);ObjectManage.SetAttribute(playerID,r)}}else r=zDecode2String(l),r=TAbility(r),g&&g.m_Abil.Level&&g.m_Abil.Level!=r.Level&&g_LogSocket.AddGameDataLog(12,"??",1,r.Level,""),Laya.stage.event("update_role_info",[r]),ObjectManage.SetAttribute(playerID,r);else r=zDecode2String(l),
r=TAbility(r),Laya.stage.event("update_role_info",[r]),ObjectManage.SetAttribute(playerID,r),r&&(g_gamePopNum.value=r.CreditPoint,Laya.stage.event("updateAuctionHouseMoney",9));g=ObjectManage.findobject(playerID);l=0;g&&g.skin_feature&&(l=g.skin_feature.btGender);Laya.stage.event("reset_head_icon",[l,p]);ObjectManage.updateObjectHp(r.MaxHP,r.HP,playerID,r.MP,r.MaxMP);GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");Laya.stage.event("Update_Bag")};e.prototype.clientRecvSubAbilityMessage=
function(g,l){g_nMyHitPoint=CodeUtil._LOBYTE(g.param);g_nMySpeedPoint=CodeUtil._HIBYTE(g.param);g_nMyAntiPoison=CodeUtil._LOBYTE(g.tag);g_nMyPoisonRecover=CodeUtil._HIBYTE(g.tag);g_nMyHealthRecover=CodeUtil._LOBYTE(g.series);g_nMySpellRecover=CodeUtil._HIBYTE(g.series);g_nMyAntiMagic=CodeUtil._LOBYTE(g.record);body=DecodeString(l);GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum")};e.prototype.clientRecvHealthSpellChanged=function(g,l){var p=g.record;if(""!=l&&-1!=l.indexOf("/")){var q=
l.split("/");""!=q[0]&&(l=q[0]);if(""!=q[1]&&0<q[1])var r=parseInt(q[1])}l=fnDecode6BitBuf(l,l.length,!1);var u=TMessageBodyL(l.pszDest);l=CodeUtil._MAKELONG(g.param,g.tag);q=u.lParam1;var v=u.lParam2;u=u.lParam3;if(playerID&&p==playerID){var w=ObjectManage.findobject(p);if(w){var z=w.m_Abil;z&&(z.HP>q?(GameUtil.showvaule(z.HP-q,E_ROLE_CHANGE_HP,w,!1),GlobalCfglist.autotp&&Gameconfig.transfer(w.m_Abil.HP,w.m_Abil.MaxHP)):z.HP<q&&z.HP<z.MaxHP&&GameUtil.showvaule(q-z.HP,E_ROLE_CHANGE_HP,w,!0),z.MP>
l&&0<l?(GameUtil.showvaule(z.MP-l,E_ROLE_CHANGE_MP,w,!1),GlobalCfglist.autotp1&&Gameconfig.transfer1(w.m_Abil.MP,w.m_Abil.MaxMP)):z.MP<l&&0<l&&z.MP<z.MaxMP&&GameUtil.showvaule(l-z.MP,E_ROLE_CHANGE_MP,w,!0),0<l&&(z.MP=l),0<q&&(z.HP=q),0<v&&(z.MaxHP=v),0<u&&(z.Level=u),Laya.stage.event("update_role_info",[z]),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"))}}(w=ObjectManage.findobject(p))&&w.Blood&&(w.boMagicShield=g.series,w.Blood.showBlueBar(w));ObjectManage.updateObjectHp(v,q,p,l,
r);g_myHero&&g_myHero.m_Abil&&g_myHero.data.record==p&&(z=g_myHero.m_Abil,z.MP=l,z.HP=q,z.MaxHP=v,z.Level=u,GlobalCfglist.autotpH&&Gameconfig.heroCllback(g_myHero.m_Abil.HP,g_myHero.m_Abil.MaxHP),Laya.stage.event("update_hero_info",[z]))};e.prototype.clientRecvPlayerTalkMsg=function(g,l,p){if(g.ident==SM_SYSMESSAGE){var q=DecodeString(l);if(-1!=q.indexOf("ItemCanPickUpTick")&&-1!=q.indexOf("MsgID")&&-1!=q.indexOf("MakeIndex")){var r=JSON.parse(q),u=ObjectManage.findobject(playerID);if(r&&u.grid.x==
r.ItemX&&u.grid.y==r.ItemY)Laya.timer.once(3300,this,function(){Sendmessage.ClickMapItem(u.grid.x,u.grid.y)})}}if(1!=g.tag&&(q="",100==g.ident&&65023!=g.param&&(q=this.UpGlobaInf(l)),""==q&&(q=DecodeString(l)),""!=q&&(r&&(q=r.Say),-1==q.indexOf("\u5957\u88c5\u5c5e\u6027")))){var v=q.indexOf("{");if(-1!=v&&-1==q.indexOf("|")){var w=q.indexOf("/");l=q.indexOf("}");r=q.substr(0,v);v=q.substr(v+1,w-(v+1));q=q.substr(l+1,q.length);q=r+v+q}if(g.ident==SM_WHISPER){r=q.split(" ")[0];for(l=0;l<G_Friend_HMD_List.length;l++)if(G_Friend_HMD_List[l]==
r)return;for(l=0;l<G_PRIVATE_CHAT_list.length;l++)if(G_PRIVATE_CHAT_list[l]==r)return}l=CodeUtil._LOBYTE(g.param);r=CodeUtil._HIBYTE(g.param);if(0==p){if(g.ident!=SM_SYSMESSAGE||g.ident==SM_SYSMESSAGE&&1!=g.tag&&196==l)p=1;Laya.stage.event("new_chat_msg",[{info:q,front:l,bg:r,type:p}]);-1!=q.indexOf("(\u82f1\u96c4) \u72b6\u6001\uff1a")&&Laya.stage.event("heroState",[q]);-1==q.indexOf("\u53ec\u5524\u70c8\u706b\u7cbe\u7075\u5931\u8d25")&&-1==q.indexOf("\u5f00\u542f\u9010\u65e5\u5251\u6cd5\u5931\u8d25")&&
-1==q.indexOf("\u9f99\u5f71\u5251\u6cd5\u5f00\u542f\u5931\u8d25")&&-1==q.indexOf("\u5f00\u5929\u65a9\u5f00\u542f\u5931\u8d25")||!lockingID||Objectcontrol.fight();g=q.indexOf("\u5f3a\u884c\u79bb\u7ebf");1<=g&&(Sendmessage.End(),Laya.stage.event("show_alert_dlg",[{type:1,txt:q,color:"#ff0000",callfn:function(){Laya.Browser.window.location.reload()}}]),playerID=0);q.indexOf("\u5143\u5b9d\u4e0d\u8db3,\u65e0\u6cd5\u8d2d\u4e70");1<=g&&ItemMgr.getInstance().LastBaiTanBuyItem&&(g=ItemMgr.getInstance().LastBaiTanBuyItem.item.MakeIndex,
ItemMgr.getInstance().DeleteItem(g,!0))}else Laya.stage.event("new_chat_msg",[{info:q,front:l,bg:r,type:p}]);3==p&&G_Guald_Chat_List.push({title:"",info:q})}};e.prototype.sendNewLineMsg=function(g,l){var p="";g=DecodeString(g);var q=CodeUtil._LOBYTE(l.param),r=CodeUtil._HIBYTE(l.param),u=CodeUtil._LOBYTE(l.tag),v=CodeUtil._HIBYTE(l.tag),w=l.series;l=l.record;if(g){var z=new Laya.Image;z.width=800;0==v&&(z.skin="gameres/ui/img_roll.png");if(g.indexOf("||")){g=g.split("||");for(var A=0;A<g.length;A++){p+=
g[A];A<g.length-1&&(p+="\n");var C=GameUtil.msgSetColor(p,q,r,u);C.y=0*C.height+5;z.height=C.y+C.height+5}}else C=GameUtil.msgSetColor(g[A],Fcolor,Bcolor,u),z.height=C.height;z.addChild(C);z.width=C.width;z.x=(Laya.stage.width-z.width)/2;z.y=w;z.name="newline"+v;z.nTime=l;z.nMode=v;switch(v){case 0:G_newLineMsm0.push(z);GameUtil.newLineMsg(G_newLineMsm0,v);break;case 1:G_newLineMsm1.push(z);GameUtil.newLineMsg(G_newLineMsm1,v);break;case 2:G_newLineMsm2.push(z),GameUtil.newLineMsg(G_newLineMsm2,v)}}};
e.prototype.clientRecvMoveMessage=function(g,l){l=DecodeString(l).toLowerCase();var p=CodeUtil._LOBYTE(g.param),q=CodeUtil._HIBYTE(g.param),r=g.tag,u=g.series;g=g.record;G_RollMsg[u]?G_RollMsg[u].push({txt:l,fcolor:p,bcolor:q,x:r,y:u,count:g}):(G_RollMsg[u]=[{txt:l,fcolor:p,bcolor:q,x:r,y:u,count:g}],GameUtil.rollMsg(G_RollMsg[u]))};e.prototype.clientRecvDelayMsg=function(g,l){if(!(5<G_countDownMsg.length)){var p=g.record,q=g.param,r=Get2RGB(g.tag);g=Get2RGB(g.series);l=DecodeString(l);txt=new Laya.Text;
txt.color=r;txt.fontSize=16;txt.time=q;txt.text=l;txt.id=p;txt.stroke=1;txt.strokeColor=g;txt.x=(browser_width-txt.width)/2;G_countDownMsg.push(txt);GameUtil.countDownMsg(l)}};e.prototype.clientRecvCenterMsg=function(g,l){CodeUtil._LOBYTE(g.param);CodeUtil._HIBYTE(g.param);DecodeString(l)};e.prototype.clientRecvMsgShowOnChatTop=function(g,l){var p=CodeUtil._LOBYTE(g.param),q=CodeUtil._HIBYTE(g.param);g=g.record;l=DecodeString(l);Laya.stage.event("new_chat_msg",[{info:l,front:p,bg:q,type:1},g])};e.prototype.clientRecvAddItemMessage_Caiji=
function(g,l){if(""!=l){g=-100;if(-1!=l.indexOf("/")){l=l.split("/");var p=l[0];l[1]&&(g=parseInt(DecodeString(l[1])));l=fnDecode6BitBuf(p,p.length,!1);l=TClientItem(l.pszDest)}else l=fnDecode6BitBuf(l,l.length,!1),l=TClientItem(l.pszDest);p="1";GameApi.IsOverLapItem(l)&&(p=l.Dura+1);var q="\u975e\u7ed1\u5b9a\u7269\u54c1";l.s.IsBind&&(q="\u5df2\u7ed1\u5b9a\u7269\u54c1");switch(g){case 4:case 5:g_LogSocket.AddGameDataLog(g,l.s.Name,l.MakeIndex,p,q);break;case 29:case 30:case 33:g_LogSocket.AddGameDataLog(g,
l.s.Name,l.MakeIndex,q,p);break;case 95:g_LogSocket.AddGameDataLog(g,l.s.Name,l.MakeIndex,q,l.Dura.toString())}1==type?(g_IconCList.push(l),Laya.stage.event("updateHumIcon")):9!=type&&(GameUtil.LoadBagItemIcon2(l),-1!=g_DrugButNumber&&f==l.s.Name&&a==l.s.AniCount&&(g_DrugItemsList[b]=l,a=f=null,g_DrugButNumber=-1))}};e.prototype.clientRecvAddItemMessage=function(g,l){var p=g.tag;if(""!=l){if(g_boOpenCaiji&&-1!=l.indexOf("/"))this.clientRecvAddItemMessage_Caiji(g,l);else{g=fnDecode6BitBuf(l,l.length,
!1);g=TClientItem(g.pszDest);if(1==p){g_IconCList.push(g);Laya.stage.event("updateHumIcon");return}if(9!=p&&(GameUtil.LoadBagItemIcon2(g),GameUtil.PlayerAutoHandleItem(g,p),GameUtil.autoSetDrugItem(g),-1!=g_DrugButNumber))for(p=0;p<g_DrugItemsList.length;p++)g_DrugItemsList[p]&&g_DrugItemsList[p].s.Name==g.s.Name&&p==g_DrugButNumber&&(g_DrugItemsList[g_DrugButNumber]=g,g_autoDrugButNumber=-1);g_auctionBreakUpInfo&&g.s.Name==g_auctionBreakUpInfo.name&&(p=GameUtil.checkMaterialItemCanBeStacked(g)?g.Dura+
1:g.Dura,g_auctionBreakUpInfo.nums==(0<p?p:1)&&(g_auctionBreakUpInfo=null,Laya.stage.event("sendWordShelvesOnItemBreakUp",g.MakeIndex)))}GameUtil.maxBag()&&Laya.stage.event("bagMaxTip",!0)}};e.prototype.clientEatMsg=function(g,l,p){CanUserItem=!0;var q=null;g_AutoItems.Items&&g.record==g_AutoItems.Items.MakeIndex?q=g_AutoItems.Items:g_WaitItems.Items&&g.record==g_WaitItems.Items.MakeIndex&&(q=g_WaitItems.Items);p?q&&(g_boOpenCaiji&&(p=" \u975e\u7ed1\u5b9a\u7269\u54c1",q.s.IsBind&&(p="\u5df2\u7ed1\u5b9a\u7269\u54c1"),
g_LogSocket.AddGameDataLog(11,q.s.Name,q.MakeIndex,"1",p)),g_AutoItems.Items&&g.record==g_AutoItems.Items.MakeIndex||!g_WaitItems.Items||g.record!=g_WaitItems.Items.MakeIndex||(f=q.s.Name,a=q.s.AniCount,b=g_DrugButNumber),-1!=g_DrugButNumber&&(p=GameApi.autofillrule(q.s.StdMode,q.s.Looks),0!=p.length&&GameApi.autofillitem(p)),GameApi.autounpack(2,q.s.Name,q.s.AniCount)||(g_AutoItems.Items&&g.record==g_AutoItems.Items.MakeIndex?g_AutoItems.Items=null:g_WaitItems.Items&&g.record==g_WaitItems.Items.MakeIndex&&
(g_WaitItems.Items=null),g_DrugButNumber=-1),Laya.stage.event("item_hint",[q,-1]),GameApi.Drugnullforidx(q.s.Name),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"),Laya.stage.event("ShowDrug_Items")):(q&&GameUtil.AddItemNewBag(q),q&&0==q.s.StdModen&&5==q.s.Source&&0<q.Dura&&GameApi.autounpack(2,q.s.Name,q.s.AniCount),g_AutoItems.Items&&g.record==g_AutoItems.Items.MakeIndex?g_AutoItems.Items=null:g_WaitItems.Items&&g.record==g_WaitItems.Items.MakeIndex&&(g_WaitItems.Items=null));g=DecodeString(l);
"\u76df\u91cd\u56de\u57ce\u77f3"==g&&setTimeout(function(){Laya.stage.event("setToCtiyStone_labContent")},500);"\u968f\u673a\u4f20\u9001\u77f3"==g&&setTimeout(function(){Laya.stage.event("setRandomStone_labContent")},500)};e.prototype.clientRecvGetBagItmes=function(g,l){if(g.param==l.length){l=fnDecode6BitBuf(l,l.length,!1);l=(new Zlib.Inflate(l.pszDest)).decompress();GameUtil.IntBagList();for(var p=0;p<g.series;p++){var q=GameUtil.slice(l,g_itemSize*p,g_itemSize*(p+1));q=TClientItem(q);GameUtil.GetItemNewBag(q)}GameUtil.LoadBagItemIcon(g_BagItemsList,
0);BagDataIsInit||(GameApi.initdrugtobag(),BagDataIsInit=!0);GameUtil.maxBag()&&Laya.stage.event("bagMaxTip",!0)}CanUserItem=!0};e.prototype.BagStack=function(){for(var g=g_BagItemsList.length-1;0<=g;g--){for(var l=0;l<g_BagItemsList.length;l++)if(null!=g_BagItemsList[l]&&null!=g_BagItemsList[g]&&0<=g_BagItemsList[l].Dura&&g_BagItemsList[l].s.Name==g_BagItemsList[g].s.Name&&g_BagItemsList[g].s.IsBind==g_BagItemsList[l].s.IsBind&&g_BagItemsList[g].MakeIndex!=g_BagItemsList[l].MakeIndex&&49!=g_BagItemsList[g].Dura&&
49!=g_BagItemsList[l].Dura&&(17==g_BagItemsList[l].s.StdMode||18==g_BagItemsList[l].s.StdMode||41==g_BagItemsList[l].s.StdMode||40==g_BagItemsList[l].s.StdMode||42==g_BagItemsList[l].s.StdMode||31==g_BagItemsList[l].s.StdMode&&-1!=g_BagItemsList[l].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){g_WaitItems.index=g;Sendmessage.sendStackThing(g_BagItemsList[g].MakeIndex,g_BagItemsList[l].MakeIndex,g_BagItemsList[l].s.DBName,0);var p=!0;break}if(p)break}};e.prototype.heroDelectItem=function(g,l){g=g.tag;
""!=l&&(l=fnDecode6BitBuf(l,l.length,!1),l=TClientItem(l.pszDest),1!=g&&(GameUtil.DelHeroItems(l.MakeIndex),GameUtil.DelHeroBagItems(l.MakeIndex)))};e.prototype.updatePlayerSkinOnDressGone=function(g){this.isLimitTimeDress(g)&&(g=GameUtil.GetItemType(g),g_UserItemList[g]=null,Laya.stage.event("updateHumNewDress"),this.isDressShowOutside()&&(Sendmessage.showfashion(1),setTimeout(function(){Sendmessage.showfashion(1)},20)))};e.prototype.isLimitTimeDress=function(g){return 101==g.Need&&1==g.NeedLevel&&
(66<=g.StdMode&&69>=g.StdMode||178==g.StdMode)};e.prototype.isDressShowOutside=function(){return 1==g_show_fashion};e.prototype.clientRecvDelectItem=function(g,l){g=g.tag;if(""!=l){l=fnDecode6BitBuf(l,l.length,!1);l=TClientItem(l.pszDest);this.updatePlayerSkinOnDressGone(l.s);g_WaitItems.Items&&l.MakeIndex==g_WaitItems.Items.MakeIndex&&(g_WaitItems.Items=null);if(1==g)GameUtil.DelUserIcon(l.MakeIndex),Laya.stage.event("updateHumIcon");else{GameUtil.DelUserItems(l.MakeIndex);GameUtil.DelBagItems(l.MakeIndex);
GameApi.Drugnullforidx(l.MakeIndex);GameUtil.DelUserItems(l.MakeIndex);for(var p=0;p<g_DrugItemsList.length;p++)g_DrugItemsList[p]&&g_DrugItemsList[p].MakeIndex===l.MakeIndex&&Laya.stage.event("ShowDrug_Items")}g_boOpenCaiji&&l&&(3==g?l.s.IsBind?g_LogSocket.AddGameDataLog(3,l.s.DBName,l.MakeIndex,"\u5df2\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(3,l.s.DBName,l.MakeIndex,"\u975e\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(3,l.s.DBName,l.MakeIndex,"",""));GameUtil.maxBag()||
Laya.stage.event("bagMaxTip",!1)}};e.prototype.clientRecvDelectItems=function(g,l){g=g.tag;if(""!=l){var p=DecodeString(l);if(g_boOpenCaiji&&-1!=p.indexOf("/")){1==g&&(g_IconCList=[],Laya.stage.event("updateHumIcon"));l=p.split("/");var q=parseInt(l[0]);p=DecodeString(l[1]).split("/");var r;for(l=1;l<p.length;l+=2){var u="\u975e\u7ed1\u5b9a\u7269\u54c1",v=1;if(r=GameUtil.GetUserItems(parseInt(p[l])))r.s.IsBind&&(u="\u5df2\u7ed1\u5b9a\u7269\u54c1"),GameApi.IsOverLapItem(r)&&(v=r.Dura+1),15!=q&&16!=
q||g_LogSocket.AddGameDataLog(q,p[l-1],parseInt(p[l]),u+"/1/\u8eab\u4e0a",v);if(r=GameUtil.GetBagItems(parseInt(p[l])))r.s.IsBind&&(u="\u5df2\u7ed1\u5b9a\u7269\u54c1"),GameApi.IsOverLapItem(r)&&(v=r.Dura+1),15!=q&&16!=q||g_LogSocket.AddGameDataLog(q,p[l-1],parseInt(p[l]),u+"/1/\u5305\u88f9",v);GameUtil.DelBagItems(parseInt(p[l]));GameApi.Drugnullforidx(parseInt(p[l]));GameUtil.DelUserItems(parseInt(p[l]))}}else if(0==g)for(g_boOpenCaiji?(p=DecodeString(p),-1!=p.indexOf("/")&&(q=p.split("/"))):(q=
DecodeString(l),-1!=q.indexOf("/")&&(q=q.split("/"))),l=1;l<q.length;l+=2)GameUtil.DelBagItems(parseInt(q[l])),GameApi.Drugnullforidx(parseInt(q[l])),GameUtil.DelUserItems(parseInt(q[l]))}1==g&&(g_IconCList=[],Laya.stage.event("updateHumIcon"))};e.prototype.saleItemList=function(g,l){G_npcShopPage=g.tag;l=DecodeString(l).split("/");g_ItemMemuListInf=[];for(var p=1;p<l.length;p+=2)if(""!=l[p]){var q=fnDecode6BitBuf(l[p],l[p].length,!1).pszDest;q=TClientItem(q);q.npcId=g.record;l[p-1]&&(q.sellerName=
l[p-1]);g_ItemMemuListInf.push(q)}Laya.stage.event("Update_Sale_Items2")};e.prototype.TranslateItemList=function(g,l){l=DecodeString(l).split("/");g_ItemMemuList=[];for(var p=0;p<l.length-1;p+=3){var q={};q.name=l[p+0];q.gprice=l[p+1];q.gcount=l[p+2];q.npcId=g.record;q.count=g.param;g_ItemMemuList.push(q)}GameApi.ShowNewSaleShop(!0)};e.prototype.ShopFormNpcItemList=function(g,l){l=DecodeString(l).split("/");g_ItemMemuList=[];for(var p=0;p<l.length-1;p+=6){var q={};q.name=l[p+0];q.gsub=l[p+1];q.gprice=
l[p+2];q.gstock=l[p+3];q.gcount=l[p+4];q.gcurrency=l[p+5];q.npcId=g.record;q.count=g.param;q.bind=g.series;g_ItemMemuList.push(q)}g_show_Npcbj=1==g.series;GameApi.ShowNewNpcShop(!0)};e.prototype.ShopItemInfoList=function(g,l){G_npcShopPage=g.tag;l=fnDecode6BitBuf(l,l.length,!0).pszDest.toString().replace(/,/g,"").split("/");g_ItemMemuListInf=[];for(var p=0;p<l.length;p+=2)if(""!=l[p]){var q=fnDecode6BitBuf(l[p],l[p].length,!1).pszDest;q=TClientItem(q);q.npcId=g.record;q.price=l[p+1];g_ItemMemuListInf.push(q)}GameUtil.LoadBagItemIcon(g_ItemMemuListInf,
1)};e.prototype.BuyItemFailed=function(g,l){1==g.record?Laya.stage.event("show_log",[{txt:"\u6b64\u7269\u54c1\u88ab\u5356\u51fa",color:"#ff0000"}]):2==g.record?Laya.stage.event("show_log",[{txt:"\u60a8\u65e0\u6cd5\u643a\u5e26\u66f4\u591a\u7684\u7269\u54c1",color:"#ff0000"}]):3==g.record&&Laya.stage.event("show_log",[{txt:"\u60a8\u6ca1\u6709\u8db3\u591f\u7684\u94b1\u6765\u8d2d\u4e70\u6b64\u7269\u54c1",color:"#ff0000"}])};e.prototype.ShellItems=function(g,l){GameApi.ShowScreen(!0,0,5,SELL_ITEM_TYPE)};
e.prototype.ShellItemFailed=function(g,l){Laya.stage.event("show_log",[{txt:"\u60a8\u4e0d\u80fd\u51fa\u552e\u6b64\u7269\u54c1",color:"#ff0000"}]);ItemMgr.getInstance().AddItemToBag(ItemMgr.getInstance().CurSelecItem);ItemMgr.getInstance().CurSelecItem=null;Laya.stage.event("show_bag_items")};e.prototype.EpairItem=function(g,l){GameApi.ShowScreen(!0,0,4,SELL_ITEM_TYPE)};e.prototype.clientRecvUpdateItem=function(g,l){if(""!=l)if(g_boOpenCaiji){if(-1!=l.indexOf("/")){var p=-100;g=l.split("/");g[1]&&
(p=parseInt(DecodeString(g[1])));g=fnDecode6BitBuf(g[0],g[0].length,!1);g=TClientItem(g.pszDest)}else g=fnDecode6BitBuf(l,l.length,!1),g=TClientItem(g.pszDest);l=-1;g&&(l=GameUtil.UpdateItems(g));var q="\u975e\u7ed1\u5b9a\u7269\u54c1";g.s.IsBind&&(q="\u5df2\u7ed1\u5b9a\u7269\u54c1");4==p||5==p?g_LogSocket.AddGameDataLog(p,g.s.Name,g.MakeIndex,l,q):7==p&&g_LogSocket.AddGameDataLog(p,g.s.Name,g.MakeIndex,q+"/1",l.toString())}else g=fnDecode6BitBuf(l,l.length,!1),g=TClientItem(g.pszDest),GameUtil.UpdateItems(g)};
e.prototype.setGem=function(g,l){""!=l&&(g=fnDecode6BitBuf(l,l.length,!1),(g=TClientItem(g.pszDest))&&GameUtil.UpdateItems(g))};e.prototype.boxitem=function(g,l){var p=g.record;g=g.param;if(0==p&&""==l){if(l=g_boxItemArr[g])Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,l.MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,l.MakeIndex,1);g_boxItemArr[g]=null;GameUtil.AddItemNewBag(l);Laya.stage.event("draw_npc_items",[g_boxItemArr[g],null,g])}else if(1==p&&""==l)g_boxItemArr[g]&&Sendmessage.NpcDlgOptions(G_NPC_ID,
g_npc_opt_boxid,g_boxItemArr[g].MakeIndex,1),g_boxItemArr[g]=null,Laya.stage.event("draw_npc_items",[g_boxItemArr[g],!0,g]);else if(2==p&&""!=l){l=fnDecode6BitBuf(l,l.length,!1);p=TClientItem(l.pszDest);for(l=0;l<g_boxItemArr.length;l++)g_boxItemArr[l]&&g_boxItemArr[l].MakeIndex==p.MakeIndex&&(g_boxItemArr[l]=p);Laya.stage.event("changeCountText",p)}else if(3==p&&""!=l&&(l=DecodeString(l),-1!=l.indexOf("/")&&(p=l.split("/"),2<p.length)))for(l=0;l<g_BagItemsList.length;l++)if(null!=g_BagItemsList[l]&&
g_BagItemsList[l].s.Name==p[1]){Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_BagItemsList[l].MakeIndex,0);g_npc_opt_boxid=p[0];g_boxItemArr[g_npc_opt_boxid]&&(GameUtil.AddItemNewBag(g_boxItemArr[g_npc_opt_boxid]),g_boxItemArr[g_npc_opt_boxid]&&(Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_boxItemArr[g_npc_opt_boxid].MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_boxItemArr[g_npc_opt_boxid].MakeIndex,1)),g_boxItemArr[g_npc_opt_boxid]=null,Laya.stage.event("draw_npc_items",
null));Laya.stage.event("draw_npc_items",g_BagItemsList[l]);GameUtil.DelBagItems(g_BagItemsList[l].MakeIndex);break}};e.prototype.clientRecvSendMyMagic=function(g,l){};e.prototype.clientRecvDeleteMagic=function(g){GameUtil.DelMagic(g)};e.prototype.clientRecvMagicList=function(g,l){};e.prototype.clientGetSenduseItems=function(g,l){if(g.param==l.length){GameUtil.IntUserItems(HighTUseItems);l=fnDecode6BitBuf(l,l.length,!1);l=(new Zlib.Inflate(l.pszDest)).decompress();for(var p=0,q=0;q<g.series;q++){var r=
l[p];p++;var u=GameUtil.slice(l,p,p+g_itemSize);u=TClientItem(u);p+=g_itemSize;0<=r&&r<=HighTUseItems&&(g_UserItemList[r]=u,u.tag=r,ItemMgr.getInstance().AddItemToRole(u))}}};e.prototype.clientRecvDropItemSucc=function(g,l){g=g.record;l=DecodeString(l);if(g_boOpenCaiji){var p="\u975e\u7ed1\u5b9a\u7269\u54c1";g_WaitItems.Items.s.IsBind&&(p="\u5df2\u7ed1\u5b9a\u7269\u54c1");sItemCount=0<g_WaitItems.Items.Dura?g_WaitItems.Items.Dura+1:1;g_LogSocket.AddGameDataLog(7,l,g,p+"/1",sItemCount)}null!=g_WaitItems.Items&&
g_WaitItems.Items.MakeIndex==g&&(GameUtil.isMultiple(g_WaitItems.Items)?0==g_WaitItems.Items.s.StdMode?Laya.stage.event("item_hint",[g_WaitItems.Items,-g_WaitItems.Items.Dura]):Laya.stage.event("item_hint",[g_WaitItems.Items,-g_WaitItems.Items.Dura-1]):(Laya.stage.event("item_hint",[g_WaitItems.Items,-1]),Laya.stage.event("show_bag_hint")),g_WaitItems.Items=null);ItemMgr.getInstance().DeleteItem(g);Laya.stage.event("show_bag_items");GameUtil.maxBag()||Laya.stage.event("bagMaxTip",!1)};e.prototype.clientRecvDropItemFail=
function(g,l){g=g.record;DecodeString(l);null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==g&&(GameUtil.AddItemNewBag(g_WaitItems.Items),g_WaitItems.Items=null)};e.prototype.clientRecvShowItemMsg=function(g,l){var p=DecodeString(l);""!=p&&(l=new TDropItem,l.id=g.record,l.x=g.param,l.y=g.tag,l.Looks=g.series,l.FlashTime=Math.floor(3E3*Math.random()),l.show=!0,-1!=p.indexOf("|")&&(p=p.split("|")[0]),-1!=p.indexOf(";")?(g=p.split(";"),""!=g[0]&&(p=g[0].split("/"),l.Color=parseInt(p[0]),l.Name=p[1]),
""!=g[1]&&(g=g[1].split("/"),6<g.length&&(l.DropEffectFileIndex=parseInt(g[0]),l.DropEffectStartOffSet=parseInt(g[1]),l.DropEffectImageCount=parseInt(g[2]),l.DropEffectOffsetX=parseInt(g[3]),l.DropEffectOffsetY=parseInt(g[4]),l.DropEffectFrameTime=parseInt(g[5]),l.DropEffectNormalDraw=!1,"TRUE"==g[6]&&(l.DropEffectNormalDraw=!0)))):(p=p.split("/"),l.Color=parseInt(p[0]),l.Name=p[1]),ItemMgr.getInstance().AddItemToMap(l)&&Laya.stage.event("update_map_items",[l]))};e.prototype.clientRecvHideItemMsg=
function(g,l){g=g.record;ItemMgr.getInstance().DelItemFromMap(g);g&&(l=l?parseInt(DecodeString(l)):null,Laya.stage.event("delete_map_items",[g,l&&l==playerID]))};e.prototype.MsgDepotItems=function(g,l){-1!=l.indexOf(";")&&(l=l.split(";"),g_StoreLimitCount=parseInt(l[0]),l=l[1]);if(0!=g.param||0!=g.tag||0!=g.series||0!=g.record)if(0==g.param&&0==g.tag&&0==g.series)for(var p=0;p<g_StoreItemList.length;p++){if(null!=g_StoreItemList[p]&&g_StoreItemList[p].MakeIndex==g.record){--g_StoreCount;GameUtil.AddItemNewBag(g_StoreItemList[p]);
g_StoreItemList[p]=null;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("Show_Store_Item_ico",g_StoreLimitCount);break}}else if(0==g.param&&1==g.tag&&1==g.series)if(0==g.record)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u65e0\u6cd5\u643a\u5e26\u66f4\u591a\u7269\u54c1\u4e86\u3002",callfn:function(){}}]);else for(p=0;p<g_StoreItemList.length;p++){var q=g_StoreItemList[p];if(null!=q&&q.MakeIndex==g.record){--g_StoreCount;g_StoreItemList[p]=null;GameUtil.ShowNewStore(!0,g_StoreLimitCount);
break}}else if(p=g_StoreType,g_StoreType=0!=(g.record&1073741824)?1:2,g.param==l.length){var r=0<p&&p==g_StoreType,u=g_StoreItemList,v=r?g_StoreItemList:g_otherStoreList;if(v&&0<v.length)for(q={},p=v.length-1;0<=p;p--)v[p]&&(q[v[p].MakeIndex+""]={pos:p,data:v[p]});0==(g.record>>>24&63)&&(g_StoreItemList=[]);g_StoreMaxCount=g.tag;g_StoreCount=g.series;if(""!=l){p=fnDecode6BitBuf(l,l.length,!1);g=(new Zlib.Inflate(p.pszDest)).decompress();for(p=0;p<g_StoreCount;p++)l=GameUtil.slice(g,g_itemSize*p,g_itemSize*
(p+1)),l=TClientItem(l),q&&q[l.MakeIndex+""]&&q[l.MakeIndex+""].data?g_StoreItemList[q[l.MakeIndex+""].pos]=q[l.MakeIndex+""].data:g_StoreItemList.push(l);r||(g_otherStoreList=u)}GameUtil.InstanceOfMem(NewBagUI)||GameUtil.ShowNewBag(!0);GameUtil.ShowNewStore(!0,g_StoreLimitCount)}};e.prototype.clientRecvDoorOpenOkMsg=function(g){};e.prototype.clientRecvDoorLockMsg=function(){};e.prototype.clientRecvDoorCloseMsg=function(g){};e.prototype.clientRecvTakeOnOk=function(g,l){null!=g_WaitItems.Items&&0<=
g_WaitItems.Index&&52>=g_WaitItems.Index&&(g_UserItemList[g_WaitItems.Index]=g_WaitItems.Items,g_UserItemList[g_WaitItems.Index].tag=g_WaitItems.Index,Laya.stage.event("Show_Item_ico",g_WaitItems.Index),18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress"),g_WaitItems.Items=null,GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"),GameUtil.InstanceOfMem(ShousWinUI)&&Laya.stage.event("update_shengxiao",[g_UserItemList]),GameUtil.InstanceOfMem(ShoushiUI)&&Laya.stage.event("show_shoushi_box",
[g_UserItemList]),GameApi.ShowScreen(!1),Laya.stage.event("Show_Bag_Item_ico"),GameUtil.SendAutoItemList(g.record))};e.prototype.clientRecvTakeFailMsg=function(g,l){null!=g_WaitItems.Items&&52!=g_WaitItems.Index&&(1E4!=g.tag&&GameUtil.AddItemNewBag(g_WaitItems.Items),18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress"),Laya.stage.event("Show_Item_ico",-1),g_WaitItems.Items=null,GameUtil.SendAutoItemList(g.record));52!=g_WaitItems.Index&&Laya.stage.event("show_log",[{txt:"\u7a7f\u6234\u5931\u8d25",
color:"#ff0000"}])};e.prototype.ChangeUseDura=function(g,l){null!=g_UserItemList[U_RIGHTHAND]&&(g_UserItemList[U_RIGHTHAND].Dura=g.record)};e.prototype.ChangeItemDura=function(g,l){GameUtil.UpdateUserItemsForIdx(g.param,g.record,CodeUtil._MAKELONG(g.tag,g.series))};e.prototype.clientRecvTakeOffMsg=function(g,l){null!=g_UserItemList[g.param-1]&&(g_WaitItems.Items=g_UserItemList[g.param-1],g_WaitItems.Index=g.param-1);null!=g_WaitItems.Items&&(g_UserItemList[g_WaitItems.Index]=null,Laya.stage.event("Show_Item_ico",
g_WaitItems.Index),18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress"),4==g_WaitItems.Index&&Laya.stage.event("Show_Item_ico",13),Animationmodule.removeAniname("bodyeffect"+g_WaitItems.Items.MakeIndex),g_WaitItems.Items=null,GameUtil.InstanceOfMem(ShousWinUI)&&Laya.stage.event("update_shengxiao",[g_UserItemList]),GameUtil.InstanceOfMem(ShoushiUI)&&Laya.stage.event("show_shoushi_box",[g_UserItemList]))};e.prototype.clientRecvTakeOffFail=function(g,l){fnDecode6BitBuf(l);
18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress");Laya.stage.event("show_log",[{txt:"\u8131\u7269\u54c1\u5931\u8d25",color:"#ff0000"}]);Laya.stage.event("show_bag_items")};e.prototype.open2Dialog=function(g,l){this.UpGlobaInf(l);l=DecodeString(l);if(rw_recog==g.record){l=l.split("\r");var p=l[0];"@\u6ca1\u6709\u4efb\u52a1"==p&&(p="@\u6210\u957f\u4efb\u52a1");for(var q=0;q<g_MissCaptionList.length;q++)if(""!=p&&p.toLowerCase()=="@"+g_MissCaptionList[q].sTabName){10!=
g.tag&&11!=g.tag||GameMission.GetMissStringArray(q,l[1],g.tag);break}10!=g.tag&&11!=g.tag||GameMission.GetMissStringInfo(p,l[1],g.tag)}else g=g.record,G_NPC_ID==g?g_NpcShowtxt!=l&&GameApi.ShowNewNpcDlgEx(!0):GameApi.ShowNewNpcDlgEx(!1),g_NpcShowtxt=l,G_NPC_ID=g,g=l.split("\r"),1<g.length?(l=g[1].replace(/\u3000/gmi,"  "),Laya.stage.event("Show_NewNpc",[l])):Laya.stage.event("Show_NewNpc",[g[0]])};e.prototype.openDialog=function(g,l){if(0==g.tag)for(this.UpGlobaInf(l),l=DecodeString(l),rw_recog=g.record,
""==l&&(l="\u6210\u957f\u4efb\u52a1\r\n\u65e5\u5e38\u4efb\u52a1\r\n\u6bcf\u65e5\u4efb\u52a1\r\n\u8282\u65e5\u4efb\u52a1\r\n\u5176\u4ed6\u4efb\u52a1\r\n"),g=l.split("\r\n"),g_MissCaptionList=[],l=0;l<g.length;l++){if(""!=g[l]){var p=[];p.sTabName=g[l];p.sShowtxt="";p.sList=[];g_MissCaptionList.push(p)}}else if(11==g.tag)for(l=0;l<g_MissCaptionList.length;l++)""!=g_MissCaptionList[l].sTabName&&Sendmessage.gettmissitem(rw_recog,10,"@"+g_MissCaptionList[l].sTabName)};e.prototype.CreateTeamFaild=function(g,
l){Laya.stage.event("createTeam_faild",[g,l])};e.prototype.CreateTeamOk=function(g,l){Laya.stage.event("createTeam_Ok",[g,l])};e.prototype.setTeamGroupList=function(g,l){g=DecodeString(l).split("/");RelationManager.getInstance().teamGropList=[];this.pushDecodeDataInTeamGroupList(g);Laya.stage.event("updateTeamList")};e.prototype.pushDecodeDataInTeamGroupList=function(g){for(var l,p=0;p<g.length;p++)g[p]&&""!=g&&(l=g[p].split(";"),RelationManager.getInstance().teamGropList.push({name:l[0],level:l[1],
job:GameUtil.getJobName(parseInt(l[3])),guildName:l[4],mapName:l[6],captain:l[5],gender:l[2]?"\u5973":"\u7537",teamPlayerNums:l[7]}))};e.prototype.nearTeamListHandle=function(g,l){g=[];for(var p=RelationManager.getInstance().t_nearTeamList=[],q=DecodeString(l).split("/"),r=0;r<q.length;r++)q[r]&&""!=q[r]&&(l=q[r].split(";"),!l||1>l.length||1>l[1]||-1<g.indexOf(l[0])||(g.push(l[0]),p.push({teamName:l[0],teamNums:l[1],captainTeamName:l[2]})));Laya.stage.event("updateTeamList")};e.prototype.applyTeamHandle=
function(g,l){g.record=1;g=DecodeString(l).split(";");RelationManager.getInstance().t_applyTeamList.push({name:g[0],level:g[1],job:g[2],guildName:g[3]});Laya.stage.event("redHintCheck",["team"])};e.prototype.applyTeamFail=function(g,l){switch(g.record){case -1:GameUtil.onShowTip("\u5df2\u7ecf\u62e5\u6709\u961f\u4f0d");break;case -2:GameUtil.onShowTip("\u7533\u8bf7\u7684\u961f\u4f0d\u4e0d\u5b58");break;case -3:GameUtil.onShowTip("\u5df2\u7ecf\u88ab\u5bf9\u65b9\u961f\u957f\u5217\u5165\u9ed1\u540d\u5355");
break;case -4:GameUtil.onShowTip("\u961f\u4f0d\u5df2\u6ee1\u5458");break;case -5:GameUtil.onShowTip("\u5df2\u7ecf\u5728\u6b64\u961f\u4f0d\u7533\u8bf7\u540d\u5355\u4e2d")}};e.prototype.acceptTeamFail=function(g,l){g.record=-1;GameUtil.onShowTip("\u63a5\u53d7\u8005\u6ca1\u6709\u961f\u4f0d")};e.prototype.DeleteTeamGroupItemFaild=function(g,l){Laya.stage.event("show_log",[{txt:"\u6743\u9650\u4e0d\u591f",color:"#ff0000"}])};e.prototype.DeleteTeamGroupItemOk=function(g,l){Laya.stage.event("updateTeamList")};
e.prototype.ChangeTeamGroupState=function(g,l){G_BaseSetList[0].val=G_BaseSetList[0].val?!1:!0;Laya.stage.event("updateTeamList")};e.prototype.AddTeamMemberFaild=function(g,l){-1==g.record?Laya.stage.event("show_log",[{txt:"\u7f16\u7ec4\u8fd8\u672a\u6210\u7acb\u6216\u8005\u4f60\u8fd8\u4e0d\u591f\u7b49\u7ea7",color:"#ff0000"}]):-2==g.record?Laya.stage.event("show_log",[{txt:"\u60a8\u8f93\u5165\u7684\u4eba\u7269\u540d\u79f0\u4e0d\u6b63\u786e",color:"#ff0000"}]):-3==g.record?Laya.stage.event("show_log",
[{txt:"\u5df2\u7ecf\u52a0\u5165\u7f16\u7ec4",color:"#ff0000"}]):-4==g.record?Laya.stage.event("show_log",[{txt:"\u5bf9\u65b9\u4e0d\u5141\u8bb8\u7f16\u7ec4",color:"#ff0000"}]):-5==g.record?Laya.stage.event("show_log",[{txt:"\u60a8\u9080\u8bf7\u52a0\u5165\u7f16\u7ec4\u7684\u4eba\u5df2\u7ecf\u52a0\u5165\u5176\u5b83\u7ec4",color:"#ff0000"}]):-6==g.record&&Laya.stage.event("show_log",[{txt:"\u4e0d\u540c\u56fd\u5bb6\u7981\u6b62\u7ec4\u961f",color:"#ff0000"}]);Laya.stage.event("addTeamGroup_faild",[g,l])};
e.prototype.AddTeamMemberOk=function(g,l){Laya.stage.event("updateTeamList")};e.prototype.ClearTeamGroupList=function(g,l){Laya.stage.event("clear_team",[g,l])};e.prototype.updateRoleBaseAttri=function(g,l){if(""!=l){g_nBonusPoint=g.record;var p=l.split("/");g=fnDecode6BitBuf(p[0],p[0].length);l=fnDecode6BitBuf(p[1],p[1].length);p=fnDecode6BitBuf(p[2],p[2].length);g_BonusTick=TNakedAbility(g.pszDest);g_BonusAbil=TNakedAbility(l.pszDest);g_NakedAbil=TNakedAbility(p.pszDest);g=[];for(l=0;60>l;l++)g.push(0);
g_BonusAbilChg=TNakedAbility(g);Laya.stage.event("showbonus",[0<g_nBonusPoint])}};e.prototype.GiftItemFailed=function(g,l){(l=ItemMgr.getInstance().LastShopItem)&&ItemMgr.getInstance().DeleteItem(l.MakeIndex);-1==g.record?Laya.stage.event("show_log",[{txt:"\u8be5\u7269\u54c1\u4e0d\u5b58\u5728",color:"#ff0000"}]):-3==g.record?Laya.stage.event("show_log",[{txt:"\u5bf9\u65b9\u7684\u5305\u88f9\u5df2\u6ee1\u6216\u8005\u8f93\u5165\u7684\u7528\u6237\u540d\u4e0d\u6b63\u786e\u6216\u8005\u5bf9\u65b9\u4e0d\u5728\u7ebf",
color:"#ff0000"}]):-5==g.record?Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u670d\u52a1\u5668\u4e0d\u5141\u8bb8\u8d60\u9001\u7269\u54c1\u6216\u8005\u8d60\u9001\u529f\u80fd\u6ca1\u5f00\u542f",color:"#ff0000"}]):-2==g.record&&Laya.stage.event("show_log",[{txt:"\u91d1\u989d\u4e0d\u8db3",color:"#ff0000"}])};e.prototype.BuyShopItemFailed=function(g,l){(l=ItemMgr.getInstance().LastShopItem)&&ItemMgr.getInstance().DeleteItem(l.MakeIndex);-1==g.record?Laya.stage.event("show_log",[{txt:"\u8be5\u7269\u54c1\u4e0d\u5b58\u5728",
color:"#ff0000"}]):-3==g.record?Laya.stage.event("show_log",[{txt:"\u4f60\u7684\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]):-4==g.record?Laya.stage.event("show_log",[{txt:"\u4f60\u7684\u5305\u88f9\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u5b58\u653e\u8d2d\u4e70\u7684\u7269\u54c1",color:"#ff0000"}]):-2==g.record&&Laya.stage.event("show_log",[{txt:"\u91d1\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8d2d\u4e70\u3002",color:"#ff0000"}])};e.prototype.ShopItemList=function(g,l){var p=CodeUtil._LOBYTE(g.record);
CodeUtil._HIBYTE(g.record);l=fnDecode6BitBuf(l,l.length,!1);l=(new Zlib.Inflate(l.pszDest)).decompress();var q=!1;5!=g.param?(G_Cur_Shop_Page=Math.ceil(g.tag/10),G_Total_Shop_Page=Math.ceil(g.series/10),q=!0,ItemMgr.getInstance().ShopItemList=[],Laya.stage.event("UpDown")):ItemMgr.getInstance().StrageList=[];for(var r=0;r<p;r++){var u=GameUtil.slice(l,440*r,440*(r+1));u=TShopClientItem(u);100<u.s.Need&&105>u.s.Need&&(u.s.NeedLevel*=60);5!=g.param?ItemMgr.getInstance().ShopItemList.push(u):ItemMgr.getInstance().StrageList.push(u)}Laya.stage.event("update_items",
[q])};e.prototype.AddMagicToRole=function(g,l){g=fnDecode6BitBuf(l,l.length,!1);g=TClientMagic(g.pszDest);GameUtil.AddMagic(g);Laya.stage.event("update_autoSkill");if(g.Def&&"\u57fa\u672c\u5251\u672f"!=g.Def.sMagicName&&"\u653b\u6740\u5251\u672f"!=g.Def.sMagicName&&"\u7cbe\u795e\u529b\u6218\u6cd5"!=g.Def.sMagicName&&"\u62a4\u4f53\u795e\u76fe"!=g.Def.sMagicName)for(1E3<=g.Def.wMagicId&&1500>=g.Def.wMagicId?Skillmodule.findCustomSkill(g.Def.wMagicId,g.Level):(l=g.Def.btEffect,38==g.Def.wMagicId&&(l=
4),46==g.Def.wMagicId&&(l=42),39==g.Def.wMagicId&&(l=0),GameUtil.getFile(2*l)),l=0;l<g_SetupMagicList.length;l++)if(null==g_SetupMagicList[l]){g_SetupMagicList[l]=g;GameApi.SetSkillKey(g_SetupMagicList[l].Def.wMagicId,l+49);Laya.stage.event("Magic_Refresh");Laya.stage.event("update_icon",l);break}};e.prototype.SelfMagicData=function(g,l){var p=g.series,q=g.record;if(g.param==l.length){g=fnDecode6BitBuf(l,l.length,!1);g=(new Zlib.Inflate(g.pszDest)).decompress();g_UserMagicList=[];for(l=0;l<p;l++){if(1==
q){var r=GameUtil.slice(g,168*l,168*(l+1)),u=TClientMagic(r);u.btStrengLevel=0}else r=GameUtil.slice(g,172*l,172*(l+1)),u=TClientMagic(r),u.btStrengLevel=r[168];49<=u.Key&&(g_SetupMagicList[u.Key-49]=u);g_UserMagicList.push(u)}null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);Laya.stage.event("update_icon");Laya.stage.event("update_autoSkill")}};e.prototype.guildMemberList=function(g,l){g=DecodeString(l).split("/");var p=[];
for(l=0;l<g.length;)0==g[l].indexOf("*")?G_Guald_Title_List.push(g[l]):0>g[l].indexOf("#")?(p.push(g[l]),l<g.length-1?0==g[l+1].indexOf("#")&&G_Guald_User_List.push(p):l==g.length&&G_Guald_User_List.push(p)):0==g[l].indexOf("#")&&(p=[]),l++;Laya.stage.event("update_guald_user")};e.prototype.GuildFialdFail=function(g,l){l="";switch(g.record){case -1:l="\u89e3\u9664\u7ed3\u76df";break;case -2:l="\u6b64\u884c\u4f1a\u4e0d\u662f\u60a8\u884c\u4f1a\u7684\u7ed3\u76df\u884c\u4f1a";break;case -3:l="\u6ca1\u6709\u6b64\u884c\u4f1a"}""!=
l&&Laya.stage.event("show_alert_dlg",[{type:1,txt:l,color:"#ff0000"}])};e.prototype.openGuildDlg=function(g,l){0==g.record&&66==g.param&&1==g.tag&&99==g.series&&(Laya.stage.event("VOICE_EVENT",["onexitroom"]),Laya.stage.event("remove_hanghui_dlg"),G_Guild_Name="");if(1==g.tag){var p=DecodeString(l);if(99!=g.series){if(0==g.series){G_Guald_Notice_List=[];var q=p.split(";");G_Guild_Name=q[0];G_Guald_OnlineCount=parseInt(q[1]);G_Guald_NowCount=parseInt(q[2]);G_Guald_MaxCount=parseInt(q[3]);G_Guald_Can_Lianmeng=
parseInt(q[4]);G_Guald_Admin=g.record;G_Guald_Admin_Name=q[5];G_Guald_Notice_List=q[6];G_Guald_Last_Name="";Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui"}]);Laya.stage.event("update_guild_info")}if(1==g.series){G_Guald_Title_List=[];G_Guald_User_List=[];q=p.split(";");for(i=0;i<q.length;i++){var r=q[i].split(",");G_Guald_Title_List.push(q[i]);var u=[];for(k=3;k<r.length;k++)""!=r[k]&&u.push(r[k]);G_Guald_User_List.push(u)}Laya.stage.event("update_guald_user");Laya.stage.event("update_guald_title")}if(2==
g.series){q=p.split(";");for(k=3;k<q.length;k++)q[k].split(",");Laya.stage.event("upadte_applyList",[p])}3==g.series&&(G_WaiJiaoStr=p,Laya.stage.event("updata_relationList"));if(4==g.series||5==g.series)l=fnDecode6BitBuf(l,g.record,!1),l=(new Zlib.Inflate(l.pszDest)).decompress(),4==g.series?(g_guildEventInfo=[],1==g.param?g_guildEventInfo.unshift(TGuildEventInfo(l,g.param)):g_guildEventInfo=TGuildEventInfo(l,g.param).reverse()):5==g.series&&g_guildEventInfo.unshift(TGuildEventInfo(l,g.param)),Laya.stage.event("update_guild_chat");
Laya.stage.event("update_gulad",[!0])}Laya.stage.event("hide_guild_world")}else 2==g.tag&&0==g.series?(1!=g.param?Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui_world"}]):Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui"}]),p=DecodeString(l),g=p.split(";"),G_Guald_HangHui_World_List=g.splice(0,g.length-1),G_Guald_Last_Name=g[g.length-1].split("/")[1],Laya.stage.event("update_world_list")):3==g.tag&&((g=GameUtil.InstanceOfMem(HangHui21UI))&&0!=g.visible||Laya.stage.event("redHintCheck",["guild"]))};
e.prototype.GuildOptFaild=function(g,l){var p="";switch(g.param){case 0:switch(g.record){case -1:p="\u4f60\u65e0\u6b64\u6743\u9650!";break;case -2:p="\u7ed3\u76df\u5931\u8d25\uff01";break;case -3:p="\u884c\u4f1a\u7ed3\u76df\u5fc5\u987b\u53cc\u65b9\u638c\u95e8\u4eba\u9762\u5bf9\u9762\uff01";break;case -4:p="\u5bf9\u65b9\u884c\u4f1a\u638c\u95e8\u4eba\u4e0d\u5141\u8bb8\u7ed3\u76df\uff01";break;case -5:p="\u884c\u4f1a"+DecodeString(l)+"\u4e0d\u5b58\u5728!"}break;case 1:switch(g.record){case -1:p="\u5ba3\u6218\u5931\u8d25,\u8bf7\u786e\u5b9a"+
DecodeString(l)+"\u4e0d\u662f\u76df\u53cb";break;case -3:p="\u60a8\u65e0\u6b64\u6743\u9650\uff01";break;case -2:p="\u5df2\u7ecf\u5ba3\u6218\uff01";break;case -4:p="\u4f60\u6ca1\u6709\u8db3\u591f\u7684\u91d1\u5e01\uff01";break;case -5:p="\u884c\u4f1a"+DecodeString(l)+"\u4e0d\u5b58\u5728!"}break;case 2:p=0==g.record?"\u884c\u4f1a"+DecodeString(l)+"\u5173\u6ce8\u6210\u529f!":"\u884c\u4f1a"+DecodeString(l)+"\u5df2\u7ecf\u5173\u6ce8\uff01";break;case 3:p=0==g.record?"\u884c\u4f1a"+DecodeString(l)+"\u53d6\u6d88\u5173\u6ce8\u6210\u529f":
"\u884c\u4f1a"+DecodeString(l)+"\u672a\u5173\u6ce8";break;case 4:p=0==g.record?"\u884c\u4f1a"+DecodeString(l)+"\u53d6\u6d88\u5173\u6ce8\u6210\u529f":"\u8c03\u6574\u5931\u8d25\uff01";break;case 7:switch(g.record){case -6:p="\u4f60\u4e0d\u662f\u6b63\u4f1a\u957f,\u8f6c\u8ba9\u5931\u8d25";break;case -5:p=DecodeString(l)+"\u53d6\u6d88\u5173\u6ce8\u6210\u529f";break;default:p="\u8f6c\u8ba9\u5931\u8d25\uff01"}break;case 8:0!=g.record&&(p="\u5378\u4efb\u5931\u8d25")}""!=p&&Laya.stage.event("show_alert_dlg",
[{type:1,txt:p,color:"#ff0000"}])};e.prototype.OpenGuildInfo=function(g,l){G_Guald_Info=DecodeString(l)};e.prototype.LookAtUserState=function(g,l){g.param==l.length&&(l=fnDecode6BitBuf(l,l.length,!1),l=(new Zlib.Inflate(l.pszDest)).decompress(),l=TUserStateInfo(l),0==g.series?GameApi.ShowLookHum(!0,l):1==g.series&&Laya.stage.event("updateRankRole",l))};e.prototype.onFriendOption=function(g,l){Laya.stage.event("friend_info_handle",[g,l])};e.prototype.FriendOption=function(g,l){if(0==g.record){if(""!=
l&&(l=DecodeString(l),-1!=l.indexOf("|"))){g=l.split("|");G_Friend_List=[];for(var p=0;p<g.length;p++)""!=g[p]&&-1!=g[p].indexOf(",")&&""!=g[p].split(",")[0]&&(Sendmessage.FriendInfo(g[p].split(",")[0]),G_Friend_List.push(g[p]),g_H_List.push(g[p]),G_Friend_RedPack_List.push(g[p]))}}else if(1==g.record)if(0==g.tag||1==g.tag){if(0==G_Friend_Option_Type){var q=[];for(p=0;p<l.length;p++){var r=l.charCodeAt(p);q.push(r)}l=gbkByteArr2UcsStr(q);G_Friend_List.push(l);Sendmessage.FriendInfo(l)}else 1==G_Friend_Option_Type?
G_Friend_HMD_List.push(l):G_Friend_Target_List.push(l);GameUtil.InstanceOfMem(FriendUI)&&Laya.stage.event("friendRequest")}else if(2==g.tag)Laya.stage.event("show_log",[{txt:"\u597d\u53cb\u5217\u8868\u5df2\u6ee1",color:"#ff0000"}]);else if(3==g.tag)Laya.stage.event("show_log",[{txt:"\u540d\u79f0\u5df2\u7ecf\u5b58\u5728\u597d\u53cb\u5217\u8868\u4e2d, \u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0!",color:"#ff0000"}]);else if(4==g.tag)Laya.stage.event("show_log",[{txt:"\u540d\u79f0\u4e0d\u5b58\u5728\u6216\u8005\u4e0d\u5728\u7ebf!",
color:"#ff0000"}]);else if(5==g.tag)Laya.stage.event("show_log",[{txt:"\u4e0d\u80fd\u628a\u81ea\u5df1\u52a0\u4e3a\u597d\u53cb!",color:"#ff0000"}]);else if(10==g.tag){q=[];for(p=0;p<l.length;p++)r=l.charCodeAt(p),q.push(r);l=gbkByteArr2UcsStr(q);g_hintAnime.friend=l;g_friend_request.push(l);(g=GameUtil.InstanceOfMem(FriendUI))&&0!=g.visible?Laya.stage.event("friendRequest"):Laya.stage.event("redHintCheck",["friend"])}else{if(11==g.tag){q=[];for(p=0;p<l.length;p++)r=l.charCodeAt(p),q.push(r);l=gbkByteArr2UcsStr(q);
Laya.stage.event("show_log",[{txt:l+"\u5df2\u52a0\u4f60\u4e3a\u597d\u53cb!",color:"#ff0000"}])}}else if(2==g.record){if(1==g.tag){g=0==G_Friend_Option_Type?G_Friend_List:1==G_Friend_Option_Type?G_Friend_HMD_List:G_Friend_Target_List;q=[];for(p=0;p<l.length;p++)r=l.charCodeAt(p),q.push(r);l=gbkByteArr2UcsStr(q);for(p=0;p<g.length;p++)if(q=g[p].indexOf(":"),q=g[p].slice(0,q),g[p]==l||q==l)delete g[p],g.splice(p,1)}else Laya.stage.event("show_log",[{txt:"\u5220\u9664\u597d\u53cb\u64cd\u4f5c\u5931\u8d25!",
color:"#ff0000"}]);Laya.stage.event("update_friend_list")}else if(3==g.record){q=[];for(p=0;p<l.length;p++)r=l.charCodeAt(p),q.push(r);l=gbkByteArr2UcsStr(q);if(0==g.tag)for(p=0;p<g_H_List.length;p++){if(""!=g_H_List[p]&&g_H_List[p]==l+",1"){g_H_List.splice(p,1);break}}else Sendmessage.FriendInfo(l);for(p=0;p<G_Friend_List.length;p++)q=G_Friend_List[p].split(":")[0],q==l&&(G_Friend_List[p]=0==g.tag?l+":- -:- -:- -":l+",1");for(p=0;p<G_Friend_RedPack_List.length;p++)q=G_Friend_RedPack_List[p].split(",")[0],
q==l&&(G_Friend_RedPack_List[p]=0==g.tag?l+",0":l+",1")}Laya.stage.event("update_friend_list")};e.prototype.onFriendInfo=function(g,l){g=zDecodeString(l);Laya.stage.event("update_friend_info",[g])};e.prototype.FriendInfo=function(g,l){g=zDecodeString(l);Laya.stage.event("update_friend_info",[g])};e.prototype.UpdateMagicData=function(g,l){l=g.record;var p=CodeUtil._LOBYTE(g.param),q=CodeUtil._HIBYTE(g.param);g=CodeUtil._MAKELONG(g.tag,g.series);GameUtil.UpdateMagicLvExp(l,p,g,q)};e.prototype.GetLegTZList=
function(g,l){0==g.record&&0<l.length&&0<g_LegTzItemList.length&&(g_LegTzItemList=[]);if(g.param==l.length&&0!=l.length){l=fnDecode6BitBuf(l,l.length,!1);l=(new Zlib.Inflate(l.pszDest)).decompress();for(var p=0;p<g.series;p++){var q=GameUtil.slice(l,528*p,528*(p+1));q=new TLEGTzInfo(q);g_LegTzItemList.push(q)}}};e.prototype.MagicStaticList=function(g,l){};e.prototype.GetNpcWindows=function(g,l){var p=DecodeString(l);l=CodeUtil._LOWORD(g.record);var q=CodeUtil._HIWORD(g.record);32767<=q&&(q-=65536);
32767<=l&&(l-=65536);var r=g.tag,u=CodeUtil._HIBYTE(g.series);g_npcCanMove=1==CodeUtil._LOBYTE(g.series)?!0:!1;p=p.split("/");var v=[],w;if(p[4]){if(-1!=p[4].indexOf(":")){var z=p[4].split(":");void 0!=z[2]&&null!=z[2]?w=[parseInt(z[2]),parseInt(z[3])]:v=[z[0].tempData[1]]}}else v.push(p[0]),v.push(p[1]);testNpc_X=parseInt(p[0]);testNpc_Y=parseInt(p[1]);if(z=GameUtil.InstanceOfMem(NewNpcWinUI))for(var A=!0,C=0;C<g_boxItemArr.length;C++)if(g_boxItemArr[C]){A&&(Sendmessage.NpcDlgOptions(null,null,null,
3),A=!1);var B=g_boxItemArr[C];g_boxItemArr[C]=null;GameUtil.AddItemNewBag(B)}GameApi.ShowNewNpcDlgEx(!1);Laya.stage.event("Change_bg",[p[2],g.param,v,z?!1:!0,w]);g_Changerpak=parseInt(p[2]);g_ChangerIndex=parseInt(g.param);Laya.stage.event("Change_pos",[r,l,q,u])};e.prototype.GetPakList=function(g,l){if(g.param==l.length)for((g=zDecodeString(l))&&(g_pak_list=g.split("\r\n")),g=0;g<g_pak_list.length;g++)g_pak_list[g]&&(l=g_pak_list[g].split("."),g_pak_list[g]=l[0].toLowerCase())};e.prototype.GetUserBuffBut=
function(g,l){Laya.stage.event("UPDATEBUFFER",[l])};e.prototype.ShowMessageDLG=function(g,l){if(""!==l){var p=DecodeString(l).split("\r\n"),q=CodeUtil._MAKELONG(g.param,g.tag);0==g.series?(g=0,null==p[1]?g=7:g=2,l=p[0].replace(/\\/g,"\r\n"),Laya.stage.event("show_alert_dlg",[{type:g,txt:l,callfn:function(){p[1]&&Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,q,0,0,0,p[1])},callcancelfun:function(){p[2]&&Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,q,0,0,0,p[2])}}])):""!=p[0]&&(g=p[0].split("\\"),2<g.length?
(l=function(r){Sendmessage.SendNpcCMD(p[1]+"\r"+r,q,0)},Laya.stage.event("show_alert_dlg",[{type:4,txt:g[2]+"("+g[0]+")",ipttype:"string",callfn:l}])):(l=function(r){Sendmessage.SendNpcCMD(p[1]+"\r"+r,q,0)},Laya.stage.event("show_alert_dlg",[{type:4,txt:g[0],ipttype:"string",callfn:l}])))}};e.prototype.GetRedPack=function(g,l){l=DecodeString(l).split("/");var p={};GameUtil.InstanceOfMem(RedPakUI)||Laya.stage.event("redHintCheck",["red"]);p.sUserName=l[3];p.nGoldNum=parseInt(l[4]);p.nRedPacketCount=
0;p.nGoldType=parseInt(l[5]);switch(parseInt(l[5])){case 0:var q=3;break;case 1:q=1;break;case 2:q=5;break;case 3:q=6;break;case 4:q=7;break;case 5:q=8}p.finialMoneyType=q;p.nType=parseInt(l[2]);p.nRedRecog=parseInt(g.record);p.OpenRedPacket={};for(g=0;100>g;g++)p.OpenRedPacket[g]=TOpenRedPacket,p.OpenRedPacket[g].sUserName="";p.nGoldBalance=0;p.nRandomGold=0;p.nRedPacketTime=l[0];p.sRedPacketTime=l[1];p.sMsg=l[6];p.ownerJob=l[7];p.ownerGender=l[8];p.redPackNum=l[9];p.bOpened=!1;g_RedPack_List.push(p);
50<g_RedPack_List.length&&g_RedPack_List.shift();g="";switch(p.nType){case 0,2:g="\u6709\u4e00\u5927\u6ce2\u7ea2\u5305\u6765\u88ad\uff0c\u8d76\u7d27\u53bb\u62a2\uff0c\u62a2\u5b8c\u5373\u6b62\u5566!";break;case 1:g="\u8d76\u7d27\u731b\u6233, \u7ea2\u5305\u6709\u9650\u624b\u6162\u65e0\u554a!!";break;case 3:g=l[3]+" \u571f\u8c6a\u73a9\u5bb6, \u53d1\u51fa\u5168\u670d\u7ea2\u5305, \u8d76\u7d27\u6765\u62a2";break;case 4:g="\u6709\u4e00\u5927\u6ce2\u7ea2\u5305\u6765\u88ad\uff0c\u8d76\u7d27\u53bb\u62a2\uff0c\u62a2\u5b8c\u5373\u6b62\u5566!";
break;default:str=l[3]+"\u53d1\u7ea2\u5305\u4e86, \u8d76\u7d27\u62a2\u5440!"}Laya.stage.event("new_chat_msg",[{info:g,front:218,bg:0,type:0}]);Laya.stage.event("main_GetRedPackList")};e.prototype.GetRedPackinf=function(g,l){g=decryStringK(l,mac_key);8==(g[0]&15)&&(g=(new Zlib.Inflate(g)).decompress(),g=new TRedPacketInfo(g),this.UpdateRedPackinf(g))};e.prototype.UpdateRedPackinf=function(g){for(var l=!1,p=0;p<g_RedPack_List.length;p++)if(g_RedPack_List[p].nRedRecog==g.nRedRecog){OpenRed=g_RedPack_List[p].bOpened;
g.sMsg=g_RedPack_List[p].sMsg;g_RedPack_List[p]=g;g_RedPack_List[p].bOpened=OpenRed?!0:!1;l=!0;break}if(l&&g_RedPackOpen==g.nRedRecog){Laya.stage.event("send_GetRedPackList");Laya.stage.event("main_GetRedPackList");l=ObjectManage.findobject(playerID);var q=0,r=!1,u=0,v=GameUtil.getPureName(l);for(p=0;p<g.OpenRedPacket.length;p++){var w=g.OpenRedPacket[p];""!=w.sUserName&&q++;l&&l.txt_name&&w.sUserName==v&&(r=!0,u=w.nGoldValue)}!r&&q>=g.nRedPacketCount&&0>l.txt_name.text.indexOf(g.sUserName)?Laya.stage.event("show_log",
[{txt:"\u624b\u592a\u6162\uff0c\u7ea2\u5305\u5df2\u6d3e\u9001\u5b8c",color:"#ff0000"}]):(openRed||r&&1==q)&&Laya.stage.event("openRedPack",u);openRed=!1}};e.prototype.UpGlobaInf=function(g){g=DecodeString(g);if(-1!=g.toUpperCase().indexOf("{#NEW"))for(var l=g.match(new RegExp(/[^{]+?(?=\})/g)),p=0;p<l.length;p++){g=g.replace("{"+l[p]+"}","&&");var q=l[p].split(")"),r=q[0].split("(");""!=r[1]&&(q=q[1],""!=q&&(g=g.replace("&&",q),GameUtil.GetMissGloba(r[1],q,1),Laya.stage.event("UPDATETASK",[g_sStrMissNv])))}return"0"!=
g&&-1==g.indexOf("222")?g:""};e.prototype.QueryShop=function(g,l){G_Cur_Store_Page=g.param;G_Total_Store_num=g.record;GameUtil.ShowPersonalStore(!0);g=l.split("/");l=[];for(var p=0;p<g.length;p++)if(g[p]&&""!=g[p]){var q=fnDecode6BitBuf(g[p],g[p].length);q=TClientUserShop(q.pszDest);l.push(q)}l&&(Laya.stage.event("game_show_PersonalStore",[l]),Laya.stage.event("game_show_Page",[G_Total_Store_num,G_Cur_Store_Page,8]))};e.prototype.SearchShopItems=function(g,l){G_Cur_Item_Page=g.param;G_Total_Item_num=
g.record;g=l.split("/");l=[];for(var p=0;p<g.length;p++)if(g[p]&&""!=g[p]){var q=fnDecode6BitBuf(g[p],g[p].length);q=TClientUserShopItem(q.pszDest);l.push(q)}l&&(Laya.stage.event("game_show_PersonalItems",[l]),Laya.stage.event("game_show_Page",[G_Total_Item_num,G_Cur_Item_Page,5]))};e.prototype.QueryUserShopItems=function(g,l){G_Total_Item_num=g.record;G_Cur_Item_Page=g.param;GameUtil.ShowStore(!0);g=l.split("/");l=[];for(var p=0;p<g.length;p++)if(g[p]&&""!=g[p]){var q=fnDecode6BitBuf(g[p],g[p].length);
q=TClientUserShopItem(q.pszDest);l.push(q)}l&&(Laya.stage.event("game_show_storeItem",[l]),Laya.stage.event("game_show_showStorePage",[G_Total_Item_num,G_Cur_Item_Page,5]))};e.prototype.SendBuyUserShopItemOk=function(g,l){};e.prototype.SendBuyUserShopItemFail=function(g,l){0>g.record&&(-2==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u5df2\u7ecf\u5220\u9664\uff01",callfn:function(){}}]):-3==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u5df2\u7ecf\u51fa\u552e\uff01",
callfn:function(){}}]):-4==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u51fa\u552e\uff01",callfn:function(){}}]):-5==g.record?0==g.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_GameGoldNum.key+"\u4e0d\u591f",callfn:function(){}}]):1==g.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_GamePointNum.key+"\u4e0d\u591f",callfn:function(){}}]):2==g.param?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_GameCionNum.key+"\u4e0d\u591f",callfn:function(){}}]):3==g.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_nGameDiamond.key+"\u4e0d\u591f",callfn:function(){}}]):4==g.param&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_nGameGird.key+"\u4e0d\u591f",callfn:function(){}}]):-6==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u7684\u5305\u88f9\u5df2\u6ee1\uff01",callfn:function(){}}]):
-7==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u7528\u6237\u4e0d\u5728\u7ebf\u65e0\u6cd5\u8d2d\u4e70\uff01",callfn:function(){}}]):-10==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u672a\u77e5\u9519\u8bef\uff0c\u8be5\u7269\u54c1\u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u8bf7\u70b9\u51fb\u4e0b\u9762\u7684\u201c\u641c\u7d22\u201d\u91cd\u65b0\u5237\u65b0\u4e00\u4e0b\uff01",
callfn:function(){}}]))};e.prototype.SendMoveMyShopItemOk=function(g,l){Laya.stage.event("delete_ItemImage");SelectedStoreItem=null};e.prototype.SendMoveMyShopItemFail=function(g,l){l=g.param;0>g.record&&(-1==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u8bf7\u7a0d\u540e\u5728\u8bd5\uff01",callfn:function(){}}]):-3==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u4f60\u8fd8\u6ca1\u6709\u5e97\u94fa\uff01",
callfn:function(){}}]):-4==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u4ea4\u6613\uff01",callfn:function(){}}]):-5==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u52a0\u5165\u5e97\u94fa\u7684\u7269\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0\uff01",callfn:function(){}}]):-6==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u5b58\u4ed3\u5e93\uff01",
callfn:function(){}}]):-7==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u5305\u88f9\u5df2\u6ee1\uff0c\u65e0\u6cd5\u53d6\u56de\uff01",callfn:function(){}}]):-8==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u53ea\u80fd\u540c\u65f6\u51fa\u552e"+l+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-9==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u4f60\u7684\u4ed3\u5e93\u53ea\u80fd\u5b58\u653e"+l+"\u4e2a\u7269\u54c1",
callfn:function(){}}]):-10==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u672a\u77e5\u9519\u8bef\uff0c\u8be5\u7269\u54c1\u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u8bf7\u70b9\u51fb\u4e0b\u9762\u7684\u201c\u641c\u7d22\u201d\u91cd\u65b0\u5237\u65b0\u4e00\u4e0b\uff01",callfn:function(){}}]))};e.prototype.QuerySelectShopInfo=
function(g,l){2!=g.series&&GameUtil.ShowMyShop(!0);g=GameUtil.InstanceOfMem(PersonalStoreUI);var p=GameUtil.InstanceOfMem(MyStoreUI);g&&g.removeSelf();p&&(l=fnDecode6BitBuf(l,l.length),(l=TClientUserShop(l.pszDest))&&""!=l&&(Sendmessage.QueryMyShopSellingItems(0,0,0,0,0,""),0<g_StoreItemNum[0]&&Sendmessage.GetMyShopItems(g_StoreItemIndex[0],0),Sendmessage.QueryMyShopSelledItems(0,0,0,0,0,""),0>=g_StoreItemNum[2]?Sendmessage.QueryMyshopStorageItems(0,0,0,0,0,""):Sendmessage.GetMyShopItems(g_StoreItemIndex[2],
2),Laya.stage.event("show_store_message",l)))};e.prototype.QueryMyShopSellingItems=function(g,l){g_StoreItemNum[0]=g.record;g_StoreItemIndex[0]=g.param;g=l.split("/");l=[];for(var p=0;p<g.length;p++)if(g[p]&&""!=g[p]){var q=fnDecode6BitBuf(g[p],g[p].length);q=TClientUserShopItem(q.pszDest);l.push(q)}l&&(Laya.stage.event("show_store_selling",[l]),Laya.stage.event("game_showStorePage",[g_StoreItemNum[0],g_StoreItemIndex[0],0]))};e.prototype.QueryMyShopSelledItems=function(g,l){g_StoreItemNum[1]=g.record;
g_StoreItemIndex[1]=g.param;g=l.split("/");l=[];for(var p=0;p<g.length;p++)if(g[p]&&""!=g[p]){var q=fnDecode6BitBuf(g[p],g[p].length);q=TClientUserShopItem(q.pszDest);l.push(q)}l&&(Laya.stage.event("show_store_sold",[l]),Laya.stage.event("game_showStorePage",[g_StoreItemNum[1],g_StoreItemIndex[1],1]))};e.prototype.QueryMyShopStorageItems=function(g,l){g_StoreItemNum[2]=g.record;g_StoreItemIndex[2]=g.param;g=l.split("/");l=[];for(var p=0;p<g.length;p++)if(g[p]&&""!=g[p]){var q=fnDecode6BitBuf(g[p],
g[p].length);q=TClientUserShopItem(q.pszDest);l.push(q)}l&&(Laya.stage.event("show_store_storage",[l]),Laya.stage.event("game_showStorePage",[g_StoreItemNum[2],g_StoreItemIndex[2],2]))};e.prototype.SendAddToMyShopOk=function(g,l){AddStoreItem&&GameUtil.DelBagItems(AddStoreItem.MakeIndex);Laya.stage.event("delete_ItemImage");Laya.stage.event("Show_Bag_Item_ico");SelectedStoreItem=AddStoreItem=null};e.prototype.SendAddToMyShopFail=function(g,l){l=g.param;-1==g.record?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u8bf7\u7a0d\u540e\u5728\u8bd5\uff01",callfn:function(){}}]):-3==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u4f60\u8fd8\u6ca1\u6709\u5e97\u94fa\uff01",callfn:function(){}}]):-4==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u52a0\u5165\u5e97\u94fa\u7684\u7269\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0\uff01",
callfn:function(){}}]):-5==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u4ea4\u6613\uff01",callfn:function(){}}]):-6==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u5b58\u4ed3\u5e93\uff01",callfn:function(){}}]):-7==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u53ea\u80fd\u540c\u65f6\u51fa\u552e"+
l+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-8==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u4f60\u7684\u4ed3\u5e93\u53ea\u80fd\u5b58\u653e"+l+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-10==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u672a\u77e5\u9519\u8bef\uff01",
callfn:function(){}}])};e.prototype.SendChangeMyShopItemOk=function(g,l){Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u6210\u529f]\uff1a\u4fee\u6539\u6210\u529f\uff01",callfn:function(){}}]);Laya.stage.event("delete_ItemImage");SelectedStoreItem=null};e.prototype.SendChangeMyShopItemFail=function(g,l){l=g.param;-1==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u8bf7\u7a0d\u540e\u5728\u8bd5\uff01",callfn:function(){}}]):
-3==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u4f60\u8fd8\u6ca1\u6709\u5e97\u94fa\uff01",callfn:function(){}}]):-4==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u52a0\u5165\u5e97\u94fa\u7684\u7269\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0\uff01",callfn:function(){}}]):-5==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u4ea4\u6613\uff01",
callfn:function(){}}]):-6==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u5b58\u4ed3\u5e93\uff01",callfn:function(){}}]):-7==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u53ea\u80fd\u540c\u65f6\u51fa\u552e"+l+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-8==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u4f60\u7684\u4ed3\u5e93\u53ea\u80fd\u5b58\u653e"+
l+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-10==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u672a\u77e5\u9519\u8bef\uff0c\u8be5\u7269\u54c1\u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u8bf7\u70b9\u51fb\u4e0b\u9762\u7684\u201c\u641c\u7d22\u201d\u91cd\u65b0\u5237\u65b0\u4e00\u4e0b\uff01",
callfn:function(){}}])};e.prototype.QuerySelectShopInfoFaild=function(g,l){Laya.stage.event("show_log",[{txt:"\u67e5\u8be2\u6446\u644a\u4fe1\u606f\u5931\u8d25",color:"#ff0000"}])};e.prototype.ViewBaiTan=function(g,l){g=fnDecode6BitBuf(l,l.length,!1);G_BaiTanData=new TBaiTanData(g.pszDest);baitanGoldTypes=G_BaiTanData.PriceGold;GameApi.LookHumShop(!0)};e.prototype.AddBaiTanItemFaild=function(g,l){null!=g_WaitItems.Items&&(Laya.stage.event("show_log",[{txt:"\u6dfb\u52a0\u6b64\u7269\u54c1\u5931\u8d25!!,\u8be5\u7269\u54c1\u7981\u6b62\u6446\u644a\uff01",
color:"#ff0000"}]),GameUtil.isMultiple(g_WaitItems.Items)?Laya.stage.event("item_hint",[g_WaitItems.Items,g_WaitItems.Items.Dura]):Laya.stage.event("item_hint",[g_WaitItems.Items,1]),GameUtil.AddItemNewBag(g_WaitItems.Items),Laya.stage.event("Show_Item_ico",g_WaitItems.Index),g_WaitItems.Items=null)};e.prototype.AddBaiTanItemOk=function(g,l){null!=g_WaitItems.Items&&(GameApi.AddMyShopItems(g_WaitItems),Laya.stage.event("Update_Shop_List"),g_WaitItems.Items=null)};e.prototype.SendBaiTanName=function(g,
l){l=DecodeString(l);(g=ObjectManage.findobject(g.record))&&g.stallsname(l)};e.prototype.OpenMyBaiTan=function(g,l){GameUtil.ShowNewBag(!0);GameApi.ShowMyShop(!0)};e.prototype.getzhaomupay=function(g,l){var p=DecodeString(l);if(l=ObjectManage.findobject(g.record))if(p=p.split(" ")[1],g_Zmu_Count=g.tag,0==g.param)this.ShowZhaoMu(g.record);else if(1==g.param)l.txt_zmshow.text="",l.boisZmu=!1;else if(2==g.param){g="";switch(p){case 0:g="\u4f60\u5df2\u7ecf\u52a0\u5165\u4e86\u961f\u4f0d,\u65e0\u6cd5\u5f00\u542f\u62db\u52df\u529f\u80fd.";
break;case 1:g="\u4f60\u6ca1\u6709\u53d1\u5e03\u62db\u52df\u7684\u6743\u9650.";break;case 2:g="\u4f60\u6ca1\u6709\u4fee\u6539\u62db\u52df\u7684\u6743\u9650.";break;case 3:g="\u4f60\u6ca1\u6709\u5f00\u542f\u62db\u52df."}Laya.stage.event("new_chat_msg",[{info:g,front:255,bg:56,type:0}])}};e.prototype.ShowZhaoMu=function(g){};e.prototype.BuySomeItem=function(g,l){if(g_boOpenCaiji&&""!=l){l=DecodeString(l);var p=l.split("/");l=p[0]+"%";var q=p[1];p=p[2];var r=GameApi.GetSelShopItemsByIndex(g.record);
if(r){var u=r.s.Name,v=g.record;var w=r.Dura+1;var z=0,A=0;switch(g.series){case 1:A=g_GameCionNum.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 2:A=g_bindCionNum.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 3:z=111;A=g_GameGoldNum.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 4:A=g_bindGoldNum.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 5:A=g_GamePointNum.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 6:A=g_nGameDiamond.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 7:A=
g_nGameGird.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 8:A=g_gameGlory.value-CodeUtil._MAKELONG(g.param,g.tag);break;case 9:A=g_gamePopNum.value-CodeUtil._MAKELONG(g.param,g.tag)}var C=GameUtil.getCurrencyByGoldType(GameUtil.valueLimit(g.series-1));var B="\u975e\u7ed1\u5b9a\u7269\u54c1";r.s.IsBind&&(B="\u5df2\u7ed1\u5b9a\u7269\u54c1");g_LogSocket.AddGameDataLog(36,u,v,p+"/"+q,B+"/"+C+"/"+w+"/"+A+"/\u975e\u7ed1\u5b9a");g_LogSocket.AddGameDataLog(z,C,-1,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/\u8d2d\u4e70\u6446\u644a\u7269\u54c1/\u4e2a\u4eba\u644a\u4f4d/"+
q+"/"+u+"/"+v+"/"+p,-A+"/"+l)}}0==g.series?GameApi.DelMyShopItems(g.record):GameApi.DelLookShopItems(g.record);switch(g.series){case 1:g_GameCionNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",1);break;case 2:g_bindCionNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",2);break;case 3:g_GameGoldNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",3);break;case 4:g_bindGoldNum.value=CodeUtil._MAKELONG(g.param,
g.tag);Laya.stage.event("updateAuctionHouseMoney",4);break;case 5:g_GamePointNum.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",5);break;case 6:g_nGameDiamond.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",6);break;case 7:g_nGameGird.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",7);break;case 8:g_gameGlory.value=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateAuctionHouseMoney",8);
break;case 9:g_gamePopNum.value=CodeUtil._MAKELONG(g.param,g.tag),Laya.stage.event("updateAuctionHouseMoney",9)}Laya.stage.event("Update_Bag")};e.prototype.GetNpcItemShow=function(g,l){if(g.param==l.length){var p=fnDecode6BitBuf(l,l.length,!1);p=(new Zlib.Inflate(p.pszDest)).decompress();if(g.param==l.length)for(l=0;l<g.series;l++){this.boisF=!1;var q=GameUtil.slice(p,g_itemSize*l,g_itemSize*(l+1));q=TClientItem(q);101!=q.s.Need&&102!=q.s.Need&&103!=q.s.Need&&104!=q.s.Need&&0==q.s.NeedLevel%60&&(q.s.NeedLevel/=
60);for(var r=0;r<g_Showitem.length;r++)if(g_Showitem[r].MakeIndex==q.MakeIndex){g_Showitem[r]=q;this.boisF=!0;break}this.boisF||g_Showitem.push(q)}}};e.prototype.GetFleixbleItemShow=function(g,l){if(g.param==l.length){var p=fnDecode6BitBuf(l,l.length,!1);p=(new Zlib.Inflate(p.pszDest)).decompress();if(g.param==l.length)for(var q=0;q<g.series;q++){l=!1;var r=GameUtil.slice(p,g_itemSize*q,g_itemSize*(q+1));r=TClientItem(r);101!=r.s.Need&&102!=r.s.Need&&103!=r.s.Need&&104!=r.s.Need&&0==r.s.NeedLevel%
60&&(r.s.NeedLevel/=60);for(var u=0;u<g_fleixbleItemShow.length;u++)if(g_fleixbleItemShow[u].MakeIndex==r.MakeIndex){g_fleixbleItemShow[u]=r;l=!0;break}l||g_fleixbleItemShow.push(r)}}};e.prototype.openNewGUI=function(g,l){var p=zDecodeString(l);l=g.param;var q=g.tag,r=CodeUtil._LOWORD(g.record),u=CodeUtil._HIWORD(g.record);var v=CodeUtil._LOWORD(g.series);CodeUtil._HIWORD(g.series);if(g=GameUtil.InstanceOfMem(NewNpcWinUI))0==v?(v=g.Npc_bg.getChildByName("leaderBossWin_name"),p=JSON.parse(p),v||(v=
new UILeaderBossWin,v.name="leaderBossWin_name",g.Npc_bg.addChild(v)),v.x=l,v.y=q,Laya.stage.event("setLeaderBossData",[p])):1==v&&(v=g.getChildByName("fleixbleListWin_name"),v||(v=new UIFleixbleList,v.name="fleixbleListWin_name",g.addChild(v)),v.x=l,v.y=q,Laya.stage.event("setFleixbleListData",[p,r,u]))};e.prototype.GetFishInfo=function(g,l){function p(){g_FishGroup_List=[];var w=fnDecode6BitBuf(l,l.length,!1);w=(new Zlib.Inflate(w.pszDest)).decompress();for(var z=w.length/44,A=0;A<z;A++){var C=
GameUtil.slice(w,44*A,44*(A+1));C=TFishGropInfo(C);""!=C.sCaption&&0!=C.nOwnerID&&g_FishGroup_List.push(C)}Laya.stage.event("game_dlg_cmd",[{id:"show_fishwarm",data:g_FishGroup_List,tag:"create"}])}if(0>g.record)-1==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u9c7c\u9975\u4e86,\u65e0\u6cd5\u5f00\u59cb\u9493\u9c7c",callfn:function(){}}]):-2==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f19\u8ba1!\u4f60\u6709\u597d\u9c7c\u7aff\u4e48!",callfn:function(){}}]):
-3==g.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u653e\u6746\u5931\u8d25",callfn:function(){}}]):-4==g.record&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u80cc\u5305\u6ee1\u4e86\u4e0d\u80fd\u9493\u9c7c",callfn:function(){}}]);else switch(g.tag){case 16:Sendmessage.IsDropFish(18,0);break;case 1:g_FishTeamId=g.record;var q=fnDecode6BitBuf(l,l.length,!1).pszDest;g=TFishInfo(q);g_FishInfo_List[g_FishTeamId]=g;Laya.stage.event("game_dlg_cmd",[{id:"show_fish",data:g_FishInfo_List}]);
Laya.stage.event("CloseFinishList");break;case 2:0==g.record&&Laya.stage.event("game_dlg_cmd",[{id:"show_fish",data:0}]);break;case 3:switch(g.param){case 0:console.log("\u5df2\u7ecf\u5411\u961f\u957f\u53d1\u51fa\u8bf7\u6c42.\u8bf7\u7a0d\u7b49...");break;case 1:console.log("\u9519\u8bef!\u4f60\u5df2\u7ecf\u6709\u961f\u4f0d\u4e86...");break;case 2,3:console.log("\u9519\u8bef\u7684\u8bf7\u6c42...",g.param);break;case 4:console.log("\u4f60\u5df2\u7ecf\u5728\u60f3\u52a0\u5165\u7684\u961f\u4f0d\u4e86...");
break;case 5:console.log("\u5df2\u7ecf\u5411\u961f\u957f\u53d1\u51fa\u8bf7\u6c42.\u8bf7\u7b49\u5f85\u961f\u957f\u5ba1\u6838...");break;case 6:console.log("\u98ce\u58f0\u7d27,\u8bf7\u7a0d\u540e\u518d\u52a0\u5165...");break;case 7:console.log("\u961f\u4f0d\u5df2\u7ecf\u6ee1\u5458\u4e86...");break;default:console.log("\u53d1\u51fa\u8bf7\u6c42\u5931\u8d25!!!",g.param)}break;case 8:""!=l?p():Laya.stage.event("game_dlg_cmd",[{id:"show_fishwarm",data:[],tag:"create"}]);break;case 9:if(q=g_FishInfo_List[g.record])q.State=
TFishState.fsAllowPush,q.BaitDura=g.param,Laya.stage.event("change_role_state",{id:g.record,state:q.State});Laya.stage.event("update_user_info",{id:g.record,text:"\u653e\u6746\u4e2d.."});break;case 10:q=g_FishInfo_List[g.record];if(!q)break;-999!=g.param&&q&&(q.GetCount=g.param);var r=DecodeString(l);q.State!=TFishState.fsRodBreaked&&q.State!=TFishState.fsIdle?(q.State=TFishState.fsParsing,""!=l?Laya.stage.event("update_user_info",{id:g.record,text:"\u9493\u5230\u4e00\u6761"+r}):Laya.stage.event("update_user_info",
{id:g.record,text:"\u4e00\u65e0\u6240\u83b7...."})):q.State=TFishState.fsParsing;Laya.stage.event("update_user_info",{id:g.record,text:"\u6536\u6746\u4e2d.."});Laya.stage.event("change_role_state",{id:g.record,state:q.State});break;case 19:g=DecodeString(l);q=fnDecode6BitBuf(g,g.length,!1).pszDest;g=TFishGropInfo(q,0,44);break;case 12:q=g_FishInfo_List[g.record];if(!q)break;q.BaitDura=g.param;Laya.stage.event("change_role_attr",{fish_role:q});break;case 11:q=g_FishInfo_List[g.record];if(!q)break;
var u=g.param,v=g.series;r=DecodeString(l);q.State!=TFishState.fsParsing&&q.State!=TFishState.fsParsed&&(q.State=TFishState.fsFooling);Laya.stage.event("change_role_state",{id:g.record,state:q.State});Laya.stage.event("update_user_info",{id:g.record,text:r+"\u54ac\u94a9\u4e86",max:u,cur:v});break;case 15:q=g_FishInfo_List[g.record];if(!q)break;r="";0==g.param?r="\u60a8\u7684\u9975\u6599\u6ca1\u4e86":(r="\u4e00\u6761\u5927\u9c7c\u8dd1\u4e86",q.OutCount=g.series);Laya.stage.event("update_user_info",
{id:g.record,text:r,type:2});break;case 4:if(""==l)break;g=fnDecode6BitBuf(l,l.length,!1);q=(new Zlib.Inflate(g.pszDest)).decompress();q=TFishJoinPlayInfo(q);g_JoinInfo_List.push(q);Laya.stage.event("show_new_user");break;case 7:if(0!=g.param)break;q=DecodeString(l);q=fnDecode6BitBuf(q,q.length,!1).pszDest;q=TFishInfo(q);g_FishInfo_List[g.record]=q;Laya.stage.event("new_user_join");q.sName==g_RoleName?Laya.stage.event("update_user_info",{id:g.record,text:"\u6210\u529f\u52a0\u5165\u9493\u9c7c\u5c0f\u5206\u961f,\u548c\u5c0f\u4f19\u4f34\u4eec\u4e00\u8d77\u9493\u9c7c\u5427!"}):
Laya.stage.event("update_user_info",{id:g.record,text:q.sName+"\u52a0\u5165\u9493\u9c7c\u5c0f\u5206\u961f..."});break;case 5:Laya.stage.event("update_user_info",{id:g.record,text:"\u63d0\u793a\u961f\u957f\u79bb\u5f00\u4e86,\u73b0\u5728\u4f60\u662f\u961f\u957f\u4e86"});break;case 6:q=g_FishInfo_List[g.record];if(!q)break;r=DecodeString(l);g.sName==g_RoleName?Laya.stage.event("update_user_info",{id:g.record,text:"\u9000\u51fa\u9493\u9c7c\u5c0f\u5206\u961f",type:3}):Laya.stage.event("update_user_info",
{id:g.record,text:r+"\u9000\u51fa\u9493\u9c7c\u5c0f\u5206\u961f",type:3});break;case 20:Laya.stage.event("update_user_info",{id:g.record,text:"\u53f0\u98ce\u6765\u4e86",type:0});break;case 21:""!=l?Laya.stage.event("update_user_info",{id:g.record,text:"\u53f0\u98ce\u522e\u6765\u4e86"+l,type:1}):Laya.stage.event("update_user_info",{id:g.record,type:1});break;case 23:r=DecodeString(l);Laya.stage.event("update_user_info",{id:g.record,text:"\u53f0\u98ce\u8086\u8650,\u5996\u5b7d\u6a2a\u5411["+r+"]\u4e5f\u6765\u5566!"});
break;case 222:r=DecodeString(l);Laya.stage.event("update_user_info",{id:g.record,text:"\u7ecf\u8fc7\u5927\u5bb6\u7684\u52aa\u529b\u7ec8\u4e8e\u628a"+r+"\u9493\u4e0a\u6765\u4e86!"});break;case 18:r=DecodeString(l);Laya.stage.event("show_team_chat",{txt:r});break;case 24:Laya.stage.event("change_role_state",{id:g.record,state:TFishState.fsRodBreaking}),Laya.stage.event("update_user_info",{id:g.record,txt:"\u9c7c\u7aff\u65ad\u4e86"})}};e.prototype.OpenBox=function(g,l){Laya.stage.event("show_bag_items");
Laya.stage.event("game_dlg_cmd",[{id:"show_box",boxid:g.param}])};e.prototype.OpenBoxSuccess=function(g,l){g=l.split("/");l=[];for(var p=0;p<g.length&&""!=g[p];p+=2){var q=fnDecode6BitBuf(g[p+1],g[p+1].length,!1);q=TClientItem(q.pszDest);l.push({index:p,item:q})}Laya.stage.event("game_dlg_cmd",[{id:"open_box",items:l}])};e.prototype.GetBoxItemIndex=function(g){Laya.stage.event("game_dlg_cmd",[{id:"getbox_itemindex",itemindex:g.record}])};e.prototype.GameTakeAotoOnItem=function(g,l,p){0<g.record&&
(p=g.record,g=g.param,DecodeString(l),l=GameApi.GetBagIndexItems(p),null!=l&&(g_UserItemList[g]=l,GameUtil.DelBagItems(l.MakeIndex),Laya.stage.event("Show_Item_ico",g)))};e.prototype.IsHaveGrild=function(g,l){l&&(g=DecodeString(l),l=ObjectManage.findobject(playerID))&&(l.grildname=g)};e.prototype.Get_SCREENEFFECT=function(g,l){l=DecodeString(l);var p=g.series,q=CodeUtil._LOBYTE(g.param),r=CodeUtil._HIBYTE(g.param),u=g.tag,v=CodeUtil._LOWORD(g.record);g=CodeUtil._HIWORD(g.record);var w=-1;-1!=l.indexOf("/")&&
(w=l.split("/")[0]);if(0<r&&0<=w&&w<g_pak_list.length&&0<=v&&840>=v&&0<=g&&500>=g&&(l=GameApi.GetPakTo2Img(w,u),null==Laya.stage.getChildByName(l+u))){v=new Laya.Point(v,g);var z=Animationmodule.playframe(!1,Laya.stage,l,u,u+r-1,p,!0,!1,v,this,function(){++z.num>q&&Animationmodule.removeAniname(z.name)});z&&(z.name="screeneffect"+l+u,z.num=1)}};e.prototype.Get_CUSTOMBUTTON=function(g,l){if(0==g.param){l=DecodeString(l);var p=l.split("/"),q=parseInt(p[0]),r=parseInt(p[1]);g=parseInt(p[2]);var u=parseInt(p[3]),
v=parseInt(p[4]);l=parseInt(p[5]);var w=parseInt(p[6]);parseInt(p[7]);0>q||0>r||0>g||0>u||0>v||0>l||0>w||(p=GameApi.GetPakTo2Img(q,g),q=Laya.stage.getChildByName(r),null==q&&(q=new Laya.Button,q.loadImage(p+GameUtil.getprefixname(g,5)+".png"),q.on(Laya.Event.CLICK,this,function(){Sendmessage.SendCUSTOMBUTTON(r)}),q.pos(l,w),q.name=r,Laya.stage.addChild(q)))}else 1==g.param&&Laya.stage.removeChildByName(g.tag)};e.prototype.getMoneyPay=function(g){if(""!=g){g=DecodeString(g);var l=g.split("|");if(1==
l.length)cur_use_app?sendtonative("gotowebview","openurl:"+l[0]):window.open(l[0]);else if(1<l.length&&"2"==l[0])g=l[1].substr(l[1].indexOf("id=")+3),callpaylistforuu(g);else if(1<l.length&&"3"==l[0])l=new UIRecharge,l.update2Money(g),Laya.stage.addChild(l);else if(cur_use_app){if(console.log("---------call recharge--------------"),/a=\d+/g.test(g)){l=g.replace(/[^]+(a=\d+)[^]+/g,"$1");var p="b="+msgFromLogin[3].toLowerCase();requestpaylist(l+"&"+p);l=GameUtil.InstanceOfMem(rechargeUI);l||(l=new UIRecharge,
Laya.stage.addChild(l));l.weburl=g}}else{1==g.indexOf("|")&&(g=g.split("|")[1]);g=g.replace("%account",dataFromRoleScene.uid);if(l=Laya.Browser.document.getElementById("div_cz"))l.style.display="",l.style.left=Laya.Browser.clientWidth/2-249+"px",l.style.top=Laya.Browser.clientHeight/2-172+"px";if(l=Laya.Browser.document.getElementById("chongzhi"))l.src=g}}};e.prototype.openDLG=function(g,l){g=DecodeString(g);(g=g.substring(g.indexOf("[")+1,g.indexOf("]")))&&GameApi.ShowScreen(!0,g,6);G_NPC_ID=l};
e.prototype.getCardGameInfo=function(g){g=DecodeString(g).split("|");var l=g[0].slice(7);if(-1==g.indexOf("/"))switch(g_cardGame_infoList=g[1].split("/"),g[0]&&-1!=g[0].indexOf("EnterRoom")&&GameUtil.ShowNewDoudizhu(!0),10<g_cardGame_infoList.length&&Laya.stage.event("Update"),l){case "OutCardError":Laya.stage.event("show_log",[{txt:"\u51fa\u724c\u4e0d\u7b26\u5408\u89c4\u5219",color:"#ff0000"}]);break;case "OutCard":Laya.stage.event("MusicSound",[g_cardGame_infoList[9]]);break;case "NoOutCardsToClient":Laya.stage.event("NotOut");
break;case "WinnerCome":Sendmessage.sendCardGame3("AccountGold|");break;case "CollocationShowToClient":console.log(g_cardGame_infoList);break;case "OnTimeFromServer":Laya.stage.event("OnTime",[g_cardGame_infoList]);break;case "OnTimeChooseDiZhuFromServer":Laya.stage.event("OnTime",[g_cardGame_infoList]);break;case "playChooseDiZhu":Laya.stage.event("MusicSound",[g_cardGame_infoList[0]]);break;case "GetTimerNum":Laya.stage.event("OutLineEnterGetTimerNum");break;case "OutLineEnterToClient":GameUtil.ShowNewDoudizhu(!0),
Laya.stage.event("Update"),Laya.stage.event("OutLine")}};e.prototype.NewMakeNpc=function(g,l){CodeUtil._HIWORD(l.record);0==l.record&&(g_DiyNPCList=[]);if(l.param==g.length){g=fnDecode6BitBuf(g,g.length);g=(new Zlib.Inflate(g.pszDest)).decompress();for(var p=0;p<l.series;++p){var q=GameUtil.slice(g,500*p,500*(p+1));q=TDiyNpcData(q);g_DiyNPCList.push(q)}}};e.prototype.MakeIcon=function(g,l){if(l.param==g.length){g_IconCList=[];g=fnDecode6BitBuf(g,g.length);g=(new Zlib.Inflate(g.pszDest)).decompress();
for(var p=0;p<l.series;++p){var q=GameUtil.slice(g,g_itemSize*p,g_itemSize*(p+1));q=TClientItem(q);g_IconCList.push(q)}}};e.prototype.HumIcon=function(g,l){Title.SetIconGif(g,l)};e.prototype.SendSetUserICON=function(g,l){Title.SetIcon(l,g)};e.prototype.GetServerConfig=function(g,l){try{if(""!=g&&g.length==l.param+l.record){var p=g.substring(0,l.param),q=g.substring(l.param);""!=q&&(q=zDecodeString(q),g_customItemAttr=JSON.parse(q));var r=decryStringK(p,mac_key);if(8==(r[0]&15)){var u=(new Zlib.Inflate(r)).decompress();
g_ClientConfig=TClientConfig(u);GameApi.initRoleSet();MinLevelFastTime=g_ClientConfig.AttackIntervalTime;g_boIsSafeRunNPC=g_ClientConfig.boIsSafeRunNPC;g_boIsSafeRun=g_ClientConfig.boIsSafeRun;g_customItemAttr&&(g_ClientConfig.boNewTaskMode=g_customItemAttr.boNewTaskMode,g_ClientConfig.boExtendDB=g_customItemAttr.boExtendDB,g_ClientConfig.maxExtendItemCount=g_customItemAttr.maxExtendItemCount,g_ClientConfig.MagicAttackRage=g_customItemAttr.MagicAttackRage);Laya.stage.event("update_m2set");Laya.stage.event("spellUseSkillStart")}g_customItemAttr&&
GameUtil.setCurrencyKey(g_customItemAttr.DiyCurrencyName);Laya.stage.event("show_BtnHero")}Laya.stage.event("EVENT_START_OBJECT_HB")}catch(v){console.log("GetServerConfig execute error",v)}};e.prototype.getSuitInfo=function(g){if(""!=g&&(g=DecodeString(g),""!=g&&(g=g.split("|"),!(2>g.length)))){var l=g[0].split("#");if(!(2>l.length))if(5==l[1]){if(g=g[1].split("~!")[1])if(g=g.split("~&"),!(4>g.length)){for(l=0;l<g.length;l++)if(-1!=g[l].indexOf("!@")&&-1!=g[l].indexOf("~^"))for(var p=g[l].split("~^"),
q=0;q<p.length;q++)if(p[q]){var r=p[q].split("!@");2>r.length||Suitelementlist.push(r[1])}g=g[4].split("~#");2>g.length||"1"==g[1]&&(GomSuitOpen=!0)}}else 1==l[1]?(this.solosuit=g[1],Allsuitlist.push(this.solosuit)):3==l[1]?(l=g[1].split("\u5957\u88c5\u5907\u6ce8~!"),l[1]&&(g=l[1].split("~@")[0],p=l[0].split("~@"),l=p[0].split("~!")[1],p=p[1].split("~!")[1],Laya.stage.event("new_chat_msg",[{info:g,front:l,bg:p,type:0}]))):4!=l[1]&&(6==l[1]?(Allsuitlist=[],Suitelementlist=[],Gomsuitlist=[],Sendmessage.SuitInfo("1|1")):
7==l[1]&&Gomsuitlist.push(g[1]))}};e.prototype.OpenBoxEX=function(g,l){G_NPC_ID=l.record;""!=g&&GameApi.ShowScreen(!0,0,8)};e.prototype.ShowDressGodBless=function(g){if(0==g.tag){for(var l=0;12>l;l++)g_SelfOpenedGodBless[l]=32768>>l&&0!=g.record?1:0;g_btSelfSndacasketState=CodeUtil._HIBYTE(g.param);g_btSelfShowGodBless=CodeUtil._LOBYTE(g.param);g_show_fashion=g.series;Laya.stage.event("update_SelfSndacasketState");ObjectManage.object_list.forEach(function(p){p.data.record==playerID&&GameUtil.setbodycolor(p,
g_RoleBodyState,p.data.record);p.Blood&&p.Blood.people&&p.Blood.SetCurBloodNum()})}else if(1==g.tag){for(l=0;12>l;l++)g_HeroOpenedGodBless[l]=32768>>l&&0!=g.record?1:0;g_btHeroSndacasketState=CodeUtil._HIBYTE(g.param);g_btHeroShowGodBless=CodeUtil._LOBYTE(g.param);g_Show_Hero_Fashion=g.series}};e.prototype.StopMyShop_Caiji=function(g,l){for(g=0;g<g_MyShopList.length;g++)if(null!=g_MyShopList[g]){GameUtil.AddItemNewBag(g_MyShopList[g].Items);var p=g_MyShopList[g].Items.s.Name,q=g_MyShopList[g].Items.MakeIndex,
r="\u6446\u644a\u672a\u8d77\u540d,\u53d6\u6d88\u6446\u644a";""!=l&&(r=DecodeString(l));var u="\u5143\u5b9d";1==g_MyShopList[g].nType&&(u="\u91d1\u5e01");var v=1;GameApi.IsOverLapItem(g_MyShopList[g].Items)&&(v=g_MyShopList[g].Items.Dura+1);var w="\u975e\u7ed1\u5b9a\u7269\u54c1";g_MyShopList[g].Items.s.IsBind&&(w="\u5df2\u7ed1\u5b9a\u7269\u54c1");g_LogSocket.AddGameDataLog(38,p,q,"\u7269\u54c1\u4ece\u4e2a\u4eba\u644a\u4f4d\u53d6\u56de/"+r,w+"/"+u+"/"+v+"/"+g_MyShopList[g].nGold+"/\u975e\u7ed1\u5b9a");
g_MyShopList[g]=null}};e.prototype.SendBaiTanName_Caiji=function(g,l){var p=ObjectManage.findobject(g.record);if(p&&playerID==g.record){g="";""!=l&&(g=DecodeString(l));for(l=0;20>l;l++)if(null!=g_MyShopList[l]){var q=g_MyShopList[l].Items.s.Name,r=g_MyShopList[l].Items.MakeIndex,u="\u5143\u5b9d";1==g_MyShopList[l].nType&&(u="\u91d1\u5e01");var v=1;GameApi.IsOverLapItem(g_MyShopList[l].Items)&&(v=g_MyShopList[l].Items.Dura+1);var w="\u975e\u7ed1\u5b9a\u7269\u54c1";g_MyShopList[l].Items.s.IsBind&&(w=
"\u5df2\u7ed1\u5b9a\u7269\u54c1");g_LogSocket.AddGameDataLog(37,q,r,"\u8f6c\u79fb\u5230\u6446\u644a\u8fdb\u884c\u51fa\u552e/"+g,w+"/"+u+"/"+v+"/"+g_MyShopList[l].nGold+"/\u975e\u7ed1\u5b9a")}p.stallsname(g)}};e.prototype.SM_Caiji=function(g,l){if(""!=g){var p=DecodeString(g).split("/");if(0!=p.length)switch(p[0]){case "8":if(4==p.length){var q=p[1],r=p[3];p="\u975e\u7ed1\u5b9a/\u91d1\u5e01/"+p[2]+"/"+r;g_LogSocket.AddGameDataLog(8,"\u91d1\u5e01",-1,q,p)}else{g=p[1];l=p[2];q=p[3];r=p[5];var u=p[6];
p=u+"/\u7269\u54c1/"+p[4]+"/"+r;g_LogSocket.AddGameDataLog(8,g,l,q,p)}break;case "9":g=p[1];l=p[2];var v=p[3];u=p[4];q=p[5];r=p[6];g_LogSocket.AddGameDataLog(9,g,l,v,u+"/"+q+"/"+r+"/"+p[7]+"/"+p[8]);break;case "10":g=p[1];l=p[2];u=p[3];v=p[4];r=p[5];g_LogSocket.AddGameDataLog(10,g,l,v,u+"/"+r);break;case "35":g=p[1],l=p[2],u=p[3],v=p[4],q=p[5],AddGameDataLog(35,g,l,u+"/"+v,q)}}};e.prototype.Play_htsd=function(g){if(g&&(g=ObjectManage.findobject(g.record))){var l=new Laya.Point;l.x=g.grid.x;l.y=g.grid.y;
Skillmodule.playself(0,75,g,l)}};e.prototype.ItemScore=function(g,l){""!=l&&(g=fnDecode6BitBuf(l,l.length),(g=TItemScoreRecord(g.pszDest))&&(g_ItemScoreRecord=g))};e.prototype.autoPickItems=function(g){var l=g.series,p=g.param;g=g.record;for(var q=ObjectManage.findobject(playerID),r=ItemMgr.getInstance().DropItemList,u="",v=43,w=0;w<r.length;w++){var z=r[w];if(q&&z&&Math.abs(q.grid.x-z.x)<=p&&Math.abs(q.grid.y-z.y)<=p&&(0!=l||Gameconfig.itemCheck(z.Name,1))&&(1!=g||-1==g_selfdropitem.indexOf(z.id))&&
(0<--v&&(u=1!=v?u+(z.x+","+z.y+"|"):u+(z.x+","+z.y)),0>=v))break}0<u.length&&Sendmessage.autoPickDifferent(u)};e.prototype.superMoveMsg=function(g,l){var p=CodeUtil._LOBYTE(g.param),q=CodeUtil._HIBYTE(g.param),r=g.tag,u=g.series;g=g.record;var v=[];if(""!=l){l=DecodeString(l).split("||");for(var w=0;w<l.length;w++){var z=GameUtil.msgSetColor(l[w],p,q,r);v.push(z)}0<v.length&&(v.nY=u,v.nCount=g,g_superMsg.push(v),1==g_superMsg.length&&(p=[].concat(v),GameUtil.superMsg(p,u,g)))}};e.prototype.openUpgrade=
function(){var g=Laya.stage.getChildByName("upgrade");g||(g=new upGradeItem,Laya.stage.addChild(g))};e.prototype.getGomList=function(g){Gomsuitlist=[];if(g&&""!=g&&(g=zDecodeString(g).split("\r\n"),1<g.length)){for(var l=0;l<g.length;l++){var p=g[l];if(p&&""!=p){var q={};if(-1!=p.indexOf("|")){var r=p.indexOf("|");q.suitname=p.substring(0,r);p=p.substring(r+1)}-1!=p.indexOf("|")&&(r=p.indexOf("|"),q.suitnum=p.substring(0,r),p=p.substring(r+1));-1!=p.indexOf(":")&&(r=p.indexOf(":"),q.suititem=p.substring(0,
r),q.suitdesc=p.substring(r+1),GameMission.LoadIngimage(q.suitdesc));Gomsuitlist.push(q)}}GomSuitOpen=!0}};e.prototype.makeH5scrpt=function(g,l){switch(g.record){case 1:GameUtil.ShowNewBag(1==g.param);break;case 2:GameUtil.ShowNewTeamGroup(1==g.param);1==g.param&&(l=GameUtil.InstanceOfMem(TreamGroupUI),1==g.tag?l.btn_myteamClick():2==g.tag&&l.btn_nearbyClick());break;case 3:l=GameUtil.InstanceOfMem(RedPakUI);1!=g.param||l?0==g.param&&l&&(l.visible=!l.visible):(l=new UIRedPak,Laya.stage.addChild(l));
break;case 4:1==g.param?Sendmessage.sendOpenGuildDlg():Laya.stage.event("remove_hanghui_dlg");break;case 5:1==g.param?Sendmessage.QueryUserShops(0,0,""):(l=GameUtil.InstanceOfMem(PersonalStoreUI))&&l.BtnClose();break;case 6:if(1==g.param)Sendmessage.FriendOpition(0,""),Laya.stage.event("game_dlg_cmd",[{id:"show_friend",tag:g.tag}]);else if(l=GameUtil.InstanceOfMem(FriendUI))l.SelectIdx=-1,l.ExitDlg();break;case 7:l=GameUtil.InstanceOfMem(AuxiliaryUI);1==g.param?(l||(l=new uiAuxiliary,Laya.stage.addChild(l)),
l&&0==l.visible&&(l.visible=!0),0<g.tag&&(l.tab.selectedIndex=g.tag-1,l.ShowDlg())):l&&l.BtnClick();break;case 8:1==g.param?(open_minimap=!0,Sendmessage.sendOpenMinimap()):(l=GameUtil.InstanceOfMem(minimapUI))&&l.close();break;case 9:1==g.param?GameUtil.ShowNewLogo(!0,null,null,g.tag+""):(l=GameUtil.InstanceOfMem(HumWinUI))&&l.close();0<g.tag&&(l=GameUtil.InstanceOfMem(HumWinUI))&&l.showTab(g.tag);break;case 10:l=Laya.stage.getChildByName("UIShop");1==g.param?l?l.root.visible=!0:(Sendmessage.GetShopItems(0),
Sendmessage.GetStrangeItems(),g=new UIShop,g.name="UIShop",Laya.stage.addChild(g)):l&&0==g.param&&(l.root.getChildByName("panel_gift").visible=!1,l.root.getChildByName("panel_gift").getChildByName("input_tar_name").text="",l.root.visible=!1,l.BgImg());break;case 11:0==g.param?Laya.stage.event("closeAuctionHouseWin"):1==g.param&&Laya.stage.event("openAuctionWin");break;case 12:0==g.param?Laya.stage.event("closeRankWin"):1==g.param&&Laya.stage.event("openUIRankWin")}};e.prototype.checkOverTimeTK=function(){if(!(-1>=
this.TK_TICKTIME_TIME)){var g=Laya.Browser.now()-this.TK_TICKTIME_TIME;this.TK_TICKTIME_TIME=Laya.Browser.now();this.TK_DELAY_TIME+=g;this.TK_DELAY_TIME>=m&&Laya.stage.event("DELAY_TIME",15E3)}};e.prototype.playSoundScript=function(g,l){g=DecodeString(l);Laya.SoundManager.stopAll();GameUtil.PlayMusicFormat("music/"+g)};e.prototype.alertMessageGDY=function(g,l){null!=l&&""!=l&&(g=JSON.parse(l.toString()),Laya.stage.event("show_alert_dlg",[{type:1,txt:g.message,callfn:function(){}}]))};e.prototype.setWeatherEffect=
function(g){function l(q){g_showWeatherEffect||(g_showWeatherEffect=new Laya.Particle2D(q),Laya.stage.addChild(g_showWeatherEffect),g_showWeatherEffect.pos(0,-230),g_showWeatherEffect.emitter&&g_showWeatherEffect.emitter.start(),g_showWeatherEffect.play())}var p=0;1==CodeUtil._LOBYTE(g.param)?p=1:1==CodeUtil._HIBYTE(g.param)?p=2:1==g.tag?p=3:0==CodeUtil._LOBYTE(g.param)&&0==CodeUtil._HIBYTE(g.param)&&0==g.tag&&(p=0);0!=p?Laya.loader.load("gameres/animation/particle/weathereffect"+p+".part",Laya.Handler.create(this,
l),null,Laya.loader.JSON):0==p&&g_showWeatherEffect&&(g_showWeatherEffect.removeSelf(),g_showWeatherEffect=null)};e.prototype.parseServerRunixTime=function(g,l){g_serverRunixTime=parseInt(DecodeString(l))};e.prototype.parseAuctionListData=function(g,l){g_auctionList=[];if(""!=l&&l){l=fnDecode6BitBuf(l,l.length);l=(new Zlib.Inflate(l.pszDest)).decompress();for(var p=0;p<g.record;p++)g_auctionList.push(TSimpleAuctionItemInfo(l,p));Laya.stage.event("update_all_auctionData");console.log(g_auctionList)}else Laya.stage.event("update_all_auctionData")};
e.prototype.parseSingleAuctionData=function(g,l){g=fnDecode6BitBuf(l,l.length);g=(new Zlib.Inflate(g.pszDest)).decompress();g_auctionList.push(TSimpleAuctionItemInfo(g,0))};e.prototype.offSaleAuctionHandle=function(g,l){g=g.record;l=g_auctionList.length;if(!(1>l))for(var p=0;p<l;p++)g_auctionList[p]&&g_auctionList[p].nRecog==g&&(g_auctionList.splice(p,1),Laya.stage.event("updateMyShelvesInfo"))};e.prototype.updateAuctionInfo=function(g,l){var p=g.record,q=g_auctionList.length;if(!(1>q))for(var r=
0;r<q;r++)if(g_auctionList[r].nRecog==p){l=DecodeString(l);g_auctionList[r].sHighestBidder=l;g_auctionList[r].nCurrentPrice=CodeUtil._MAKELONG(g.param,g.tag);Laya.stage.event("updateMyAuctionWin");Laya.stage.event("update_all_auctionData");break}};e.prototype.newAuctionTipHandle=function(g,l){l="";switch(g.record){case 0:l="\u4e0a\u67b6\u6210\u529f";Laya.stage.event("updateItemData");Laya.stage.event("update_all_auctionData");Laya.stage.event("updateMyShelvesInfo");Laya.stage.event("closeSaleAuctionTip");
break;case -1:l="\u5df2\u8fbe\u5230\u62cd\u5356\u884c\u6700\u5927\u8ba2\u5355\u6570\u91cf";break;case -2:l="\u5df2\u8fbe\u5230\u4e2a\u4eba\u4e0a\u67b6\u8ba2\u5355\u6700\u5927\u6570\u91cf";break;case -3:l="\u4e0a\u67b6\u7684\u8d27\u5e01\u7c7b\u578b\u975e\u6cd5";break;case -4:l="\u8d27\u5e01\u7c7b\u578b\u672a\u542f\u7528";break;case -5:l="\u4e00\u53e3\u4ef7\u4e0d\u80fd\u4f4e\u4e8e\u7ade\u62cd\u4ef7";break;case -6:l="\u4e2a\u4eba\u4e0a\u67b6\u7b49\u7ea7\u4e0d\u8db3";break;case -7:l="\u4e2a\u4eba\u4e0a\u67b6\u8f6c\u751f\u7b49\u7ea7\u4e0d\u8db3";
break;case -8:l="\u7269\u54c1\u4e0d\u5b58\u5728";break;case -9:l="\u7269\u54c1\u4e0d\u5141\u8bb8\u4e0a\u67b6"}GameUtil.onShowTip(l)};e.prototype.offSaleAuctionTip=function(g,l){0==g.param&&(Laya.stage.event("closeSaleAuctionTip"),-1<Object.keys(g_aucitonItemList).indexOf(g.record+"")&&delete g_aucitonItemList[""+g.record],Laya.stage.event("update_all_auctionData"));GameUtil.onShowTip(0==g.param?"\u4e0b\u67b6\u6210\u529f":"\u7269\u54c1\u5df2\u7ecf\u88ab\u7ade\u4ef7\u65e0\u6cd5\u4e0b\u67b6")};e.prototype.bidAuctionTip=
function(g,l){var p="";switch(g.param){case 0:p=g.record;g=CodeUtil._MAKELONG(g.tag,g.series);l=DecodeString(l);for(var q=0;q<g_auctionList.length;q++)g_auctionList[q].nRecog==p&&(g_auctionList[q].sHighestBidder=l,g_auctionList[q].nCurrentPrice=g);p="\u7ade\u4ef7\u6210\u529f";Laya.stage.event("updateWordAuciton");Laya.stage.event("closeAuctionBidTip");break;case 1:p="\u62cd\u5356\u884c\u8ba2\u5355\u53d1\u8d77\u8005\u4e0d\u80fd\u7ade\u62cd";break;case 2:p="\u5df2\u7ecf\u7ade\u62cd\u6b64\u8ba2\u5355";
break;case 3:p="\u7ade\u62cd\u51fa\u4ef7\u4e0d\u8db3";break;case 4:p="\u8d27\u5e01\u7c7b\u578b\u672a\u542f\u7528";break;case 5:p="\u6ca1\u6709\u8db3\u591f\u7684\u5bf9\u5e94\u8d27\u5e01";break;case 6:p="\u62cd\u54c1\u4e0d\u5b58\u5728"}GameUtil.onShowTip(p)};e.prototype.oncePriceTip=function(g,l){l="";switch(g.record){case 0:l="\u4e00\u53e3\u4ef7\u7ade\u4e70\u6210\u529f";Laya.stage.event("updateWordAuciton");Laya.stage.event("updateMyAuctionWin");Laya.stage.event("closeAuctionBidTip");break;case -1:l=
"\u975e\u6cd5\u7684\u8d27\u5e01\u7c7b\u578b";break;case -2:l="\u8d27\u5e01\u7c7b\u578b\u672a\u542f\u7528";break;case -3:l="\u6ca1\u6709\u8db3\u591f\u7684\u5bf9\u5e94\u8d27\u5e01";break;case -4:l="\u4e0d\u80fd\u8d2d\u4e70\u6b64\u62cd\u54c1"}GameUtil.onShowTip(l)};e.prototype.updateAuctionItemInfo=function(g,l){l=fnDecode6BitBuf(l,l.length,!1);l=TClientItem(l.pszDest);g_aucitonItemList[""+g.record]=l;Laya.stage.event("updateItemData");Laya.stage.event("updateSaleAuctionItem",l);Laya.stage.event("updateShelvesItemData")};
e.prototype.parseRankData=function(g,l){l=fnDecode6BitBuf(l,l.length).pszDest;var p=[];p[g.record]=[];for(var q=0;q<g.param;q++)p[g.record].push(TSimpleRankingData(l,q));Laya.stage.event("updateRankData",[p[g.record],g.record])};return e}(),LogClientSocket=function(){function e(){this.byte=new Laya.Byte;this.byte.endian=Laya.Byte.LITTLE_ENDIAN;this.socket=new Laya.Socket;this.socket.endian=Laya.Byte.LITTLE_ENDIAN;this.socket.on(Laya.Event.OPEN,this,this.openHandler);this.socket.on(Laya.Event.CLOSE,
this,this.closeHandler);this.socket.on(Laya.Event.ERROR,this,this.errorHandler)}var f=[],a=0;e.prototype.OpenServer=function(b){if(""!=b){var d=b.split("/");3<=d.length&&(g_Cai_GameID=parseInt(d[0]),g_Cai_ServerIP=d[1],g_Cai_ServerPort=parseInt(d[2]),g_Cai_nProductID=parseInt(d[3]),Laya.timer.loop(3E3,this,this.loopSendLogMessage),console.log("\u91c7\u96c6\u670d\u52a1\u5668\u4fe1\u606f\uff01",b))}};e.prototype.loopSendLogMessage=function(){10<=a&&(Laya.timer.clear(this,this.loopSendLogMessage),f=
[]);this.socket.connected?(this.m_SendMsg="",0<f.length&&(this.m_SendMsg=f[0],f.splice(0,1)),""!=this.m_SendMsg&&this.socket.send(this.m_SendMsg)):(0<g_Cai_GameID&&""!=g_Cai_ServerIP&&0<g_Cai_ServerPort&&65535>g_Cai_ServerPort&&this.connect(g_Cai_ServerIP,g_Cai_ServerPort),a+=1)};e.prototype.connect=function(b,d){this.socket.connect(b,d)};e.prototype.openHandler=function(){console.log("\u8fde\u63a5\u91c7\u96c6\u670d\u52a1\u5668\u6210\u529f\uff01---------")};e.prototype.AddGameDataLog=function(b,d,
n,c,h){var m={},g=Objectcontrol.self_obj;m.account="LZ_H5_Client";m.password="lz_H5_zhanji";m.MAC="H5:BB:CC:DD:11:F1";m.AreaId=g_Cai_GameID;m.ProductID=g_Cai_nProductID;m.areaname=g_ServerName;m.LocalTime=GameUtil.getformattimestamp(Laya.Browser.now());m.id=b;m.mapno=Mapdata.cur_id;m.Channel=g_ChannelId;m.Terminal=g_Termial;g?(m.x=g.grid.x,m.y=g.grid.y,m.charname=g_RoleName,m.charlevel=g.m_Abil&&g.m_Abil.Level?g.m_Abil.Level:0):(m.x=0,m.y=0,m.charname="",m.charlevel=0);m.itemname=d;m.itemid=n;m.reserved1=
c;m.reserved2=h;b=JSON.stringify(m);f.push(b)};e.prototype.closeHandler=function(b){this.socket.close()};e.prototype.errorHandler=function(b){this.socket.close()};return e}(),SendMessage=function(){function e(){this.keyMap={};this.connectKey="";this.clsocket=new ClientSocket}var f=0;e.prototype.getIPPortCount=function(){return this.clsocket.getIPPortCount()};e.prototype.End=function(){this.clsocket.End()};e.prototype.SendMonsterGM=function(a){if("testgm"==a)return open_gm=!0;if(open_gm&&"pbwjyes"==
a)return gm_show_player=!1,!0;if(open_gm&&"pbwjno"==a)return gm_show_player=!0;if(open_gm&&"pbnpcyes"==a)return gm_show_npc=!1,!0;if(open_gm&&"pbnpcno"==a)return gm_show_npc=!0;if(open_gm&&"pbjnyes"==a)return gm_show_skill=!1,!0;if(open_gm&&"pbjnno"==a)return gm_show_skill=!0;if(open_gm&&-1!=a.indexOf("pbwjyes/"))return a=a.split("/"),gm_show_pl_name=a[1],gm_show_pl_visible=!1,!0;if(open_gm&&-1!=a.indexOf("pbwjno/"))return a=a.split("/"),gm_show_pl_name=a[1],gm_show_pl_visible=!0;if(open_gm&&-1!=
a.indexOf("pbmapyes/"))return a=a.split("/"),gm_show_map=parseInt(a[1]),Laya.stage.event("gm_show_map_type"),!0;if(open_gm&&-1!=a.indexOf("pbmapno/"))return gm_show_map=-1,Laya.stage.event("gm_show_map_type"),!0;if(open_gm&&"xsgz"==a||open_gm&&"qxgz"==a)return!0;if(open_gm&&"openmsg"==a)return gm_print_msg=!0;if(open_gm&&"closemsg"==a)return gm_print_msg=!1,!0;if(open_gm&&"kqckms"==a||open_gm&&"gbckms"==a)return!0;if(open_gm&&"help"==a)return Laya.stage.event("open_gm_info","\u5c4f\u853d\u73a9\u5bb6: pbwjyes \r \u663e\u793a\u73a9\u5bb6: pbwjno \r  \u5c4f\u853dnpc: pbnpcyes \r \u663e\u793anpc pbnpcno \r \u5c4f\u853d\u6280\u80fd: pbjnyes \r \u663e\u793a\u6280\u80fd:pbjnno \r \u5c4f\u853d\u5730\u56fe: pbmapyes \r  \u6253\u5f00\u6d88\u606f\uff1aopenmsg \r \u6027\u80fd\u7edf\u8ba1\uff1a opentjsocket\u5b9a\u65f6\u5668:timer \r killsocket\u5b9a\u65f6\u5668: 111 \r \u91cd\u542f\u5b9a\u65f6\u5668: 2222 \r \u6253\u5f00\u9762\u677f\uff1a open"),
!0;if(open_gm&&"opentj"==a)return Laya.Stat.show(0,60),!0;if(open_gm&&"closetj"==a)return Laya.Stat.hide(),!0;if(open_gm&&"timer"==a)return gm_has_socket_timer=!0;if(open_gm&&"111"==a)return Laya.timer.clear(this.clsocket,this.clsocket.loopToGetMessage),!0;if(open_gm&&"222"==a)return Laya.timer.clear(this.clsocket,this.clsocket.loopToGetMessage),Laya.timer.loop(100,this.clsocket,this.clsocket.loopToGetMessage),!0;if(open_gm&&"open"==a)return Laya.stage.event("open_gm"),!0};e.prototype.SendNpcCMD=
function(a,b,d){b=_TDEFAULTMESSAGE(CM_MERCHANTDLGSELECT,b,d,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendLoginToken=function(a){this.isToken=!0;var b=_TDEFAULTMESSAGE(CM_TEST,0,0,0,0);this.sendPacket(b,a)};e.prototype.connectLoginSvr=function(a,b){this.connectKey="login_gate";this.clsocket.connectToGameGate=!1;this.clsocket.connect(a,b)};e.prototype.connectRoleSvr=function(a,b){this.connectKey="role_gate";this.clsocket.connectToGameGate=!1;this.clsocket.connect(a,b);this.GameIp=a;
this.GamePort=b};e.prototype.connectGameSvr=function(a,b){this.connectKey="game_gate";this.clsocket.connect(a,b);this.clsocket.connectToGameGate=!0};e.prototype.reconnectGameSvr=function(a,b){this.connectKey="game_gate_relink";this.clsocket.connect(a,b);this.clsocket.connectToGameGate=!0};e.prototype.sendLogin=function(a,b){this.isToken&&(this.isToken=!1,a+="@2");var d=_TDEFAULTMESSAGE(CM_IDPASSWORD,0,0,1,0);a=EncodeString(a+"/"+b);this.sendPacket(d,a)};e.prototype.SendExitToLogin=function(){var a=
_TDEFAULTMESSAGE(CM_SOFTCLOSE,0,0,0,0);this.sendPacket(a,"")};e.prototype.getNpcInfo=function(){var a=_TDEFAULTMESSAGE(CM_QUERYNAVIGATE,0,0,0,0);this.sendPacket(a,"")};e.prototype.SendCaiji=function(a){var b=g_ChannelId,d=CodeUtil._MAKEWORD(24,g_Termial);a=_TDEFAULTMESSAGE(a,b,d,0,0);b=EncodeString("0123456789ab ");this.sendPacket(a,b)};e.prototype.SendUseItem=function(a,b){a=_TDEFAULTMESSAGE(CM_EAT,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.SendDeleteItem=function(a){if(!a.s.boIsBind||
!a.s.boDropFree){var b=_TDEFAULTMESSAGE(CM_DROPITEM,a.MakeIndex,1,0,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)}};e.prototype.DepotOrBagItems=function(a,b){a=_TDEFAULTMESSAGE(CM_STORAGEVIEW,a,b,0,0);ItemMgr.getInstance();ItemMgr.getInstance();this.sendPacket(a,"")};e.prototype.TakeOffItem=function(a,b){b=_TDEFAULTMESSAGE(CM_TAKEOFFITEM,a.MakeIndex,b,0,0);a=a.s.Name.split("(*)");var d="";1<a.length?d=a[1]:d=a[0];d=EncodeString(d);this.sendPacket(b,d)};e.prototype.ClickMapItem=function(a,b){a=
_TDEFAULTMESSAGE(CM_PICKUP,0,a,b,0);this.sendPacket(a,"")};e.prototype.autoPick=function(a,b){a=_TDEFAULTMESSAGE(CM_AUTOPICKUPITEMS,0,a,b,0);this.sendPacket(a,"")};e.prototype.autoPickDifferent=function(a){var b=_TDEFAULTMESSAGE(CM_AUTOPICKUPITEMS,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.TakeOnItem=function(a,b){ItemMgr.getInstance().LastTakeOnPos=b;b=_TDEFAULTMESSAGE(CM_TAKEONITEM,a.MakeIndex,b,0,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)};e.prototype.StartTrade=function(a){a=
_TDEFAULTMESSAGE(CM_DEALTRY,0,0,0,0);this.sendPacket(a,"")};e.prototype.AddTradeItem=function(a){var b=_TDEFAULTMESSAGE(CM_DEALADDITEM,a.MakeIndex,0,0,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)};e.prototype.TradeGold=function(a){a=_TDEFAULTMESSAGE(CM_DEALCHGGOLD,a,0,0,0);this.sendPacket(a,"")};e.prototype.SubmitTrade=function(){var a=_TDEFAULTMESSAGE(CM_DEALEND,0,0,0,0);this.sendPacket(a,"")};e.prototype.DeleteTradeItem=function(a){var b=_TDEFAULTMESSAGE(CM_DEALDELITEM,a.MakeIndex,0,0,0);a=
EncodeString(a.s.Name);this.sendPacket(b,a)};e.prototype.CancelTrade=function(){var a=_TDEFAULTMESSAGE(CM_DEALCANCEL,0,0,0,0);this.sendPacket(a,"")};e.prototype.sendSelectServer=function(a){var b=_TDEFAULTMESSAGE(CM_SELECTSERVER,sectionInfo,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendreqserver=function(a){var b=_TDEFAULTMESSAGE(SM_GETSERVERLIST,CLIENT_JS_VERSION_NUMBER,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendChangePassword=function(a,b,d){var n=_TDEFAULTMESSAGE(CM_CHANGEPASSWORD,
0,0,0,0);a=EncodeString(a+"\t"+b+"\t"+d);this.sendPacket(n,a)};e.prototype.sendGroupList=function(){var a=_TDEFAULTMESSAGE(CM_GROUPLIST,0,0,0,0);this.sendPacket(a)};e.prototype.sendGroupApply=function(a){var b=_TDEFAULTMESSAGE(CM_GROUPAPPLY,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGroupAccept=function(a){var b=_TDEFAULTMESSAGE(CM_GROUPACCEPT,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGroupRefuse=function(a){var b=_TDEFAULTMESSAGE(CM_GROUPREFUSE,0,0,0,
0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendNewAccount=function(a,b){var d=g_ChannelId,n=CodeUtil._MAKEWORD(24,g_Termial);d=_TDEFAULTMESSAGE(CM_ADDNEWUSER,0,0,n,d);a=fnEncode6BitBuf(a,a.length)+fnEncode6BitBuf(b,b.length);this.sendPacket(d,a)};e.prototype.sendUpdateAccount=function(a,b){var d=_TDEFAULTMESSAGE(CM_UPDATEUSER,0,0,0,0);a=fnEncode6BitBuf(a,a.length)+fnEncode6BitBuf(b,b.length);this.sendPacket(d,a)};e.prototype.sendQueryRole=function(a,b){if("game_gate"!=this.connectKey&&
"game_gate_relink"!=this.connectKey){var d=g_ChannelId,n=CodeUtil._MAKEWORD(24,g_Termial);this.certifyCode=b;this.UID=a;d=_TDEFAULTMESSAGE(CM_QUERYCHR,sectionInfo,0,n,d);a=EncodeString(a+"/"+b);this.sendPacket(d,a)}};e.prototype.sendNewRole=function(a,b,d,n,c){var h=_TDEFAULTMESSAGE(CM_NEWCHR,sectionInfo,0,0,0);a=EncodeString(a+"/"+b+"/"+d+"/"+n+"/"+c);g_tempJob=c+"|"+n;g_tempName=b;this.sendPacket(h,a)};e.prototype.sendDeleteRole=function(a){var b=_TDEFAULTMESSAGE(CM_DELCHR,sectionInfo,0,0,0);a=
EncodeString(a);this.sendPacket(b,a)};e.prototype.sendSelectRole=function(a,b){var d=_TDEFAULTMESSAGE(CM_SELCHR,sectionInfo,0,1,0);a=EncodeString(a+"/"+b);this.sendPacket(d,a)};e.prototype.sendQueryDeleteChr=function(a){var b=_TDEFAULTMESSAGE(CM_QUERYDELCHR,sectionInfo,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGetBackBeleteChr=function(a,b){var d=_TDEFAULTMESSAGE(CM_GETBACKDELCHR,sectionInfo,0,0,0);a=EncodeString(a+"/"+b);this.sendPacket(d,a)};e.prototype.sendRunLogin=function(a,
b,d){var n=GetKey(),c=GetKeyValue(n);mac_key=c;c=encryStringK(port_key,c);var h=app_imei,m=app_imei,g="0";"game_gate_relink"==this.connectKey&&(g="1");a=EncodeString("**"+c+"/"+a+"/"+b+"/"+d+"/"+CLIENT_VERSION_NUMBER+"/"+n+"/"+RUNLOGINCODE+"/"+h+"/"+m+"/"+game_scene_code+"/"+g_Termial+"/"+g_ChannelId+"/"+g);9>f?f++:f=0;this.clsocket.send("#"+f+a+"!");verify_through=!0};e.prototype.sendNoticeOK=function(){var a=string2ByteArray("puMbqcHc]HNSUiTPidIpy@VLti");a=Crc32(a.arr,a.len);CodeUtil._LOWORD(a);
var b=CodeUtil._HIWORD(a),d=CodeUtil._MAKEWORD(0,12);a=CodeUtil.getKeyValue(32);b=_TDEFAULTMESSAGE(CM_LOGINNOTICEOK,0,108,b,d);d=decryString("puMbqcHc]HNSUiTPidIpy@VLti");a=encryStringK(d,a);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendOpenMinimap=function(){var a=_TDEFAULTMESSAGE(CM_WANTMINIMAP,0,0,0,0);this.sendPacket(a)};e.prototype.sendRoleMessage=function(a,b,d,n){a=_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,d),0,n,0);this.sendPacket(a)};e.prototype.sendHitMessage=function(a,b,d,n,c){a=
_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,d),0,n,0);this.sendPacket(a)};e.prototype.sendSpellMessage=function(a,b,d,n,c,h){g_atttime=Laya.Browser.now();for(var m=0,g=0;g<g_SetupMagicList.length;g++)g_SetupMagicList[g]&&g_SetupMagicList[g].Def.wMagicId==n&&(m=g_SetupMagicList[g].Def.MagicAttr);n=m<<13|n&8191;a=_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,d),CodeUtil._LOWORD(c),n,CodeUtil._HIWORD(c));null!=h&&(h=EncodeString(h));this.sendPacket(a,h)};e.prototype.sendLockSpellMsg=function(a,b,d,n,c){a=_TDEFAULTMESSAGE(a,
CodeUtil._MAKELONG(b,d),CodeUtil._LOWORD(c),n,CodeUtil._HIWORD(c));this.sendPacket(a,NULL)};e.prototype.sendRideMessage=function(a,b,d){a=_TDEFAULTMESSAGE(a,0,b,d,0);this.sendPacket(a)};e.prototype.sendQueryMessage=function(a){a=_TDEFAULTMESSAGE(a,0,0,0,0);this.sendPacket(a)};e.prototype.sendTakeOnItem=function(a,b,d){a=_TDEFAULTMESSAGE(CM_TAKEONITEM,b,a,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendTakeOnOffItem=function(a,b,d,n){a=_TDEFAULTMESSAGE(a,n,b,0,0);d=EncodeString(d);this.sendPacket(a,
d)};e.prototype.sendEat=function(a,b,d){a=_TDEFAULTMESSAGE(CM_EAT,b,a,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendStackThing=function(a,b,d,n){var c=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_OVERLAPITEM,a,c,b,n);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendStackDrug=function(a,b,d,n){var c=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_OVERLAPDRUG,a,c,b,n);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendHeroStackThing=function(a,
b,d,n){var c=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_HEROOVERLAPITEM,a,c,b,n);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendHeroStackDrug=function(a,b,d,n){var c=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_OVERLAPDRUG,a,c,b,n);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.blessbottle=function(a,b,d){a=_TDEFAULTMESSAGE(CM_PACKAGEITEM,b,a,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.blessbottleH=function(a,b,d){a=_TDEFAULTMESSAGE(CM_HEROPACKAGEITEM,
b,a,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendQueryName=function(a,b,d){a=_TDEFAULTMESSAGE(CM_QUERYUSERNAME,a,b,d,0);this.sendPacket(a)};e.prototype.sendQueryState=function(a,b,d){a=_TDEFAULTMESSAGE(CM_QUERYUSERSTATE,a,b,d,0);this.sendPacket(a)};e.prototype.sendQueryClose=function(){var a=_TDEFAULTMESSAGE(CM_QUERYCLOSE,1,0,0,0);this.sendPacket(a)};e.prototype.sendItemIndex=function(a,b,d){a=_TDEFAULTMESSAGE(a,b,0,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendDropItem=
function(a,b,d){b=_TDEFAULTMESSAGE(CM_DROPITEM,b,d,0,0);a=a.split("(*)");d="";1<a.length?d=a[1]:d=a[0];d=EncodeString(d);this.sendPacket(b,d)};e.prototype.sendDropGold=function(a){a=_TDEFAULTMESSAGE(CM_DROPGOLD,a,0,0,0);this.sendPacket(a)};e.prototype.sendButchAnimal=function(a,b,d,n){a=_TDEFAULTMESSAGE(CM_BUTCH,n,a,b,d);this.sendPacket(a)};e.prototype.sendConfig=function(a){a=1==a?1:0;a=_TDEFAULTMESSAGE(CM_CONFIG,a,a,a,a);this.sendPacket(a)};e.prototype.sendHeroMagicKeyChange=function(a){a=_TDEFAULTMESSAGE(CM_HEROMAGICKEYCHANGE,
a,0,0,1);this.sendPacket(a)};e.prototype.sendOpenDoor=function(a,b,d){a=_TDEFAULTMESSAGE(CM_OPENDOOR,d,a,b,0);this.sendPacket(a)};e.prototype.sendNPCMessage=function(a,b,d,n){a=_TDEFAULTMESSAGE(a,b,0,0,d);n=EncodeString(n);this.sendPacket(a,n)};e.prototype.sendChooseNpcDialog=function(a,b,d){a=_TDEFAULTMESSAGE(CM_MERCHANTDLGSELECT,a,d,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.sdCM_SERVERUNIXTIME=function(){var a=_TDEFAULTMESSAGE(CM_SERVERUNIXTIME,0,0,0,0);this.sendPacket(a)};e.prototype.sendSaleDetailItem=
function(a,b){b=_TDEFAULTMESSAGE(CM_GETSELLOFFDETAILITEM,a.npcId,b,0,0);a=EncodeString(a.name);this.sendPacket(b,a)};e.prototype.sendGetDetailItem=function(a,b){b=_TDEFAULTMESSAGE(CM_USERGETDETAILITEM,a.npcId,b,0,0);a=EncodeString(a.name);this.sendPacket(b,a)};e.prototype.sendBuyItem=function(a){var b=CodeUtil._LOWORD(a.gstock),d=CodeUtil._HIWORD(a.gstock);b=_TDEFAULTMESSAGE(CM_USERBUYITEM,a.npcId,b,d,1);a=EncodeString(a.name);this.sendPacket(b,a)};e.prototype.sendGiveItem=function(a,b){var d=CodeUtil._LOWORD(a.MakeIndex),
n=CodeUtil._HIWORD(a.MakeIndex);a=EncodeString(a.s.Name);b=_TDEFAULTMESSAGE(CM_UPGRADEDLGITEM,b,d,n,0);this.sendPacket(b,a)};e.prototype.SendButItemFormInfo=function(a){var b=CodeUtil._LOWORD(a.MakeIndex),d=CodeUtil._HIWORD(a.MakeIndex);b=_TDEFAULTMESSAGE(CM_USERBUYITEM,a.npcId,b,d,1);a=EncodeString(a.s.Name);this.sendPacket(b,a)};e.prototype.SendButItemFormSale=function(a){var b=CodeUtil._LOWORD(a.MakeIndex),d=CodeUtil._HIWORD(a.MakeIndex);b=_TDEFAULTMESSAGE(CM_BUYSELLOFFITEM,a.npcId,b,d,0);a=EncodeString(a.s.Name);
this.sendPacket(b,a)};e.prototype.sendBindBuyItem=function(a){var b=CodeUtil._LOWORD(a.gstock),d=CodeUtil._HIWORD(a.gstock);b=_TDEFAULTMESSAGE(CM_USERBINDBUYITEM,a.npcId,b,d,1);a=EncodeString(a.name);this.sendPacket(b,a)};e.prototype.SendButBindItemFormInfo=function(a){var b=CodeUtil._LOWORD(a.MakeIndex),d=CodeUtil._HIWORD(a.MakeIndex);b=_TDEFAULTMESSAGE(CM_USERBINDBUYITEM,a.npcId,b,d,1);a=EncodeString(a.s.Name);this.sendPacket(b,a)};e.prototype.sendTranslateChoose=function(a){var b=_TDEFAULTMESSAGE(CM_BOXITEM,
10,0,0,0);a=EncodeString(a+"");this.sendPacket(b,a)};e.prototype.sendTranslateItem=function(a,b,d,n){a=_TDEFAULTMESSAGE(CM_SELLOFFITEM,d,CodeUtil._LOWORD(a),CodeUtil._HIWORD(a),0);b=EncodeString(n+"/"+b);this.sendPacket(a,b)};e.prototype.sendQueryPrice=function(a,b,d){G_Show_Item_Price=0;a=_TDEFAULTMESSAGE(CM_MERCHANTQUERYSELLPRICE,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendSellItem=function(a,b,d){a=_TDEFAULTMESSAGE(CM_USERSELLITEM,a,CodeUtil._LOWORD(b),
CodeUtil._HIWORD(b),0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendRepairItem=function(a,b,d){ItemMgr.getInstance().LastRepairItemId=b;a=_TDEFAULTMESSAGE(CM_USERREPAIRITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendQueryRepairCost=function(a,b,d){G_Show_Item_Price=0;a=_TDEFAULTMESSAGE(CM_MERCHANTQUERYREPAIRCOST,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendStorageItem=function(a,
b,d){a=_TDEFAULTMESSAGE(CM_USERSTORAGEITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendTakeBackStorageItem=function(a,b,d,n){a=_TDEFAULTMESSAGE(CM_USERTAKEBACKSTORAGEITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),d);n=EncodeString(n);this.sendPacket(a,n)};e.prototype.sendMakeDrugItem=function(a,b){a=_TDEFAULTMESSAGE(CM_USERMAKEDRUGITEM,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.sendOpenGuildDlg=function(){var a=_TDEFAULTMESSAGE(CM_OPENNEWGUILDDLG,
0,0,0,0);this.sendPacket(a)};e.prototype.guildMemberList=function(){var a=_TDEFAULTMESSAGE(CM_GUILDMEMBERLIST,0,0,0,0);this.sendPacket(a)};e.prototype.guildAddMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDADDMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.guilddelMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDDELMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.guildEditorNotice=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATENOTICE,0,0,0,0);39999<a.length&&
a.slice(0,3999);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.guildEditorInfo=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATERANKINFO,0,0,0,0);499<a.length&&a.slice(0,499);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.GuildManagerEditor=function(a,b,d){b=_TDEFAULTMESSAGE(CM_GUILDMANAGEEDIT,0,d,b,0);a=EncodeString(a);this.sendPacket(b,a);this.sendGuildMemberList(1)};e.prototype.sendGuildHome=function(){var a=_TDEFAULTMESSAGE(CM_GUILDHOME,0,0,0,0);this.sendPacket(a)};e.prototype.sendGuildMemberList=
function(a){a=_TDEFAULTMESSAGE(CM_OPENNEWGUILDDLG,0,0,a,0);this.sendPacket(a)};e.prototype.GuildManagereCruit=function(a,b,d){var n=_TDEFAULTMESSAGE(CM_GUILDMANAGERECRUIT,0,0,0,0);a=EncodeString(a+";"+b+";"+d);this.sendPacket(n,a)};e.prototype.GuildManagereCruit2=function(a,b){a=_TDEFAULTMESSAGE(CM_GUILDMANAGERECRUIT,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.guildRefuseAll=function(){var a=_TDEFAULTMESSAGE(CM_GUILDMANAGEADD,0,0,2,0);this.sendPacket(a,"")};e.prototype.GuildOperate=
function(a,b){a=_TDEFAULTMESSAGE(CM_GUILDOPERATE,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.NewGuildOpt=function(a,b){a=_TDEFAULTMESSAGE(CM_NEWGUILD,0,0,0,a);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.sendGuildAddMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDADDMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.SendManagerAdd=function(a,b){a=_TDEFAULTMESSAGE(CM_GUILDMANAGEADD,0,0,a,0);b=EncodeString(b);this.sendPacket(a,b);this.sendGuildMemberList(1);
this.sendOpenGuildDlg()};e.prototype.sendGuildDelMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDDELMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGuildUpdateNotice=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATENOTICE,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGuildUpdateGrade=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATERANKINFO,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendAdjustBonus=function(a,b){a=_TDEFAULTMESSAGE(CM_ADJUST_BONUS,
a,0,0,0);b=objEncode6BitBuf(b);this.sendPacket(a,b)};e.prototype.sendSpeedHackUser=function(){var a=_TDEFAULTMESSAGE(CM_SPEEDHACKUSER,0,0,0,0);this.sendPacket(a)};e.prototype.sendCreateGroup=function(a){var b=_TDEFAULTMESSAGE(CM_CREATEGROUP,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGroupMode=function(){var a=_TDEFAULTMESSAGE(CM_GROUPMODE,0,G_BaseSetList[0].val?0:1,0,0);this.sendPacket(a,"")};e.prototype.sendGroupLeave=function(){var a=_TDEFAULTMESSAGE(CM_GROUPLEAVE,0,0,0,0);
this.sendPacket(a)};e.prototype.sendAddGroupMember=function(a){var b=_TDEFAULTMESSAGE(CM_ADDGROUPMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendDelGroupMember=function(a){var b=_TDEFAULTMESSAGE(CM_DELGROUPMEMBER,0,0,0,0),d=a;a=a.split(";");2<a.length&&(d=a[0]);d=EncodeString(d);this.sendPacket(b,d)};e.prototype.GetShopItems=function(a){a=CodeUtil._MAKEWORD(a,10*G_Cur_Shop_Page);a=_TDEFAULTMESSAGE(CM_GETSHOPITEMS,0,a,10,0);this.sendPacket(a,"")};e.prototype.GetStrangeItems=
function(){var a=_TDEFAULTMESSAGE(CM_GETSHOPITEMS,0,5,0,0);this.sendPacket(a,"")};e.prototype.BuyShopItem=function(a,b){a=_TDEFAULTMESSAGE(CM_BUYSHOPITEM,0,a,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.GiftShopItem=function(a,b){var d=_TDEFAULTMESSAGE(CM_SENTSHOPITEM,0,0,0,0);a=EncodeString(b+"|"+a);this.sendPacket(d,a)};e.prototype.sendCloseGame=function(){var a=_TDEFAULTMESSAGE(CM_SOFTCLOSE,0,0,0,0);this.sendPacket(a)};e.prototype.sendCloseGameForH5=function(){var a=_TDEFAULTMESSAGE(CM_H5CLOSE,
0,0,0,0);this.sendPacket(a)};e.prototype.sendSay=function(a){if("/"==a[0]){var b=a.split(" ")[0];b=b.slice(1,b.length);if(1==GameUtil.UserInFriendHMD(b))return;Laya.stage.event("new_chat_msg",[{info:a,front:252,bg:255,type:2}])}b=_TDEFAULTMESSAGE(CM_SAY,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.QueryBagItems=function(){var a=_TDEFAULTMESSAGE(CM_QUERYBAGITEMS,0,0,0,0);this.sendPacket(a)};e.prototype.sendNPCClick=function(a){a=_TDEFAULTMESSAGE(CM_CLICKNPC,a,0,0,0);this.sendPacket(a)};
e.prototype.sendPacket=function(a,b){verify_through&&(a=EncodeMessage(a),9>f?f++:f=0,this.clsocket.send(b?"#"+f+a+b+"!":"#"+f+a+"!"))};e.prototype.gettmissitem=function(a,b,d){a=_TDEFAULTMESSAGE(CM_GETMISSITEM,a,b,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.FriendOpition=function(a,b){console.log("friend--\x3e ",a,b);a=_TDEFAULTMESSAGE(CM_FRIENDS,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.FriendInfo=function(a){var b=_TDEFAULTMESSAGE(CM_SAY,0,0,0,0);a=EncodeString("@\u83b7\u53d6\u597d\u53cb\u4fe1\u606f 0 0 0 0 "+
a);this.sendPacket(b,a)};e.prototype.SendMagicKey=function(a,b,d){a=_TDEFAULTMESSAGE(CM_MAGICKEYCHANGE,a,b,0,d);this.sendPacket(a,"")};e.prototype.RemoveMagicForNpos=function(a){a=_TDEFAULTMESSAGE(CM_MAGICKEYCHANGE,a.Def.wMagicId,0,0,a.Def.MagicAttr);this.sendPacket(a,"")};e.prototype.SendChageAttackMode=function(a){a=_TDEFAULTMESSAGE(CM_H5ATTACKMODE,a,0,0,0);var b=EncodeString("@AttackMode");this.sendPacket(a,b)};e.prototype.sendOpenRedPack=function(a){a=_TDEFAULTMESSAGE(CM_OpenRedPack,a,0,0,0);
this.sendPacket(a)};e.prototype.sendRedPack=function(a,b,d,n,c){a=_TDEFAULTMESSAGE(CM_SENDREDPACKED,a,b,d,n);c=EncodeString(c);this.sendPacket(a,c)};e.prototype.sendRedPackMsg=function(a,b){a=_TDEFAULTMESSAGE(CM_SENDREDPACKEDREPLY,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.sendActorBuffClick=function(a,b){a=_TDEFAULTMESSAGE(a,0,0,b,0);this.sendPacket(a)};e.prototype.sendActorBuffButton=function(a){a=_TDEFAULTMESSAGE(CM_ACTORBUFFBUTTON,0,0,a,0);this.sendPacket(a)};e.prototype.sendtomsg=
function(a,b,d,n,c,h){a=_TDEFAULTMESSAGE(a,b,d,n,c);h=EncodeString(h);this.sendPacket(a,h)};e.prototype.ChangDir=function(a,b,d){a=_TDEFAULTMESSAGE(CM_TURN,CodeUtil._MAKELONG(a,b),0,d,0);this.sendPacket(a)};e.prototype.QuerySelectShopInfo=function(a,b){g_SelectedName=a;b=_TDEFAULTMESSAGE(CM_QUERYSELECTSHOPINFO,b,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.OpenMyBaiTan=function(){var a=_TDEFAULTMESSAGE(CM_OPENMYBAITAN,0,0,0,0);this.sendPacket(a)};e.prototype.AddBaiTanItem=function(a,
b,d){a=_TDEFAULTMESSAGE(CM_ADDPAIMAIITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),CodeUtil._MAKEWORD(0,d));this.sendPacket(a)};e.prototype.StopBaiTan=function(){var a=_TDEFAULTMESSAGE(CM_STOPBAITAN,0,0,0,0);this.sendPacket(a)};e.prototype.StartBaiTan=function(a){var b=_TDEFAULTMESSAGE(CM_STARTBAITAN,0,0,0,0);this.sendPacket(b,a)};e.prototype.BuyBaiTanItem=function(a,b,d,n,c){a=_TDEFAULTMESSAGE(CM_BUYBAITANITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),c);d=EncodeString(d+"|"+n);this.sendPacket(a,
d);Laya.stage.event("update_baitan_items")};e.prototype.SendzhaomuMsg=function(a){var b=_TDEFAULTMESSAGE(CM_SAY,0,0,0,0);a=EncodeString("@Organize-A-Team "+a);this.sendPacket(b,a)};e.prototype.SendAddZmu=function(a,b){b=_TDEFAULTMESSAGE(CM_ZHAOMU,0,b,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.SendGameMainBtnMsg=function(a){this.closeNpcWinOnUseScriptBtn();var b=_TDEFAULTMESSAGE(CM_GUI,-1,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.closeNpcWinOnUseScriptBtn=function(){GameUtil.InstanceOfMem(NewNpcWinUI)&&
GameApi.ShowNewNpcDlg(!1)};e.prototype.QueryUserShops=function(a,b,d){a=_TDEFAULTMESSAGE(CM_QUERYUSERSHOPS,0,a,b,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.SearchShopItems=function(a,b,d,n,c,h){var m=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);d=CodeUtil._MAKEWORD(d,2*n+c);h=EncodeString(h);a=_TDEFAULTMESSAGE(CM_SEARCHSHOPITEMS,a,m,b,d);this.sendPacket(a,h)};e.prototype.GetUserShops=function(a){a=_TDEFAULTMESSAGE(CM_GETUSERSHOPS,a,0,0,0);this.sendPacket(a)};e.prototype.SearchGetShopItems=
function(a){a=_TDEFAULTMESSAGE(CM_SEARCHGETSHOPITEMS,a,0,0,0);this.sendPacket(a)};e.prototype.QueryUserShopItems=function(a,b,d,n,c,h,m){var g=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);d=CodeUtil._MAKEWORD(d,2*n+c);h=EncodeString(m+"/"+h);a=_TDEFAULTMESSAGE(CM_QUERYUSERSHOPITEMS,a,g,b,d);this.sendPacket(a,h)};e.prototype.GetUserShopItems=function(a){a=_TDEFAULTMESSAGE(CM_GETUSERSHOPITEMS,a,0,0,0);this.sendPacket(a)};e.prototype.SendBuyUserShopItem=function(a,b){b=EncodeString(b);a=_TDEFAULTMESSAGE(CM_SENDBUYUSERSHOPITEM,
a,0,0,0);this.sendPacket(a,b)};e.prototype.SendMoveMyShopItem=function(a,b,d,n){n=EncodeString(n);a=_TDEFAULTMESSAGE(CM_SENDMOVEMYSHOPITEM,a,b,d,0);this.sendPacket(a,n)};e.prototype.GetMyShopItems=function(a,b){a=_TDEFAULTMESSAGE(CM_GETMYSHOPITEMS,a,b,0,0);this.sendPacket(a)};e.prototype.QueryMyShopSellingItems=function(a,b,d,n,c,h){var m=CodeUtil._LOWORD(c);c=CodeUtil._HIWORD(c);a=CodeUtil._MAKEWORD(a,2*b+d);h=EncodeString(h);n=_TDEFAULTMESSAGE(CM_QUERYMYSHOPSELLINGITEMS,n,m,c,a);this.sendPacket(n,
h)};e.prototype.QueryMyShopSelledItems=function(a,b,d,n,c,h){var m=CodeUtil._LOWORD(c);c=CodeUtil._HIWORD(c);a=CodeUtil._MAKEWORD(a,2*b+d);h=EncodeString(h);n=_TDEFAULTMESSAGE(CM_QUERYMYSHOPSELLEDITEMS,n,m,c,a);this.sendPacket(n,h)};e.prototype.QueryMyshopStorageItems=function(a,b,d,n,c,h){var m=CodeUtil._LOWORD(c);c=CodeUtil._HIWORD(c);a=CodeUtil._MAKEWORD(a,2*b+d);h=EncodeString(h);n=_TDEFAULTMESSAGE(CM_QUERYMYSHOPSTORAGEITEMS,n,m,c,a);this.sendPacket(n,h)};e.prototype.SendAddToMyShop=function(a,
b,d,n,c,h){b=CodeUtil._MAKEWORD(n,2*d+b);d=CodeUtil._LOWORD(c);c=CodeUtil._HIWORD(c);h=EncodeString(h);a=_TDEFAULTMESSAGE(CM_SENDADDTOMYSHOP,a,b,d,c);this.sendPacket(a,h)};e.prototype.SendChangeMyShopItem=function(a,b,d,n,c,h){b=CodeUtil._MAKEWORD(n,2*d+b);d=CodeUtil._LOWORD(c);c=CodeUtil._HIWORD(c);h=EncodeString(h);a=_TDEFAULTMESSAGE(CM_SENDCHANGEMYSHOPITEM,a,b,d,c);this.sendPacket(a,h)};e.prototype.SendDeleteSelledItem=function(a){a=_TDEFAULTMESSAGE(CM_SENDDELETESELLEDITEM,a,0,0,0);this.sendPacket(a)};
e.prototype.SendShopName=function(a){a=EncodeString(a);var b=_TDEFAULTMESSAGE(CM_SENDSHOPNAME,0,0,0,0);this.sendPacket(b,a)};e.prototype.SendShopStallStatus=function(){var a=_TDEFAULTMESSAGE(CM_SENDSHOPSTALLSTATUS,0,0,0,0);this.sendPacket(a)};e.prototype.SendtakeoffBox=function(){var a=_TDEFAULTMESSAGE(CM_TAKEOFFBOX,0,0,0,0);this.sendPacket(a)};e.prototype.SendOpenBox=function(a,b,d,n){a=_TDEFAULTMESSAGE(CM_OPENBOX,a,d,n,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.SendFishMessage=function(a,
b,d){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,a,0,b,0);this.sendPacket(a,d)};e.prototype.SendGetGetselBoxItem=function(a){a=_TDEFAULTMESSAGE(CM_SENDGETSELBOXITEM,0,0,0,a);this.sendPacket(a)};e.prototype.SendRotationBox=function(){var a=_TDEFAULTMESSAGE(CM_ROTATIONBOX,0,0,0,0);this.sendPacket(a)};e.prototype.CreateFishTeam=function(a,b){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,0,0,a,0);this.sendPacket(a,b)};e.prototype.AgreeFishUserToTeam=function(a){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,a,0,12,0);this.sendPacket(a,
"")};e.prototype.FishState=function(a){15==a?console.log("=======15:\u6536\u6746======="):console.log("+++++++16\uff1a\u653e\u6746+++++++=");a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,0,0,a,0);this.sendPacket(a,"")};e.prototype.AutoFish=function(a,b){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,a,b,0,0);this.sendPacket(a,"")};e.prototype.AddToTeam=function(a,b){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,b,0,a,0);this.sendPacket(a,"")};e.prototype.FishTeamChat=function(a){var b=_TDEFAULTMESSAGE(CM_FISHMESSAGE,0,0,20,0);this.sendPacket(b,
a)};e.prototype.IsDropFish=function(a,b){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,b,0,a,0);this.sendPacket(a,"")};e.prototype.NpcDlgOptions=function(a,b,d,n){var c=_TDEFAULTMESSAGE(CM_BOXITEM,n,0,0,0);if(0==n)var h=EncodeString(a+"/"+b+"/"+d+"/0");else 1==n||2==n?h=EncodeString(a+"/"+b+"/"+d):3==n&&(h=EncodeString("0/0"));this.sendPacket(c,h)};e.prototype.TakeOnItem2=function(a,b){b=_TDEFAULTMESSAGE(CM_TAKEONITEM,a.MakeIndex,b,0,0);a=a.s.Name.split("(*)");var d="";1<a.length?d=a[1]:d=a[0];d=EncodeString(d);
this.sendPacket(b,d)};e.prototype.TakeAotoOnItem=function(a,b,d){a=_TDEFAULTMESSAGE(CM_TAKEONITEM,a,b,0,0);d=d.split("(*)");b="";1<d.length?b=d[1]:b=d[0];b=EncodeString(b);this.sendPacket(a,b)};e.prototype.DepotOrBagItems2=function(a,b){a=_TDEFAULTMESSAGE(CM_STORAGEVIEW,a,b,0,0);this.sendPacket(a,"")};e.prototype.SendCUSTOMBUTTON=function(a){var b=_TDEFAULTMESSAGE(CM_CUSTOMBUTTON,0,0,0,0);this.sendPacket(b,EncodeString("@ButtonClick"+a))};e.prototype.sendhearbeat=function(){this.clsocket.send("*");
DELAY_TIME=Laya.Browser.now()};e.prototype.sendCardGame3=function(a){var b=_TDEFAULTMESSAGE(CM_LUASOCKET,0,300,0,0);a=EncodeString("Server#"+a);this.sendPacket(b,a)};e.prototype.send2lua=function(a,b){a=_TDEFAULTMESSAGE(CM_LUASOCKET,0,a,0,0);b=EncodeString("Server#"+b);this.sendPacket(a,b)};e.prototype.SuitInfo=function(a){var b=_TDEFAULTMESSAGE(CM_LUASOCKET,0,146,0,0);a=EncodeString("Server#"+a);this.sendPacket(b,a)};e.prototype.WECHATANDQQ=function(a){var b=_TDEFAULTMESSAGE(CM_WECHATANDQQ,0,0,1,
0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.showfashion=function(a){a=_TDEFAULTMESSAGE(CM_SHOWFASHION,0,0,a,0);this.sendPacket(a,"")};e.prototype.SendMapLoadend=function(){var a=_TDEFAULTMESSAGE(CM_MAPLOADEND,0,0,0,0);this.sendPacket(a)};e.prototype.SendHeroCall=function(){var a=_TDEFAULTMESSAGE(CM_HEROLOGON,0,0,0,0);this.sendPacket(a)};e.prototype.masterBagToHeroBag=function(a,b){a=_TDEFAULTMESSAGE(CM_MASTERBAGTOHEROBAG,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.heroBagToMasterBag=
function(a,b){a=_TDEFAULTMESSAGE(CM_HEROBAGTOMASTERBAG,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.heroTakeOn=function(a,b,d){a=_TDEFAULTMESSAGE(CM_HEROTAKEONITEM,a,b,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.QueryHeroBagItems=function(){var a=_TDEFAULTMESSAGE(CM_QUERYBAGITEMS,1,0,0,0);this.sendPacket(a)};e.prototype.HeroDropItems=function(a,b,d){b=_TDEFAULTMESSAGE(CM_HERODROPITEM,b,d,0,0);a=a.split("(*)");d="";1<a.length?d=a[1]:d=a[0];d=EncodeString(d);this.sendPacket(b,
d)};e.prototype.heroEat=function(a,b){a=_TDEFAULTMESSAGE(CM_HEROEAT,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.HeroTakeOffItem=function(a,b){b=_TDEFAULTMESSAGE(CM_HEROTAKEOFFITEM,a.MakeIndex,b,0,0);a=a.s.Name.split("(*)");var d="";1<a.length?d=a[1]:d=a[0];d=EncodeString(d);this.sendPacket(b,d)};e.prototype.HeroLock=function(a,b,d){a=_TDEFAULTMESSAGE(CM_HEROTARGET,a,b.x,b.y,d);this.sendPacket(a)};e.prototype.heroGuard=function(a){a=_TDEFAULTMESSAGE(CM_HEROPROTECT,0,a.x,a.y,0);this.sendPacket(a)};
e.prototype.sendHeroAtk=function(){var a=_TDEFAULTMESSAGE(CM_HEROGROUPATTACK,0,0,0,0);this.sendPacket(a)};e.prototype.SendCMOpenBox=function(a,b){var d=CodeUtil._LOWORD(a);a=CodeUtil._HIWORD(a);d=_TDEFAULTMESSAGE(CM_OPENITEMBOXEX,G_NPC_ID,d,a,0);b=EncodeString(b);this.sendPacket(d,b)};e.prototype.SendQFCMD=function(a){var b=_TDEFAULTMESSAGE(CM_GUI,-3,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendapi_getItem=function(a){a=_TDEFAULTMESSAGE(CM_API_GETITEM,a,0,0,0);this.sendPacket(a)};
e.prototype.SendUpdatidcard=function(a){var b=_TDEFAULTMESSAGE(CM_UPDATIDCARD,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendGetGameList=function(a){var b=CodeUtil._LOWORD(CLIENT_JS_VERSION_NUMBER),d=CodeUtil._HIWORD(CLIENT_JS_VERSION_NUMBER);a=_TDEFAULTMESSAGE(CM_GETGAMELIST,a,b,d,0);this.sendPacket(a)};e.prototype.getBackPassword=function(a){var b=_TDEFAULTMESSAGE(CM_GETBACKPASSWORD,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendUpgrade=function(a){var b=_TDEFAULTMESSAGE(CM_SENDUPGRADEDIALOG,
0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.sendNewTask=function(a){600<Laya.timer.currTimer-g_newTaskClickTick&&(g_newTaskClickTick=Laya.timer.currTimer,a=_TDEFAULTMESSAGE(CM_NEWTASKOPERATE,a,0,0,0),this.sendPacket(a))};e.prototype.sendGetMail=function(){var a=_TDEFAULTMESSAGE(CM_GETMAIL,0,0,0,0);this.sendPacket(a)};e.prototype.sendGetMailContent=function(a){a=_TDEFAULTMESSAGE(CM_GETMAILCONTENT,a,0,0,0);this.sendPacket(a)};e.prototype.sendGetMailItem=function(a){a=_TDEFAULTMESSAGE(CM_GETMAILITEM,
a,0,0,0);this.sendPacket(a)};e.prototype.sendGetAllMailItem=function(){var a=_TDEFAULTMESSAGE(CM_GETALLMAIL,0,0,0,0);this.sendPacket(a)};e.prototype.sendDeleteMail=function(a){a=_TDEFAULTMESSAGE(CM_DELETEMAIL,a,0,0,0);this.sendPacket(a)};e.prototype.sendDeleteAllMail=function(){var a=_TDEFAULTMESSAGE(CM_DELETEALLMAIL,0,0,0,0);this.sendPacket(a)};e.prototype.sendCheckMapItem=function(a){a=_TDEFAULTMESSAGE(12315,a,0,0,0);this.sendPacket(a)};e.prototype.sendLockedBagSlot=function(){var a=_TDEFAULTMESSAGE(CM_EXTENDLOCKEDBAGSLOT,
0,0,0,0);this.sendPacket(a)};e.prototype.sendCqbExchange=function(a,b){a=_TDEFAULTMESSAGE(a,0,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.sendCqbInfo=function(){var a=_TDEFAULTMESSAGE(CM_QUERYCRISTALINFO,0,0,0,0);this.sendPacket(a)};e.prototype.sendOpenGuildNewCreate=function(){var a=_TDEFAULTMESSAGE(CM_GUILOPENNEWCREATE,0,0,0,0);this.sendPacket(a)};e.prototype.sendGuildNewCreate=function(a,b,d){a=_TDEFAULTMESSAGE(CM_GUILNEWCREATE,a,b,0,0);d=EncodeString(d);this.sendPacket(a,d)};e.prototype.sendRequestAuctionList=
function(){var a=_TDEFAULTMESSAGE(CM_AUCTIONLIST,0,0,0,0);this.sendPacket(a)};e.prototype.sendOnePriceBuyAuction=function(a){a=_TDEFAULTMESSAGE(CM_AUCTIONBUYOUT,a,0,0,0);this.sendPacket(a)};e.prototype.sendPlusAuctionPrice=function(a,b){a=_TDEFAULTMESSAGE(CM_PLUSAUCTIONPRICE,a,0,0,0);b=EncodeString(b);this.sendPacket(a,b)};e.prototype.sendOffSaleAuction=function(a){a=_TDEFAULTMESSAGE(CM_OFFTHESHELF,a,0,0,0);this.sendPacket(a)};e.prototype.sendRequestDetailAuction=function(a){a=_TDEFAULTMESSAGE(CM_AUCTIONCLIENTITEM,
a,0,0,0);this.sendPacket(a)};e.prototype.sendSaleAuction=function(a,b,d,n){a=_TDEFAULTMESSAGE(CM_PUTONTHESHELF,a,b,0,0);d=EncodeString(d+"|"+n);this.sendPacket(a,d)};e.prototype.requestRankDataByType=function(a){a=_TDEFAULTMESSAGE(CM_NEWRANKING,a,0,0,0);this.sendPacket(a)};e.prototype.requestRankNameState=function(a){var b=_TDEFAULTMESSAGE(CM_RANKINGUSERSTATE,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};e.prototype.Refreshviewrange=function(a){a=_TDEFAULTMESSAGE(CM_REFRESHVIEWRANGE,a,0,0,0);this.sendPacket(a)};
e.prototype.sendPetLock=function(a){a=_TDEFAULTMESSAGE(CM_SLAVETARGET,lockingID,a.grid.x,a.grid.y,0);this.sendPacket(a)};e.prototype.getObjState=function(a){a=_TDEFAULTMESSAGE(CM_GETSTATUSCHANGED,a,0,0,0);this.sendPacket(a)};return e}(),voiceSocket=function(){function e(){this.byte=new Laya.Byte;this.byte.endian=Laya.Byte.LITTLE_ENDIAN;this.socket=new Laya.Socket;this.socket.on(Laya.Event.OPEN,this,this.openHandler);this.socket.on(Laya.Event.MESSAGE,this,this.receiveHandler);this.socket.on(Laya.Event.CLOSE,
this,this.closeHandler);this.socket.on(Laya.Event.ERROR,this,this.errorHandler);this.appid="1400219561";this.openid=Math.floor(100*Math.random()%99)+1E4;this.appkey="ul15qts0bhIN4T5L";this.roomtypes=[]}e.prototype.connect=function(f,a){console.log("\u8fde\u63a5\u8bed\u97f3\u670d\u52a1\u5668:",f,a);this.socket.connect(f,a)};e.prototype.openHandler=function(f){console.log("\u8fde\u63a5\u8bed\u97f3\u670d\u52a1\u5668\u6210\u529f\uff01---------");f=JSON.stringify({CMD:CCMD_CONFIG,DATA:{AreaName:g_ServerName,
CharacterName:g_RoleName}});this.send(f)};e.prototype.switchroom=function(f,a,b){a&&(console.log("\u623f\u95f4\u5f00\u5173---------"+f+a+b),f=JSON.stringify({CMD:CCMD_ROOM,DATA:{RoomCmdType:f,RoomType:a,RoomName:b,OpenID:this.openid}}),this.send(f))};e.prototype.switchsound=function(f){var a={};a.enable=f;f=JSON.stringify(a);console.log("---enableSpeaker---\x3e"+f);sendtonative("enableSpeaker",f)};e.prototype.switchMic=function(f){var a={};a.enable=f;f=JSON.stringify(a);console.log("---enableMic---\x3e"+
f);sendtonative("enableMic",f)};e.prototype.exitroom=function(f,a){f&&(console.log("\u79bb\u5f00\u623f\u95f4---------"+f+a),sendtonative("exitAudioRoom","exit"),this.switchroom(2,f,a))};e.prototype.enterroomfroSDK=function(f){f=JSON.stringify({appid:this.appid,openid:this.openid,roomid:f,key:this.appkey});console.log("---enterAudioRoom---\x3e"+f);sendtonative("enterAudioRoom",f)};e.prototype.initCMG=function(){var f=JSON.stringify({appid:this.appid,openid:this.openid,key:this.appkey});console.log("---initAudio---\x3e"+
f);sendtonative("initAudio",f)};e.prototype.send=function(f){this.socket.connected?this.socket.send(f):console.log("\u8bed\u97f3\u670d\u52a1\u5668\u5df2\u65ad\u5f00")};e.prototype.receiveHandler=function(f){console.log("\u63a5\u53d7\u8bed\u97f3\u670d\u52a1\u5668\u6d88\u606f\uff1a"+f);f=JSON.parse(f);switch(f.CMD){case SCMD_CONFIG:this.appid=f.DATA.GME.AppID;this.openid=f.DATA.GME.OpenID;this.appkey=f.DATA.GME.Key;this.roomtypes=f.DATA.RoomTypes;this.roomtypes.unshift("\u5173\u95ed");this.initCMG();
Laya.stage.event("VOICE_EVENT",["onvoiceopen"]);break;case SCMD_ROOM:this.enterroomfroSDK(f.DATA.RoomMarkName)}};e.prototype.closeHandler=function(f){console.log("-\u8bed\u97f3\u670d\u52a1\u5668\u5173\u95ed- ");Laya.stage.event("VOICE_EVENT",["onvoiceclose"])};e.prototype.errorHandler=function(f){console.log("-\u8bed\u97f3\u670d\u52a1\u5668\u51fa\u9519- ")};return e}(),scriptWorker='\n\nvar SOCKETHEADERSIZE = 20;\nvar RUNGATECODE = 0xAA55AA55;\nvar RUNGATECODEX = 0xAA9AAA9A;\nvar CGM_COMPDATA = 2;\t\t\t\t\t\t// \u8868\u793a\u538b\u7f29\u6570\u636e\n\nvar receiveBuf = [];\n\n// \u7ed3\u6784\u4f53\u7ffb\u8bd1 \nfunction TSocketHeader(buff) {\n    var obj = new Object;\n    var u32 = new Uint32Array(buff, 0, 5);\n    var u16 = new Uint16Array(buff, 4, 2);\n    obj.dwCode1 = u32[0];                               // LongWord 4\u4e2a\u5b57\u8282\n    obj.wIdent = u16[0];                                // Word \u7c7b\u578b 2\u4e2a\u5b57\u8282\n    obj.wReserved = u16[1];                             // Word \u7c7b\u578b 2\u4e2a\u5b57\u8282\n    obj.dwCode2 = u32[2];                               // LongWord 4\u4e2a\u5b57\u8282\n    obj.dwCrc = u32[3];                                 // LongWord 4\u4e2a\u5b57\u8282\n    obj.nLength = u32[4];                               // Integer 4\u4e2a\u5b57\u8282\n    return obj;\n};\n\n//\u5408\u5e76arraybuffer\nfunction addArrayBuffer(...arrays){\n    var totalLength = 0;\n    for(var arr of arrays){\n        totalLength += arr.length;\n    }\n    var result = new Uint8Array(totalLength);\n    var offset = 0;\n    for(var arr1 of arrays){\n        result.set(arr1, offset);\n        offset += arr1.length;\n    }\n    return result;\n}\n\n//\u53d1\u9001\u6d88\u606f\u5e8f\u5217\u5316\u5931\u8d25\nonmessageerror = (e) => {\n    //\u629b\u51fa\u5f02\u5e38\uff0c\u8ba9\u4e3b\u7ebf\u7a0b\u5904\u7406\n    throw new Error("xlh");\n}\n\n//\u7ed3\u675f\u81ea\u8eab\u7ebf\u7a0b\n// close();\n\n//\u76d1\u542c\u4e3b\u7ebf\u7a0b\u6d88\u606f\nonmessage = (e) => {\n    \n    var pack0 = new Uint8Array(e.data);\n\n    //\u5408\u5e76\u62c6\u5206\u7684\u5305\n    receiveBuf = addArrayBuffer(receiveBuf, pack0);\n\n    //\u4ee5\u4e0b\u5224\u65ad\u8868\u660e\uff0c\u7f13\u51b2\u533a\u4e2d\u53ef\u80fd\u6709\u4e86\u4e00\u4e2a\u53ef\u4ee5\u5904\u7406\u7684\u5305\n    if(receiveBuf.length > SOCKETHEADERSIZE)\n    {                \n        while(1)\n        {                        \n            var pMsg = new TSocketHeader(receiveBuf.buffer);                      \n            \n            if((pMsg.dwCode1 == RUNGATECODE) && (pMsg.dwCode2 == RUNGATECODEX)){\n                //\u7f13\u51b2\u533a\u6700\u524d\u8fb9\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5305\u5934\u6570\u636e\u5757\n\n                //\u4ee5\u4e0b\u5224\u65ad\u8868\u660e\uff0c\u6570\u636e\u8fd8\u6ca1\u6709\u63a5\u6536\u5b8c\uff0c\u8981\u9000\u51fa\u53bb\u7ee7\u7eed\u63a5\u6536\u5305\n                if((pMsg.nLength + SOCKETHEADERSIZE) > receiveBuf.length){\n                    break;\n                }\n\n                //\u628a\u5305\u4f53\u63d0\u53d6\u51fa\u6765\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5904\u7406    \n                var msgBuff = receiveBuf.slice(SOCKETHEADERSIZE, pMsg.nLength + SOCKETHEADERSIZE);\n                //\u6b65\u9aa41.\u5982\u679c\u662f\u538b\u7f29\u7684\u5305\u4f53\uff0c\u6821\u9a8c\u4e0bCRC\n                if(pMsg.wIdent == CGM_COMPDATA){\n                    if(pMsg.dwCrc != Crc32(msgBuff, msgBuff.length)) {\n                        //\u8fd9\u4e2a\u5904\u7406\u6709\u70b9\u8d39\u89e3\uff0cCRC\u90fd\u5931\u8d25\u4e86\uff0c\u5e94\u8be5\u6254\u6389\u8fd9\u6bb5\u5305\uff0c\u800c\u4e0d\u662f\u628a\u6570\u636e\u4e00\u70b9\u4e00\u70b9\u524d\u79fb\n                        receiveBuf = receiveBuf.slice(1);\n                        if(receiveBuf.length < SOCKETHEADERSIZE)\n                            break;\n\n                        continue;\n                    }\n                }\n                //\u6b65\u9aa42.CRC\u901a\u8fc7\uff0c\u4ece\u5305\u4e2d\u53d6\u51fa\u6d88\u606f\n                //\u53d1\u9001\u6d88\u606f\u7ed9\u4e3b\u7ebf\u7a0b\n                postMessage({pMsg:pMsg, msgBuff:msgBuff, length:msgBuff.length})\n                //\u6b65\u9aa43.\u4ece\u7f13\u51b2\u533a\u4e2d\u53bb\u6389\u8fd9\u6bb5\u5305\n                receiveBuf = receiveBuf.slice(SOCKETHEADERSIZE + pMsg.nLength);\n\n            }else{\n                //\u7f13\u51b2\u533a\u6700\u524d\u8fb9\u4e0d\u662f\u5b8c\u6574\u7684\u5305\u5934\u6570\u636e\u5757\uff0c\u5f88\u53ef\u80fd\u662f\u5783\u573e\u6570\u636e\uff0c\u8981\u53bb\u6389\n                receiveBuf = receiveBuf.slice(1);\n            }\n\n            if(receiveBuf.length < SOCKETHEADERSIZE)\n                break;\n\n        } \n    }\n}\n\n',
B64=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47];
function Base64Encode(e,f){for(var a=[],b=0,d=0,n=1;n<=Math.floor(f/3);n++)a[b+0]=B64[e[d]>>>2],a[b+1]=B64[((e[d]&3)<<4)+(e[d+1]>>>4)],a[b+2]=B64[((e[d+1]&15)<<2)+(e[d+2]>>>6)],a[b+3]=B64[e[d+2]&63],b+=4,d+=3;switch(f%3){case 1:a[b+0]=B64[e[d]>>>2];a[b+1]=B64[(e[d]&3)<<4];a[b+2]=61;a[b+3]=61;break;case 2:a[b+0]=B64[e[d]>>>2],a[b+1]=B64[((e[d]&3)<<4)+(e[d+1]>>>4)],a[b+2]=B64[(e[d+1]&15)<<2],a[b+3]=61}return{arr:a,len:4*Math.floor((f+2)/3)}}
function Base64Decode(e,f){for(var a=0,b=0,d=[0,0,0,0],n=[],c=0,h=1;h<=f/4;h++){for(c=0;3>=c;c++)65<=e[a]&&90>=e[a]?d[c]=e[a]-65:97<=e[a]&&122>=e[a]?d[c]=e[a]-97+26:48<=e[a]&&57>=e[a]?d[c]=e[a]-48+52:43==e[a]?d[c]=62:47==e[a]?d[c]=63:61==e[a]&&(d[c]=255),a++;n[b]=(d[0]<<2|d[1]>>>4)&255;c=b+1;255!=d[2]&&255==d[3]?(n[b+1]=(d[1]<<4|d[2]>>>2)&255,c=b+2,b++):255!=d[2]&&(n[b+1]=(d[1]<<4|d[2]>>>2)&255,n[b+2]=(d[2]<<6|d[3])&255,c=b+3,b+=2);b++}return{arr:n,len:c}}
function GetKey(){return(Math.round(100*Math.random())%58<<24)+(Math.round(100*Math.random())%58<<16)+(Math.round(100*Math.random())%58<<8)+Math.round(100*Math.random())%58>>>0}
function GetKeyValue(e){var f=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,60,61,62,64,91,92,93];var a=(e&4278190080)>>>24;var b=(e&16711680)>>>16;var d=(e&65280)>>>8;return String.fromCharCode(f[(e&255)>>>0])+String.fromCharCode(f[d])+String.fromCharCode(f[b])+String.fromCharCode(f[a])}
function GetAdapterMac(){for(var e="",f="0123456789ABCDEF".split(""),a,b=0;12>b;b++)a=Math.round(100*Math.random())%16,e+=f[a];return e}function encryBuffer(e,f){var a=GetKeyValue(GetKey());e=EncryptDes(e,f,a);f=Base64Encode(e,f);f=fnEncode6BitBuf(f.arr,f.len);return a.substr(0,2)+f+a.substr(2,2)}function encryStringK(e,f){e=string2ByteArray(e);f=EncryptDes(e.arr,e.len,f);f=Base64Encode(f,e.len);return fnEncode6BitBuf(f.arr,f.len)}
function Decode6BitBuf(e){var f=[0,0,252,248,240,224,192],a,b,d,n,c=[];var h=e.length;var m=2;for(a=n=d=b=0;a<h;a++){if(0<=e.charCodeAt(a)-60)var g=e.charCodeAt(a)-60;else break;if(8<=b+6)if(b=(n|(g&63)>>6-m)&255,c[d]=b,d++,b=0,6>m)m+=2;else{m=2;continue}n=g<<m&255&f[m]&255;b+=8-m}return c}function decryStringK(e,f){e=Decode6BitBuf(e);e=Base64Decode(e,e.length);return DecryptDes(e.arr,e.len,f)}
function decryString(e){var f=e.length;if(4>=f)return"";var a=e.substr(0,2)+e.substr(f-2,2);e=e.substr(2,f-4);e=DecodeString(e);e=string2ByteArray(e);e=Base64Decode(e.arr,e.len);a=DecryptDes(e.arr,e.len,a);return byteArray2String(a,e.len)}
var crc_table=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];
function Crc32(e,f){var a=306675199;for(var b=0;8<=f;)a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,a=crc_table[(a^e[b])&255]^a>>>8,b++,f-=8;if(0!=f){do a=crc_table[(a^e[b])&255]^a>>>8,b++,f--;while(0!=f)}return(a^4294967295)>>>0}
function _TDEFAULTMESSAGE(e,f,a,b,d){var n={};n.record=f;n.ident=e;n.param=a;n.tag=b;n.series=d;return n}function _TSHORTMSSEAGE(e,f){var a={};a.ident=e;a.msg=f;return a}function _PACKETMSG(e,f){var a={};a.msg=e;a.content=f;return a}function _TMSGHEADER(e,f,a,b,d,n){var c={};c.code=e;c.socket=f;c.userGateIdx=a;c.ident=b;c.temp=d;c.length=n;return c}
function EncodeMessage(e){var f=[];f[0]=e.record&255;f[1]=(e.record&65280)>>>8;f[2]=(e.record&16711680)>>>16;f[3]=(e.record&4278190080)>>>24;f[4]=e.ident&255;f[5]=(e.ident&65280)>>>8;f[6]=e.param&255;f[7]=(e.param&65280)>>>8;f[8]=e.tag&255;f[9]=(e.tag&65280)>>>8;f[10]=e.series&255;f[11]=(e.series&65280)>>>8;return fnEncode6BitBuf(f,12)}function zEncodeString(e){var f="";""!=e&&(e=string2ByteArray(e),f=(new Zlib.Deflate(e)).compress(),e=f.length,f=Array.from(f),f=fnEncode6BitBuf(f,e));return f}
function zDecodeString(e){if(""!=e){e=string2ByteArray(e);e=fnDecode6BitBuf(e.arr,e.len,!1);e=(new Zlib.Inflate(e.pszDest)).decompress();for(var f=0,a=0,b=[];f<e.length;)128>e[f]?b[a]=e[f]:(b[a]=getUcsByGbkAsc((e[f]<<8)+e[f+1]),f++),f++,a++;return e=byteArray2String(b,b.length)}}function zDecode2String(e){return""!=e?(e=string2ByteArray(e),e=fnDecode6BitBuf(e.arr,e.len,!1),(new Zlib.Inflate(e.pszDest)).decompress()):null}
function DecodeMessage(e){e=fnDecode6BitBuf(e,16,!1);var f=e.pszDest[0]+(e.pszDest[1]<<8)+(e.pszDest[2]<<16)+(e.pszDest[3]<<24);var a=e.pszDest[4]+(e.pszDest[5]<<8);return _TDEFAULTMESSAGE(a,f,e.pszDest[6]+(e.pszDest[7]<<8),e.pszDest[8]+(e.pszDest[9]<<8),e.pszDest[10]+(e.pszDest[11]<<8))}function EncodeString(e){e=ucsstr2gbkarr(e);return fnEncode6BitBuf(e,e.length)}
function DecodeString(e){e=fnDecode6BitBuf(e,e.length,!0);for(var f="",a,b,d=0;d<e.nDestPos;){a=e.pszDest[d].charCodeAt();if(127<a){d++;if(!e.pszDest[d])break;b=e.pszDest[d].charCodeAt();a=(a<<8)+b;b=getUcsByGbkAsc(a);a=String.fromCharCode(b);59337==b&&(a=" ");f+=a}else f+=e.pszDest[d];d++}return f}var Decode6BitMask=[252,248,240,224,192];
function fnEncode6BitBuf(e,f){for(var a=0,b,d=0,n="",c=0;c<f;c++){var h="number"==typeof e[c]?e[c]:e[c].charCodeAt();b=(d|h>>2+a)&63;d=h<<8-(2+a)>>2&63;a+=2;6>a?n+=String.fromCharCode(b+60):(n+=String.fromCharCode(b+60),n+=String.fromCharCode(d+60),d=a=0)}0<a&&(n+=String.fromCharCode(d+60));return n}
function fnDecode6BitBuf(e,f,a){for(var b=0,d=2,n=0,c,h,m=[],g=0;g<f&&e[g];g++){c="number"==typeof e[g]?e[g]:e[g].charCodeAt();if(0<=c-60)c-=60;else{b=0;break}if(8<=n+6)if(n=h|(c&63)>>6-d,m[b++]=n,n=0,6>d)d+=2;else{d=2;continue}h=c<<d&Decode6BitMask[d-2];n+=8-d}if(a)for(g=0;g<b;g++)m[g]=0==m[g]?"#0":String.fromCharCode(m[g]);return{pszDest:m,nDestPos:b}}
!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.JSZipUtils=e():"undefined"!=typeof global?global.JSZipUtils=e():"undefined"!=typeof self&&(self.JSZipUtils=e())}(function(){return function d(f,a,b){function n(m,g){if(!a[m]){if(!f[m]){var l="function"==typeof require&&require;if(!g&&l)return l(m,!0);if(c)return c(m,!0);throw Error("Cannot find module '"+m+"'");}g=a[m]={exports:{}};f[m][0].call(g.exports,function(p){var q=
f[m][1][p];return n(q?q:p)},g,g.exports,d,f,a,b)}return a[m].exports}for(var c="function"==typeof require&&require,h=0;h<b.length;h++)n(b[h]);return n}({1:[function(f,a,b){function d(){try{return new window.XMLHttpRequest}catch(h){}}var n={_getBinaryFromXHR:function(h){return h.response||h.responseText}},c=window.ActiveXObject?function(){var h;if(!(h=d()))a:{try{h=new window.ActiveXObject("Microsoft.XMLHTTP");break a}catch(m){}h=void 0}return h}:d;n.getBinaryContent=function(h,m){try{var g=c();g.open("GET",
h,!0);"responseType"in g&&(g.responseType="arraybuffer");g.overrideMimeType&&g.overrideMimeType("text/plain; charset=x-user-defined");g.onreadystatechange=function(l){if(4===g.readyState)if(200===g.status||0===g.status){var p=l=null;try{l=n._getBinaryFromXHR(g)}catch(q){p=Error(q)}m(p,l)}else m(Error("Ajax error for "+h+" : "+this.status+" "+this.statusText),null)};g.send()}catch(l){m(Error(l),null)}};a.exports=n},{}]},{},[1])(1)});
var ColorArray=[0,0,0,0,0,0,128,0,0,128,0,0,0,128,128,0,128,0,0,0,128,0,128,0,128,128,0,0,192,192,192,0,151,128,85,0,200,185,157,0,115,115,123,0,41,41,45,0,82,82,90,0,90,90,99,0,57,57,66,0,24,24,29,0,16,16,24,0,24,24,41,0,8,8,16,0,113,121,242,0,95,103,225,0,90,90,255,0,49,49,255,0,82,90,214,0,0,16,148,0,24,41,148,0,0,8,57,0,0,16,115,0,0,24,181,0,82,99,189,0,16,24,66,0,153,170,255,0,0,16,90,0,41,57,115,0,49,74,165,0,115,123,148,0,49,82,189,0,16,33,82,0,24,49,123,0,16,24,45,0,49,74,140,0,0,41,148,0,
0,49,189,0,82,115,198,0,24,49,107,0,66,107,198,0,0,74,206,0,57,99,165,0,24,49,90,0,0,16,42,0,0,8,21,0,0,24,58,0,0,0,8,0,0,0,41,0,0,0,74,0,0,0,157,0,0,0,220,0,0,0,222,0,0,0,251,0,82,115,156,0,74,107,148,0,41,74,115,0,24,49,82,0,24,74,140,0,17,68,136,0,0,33,74,0,16,24,33,0,90,148,214,0,33,107,198,0,0,107,239,0,0,119,255,0,132,148,165,0,33,49,66,0,8,16,24,0,8,24,41,0,0,16,33,0,24,41,57,0,57,99,140,0,16,41,66,0,24,66,107,0,24,74,123,0,0,74,148,0,123,132,140,0,90,99,107,0,57,66,74,0,24,33,41,0,41,57,70,
0,148,165,181,0,90,107,123,0,148,177,206,0,115,140,165,0,90,115,140,0,115,148,181,0,115,165,214,0,74,165,239,0,140,198,239,0,66,99,123,0,57,86,107,0,90,148,189,0,0,57,99,0,173,198,214,0,41,66,82,0,24,99,148,0,173,214,239,0,99,140,165,0,74,90,99,0,123,165,189,0,24,66,90,0,49,140,189,0,41,49,53,0,99,132,148,0,74,107,123,0,90,140,165,0,41,74,90,0,57,123,156,0,16,49,66,0,33,173,239,0,0,16,24,0,0,33,41,0,0,107,156,0,90,132,148,0,24,66,82,0,41,90,107,0,33,99,123,0,33,123,156,0,0,165,222,0,57,82,90,0,16,
41,49,0,123,189,206,0,57,90,99,0,74,132,148,0,41,165,198,0,24,156,16,0,74,140,66,0,66,140,49,0,41,148,16,0,16,24,8,0,24,24,8,0,16,41,8,0,41,66,24,0,173,181,165,0,115,115,107,0,41,41,24,0,74,66,24,0,74,66,49,0,222,198,99,0,255,221,68,0,239,214,140,0,57,107,115,0,57,222,247,0,140,239,247,0,0,231,247,0,90,107,107,0,165,140,90,0,239,181,57,0,206,156,74,0,181,132,49,0,107,82,49,0,214,222,222,0,181,189,189,0,132,140,140,0,222,247,247,0,24,8,0,0,57,24,8,0,41,16,8,0,0,24,8,0,0,41,8,0,165,82,0,0,222,123,0,
0,74,41,16,0,107,57,16,0,140,82,16,0,165,90,33,0,90,49,16,0,132,66,16,0,132,82,49,0,49,33,24,0,123,90,74,0,165,107,82,0,99,57,41,0,222,74,16,0,33,41,41,0,57,74,74,0,24,41,41,0,41,74,74,0,66,123,123,0,74,156,156,0,41,90,90,0,20,66,66,0,0,57,57,0,0,89,89,0,44,53,202,0,33,115,107,0,0,49,41,0,16,57,49,0,24,57,49,0,0,74,66,0,24,99,82,0,41,115,90,0,24,74,49,0,0,33,24,0,0,49,24,0,16,57,24,0,74,132,99,0,74,189,107,0,74,181,99,0,74,189,99,0,74,156,90,0,57,140,74,0,74,198,99,0,74,214,99,0,74,132,82,0,41,115,
49,0,90,198,99,0,74,189,82,0,0,255,16,0,24,41,24,0,74,136,74,0,74,231,74,0,0,90,0,0,0,136,0,0,0,148,0,0,0,222,0,0,0,238,0,0,0,251,0,0,148,90,74,0,181,115,99,0,214,140,123,0,214,123,107,0,255,136,119,0,206,198,198,0,156,148,148,0,198,148,156,0,57,49,49,0,132,24,41,0,132,0,24,0,82,66,74,0,123,66,82,0,115,90,99,0,247,181,206,0,156,123,140,0,204,34,119,0,255,170,221,0,42,180,240,0,159,0,223,0,179,23,227,0,240,251,255,0,164,160,160,0,128,128,128,0,0,0,255,0,0,255,0,0,0,255,255,0,255,0,0,0,255,0,255,0,
255,255,0,0,255,255,255,0];function GetRGB(e){return 0>e||255<e?0:ColorArray[4*e+2]|ColorArray[4*e+1]<<8|ColorArray[4*e]<<16}function GetMatrix(e){if(0>e||255<e)return!1;var f=ColorArray[4*e]/255,a=ColorArray[4*e+1]/255;e=ColorArray[4*e+2]/255;return[1*e,0*a,0*f,0,0,0*e,1*a,0*f,0,0,0*e,0*a,1*f,0,0,0*e,0*a,0*f,1,0]}
function Get2RGB(e){if(null==e||void 0==e)return"#ffffff";if(0>e||255<e)return 0;var f=ColorArray[4*e]?f=GameUtil.getprefixname(ColorArray[4*e].toString(16),2):f="00",a=ColorArray[4*e+1]?a=GameUtil.getprefixname(ColorArray[4*e+1].toString(16),2):a="00";e=ColorArray[4*e+2]?e=GameUtil.getprefixname(ColorArray[4*e+2].toString(16),2):e="00";return"#"+e+a+f}function Get3RGB(e){for(var f="",a=e.length-1;0<a;a-=2)f+=e[a-1],f+=e[a];f.length!=e.length&&(f+=e[0]);return f}var hexcase=0,chrsz=8;
function hex_sha1(e){return binb2hex(core_sha1(AlignSHA1(e)))}
function core_sha1(e){for(var f=Array(80),a=1732584193,b=-271733879,d=-1732584194,n=271733878,c=-1009589776,h=0;h<e.length;h+=16){for(var m=a,g=b,l=d,p=n,q=c,r=0;80>r;r++){f[r]=16>r?e[h+r]:rol(f[r-3]^f[r-8]^f[r-14]^f[r-16],1);var u=safe_add(safe_add(rol(a,5),sha1_ft(r,b,d,n)),safe_add(safe_add(c,f[r]),sha1_kt(r)));c=n;n=d;d=rol(b,30);b=a;a=u}a=safe_add(a,m);b=safe_add(b,g);d=safe_add(d,l);n=safe_add(n,p);c=safe_add(c,q)}return[a,b,d,n,c]}
function sha1_ft(e,f,a,b){return 20>e?f&a|~f&b:40>e?f^a^b:60>e?f&a|f&b|a&b:f^a^b}function sha1_kt(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function safe_add(e,f){var a=(e&65535)+(f&65535);return(e>>16)+(f>>16)+(a>>16)<<16|a&65535}function rol(e,f){return e<<f|e>>>32-f}function AlignSHA1(e){for(var f=(e.length+8>>6)+1,a=Array(16*f),b=0;b<16*f;b++)a[b]=0;for(b=0;b<e.length;b++)a[b>>2]|=e.charCodeAt(b)<<24-8*(b&3);a[b>>2]|=128<<24-8*(b&3);a[16*f-1]=8*e.length;return a}
function binb2hex(e){for(var f=hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",b=0;b<4*e.length;b++)a+=f.charAt(e[b>>2]>>8*(3-b%4)+4&15)+f.charAt(e[b>>2]>>8*(3-b%4)&15);return a}
var ucs=[[19970,19972,19973,19974,19983,19986,19991,19999,2E4,20001,20003,20006,20009,20014,20015,20017,20019,20021,20023,20028,20032,20033,20034,20036,20038,20042,20049,20053,20055,20058,20059,20066,20067,20068,20069,20071,20072,20074,20075,20076,20077,20078,20079,20082,20084,20085,20086,20087,20088,20089,20090,20091,20092,20093,20095,20096,20097,20098,20099,20100,20101,20103,20106,63,20112,20118,20119,20121,20124,20125,20126,20131,20138,20143,20144,20145,20148,20150,20151,20152,20153,20156,20157,
20158,20168,20172,20175,20176,20178,20186,20187,20188,20192,20194,20198,20199,20201,20205,20206,20207,20209,20212,20216,20217,20218,20220,20222,20224,20226,20227,20228,20229,20230,20231,20232,20235,20236,20242,20243,20244,20245,20246,20252,20253,20257,20259,20264,20265,20268,20269,20270,20273,20275,20277,20279,20281,20283,20286,20287,20288,20289,20290,20292,20293,20295,20296,20297,20298,20299,20300,20306,20308,20310,20321,20322,20326,20328,20330,20331,20333,20334,20337,20338,20341,20343,20344,20345,
20346,20349,20352,20353,20354,20357,20358,20359,20362,20364,20366,20368,20370,20371,20373,20374,20376,20377,20378,20380,20382,20383,20385,20386],[20388,20395,20397,20400,20401,20402,20403,20404,20406,20407,20408,20409,20410,20411,20412,20413,20414,20416,20417,20418,20422,20423,20424,20425,20427,20428,20429,20434,20435,20436,20437,20438,20441,20443,20448,20450,20452,20453,20455,20459,20460,20464,20466,20468,20469,20470,20471,20473,20475,20476,20477,20479,20480,20481,20482,20483,20484,20485,20486,20487,
20488,20489,20490,63,20491,20494,20496,20497,20499,20501,20502,20503,20507,20509,20510,20512,20514,20515,20516,20519,20523,20527,20528,20529,20530,20531,20532,20533,20534,20535,20536,20537,20539,20541,20543,20544,20545,20546,20548,20549,20550,20553,20554,20555,20557,20560,20561,20562,20563,20564,20566,20567,20568,20569,20571,20573,20574,20575,20576,20577,20578,20579,20580,20582,20583,20584,20585,20586,20587,20589,20590,20591,20592,20593,20594,20595,20596,20597,20600,20601,20602,20604,20605,20609,
20610,20611,20612,20614,20615,20617,20618,20619,20620,20622,20623,20624,20625,20626,20627,20628,20629,20630,20631,20632,20633,20634,20635,20636,20637,20638,20639,20640,20641,20642,20644,20646,20650,20651,20653,20654,20655,20656,20657,20659,20660,20661,20662,20663,20664,20665,20668],[20669,20670,20671,20672,20673,20674,20675,20676,20677,20678,20679,20680,20681,20682,20683,20684,20685,20686,20688,20689,20690,20691,20692,20693,20695,20696,20697,20699,20700,20701,20702,20703,20704,20705,20706,20707,20708,
20709,20712,20713,20714,20715,20719,20720,20721,20722,20724,20726,20727,20728,20729,20730,20732,20733,20734,20735,20736,20737,20738,20739,20740,20741,20744,63,20745,20746,20748,20749,20750,20751,20752,20753,20755,20756,20757,20758,20759,20760,20761,20762,20763,20764,20765,20766,20767,20768,20770,20771,20772,20773,20774,20775,20776,20777,20778,20779,20780,20781,20782,20783,20784,20785,20786,20787,20788,20789,20790,20791,20792,20793,20794,20795,20796,20797,20798,20802,20807,20810,20812,20814,20815,
20816,20818,20819,20823,20824,20825,20827,20829,20830,20831,20832,20833,20835,20836,20838,20839,20841,20842,20847,20850,20858,20862,20863,20867,20868,20870,20871,20874,20875,20878,20879,20880,20881,20883,20884,20888,20890,20893,20894,20895,20897,20899,20902,20903,20904,20905,20906,20909,20910,20916,20920,20921,20922,20926,20927,20929,20930,20931,20933,20936,20938,20941,20942,20944,20946,20947,20948,20949,20950,20951],[20952,20953,20954,20956,20958,20959,20962,20963,20965,20966,20967,20968,20969,20970,
20972,20974,20977,20978,20980,20983,20990,20996,20997,21001,21003,21004,21007,21008,21011,21012,21013,21020,21022,21023,21025,21026,21027,21029,21030,21031,21034,21036,21039,21041,21042,21044,21045,21052,21054,21060,21061,21062,21063,21064,21065,21067,21070,21071,21074,21075,21077,21079,21080,63,21081,21082,21083,21085,21087,21088,21090,21091,21092,21094,21096,21099,21100,21101,21102,21104,21105,21107,21108,21109,21110,21111,21112,21113,21114,21115,21116,21118,21120,21123,21124,21125,21126,21127,
21129,21130,21131,21132,21133,21134,21135,21137,21138,21140,21141,21142,21143,21144,21145,21146,21148,21156,21157,21158,21159,21166,21167,21168,21172,21173,21174,21175,21176,21177,21178,21179,21180,21181,21184,21185,21186,21188,21189,21190,21192,21194,21196,21197,21198,21199,21201,21203,21204,21205,21207,21209,21210,21211,21212,21213,21214,21216,21217,21218,21219,21221,21222,21223,21224,21225,21226,21227,21228,21229,21230,21231,21233,21234,21235,21236,21237,21238,21239,21240,21243,21244,21245,21249,
21250,21251,21252,21255,21257,21258,21259,21260,21262],[21265,21266,21267,21268,21272,21275,21276,21278,21279,21282,21284,21285,21287,21288,21289,21291,21292,21293,21295,21296,21297,21298,21299,21300,21301,21302,21303,21304,21308,21309,21312,21314,21316,21318,21323,21324,21325,21328,21332,21336,21337,21339,21341,21349,21352,21354,21356,21357,21362,21366,21369,21371,21372,21373,21374,21376,21377,21379,21383,21384,21386,21390,21391,63,21392,21393,21394,21395,21396,21398,21399,21401,21403,21404,21406,
21408,21409,21412,21415,21418,21419,21420,21421,21423,21424,21425,21426,21427,21428,21429,21431,21432,21433,21434,21436,21437,21438,21440,21443,21444,21445,21446,21447,21454,21455,21456,21458,21459,21461,21466,21468,21469,21470,21473,21474,21479,21492,21498,21502,21503,21504,21506,21509,21511,21515,21524,21528,21529,21530,21532,21538,21540,21541,21546,21552,21555,21558,21559,21562,21565,21567,21569,21570,21572,21573,21575,21577,21580,21581,21582,21583,21585,21594,21597,21598,21599,21600,21601,21603,
21605,21607,21609,21610,21611,21612,21613,21614,21615,21616,21620,21625,21626,21630,21631,21633,21635,21637,21639,21640,21641,21642,21645,21649,21651,21655,21656,21660,21662,21663,21664,21665],[21666,21669,21678,21680,21682,21685,21686,21687,21689,21690,21692,21694,21699,21701,21706,21707,21718,21720,21723,21728,21729,21730,21731,21732,21739,21740,21743,21744,21745,21748,21749,21750,21751,21752,21753,21755,21758,21760,21762,21763,21764,21765,21768,21770,21771,21772,21773,21774,21778,21779,21781,21782,
21783,21784,21785,21786,21788,21789,21790,21791,21793,21797,21798,63,21800,21801,21803,21805,21810,21812,21813,21814,21816,21817,21818,21819,21821,21824,21826,21829,21831,21832,21835,21836,21837,21838,21839,21841,21842,21843,21844,21847,21848,21849,21850,21851,21853,21854,21855,21856,21858,21859,21864,21865,21867,21871,21872,21873,21874,21875,21876,21881,21882,21885,21887,21893,21894,21900,21901,21902,21904,21906,21907,21909,21910,21911,21914,21915,21918,21920,21921,21922,21923,21924,21925,21926,
21928,21929,21930,21931,21932,21933,21934,21935,21936,21938,21940,21942,21944,21946,21948,21951,21952,21953,21954,21955,21958,21959,21960,21962,21963,21966,21967,21968,21973,21975,21976,21977,21978,21979,21982,21984,21986,21991,21993,21997,21998,22E3,22001,22004,22006,22008,22009,22010,22011,22012,22015,22018,22019,22020,22021],[22022,22023,22026,22027,22029,22032,22033,22034,22035,22036,22037,22038,22039,22041,22042,22044,22045,22048,22049,22050,22053,22054,22056,22057,22058,22059,22062,22063,22064,
22067,22069,22071,22072,22074,22076,22077,22078,22080,22081,22082,22083,22084,22085,22086,22087,22088,22089,22090,22091,22095,22096,22097,22098,22099,22101,22102,22106,22107,22109,22110,22111,22112,22113,63,22115,22117,22118,22119,22125,22126,22127,22128,22130,22131,22132,22133,22135,22136,22137,22138,22141,22142,22143,22144,22145,22146,22147,22148,22151,22152,22153,22154,22155,22156,22157,22160,22161,22162,22164,22165,22166,22167,22168,22169,22170,22171,22172,22173,22174,22175,22176,22177,22178,
22180,22181,22182,22183,22184,22185,22186,22187,22188,22189,22190,22192,22193,22194,22195,22196,22197,22198,22200,22201,22202,22203,22205,22206,22207,22208,22209,22210,22211,22212,22213,22214,22215,22216,22217,22219,22220,22221,22222,22223,22224,22225,22226,22227,22229,22230,22232,22233,22236,22243,22245,22246,22247,22248,22249,22250,22252,22254,22255,22258,22259,22262,22263,22264,22267,22268,22272,22273,22274,22277,22279,22283,22284,22285,22286,22287,22288,22289],[22290,22291,22292,22293,22294,22295,
22296,22297,22298,22299,22301,22302,22304,22305,22306,22308,22309,22310,22311,22315,22321,22322,22324,22325,22326,22327,22328,22332,22333,22335,22337,22339,22340,22341,22342,22344,22345,22347,22354,22355,22356,22357,22358,22360,22361,22370,22371,22373,22375,22380,22382,22384,22385,22386,22388,22389,22392,22393,22394,22397,22398,22399,22400,63,22401,22407,22408,22409,22410,22413,22414,22415,22416,22417,22420,22421,22422,22423,22424,22425,22426,22428,22429,22430,22431,22437,22440,22442,22444,22447,
22448,22449,22451,22453,22454,22455,22457,22458,22459,22460,22461,22462,22463,22464,22465,22468,22469,22470,22471,22472,22473,22474,22476,22477,22480,22481,22483,22486,22487,22491,22492,22494,22497,22498,22499,22501,22502,22503,22504,22505,22506,22507,22508,22510,22512,22513,22514,22515,22517,22518,22519,22523,22524,22526,22527,22529,22531,22532,22533,22536,22537,22538,22540,22542,22543,22544,22546,22547,22548,22550,22551,22552,22554,22555,22556,22557,22559,22562,22563,22565,22566,22567,22568,22569,
22571,22572,22573,22574,22575,22577,22578,22579,22580,22582,22583,22584,22585,22586,22587,22588,22589],[22590,22591,22592,22593,22594,22595,22597,22598,22599,22600,22601,22602,22603,22606,22607,22608,22610,22611,22613,22614,22615,22617,22618,22619,22620,22621,22623,22624,22625,22626,22627,22628,22630,22631,22632,22633,22634,22637,22638,22639,22640,22641,22642,22643,22644,22645,22646,22647,22648,22649,22650,22651,22652,22653,22655,22658,22660,22662,22663,22664,22666,22667,22668,63,22669,22670,22671,
22672,22673,22676,22677,22678,22679,22680,22683,22684,22685,22688,22689,22690,22691,22692,22693,22694,22695,22698,22699,22700,22701,22702,22703,22704,22705,22706,22707,22708,22709,22710,22711,22712,22713,22714,22715,22717,22718,22719,22720,22722,22723,22724,22726,22727,22728,22729,22730,22731,22732,22733,22734,22735,22736,22738,22739,22740,22742,22743,22744,22745,22746,22747,22748,22749,22750,22751,22752,22753,22754,22755,22757,22758,22759,22760,22761,22762,22765,22767,22769,22770,22772,22773,22775,
22776,22778,22779,22780,22781,22782,22783,22784,22785,22787,22789,22790,22792,22793,22794,22795,22796,22798,22800,22801,22802,22803,22807,22808,22811,22813,22814,22816,22817,22818,22819,22822,22824,22828,22832,22834,22835,22837,22838,22843],[22845,22846,22847,22848,22851,22853,22854,22858,22860,22861,22864,22866,22867,22873,22875,22876,22877,22878,22879,22881,22883,22884,22886,22887,22888,22889,22890,22891,22892,22893,22894,22895,22896,22897,22898,22901,22903,22906,22907,22908,22910,22911,22912,22917,
22921,22923,22924,22926,22927,22928,22929,22932,22933,22936,22938,22939,22940,22941,22943,22944,22945,22946,22950,63,22951,22956,22957,22960,22961,22963,22964,22965,22966,22967,22968,22970,22972,22973,22975,22976,22977,22978,22979,22980,22981,22983,22984,22985,22988,22989,22990,22991,22997,22998,23001,23003,23006,23007,23008,23009,23010,23012,23014,23015,23017,23018,23019,23021,23022,23023,23024,23025,23026,23027,23028,23029,23030,23031,23032,23034,23036,23037,23038,23040,23042,23050,23051,23053,
23054,23055,23056,23058,23060,23061,23062,23063,23065,23066,23067,23069,23070,23073,23074,23076,23078,23079,23080,23082,23083,23084,23085,23086,23087,23088,23091,23093,23095,23096,23097,23098,23099,23101,23102,23103,23105,23106,23107,23108,23109,23111,23112,23115,23116,23117,23118,23119,23120,23121,23122,23123,23124,23126,23127,23128,23129,23131,23132,23133,23134,23135,23136],[23137,23139,23140,23141,23142,23144,23145,23147,23148,23149,23150,23151,23152,23153,23154,23155,23160,23161,23163,23164,23165,
23166,23168,23169,23170,23171,23172,23173,23174,23175,23176,23177,23178,23179,23180,23181,23182,23183,23184,23185,23187,23188,23189,23190,23191,23192,23193,23196,23197,23198,23199,23200,23201,23202,23203,23204,23205,23206,23207,23208,23209,23211,23212,63,23213,23214,23215,23216,23217,23220,23222,23223,23225,23226,23227,23228,23229,23231,23232,23235,23236,23237,23238,23239,23240,23242,23243,23245,23246,23247,23248,23249,23251,23253,23255,23257,23258,23259,23261,23262,23263,23266,23268,23269,23271,
23272,23274,23276,23277,23278,23279,23280,23282,23283,23284,23285,23286,23287,23288,23289,23290,23291,23292,23293,23294,23295,23296,23297,23298,23299,23300,23301,23302,23303,23304,23306,23307,23308,23309,23310,23311,23312,23313,23314,23315,23316,23317,23320,23321,23322,23323,23324,23325,23326,23327,23328,23329,23330,23331,23332,23333,23334,23335,23336,23337,23338,23339,23340,23341,23342,23343,23344,23345,23347,23349,23350,23352,23353,23354,23355,23356,23357,23358,23359,23361,23362,23363,23364,23365,
23366,23367],[23368,23369,23370,23371,23372,23373,23374,23375,23378,23382,23390,23392,23393,23399,23400,23403,23405,23406,23407,23410,23412,23414,23415,23416,23417,23419,23420,23422,23423,23426,23430,23434,23437,23438,23440,23441,23442,23444,23446,23455,23463,23464,23465,23468,23469,23470,23471,23473,23474,23479,23482,23483,23484,23488,23489,23491,23496,23497,23498,23499,23501,23502,23503,63,23505,23508,23509,23510,23511,23512,23513,23514,23515,23516,23520,23522,23523,23526,23527,23529,23530,23531,
23532,23533,23535,23537,23538,23539,23540,23541,23542,23543,23549,23550,23552,23554,23555,23557,23559,23560,23563,23564,23565,23566,23568,23570,23571,23575,23577,23579,23582,23583,23584,23585,23587,23590,23592,23593,23594,23595,23597,23598,23599,23600,23602,23603,23605,23606,23607,23619,23620,23622,23623,23628,23629,23634,23635,23636,23638,23639,23640,23642,23643,23644,23645,23647,23650,23652,23655,23656,23657,23658,23659,23660,23661,23664,23666,23667,23668,23669,23670,23671,23672,23675,23676,23677,
23678,23680,23683,23684,23685,23686,23687,23689,23690,23691,23694,23695,23698,23699,23701,23709,23710,23711,23712,23713,23716,23717,23718,23719,23720],[23722,23726,23727,23728,23730,23732,23734,23737,23738,23739,23740,23742,23744,23746,23747,23749,23750,23751,23752,23753,23754,23756,23757,23758,23759,23760,23761,23763,23764,23765,23766,23767,23768,23770,23771,23772,23773,23774,23775,23776,23778,23779,23783,23785,23787,23788,23790,23791,23793,23794,23795,23796,23797,23798,23799,23800,23801,23802,23804,
23805,23806,23807,23808,63,23809,23812,23813,23816,23817,23818,23819,23820,23821,23823,23824,23825,23826,23827,23829,23831,23832,23833,23834,23836,23837,23839,23840,23841,23842,23843,23845,23848,23850,23851,23852,23855,23856,23857,23858,23859,23861,23862,23863,23864,23865,23866,23867,23868,23871,23872,23873,23874,23875,23876,23877,23878,23880,23881,23885,23886,23887,23888,23889,23890,23891,23892,23893,23894,23895,23897,23898,23900,23902,23903,23904,23905,23906,23907,23908,23909,23910,23911,23912,
23914,23917,23918,23920,23921,23922,23923,23925,23926,23927,23928,23929,23930,23931,23932,23933,23934,23935,23936,23937,23939,23940,23941,23942,23943,23944,23945,23946,23947,23948,23949,23950,23951,23952,23953,23954,23955,23956,23957,23958,23959,23960,23962,23963,23964,23966,23967,23968],[23969,23970,23971,23972,23973,23974,23975,23976,23977,23978,23979,23980,23981,23982,23983,23984,23985,23986,23987,23988,23989,23990,23992,23993,23994,23995,23996,23997,23998,23999,24E3,24001,24002,24003,24004,24006,
24007,24008,24009,24010,24011,24012,24014,24015,24016,24017,24018,24019,24020,24021,24022,24023,24024,24025,24026,24028,24031,24032,24035,24036,24042,24044,24045,63,24048,24053,24054,24056,24057,24058,24059,24060,24063,24064,24068,24071,24073,24074,24075,24077,24078,24082,24083,24087,24094,24095,24096,24097,24098,24099,24100,24101,24104,24105,24106,24107,24108,24111,24112,24114,24115,24116,24117,24118,24121,24122,24126,24127,24128,24129,24131,24134,24135,24136,24137,24138,24139,24141,24142,24143,
24144,24145,24146,24147,24150,24151,24152,24153,24154,24156,24157,24159,24160,24163,24164,24165,24166,24167,24168,24169,24170,24171,24172,24173,24174,24175,24176,24177,24181,24183,24185,24190,24193,24194,24195,24197,24200,24201,24204,24205,24206,24210,24216,24219,24221,24225,24226,24227,24228,24232,24233,24234,24235,24236,24238,24239,24240,24241,24242,24244,24250,24251,24252,24253,24255,24256,24257,24258,24259,24260,24261],[24262,24263,24264,24267,24268,24269,24270,24271,24272,24276,24277,24279,24280,
24281,24282,24284,24285,24286,24287,24288,24289,24290,24291,24292,24293,24294,24295,24297,24299,24300,24301,24302,24303,24304,24305,24306,24307,24309,24312,24313,24315,24316,24317,24325,24326,24327,24329,24332,24333,24334,24336,24338,24340,24342,24345,24346,24348,24349,24350,24353,24354,24355,24356,63,24360,24363,24364,24366,24368,24370,24371,24372,24373,24374,24375,24376,24379,24381,24382,24383,24385,24386,24387,24388,24389,24390,24391,24392,24393,24394,24395,24396,24397,24398,24399,24401,24404,
24409,24410,24411,24412,24414,24415,24416,24419,24421,24423,24424,24427,24430,24431,24434,24436,24437,24438,24440,24442,24445,24446,24447,24451,24454,24461,24462,24463,24465,24467,24468,24470,24474,24475,24477,24478,24479,24480,24482,24483,24484,24485,24486,24487,24489,24491,24492,24495,24496,24497,24498,24499,24500,24502,24504,24505,24506,24507,24510,24511,24512,24513,24514,24519,24520,24522,24523,24526,24531,24532,24533,24538,24539,24540,24542,24543,24546,24547,24549,24550,24552,24553,24556,24559,
24560,24562,24563,24564,24566,24567,24569,24570,24572,24583],[24584,24585,24587,24588,24592,24593,24595,24599,24600,24602,24606,24607,24610,24611,24612,24620,24621,24622,24624,24625,24626,24627,24628,24630,24631,24632,24633,24634,24637,24638,24640,24644,24645,24646,24647,24648,24649,24650,24652,24654,24655,24657,24659,24660,24662,24663,24664,24667,24668,24670,24671,24672,24673,24677,24678,24686,24689,24690,24692,24693,24695,24702,24704,63,24705,24706,24709,24710,24711,24712,24714,24715,24718,24719,
24720,24721,24723,24725,24727,24728,24729,24732,24734,24737,24738,24740,24741,24743,24745,24746,24750,24752,24755,24757,24758,24759,24761,24762,24765,24766,24767,24768,24769,24770,24771,24772,24775,24776,24777,24780,24781,24782,24783,24784,24786,24787,24788,24790,24791,24793,24795,24798,24801,24802,24803,24804,24805,24810,24817,24818,24821,24823,24824,24827,24828,24829,24830,24831,24834,24835,24836,24837,24839,24842,24843,24844,24848,24849,24850,24851,24852,24854,24855,24856,24857,24859,24860,24861,
24862,24865,24866,24869,24872,24873,24874,24876,24877,24878,24879,24880,24881,24882,24883,24884,24885,24886,24887,24888,24889,24890,24891,24892,24893,24894,24896,24897,24898,24899,24900,24901,24902],[24903,24905,24907,24909,24911,24912,24914,24915,24916,24918,24919,24920,24921,24922,24923,24924,24926,24927,24928,24929,24931,24932,24933,24934,24937,24938,24939,24940,24941,24942,24943,24945,24946,24947,24948,24950,24952,24953,24954,24955,24956,24957,24958,24959,24960,24961,24962,24963,24964,24965,24966,
24967,24968,24969,24970,24972,24973,24975,24976,24977,24978,24979,24981,63,24982,24983,24984,24985,24986,24987,24988,24990,24991,24992,24993,24994,24995,24996,24997,24998,25002,25003,25005,25006,25007,25008,25009,25010,25011,25012,25013,25014,25016,25017,25018,25019,25020,25021,25023,25024,25025,25027,25028,25029,25030,25031,25033,25036,25037,25038,25039,25040,25043,25045,25046,25047,25048,25049,25050,25051,25052,25053,25054,25055,25056,25057,25058,25059,25060,25061,25063,25064,25065,25066,25067,
25068,25069,25070,25071,25072,25073,25074,25075,25076,25078,25079,25080,25081,25082,25083,25084,25085,25086,25088,25089,25090,25091,25092,25093,25095,25097,25107,25108,25113,25116,25117,25118,25120,25123,25126,25127,25128,25129,25131,25133,25135,25136,25137,25138,25141,25142,25144,25145,25146,25147,25148,25154,25156,25157,25158,25162],[25167,25168,25173,25174,25175,25177,25178,25180,25181,25182,25183,25184,25185,25186,25188,25189,25192,25201,25202,25204,25205,25207,25208,25210,25211,25213,25217,25218,
25219,25221,25222,25223,25224,25227,25228,25229,25230,25231,25232,25236,25241,25244,25245,25246,25251,25254,25255,25257,25258,25261,25262,25263,25264,25266,25267,25268,25270,25271,25272,25274,25278,25280,25281,63,25283,25291,25295,25297,25301,25309,25310,25312,25313,25316,25322,25323,25328,25330,25333,25336,25337,25338,25339,25344,25347,25348,25349,25350,25354,25355,25356,25357,25359,25360,25362,25363,25364,25365,25367,25368,25369,25372,25382,25383,25385,25388,25389,25390,25392,25393,25395,25396,
25397,25398,25399,25400,25403,25404,25406,25407,25408,25409,25412,25415,25416,25418,25425,25426,25427,25428,25430,25431,25432,25433,25434,25435,25436,25437,25440,25444,25445,25446,25448,25450,25451,25452,25455,25456,25458,25459,25460,25461,25464,25465,25468,25469,25470,25471,25473,25475,25476,25477,25478,25483,25485,25489,25491,25492,25493,25495,25497,25498,25499,25500,25501,25502,25503,25505,25508,25510,25515,25519,25521,25522,25525,25526,25529,25531,25533,25535,25536],[25537,25538,25539,25541,25543,
25544,25546,25547,25548,25553,25555,25556,25557,25559,25560,25561,25562,25563,25564,25565,25567,25570,25572,25573,25574,25575,25576,25579,25580,25582,25583,25584,25585,25587,25589,25591,25593,25594,25595,25596,25598,25603,25604,25606,25607,25608,25609,25610,25613,25614,25617,25618,25621,25622,25623,25624,25625,25626,25629,25631,25634,25635,25636,63,25637,25639,25640,25641,25643,25646,25647,25648,25649,25650,25651,25653,25654,25655,25656,25657,25659,25660,25662,25664,25666,25667,25673,25675,25676,
25677,25678,25679,25680,25681,25683,25685,25686,25687,25689,25690,25691,25692,25693,25695,25696,25697,25698,25699,25700,25701,25702,25704,25706,25707,25708,25710,25711,25712,25713,25714,25715,25716,25717,25718,25719,25723,25724,25725,25726,25727,25728,25729,25731,25734,25736,25737,25738,25739,25740,25741,25742,25743,25744,25747,25748,25751,25752,25754,25755,25756,25757,25759,25760,25761,25762,25763,25765,25766,25767,25768,25770,25771,25775,25777,25778,25779,25780,25782,25785,25787,25789,25790,25791,
25793,25795,25796,25798,25799,25800,25801,25802,25803,25804,25807,25809,25811,25812,25813,25814,25817,25818],[25819,25820,25821,25823,25824,25825,25827,25829,25831,25832,25833,25834,25835,25836,25837,25838,25839,25840,25841,25842,25843,25844,25845,25846,25847,25848,25849,25850,25851,25852,25853,25854,25855,25857,25858,25859,25860,25861,25862,25863,25864,25866,25867,25868,25869,25870,25871,25872,25873,25875,25876,25877,25878,25879,25881,25882,25883,25884,25885,25886,25887,25888,25889,63,25890,25891,
25892,25894,25895,25896,25897,25898,25900,25901,25904,25905,25906,25907,25911,25914,25916,25917,25920,25921,25922,25923,25924,25926,25927,25930,25931,25933,25934,25936,25938,25939,25940,25943,25944,25946,25948,25951,25952,25953,25956,25957,25959,25960,25961,25962,25965,25966,25967,25969,25971,25973,25974,25976,25977,25978,25979,25980,25981,25982,25983,25984,25985,25986,25987,25988,25989,25990,25992,25993,25994,25997,25998,25999,26002,26004,26005,26006,26008,26010,26013,26014,26016,26018,26019,26022,
26024,26026,26028,26030,26033,26034,26035,26036,26037,26038,26039,26040,26042,26043,26046,26047,26048,26050,26055,26056,26057,26058,26061,26064,26065,26067,26068,26069,26072,26073,26074,26075,26076,26077,26078,26079,26081,26083,26084,26090,26091],[26098,26099,26100,26101,26104,26105,26107,26108,26109,26110,26111,26113,26116,26117,26119,26120,26121,26123,26125,26128,26129,26130,26134,26135,26136,26138,26139,26140,26142,26145,26146,26147,26148,26150,26153,26154,26155,26156,26158,26160,26162,26163,26167,
26168,26169,26170,26171,26173,26175,26176,26178,26180,26181,26182,26183,26184,26185,26186,26189,26190,26192,26193,26200,63,26201,26203,26204,26205,26206,26208,26210,26211,26213,26215,26217,26218,26219,26220,26221,26225,26226,26227,26229,26232,26233,26235,26236,26237,26239,26240,26241,26243,26245,26246,26248,26249,26250,26251,26253,26254,26255,26256,26258,26259,26260,26261,26264,26265,26266,26267,26268,26270,26271,26272,26273,26274,26275,26276,26277,26278,26281,26282,26283,26284,26285,26287,26288,
26289,26290,26291,26293,26294,26295,26296,26298,26299,26300,26301,26303,26304,26305,26306,26307,26308,26309,26310,26311,26312,26313,26314,26315,26316,26317,26318,26319,26320,26321,26322,26323,26324,26325,26326,26327,26328,26330,26334,26335,26336,26337,26338,26339,26340,26341,26343,26344,26346,26347,26348,26349,26350,26351,26353,26357,26358,26360,26362,26363,26365,26369,26370,26371],[26372,26373,26374,26375,26380,26382,26383,26385,26386,26387,26390,26392,26393,26394,26396,26398,26400,26401,26402,26403,
26404,26405,26407,26409,26414,26416,26418,26419,26422,26423,26424,26425,26427,26428,26430,26431,26433,26436,26437,26439,26442,26443,26445,26450,26452,26453,26455,26456,26457,26458,26459,26461,26466,26467,26468,26470,26471,26475,26476,26478,26481,26484,26486,63,26488,26489,26490,26491,26493,26496,26498,26499,26501,26502,26504,26506,26508,26509,26510,26511,26513,26514,26515,26516,26518,26521,26523,26527,26528,26529,26532,26534,26537,26540,26542,26545,26546,26548,26553,26554,26555,26556,26557,26558,
26559,26560,26562,26565,26566,26567,26568,26569,26570,26571,26572,26573,26574,26581,26582,26583,26587,26591,26593,26595,26596,26598,26599,26600,26602,26603,26605,26606,26610,26613,26614,26615,26616,26617,26618,26619,26620,26622,26625,26626,26627,26628,26630,26637,26640,26642,26644,26645,26648,26649,26650,26651,26652,26654,26655,26656,26658,26659,26660,26661,26662,26663,26664,26667,26668,26669,26670,26671,26672,26673,26676,26677,26678,26682,26683,26687,26695,26699,26701,26703,26706,26710,26711,26712,
26713,26714,26715],[26716,26717,26718,26719,26730,26732,26733,26734,26735,26736,26737,26738,26739,26741,26744,26745,26746,26747,26748,26749,26750,26751,26752,26754,26756,26759,26760,26761,26762,26763,26764,26765,26766,26768,26769,26770,26772,26773,26774,26776,26777,26778,26779,26780,26781,26782,26783,26784,26785,26787,26788,26789,26793,26794,26795,26796,26798,26801,26802,26804,26806,26807,26808,63,26809,26810,26811,26812,26813,26814,26815,26817,26819,26820,26821,26822,26823,26824,26826,26828,26830,
26831,26832,26833,26835,26836,26838,26839,26841,26843,26844,26845,26846,26847,26849,26850,26852,26853,26854,26855,26856,26857,26858,26859,26860,26861,26863,26866,26867,26868,26870,26871,26872,26875,26877,26878,26879,26880,26882,26883,26884,26886,26887,26888,26889,26890,26892,26895,26897,26899,26900,26901,26902,26903,26904,26905,26906,26907,26908,26909,26910,26913,26914,26915,26917,26918,26919,26920,26921,26922,26923,26924,26926,26927,26929,26930,26931,26933,26934,26935,26936,26938,26939,26940,26942,
26944,26945,26947,26948,26949,26950,26951,26952,26953,26954,26955,26956,26957,26958,26959,26960,26961,26962,26963,26965,26966,26968,26969,26971,26972,26975],[26977,26978,26980,26981,26983,26984,26985,26986,26988,26989,26991,26992,26994,26995,26996,26997,26998,27002,27003,27005,27006,27007,27009,27011,27013,27018,27019,27020,27022,27023,27024,27025,27026,27027,27030,27031,27033,27034,27037,27038,27039,27040,27041,27042,27043,27044,27045,27046,27049,27050,27052,27054,27055,27056,27058,27059,27061,27062,
27064,27065,27066,27068,27069,63,27070,27071,27072,27074,27075,27076,27077,27078,27079,27080,27081,27083,27085,27087,27089,27090,27091,27093,27094,27095,27096,27097,27098,27100,27101,27102,27105,27106,27107,27108,27109,27110,27111,27112,27113,27114,27115,27116,27118,27119,27120,27121,27123,27124,27125,27126,27127,27128,27129,27130,27131,27132,27134,27136,27137,27138,27139,27140,27141,27142,27143,27144,27145,27147,27148,27149,27150,27151,27152,27153,27154,27155,27156,27157,27158,27161,27162,27163,
27164,27165,27166,27168,27170,27171,27172,27173,27174,27175,27177,27179,27180,27181,27182,27184,27186,27187,27188,27190,27191,27192,27193,27194,27195,27196,27199,27200,27201,27202,27203,27205,27206,27208,27209,27210,27211,27212,27213,27214,27215,27217,27218,27219,27220,27221,27222,27223,27226],[27228,27229,27230,27231,27232,27234,27235,27236,27238,27239,27240,27241,27242,27243,27244,27245,27246,27247,27248,27250,27251,27252,27253,27254,27255,27256,27258,27259,27261,27262,27263,27265,27266,27267,27269,
27270,27271,27272,27273,27274,27275,27276,27277,27279,27282,27283,27284,27285,27286,27288,27289,27290,27291,27292,27293,27294,27295,27297,27298,27299,27300,27301,27302,63,27303,27304,27306,27309,27310,27311,27312,27313,27314,27315,27316,27317,27318,27319,27320,27321,27322,27323,27324,27325,27326,27327,27328,27329,27330,27331,27332,27333,27334,27335,27336,27337,27338,27339,27340,27341,27342,27343,27344,27345,27346,27347,27348,27349,27350,27351,27352,27353,27354,27355,27356,27357,27358,27359,27360,
27361,27362,27363,27364,27365,27366,27367,27368,27369,27370,27371,27372,27373,27374,27375,27376,27377,27378,27379,27380,27381,27382,27383,27384,27385,27386,27387,27388,27389,27390,27391,27392,27393,27394,27395,27396,27397,27398,27399,27400,27401,27402,27403,27404,27405,27406,27407,27408,27409,27410,27411,27412,27413,27414,27415,27416,27417,27418,27419,27420,27421,27422,27423,27429,27430,27432,27433,27434,27435,27436,27437,27438],[27439,27440,27441,27443,27444,27445,27446,27448,27451,27452,27453,27455,
27456,27457,27458,27460,27461,27464,27466,27467,27469,27470,27471,27472,27473,27474,27475,27476,27477,27478,27479,27480,27482,27483,27484,27485,27486,27487,27488,27489,27496,27497,27499,27500,27501,27502,27503,27504,27505,27506,27507,27508,27509,27510,27511,27512,27514,27517,27518,27519,27520,27525,27528,63,27532,27534,27535,27536,27537,27540,27541,27543,27544,27545,27548,27549,27550,27551,27552,27554,27555,27556,27557,27558,27559,27560,27561,27563,27564,27565,27566,27567,27568,27569,27570,27574,
27576,27577,27578,27579,27580,27581,27582,27584,27587,27588,27590,27591,27592,27593,27594,27596,27598,27600,27601,27608,27610,27612,27613,27614,27615,27616,27618,27619,27620,27621,27622,27623,27624,27625,27628,27629,27630,27632,27633,27634,27636,27638,27639,27640,27642,27643,27644,27646,27647,27648,27649,27650,27651,27652,27656,27657,27658,27659,27660,27662,27666,27671,27676,27677,27678,27680,27683,27685,27691,27692,27693,27697,27699,27702,27703,27705,27706,27707,27708,27710,27711,27715,27716,27717,
27720,27723,27724,27725,27726,27727,27729,27730,27731,27734,27736],[27737,27738,27746,27747,27749,27750,27751,27755,27756,27757,27758,27759,27761,27763,27765,27767,27768,27770,27771,27772,27775,27776,27780,27783,27786,27787,27789,27790,27793,27794,27797,27798,27799,27800,27802,27804,27805,27806,27808,27810,27816,27820,27823,27824,27828,27829,27830,27831,27834,27840,27841,27842,27843,27846,27847,27848,27851,27853,27854,27855,27857,27858,27864,63,27865,27866,27868,27869,27871,27876,27878,27879,27881,
27884,27885,27890,27892,27897,27903,27904,27906,27907,27909,27910,27912,27913,27914,27917,27919,27920,27921,27923,27924,27925,27926,27928,27932,27933,27935,27936,27937,27938,27939,27940,27942,27944,27945,27948,27949,27951,27952,27956,27958,27959,27960,27962,27967,27968,27970,27972,27977,27980,27984,27989,27990,27991,27992,27995,27997,27999,28001,28002,28004,28005,28007,28008,28011,28012,28013,28016,28017,28018,28019,28021,28022,28025,28026,28027,28029,28030,28031,28032,28033,28035,28036,28038,28039,
28042,28043,28045,28047,28048,28050,28054,28055,28056,28057,28058,28060,28066,28069,28076,28077,28080,28081,28083,28084,28086,28087,28089,28090,28091,28092,28093,28094,28097,28098,28099,28104,28105,28106],[28109,28110,28111,28112,28114,28115,28116,28117,28119,28122,28123,28124,28127,28130,28131,28133,28135,28136,28137,28138,28141,28143,28144,28146,28148,28149,28150,28152,28154,28157,28158,28159,28160,28161,28162,28163,28164,28166,28167,28168,28169,28171,28175,28178,28179,28181,28184,28185,28187,28188,
28190,28191,28194,28198,28199,28200,28202,28204,28206,28208,28209,28211,28213,63,28214,28215,28217,28219,28220,28221,28222,28223,28224,28225,28226,28229,28230,28231,28232,28233,28234,28235,28236,28239,28240,28241,28242,28245,28247,28249,28250,28252,28253,28254,28256,28257,28258,28259,28260,28261,28262,28263,28264,28265,28266,28268,28269,28271,28272,28273,28274,28275,28276,28277,28278,28279,28280,28281,28282,28283,28284,28285,28288,28289,28290,28292,28295,28296,28298,28299,28300,28301,28302,28305,
28306,28307,28308,28309,28310,28311,28313,28314,28315,28317,28318,28320,28321,28323,28324,28326,28328,28329,28331,28332,28333,28334,28336,28339,28341,28344,28345,28348,28350,28351,28352,28355,28356,28357,28358,28360,28361,28362,28364,28365,28366,28368,28370,28374,28376,28377,28379,28380,28381,28387,28391,28394,28395,28396,28397,28398,28399],[28400,28401,28402,28403,28405,28406,28407,28408,28410,28411,28412,28413,28414,28415,28416,28417,28419,28420,28421,28423,28424,28426,28427,28428,28429,28430,28432,
28433,28434,28438,28439,28440,28441,28442,28443,28444,28445,28446,28447,28449,28450,28451,28453,28454,28455,28456,28460,28462,28464,28466,28468,28469,28471,28472,28473,28474,28475,28476,28477,28479,28480,28481,28482,63,28483,28484,28485,28488,28489,28490,28492,28494,28495,28496,28497,28498,28499,28500,28501,28502,28503,28505,28506,28507,28509,28511,28512,28513,28515,28516,28517,28519,28520,28521,28522,28523,28524,28527,28528,28529,28531,28533,28534,28535,28537,28539,28541,28542,28543,28544,28545,
28546,28547,28549,28550,28551,28554,28555,28559,28560,28561,28562,28563,28564,28565,28566,28567,28568,28569,28570,28571,28573,28574,28575,28576,28578,28579,28580,28581,28582,28584,28585,28586,28587,28588,28589,28590,28591,28592,28593,28594,28596,28597,28599,28600,28602,28603,28604,28605,28606,28607,28609,28611,28612,28613,28614,28615,28616,28618,28619,28620,28621,28622,28623,28624,28627,28628,28629,28630,28631,28632,28633,28634,28635,28636,28637,28639,28642,28643,28644,28645],[28646,28647,28648,28649,
28650,28651,28652,28653,28656,28657,28658,28659,28660,28661,28662,28663,28664,28665,28666,28667,28668,28669,28670,28671,28672,28673,28674,28675,28676,28677,28678,28679,28680,28681,28682,28683,28684,28685,28686,28687,28688,28690,28691,28692,28693,28694,28695,28696,28697,28700,28701,28702,28703,28704,28705,28706,28708,28709,28710,28711,28712,28713,28714,63,28715,28716,28717,28718,28719,28720,28721,28722,28723,28724,28726,28727,28728,28730,28731,28732,28733,28734,28735,28736,28737,28738,28739,28740,
28741,28742,28743,28744,28745,28746,28747,28749,28750,28752,28753,28754,28755,28756,28757,28758,28759,28760,28761,28762,28763,28764,28765,28767,28768,28769,28770,28771,28772,28773,28774,28775,28776,28777,28778,28782,28785,28786,28787,28788,28791,28793,28794,28795,28797,28801,28802,28803,28804,28806,28807,28808,28811,28812,28813,28815,28816,28817,28819,28823,28824,28826,28827,28830,28831,28832,28833,28834,28835,28836,28837,28838,28839,28840,28841,28842,28848,28850,28852,28853,28854,28858,28862,28863,
28868,28869,28870,28871,28873,28875,28876,28877,28878,28879,28880,28881,28882,28883,28884,28885,28886,28887,28890],[28892,28893,28894,28896,28897,28898,28899,28901,28906,28910,28912,28913,28914,28915,28916,28917,28918,28920,28922,28923,28924,28926,28927,28928,28929,28930,28931,28932,28933,28934,28935,28936,28939,28940,28941,28942,28943,28945,28946,28948,28951,28955,28956,28957,28958,28959,28960,28961,28962,28963,28964,28965,28967,28968,28969,28970,28971,28972,28973,28974,28978,28979,28980,63,28981,
28983,28984,28985,28986,28987,28988,28989,28990,28991,28992,28993,28994,28995,28996,28998,28999,29E3,29001,29003,29005,29007,29008,29009,29010,29011,29012,29013,29014,29015,29016,29017,29018,29019,29021,29023,29024,29025,29026,29027,29029,29033,29034,29035,29036,29037,29039,29040,29041,29044,29045,29046,29047,29049,29051,29052,29054,29055,29056,29057,29058,29059,29061,29062,29063,29064,29065,29067,29068,29069,29070,29072,29073,29074,29075,29077,29078,29079,29082,29083,29084,29085,29086,29089,29090,
29091,29092,29093,29094,29095,29097,29098,29099,29101,29102,29103,29104,29105,29106,29108,29110,29111,29112,29114,29115,29116,29117,29118,29119,29120,29121,29122,29124,29125,29126,29127,29128,29129,29130,29131,29132,29133,29135,29136,29137,29138,29139],[29142,29143,29144,29145,29146,29147,29148,29149,29150,29151,29153,29154,29155,29156,29158,29160,29161,29162,29163,29164,29165,29167,29168,29169,29170,29171,29172,29173,29174,29175,29176,29178,29179,29180,29181,29182,29183,29184,29185,29186,29187,29188,
29189,29191,29192,29193,29194,29195,29196,29197,29198,29199,29200,29201,29202,29203,29204,29205,29206,29207,29208,29209,29210,63,29211,29212,29214,29215,29216,29217,29218,29219,29220,29221,29222,29223,29225,29227,29229,29230,29231,29234,29235,29236,29242,29244,29246,29248,29249,29250,29251,29252,29253,29254,29257,29258,29259,29262,29263,29264,29265,29267,29268,29269,29271,29272,29274,29276,29278,29280,29283,29284,29285,29288,29290,29291,29292,29293,29296,29297,29299,29300,29302,29303,29304,29307,
29308,29309,29314,29315,29317,29318,29319,29320,29321,29324,29326,29328,29329,29331,29332,29333,29334,29335,29336,29337,29338,29339,29340,29341,29342,29344,29345,29346,29347,29348,29349,29350,29351,29352,29353,29354,29355,29358,29361,29362,29363,29365,29370,29371,29372,29373,29374,29375,29376,29381,29382,29383,29385,29386,29387,29388,29391,29393,29395,29396,29397,29398,29400,29402,29403],[58566,58567,58568,58569,58570,58571,58572,58573,58574,58575,58576,58577,58578,58579,58580,58581,58582,58583,58584,
58585,58586,58587,58588,58589,58590,58591,58592,58593,58594,58595,58596,58597,58598,58599,58600,58601,58602,58603,58604,58605,58606,58607,58608,58609,58610,58611,58612,58613,58614,58615,58616,58617,58618,58619,58620,58621,58622,58623,58624,58625,58626,58627,58628,63,58629,58630,58631,58632,58633,58634,58635,58636,58637,58638,58639,58640,58641,58642,58643,58644,58645,58646,58647,58648,58649,58650,58651,58652,58653,58654,58655,58656,58657,58658,58659,58660,58661,12288,12289,12290,183,713,711,168,12291,
12293,8212,65374,8214,8230,8216,8217,8220,8221,12308,12309,12296,12297,12298,12299,12300,12301,12302,12303,12310,12311,12304,12305,177,215,247,8758,8743,8744,8721,8719,8746,8745,8712,8759,8730,8869,8741,8736,8978,8857,8747,8750,8801,8780,8776,8765,8733,8800,8814,8815,8804,8805,8734,8757,8756,9794,9792,176,8242,8243,8451,65284,164,65504,65505,8240,167,8470,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,8251,8594,8592,8593,8595,12307],[58662,58663,58664,58665,58666,58667,58668,58669,58670,58671,
58672,58673,58674,58675,58676,58677,58678,58679,58680,58681,58682,58683,58684,58685,58686,58687,58688,58689,58690,58691,58692,58693,58694,58695,58696,58697,58698,58699,58700,58701,58702,58703,58704,58705,58706,58707,58708,58709,58710,58711,58712,58713,58714,58715,58716,58717,58718,58719,58720,58721,58722,58723,58724,63,58725,58726,58727,58728,58729,58730,58731,58732,58733,58734,58735,58736,58737,58738,58739,58740,58741,58742,58743,58744,58745,58746,58747,58748,58749,58750,58751,58752,58753,58754,
58755,58756,58757,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,59238,59239,59240,59241,59242,59243,9352,9353,9354,9355,9356,9357,9358,9359,9360,9361,9362,9363,9364,9365,9366,9367,9368,9369,9370,9371,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,9347,9348,9349,9350,9351,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,59244,59245,12832,12833,12834,12835,12836,12837,12838,12839,12840,12841,59246,59247,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,8554,8555,59248,
59249],[58758,58759,58760,58761,58762,58763,58764,58765,58766,58767,58768,58769,58770,58771,58772,58773,58774,58775,58776,58777,58778,58779,58780,58781,58782,58783,58784,58785,58786,58787,58788,58789,58790,58791,58792,58793,58794,58795,58796,58797,58798,58799,58800,58801,58802,58803,58804,58805,58806,58807,58808,58809,58810,58811,58812,58813,58814,58815,58816,58817,58818,58819,58820,63,58821,58822,58823,58824,58825,58826,58827,58828,58829,58830,58831,58832,58833,58834,58835,58836,58837,58838,58839,
58840,58841,58842,58843,58844,58845,58846,58847,58848,58849,58850,58851,58852,58853,65281,65282,65283,65509,65285,65286,65287,65288,65289,65290,65291,65292,65293,65294,65295,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65306,65307,65308,65309,65310,65311,65312,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65339,65340,65341,65342,65343,65344,65345,65346,65347,65348,65349,65350,
65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65371,65372,65373,65507],[58854,58855,58856,58857,58858,58859,58860,58861,58862,58863,58864,58865,58866,58867,58868,58869,58870,58871,58872,58873,58874,58875,58876,58877,58878,58879,58880,58881,58882,58883,58884,58885,58886,58887,58888,58889,58890,58891,58892,58893,58894,58895,58896,58897,58898,58899,58900,58901,58902,58903,58904,58905,58906,58907,58908,58909,58910,58911,58912,58913,
58914,58915,58916,63,58917,58918,58919,58920,58921,58922,58923,58924,58925,58926,58927,58928,58929,58930,58931,58932,58933,58934,58935,58936,58937,58938,58939,58940,58941,58942,58943,58944,58945,58946,58947,58948,58949,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,
12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,59250,59251,59252,59253,59254,59255,59256,59257,59258,59259,59260],[58950,58951,58952,58953,58954,58955,58956,58957,58958,58959,58960,58961,58962,58963,58964,58965,58966,58967,58968,58969,58970,58971,58972,58973,58974,58975,58976,58977,58978,58979,58980,58981,58982,58983,58984,58985,58986,
58987,58988,58989,58990,58991,58992,58993,58994,58995,58996,58997,58998,58999,59E3,59001,59002,59003,59004,59005,59006,59007,59008,59009,59010,59011,59012,63,59013,59014,59015,59016,59017,59018,59019,59020,59021,59022,59023,59024,59025,59026,59027,59028,59029,59030,59031,59032,59033,59034,59035,59036,59037,59038,59039,59040,59041,59042,59043,59044,59045,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,
12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,59261,59262,59263,59264,59265,59266,59267,59268],[59046,59047,59048,59049,59050,59051,59052,59053,59054,59055,59056,59057,59058,59059,59060,
59061,59062,59063,59064,59065,59066,59067,59068,59069,59070,59071,59072,59073,59074,59075,59076,59077,59078,59079,59080,59081,59082,59083,59084,59085,59086,59087,59088,59089,59090,59091,59092,59093,59094,59095,59096,59097,59098,59099,59100,59101,59102,59103,59104,59105,59106,59107,59108,63,59109,59110,59111,59112,59113,59114,59115,59116,59117,59118,59119,59120,59121,59122,59123,59124,59125,59126,59127,59128,59129,59130,59131,59132,59133,59134,59135,59136,59137,59138,59139,59140,59141,913,914,915,
916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,59269,59270,59271,59272,59273,59274,59275,59276,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,59277,59278,59279,59280,59281,59282,59283,65077,65078,65081,65082,65087,65088,65085,65086,65089,65090,65091,65092,59284,59285,65083,65084,65079,65080,65073,59286,65075,65076,59287,59288,59289,59290,59291,59292,59293,59294,59295],[59142,59143,59144,59145,59146,59147,59148,59149,
59150,59151,59152,59153,59154,59155,59156,59157,59158,59159,59160,59161,59162,59163,59164,59165,59166,59167,59168,59169,59170,59171,59172,59173,59174,59175,59176,59177,59178,59179,59180,59181,59182,59183,59184,59185,59186,59187,59188,59189,59190,59191,59192,59193,59194,59195,59196,59197,59198,59199,59200,59201,59202,59203,59204,63,59205,59206,59207,59208,59209,59210,59211,59212,59213,59214,59215,59216,59217,59218,59219,59220,59221,59222,59223,59224,59225,59226,59227,59228,59229,59230,59231,59232,
59233,59234,59235,59236,59237,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,59296,59297,59298,59299,59300,59301,59302,59303,59304,59305,59306,59307,59308,59309,59310,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,59311,59312,59313,59314,59315,59316,59317,59318,59319,
59320,59321,59322,59323],[714,715,729,8211,8213,8229,8245,8453,8457,8598,8599,8600,8601,8725,8735,8739,8786,8806,8807,8895,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9581,9582,9583,9584,9585,9586,9587,9601,9602,9603,9604,9605,9606,9607,63,9608,9609,9610,9611,9612,9613,9614,9615,9619,9620,9621,9660,9661,9698,9699,9700,9701,9737,8853,12306,12317,12318,59324,59325,59326,59327,59328,59329,59330,59331,
59332,59333,59334,257,225,462,224,275,233,283,232,299,237,464,236,333,243,466,242,363,250,468,249,470,472,474,476,252,234,593,59335,324,328,59336,609,59337,59338,59339,59340,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,59341,59342,59343,59344,59345,59346,59347,59348,59349,59350,59351,59352,59353,59354,59355,59356,59357,59358,
59359,59360,59361],[12321,12322,12323,12324,12325,12326,12327,12328,12329,12963,13198,13199,13212,13213,13214,13217,13252,13262,13265,13266,13269,65072,65506,65508,59362,8481,12849,59363,8208,59364,59365,59366,12540,12443,12444,12541,12542,12294,12445,12446,65097,65098,65099,65100,65101,65102,65103,65104,65105,65106,65108,65109,65110,65111,65113,65114,65115,65116,65117,65118,65119,65120,65121,63,65122,65123,65124,65125,65126,65128,65129,65130,65131,59367,59368,59369,59370,59371,59372,59373,59374,
59375,59376,59377,59378,59379,12295,59380,59381,59382,59383,59384,59385,59386,59387,59388,59389,59390,59391,59392,9472,9473,9474,9475,9476,9477,9478,9479,9480,9481,9482,9483,9484,9485,9486,9487,9488,9489,9490,9491,9492,9493,9494,9495,9496,9497,9498,9499,9500,9501,9502,9503,9504,9505,9506,9507,9508,9509,9510,9511,9512,9513,9514,9515,9516,9517,9518,9519,9520,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,9531,9532,9533,9534,9535,9536,9537,9538,9539,9540,9541,9542,9543,9544,9545,9546,9547,59393,59394,
59395,59396,59397,59398,59399,59400,59401,59402,59403,59404,59405,59406,59407],[29404,29405,29407,29410,29411,29412,29413,29414,29415,29418,29419,29429,29430,29433,29437,29438,29439,29440,29442,29444,29445,29446,29447,29448,29449,29451,29452,29453,29455,29456,29457,29458,29460,29464,29465,29466,29471,29472,29475,29476,29478,29479,29480,29485,29487,29488,29490,29491,29493,29494,29498,29499,29500,29501,29504,29505,29506,29507,29508,29509,29510,29511,29512,63,29513,29514,29515,29516,29518,29519,29521,
29523,29524,29525,29526,29528,29529,29530,29531,29532,29533,29534,29535,29537,29538,29539,29540,29541,29542,29543,29544,29545,29546,29547,29550,29552,29553,57344,57345,57346,57347,57348,57349,57350,57351,57352,57353,57354,57355,57356,57357,57358,57359,57360,57361,57362,57363,57364,57365,57366,57367,57368,57369,57370,57371,57372,57373,57374,57375,57376,57377,57378,57379,57380,57381,57382,57383,57384,57385,57386,57387,57388,57389,57390,57391,57392,57393,57394,57395,57396,57397,57398,57399,57400,57401,
57402,57403,57404,57405,57406,57407,57408,57409,57410,57411,57412,57413,57414,57415,57416,57417,57418,57419,57420,57421,57422,57423,57424,57425,57426,57427,57428,57429,57430,57431,57432,57433,57434,57435,57436,57437],[29554,29555,29556,29557,29558,29559,29560,29561,29562,29563,29564,29565,29567,29568,29569,29570,29571,29573,29574,29576,29578,29580,29581,29583,29584,29586,29587,29588,29589,29591,29592,29593,29594,29596,29597,29598,29600,29601,29603,29604,29605,29606,29607,29608,29610,29612,29613,29617,
29620,29621,29622,29624,29625,29628,29629,29630,29631,29633,29635,29636,29637,29638,29639,63,29643,29644,29646,29650,29651,29652,29653,29654,29655,29656,29658,29659,29660,29661,29663,29665,29666,29667,29668,29670,29672,29674,29675,29676,29678,29679,29680,29681,29683,29684,29685,29686,29687,57438,57439,57440,57441,57442,57443,57444,57445,57446,57447,57448,57449,57450,57451,57452,57453,57454,57455,57456,57457,57458,57459,57460,57461,57462,57463,57464,57465,57466,57467,57468,57469,57470,57471,57472,
57473,57474,57475,57476,57477,57478,57479,57480,57481,57482,57483,57484,57485,57486,57487,57488,57489,57490,57491,57492,57493,57494,57495,57496,57497,57498,57499,57500,57501,57502,57503,57504,57505,57506,57507,57508,57509,57510,57511,57512,57513,57514,57515,57516,57517,57518,57519,57520,57521,57522,57523,57524,57525,57526,57527,57528,57529,57530,57531],[29688,29689,29690,29691,29692,29693,29694,29695,29696,29697,29698,29700,29703,29704,29707,29708,29709,29710,29713,29714,29715,29716,29717,29718,29719,
29720,29721,29724,29725,29726,29727,29728,29729,29731,29732,29735,29737,29739,29741,29743,29745,29746,29751,29752,29753,29754,29755,29757,29758,29759,29760,29762,29763,29764,29765,29766,29767,29768,29769,29770,29771,29772,29773,63,29774,29775,29776,29777,29778,29779,29780,29782,29784,29789,29792,29793,29794,29795,29796,29797,29798,29799,29800,29801,29802,29803,29804,29806,29807,29809,29810,29811,29812,29813,29816,29817,29818,57532,57533,57534,57535,57536,57537,57538,57539,57540,57541,57542,57543,
57544,57545,57546,57547,57548,57549,57550,57551,57552,57553,57554,57555,57556,57557,57558,57559,57560,57561,57562,57563,57564,57565,57566,57567,57568,57569,57570,57571,57572,57573,57574,57575,57576,57577,57578,57579,57580,57581,57582,57583,57584,57585,57586,57587,57588,57589,57590,57591,57592,57593,57594,57595,57596,57597,57598,57599,57600,57601,57602,57603,57604,57605,57606,57607,57608,57609,57610,57611,57612,57613,57614,57615,57616,57617,57618,57619,57620,57621,57622,57623,57624,57625],[29819,29820,
29821,29823,29826,29828,29829,29830,29832,29833,29834,29836,29837,29839,29841,29842,29843,29844,29845,29846,29847,29848,29849,29850,29851,29853,29855,29856,29857,29858,29859,29860,29861,29862,29866,29867,29868,29869,29870,29871,29872,29873,29874,29875,29876,29877,29878,29879,29880,29881,29883,29884,29885,29886,29887,29888,29889,29890,29891,29892,29893,29894,29895,63,29896,29897,29898,29899,29900,29901,29902,29903,29904,29905,29907,29908,29909,29910,29911,29912,29913,29914,29915,29917,29919,29921,
29925,29927,29928,29929,29930,29931,29932,29933,29936,29937,29938,57626,57627,57628,57629,57630,57631,57632,57633,57634,57635,57636,57637,57638,57639,57640,57641,57642,57643,57644,57645,57646,57647,57648,57649,57650,57651,57652,57653,57654,57655,57656,57657,57658,57659,57660,57661,57662,57663,57664,57665,57666,57667,57668,57669,57670,57671,57672,57673,57674,57675,57676,57677,57678,57679,57680,57681,57682,57683,57684,57685,57686,57687,57688,57689,57690,57691,57692,57693,57694,57695,57696,57697,57698,
57699,57700,57701,57702,57703,57704,57705,57706,57707,57708,57709,57710,57711,57712,57713,57714,57715,57716,57717,57718,57719],[29939,29941,29944,29945,29946,29947,29948,29949,29950,29952,29953,29954,29955,29957,29958,29959,29960,29961,29962,29963,29964,29966,29968,29970,29972,29973,29974,29975,29979,29981,29982,29984,29985,29986,29987,29988,29990,29991,29994,29998,30004,30006,30009,30012,30013,30015,30017,30018,30019,30020,30022,30023,30025,30026,30029,30032,30033,30034,30035,30037,30038,30039,30040,
63,30045,30046,30047,30048,30049,30050,30051,30052,30055,30056,30057,30059,30060,30061,30062,30063,30064,30065,30067,30069,30070,30071,30074,30075,30076,30077,30078,30080,30081,30082,30084,30085,30087,57720,57721,57722,57723,57724,57725,57726,57727,57728,57729,57730,57731,57732,57733,57734,57735,57736,57737,57738,57739,57740,57741,57742,57743,57744,57745,57746,57747,57748,57749,57750,57751,57752,57753,57754,57755,57756,57757,57758,57759,57760,57761,57762,57763,57764,57765,57766,57767,57768,57769,
57770,57771,57772,57773,57774,57775,57776,57777,57778,57779,57780,57781,57782,57783,57784,57785,57786,57787,57788,57789,57790,57791,57792,57793,57794,57795,57796,57797,57798,57799,57800,57801,57802,57803,57804,57805,57806,57807,57808,57809,57810,57811,57812,57813],[30088,30089,30090,30092,30093,30094,30096,30099,30101,30104,30107,30108,30110,30114,30118,30119,30120,30121,30122,30125,30134,30135,30138,30139,30143,30144,30145,30150,30155,30156,30158,30159,30160,30161,30163,30167,30169,30170,30172,30173,
30175,30176,30177,30181,30185,30188,30189,30190,30191,30194,30195,30197,30198,30199,30200,30202,30203,30205,30206,30210,30212,30214,30215,63,30216,30217,30219,30221,30222,30223,30225,30226,30227,30228,30230,30234,30236,30237,30238,30241,30243,30247,30248,30252,30254,30255,30257,30258,30262,30263,30265,30266,30267,30269,30273,30274,30276,57814,57815,57816,57817,57818,57819,57820,57821,57822,57823,57824,57825,57826,57827,57828,57829,57830,57831,57832,57833,57834,57835,57836,57837,57838,57839,57840,
57841,57842,57843,57844,57845,57846,57847,57848,57849,57850,57851,57852,57853,57854,57855,57856,57857,57858,57859,57860,57861,57862,57863,57864,57865,57866,57867,57868,57869,57870,57871,57872,57873,57874,57875,57876,57877,57878,57879,57880,57881,57882,57883,57884,57885,57886,57887,57888,57889,57890,57891,57892,57893,57894,57895,57896,57897,57898,57899,57900,57901,57902,57903,57904,57905,57906,57907],[30277,30278,30279,30280,30281,30282,30283,30286,30287,30288,30289,30290,30291,30293,30295,30296,30297,
30298,30299,30301,30303,30304,30305,30306,30308,30309,30310,30311,30312,30313,30314,30316,30317,30318,30320,30321,30322,30323,30324,30325,30326,30327,30329,30330,30332,30335,30336,30337,30339,30341,30345,30346,30348,30349,30351,30352,30354,30356,30357,30359,30360,30362,30363,63,30364,30365,30366,30367,30368,30369,30370,30371,30373,30374,30375,30376,30377,30378,30379,30380,30381,30383,30384,30387,30389,30390,30391,30392,30393,30394,30395,30396,30397,30398,30400,30401,30403,21834,38463,22467,25384,
21710,21769,21696,30353,30284,34108,30702,33406,30861,29233,38552,38797,27688,23433,20474,25353,26263,23736,33018,26696,32942,26114,30414,20985,25942,29100,32753,34948,20658,22885,25034,28595,33453,25420,25170,21485,21543,31494,20843,30116,24052,25300,36299,38774,25226,32793,22365,38712,32610,29240,30333,26575,30334,25670,20336,36133,25308,31255,26001,29677,25644,25203,33324,39041,26495,29256,25198,25292,20276,29923,21322,21150,32458,37030,24110,26758,27036,33152,32465,26834,30917,34444,38225,20621,
35876,33502,32990,21253,35090,21093],[30404,30407,30409,30411,30412,30419,30421,30425,30426,30428,30429,30430,30432,30433,30434,30435,30436,30438,30439,30440,30441,30442,30443,30444,30445,30448,30451,30453,30454,30455,30458,30459,30461,30463,30464,30466,30467,30469,30470,30474,30476,30478,30479,30480,30481,30482,30483,30484,30485,30486,30487,30488,30491,30492,30493,30494,30497,30499,30500,30501,30503,30506,30507,63,30508,30510,30512,30513,30514,30515,30516,30521,30523,30525,30526,30527,30530,30532,
30533,30534,30536,30537,30538,30539,30540,30541,30542,30543,30546,30547,30548,30549,30550,30551,30552,30553,30556,34180,38649,20445,22561,39281,23453,25265,25253,26292,35961,40077,29190,26479,30865,24754,21329,21271,36744,32972,36125,38049,20493,29384,22791,24811,28953,34987,22868,33519,26412,31528,23849,32503,29997,27893,36454,36856,36924,40763,27604,37145,31508,24444,30887,34006,34109,27605,27609,27606,24065,24199,30201,38381,25949,24330,24517,36767,22721,33218,36991,38491,38829,36793,32534,36140,
25153,20415,21464,21342,36776,36777,36779,36941,26631,24426,33176,34920,40150,24971,21035,30250,24428,25996,28626,28392,23486,25672,20853,20912,26564,19993,31177,39292,28851],[30557,30558,30559,30560,30564,30567,30569,30570,30573,30574,30575,30576,30577,30578,30579,30580,30581,30582,30583,30584,30586,30587,30588,30593,30594,30595,30598,30599,30600,30601,30602,30603,30607,30608,30611,30612,30613,30614,30615,30616,30617,30618,30619,30620,30621,30622,30625,30627,30628,30630,30632,30635,30637,30638,30639,
30641,30642,30644,30646,30647,30648,30649,30650,63,30652,30654,30656,30657,30658,30659,30660,30661,30662,30663,30664,30665,30666,30667,30668,30670,30671,30672,30673,30674,30675,30676,30677,30678,30680,30681,30682,30685,30686,30687,30688,30689,30692,30149,24182,29627,33760,25773,25320,38069,27874,21338,21187,25615,38082,31636,20271,24091,33334,33046,33162,28196,27850,39539,25429,21340,21754,34917,22496,19981,24067,27493,31807,37096,24598,25830,29468,35009,26448,25165,36130,30572,36393,37319,24425,
33756,34081,39184,21442,34453,27531,24813,24808,28799,33485,33329,20179,27815,34255,25805,31961,27133,26361,33609,21397,31574,20391,20876,27979,23618,36461,25554,21449,33580,33590,26597,30900,25661,23519,23700,24046,35815,25286,26612,35962,25600,25530,34633,39307,35863,32544,38130,20135,38416,39076,26124,29462],[30694,30696,30698,30703,30704,30705,30706,30708,30709,30711,30713,30714,30715,30716,30723,30724,30725,30726,30727,30728,30730,30731,30734,30735,30736,30739,30741,30745,30747,30750,30752,30753,
30754,30756,30760,30762,30763,30766,30767,30769,30770,30771,30773,30774,30781,30783,30785,30786,30787,30788,30790,30792,30793,30794,30795,30797,30799,30801,30803,30804,30808,30809,30810,63,30811,30812,30814,30815,30816,30817,30818,30819,30820,30821,30822,30823,30824,30825,30831,30832,30833,30834,30835,30836,30837,30838,30840,30841,30842,30843,30845,30846,30847,30848,30849,30850,30851,22330,23581,24120,38271,20607,32928,21378,25950,30021,21809,20513,36229,25220,38046,26397,22066,28526,24034,21557,
28818,36710,25199,25764,25507,24443,28552,37108,33251,36784,23576,26216,24561,27785,38472,36225,34924,25745,31216,22478,27225,25104,21576,20056,31243,24809,28548,35802,25215,36894,39563,31204,21507,30196,25345,21273,27744,36831,24347,39536,32827,40831,20360,23610,36196,32709,26021,28861,20805,20914,34411,23815,23456,25277,37228,30068,36364,31264,24833,31609,20167,32504,30597,19985,33261,21021,20986,27249,21416,36487,38148,38607,28353,38500,26970],[30852,30853,30854,30856,30858,30859,30863,30864,30866,
30868,30869,30870,30873,30877,30878,30880,30882,30884,30886,30888,30889,30890,30891,30892,30893,30894,30895,30901,30902,30903,30904,30906,30907,30908,30909,30911,30912,30914,30915,30916,30918,30919,30920,30924,30925,30926,30927,30929,30930,30931,30934,30935,30936,30938,30939,30940,30941,30942,30943,30944,30945,30946,30947,63,30948,30949,30950,30951,30953,30954,30955,30957,30958,30959,30960,30961,30963,30965,30966,30968,30969,30971,30972,30973,30974,30975,30976,30978,30979,30980,30982,30983,30984,
30985,30986,30987,30988,30784,20648,30679,25616,35302,22788,25571,24029,31359,26941,20256,33337,21912,20018,30126,31383,24162,24202,38383,21019,21561,28810,25462,38180,22402,26149,26943,37255,21767,28147,32431,34850,25139,32496,30133,33576,30913,38604,36766,24904,29943,35789,27492,21050,36176,27425,32874,33905,22257,21254,20174,19995,20945,31895,37259,31751,20419,36479,31713,31388,25703,23828,20652,33030,30209,31929,28140,32736,26449,23384,23544,30923,25774,25619,25514,25387,38169,25645,36798,31572,
30249,25171,22823,21574,27513,20643,25140,24102,27526,20195,36151,34955,24453,36910],[30989,30990,30991,30992,30993,30994,30996,30997,30998,30999,31E3,31001,31002,31003,31004,31005,31007,31008,31009,31010,31011,31013,31014,31015,31016,31017,31018,31019,31020,31021,31022,31023,31024,31025,31026,31027,31029,31030,31031,31032,31033,31037,31039,31042,31043,31044,31045,31047,31050,31051,31052,31053,31054,31055,31056,31057,31058,31060,31061,31064,31065,31073,31075,63,31076,31078,31081,31082,31083,31084,
31086,31088,31089,31090,31091,31092,31093,31094,31097,31099,31100,31101,31102,31103,31106,31107,31110,31111,31112,31113,31115,31116,31117,31118,31120,31121,31122,24608,32829,25285,20025,21333,37112,25528,32966,26086,27694,20294,24814,28129,35806,24377,34507,24403,25377,20826,33633,26723,20992,25443,36424,20498,23707,31095,23548,21040,31291,24764,36947,30423,24503,24471,30340,36460,28783,30331,31561,30634,20979,37011,22564,20302,28404,36842,25932,31515,29380,28068,32735,23265,25269,24213,22320,33922,
31532,24093,24351,36882,32532,39072,25474,28359,30872,28857,20856,38747,22443,30005,20291,30008,24215,24806,22880,28096,27583,30857,21500,38613,20939,20993,25481,21514,38035,35843,36300,29241,30879,34678,36845,35853,21472],[31123,31124,31125,31126,31127,31128,31129,31131,31132,31133,31134,31135,31136,31137,31138,31139,31140,31141,31142,31144,31145,31146,31147,31148,31149,31150,31151,31152,31153,31154,31156,31157,31158,31159,31160,31164,31167,31170,31172,31173,31175,31176,31178,31180,31182,31183,31184,
31187,31188,31190,31191,31193,31194,31195,31196,31197,31198,31200,31201,31202,31205,31208,31210,63,31212,31214,31217,31218,31219,31220,31221,31222,31223,31225,31226,31228,31230,31231,31233,31236,31237,31239,31240,31241,31242,31244,31247,31248,31249,31250,31251,31253,31254,31256,31257,31259,31260,19969,30447,21486,38025,39030,40718,38189,23450,35746,20002,19996,20908,33891,25026,21160,26635,20375,24683,20923,27934,20828,25238,26007,38497,35910,36887,30168,37117,30563,27602,29322,29420,35835,22581,
30585,36172,26460,38208,32922,24230,28193,22930,31471,30701,38203,27573,26029,32526,22534,20817,38431,23545,22697,21544,36466,25958,39039,22244,38045,30462,36929,25479,21702,22810,22842,22427,36530,26421,36346,33333,21057,24816,22549,34558,23784,40517,20420,39069,35769,23077,24694,21380,25212,36943,37122,39295,24681,32780,20799,32819,23572,39285,27953,20108],[31261,31263,31265,31266,31268,31269,31270,31271,31272,31273,31274,31275,31276,31277,31278,31279,31280,31281,31282,31284,31285,31286,31288,31290,
31294,31296,31297,31298,31299,31300,31301,31303,31304,31305,31306,31307,31308,31309,31310,31311,31312,31314,31315,31316,31317,31318,31320,31321,31322,31323,31324,31325,31326,31327,31328,31329,31330,31331,31332,31333,31334,31335,31336,63,31337,31338,31339,31340,31341,31342,31343,31345,31346,31347,31349,31355,31356,31357,31358,31362,31365,31367,31369,31370,31371,31372,31374,31375,31376,31379,31380,31385,31386,31387,31390,31393,31394,36144,21457,32602,31567,20240,20047,38400,27861,29648,34281,24070,
30058,32763,27146,30718,38034,32321,20961,28902,21453,36820,33539,36137,29359,39277,27867,22346,33459,26041,32938,25151,38450,22952,20223,35775,32442,25918,33778,38750,21857,39134,32933,21290,35837,21536,32954,24223,27832,36153,33452,37210,21545,27675,20998,32439,22367,28954,27774,31881,22859,20221,24575,24868,31914,20016,23553,26539,34562,23792,38155,39118,30127,28925,36898,20911,32541,35773,22857,20964,20315,21542,22827,25975,32932,23413,25206,25282,36752,24133,27679,31526,20239,20440,26381],[31395,
31396,31399,31401,31402,31403,31406,31407,31408,31409,31410,31412,31413,31414,31415,31416,31417,31418,31419,31420,31421,31422,31424,31425,31426,31427,31428,31429,31430,31431,31432,31433,31434,31436,31437,31438,31439,31440,31441,31442,31443,31444,31445,31447,31448,31450,31451,31452,31453,31457,31458,31460,31463,31464,31465,31466,31467,31468,31470,31472,31473,31474,31475,63,31476,31477,31478,31479,31480,31483,31484,31486,31488,31489,31490,31493,31495,31497,31500,31501,31502,31504,31506,31507,31510,
31511,31512,31514,31516,31517,31519,31521,31522,31523,31527,31529,31533,28014,28074,31119,34993,24343,29995,25242,36741,20463,37340,26023,33071,33105,24220,33104,36212,21103,35206,36171,22797,20613,20184,38428,29238,33145,36127,23500,35747,38468,22919,32538,21648,22134,22030,35813,25913,27010,38041,30422,28297,24178,29976,26438,26577,31487,32925,36214,24863,31174,25954,36195,20872,21018,38050,32568,32923,32434,23703,28207,26464,31705,30347,39640,33167,32660,31957,25630,38224,31295,21578,21733,27468,
25601,25096,40509,33011,30105,21106,38761,33883,26684,34532,38401,38548,38124,20010,21508,32473,26681,36319,32789,26356,24218,32697],[31535,31536,31538,31540,31541,31542,31543,31545,31547,31549,31551,31552,31553,31554,31555,31556,31558,31560,31562,31565,31566,31571,31573,31575,31577,31580,31582,31583,31585,31587,31588,31589,31590,31591,31592,31593,31594,31595,31596,31597,31599,31600,31603,31604,31606,31608,31610,31612,31613,31615,31617,31618,31619,31620,31622,31623,31624,31625,31626,31627,31628,31630,
31631,63,31633,31634,31635,31638,31640,31641,31642,31643,31646,31647,31648,31651,31652,31653,31662,31663,31664,31666,31667,31669,31670,31671,31673,31674,31675,31676,31677,31678,31679,31680,31682,31683,31684,22466,32831,26775,24037,25915,21151,24685,40858,20379,36524,20844,23467,24339,24041,27742,25329,36129,20849,38057,21246,27807,33503,29399,22434,26500,36141,22815,36764,33735,21653,31629,20272,27837,23396,22993,40723,21476,34506,39592,35895,32929,25925,39038,22266,38599,21038,29916,21072,23521,
25346,35074,20054,25296,24618,26874,20851,23448,20896,35266,31649,39302,32592,24815,28748,36143,20809,24191,36891,29808,35268,22317,30789,24402,40863,38394,36712,39740,35809,30328,26690,26588,36330,36149,21053,36746,28378,26829,38149,37101,22269,26524,35065,36807,21704],[31685,31688,31689,31690,31691,31693,31694,31695,31696,31698,31700,31701,31702,31703,31704,31707,31708,31710,31711,31712,31714,31715,31716,31719,31720,31721,31723,31724,31725,31727,31728,31730,31731,31732,31733,31734,31736,31737,31738,
31739,31741,31743,31744,31745,31746,31747,31748,31749,31750,31752,31753,31754,31757,31758,31760,31761,31762,31763,31764,31765,31767,31768,31769,63,31770,31771,31772,31773,31774,31776,31777,31778,31779,31780,31781,31784,31785,31787,31788,31789,31790,31791,31792,31793,31794,31795,31796,31797,31798,31799,31801,31802,31803,31804,31805,31806,31810,39608,23401,28023,27686,20133,23475,39559,37219,25E3,37039,38889,21547,28085,23506,20989,21898,32597,32752,25788,25421,26097,25022,24717,28938,27735,27721,22831,
26477,33322,22741,22158,35946,27627,37085,22909,32791,21495,28009,21621,21917,33655,33743,26680,31166,21644,20309,21512,30418,35977,38402,27827,28088,36203,35088,40548,36154,22079,40657,30165,24456,29408,24680,21756,20136,27178,34913,24658,36720,21700,28888,34425,40511,27946,23439,24344,32418,21897,20399,29492,21564,21402,20505,21518,21628,20046,24573,29786,22774,33899,32993,34676,29392,31946,28246],[31811,31812,31813,31814,31815,31816,31817,31818,31819,31820,31822,31823,31824,31825,31826,31827,31828,
31829,31830,31831,31832,31833,31834,31835,31836,31837,31838,31839,31840,31841,31842,31843,31844,31845,31846,31847,31848,31849,31850,31851,31852,31853,31854,31855,31856,31857,31858,31861,31862,31863,31864,31865,31866,31870,31871,31872,31873,31874,31875,31876,31877,31878,31879,63,31880,31882,31883,31884,31885,31886,31887,31888,31891,31892,31894,31897,31898,31899,31904,31905,31907,31910,31911,31912,31913,31915,31916,31917,31919,31920,31924,31925,31926,31927,31928,31930,31931,24359,34382,21804,25252,
20114,27818,25143,33457,21719,21326,29502,28369,30011,21010,21270,35805,27088,24458,24576,28142,22351,27426,29615,26707,36824,32531,25442,24739,21796,30186,35938,28949,28067,23462,24187,33618,24908,40644,30970,34647,31783,30343,20976,24822,29004,26179,24140,24653,35854,28784,25381,36745,24509,24674,34516,22238,27585,24724,24935,21321,24800,26214,36159,31229,20250,28905,27719,35763,35826,32472,33636,26127,23130,39746,27985,28151,35905,27963,20249,28779,33719,25110,24785,38669,36135,31096,20987,22334,
22522,26426,30072,31293,31215,31637],[31935,31936,31938,31939,31940,31942,31945,31947,31950,31951,31952,31953,31954,31955,31956,31960,31962,31963,31965,31966,31969,31970,31971,31972,31973,31974,31975,31977,31978,31979,31980,31981,31982,31984,31985,31986,31987,31988,31989,31990,31991,31993,31994,31996,31997,31998,31999,32E3,32001,32002,32003,32004,32005,32006,32007,32008,32009,32011,32012,32013,32014,32015,32016,63,32017,32018,32019,32020,32021,32022,32023,32024,32025,32026,32027,32028,32029,32030,
32031,32033,32035,32036,32037,32038,32040,32041,32042,32044,32045,32046,32048,32049,32050,32051,32052,32053,32054,32908,39269,36857,28608,35749,40481,23020,32489,32521,21513,26497,26840,36753,31821,38598,21450,24613,30142,27762,21363,23241,32423,25380,20960,33034,24049,34015,25216,20864,23395,20238,31085,21058,24760,27982,23492,23490,35745,35760,26082,24524,38469,22931,32487,32426,22025,26551,22841,20339,23478,21152,33626,39050,36158,30002,38078,20551,31292,20215,26550,39550,23233,27516,30417,22362,
23574,31546,38388,29006,20860,32937,33392,22904,32516,33575,26816,26604,30897,30839,25315,25441,31616,20461,21098,20943,33616,27099,37492,36341,36145,35265,38190,31661,20214],[32055,32056,32057,32058,32059,32060,32061,32062,32063,32064,32065,32066,32067,32068,32069,32070,32071,32072,32073,32074,32075,32076,32077,32078,32079,32080,32081,32082,32083,32084,32085,32086,32087,32088,32089,32090,32091,32092,32093,32094,32095,32096,32097,32098,32099,32100,32101,32102,32103,32104,32105,32106,32107,32108,32109,
32111,32112,32113,32114,32115,32116,32117,32118,63,32120,32121,32122,32123,32124,32125,32126,32127,32128,32129,32130,32131,32132,32133,32134,32135,32136,32137,32138,32139,32140,32141,32142,32143,32144,32145,32146,32147,32148,32149,32150,32151,32152,20581,33328,21073,39279,28176,28293,28071,24314,20725,23004,23558,27974,27743,30086,33931,26728,22870,35762,21280,37233,38477,34121,26898,30977,28966,33014,20132,37066,27975,39556,23047,22204,25605,38128,30699,20389,33050,29409,35282,39290,32564,32478,
21119,25945,37237,36735,36739,21483,31382,25581,25509,30342,31224,34903,38454,25130,21163,33410,26708,26480,25463,30571,31469,27905,32467,35299,22992,25106,34249,33445,30028,20511,20171,30117,35819,23626,24062,31563,26020,37329,20170,27941,35167,32039,38182,20165,35880,36827,38771,26187,31105,36817,28908,28024],[32153,32154,32155,32156,32157,32158,32159,32160,32161,32162,32163,32164,32165,32167,32168,32169,32170,32171,32172,32173,32175,32176,32177,32178,32179,32180,32181,32182,32183,32184,32185,32186,
32187,32188,32189,32190,32191,32192,32193,32194,32195,32196,32197,32198,32199,32200,32201,32202,32203,32204,32205,32206,32207,32208,32209,32210,32211,32212,32213,32214,32215,32216,32217,63,32218,32219,32220,32221,32222,32223,32224,32225,32226,32227,32228,32229,32230,32231,32232,32233,32234,32235,32236,32237,32238,32239,32240,32241,32242,32243,32244,32245,32246,32247,32248,32249,32250,23613,21170,33606,20834,33550,30555,26230,40120,20140,24778,31934,31923,32463,20117,35686,26223,39048,38745,22659,
25964,38236,24452,30153,38742,31455,31454,20928,28847,31384,25578,31350,32416,29590,38893,20037,28792,20061,37202,21417,25937,26087,33276,33285,21646,23601,30106,38816,25304,29401,30141,23621,39545,33738,23616,21632,30697,20030,27822,32858,25298,25454,24040,20855,36317,36382,38191,20465,21477,24807,28844,21095,25424,40515,23071,20518,30519,21367,32482,25733,25899,25225,25496,20500,29237,35273,20915,35776,32477,22343,33740,38055,20891,21531,23803],[32251,32252,32253,32254,32255,32256,32257,32258,32259,
32260,32261,32262,32263,32264,32265,32266,32267,32268,32269,32270,32271,32272,32273,32274,32275,32276,32277,32278,32279,32280,32281,32282,32283,32284,32285,32286,32287,32288,32289,32290,32291,32292,32293,32294,32295,32296,32297,32298,32299,32300,32301,32302,32303,32304,32305,32306,32307,32308,32309,32310,32311,32312,32313,63,32314,32316,32317,32318,32319,32320,32322,32323,32324,32325,32326,32328,32329,32330,32331,32332,32333,32334,32335,32336,32337,32338,32339,32340,32341,32342,32343,32344,32345,
32346,32347,32348,32349,20426,31459,27994,37089,39567,21888,21654,21345,21679,24320,25577,26999,20975,24936,21002,22570,21208,22350,30733,30475,24247,24951,31968,25179,25239,20130,28821,32771,25335,28900,38752,22391,33499,26607,26869,30933,39063,31185,22771,21683,21487,28212,20811,21051,23458,35838,32943,21827,22438,24691,22353,21549,31354,24656,23380,25511,25248,21475,25187,23495,26543,21741,31391,33510,37239,24211,35044,22840,22446,25358,36328,33007,22359,31607,20393,24555,23485,27454,21281,31568,
29378,26694,30719,30518,26103,20917,20111,30420,23743,31397,33909,22862,39745,20608],[32350,32351,32352,32353,32354,32355,32356,32357,32358,32359,32360,32361,32362,32363,32364,32365,32366,32367,32368,32369,32370,32371,32372,32373,32374,32375,32376,32377,32378,32379,32380,32381,32382,32383,32384,32385,32387,32388,32389,32390,32391,32392,32393,32394,32395,32396,32397,32398,32399,32400,32401,32402,32403,32404,32405,32406,32407,32408,32409,32410,32412,32413,32414,63,32430,32436,32443,32444,32470,32484,
32492,32505,32522,32528,32542,32567,32569,32571,32572,32573,32574,32575,32576,32577,32579,32582,32583,32584,32585,32586,32587,32588,32589,32590,32591,32594,32595,39304,24871,28291,22372,26118,25414,22256,25324,25193,24275,38420,22403,25289,21895,34593,33098,36771,21862,33713,26469,36182,34013,23146,26639,25318,31726,38417,20848,28572,35888,25597,35272,25042,32518,28866,28389,29701,27028,29436,24266,37070,26391,28010,25438,21171,29282,32769,20332,23013,37226,28889,28061,21202,20048,38647,38253,34174,
30922,32047,20769,22418,25794,32907,31867,27882,26865,26974,20919,21400,26792,29313,40654,31729,29432,31163,28435,29702,26446,37324,40100,31036,33673,33620,21519,26647,20029,21385,21169,30782,21382,21033,20616,20363,20432],[32598,32601,32603,32604,32605,32606,32608,32611,32612,32613,32614,32615,32619,32620,32621,32623,32624,32627,32629,32630,32631,32632,32634,32635,32636,32637,32639,32640,32642,32643,32644,32645,32646,32647,32648,32649,32651,32653,32655,32656,32657,32658,32659,32661,32662,32663,32664,
32665,32667,32668,32672,32674,32675,32677,32678,32680,32681,32682,32683,32684,32685,32686,32689,63,32691,32692,32693,32694,32695,32698,32699,32702,32704,32706,32707,32708,32710,32711,32712,32713,32715,32717,32719,32720,32721,32722,32723,32726,32727,32729,32730,32731,32732,32733,32734,32738,32739,30178,31435,31890,27813,38582,21147,29827,21737,20457,32852,33714,36830,38256,24265,24604,28063,24088,25947,33080,38142,24651,28860,32451,31918,20937,26753,31921,33391,20004,36742,37327,26238,20142,35845,
25769,32842,20698,30103,29134,23525,36797,28518,20102,25730,38243,24278,26009,21015,35010,28872,21155,29454,29747,26519,30967,38678,20020,37051,40158,28107,20955,36161,21533,25294,29618,33777,38646,40836,38083,20278,32666,20940,28789,38517,23725,39046,21478,20196,28316,29705,27060,30827,39311,30041,21016,30244,27969,26611,20845,40857,32843,21657,31548,31423],[32740,32743,32744,32746,32747,32748,32749,32751,32754,32756,32757,32758,32759,32760,32761,32762,32765,32766,32767,32770,32775,32776,32777,32778,
32782,32783,32785,32787,32794,32795,32797,32798,32799,32801,32803,32804,32811,32812,32813,32814,32815,32816,32818,32820,32825,32826,32828,32830,32832,32833,32836,32837,32839,32840,32841,32846,32847,32848,32849,32851,32853,32854,32855,63,32857,32859,32860,32861,32862,32863,32864,32865,32866,32867,32868,32869,32870,32871,32872,32875,32876,32877,32878,32879,32880,32882,32883,32884,32885,32886,32887,32888,32889,32890,32891,32892,32893,38534,22404,25314,38471,27004,23044,25602,31699,28431,38475,33446,
21346,39045,24208,28809,25523,21348,34383,40065,40595,30860,38706,36335,36162,40575,28510,31108,24405,38470,25134,39540,21525,38109,20387,26053,23653,23649,32533,34385,27695,24459,29575,28388,32511,23782,25371,23402,28390,21365,20081,25504,30053,25249,36718,20262,20177,27814,32438,35770,33821,34746,32599,36923,38179,31657,39585,35064,33853,27931,39558,32476,22920,40635,29595,30721,34434,39532,39554,22043,21527,22475,20080,40614,21334,36808,33033,30610,39314,34542,28385,34067,26364,24930,28459],[32894,
32897,32898,32901,32904,32906,32909,32910,32911,32912,32913,32914,32916,32917,32919,32921,32926,32931,32934,32935,32936,32940,32944,32947,32949,32950,32952,32953,32955,32965,32967,32968,32969,32970,32971,32975,32976,32977,32978,32979,32980,32981,32984,32991,32992,32994,32995,32998,33006,33013,33015,33017,33019,33022,33023,33024,33025,33027,33028,33029,33031,33032,33035,63,33036,33045,33047,33049,33051,33052,33053,33055,33056,33057,33058,33059,33060,33061,33062,33063,33064,33065,33066,33067,33069,
33070,33072,33075,33076,33077,33079,33081,33082,33083,33084,33085,33087,35881,33426,33579,30450,27667,24537,33725,29483,33541,38170,27611,30683,38086,21359,33538,20882,24125,35980,36152,20040,29611,26522,26757,37238,38665,29028,27809,30473,23186,38209,27599,32654,26151,23504,22969,23194,38376,38391,20204,33804,33945,27308,30431,38192,29467,26790,23391,30511,37274,38753,31964,36855,35868,24357,31859,31192,35269,27852,34588,23494,24130,26825,30496,32501,20885,20813,21193,23081,32517,38754,33495,25551,
30596,34256,31186,28218,24217,22937,34065,28781,27665,25279,30399,25935,24751,38397,26126,34719,40483,38125,21517,21629,35884,25720],[33088,33089,33090,33091,33092,33093,33095,33097,33101,33102,33103,33106,33110,33111,33112,33115,33116,33117,33118,33119,33121,33122,33123,33124,33126,33128,33130,33131,33132,33135,33138,33139,33141,33142,33143,33144,33153,33155,33156,33157,33158,33159,33161,33163,33164,33165,33166,33168,33170,33171,33172,33173,33174,33175,33177,33178,33182,33183,33184,33185,33186,33188,
33189,63,33191,33193,33195,33196,33197,33198,33199,33200,33201,33202,33204,33205,33206,33207,33208,33209,33212,33213,33214,33215,33220,33221,33223,33224,33225,33227,33229,33230,33231,33232,33233,33234,33235,25721,34321,27169,33180,30952,25705,39764,25273,26411,33707,22696,40664,27819,28448,23518,38476,35851,29279,26576,25287,29281,20137,22982,27597,22675,26286,24149,21215,24917,26408,30446,30566,29287,31302,25343,21738,21584,38048,37027,23068,32435,27670,20035,22902,32784,22856,21335,30007,38590,
22218,25376,33041,24700,38393,28118,21602,39297,20869,23273,33021,22958,38675,20522,27877,23612,25311,20320,21311,33147,36870,28346,34091,25288,24180,30910,25781,25467,24565,23064,37247,40479,23615,25423,32834,23421,21870,38218,38221,28037,24744,26592,29406,20957,23425],[33236,33237,33238,33239,33240,33241,33242,33243,33244,33245,33246,33247,33248,33249,33250,33252,33253,33254,33256,33257,33259,33262,33263,33264,33265,33266,33269,33270,33271,33272,33273,33274,33277,33279,33283,33287,33288,33289,33290,
33291,33294,33295,33297,33299,33301,33302,33303,33304,33305,33306,33309,33312,33316,33317,33318,33319,33321,33326,33330,33338,33340,33341,33343,63,33344,33345,33346,33347,33349,33350,33352,33354,33356,33357,33358,33360,33361,33362,33363,33364,33365,33366,33367,33369,33371,33372,33373,33374,33376,33377,33378,33379,33380,33381,33382,33383,33385,25319,27870,29275,25197,38062,32445,33043,27987,20892,24324,22900,21162,24594,22899,26262,34384,30111,25386,25062,31983,35834,21734,27431,40485,27572,34261,
21589,20598,27812,21866,36276,29228,24085,24597,29750,25293,25490,29260,24472,28227,27966,25856,28504,30424,30928,30460,30036,21028,21467,20051,24222,26049,32810,32982,25243,21638,21032,28846,34957,36305,27873,21624,32986,22521,35060,36180,38506,37197,20329,27803,21943,30406,30768,25256,28921,28558,24429,34028,26842,30844,31735,33192,26379,40527,25447,30896,22383,30738,38713,25209,25259,21128,29749,27607],[33386,33387,33388,33389,33393,33397,33398,33399,33400,33403,33404,33408,33409,33411,33413,33414,
33415,33417,33420,33424,33427,33428,33429,33430,33434,33435,33438,33440,33442,33443,33447,33458,33461,33462,33466,33467,33468,33471,33472,33474,33475,33477,33478,33481,33488,33494,33497,33498,33501,33506,33511,33512,33513,33514,33516,33517,33518,33520,33522,33523,33525,33526,33528,63,33530,33532,33533,33534,33535,33536,33546,33547,33549,33552,33554,33555,33558,33560,33561,33565,33566,33567,33568,33569,33570,33571,33572,33573,33574,33577,33578,33582,33584,33586,33591,33595,33597,21860,33086,30130,
30382,21305,30174,20731,23617,35692,31687,20559,29255,39575,39128,28418,29922,31080,25735,30629,25340,39057,36139,21697,32856,20050,22378,33529,33805,24179,20973,29942,35780,23631,22369,27900,39047,23110,30772,39748,36843,31893,21078,25169,38138,20166,33670,33889,33769,33970,22484,26420,22275,26222,28006,35889,26333,28689,26399,27450,26646,25114,22971,19971,20932,28422,26578,27791,20854,26827,22855,27495,30054,23822,33040,40784,26071,31048,31041,39569,36215,23682,20062,20225,21551,22865,30732,22120,
27668,36804,24323,27773,27875,35755,25488],[33598,33599,33601,33602,33604,33605,33608,33610,33611,33612,33613,33614,33619,33621,33622,33623,33624,33625,33629,33634,33648,33649,33650,33651,33652,33653,33654,33657,33658,33662,33663,33664,33665,33666,33667,33668,33671,33672,33674,33675,33676,33677,33679,33680,33681,33684,33685,33686,33687,33689,33690,33693,33695,33697,33698,33699,33700,33701,33702,33703,33708,33709,33710,63,33711,33717,33723,33726,33727,33730,33731,33732,33734,33736,33737,33739,33741,
33742,33744,33745,33746,33747,33749,33751,33753,33754,33755,33758,33762,33763,33764,33766,33767,33768,33771,33772,33773,24688,27965,29301,25190,38030,38085,21315,36801,31614,20191,35878,20094,40660,38065,38067,21069,28508,36963,27973,35892,22545,23884,27424,27465,26538,21595,33108,32652,22681,34103,24378,25250,27207,38201,25970,24708,26725,30631,20052,20392,24039,38808,25772,32728,23789,20431,31373,20999,33540,19988,24623,31363,38054,20405,20146,31206,29748,21220,33465,25810,31165,23517,27777,38738,
36731,27682,20542,21375,28165,25806,26228,27696,24773,39031,35831,24198,29756,31351,31179,19992,37041,29699,27714,22234,37195,27845,36235,21306,34502,26354,36527,23624,39537,28192],[33774,33775,33779,33780,33781,33782,33783,33786,33787,33788,33790,33791,33792,33794,33797,33799,33800,33801,33802,33808,33810,33811,33812,33813,33814,33815,33817,33818,33819,33822,33823,33824,33825,33826,33827,33833,33834,33835,33836,33837,33838,33839,33840,33842,33843,33844,33845,33846,33847,33849,33850,33851,33854,33855,
33856,33857,33858,33859,33860,33861,33863,33864,33865,63,33866,33867,33868,33869,33870,33871,33872,33874,33875,33876,33877,33878,33880,33885,33886,33887,33888,33890,33892,33893,33894,33895,33896,33898,33902,33903,33904,33906,33908,33911,33913,33915,33916,21462,23094,40843,36259,21435,22280,39079,26435,37275,27849,20840,30154,25331,29356,21048,21149,32570,28820,30264,21364,40522,27063,30830,38592,35033,32676,28982,29123,20873,26579,29924,22756,25880,22199,35753,39286,25200,32469,24825,28909,22764,
20161,20154,24525,38887,20219,35748,20995,22922,32427,25172,20173,26085,25102,33592,33993,33635,34701,29076,28342,23481,32466,20887,25545,26580,32905,33593,34837,20754,23418,22914,36785,20083,27741,20837,35109,36719,38446,34122,29790,38160,38384,28070,33509,24369,25746,27922,33832,33134,40131,22622,36187,19977,21441],[33917,33918,33919,33920,33921,33923,33924,33925,33926,33930,33933,33935,33936,33937,33938,33939,33940,33941,33942,33944,33946,33947,33949,33950,33951,33952,33954,33955,33956,33957,33958,
33959,33960,33961,33962,33963,33964,33965,33966,33968,33969,33971,33973,33974,33975,33979,33980,33982,33984,33986,33987,33989,33990,33991,33992,33995,33996,33998,33999,34002,34004,34005,34007,63,34008,34009,34010,34011,34012,34014,34017,34018,34020,34023,34024,34025,34026,34027,34029,34030,34031,34033,34034,34035,34036,34037,34038,34039,34040,34041,34042,34043,34045,34046,34048,34049,34050,20254,25955,26705,21971,20007,25620,39578,25195,23234,29791,33394,28073,26862,20711,33678,30722,26432,21049,
27801,32433,20667,21861,29022,31579,26194,29642,33515,26441,23665,21024,29053,34923,38378,38485,25797,36193,33203,21892,27733,25159,32558,22674,20260,21830,36175,26188,19978,23578,35059,26786,25422,31245,28903,33421,21242,38902,23569,21736,37045,32461,22882,36170,34503,33292,33293,36198,25668,23556,24913,28041,31038,35774,30775,30003,21627,20280,36523,28145,23072,32453,31070,27784,23457,23158,29978,32958,24910,28183,22768,29983,29989,29298,21319,32499],[34051,34052,34053,34054,34055,34056,34057,34058,
34059,34061,34062,34063,34064,34066,34068,34069,34070,34072,34073,34075,34076,34077,34078,34080,34082,34083,34084,34085,34086,34087,34088,34089,34090,34093,34094,34095,34096,34097,34098,34099,34100,34101,34102,34110,34111,34112,34113,34114,34116,34117,34118,34119,34123,34124,34125,34126,34127,34128,34129,34130,34131,34132,34133,63,34135,34136,34138,34139,34140,34141,34143,34144,34145,34146,34147,34149,34150,34151,34153,34154,34155,34156,34157,34158,34159,34160,34161,34163,34165,34166,34167,34168,
34172,34173,34175,34176,34177,30465,30427,21097,32988,22307,24072,22833,29422,26045,28287,35799,23608,34417,21313,30707,25342,26102,20160,39135,34432,23454,35782,21490,30690,20351,23630,39542,22987,24335,31034,22763,19990,26623,20107,25325,35475,36893,21183,26159,21980,22124,36866,20181,20365,37322,39280,27663,24066,24643,23460,35270,35797,25910,25163,39318,23432,23551,25480,21806,21463,30246,20861,34092,26530,26803,27530,25234,36755,21460,33298,28113,30095,20070,36174,23408,29087,34223,26257,26329,
32626,34560,40653,40736,23646,26415,36848,26641,26463,25101,31446,22661,24246,25968,28465],[34178,34179,34182,34184,34185,34186,34187,34188,34189,34190,34192,34193,34194,34195,34196,34197,34198,34199,34200,34201,34202,34205,34206,34207,34208,34209,34210,34211,34213,34214,34215,34217,34219,34220,34221,34225,34226,34227,34228,34229,34230,34232,34234,34235,34236,34237,34238,34239,34240,34242,34243,34244,34245,34246,34247,34248,34250,34251,34252,34253,34254,34257,34258,63,34260,34262,34263,34264,34265,
34266,34267,34269,34270,34271,34272,34273,34274,34275,34277,34278,34279,34280,34282,34283,34284,34285,34286,34287,34288,34289,34290,34291,34292,34293,34294,34295,34296,24661,21047,32781,25684,34928,29993,24069,26643,25332,38684,21452,29245,35841,27700,30561,31246,21550,30636,39034,33308,35828,30805,26388,28865,26031,25749,22070,24605,31169,21496,19997,27515,32902,23546,21987,22235,20282,20284,39282,24051,26494,32824,24578,39042,36865,23435,35772,35829,25628,33368,25822,22013,33487,37221,20439,32032,
36895,31903,20723,22609,28335,23487,35785,32899,37240,33948,31639,34429,38539,38543,32485,39635,30862,23681,31319,36930,38567,31071,23385,25439,31499,34001,26797,21766,32553,29712,32034,38145,25152,22604,20182,23427,22905,22612],[34297,34298,34300,34301,34302,34304,34305,34306,34307,34308,34310,34311,34312,34313,34314,34315,34316,34317,34318,34319,34320,34322,34323,34324,34325,34327,34328,34329,34330,34331,34332,34333,34334,34335,34336,34337,34338,34339,34340,34341,34342,34344,34346,34347,34348,34349,
34350,34351,34352,34353,34354,34355,34356,34357,34358,34359,34361,34362,34363,34365,34366,34367,34368,63,34369,34370,34371,34372,34373,34374,34375,34376,34377,34378,34379,34380,34386,34387,34389,34390,34391,34392,34393,34395,34396,34397,34399,34400,34401,34403,34404,34405,34406,34407,34408,34409,34410,29549,25374,36427,36367,32974,33492,25260,21488,27888,37214,22826,24577,27760,22349,25674,36138,30251,28393,22363,27264,30192,28525,35885,35848,22374,27631,34962,30899,25506,21497,28845,27748,22616,
25642,22530,26848,33179,21776,31958,20504,36538,28108,36255,28907,25487,28059,28372,32486,33796,26691,36867,28120,38518,35752,22871,29305,34276,33150,30140,35466,26799,21076,36386,38161,25552,39064,36420,21884,20307,26367,22159,24789,28053,21059,23625,22825,28155,22635,3E4,29980,24684,33300,33094,25361,26465,36834,30522,36339,36148,38081,24086,21381,21548,28867],[34413,34415,34416,34418,34419,34420,34421,34422,34423,34424,34435,34436,34437,34438,34439,34440,34441,34446,34447,34448,34449,34450,34452,
34454,34455,34456,34457,34458,34459,34462,34463,34464,34465,34466,34469,34470,34475,34477,34478,34482,34483,34487,34488,34489,34491,34492,34493,34494,34495,34497,34498,34499,34501,34504,34508,34509,34514,34515,34517,34518,34519,34522,34524,63,34525,34528,34529,34530,34531,34533,34534,34535,34536,34538,34539,34540,34543,34549,34550,34551,34554,34555,34556,34557,34559,34561,34564,34565,34566,34571,34572,34574,34575,34576,34577,34580,34582,27712,24311,20572,20141,24237,25402,33351,36890,26704,37230,
30643,21516,38108,24420,31461,26742,25413,31570,32479,30171,20599,25237,22836,36879,20984,31171,31361,22270,24466,36884,28034,23648,22303,21520,20820,28237,22242,25512,39059,33151,34581,35114,36864,21534,23663,33216,25302,25176,33073,40501,38464,39534,39548,26925,22949,25299,21822,25366,21703,34521,27964,23043,29926,34972,27498,22806,35916,24367,28286,29609,39037,20024,28919,23436,30871,25405,26202,30358,24779,23451,23113,19975,33109,27754,29579,20129,26505,32593,24448,26106,26395,24536,22916,23041],
[34585,34587,34589,34591,34592,34596,34598,34599,34600,34602,34603,34604,34605,34607,34608,34610,34611,34613,34614,34616,34617,34618,34620,34621,34624,34625,34626,34627,34628,34629,34630,34634,34635,34637,34639,34640,34641,34642,34644,34645,34646,34648,34650,34651,34652,34653,34654,34655,34657,34658,34662,34663,34664,34665,34666,34667,34668,34669,34671,34673,34674,34675,34677,63,34679,34680,34681,34682,34687,34688,34689,34692,34694,34695,34697,34698,34700,34702,34703,34704,34705,34706,34708,34709,
34710,34712,34713,34714,34715,34716,34717,34718,34720,34721,34722,34723,34724,24013,24494,21361,38886,36829,26693,22260,21807,24799,20026,28493,32500,33479,33806,22996,20255,20266,23614,32428,26410,34074,21619,30031,32963,21890,39759,20301,28205,35859,23561,24944,21355,30239,28201,34442,25991,38395,32441,21563,31283,32010,38382,21985,32705,29934,25373,34583,28065,31389,25105,26017,21351,25569,27779,24043,21596,38056,20044,27745,35820,23627,26080,33436,26791,21566,21556,27595,27494,20116,25410,21320,
33310,20237,20398,22366,25098,38654,26212,29289,21247,21153,24735,35823,26132,29081,26512,35199,30802,30717,26224,22075,21560,38177,29306],[34725,34726,34727,34729,34730,34734,34736,34737,34738,34740,34742,34743,34744,34745,34747,34748,34750,34751,34753,34754,34755,34756,34757,34759,34760,34761,34764,34765,34766,34767,34768,34772,34773,34774,34775,34776,34777,34778,34780,34781,34782,34783,34785,34786,34787,34788,34790,34791,34792,34793,34795,34796,34797,34799,34800,34801,34802,34803,34804,34805,34806,
34807,34808,63,34810,34811,34812,34813,34815,34816,34817,34818,34820,34821,34822,34823,34824,34825,34827,34828,34829,34830,34831,34832,34833,34834,34836,34839,34840,34841,34842,34844,34845,34846,34847,34848,34851,31232,24687,24076,24713,33181,22805,24796,29060,28911,28330,27728,29312,27268,34989,24109,20064,23219,21916,38115,27927,31995,38553,25103,32454,30606,34430,21283,38686,36758,26247,23777,20384,29421,19979,21414,22799,21523,25472,38184,20808,20185,40092,32420,21688,36132,34900,33335,38386,
28046,24358,23244,26174,38505,29616,29486,21439,33146,39301,32673,23466,38519,38480,32447,30456,21410,38262,39321,31665,35140,28248,20065,32724,31077,35814,24819,21709,20139,39033,24055,27233,20687,21521,35937,33831,30813,38660,21066,21742,22179,38144,28040,23477,28102,26195],[34852,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34867,34868,34869,34870,34871,34872,34874,34875,34877,34878,34879,34881,34882,34883,34886,34887,34888,34889,34890,34891,34894,34895,34896,34897,
34898,34899,34901,34902,34904,34906,34907,34908,34909,34910,34911,34912,34918,34919,34922,34925,34927,34929,34931,34932,34933,34934,34936,34937,34938,63,34939,34940,34944,34947,34950,34951,34953,34954,34956,34958,34959,34960,34961,34963,34964,34965,34967,34968,34969,34970,34971,34973,34974,34975,34976,34977,34979,34981,34982,34983,34984,34985,34986,23567,23389,26657,32918,21880,31505,25928,26964,20123,27463,34638,38795,21327,25375,25658,37034,26012,32961,35856,20889,26800,21368,34809,25032,27844,
27899,35874,23633,34218,33455,38156,27427,36763,26032,24571,24515,20449,34885,26143,33125,29481,24826,20852,21009,22411,24418,37026,34892,37266,24184,26447,24615,22995,20804,20982,33016,21256,27769,38596,29066,20241,20462,32670,26429,21957,38152,31168,34966,32483,22687,25100,38656,34394,22040,39035,24464,35768,33988,37207,21465,26093,24207,30044,24676,32110,23167,32490,32493,36713,21927,23459,24748,26059,29572],[34988,34990,34991,34992,34994,34995,34996,34997,34998,35E3,35001,35002,35003,35005,35006,
35007,35008,35011,35012,35015,35016,35018,35019,35020,35021,35023,35024,35025,35027,35030,35031,35034,35035,35036,35037,35038,35040,35041,35046,35047,35049,35050,35051,35052,35053,35054,35055,35058,35061,35062,35063,35066,35067,35069,35071,35072,35073,35075,35076,35077,35078,35079,35080,63,35081,35083,35084,35085,35086,35087,35089,35092,35093,35094,35095,35096,35100,35101,35102,35103,35104,35106,35107,35108,35110,35111,35112,35113,35116,35117,35118,35119,35121,35122,35123,35125,35127,36873,30307,
30505,32474,38772,34203,23398,31348,38634,34880,21195,29071,24490,26092,35810,23547,39535,24033,27529,27739,35757,35759,36874,36805,21387,25276,40486,40493,21568,20011,33469,29273,34460,23830,34905,28079,38597,21713,20122,35766,28937,21693,38409,28895,28153,30416,20005,30740,34578,23721,24310,35328,39068,38414,28814,27839,22852,25513,30524,34893,28436,33395,22576,29141,21388,30746,38593,21761,24422,28976,23476,35866,39564,27523,22830,40495,31207,26472,25196,20335,30113,32650,27915,38451,27687,20208,
30162,20859,26679,28478,36992,33136,22934,29814],[35128,35129,35130,35131,35132,35133,35134,35135,35136,35138,35139,35141,35142,35143,35144,35145,35146,35147,35148,35149,35150,35151,35152,35153,35154,35155,35156,35157,35158,35159,35160,35161,35162,35163,35164,35165,35168,35169,35170,35171,35172,35173,35175,35176,35177,35178,35179,35180,35181,35182,35183,35184,35185,35186,35187,35188,35189,35190,35191,35192,35193,35194,35196,63,35197,35198,35200,35202,35204,35205,35207,35208,35209,35210,35211,35212,
35213,35214,35215,35216,35217,35218,35219,35220,35221,35222,35223,35224,35225,35226,35227,35228,35229,35230,35231,35232,35233,25671,23591,36965,31377,35875,23002,21676,33280,33647,35201,32768,26928,22094,32822,29239,37326,20918,20063,39029,25494,19994,21494,26355,33099,22812,28082,19968,22777,21307,25558,38129,20381,20234,34915,39056,22839,36951,31227,20202,33008,30097,27778,23452,23016,24413,26885,34433,20506,24050,20057,30691,20197,33402,25233,26131,37009,23673,20159,24441,33222,36920,32900,30123,
20134,35028,24847,27589,24518,20041,30410,28322,35811,35758,35850,35793,24322,32764,32716,32462,33589,33643,22240,27575,38899,38452,23035,21535,38134,28139,23493,39278,23609,24341,38544],[35234,35235,35236,35237,35238,35239,35240,35241,35242,35243,35244,35245,35246,35247,35248,35249,35250,35251,35252,35253,35254,35255,35256,35257,35258,35259,35260,35261,35262,35263,35264,35267,35277,35283,35284,35285,35287,35288,35289,35291,35293,35295,35296,35297,35298,35300,35303,35304,35305,35306,35308,35309,35310,
35312,35313,35314,35316,35317,35318,35319,35320,35321,35322,63,35323,35324,35325,35326,35327,35329,35330,35331,35332,35333,35334,35336,35337,35338,35339,35340,35341,35342,35343,35344,35345,35346,35347,35348,35349,35350,35351,35352,35353,35354,35355,35356,35357,21360,33521,27185,23156,40560,24212,32552,33721,33828,33829,33639,34631,36814,36194,30408,24433,39062,30828,26144,21727,25317,20323,33219,30152,24248,38605,36362,34553,21647,27891,28044,27704,24703,21191,29992,24189,20248,24736,24551,23588,
30001,37038,38080,29369,27833,28216,37193,26377,21451,21491,20305,37321,35825,21448,24188,36802,28132,20110,30402,27014,34398,24858,33286,20313,20446,36926,40060,24841,28189,28180,38533,20104,23089,38632,19982,23679,31161,23431,35821,32701,29577,22495,33419,37057,21505,36935,21947,23786,24481,24840,27442,29425,32946,35465],[35358,35359,35360,35361,35362,35363,35364,35365,35366,35367,35368,35369,35370,35371,35372,35373,35374,35375,35376,35377,35378,35379,35380,35381,35382,35383,35384,35385,35386,35387,
35388,35389,35391,35392,35393,35394,35395,35396,35397,35398,35399,35401,35402,35403,35404,35405,35406,35407,35408,35409,35410,35411,35412,35413,35414,35415,35416,35417,35418,35419,35420,35421,35422,63,35423,35424,35425,35426,35427,35428,35429,35430,35431,35432,35433,35434,35435,35436,35437,35438,35439,35440,35441,35442,35443,35444,35445,35446,35447,35448,35450,35451,35452,35453,35454,35455,35456,28020,23507,35029,39044,35947,39533,40499,28170,20900,20803,22435,34945,21407,25588,36757,22253,21592,
22278,29503,28304,32536,36828,33489,24895,24616,38498,26352,32422,36234,36291,38053,23731,31908,26376,24742,38405,32792,20113,37095,21248,38504,20801,36816,34164,37213,26197,38901,23381,21277,30776,26434,26685,21705,28798,23472,36733,20877,22312,21681,25874,26242,36190,36163,33039,33900,36973,31967,20991,34299,26531,26089,28577,34468,36481,22122,36896,30338,28790,29157,36131,25321,21017,27901,36156,24590,22686,24974,26366,36192,25166,21939,28195,26413,36711],[35457,35458,35459,35460,35461,35462,35463,
35464,35467,35468,35469,35470,35471,35472,35473,35474,35476,35477,35478,35479,35480,35481,35482,35483,35484,35485,35486,35487,35488,35489,35490,35491,35492,35493,35494,35495,35496,35497,35498,35499,35500,35501,35502,35503,35504,35505,35506,35507,35508,35509,35510,35511,35512,35513,35514,35515,35516,35517,35518,35519,35520,35521,35522,63,35523,35524,35525,35526,35527,35528,35529,35530,35531,35532,35533,35534,35535,35536,35537,35538,35539,35540,35541,35542,35543,35544,35545,35546,35547,35548,35549,
35550,35551,35552,35553,35554,35555,38113,38392,30504,26629,27048,21643,20045,28856,35784,25688,25995,23429,31364,20538,23528,30651,27617,35449,31896,27838,30415,26025,36759,23853,23637,34360,26632,21344,25112,31449,28251,32509,27167,31456,24432,28467,24352,25484,28072,26454,19976,24080,36134,20183,32960,30260,38556,25307,26157,25214,27836,36213,29031,32617,20806,32903,21484,36974,25240,21746,34544,36761,32773,38167,34071,36825,27993,29645,26015,30495,29956,30759,33275,36126,38024,20390,26517,30137,
35786,38663,25391,38215,38453,33976,25379,30529,24449,29424,20105,24596,25972,25327,27491,25919],[35556,35557,35558,35559,35560,35561,35562,35563,35564,35565,35566,35567,35568,35569,35570,35571,35572,35573,35574,35575,35576,35577,35578,35579,35580,35581,35582,35583,35584,35585,35586,35587,35588,35589,35590,35592,35593,35594,35595,35596,35597,35598,35599,35600,35601,35602,35603,35604,35605,35606,35607,35608,35609,35610,35611,35612,35613,35614,35615,35616,35617,35618,35619,63,35620,35621,35623,35624,
35625,35626,35627,35628,35629,35630,35631,35632,35633,35634,35635,35636,35637,35638,35639,35640,35641,35642,35643,35644,35645,35646,35647,35648,35649,35650,35651,35652,35653,24103,30151,37073,35777,33437,26525,25903,21553,34584,30693,32930,33026,27713,20043,32455,32844,30452,26893,27542,25191,20540,20356,22336,25351,27490,36286,21482,26088,32440,24535,25370,25527,33267,33268,32622,24092,23769,21046,26234,31209,31258,36136,28825,30164,28382,27835,31378,20013,30405,24544,38047,34935,32456,31181,32959,
37325,20210,20247,33311,21608,24030,27954,35788,31909,36724,32920,24090,21650,30385,23449,26172,39588,29664,26666,34523,26417,29482,35832,35803,36880,31481,28891,29038,25284,30633,22065,20027,33879,26609,21161,34496,36142,38136,31569],[35654,35655,35656,35657,35658,35659,35660,35661,35662,35663,35664,35665,35666,35667,35668,35669,35670,35671,35672,35673,35674,35675,35676,35677,35678,35679,35680,35681,35682,35683,35684,35685,35687,35688,35689,35690,35691,35693,35694,35695,35696,35697,35698,35699,35700,
35701,35702,35703,35704,35705,35706,35707,35708,35709,35710,35711,35712,35713,35714,35715,35716,35717,35718,63,35719,35720,35721,35722,35723,35724,35725,35726,35727,35728,35729,35730,35731,35732,35733,35734,35735,35736,35737,35738,35739,35740,35741,35742,35743,35756,35761,35771,35783,35792,35818,35849,35870,20303,27880,31069,39547,25235,29226,25341,19987,30742,36716,25776,36186,31686,26729,24196,35013,22918,25758,22766,29366,26894,38181,36861,36184,22368,32512,35846,20934,25417,25305,21331,26700,
29730,33537,37196,21828,30528,28796,27978,20857,21672,36164,23039,28363,28100,23388,32043,20180,31869,28371,23376,33258,28173,23383,39683,26837,36394,23447,32508,24635,32437,37049,36208,22863,25549,31199,36275,21330,26063,31062,35781,38459,32452,38075,32386,22068,37257,26368,32618,23562,36981,26152,24038,20304,26590,20570,20316,22352,24231,59408,59409,59410,59411,59412],[35896,35897,35898,35899,35900,35901,35902,35903,35904,35906,35907,35908,35909,35912,35914,35915,35917,35918,35919,35920,35921,35922,
35923,35924,35926,35927,35928,35929,35931,35932,35933,35934,35935,35936,35939,35940,35941,35942,35943,35944,35945,35948,35949,35950,35951,35952,35953,35954,35956,35957,35958,35959,35963,35964,35965,35966,35967,35968,35969,35971,35972,35974,35975,63,35976,35979,35981,35982,35983,35984,35985,35986,35987,35989,35990,35991,35993,35994,35995,35996,35997,35998,35999,36E3,36001,36002,36003,36004,36005,36006,36007,36008,36009,36010,36011,36012,36013,20109,19980,20800,19984,24319,21317,19989,20120,19998,39730,
23404,22121,20008,31162,20031,21269,20039,22829,29243,21358,27664,22239,32996,39319,27603,30590,40727,20022,20127,40720,20060,20073,20115,33416,23387,21868,22031,20164,21389,21405,21411,21413,21422,38757,36189,21274,21493,21286,21294,21310,36188,21350,21347,20994,21E3,21006,21037,21043,21055,21056,21068,21086,21089,21084,33967,21117,21122,21121,21136,21139,20866,32596,20155,20163,20169,20162,20200,20193,20203,20190,20251,20211,20258,20324,20213,20261,20263,20233,20267,20318,20327,25912,20314,20317],
[36014,36015,36016,36017,36018,36019,36020,36021,36022,36023,36024,36025,36026,36027,36028,36029,36030,36031,36032,36033,36034,36035,36036,36037,36038,36039,36040,36041,36042,36043,36044,36045,36046,36047,36048,36049,36050,36051,36052,36053,36054,36055,36056,36057,36058,36059,36060,36061,36062,36063,36064,36065,36066,36067,36068,36069,36070,36071,36072,36073,36074,36075,36076,63,36077,36078,36079,36080,36081,36082,36083,36084,36085,36086,36087,36088,36089,36090,36091,36092,36093,36094,36095,36096,
36097,36098,36099,36100,36101,36102,36103,36104,36105,36106,36107,36108,36109,20319,20311,20274,20285,20342,20340,20369,20361,20355,20367,20350,20347,20394,20348,20396,20372,20454,20456,20458,20421,20442,20451,20444,20433,20447,20472,20521,20556,20467,20524,20495,20526,20525,20478,20508,20492,20517,20520,20606,20547,20565,20552,20558,20588,20603,20645,20647,20649,20666,20694,20742,20717,20716,20710,20718,20743,20747,20189,27709,20312,20325,20430,40864,27718,31860,20846,24061,40649,39320,20865,22804,
21241,21261,35335,21264,20971,22809,20821,20128,20822,20147,34926,34980,20149,33044,35026,31104,23348,34819,32696,20907,20913,20925,20924],[36110,36111,36112,36113,36114,36115,36116,36117,36118,36119,36120,36121,36122,36123,36124,36128,36177,36178,36183,36191,36197,36200,36201,36202,36204,36206,36207,36209,36210,36216,36217,36218,36219,36220,36221,36222,36223,36224,36226,36227,36230,36231,36232,36233,36236,36237,36238,36239,36240,36242,36243,36245,36246,36247,36248,36249,36250,36251,36252,36253,36254,
36256,36257,63,36258,36260,36261,36262,36263,36264,36265,36266,36267,36268,36269,36270,36271,36272,36274,36278,36279,36281,36283,36285,36288,36289,36290,36293,36295,36296,36297,36298,36301,36304,36306,36307,36308,20935,20886,20898,20901,35744,35750,35751,35754,35764,35765,35767,35778,35779,35787,35791,35790,35794,35795,35796,35798,35800,35801,35804,35807,35808,35812,35816,35817,35822,35824,35827,35830,35833,35836,35839,35840,35842,35844,35847,35852,35855,35857,35858,35860,35861,35862,35865,35867,
35864,35869,35871,35872,35873,35877,35879,35882,35883,35886,35887,35890,35891,35893,35894,21353,21370,38429,38434,38433,38449,38442,38461,38460,38466,38473,38484,38495,38503,38508,38514,38516,38536,38541,38551,38576,37015,37019,37021,37017,37036,37025,37044,37043,37046,37050],[36309,36312,36313,36316,36320,36321,36322,36325,36326,36327,36329,36333,36334,36336,36337,36338,36340,36342,36348,36350,36351,36352,36353,36354,36355,36356,36358,36359,36360,36363,36365,36366,36368,36369,36370,36371,36373,36374,
36375,36376,36377,36378,36379,36380,36384,36385,36388,36389,36390,36391,36392,36395,36397,36400,36402,36403,36404,36406,36407,36408,36411,36412,36414,63,36415,36419,36421,36422,36428,36429,36430,36431,36432,36435,36436,36437,36438,36439,36440,36442,36443,36444,36445,36446,36447,36448,36449,36450,36451,36452,36453,36455,36456,36458,36459,36462,36465,37048,37040,37071,37061,37054,37072,37060,37063,37075,37094,37090,37084,37079,37083,37099,37103,37118,37124,37154,37150,37155,37169,37167,37177,37187,
37190,21005,22850,21154,21164,21165,21182,21759,21200,21206,21232,21471,29166,30669,24308,20981,20988,39727,21430,24321,30042,24047,22348,22441,22433,22654,22716,22725,22737,22313,22316,22314,22323,22329,22318,22319,22364,22331,22338,22377,22405,22379,22406,22396,22395,22376,22381,22390,22387,22445,22436,22412,22450,22479,22439,22452,22419,22432,22485,22488,22490,22489,22482,22456,22516,22511,22520,22500,22493],[36467,36469,36471,36472,36473,36474,36475,36477,36478,36480,36482,36483,36484,36486,36488,
36489,36490,36491,36492,36493,36494,36497,36498,36499,36501,36502,36503,36504,36505,36506,36507,36509,36511,36512,36513,36514,36515,36516,36517,36518,36519,36520,36521,36522,36525,36526,36528,36529,36531,36532,36533,36534,36535,36536,36537,36539,36540,36541,36542,36543,36544,36545,36546,63,36547,36548,36549,36550,36551,36552,36553,36554,36555,36556,36557,36559,36560,36561,36562,36563,36564,36565,36566,36567,36568,36569,36570,36571,36572,36573,36574,36575,36576,36577,36578,36579,36580,22539,22541,
22525,22509,22528,22558,22553,22596,22560,22629,22636,22657,22665,22682,22656,39336,40729,25087,33401,33405,33407,33423,33418,33448,33412,33422,33425,33431,33433,33451,33464,33470,33456,33480,33482,33507,33432,33463,33454,33483,33484,33473,33449,33460,33441,33450,33439,33476,33486,33444,33505,33545,33527,33508,33551,33543,33500,33524,33490,33496,33548,33531,33491,33553,33562,33542,33556,33557,33504,33493,33564,33617,33627,33628,33544,33682,33596,33588,33585,33691,33630,33583,33615,33607,33603,33631,
33600,33559,33632,33581,33594,33587,33638,33637],[36581,36582,36583,36584,36585,36586,36587,36588,36589,36590,36591,36592,36593,36594,36595,36596,36597,36598,36599,36600,36601,36602,36603,36604,36605,36606,36607,36608,36609,36610,36611,36612,36613,36614,36615,36616,36617,36618,36619,36620,36621,36622,36623,36624,36625,36626,36627,36628,36629,36630,36631,36632,36633,36634,36635,36636,36637,36638,36639,36640,36641,36642,36643,63,36644,36645,36646,36647,36648,36649,36650,36651,36652,36653,36654,36655,
36656,36657,36658,36659,36660,36661,36662,36663,36664,36665,36666,36667,36668,36669,36670,36671,36672,36673,36674,36675,36676,33640,33563,33641,33644,33642,33645,33646,33712,33656,33715,33716,33696,33706,33683,33692,33669,33660,33718,33705,33661,33720,33659,33688,33694,33704,33722,33724,33729,33793,33765,33752,22535,33816,33803,33757,33789,33750,33820,33848,33809,33798,33748,33759,33807,33795,33784,33785,33770,33733,33728,33830,33776,33761,33884,33873,33882,33881,33907,33927,33928,33914,33929,33912,
33852,33862,33897,33910,33932,33934,33841,33901,33985,33997,34E3,34022,33981,34003,33994,33983,33978,34016,33953,33977,33972,33943,34021,34019,34060,29965,34104,34032,34105,34079,34106],[36677,36678,36679,36680,36681,36682,36683,36684,36685,36686,36687,36688,36689,36690,36691,36692,36693,36694,36695,36696,36697,36698,36699,36700,36701,36702,36703,36704,36705,36706,36707,36708,36709,36714,36736,36748,36754,36765,36768,36769,36770,36772,36773,36774,36775,36778,36780,36781,36782,36783,36786,36787,36788,
36789,36791,36792,36794,36795,36796,36799,36800,36803,36806,63,36809,36810,36811,36812,36813,36815,36818,36822,36823,36826,36832,36833,36835,36839,36844,36847,36849,36850,36852,36853,36854,36858,36859,36860,36862,36863,36871,36872,36876,36878,36883,36885,36888,34134,34107,34047,34044,34137,34120,34152,34148,34142,34170,30626,34115,34162,34171,34212,34216,34183,34191,34169,34222,34204,34181,34233,34231,34224,34259,34241,34268,34303,34343,34309,34345,34326,34364,24318,24328,22844,22849,32823,22869,
22874,22872,21263,23586,23589,23596,23604,25164,25194,25247,25275,25290,25306,25303,25326,25378,25334,25401,25419,25411,25517,25590,25457,25466,25486,25524,25453,25516,25482,25449,25518,25532,25586,25592,25568,25599,25540,25566,25550,25682,25542,25534,25669,25665,25611,25627,25632,25612,25638,25633,25694,25732,25709,25750],[36889,36892,36899,36900,36901,36903,36904,36905,36906,36907,36908,36912,36913,36914,36915,36916,36919,36921,36922,36925,36927,36928,36931,36933,36934,36936,36937,36938,36939,36940,
36942,36948,36949,36950,36953,36954,36956,36957,36958,36959,36960,36961,36964,36966,36967,36969,36970,36971,36972,36975,36976,36977,36978,36979,36982,36983,36984,36985,36986,36987,36988,36990,36993,63,36996,36997,36998,36999,37001,37002,37004,37005,37006,37007,37008,37010,37012,37014,37016,37018,37020,37022,37023,37024,37028,37029,37031,37032,37033,37035,37037,37042,37047,37052,37053,37055,37056,25722,25783,25784,25753,25786,25792,25808,25815,25828,25826,25865,25893,25902,24331,24530,29977,24337,
21343,21489,21501,21481,21480,21499,21522,21526,21510,21579,21586,21587,21588,21590,21571,21537,21591,21593,21539,21554,21634,21652,21623,21617,21604,21658,21659,21636,21622,21606,21661,21712,21677,21698,21684,21714,21671,21670,21715,21716,21618,21667,21717,21691,21695,21708,21721,21722,21724,21673,21674,21668,21725,21711,21726,21787,21735,21792,21757,21780,21747,21794,21795,21775,21777,21799,21802,21863,21903,21941,21833,21869,21825,21845,21823,21840,21820],[37058,37059,37062,37064,37065,37067,37068,
37069,37074,37076,37077,37078,37080,37081,37082,37086,37087,37088,37091,37092,37093,37097,37098,37100,37102,37104,37105,37106,37107,37109,37110,37111,37113,37114,37115,37116,37119,37120,37121,37123,37125,37126,37127,37128,37129,37130,37131,37132,37133,37134,37135,37136,37137,37138,37139,37140,37141,37142,37143,37144,37146,37147,37148,63,37149,37151,37152,37153,37156,37157,37158,37159,37160,37161,37162,37163,37164,37165,37166,37168,37170,37171,37172,37173,37174,37175,37176,37178,37179,37180,37181,
37182,37183,37184,37185,37186,37188,21815,21846,21877,21878,21879,21811,21808,21852,21899,21970,21891,21937,21945,21896,21889,21919,21886,21974,21905,21883,21983,21949,21950,21908,21913,21994,22007,21961,22047,21969,21995,21996,21972,21990,21981,21956,21999,21989,22002,22003,21964,21965,21992,22005,21988,36756,22046,22024,22028,22017,22052,22051,22014,22016,22055,22061,22104,22073,22103,22060,22093,22114,22105,22108,22092,22100,22150,22116,22129,22123,22139,22140,22149,22163,22191,22228,22231,22237,
22241,22261,22251,22265,22271,22276,22282,22281,22300,24079,24089,24084,24081,24113,24123,24124],[37189,37191,37192,37201,37203,37204,37205,37206,37208,37209,37211,37212,37215,37216,37222,37223,37224,37227,37229,37235,37242,37243,37244,37248,37249,37250,37251,37252,37254,37256,37258,37262,37263,37267,37268,37269,37270,37271,37272,37273,37276,37277,37278,37279,37280,37281,37284,37285,37286,37287,37288,37289,37291,37292,37296,37297,37298,37299,37302,37303,37304,37305,37307,63,37308,37309,37310,37311,
37312,37313,37314,37315,37316,37317,37318,37320,37323,37328,37330,37331,37332,37333,37334,37335,37336,37337,37338,37339,37341,37342,37343,37344,37345,37346,37347,37348,37349,24119,24132,24148,24155,24158,24161,23692,23674,23693,23696,23702,23688,23704,23705,23697,23706,23708,23733,23714,23741,23724,23723,23729,23715,23745,23735,23748,23762,23780,23755,23781,23810,23811,23847,23846,23854,23844,23838,23814,23835,23896,23870,23860,23869,23916,23899,23919,23901,23915,23883,23882,23913,23924,23938,23961,
23965,35955,23991,24005,24435,24439,24450,24455,24457,24460,24469,24473,24476,24488,24493,24501,24508,34914,24417,29357,29360,29364,29367,29368,29379,29377,29390,29389,29394,29416,29423,29417,29426,29428,29431,29441,29427,29443,29434],[37350,37351,37352,37353,37354,37355,37356,37357,37358,37359,37360,37361,37362,37363,37364,37365,37366,37367,37368,37369,37370,37371,37372,37373,37374,37375,37376,37377,37378,37379,37380,37381,37382,37383,37384,37385,37386,37387,37388,37389,37390,37391,37392,37393,37394,
37395,37396,37397,37398,37399,37400,37401,37402,37403,37404,37405,37406,37407,37408,37409,37410,37411,37412,63,37413,37414,37415,37416,37417,37418,37419,37420,37421,37422,37423,37424,37425,37426,37427,37428,37429,37430,37431,37432,37433,37434,37435,37436,37437,37438,37439,37440,37441,37442,37443,37444,37445,29435,29463,29459,29473,29450,29470,29469,29461,29474,29497,29477,29484,29496,29489,29520,29517,29527,29536,29548,29551,29566,33307,22821,39143,22820,22786,39267,39271,39272,39273,39274,39275,
39276,39284,39287,39293,39296,39300,39303,39306,39309,39312,39313,39315,39316,39317,24192,24209,24203,24214,24229,24224,24249,24245,24254,24243,36179,24274,24273,24283,24296,24298,33210,24516,24521,24534,24527,24579,24558,24580,24545,24548,24574,24581,24582,24554,24557,24568,24601,24629,24614,24603,24591,24589,24617,24619,24586,24639,24609,24696,24697,24699,24698,24642],[37446,37447,37448,37449,37450,37451,37452,37453,37454,37455,37456,37457,37458,37459,37460,37461,37462,37463,37464,37465,37466,37467,
37468,37469,37470,37471,37472,37473,37474,37475,37476,37477,37478,37479,37480,37481,37482,37483,37484,37485,37486,37487,37488,37489,37490,37491,37493,37494,37495,37496,37497,37498,37499,37500,37501,37502,37503,37504,37505,37506,37507,37508,37509,63,37510,37511,37512,37513,37514,37515,37516,37517,37519,37520,37521,37522,37523,37524,37525,37526,37527,37528,37529,37530,37531,37532,37533,37534,37535,37536,37537,37538,37539,37540,37541,37542,37543,24682,24701,24726,24730,24749,24733,24707,24722,24716,
24731,24812,24763,24753,24797,24792,24774,24794,24756,24864,24870,24853,24867,24820,24832,24846,24875,24906,24949,25004,24980,24999,25015,25044,25077,24541,38579,38377,38379,38385,38387,38389,38390,38396,38398,38403,38404,38406,38408,38410,38411,38412,38413,38415,38418,38421,38422,38423,38425,38426,20012,29247,25109,27701,27732,27740,27722,27811,27781,27792,27796,27788,27752,27753,27764,27766,27782,27817,27856,27860,27821,27895,27896,27889,27863,27826,27872,27862,27898,27883,27886,27825,27859,27887,
27902],[37544,37545,37546,37547,37548,37549,37551,37552,37553,37554,37555,37556,37557,37558,37559,37560,37561,37562,37563,37564,37565,37566,37567,37568,37569,37570,37571,37572,37573,37574,37575,37577,37578,37579,37580,37581,37582,37583,37584,37585,37586,37587,37588,37589,37590,37591,37592,37593,37594,37595,37596,37597,37598,37599,37600,37601,37602,37603,37604,37605,37606,37607,37608,63,37609,37610,37611,37612,37613,37614,37615,37616,37617,37618,37619,37620,37621,37622,37623,37624,37625,37626,37627,
37628,37629,37630,37631,37632,37633,37634,37635,37636,37637,37638,37639,37640,37641,27961,27943,27916,27971,27976,27911,27908,27929,27918,27947,27981,27950,27957,27930,27983,27986,27988,27955,28049,28015,28062,28064,27998,28051,28052,27996,28E3,28028,28003,28186,28103,28101,28126,28174,28095,28128,28177,28134,28125,28121,28182,28075,28172,28078,28203,28270,28238,28267,28338,28255,28294,28243,28244,28210,28197,28228,28383,28337,28312,28384,28461,28386,28325,28327,28349,28347,28343,28375,28340,28367,
28303,28354,28319,28514,28486,28487,28452,28437,28409,28463,28470,28491,28532,28458,28425,28457,28553,28557,28556,28536,28530,28540,28538,28625],[37642,37643,37644,37645,37646,37647,37648,37649,37650,37651,37652,37653,37654,37655,37656,37657,37658,37659,37660,37661,37662,37663,37664,37665,37666,37667,37668,37669,37670,37671,37672,37673,37674,37675,37676,37677,37678,37679,37680,37681,37682,37683,37684,37685,37686,37687,37688,37689,37690,37691,37692,37693,37695,37696,37697,37698,37699,37700,37701,37702,
37703,37704,37705,63,37706,37707,37708,37709,37710,37711,37712,37713,37714,37715,37716,37717,37718,37719,37720,37721,37722,37723,37724,37725,37726,37727,37728,37729,37730,37731,37732,37733,37734,37735,37736,37737,37739,28617,28583,28601,28598,28610,28641,28654,28638,28640,28655,28698,28707,28699,28729,28725,28751,28766,23424,23428,23445,23443,23461,23480,29999,39582,25652,23524,23534,35120,23536,36423,35591,36790,36819,36821,36837,36846,36836,36841,36838,36851,36840,36869,36868,36875,36902,36881,
36877,36886,36897,36917,36918,36909,36911,36932,36945,36946,36944,36968,36952,36962,36955,26297,36980,36989,36994,37E3,36995,37003,24400,24407,24406,24408,23611,21675,23632,23641,23409,23651,23654,32700,24362,24361,24365,33396,24380,39739,23662,22913,22915,22925,22953,22954,22947],[37740,37741,37742,37743,37744,37745,37746,37747,37748,37749,37750,37751,37752,37753,37754,37755,37756,37757,37758,37759,37760,37761,37762,37763,37764,37765,37766,37767,37768,37769,37770,37771,37772,37773,37774,37776,37777,
37778,37779,37780,37781,37782,37783,37784,37785,37786,37787,37788,37789,37790,37791,37792,37793,37794,37795,37796,37797,37798,37799,37800,37801,37802,37803,63,37804,37805,37806,37807,37808,37809,37810,37811,37812,37813,37814,37815,37816,37817,37818,37819,37820,37821,37822,37823,37824,37825,37826,37827,37828,37829,37830,37831,37832,37833,37835,37836,37837,22935,22986,22955,22942,22948,22994,22962,22959,22999,22974,23045,23046,23005,23048,23011,23E3,23033,23052,23049,23090,23092,23057,23075,23059,23104,
23143,23114,23125,23100,23138,23157,33004,23210,23195,23159,23162,23230,23275,23218,23250,23252,23224,23264,23267,23281,23254,23270,23256,23260,23305,23319,23318,23346,23351,23360,23573,23580,23386,23397,23411,23377,23379,23394,39541,39543,39544,39546,39551,39549,39552,39553,39557,39560,39562,39568,39570,39571,39574,39576,39579,39580,39581,39583,39584,39586,39587,39589,39591,32415,32417,32419,32421,32424,32425],[37838,37839,37840,37841,37842,37843,37844,37845,37847,37848,37849,37850,37851,37852,37853,
37854,37855,37856,37857,37858,37859,37860,37861,37862,37863,37864,37865,37866,37867,37868,37869,37870,37871,37872,37873,37874,37875,37876,37877,37878,37879,37880,37881,37882,37883,37884,37885,37886,37887,37888,37889,37890,37891,37892,37893,37894,37895,37896,37897,37898,37899,37900,37901,63,37902,37903,37904,37905,37906,37907,37908,37909,37910,37911,37912,37913,37914,37915,37916,37917,37918,37919,37920,37921,37922,37923,37924,37925,37926,37927,37928,37929,37930,37931,37932,37933,37934,32429,32432,
32446,32448,32449,32450,32457,32459,32460,32464,32468,32471,32475,32480,32481,32488,32491,32494,32495,32497,32498,32525,32502,32506,32507,32510,32513,32514,32515,32519,32520,32523,32524,32527,32529,32530,32535,32537,32540,32539,32543,32545,32546,32547,32548,32549,32550,32551,32554,32555,32556,32557,32559,32560,32561,32562,32563,32565,24186,30079,24027,30014,37013,29582,29585,29614,29602,29599,29647,29634,29649,29623,29619,29632,29641,29640,29669,29657,39036,29706,29673,29671,29662,29626,29682,29711,
29738,29787,29734,29733,29736,29744,29742,29740],[37935,37936,37937,37938,37939,37940,37941,37942,37943,37944,37945,37946,37947,37948,37949,37951,37952,37953,37954,37955,37956,37957,37958,37959,37960,37961,37962,37963,37964,37965,37966,37967,37968,37969,37970,37971,37972,37973,37974,37975,37976,37977,37978,37979,37980,37981,37982,37983,37984,37985,37986,37987,37988,37989,37990,37991,37992,37993,37994,37996,37997,37998,37999,63,38E3,38001,38002,38003,38004,38005,38006,38007,38008,38009,38010,38011,
38012,38013,38014,38015,38016,38017,38018,38019,38020,38033,38038,38040,38087,38095,38099,38100,38106,38118,38139,38172,38176,29723,29722,29761,29788,29783,29781,29785,29815,29805,29822,29852,29838,29824,29825,29831,29835,29854,29864,29865,29840,29863,29906,29882,38890,38891,38892,26444,26451,26462,26440,26473,26533,26503,26474,26483,26520,26535,26485,26536,26526,26541,26507,26487,26492,26608,26633,26584,26634,26601,26544,26636,26585,26549,26586,26547,26589,26624,26563,26552,26594,26638,26561,26621,
26674,26675,26720,26721,26702,26722,26692,26724,26755,26653,26709,26726,26689,26727,26688,26686,26698,26697,26665,26805,26767,26740,26743,26771,26731,26818,26990,26876,26911,26912,26873],[38183,38195,38205,38211,38216,38219,38229,38234,38240,38254,38260,38261,38263,38264,38265,38266,38267,38268,38269,38270,38272,38273,38274,38275,38276,38277,38278,38279,38280,38281,38282,38283,38284,38285,38286,38287,38288,38289,38290,38291,38292,38293,38294,38295,38296,38297,38298,38299,38300,38301,38302,38303,38304,
38305,38306,38307,38308,38309,38310,38311,38312,38313,38314,63,38315,38316,38317,38318,38319,38320,38321,38322,38323,38324,38325,38326,38327,38328,38329,38330,38331,38332,38333,38334,38335,38336,38337,38338,38339,38340,38341,38342,38343,38344,38345,38346,38347,26916,26864,26891,26881,26967,26851,26896,26993,26937,26976,26946,26973,27012,26987,27008,27032,27E3,26932,27084,27015,27016,27086,27017,26982,26979,27001,27035,27047,27067,27051,27053,27092,27057,27073,27082,27103,27029,27104,27021,27135,27183,
27117,27159,27160,27237,27122,27204,27198,27296,27216,27227,27189,27278,27257,27197,27176,27224,27260,27281,27280,27305,27287,27307,29495,29522,27521,27522,27527,27524,27538,27539,27533,27546,27547,27553,27562,36715,36717,36721,36722,36723,36725,36726,36728,36727,36729,36730,36732,36734,36737,36738,36740,36743,36747],[38348,38349,38350,38351,38352,38353,38354,38355,38356,38357,38358,38359,38360,38361,38362,38363,38364,38365,38366,38367,38368,38369,38370,38371,38372,38373,38374,38375,38380,38399,38407,
38419,38424,38427,38430,38432,38435,38436,38437,38438,38439,38440,38441,38443,38444,38445,38447,38448,38455,38456,38457,38458,38462,38465,38467,38474,38478,38479,38481,38482,38483,38486,38487,63,38488,38489,38490,38492,38493,38494,38496,38499,38501,38502,38507,38509,38510,38511,38512,38513,38515,38520,38521,38522,38523,38524,38525,38526,38527,38528,38529,38530,38531,38532,38535,38537,38538,36749,36750,36751,36760,36762,36558,25099,25111,25115,25119,25122,25121,25125,25124,25132,33255,29935,29940,
29951,29967,29969,29971,25908,26094,26095,26096,26122,26137,26482,26115,26133,26112,28805,26359,26141,26164,26161,26166,26165,32774,26207,26196,26177,26191,26198,26209,26199,26231,26244,26252,26279,26269,26302,26331,26332,26342,26345,36146,36147,36150,36155,36157,36160,36165,36166,36168,36169,36167,36173,36181,36185,35271,35274,35275,35276,35278,35279,35280,35281,29294,29343,29277,29286,29295,29310,29311,29316,29323,29325,29327,29330,25352,25394,25520],[38540,38542,38545,38546,38547,38549,38550,38554,
38555,38557,38558,38559,38560,38561,38562,38563,38564,38565,38566,38568,38569,38570,38571,38572,38573,38574,38575,38577,38578,38580,38581,38583,38584,38586,38587,38591,38594,38595,38600,38602,38603,38608,38609,38611,38612,38614,38615,38616,38617,38618,38619,38620,38621,38622,38623,38625,38626,38627,38628,38629,38630,38631,38635,63,38636,38637,38638,38640,38641,38642,38644,38645,38648,38650,38651,38652,38653,38655,38658,38659,38661,38666,38667,38668,38672,38673,38674,38676,38677,38679,38680,38681,
38682,38683,38685,38687,38688,25663,25816,32772,27626,27635,27645,27637,27641,27653,27655,27654,27661,27669,27672,27673,27674,27681,27689,27684,27690,27698,25909,25941,25963,29261,29266,29270,29232,34402,21014,32927,32924,32915,32956,26378,32957,32945,32939,32941,32948,32951,32999,33E3,33001,33002,32987,32962,32964,32985,32973,32983,26384,32989,33003,33009,33012,33005,33037,33038,33010,33020,26389,33042,35930,33078,33054,33068,33048,33074,33096,33100,33107,33140,33113,33114,33137,33120,33129,33148,
33149,33133,33127,22605,23221,33160,33154,33169,28373,33187,33194,33228,26406,33226,33211],[38689,38690,38691,38692,38693,38694,38695,38696,38697,38699,38700,38702,38703,38705,38707,38708,38709,38710,38711,38714,38715,38716,38717,38719,38720,38721,38722,38723,38724,38725,38726,38727,38728,38729,38730,38731,38732,38733,38734,38735,38736,38737,38740,38741,38743,38744,38746,38748,38749,38751,38755,38756,38758,38759,38760,38762,38763,38764,38765,38766,38767,38768,38769,63,38770,38773,38775,38776,38777,
38778,38779,38781,38782,38783,38784,38785,38786,38787,38788,38790,38791,38792,38793,38794,38796,38798,38799,38800,38803,38805,38806,38807,38809,38810,38811,38812,38813,33217,33190,27428,27447,27449,27459,27462,27481,39121,39122,39123,39125,39129,39130,27571,24384,27586,35315,26E3,40785,26003,26044,26054,26052,26051,26060,26062,26066,26070,28800,28828,28822,28829,28859,28864,28855,28843,28849,28904,28874,28944,28947,28950,28975,28977,29043,29020,29032,28997,29042,29002,29048,29050,29080,29107,29109,
29096,29088,29152,29140,29159,29177,29213,29224,28780,28952,29030,29113,25150,25149,25155,25160,25161,31035,31040,31046,31049,31067,31068,31059,31066,31074,31063,31072,31087,31079,31098,31109,31114,31130,31143,31155,24529,24528],[38814,38815,38817,38818,38820,38821,38822,38823,38824,38825,38826,38828,38830,38832,38833,38835,38837,38838,38839,38840,38841,38842,38843,38844,38845,38846,38847,38848,38849,38850,38851,38852,38853,38854,38855,38856,38857,38858,38859,38860,38861,38862,38863,38864,38865,38866,
38867,38868,38869,38870,38871,38872,38873,38874,38875,38876,38877,38878,38879,38880,38881,38882,38883,63,38884,38885,38888,38894,38895,38896,38897,38898,38900,38903,38904,38905,38906,38907,38908,38909,38910,38911,38912,38913,38914,38915,38916,38917,38918,38919,38920,38921,38922,38923,38924,38925,38926,24636,24669,24666,24679,24641,24665,24675,24747,24838,24845,24925,25001,24989,25035,25041,25094,32896,32895,27795,27894,28156,30710,30712,30720,30729,30743,30744,30737,26027,30765,30748,30749,30777,
30778,30779,30751,30780,30757,30764,30755,30761,30798,30829,30806,30807,30758,30800,30791,30796,30826,30875,30867,30874,30855,30876,30881,30883,30898,30905,30885,30932,30937,30921,30956,30962,30981,30964,30995,31012,31006,31028,40859,40697,40699,40700,30449,30468,30477,30457,30471,30472,30490,30498,30489,30509,30502,30517,30520,30544,30545,30535,30531,30554,30568],[38927,38928,38929,38930,38931,38932,38933,38934,38935,38936,38937,38938,38939,38940,38941,38942,38943,38944,38945,38946,38947,38948,38949,
38950,38951,38952,38953,38954,38955,38956,38957,38958,38959,38960,38961,38962,38963,38964,38965,38966,38967,38968,38969,38970,38971,38972,38973,38974,38975,38976,38977,38978,38979,38980,38981,38982,38983,38984,38985,38986,38987,38988,38989,63,38990,38991,38992,38993,38994,38995,38996,38997,38998,38999,39E3,39001,39002,39003,39004,39005,39006,39007,39008,39009,39010,39011,39012,39013,39014,39015,39016,39017,39018,39019,39020,39021,39022,30562,30565,30591,30605,30589,30592,30604,30609,30623,30624,30640,
30645,30653,30010,30016,30030,30027,30024,30043,30066,30073,30083,32600,32609,32607,35400,32616,32628,32625,32633,32641,32638,30413,30437,34866,38021,38022,38023,38027,38026,38028,38029,38031,38032,38036,38039,38037,38042,38043,38044,38051,38052,38059,38058,38061,38060,38063,38064,38066,38068,38070,38071,38072,38073,38074,38076,38077,38079,38084,38088,38089,38090,38091,38092,38093,38094,38096,38097,38098,38101,38102,38103,38105,38104,38107,38110,38111,38112,38114,38116,38117,38119,38120,38122],[39023,
39024,39025,39026,39027,39028,39051,39054,39058,39061,39065,39075,39080,39081,39082,39083,39084,39085,39086,39087,39088,39089,39090,39091,39092,39093,39094,39095,39096,39097,39098,39099,39100,39101,39102,39103,39104,39105,39106,39107,39108,39109,39110,39111,39112,39113,39114,39115,39116,39117,39119,39120,39124,39126,39127,39131,39132,39133,39136,39137,39138,39139,39140,63,39141,39142,39145,39146,39147,39148,39149,39150,39151,39152,39153,39154,39155,39156,39157,39158,39159,39160,39161,39162,39163,
39164,39165,39166,39167,39168,39169,39170,39171,39172,39173,39174,39175,38121,38123,38126,38127,38131,38132,38133,38135,38137,38140,38141,38143,38147,38146,38150,38151,38153,38154,38157,38158,38159,38162,38163,38164,38165,38166,38168,38171,38173,38174,38175,38178,38186,38187,38185,38188,38193,38194,38196,38198,38199,38200,38204,38206,38207,38210,38197,38212,38213,38214,38217,38220,38222,38223,38226,38227,38228,38230,38231,38232,38233,38235,38238,38239,38237,38241,38242,38244,38245,38246,38247,38248,
38249,38250,38251,38252,38255,38257,38258,38259,38202,30695,30700,38601,31189,31213,31203,31211,31238,23879,31235,31234,31262,31252],[39176,39177,39178,39179,39180,39182,39183,39185,39186,39187,39188,39189,39190,39191,39192,39193,39194,39195,39196,39197,39198,39199,39200,39201,39202,39203,39204,39205,39206,39207,39208,39209,39210,39211,39212,39213,39215,39216,39217,39218,39219,39220,39221,39222,39223,39224,39225,39226,39227,39228,39229,39230,39231,39232,39233,39234,39235,39236,39237,39238,39239,39240,
39241,63,39242,39243,39244,39245,39246,39247,39248,39249,39250,39251,39254,39255,39256,39257,39258,39259,39260,39261,39262,39263,39264,39265,39266,39268,39270,39283,39288,39289,39291,39294,39298,39299,39305,31289,31287,31313,40655,39333,31344,30344,30350,30355,30361,30372,29918,29920,29996,40480,40482,40488,40489,40490,40491,40492,40498,40497,40502,40504,40503,40505,40506,40510,40513,40514,40516,40518,40519,40520,40521,40523,40524,40526,40529,40533,40535,40538,40539,40540,40542,40547,40550,40551,
40552,40553,40554,40555,40556,40561,40557,40563,30098,30100,30102,30112,30109,30124,30115,30131,30132,30136,30148,30129,30128,30147,30146,30166,30157,30179,30184,30182,30180,30187,30183,30211,30193,30204,30207,30224,30208,30213,30220,30231,30218,30245,30232,30229,30233],[39308,39310,39322,39323,39324,39325,39326,39327,39328,39329,39330,39331,39332,39334,39335,39337,39338,39339,39340,39341,39342,39343,39344,39345,39346,39347,39348,39349,39350,39351,39352,39353,39354,39355,39356,39357,39358,39359,39360,
39361,39362,39363,39364,39365,39366,39367,39368,39369,39370,39371,39372,39373,39374,39375,39376,39377,39378,39379,39380,39381,39382,39383,39384,63,39385,39386,39387,39388,39389,39390,39391,39392,39393,39394,39395,39396,39397,39398,39399,39400,39401,39402,39403,39404,39405,39406,39407,39408,39409,39410,39411,39412,39413,39414,39415,39416,39417,30235,30268,30242,30240,30272,30253,30256,30271,30261,30275,30270,30259,30285,30302,30292,30300,30294,30315,30319,32714,31462,31352,31353,31360,31366,31368,
31381,31398,31392,31404,31400,31405,31411,34916,34921,34930,34941,34943,34946,34978,35014,34999,35004,35017,35042,35022,35043,35045,35057,35098,35068,35048,35070,35056,35105,35097,35091,35099,35082,35124,35115,35126,35137,35174,35195,30091,32997,30386,30388,30684,32786,32788,32790,32796,32800,32802,32805,32806,32807,32809,32808,32817,32779,32821,32835,32838,32845,32850,32873,32881,35203,39032,39040,39043],[39418,39419,39420,39421,39422,39423,39424,39425,39426,39427,39428,39429,39430,39431,39432,39433,
39434,39435,39436,39437,39438,39439,39440,39441,39442,39443,39444,39445,39446,39447,39448,39449,39450,39451,39452,39453,39454,39455,39456,39457,39458,39459,39460,39461,39462,39463,39464,39465,39466,39467,39468,39469,39470,39471,39472,39473,39474,39475,39476,39477,39478,39479,39480,63,39481,39482,39483,39484,39485,39486,39487,39488,39489,39490,39491,39492,39493,39494,39495,39496,39497,39498,39499,39500,39501,39502,39503,39504,39505,39506,39507,39508,39509,39510,39511,39512,39513,39049,39052,39053,
39055,39060,39066,39067,39070,39071,39073,39074,39077,39078,34381,34388,34412,34414,34431,34426,34428,34427,34472,34445,34443,34476,34461,34471,34467,34474,34451,34473,34486,34500,34485,34510,34480,34490,34481,34479,34505,34511,34484,34537,34545,34546,34541,34547,34512,34579,34526,34548,34527,34520,34513,34563,34567,34552,34568,34570,34573,34569,34595,34619,34590,34597,34606,34586,34622,34632,34612,34609,34601,34615,34623,34690,34594,34685,34686,34683,34656,34672,34636,34670,34699,34643,34659,34684,
34660,34649,34661,34707,34735,34728,34770],[39514,39515,39516,39517,39518,39519,39520,39521,39522,39523,39524,39525,39526,39527,39528,39529,39530,39531,39538,39555,39561,39565,39566,39572,39573,39577,39590,39593,39594,39595,39596,39597,39598,39599,39602,39603,39604,39605,39609,39611,39613,39614,39615,39619,39620,39622,39623,39624,39625,39626,39629,39630,39631,39632,39634,39636,39637,39638,39639,39641,39642,39643,39644,63,39645,39646,39648,39650,39651,39652,39653,39655,39656,39657,39658,39660,39662,
39664,39665,39666,39667,39668,39669,39670,39671,39672,39674,39676,39677,39678,39679,39680,39681,39682,39684,39685,39686,34758,34696,34693,34733,34711,34691,34731,34789,34732,34741,34739,34763,34771,34749,34769,34752,34762,34779,34794,34784,34798,34838,34835,34814,34826,34843,34849,34873,34876,32566,32578,32580,32581,33296,31482,31485,31496,31491,31492,31509,31498,31531,31503,31559,31544,31530,31513,31534,31537,31520,31525,31524,31539,31550,31518,31576,31578,31557,31605,31564,31581,31584,31598,31611,
31586,31602,31601,31632,31654,31655,31672,31660,31645,31656,31621,31658,31644,31650,31659,31668,31697,31681,31692,31709,31706,31717,31718,31722,31756,31742,31740,31759,31766,31755],[39687,39689,39690,39691,39692,39693,39694,39696,39697,39698,39700,39701,39702,39703,39704,39705,39706,39707,39708,39709,39710,39712,39713,39714,39716,39717,39718,39719,39720,39721,39722,39723,39724,39725,39726,39728,39729,39731,39732,39733,39734,39735,39736,39737,39738,39741,39742,39743,39744,39750,39754,39755,39756,39758,
39760,39762,39763,39765,39766,39767,39768,39769,39770,63,39771,39772,39773,39774,39775,39776,39777,39778,39779,39780,39781,39782,39783,39784,39785,39786,39787,39788,39789,39790,39791,39792,39793,39794,39795,39796,39797,39798,39799,39800,39801,39802,39803,31775,31786,31782,31800,31809,31808,33278,33281,33282,33284,33260,34884,33313,33314,33315,33325,33327,33320,33323,33336,33339,33331,33332,33342,33348,33353,33355,33359,33370,33375,33384,34942,34949,34952,35032,35039,35166,32669,32671,32679,32687,
32688,32690,31868,25929,31889,31901,31900,31902,31906,31922,31932,31933,31937,31943,31948,31949,31944,31941,31959,31976,33390,26280,32703,32718,32725,32741,32737,32742,32745,32750,32755,31992,32119,32166,32174,32327,32411,40632,40628,36211,36228,36244,36241,36273,36199,36205,35911,35913,37194,37200,37198,37199,37220],[39804,39805,39806,39807,39808,39809,39810,39811,39812,39813,39814,39815,39816,39817,39818,39819,39820,39821,39822,39823,39824,39825,39826,39827,39828,39829,39830,39831,39832,39833,39834,
39835,39836,39837,39838,39839,39840,39841,39842,39843,39844,39845,39846,39847,39848,39849,39850,39851,39852,39853,39854,39855,39856,39857,39858,39859,39860,39861,39862,39863,39864,39865,39866,63,39867,39868,39869,39870,39871,39872,39873,39874,39875,39876,39877,39878,39879,39880,39881,39882,39883,39884,39885,39886,39887,39888,39889,39890,39891,39892,39893,39894,39895,39896,39897,39898,39899,37218,37217,37232,37225,37231,37245,37246,37234,37236,37241,37260,37253,37264,37261,37265,37282,37283,37290,
37293,37294,37295,37301,37300,37306,35925,40574,36280,36331,36357,36441,36457,36277,36287,36284,36282,36292,36310,36311,36314,36318,36302,36303,36315,36294,36332,36343,36344,36323,36345,36347,36324,36361,36349,36372,36381,36383,36396,36398,36387,36399,36410,36416,36409,36405,36413,36401,36425,36417,36418,36433,36434,36426,36464,36470,36476,36463,36468,36485,36495,36500,36496,36508,36510,35960,35970,35978,35973,35992,35988,26011,35286,35294,35290,35292],[39900,39901,39902,39903,39904,39905,39906,39907,
39908,39909,39910,39911,39912,39913,39914,39915,39916,39917,39918,39919,39920,39921,39922,39923,39924,39925,39926,39927,39928,39929,39930,39931,39932,39933,39934,39935,39936,39937,39938,39939,39940,39941,39942,39943,39944,39945,39946,39947,39948,39949,39950,39951,39952,39953,39954,39955,39956,39957,39958,39959,39960,39961,39962,63,39963,39964,39965,39966,39967,39968,39969,39970,39971,39972,39973,39974,39975,39976,39977,39978,39979,39980,39981,39982,39983,39984,39985,39986,39987,39988,39989,39990,
39991,39992,39993,39994,39995,35301,35307,35311,35390,35622,38739,38633,38643,38639,38662,38657,38664,38671,38670,38698,38701,38704,38718,40832,40835,40837,40838,40839,40840,40841,40842,40844,40702,40715,40717,38585,38588,38589,38606,38610,30655,38624,37518,37550,37576,37694,37738,37834,37775,37950,37995,40063,40066,40069,40070,40071,40072,31267,40075,40078,40080,40081,40082,40084,40085,40090,40091,40094,40095,40096,40097,40098,40099,40101,40102,40103,40104,40105,40107,40109,40110,40112,40113,40114,
40115,40116,40117,40118,40119,40122,40123,40124,40125,40132,40133,40134,40135,40138,40139],[39996,39997,39998,39999,4E4,40001,40002,40003,40004,40005,40006,40007,40008,40009,40010,40011,40012,40013,40014,40015,40016,40017,40018,40019,40020,40021,40022,40023,40024,40025,40026,40027,40028,40029,40030,40031,40032,40033,40034,40035,40036,40037,40038,40039,40040,40041,40042,40043,40044,40045,40046,40047,40048,40049,40050,40051,40052,40053,40054,40055,40056,40057,40058,63,40059,40061,40062,40064,40067,
40068,40073,40074,40076,40079,40083,40086,40087,40088,40089,40093,40106,40108,40111,40121,40126,40127,40128,40129,40130,40136,40137,40145,40146,40154,40155,40160,40161,40140,40141,40142,40143,40144,40147,40148,40149,40151,40152,40153,40156,40157,40159,40162,38780,38789,38801,38802,38804,38831,38827,38819,38834,38836,39601,39600,39607,40536,39606,39610,39612,39617,39616,39621,39618,39627,39628,39633,39749,39747,39751,39753,39752,39757,39761,39144,39181,39214,39253,39252,39647,39649,39654,39663,39659,
39675,39661,39673,39688,39695,39699,39711,39715,40637,40638,32315,40578,40583,40584,40587,40594,37846,40605,40607,40667,40668,40669,40672,40671,40674,40681,40679,40677,40682,40687,40738,40748,40751,40761,40759,40765,40766,40772],[40163,40164,40165,40166,40167,40168,40169,40170,40171,40172,40173,40174,40175,40176,40177,40178,40179,40180,40181,40182,40183,40184,40185,40186,40187,40188,40189,40190,40191,40192,40193,40194,40195,40196,40197,40198,40199,40200,40201,40202,40203,40204,40205,40206,40207,40208,
40209,40210,40211,40212,40213,40214,40215,40216,40217,40218,40219,40220,40221,40222,40223,40224,40225,63,40226,40227,40228,40229,40230,40231,40232,40233,40234,40235,40236,40237,40238,40239,40240,40241,40242,40243,40244,40245,40246,40247,40248,40249,40250,40251,40252,40253,40254,40255,40256,40257,40258,57908,57909,57910,57911,57912,57913,57914,57915,57916,57917,57918,57919,57920,57921,57922,57923,57924,57925,57926,57927,57928,57929,57930,57931,57932,57933,57934,57935,57936,57937,57938,57939,57940,
57941,57942,57943,57944,57945,57946,57947,57948,57949,57950,57951,57952,57953,57954,57955,57956,57957,57958,57959,57960,57961,57962,57963,57964,57965,57966,57967,57968,57969,57970,57971,57972,57973,57974,57975,57976,57977,57978,57979,57980,57981,57982,57983,57984,57985,57986,57987,57988,57989,57990,57991,57992,57993,57994,57995,57996,57997,57998,57999,58E3,58001],[40259,40260,40261,40262,40263,40264,40265,40266,40267,40268,40269,40270,40271,40272,40273,40274,40275,40276,40277,40278,40279,40280,40281,
40282,40283,40284,40285,40286,40287,40288,40289,40290,40291,40292,40293,40294,40295,40296,40297,40298,40299,40300,40301,40302,40303,40304,40305,40306,40307,40308,40309,40310,40311,40312,40313,40314,40315,40316,40317,40318,40319,40320,40321,63,40322,40323,40324,40325,40326,40327,40328,40329,40330,40331,40332,40333,40334,40335,40336,40337,40338,40339,40340,40341,40342,40343,40344,40345,40346,40347,40348,40349,40350,40351,40352,40353,40354,58002,58003,58004,58005,58006,58007,58008,58009,58010,58011,
58012,58013,58014,58015,58016,58017,58018,58019,58020,58021,58022,58023,58024,58025,58026,58027,58028,58029,58030,58031,58032,58033,58034,58035,58036,58037,58038,58039,58040,58041,58042,58043,58044,58045,58046,58047,58048,58049,58050,58051,58052,58053,58054,58055,58056,58057,58058,58059,58060,58061,58062,58063,58064,58065,58066,58067,58068,58069,58070,58071,58072,58073,58074,58075,58076,58077,58078,58079,58080,58081,58082,58083,58084,58085,58086,58087,58088,58089,58090,58091,58092,58093,58094,58095],
[40355,40356,40357,40358,40359,40360,40361,40362,40363,40364,40365,40366,40367,40368,40369,40370,40371,40372,40373,40374,40375,40376,40377,40378,40379,40380,40381,40382,40383,40384,40385,40386,40387,40388,40389,40390,40391,40392,40393,40394,40395,40396,40397,40398,40399,40400,40401,40402,40403,40404,40405,40406,40407,40408,40409,40410,40411,40412,40413,40414,40415,40416,40417,63,40418,40419,40420,40421,40422,40423,40424,40425,40426,40427,40428,40429,40430,40431,40432,40433,40434,40435,40436,40437,
40438,40439,40440,40441,40442,40443,40444,40445,40446,40447,40448,40449,40450,58096,58097,58098,58099,58100,58101,58102,58103,58104,58105,58106,58107,58108,58109,58110,58111,58112,58113,58114,58115,58116,58117,58118,58119,58120,58121,58122,58123,58124,58125,58126,58127,58128,58129,58130,58131,58132,58133,58134,58135,58136,58137,58138,58139,58140,58141,58142,58143,58144,58145,58146,58147,58148,58149,58150,58151,58152,58153,58154,58155,58156,58157,58158,58159,58160,58161,58162,58163,58164,58165,58166,
58167,58168,58169,58170,58171,58172,58173,58174,58175,58176,58177,58178,58179,58180,58181,58182,58183,58184,58185,58186,58187,58188,58189],[40451,40452,40453,40454,40455,40456,40457,40458,40459,40460,40461,40462,40463,40464,40465,40466,40467,40468,40469,40470,40471,40472,40473,40474,40475,40476,40477,40478,40484,40487,40494,40496,40500,40507,40508,40512,40525,40528,40530,40531,40532,40534,40537,40541,40543,40544,40545,40546,40549,40558,40559,40562,40564,40565,40566,40567,40568,40569,40570,40571,40572,
40573,40576,63,40577,40579,40580,40581,40582,40585,40586,40588,40589,40590,40591,40592,40593,40596,40597,40598,40599,40600,40601,40602,40603,40604,40606,40608,40609,40610,40611,40612,40613,40615,40616,40617,40618,58190,58191,58192,58193,58194,58195,58196,58197,58198,58199,58200,58201,58202,58203,58204,58205,58206,58207,58208,58209,58210,58211,58212,58213,58214,58215,58216,58217,58218,58219,58220,58221,58222,58223,58224,58225,58226,58227,58228,58229,58230,58231,58232,58233,58234,58235,58236,58237,
58238,58239,58240,58241,58242,58243,58244,58245,58246,58247,58248,58249,58250,58251,58252,58253,58254,58255,58256,58257,58258,58259,58260,58261,58262,58263,58264,58265,58266,58267,58268,58269,58270,58271,58272,58273,58274,58275,58276,58277,58278,58279,58280,58281,58282,58283],[40619,40620,40621,40622,40623,40624,40625,40626,40627,40629,40630,40631,40633,40634,40636,40639,40640,40641,40642,40643,40645,40646,40647,40648,40650,40651,40652,40656,40658,40659,40661,40662,40663,40665,40666,40670,40673,40675,
40676,40678,40680,40683,40684,40685,40686,40688,40689,40690,40691,40692,40693,40694,40695,40696,40698,40701,40703,40704,40705,40706,40707,40708,40709,63,40710,40711,40712,40713,40714,40716,40719,40721,40722,40724,40725,40726,40728,40730,40731,40732,40733,40734,40735,40737,40739,40740,40741,40742,40743,40744,40745,40746,40747,40749,40750,40752,40753,58284,58285,58286,58287,58288,58289,58290,58291,58292,58293,58294,58295,58296,58297,58298,58299,58300,58301,58302,58303,58304,58305,58306,58307,58308,
58309,58310,58311,58312,58313,58314,58315,58316,58317,58318,58319,58320,58321,58322,58323,58324,58325,58326,58327,58328,58329,58330,58331,58332,58333,58334,58335,58336,58337,58338,58339,58340,58341,58342,58343,58344,58345,58346,58347,58348,58349,58350,58351,58352,58353,58354,58355,58356,58357,58358,58359,58360,58361,58362,58363,58364,58365,58366,58367,58368,58369,58370,58371,58372,58373,58374,58375,58376,58377],[40754,40755,40756,40757,40758,40760,40762,40764,40767,40768,40769,40770,40771,40773,40774,
40775,40776,40777,40778,40779,40780,40781,40782,40783,40786,40787,40788,40789,40790,40791,40792,40793,40794,40795,40796,40797,40798,40799,40800,40801,40802,40803,40804,40805,40806,40807,40808,40809,40810,40811,40812,40813,40814,40815,40816,40817,40818,40819,40820,40821,40822,40823,40824,63,40825,40826,40827,40828,40829,40830,40833,40834,40845,40846,40847,40848,40849,40850,40851,40852,40853,40854,40855,40856,40860,40861,40862,40865,40866,40867,40868,40869,63788,63865,63893,63975,63985,58378,58379,
58380,58381,58382,58383,58384,58385,58386,58387,58388,58389,58390,58391,58392,58393,58394,58395,58396,58397,58398,58399,58400,58401,58402,58403,58404,58405,58406,58407,58408,58409,58410,58411,58412,58413,58414,58415,58416,58417,58418,58419,58420,58421,58422,58423,58424,58425,58426,58427,58428,58429,58430,58431,58432,58433,58434,58435,58436,58437,58438,58439,58440,58441,58442,58443,58444,58445,58446,58447,58448,58449,58450,58451,58452,58453,58454,58455,58456,58457,58458,58459,58460,58461,58462,58463,
58464,58465,58466,58467,58468,58469,58470,58471],[64012,64013,64014,64015,64017,64019,64020,64024,64031,64032,64033,64035,64036,64039,64040,64041,59413,59414,59415,59416,59417,59418,59419,59420,59421,59422,59423,59424,59425,59426,59427,59428,59429,59430,59431,59432,59433,59434,59435,59436,59437,59438,59439,59440,59441,59442,59443,59444,59445,59446,59447,59448,59449,59450,59451,59452,59453,59454,59455,59456,59457,59458,59459,63,59460,59461,59462,59463,59464,59465,59466,59467,59468,59469,59470,59471,
59472,59473,59474,59475,59476,59477,59478,59479,59480,59481,59482,59483,59484,59485,59486,59487,59488,59489,59490,59491,59492,58472,58473,58474,58475,58476,58477,58478,58479,58480,58481,58482,58483,58484,58485,58486,58487,58488,58489,58490,58491,58492,58493,58494,58495,58496,58497,58498,58499,58500,58501,58502,58503,58504,58505,58506,58507,58508,58509,58510,58511,58512,58513,58514,58515,58516,58517,58518,58519,58520,58521,58522,58523,58524,58525,58526,58527,58528,58529,58530,58531,58532,58533,58534,
58535,58536,58537,58538,58539,58540,58541,58542,58543,58544,58545,58546,58547,58548,58549,58550,58551,58552,58553,58554,58555,58556,58557,58558,58559,58560,58561,58562,58563,58564,58565]];function getUcsByGbkAsc(e){var f=(e&65280)>>8,a=e&255;return 129<=f&&254>=f&&64<=a&&254>=a?ucs[f-129][a-64]:e}function gbkstr2ucsstr(e){for(var f,a="",b,d=0;d<e.length;d++)b=e.charCodeAt(d),f=e[d],33088<=b&&(b=getUcsByGbkAsc(b),f=String.fromCharCode(b)),a+=f;return a}
function gbkByteArr2UcsStr(e){for(var f=0,a="",b;0!=e[f]&&f<e.length;)128>e[f]?b=e[f]:(b=getUcsByGbkAsc((e[f]<<8)+e[f+1]),f++),a+=String.fromCharCode(b),f++;return a}
function ucsstr2gbkarr(e){var f=$URL.encode(e);e=[];for(var a=0;a<f.length;a++){var b=f.charAt(a);"%"==b?(b=f.charAt(a+1)+f.charAt(a+2),e.push(parseInt(b,16)),a+=2):e.push(b.charCodeAt())}f=ucsSpecialUnicode(e);if(0<f.length)for(a=0;a<f.length;a++){b=f[a];var d=specialDeal(59299);e.splice(b,0,d[0]);e.splice(b+1,0,d[1]);e.splice(b+2,1)}return e}function ucsSpecialUnicode(e){for(var f=[],a=e.length,b=0;b<a;b++)59299==e[b]&&f.push(b);return f}
function specialDeal(e){var f=[];switch(e){case 59299:f.push(167),f.push(197)}return f}
var BS=20,shifts2=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],des_skb=[[0,16,536870912,536870928,65536,65552,536936448,536936464,2048,2064,536872960,536872976,67584,67600,536938496,536938512,32,48,536870944,536870960,65568,65584,536936480,536936496,2080,2096,536872992,536873008,67616,67632,536938528,536938544,524288,524304,537395200,537395216,589824,589840,537460736,537460752,526336,526352,537397248,537397264,591872,591888,537462784,537462800,524320,524336,537395232,537395248,589856,589872,537460768,537460784,
526368,526384,537397280,537397296,591904,591920,537462816,537462832],[0,33554432,8192,33562624,2097152,35651584,2105344,35659776,4,33554436,8196,33562628,2097156,35651588,2105348,35659780,1024,33555456,9216,33563648,2098176,35652608,2106368,35660800,1028,33555460,9220,33563652,2098180,35652612,2106372,35660804,268435456,301989888,268443648,301998080,270532608,304087040,270540800,304095232,268435460,301989892,268443652,301998084,270532612,304087044,270540804,304095236,268436480,301990912,268444672,
301999104,270533632,304088064,270541824,304096256,268436484,301990916,268444676,301999108,270533636,304088068,270541828,304096260],[0,1,262144,262145,16777216,16777217,17039360,17039361,2,3,262146,262147,16777218,16777219,17039362,17039363,512,513,262656,262657,16777728,16777729,17039872,17039873,514,515,262658,262659,16777730,16777731,17039874,17039875,134217728,134217729,134479872,134479873,150994944,150994945,151257088,151257089,134217730,134217731,134479874,134479875,150994946,150994947,151257090,
151257091,134218240,134218241,134480384,134480385,150995456,150995457,151257600,151257601,134218242,134218243,134480386,134480387,150995458,150995459,151257602,151257603],[0,1048576,256,1048832,8,1048584,264,1048840,4096,1052672,4352,1052928,4104,1052680,4360,1052936,67108864,68157440,67109120,68157696,67108872,68157448,67109128,68157704,67112960,68161536,67113216,68161792,67112968,68161544,67113224,68161800,131072,1179648,131328,1179904,131080,1179656,131336,1179912,135168,1183744,135424,1184E3,
135176,1183752,135432,1184008,67239936,68288512,67240192,68288768,67239944,68288520,67240200,68288776,67244032,68292608,67244288,68292864,67244040,68292616,67244296,68292872],[0,268435456,65536,268500992,4,268435460,65540,268500996,536870912,805306368,536936448,805371904,536870916,805306372,536936452,805371908,1048576,269484032,1114112,269549568,1048580,269484036,1114116,269549572,537919488,806354944,537985024,806420480,537919492,806354948,537985028,806420484,4096,268439552,69632,268505088,4100,268439556,
69636,268505092,536875008,805310464,536940544,805376E3,536875012,805310468,536940548,805376004,1052672,269488128,1118208,269553664,1052676,269488132,1118212,269553668,537923584,806359040,537989120,806424576,537923588,806359044,537989124,806424580],[0,134217728,8,134217736,1024,134218752,1032,134218760,131072,134348800,131080,134348808,132096,134349824,132104,134349832,1,134217729,9,134217737,1025,134218753,1033,134218761,131073,134348801,131081,134348809,132097,134349825,132105,134349833,33554432,
167772160,33554440,167772168,33555456,167773184,33555464,167773192,33685504,167903232,33685512,167903240,33686528,167904256,33686536,167904264,33554433,167772161,33554441,167772169,33555457,167773185,33555465,167773193,33685505,167903233,33685513,167903241,33686529,167904257,33686537,167904265],[0,256,524288,524544,16777216,16777472,17301504,17301760,16,272,524304,524560,16777232,16777488,17301520,17301776,2097152,2097408,2621440,2621696,18874368,18874624,19398656,19398912,2097168,2097424,2621456,
2621712,18874384,18874640,19398672,19398928,512,768,524800,525056,16777728,16777984,17302016,17302272,528,784,524816,525072,16777744,16778E3,17302032,17302288,2097664,2097920,2621952,2622208,18874880,18875136,19399168,19399424,2097680,2097936,2621968,2622224,18874896,18875152,19399184,19399440],[0,67108864,262144,67371008,2,67108866,262146,67371010,8192,67117056,270336,67379200,8194,67117058,270338,67379202,32,67108896,262176,67371040,34,67108898,262178,67371042,8224,67117088,270368,67379232,8226,
67117090,270370,67379234,2048,67110912,264192,67373056,2050,67110914,264194,67373058,10240,67119104,272384,67381248,10242,67119106,272386,67381250,2080,67110944,264224,67373088,2082,67110946,264226,67373090,10272,67119136,272416,67381280,10274,67119138,272418,67381282]],des_sptrans=[[34080768,524288,33554434,34080770,33554432,526338,524290,33554434,526338,34080768,34078720,2050,33556482,33554432,0,524290,524288,2,33556480,526336,34080770,34078720,2050,33556480,2,2048,526336,34078722,2048,33556482,
34078722,0,0,34080770,33556480,524290,34080768,524288,2050,33556480,34078722,2048,526336,33554434,526338,2,33554434,34078720,34080770,526336,34078720,33556482,33554432,2050,524290,0,524288,33554432,33556482,34080768,2,34078722,2048,526338],[1074823184,0,1081344,1074790400,1073741840,32784,1073774592,1081344,32768,1074790416,16,1073774592,1048592,1074823168,1074790400,16,1048576,1073774608,1074790416,32768,1081360,1073741824,0,1048592,1073774608,1081360,1074823168,1073741840,1073741824,1048576,32784,
1074823184,1048592,1074823168,1073774592,1081360,1074823184,1048592,1073741840,0,1073741824,32784,1048576,1074790416,32768,1073741824,1081360,1073774608,1074823168,32768,0,1073741840,16,1074823184,1081344,1074790400,1074790416,1048576,32784,1073774592,1073774608,16,1074790400,1081344],[67108865,67371264,256,67109121,262145,67108864,67109121,262400,67109120,262144,67371008,1,67371265,257,1,67371009,0,262145,67371264,256,257,67371265,262144,67108865,67371009,67109120,262401,67371008,262400,0,67108864,
262401,67371264,256,1,262144,257,262145,67371008,67109121,0,67371264,262400,67371009,262145,67108864,67371265,1,262401,67108865,67108864,67371265,262144,67109120,67109121,262400,67109120,0,67371009,257,67108865,262401,256,67371008],[4198408,268439552,8,272633864,0,272629760,268439560,4194312,272633856,268435464,268435456,4104,268435464,4198408,4194304,268435456,272629768,4198400,4096,8,4198400,268439560,272629760,4096,4104,0,4194312,272633856,268439552,272629768,272633864,4194304,272629768,4104,4194304,
268435464,4198400,268439552,8,272629760,268439560,0,4096,4194312,0,272629768,272633856,4096,268435456,272633864,4198408,4194304,272633864,8,268439552,4198408,4194312,4198400,272629760,268439560,4104,268435456,268435464,272633856],[134217728,65536,1024,134284320,134283296,134218752,66592,134283264,65536,32,134217760,66560,134218784,134283296,134284288,0,66560,134217728,65568,1056,134218752,66592,0,134217760,32,134218784,134284320,65568,134283264,1024,1056,134284288,134284288,134218784,65568,134283264,
65536,32,134217760,134218752,134217728,66560,134284320,0,66592,134217728,1024,65568,134218784,1024,0,134284320,134283296,134284288,1056,65536,66560,134283296,134218752,1056,32,66592,134283264,134217760],[2147483712,2097216,0,2149588992,2097216,8192,2147491904,2097152,8256,2149589056,2105344,2147483648,2147491840,2147483712,2149580800,2105408,2097152,2147491904,2149580864,0,8192,64,2149588992,2149580864,2149589056,2149580800,2147483648,8256,64,2105344,2105408,2147491840,8256,2147483648,2147491840,
2105408,2149588992,2097216,0,2147491840,2147483648,8192,2149580864,2097152,2097216,2149589056,2105344,64,2149589056,2105344,2097152,2147491904,2147483712,2149580800,2105408,0,8192,2147483712,2147491904,2149588992,2149580800,8256,64,2149580864],[16384,512,16777728,16777220,16794116,16388,16896,0,16777216,16777732,516,16793600,4,16794112,16793600,516,16777732,16384,16388,16794116,0,16777728,16777220,16896,16793604,16900,16794112,4,16900,16793604,512,16777216,16900,16793600,16793604,516,16384,512,16777216,
16793604,16777732,16900,16896,0,512,16777220,4,16777728,0,16777732,16777728,16896,516,16384,16794116,16777216,16794112,4,16388,16794116,16777220,16794112,16793600,16388],[545259648,545390592,131200,0,537001984,8388736,545259520,545390720,128,536870912,8519680,131200,8519808,537002112,536871040,545259520,131072,8519808,8388736,537001984,545390720,536871040,0,8519680,536870912,8388608,537002112,545259648,8388608,131072,545390592,128,8388608,131072,536871040,545390720,131200,536870912,0,8519680,545259648,
537002112,537001984,8388736,545390592,128,8388736,537001984,545390720,8388608,545259520,536871040,8519680,131200,537002112,545259520,128,545390592,8519808,0,536870912,545259648,131072,8519808]];function hperm_op(e,f,a,b){f=(e<<16-a^e)&b;return{a:e^f^f>>>16-a,t:f}}function perm_op(e,f,a,b,d){a=(e>>b^f)&d;return{a:e^a<<b,b:f^a,t:a}}
function DoInit(e){var f,a=[];var b=e[0]|e[1]<<8|e[2]<<16|e[3]<<24;e=e[4]|e[5]<<8|e[6]<<16|e[7]<<24;var d=perm_op(e,b,0,4,252645135);e=d.a;b=d.b;d=d.t;d=hperm_op(b,d,-2,3435921408);b=d.a;d=d.t;d=hperm_op(e,d,-2,3435921408);e=d.a;d=d.t;d=perm_op(e,b,d,1,1431655765);e=d.a;b=d.b;d=d.t;d=perm_op(b,e,d,8,16711935);b=d.a;e=d.b;d=d.t;d=perm_op(e,b,d,1,1431655765);e=d.a;b=d.b;e=(e&255)<<16|e&65280|(e&16711680)>>>16|(b&4026531840)>>>4;b&=268435455;for(f=0;15>=f;f++){0!=shifts2[f]?(b=b>>>2|b<<26,e=e>>>2|e<<
26):(b=b>>>1|b<<27,e=e>>>1|e<<27);b&=268435455;e&=268435455;var n=des_skb[0][b&63]|des_skb[1][b>>>6&3|b>>>7&60]|des_skb[2][b>>>13&15|b>>>14&48]|des_skb[3][b>>>20&1|b>>>21&6|b>>>22&56];d=des_skb[4][e&63]|des_skb[5][e>>>7&3|e>>>8&60]|des_skb[6][e>>>15&63]|des_skb[7][e>>>21&15|e>>>22&48];var c=d<<16|n&65535;a[f<<1]=(c<<2|c>>>30)>>>0;c=n>>>16|d&4294901760;a[(f<<1)+1]=(c<<6|c>>>26)>>>0}return a}
function EncryptBlock(e,f,a){var b;var d=(f>>>4^e)&252645135;e^=d;f^=d<<4;d=(e>>>16^f)&65535;f^=d;e^=d<<16;d=(f>>>2^e)&858993459;e^=d;f^=d<<2;d=(e>>>8^f)&16711935;f^=d;e^=d<<8;d=(f>>>1^e)&1431655765;e^=d;f^=d<<1;e=e>>>29|e<<3;f=f>>>29|f<<3;for(b=0;32>b;){var n=e^a[b];d=e^a[b+1];d=d>>>4|d<<28;f=f^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];
n=f^a[b+2];d=f^a[b+3];d=d>>>4|d<<28;e=e^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];n=e^a[b+4];d=e^a[b+5];d=d>>>4|d<<28;f=f^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];n=f^a[b+6];
d=f^a[b+7];d=d>>>4|d<<28;e=e^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];b+=8}e=e>>>3|e<<29;f=f>>>3|f<<29;d=(e>>>1^f)&1431655765;f^=d;e^=d<<1;d=(f>>>8^e)&16711935;e^=d;f^=d<<8;d=(e>>>2^f)&858993459;f^=d;e^=d<<2;d=(f>>>16^e)&65535;e^=d;f^=d<<16;d=(e>>>4^f)&252645135;f=(f^d)>>>0;e=(e^d<<4)>>>0;return{l:f,r:e}}
function DecryptBlock(e,f,a){var b;var d=(f>>>4^e)&252645135;e^=d;f^=d<<4;d=(e>>>16^f)&65535;f^=d;e^=d<<16;d=(f>>>2^e)&858993459;e^=d;f^=d<<2;d=(e>>>8^f)&16711935;f^=d;e^=d<<8;d=(f>>>1^e)&1431655765;e^=d;f^=d<<1;e=e>>>29|e<<3;f=f>>>29|f<<3;for(b=30;0<b;){var n=e^a[b];d=e^a[b+1];d=d>>>4|d<<28;f=f^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];
n=f^a[b-2];d=f^a[b-1];d=d>>>4|d<<28;e=e^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];n=e^a[b-4];d=e^a[b-3];d=d>>>4|d<<28;f=f^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];n=f^a[b-6];
d=f^a[b-5];d=d>>>4|d<<28;e=e^des_sptrans[0][n>>>2&63]^des_sptrans[2][n>>>10&63]^des_sptrans[4][n>>>18&63]^des_sptrans[6][n>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63];b-=8}e=e>>>3|e<<29;f=f>>>3|f<<29;d=(e>>>1^f)&1431655765;f^=d;e^=d<<1;d=(f>>>8^e)&16711935;e^=d;f^=d<<8;d=(e>>>2^f)&858993459;f^=d;e^=d<<2;d=(f>>>16^e)&65535;e^=d;f^=d<<16;d=(e>>>4^f)&252645135;f=(f^d)>>>0;e=(e^d<<4)>>>0;return{l:f,r:e}}
function GetKeyData(e){var f=Array(BS),a=Array(BS),b=Array(8);e=core_sha1(AlignSHA1(e));for(var d=0,n=0;5>d;d++,n+=4)a[n+3]=(e[d]&255)>>>0,a[n+2]=(e[d]&65280)>>>8,a[n+1]=(e[d]&16711680)>>>16,a[n+0]=(e[d]&4278190080)>>>24;for(d=0;8>d;d++)b[d]=a[d];a=DoInit(b);for(d=0;d<BS;d++)f[d]=143;e=EncryptBlock(2408550287,2408550287,a);f[0]=(e.l&255)>>>0;f[1]=(e.l&65280)>>>8;f[2]=(e.l&16711680)>>>16;f[3]=(e.l&4278190080)>>>24;f[4]=(e.r&255)>>>0;f[5]=(e.r&65280)>>>8;f[6]=(e.r&16711680)>>>16;f[7]=(e.r&4278190080)>>>
24;return{IV:f,KeyData:a}}function XorBlock(e,f,a,b,d){for(var n=0;n<d;n++)e[f]^=a[b],f++,b++;return e}
function EncryptCBC(e,f,a,b){for(var d=Array(f),n=0,c=0,h,m,g=1;g<=f/BS;g++){for(h=0;h<BS;h++)d[c+h]=e[n+h];d=XorBlock(d,c,a,0,BS);h=d[c+0]+(d[c+1]<<8)+(d[c+2]<<16)+(d[c+3]<<24)>>>0;m=d[c+4]+(d[c+5]<<8)+(d[c+6]<<16)+(d[c+7]<<24)>>>0;h=EncryptBlock(h,m,b);d[c+0]=(h.l&255)>>>0;d[c+1]=(h.l&65280)>>>8;d[c+2]=(h.l&16711680)>>>16;d[c+3]=(h.l&4278190080)>>>24;d[c+4]=(h.r&255)>>>0;d[c+5]=(h.r&65280)>>>8;d[c+6]=(h.r&16711680)>>>16;d[c+7]=(h.r&4278190080)>>>24;for(h=0;h<BS;h++)a[h]=d[c+h];n+=BS;c+=BS}if(f%
BS){h=a[0]+(a[1]<<8)+(a[2]<<16)+(a[3]<<24)>>>0;m=a[4]+(a[5]<<8)+(a[6]<<16)+(a[7]<<24)>>>0;h=EncryptBlock(h,m,b);a[0]=(h.l&255)>>>0;a[1]=(h.l&65280)>>>8;a[2]=(h.l&16711680)>>>16;a[3]=(h.l&4278190080)>>>24;a[4]=(h.r&255)>>>0;a[5]=(h.r&65280)>>>8;a[6]=(h.r&16711680)>>>16;a[7]=(h.r&4278190080)>>>24;for(h=0;h<f%BS;h++)d[c+h]=e[n+h];d=XorBlock(d,c,a,0,f%BS)}return d}
function DecryptCBC(e,f,a,b){for(var d=Array(BS),n=Array(f),c=0,h=0,m,g,l=1;l<=f/BS;l++){for(m=0;m<BS;m++)n[h+m]=e[c+m],d[m]=e[c+m];m=n[h+0]+(n[h+1]<<8)+(n[h+2]<<16)+(n[h+3]<<24)>>>0;g=n[h+4]+(n[h+5]<<8)+(n[h+6]<<16)+(n[h+7]<<24)>>>0;m=DecryptBlock(m,g,b);n[h+0]=(m.l&255)>>>0;n[h+1]=(m.l&65280)>>>8;n[h+2]=(m.l&16711680)>>>16;n[h+3]=(m.l&4278190080)>>>24;n[h+4]=(m.r&255)>>>0;n[h+5]=(m.r&65280)>>>8;n[h+6]=(m.r&16711680)>>>16;n[h+7]=(m.r&4278190080)>>>24;n=XorBlock(n,h,a,0,BS);for(m=0;m<BS;m++)a[m]=
d[m];c+=BS;h+=BS}if(f%BS){m=a[0]+(a[1]<<8)+(a[2]<<16)+(a[3]<<24)>>>0;g=a[4]+(a[5]<<8)+(a[6]<<16)+(a[7]<<24)>>>0;m=EncryptBlock(m,g,b);a[0]=(m.l&255)>>>0;a[1]=(m.l&65280)>>>8;a[2]=(m.l&16711680)>>>16;a[3]=(m.l&4278190080)>>>24;a[4]=(m.r&255)>>>0;a[5]=(m.r&65280)>>>8;a[6]=(m.r&16711680)>>>16;a[7]=(m.r&4278190080)>>>24;for(m=0;m<f%BS;m++)n[h+m]=e[c+m];n=XorBlock(n,h,a,0,f%BS)}return n}function EncryptDes(e,f,a){a=GetKeyData(a);return EncryptCBC(e,f,a.IV,a.KeyData)}
function DecryptDes(e,f,a){a=GetKeyData(a);return DecryptCBC(e,f,a.IV,a.KeyData)}function string2ByteArray(e){for(var f=[],a,b=0,d=0;b<e.length;b++,d++)a=e.charCodeAt(b),128>a?f[d]=a:(f[d++]=(a&255)>>>0,f[d]=(a&65280)>>>8);return{arr:f,len:d}}function byteArray2String(e,f){for(var a="",b=0;b<f&&0!=e[b];b++)a=27==e[b]?a+"\r\n":32==e[b]?a+"  ":12288==e[b]?a+"    ":9472==e[b]?a+"\u4e00":a+String.fromCharCode(e[b]);return a}
var Addskills=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"Addskills",AddSkillsUI);e=f.prototype;e.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_determine.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.left=Laya.stage.width-350};e.SkillInfo=function(a,b){b&&(this.img_skill.skin=b,!this.img_skill.getChildByName("skill_img2")&&(b=Animationmodule.playframe(!1,this.img_skill,"gameres/animation/addskills/",1,8,100,!0,!1)))&&(b.name="skill_img2",
b.pos(-10,-10));a&&(this.skill_name.text=a.Def.sMagicName,this.skill=a)};e.checkSkill=function(){for(var a=0;a<g_SetupMagicList.length;a++){var b=g_SetupMagicList[a];if(b&&b==this.skill)return!1}return!0};e.BtnClick=function(a){a=a.target.name;if("close"==a)Animationmodule.removeAniname("skill_img2"),this.removeSelf();else if("determine"==a&&(Animationmodule.removeAniname("skill_img2"),this.removeSelf(),this.num=null,this.checkSkill())){if(0==g_rotation)if(null!=g_SetupMagicList[3])this.SkillRocke();
else for(a=0;4>a;a++){if(null==g_SetupMagicList[a]){g_SetupMagicList[a]=this.skill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);this.num=a;break}}else if(1==g_rotation)if(null!=g_SetupMagicList[7])this.SkillRocke();else for(a=4;8>a;a++)if(null==g_SetupMagicList[a]){g_SetupMagicList[a]=this.skill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);this.num=a;break}null!=this.num&&(Laya.stage.event("skillrocke",[this.num]),Laya.stage.event("Magic_Refresh"),Laya.stage.event("update_icon"))}};
e.SkillRocke=function(){for(var a=0;8>a;a++)if(null==g_SetupMagicList[a]){g_SetupMagicList[a]=this.skill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);this.num=a;break}};return f}(AddSkillsUI),DoubleRocker=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"DoubleRocker",DoubleRockerUI);f.prototype.init=function(){this.rockerMoveType;this.lastClickDirArrowTime=0;this.rockerQiuOrigin=new Laya.Point;this.rockerBgRadius;this.centerPointOfRockerBg=new Laya.Point;this.moveShowAnim=
new Laya.Image;this.addChild(this.moveShowAnim);this.initHalfWidth();this.initDefaultValue();this.addEvent();this.showRockerBg()};f.prototype.initHalfWidth=function(){this.halfOfRunBall=this.img_run_qiu.width/2;this.halfOfRunRockerBg=this.img_run_bg.width/2;this.halfOfWalkBall=this.img_walk_qiu.width/2;this.halfOfWalkRockerBg=this.img_walk_bg.width/2};f.prototype.initDefaultValue=function(){moveing||(this.dirNum=-1,this.isMoving=!1,this.moveShowAnim.visible=!1,this.rockerAnimFrame=-1,this.rockerSelected=
!1)};f.prototype.addEvent=function(){Laya.stage.on("updateRocker",this,this.showRockerBg);this.on(Laya.Event.MOUSE_DOWN,this,this.onDragStart);this.addDirArrowEvent(this.box_run_otherDir._childs,ROCKER_RUN);this.addDirArrowEvent(this.box_walk_otherDir._childs,ROCKER_WALK)};f.prototype.showRockerBg=function(){this.setBallBgAndArrowBtnVisible([this.img_run_bg,this.box_run_otherDir,this.img_walk_bg,this.box_walk_otherDir])};f.prototype.setBallBgAndArrowBtnVisible=function(a){for(var b in a)a[b].visible=
rockerposview};f.prototype.addDirArrowEvent=function(a,b){for(var d=0;8>d;d++)a[d].on(Laya.Event.CLICK,this,this.onDirArrow,[d,b])};f.prototype.onDirArrow=function(a,b){if(!(roledielock||Actionlock||rockerlock||player_stalls)&&this.dirArrowCdHasCooled()){var d=ObjectManage.findobject(playerID);if(d.cur_dir==a||!d.action_over&&1!=d.cur_state&&6!=d.cur_state){if(0==this.checkParalysisMove())return;Objectcontrol.objectmove({dir:a,state:b})}else GameUtil.delhalo(attackerID),d.changestate(null,1,a,!0),
Sendmessage.ChangDir(d.grid.x,d.grid.y,a);this.lastClickDirArrowTime=Laya.Browser.now()}};f.prototype.dirArrowCdHasCooled=function(){return 400<=Laya.Browser.now()-this.lastClickDirArrowTime};f.prototype.keepMove=function(){if(g_furious_collision_ing){if(moveing)return;g_furious_collision_ing=!1}-1<this.dirNum&&this.isMoving&&0!=this.checkParalysisMove()&&(g_rocker_moving=!0,Objectcontrol.objectmove({dir:this.dirNum,state:this.getCurRockerMoveType()}),Fightmodule.leavefight(),Movemodule.stopmove(),
Movemodule.end_point=null)};f.prototype.checkParalysisMove=function(){if(1==Objectcontrol.self_obj.paralysis_state){var a=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.WALK),b=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.RUN);if(1==this.rockerMoveType)return a;if(2==this.rockerMoveType)return b}return!0};f.prototype.getCurRockerMoveType=function(){return this.inSpiderWebSkill()?ROCKER_WALK:this.rockerMoveType};f.prototype.inSpiderWebSkill=function(){return g_boCobWeb};f.prototype.onDragStart=function(a){!Objectcontrol.self_obj||
this.rockerSelected||this.rockerMoveType||((this.curTouchid=a.touchId,rockerposview)?this.checkClickQiu(this.img_run_qiu)?this.initDrag(ROCKER_RUN,this.img_run_qiu):this.checkClickQiu(this.img_walk_qiu)&&this.initDrag(ROCKER_WALK,this.img_walk_qiu):this.rockerMoveType&&this.rockerMoveType!=ROCKER_WALK||!this.inWalkClickArea()?this.rockerMoveType&&this.rockerMoveType!=ROCKER_RUN||(this.img_run_bg.visible=!0,this.initDrag(ROCKER_RUN,this.img_run_qiu),this.setNewRockerPos(this.img_run_qiu,this.img_run_bg,
this.halfOfRunBall,this.halfOfRunRockerBg)):(this.img_walk_bg.visible=!0,this.initDrag(ROCKER_WALK,this.img_walk_qiu),this.setNewRockerPos(this.img_walk_qiu,this.img_walk_bg,this.halfOfWalkBall,this.halfOfWalkRockerBg)))};f.prototype.checkClickQiu=function(a){return a.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)};f.prototype.inWalkClickArea=function(){return this.mouseX<this.img_walk_bg.x+this.img_walk_bg.width+10&&this.mouseY>this.img_walk_bg.y};f.prototype.initDrag=function(a,b){this.rockerSelected=
!0;this.rockerMoveType=a;autohookstate&&Laya.stage.event("stopAutoHookStateByRockerMove");this.setBaseValue(b);this.initMouseEvent(a)};f.prototype.setBaseValue=function(a){this.rockerQiuOrigin.x=a.x;this.rockerQiuOrigin.y=a.y;this.rockerBgRadius=this.rockerMoveType==ROCKER_WALK?this.halfOfRunRockerBg:this.halfOfWalkRockerBg};f.prototype.initMouseEvent=function(a){attackerID=0;use_move_start=!0;Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onDragMove,[a]);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onDragEnd);
Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onDragEnd);Laya.timer.frameLoop(1,this,this.keepMove);Laya.timer.loop(200,this,this.showAnim)};f.prototype.setNewRockerPos=function(a,b,d,n){a.x=this.mouseX-d;a.y=this.mouseY-d;b.x=a.x+d-n;b.y=a.y+d-n};f.prototype.showAnim=function(){this.moveShowAnim.visible=!0;this.rockerMoveType==ROCKER_RUN?this.setAnimSkinAndPos(this.isResetAnimPos(),this.img_run_bg,"gameres/ui/double_rockerman_run_"+this.getAnimFrame()+".png"):this.setAnimSkinAndPos(this.isResetAnimPos(),
this.img_walk_bg,"gameres/ui/double_rockerman_walk_"+this.getAnimFrame()+".png");this.rockerAnimFrame++};f.prototype.isResetAnimPos=function(){return-1==this.rockerAnimFrame};f.prototype.getAnimFrame=function(){if(6<this.rockerAnimFrame||0>this.rockerAnimFrame)this.rockerAnimFrame=1;return this.rockerAnimFrame};f.prototype.setAnimSkinAndPos=function(a,b,d){this.moveShowAnim.skin=d;a&&(this.moveShowAnim.x=this.getCenterPointXOfBg(b)-this.moveShowAnim.width/2+2,this.moveShowAnim.y=this.getCenterPointYOfBg(b)-
this.moveShowAnim.width/2)};f.prototype.getCenterPointXOfBg=function(a){return a.x+(this.rockerMoveType==ROCKER_RUN?this.halfOfRunRockerBg:this.halfOfWalkRockerBg)};f.prototype.getCenterPointYOfBg=function(a){return a.y+(this.rockerMoveType==ROCKER_RUN?this.halfOfRunRockerBg:this.halfOfWalkRockerBg)};f.prototype.onDragMove=function(a,b){if(b.touchId==this.curTouchid){rockerfirst=!0;if(this.rockerMoveType==ROCKER_WALK){a=this.img_walk_qiu;b=this.img_walk_bg;var d=this.halfOfWalkBall;var n=this.halfOfWalkRockerBg}else a=
this.img_run_qiu,b=this.img_run_bg,d=this.halfOfRunBall,n=this.halfOfRunRockerBg;var c=this.getMoveRadian(n,b);n=this.getMoveDistanceOfBall(b);this.moveBall(a,c,b,d,n);10<n&&(this.isMoving=!0,this.dirNum=GameUtil.getMoveDirNumberByAngle(GameUtil.getAngleByRadian(c)),this.showDirSelectEffct(),rocker_move_dir=this.dirNum);this.keepMove()}};f.prototype.getMoveRadian=function(a,b){return Math.atan2(this.mouseY-this.getCenterPointYOfBg(b),this.mouseX-this.getCenterPointXOfBg(b))};f.prototype.getMoveDistanceOfBall=
function(a){this.centerPointOfRockerBg.x=this.getCenterPointXOfBg(a);this.centerPointOfRockerBg.y=this.getCenterPointYOfBg(a);return this.centerPointOfRockerBg.distance(this.mouseX,this.mouseY)};f.prototype.moveBall=function(a,b,d,n,c){c<this.rockerBgRadius?(a.x=this.mouseX-n,a.y=this.mouseY-n):(a.x=d.x+Math.cos(b)*this.rockerBgRadius+n-20,a.y=d.y+Math.sin(b)*this.rockerBgRadius+n-20)};f.prototype.showDirSelectEffct=function(){this.rockerMoveType==ROCKER_WALK?this.img_walk_dir.skin="gameres/png/double_rocker_hu_walk_"+
this.dirNum+".png":this.img_run_dir.skin="gameres/png/double_rocker_hu_run_"+this.dirNum+".png"};f.prototype.onDragEnd=function(a){g_rocker_moving=rockerfirst=use_move_start=this.rockerSelected=!1;a&&(!(a.touches&&1<=a.touches.length)&&Objectcontrol.self_obj||this.isSpecialChannelOnIOS(a))&&this.dragEndHandle()};f.prototype.isSpecialChannelOnIOS=function(a){return Laya.Browser.onIOS&&a.touches&&1<=a.touches.length&&a.touchId==this.curTouchid};f.prototype.dragEndHandle=function(){rocker_move_dir=-1;
this.initDefaultValue();Laya.stage.event("RockerMoveEnd");this.curTouchid=void 0;this.checkHideRockerBg();this.recoverRockerOriginPos();this.rockerMoveType=0;Laya.timer.clear(this,this.showAnim);Laya.timer.clear(this,this.keepMove);Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onDragEnd);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onDragEnd)};f.prototype.checkHideRockerBg=function(){rockerposview||(this.img_run_bg.visible=!1,this.img_walk_bg.visible=
!1)};f.prototype.recoverRockerOriginPos=function(){this.rockerMoveType==ROCKER_WALK?(this.img_walk_qiu.pos(this.rockerQiuOrigin.x,this.rockerQiuOrigin.y),this.img_walk_bg.pos(this.rockerQiuOrigin.x+this.halfOfWalkBall-this.halfOfWalkRockerBg,this.rockerQiuOrigin.y+this.halfOfWalkBall-this.halfOfWalkRockerBg)):(this.img_run_qiu.pos(this.rockerQiuOrigin.x,this.rockerQiuOrigin.y),this.img_run_bg.pos(this.rockerQiuOrigin.x+this.halfOfRunBall-this.halfOfRunRockerBg,this.rockerQiuOrigin.y+this.halfOfRunBall-
this.halfOfRunRockerBg))};return f}(DoubleRockerUI),DrugSetup=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"DrugSetup",DrugSetupUI);f.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Drug_bg.ItemsList=[];this.Drug_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.StartPos=new Laya.Point(0,0);this.but_rest.on(Laya.Event.CLICK,this,this.onRest);for(var a=0;6>a;a++){var b=new Laya.Button;b.width=49;b.height=49;switch(a){case 0:b.pos(50,
1);b.nTag=a;this.Drug_but.addChild(b);break;case 1:b.pos(151,1);b.nTag=a;this.Drug_but.addChild(b);break;case 2:b.pos(201,89);b.nTag=a;this.Drug_but.addChild(b);break;case 3:b.pos(151,175);b.nTag=a;this.Drug_but.addChild(b);break;case 4:b.pos(50,175);b.nTag=a;this.Drug_but.addChild(b);break;case 5:b.pos(1,89),b.nTag=a,this.Drug_but.addChild(b)}b.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Drug_bg.ItemsList.push(b)}Laya.stage.on("Drug_Item_ico",this,this.dShowItems);Laya.stage.on("Drug_Set_Items",
this,this.SetNoItems);this.dShowItems()};f.prototype.onRest=function(){for(var a=0;a<this.Drug_bg.ItemsList.length;a++)this.Drug_bg.ItemsList[a].removeChildren();for(a=0;6>a;a++)g_DrugItemsList[a]=null;Laya.stage.event("ShowDrug_Items");Laya.LocalStorage.removeItem("druglist")};f.prototype.dShowItems=function(){for(var a=0;a<this.Drug_bg.ItemsList.length;a++){var b=this.Drug_bg.ItemsList[a],d=b.nTag;if(d<g_DrugItemsList.length&&null!=g_DrugItemsList[d]){var n=new Laya.Image;n.skin=GameUtil.ParseNameFormat(g_DrugItemsList[d].s.Looks);
n.pos(24.5-n.width/2,24.5-n.height/2);b.addChild(n)}}};f.prototype.SetNoItems=function(a){for(var b=0;b<this.Drug_bg.ItemsList.length;b++){var d=this.Drug_bg.ItemsList[b],n=d.nTag;if(n<g_DrugItemsList.length&&n==a&&null!=g_DrugItemsList[n]){d.removeChildren();a=new Laya.Image;a.skin=GameUtil.ParseNameFormat(g_DrugItemsList[n].s.Looks);a.pos(24.5-a.width/2,24.5-a.height/2);d.addChild(a);break}}};f.prototype.onItem_Down=function(a){g_DrugButNumber=a.target.nTag;if(-1!=g_DrugButNumber&&null!=g_WaitItems.Items){if(g_BagItemsList[g_nBagIdx])for(a=
0;a<g_DrugItemsList.length;a++)if(null!=g_DrugItemsList[a]&&g_BagItemsList[g_nBagIdx].MakeIndex==g_DrugItemsList[a].MakeIndex)return;for(a=0;a<g_DrugItemsList.length;++a)g_DrugItemsList[a]&&g_DrugItemsList[a].s.Name==g_WaitItems.Items.s.Name&&(g_DrugItemsList[a]=null);g_DrugItemsList[g_DrugButNumber]=g_WaitItems.Items;g_WaitItems.Items=null;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);
GameApi.ShowScreen(!1);var b=[];for(a=0;a<g_DrugItemsList.length;++a){var d=g_DrugItemsList[a];null!=d?b.push({looks:d.s.Looks,mode:d.s.StdMode}):b.push({looks:null,mode:null})}a=JSON.stringify(b);GameUtil.setSaveData("druglist",a)}this.close()};f.prototype.onMouseDown=function(a){this.Drug_but.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.StartPos.x=a.stageX,this.StartPos.y=a.stageY,this.Drug_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Drug_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),
this.Drug_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.Drug_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(a){this.Drug_but.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.Drug_bg.x+=a.stageX-this.StartPos.x,this.Drug_bg.y+=a.stageY-this.StartPos.y,this.StartPos.x=a.stageX,this.StartPos.y=a.stageY)};f.prototype.close=function(){Laya.stage.off("Drug_Item_ico",this,this.dShowItems);Laya.stage.off("Drug_Set_Items",
this,this.SetNoItems);this.removeSelf()};return f}(DrugSetupUI),HeroWin=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(300,70);this.settxt=function(g,l){this.removeChildren();var p=new Laya.Image;p.skin="gameres/png/role_editor_skill_item_bg.png";p.size(299,67);this.addChild(p);c==l&&(p.skin="gameres/png/role_editor_skill_item_bg2.png");var q=new Laya.Text;q.color="#d8b34e";q.fontSize=20;q.text=0==g.Key?g.Def.sMagicName+"[\u5df2\u5173\u95ed]":
g.Def.sMagicName;q.pos(72,10);p.addChild(q);var r=new Laya.Image,u=g.Def.btEffect;38==g.Def.wMagicId&&(u=4);46==g.Def.wMagicId&&(u=42);39==g.Def.wMagicId&&(u=0);var v="magicon"+GameUtil.getFile(2*u);GameUtil.loadImg(2*u,v,function(w){r.skin=w});r.size(48,48);r.pos(10,10);p.addChild(r);r.on(Laya.Event.CLICK,this,function(w,z,A){Sendmessage.sendHeroMagicKeyChange(w.Def.wMagicId);A.text=112==w.Key?w.Def.sMagicName+"[\u5df2\u5173\u95ed]":w.Def.sMagicName;112==w.Key?g_HeroMagicList[z].Key=0:g_HeroMagicList[z].Key=
112},[g,l,q]);l=new Laya.Text;l.color="#1acb02";l.fontSize=20;l.text=g.Level+"\u7ea7";l.pos(72,39);p.addChild(l);l=new Laya.Text;l.color="#ffffff";l.fontSize=20;l.text=3<=g.Level?"\u7ecf\u9a8c\uff1a -":"\u7ecf\u9a8c\uff1a "+g.CurTrain+" / "+g.Def.MaxTrain[g.Level];l.pos(128,39);p.addChild(l);10<=g.Key&&(l=new Laya.Text,l.color="#ffffff",l.fontSize=14,l.text="NO."+(g.Key-48),l.pos(5,30),r.addChild(l))}}function b(){b.__super.call(this);this.size(350,54);this.settxt=function(g,l){this.removeChildren();
if(g&&0<g.MakeIndex){var p=new Laya.Image;p.skin="gameres/png/title_item.png";h==l&&(p.skin="gameres/png/title_item_s.png");this.addChild(p);l=new Laya.Text;l.color="#ffffff";l.fontSize=12;l.text=g.s.Name;l.pos(46,12);p.addChild(l);GameUtil.loadImg(g.s.Looks,"items",function(r){Laya.loader.getRes(r)&&(q.skin=r,q.pos(24.5-q.width/2,24.5-q.height/2))});var q=new Laya.Image;p.addChild(q)}}}var d=new Laya.Point(0,0),n=1,c=-1,h=-1,m=null;Laya.class(f,"HeroWin",HeroWinUI);Laya.class(a,"HeroSkillRender",
Laya.Box);Laya.class(b,"HeroIcon_Render",Laya.Box);e=f.prototype;e.GetTakePos=function(g){for(var l=this.Kuang_bg_1._childs.length,p=0;p<l;p++)for(var q=this.Kuang_bg_1._childs[p],r=0;r<q._childs.length;r++){var u=q._childs[r];if(g==u.nTag)break}return u};e.ShowItemico=function(g){for(var l=this.Kuang_bg_1._childs.length,p=0;p<l;p++){var q=this.Kuang_bg_1._childs[p];if(q instanceof Laya.Image)for(var r=0;r<q._childs.length;r++){var u=q._childs[r],v=u.nTag;if((g==v||-1==g)&&40>v&&(u.removeChildren(),
13==v&&(this.GetTakePos(v).removeChildren(),Laya.stage.event("Show_HeroItem_ico",4)),null!=g_HeroItemList[v])){var w=new Laya.Image,z=g_HeroItemList[v].s.Looks;if(v==U_WEAPON||v==U_DRESS||v==U_HELMET||v==U_SHIELD||v==U_HAT){if(v==U_HELMET)null!=g_HeroItemList[U_HAT]&&0!=g_HeroItemList[U_HAT].s.AniCount&&(z=g_HeroItemList[U_HAT].s.Looks,v=U_HAT),this.LoadImageEx(z,w,!0,v,"stateitem");else if(v==U_HAT&&0!=g_HeroItemList[U_HAT].s.AniCount){this.Item_4.removeChildren();this.LoadImageEx(z,w,!0,v,"stateitem");
u=this.Item_4;var A=new Laya.Image;this.LoadImageEx(z,A,!1,v,"stateitem");this.Item_13.addChild(A)}else this.LoadImageEx(z,w,!0,v,"stateitem");GameUtil.ShowItemeffectEx(this,u,g_HeroItemList[v],!0,v)}else this.LoadImageEx(z,w,!1,v,"stateitem"),GameUtil.ShowItemeffectEx(this,u,g_HeroItemList[v]);u.addChild(w)}}}for(p=g=0;p<g_HeroItemList.length;p++)null!=g_HeroItemList[p]&&(g+=GameApi.GetItemScore(g_HeroItemList[p]));this.itemScorse.text="\u88c5\u5907\u8bc4\u5206\uff1a"+g};e.LoadImageEx=function(g,
l,p,q,r){var u=this;GameUtil.loadImg(g,r,function(v,w){p&&""!=v&&w?(w=Offsetmodule.getoffsetfromatlas(w.atlas,w.img),l.skin=v,u.img_Hair.y=1==g_GameType?68:39,q==U_WEAPON?1==g_GameType?l.pos(-17+w.x,48+w.y):l.pos(-10+w.x,64+w.y):q==U_DRESS?1==g_GameType?l.pos(-70+w.x,-26+w.y):l.pos(-67+w.x,-18+w.y):q==U_HELMET?1==g_GameType?l.pos(-69+w.x,14+w.y):l.pos(-69+w.x,16+w.y):q==U_SHIELD?l.pos(-50+w.x,-24+w.y):q==U_HAT&&l.pos(-69+w.x,20+w.y),q==U_FASHIONDRESS?1==g_GameType?l.pos(-67+w.x,-27+w.y):l.pos(-67+
w.x,-18+w.y):q==U_FASHIONWEAPON&&1==g_GameType&&l.pos(-20+w.x,25+w.y)):(l.skin=v,l.pos(24.5-l.width/2,24.5-l.height/2))});this.ShowHeadItems()};e.onItem_Down=function(g){var l=g.target.nTag;g_SelectIndex=l;l==U_ICON?null!=g_HeroItemList[U_ICON]&&(g_SelectIndex=GameUtil.GetItemType(g_HeroItemList[U_ICON].s),g_OpenIdx=17,g_MoveItems.Index=U_ICON,g_MoveItems.Items=g_UserItemList[U_ICON],GameUtil.NewShowItemsInf(g_MoveItems.Items)):40==g_SelectIndex?GameApi.ShowShouShi(g_HeroItemList):(30==g.target.name&&
GameApi.ShoushiBox(g_HeroItemList),null!=g_HeroItemList[l]?(g_OpenIdx=15,g_MoveItems.Index=l,g_MoveItems.Items=g_HeroItemList[l],GameUtil.NewShowItemsInf(g_MoveItems.Items)):GameApi.ShowScreen(!0,l,7))};e.onItem_Up=function(g){};e.onItem_Move=function(g){};e.init=function(){g_OpenHeroState=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(this.itemScorse.visible=!0);this.Hero_bg.on(Laya.Event.MOUSE_DOWN,this,
this.onMouseDown);this.but_tab1.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab2.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab3.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab4.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab5.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab6.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab1.selected=!0;this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.nTag=0;this.Item_1.on(Laya.Event.MOUSE_DOWN,
this,this.onItem_Down);this.Item_1.nTag=1;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.nTag=2;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.nTag=3;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.nTag=4;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.nTag=5;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.nTag=6;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.nTag=
7;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.nTag=8;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.nTag=9;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.nTag=10;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.nTag=11;this.Item_12.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_12.nTag=12;this.Item_13.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_13.nTag=13;this.Item_14.on(Laya.Event.MOUSE_DOWN,
this,this.onItem_Down);this.Item_14.nTag=14;this.Item_15.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_15.nTag=15;this.Item_16.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_16.nTag=16;this.fashion_body.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_body.nTag=18;this.fashion_weapon.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_weapon.nTag=19;this.Item_20.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_20.nTag=20;this.Item_21.on(Laya.Event.MOUSE_DOWN,
this,this.onItem_Down);this.Item_21.nTag=21;this.Item_22.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_22.nTag=22;this.Item_23.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_23.nTag=23;this.Item_24.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_24.nTag=24;this.Item_25.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_25.nTag=25;this.Item_26.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_26.nTag=26;this.Item_27.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);
this.Item_27.nTag=27;this.Item_28.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_28.nTag=28;this.Item_29.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_29.nTag=29;this.check_fashion.on(Laya.Event.CLICK,this,this.changefashion);this.check_fashion.selected=g_Show_Hero_Fashion;this.Skill_List.repeatX=1;this.Skill_List.repeatY=9;this.Skill_List.vScrollBarSkin="gameres/ui/vscroll.png";this.Skill_List.itemRender=a;this.Skill_List.selectEnable=!0;this.Skill_List.renderHandler=new Laya.Handler(this,
this.UpdateItem);this.Skill_List.array=g_HeroMagicList;this.State_List=[];this.State_List.repeatX=2;this.State_List.repeatY=15;this.State_List.vScrollBarSkin="";Laya.stage.on("Show_HeroItem_ico",this,this.ShowItemico);Laya.stage.on("HeroMagic_Refresh",this,this.HeroMagic_Refresh);Laya.stage.on("State_skill",this,this.onState_skill);Laya.stage.on("updateHero",this,this.updateHero);Laya.stage.on("updateHeroNewDress",this,this.updateHeroNewDress);c=-1;this.ShowHeadItems();this.updateHero()};e.updateHeroIcon=
function(g,l){this.HeroIcon_List.refresh()};e.HeroIconUpdateItem=function(g,l){g.settxt(g.dataSource,l)};e.HeroIconSelect=function(g){h=g;g<g_IconCList.length&&null!=g_IconCList[g]&&(m=g_IconCList[g],g_SelectIndex=GameUtil.GetItemType(m.s),g_OpenIdx=16,g_MoveItems.Index=g,g_MoveItems.Items=m,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.HeroIcon_List._selectedIndex=-1};e.changefashion=function(g){Sendmessage.showfashion(2)};e.ShowHeadItems=function(){if(g_myHero){this.Hero_ico.skin="gameres/png/00377-1.png";
this.fashion_hum.skin="gameres/png/00377-2.png";0==g_myHero.skin_feature.btGender&&(this.Hero_ico.skin="gameres/png/00376-1.png",this.fashion_hum.skin="gameres/png/00376-2.png");var g=new Laya.Label;g.color="#eee9e9";g.fontSize=20;g.text=g_myHero.m_Abil.name;g.centerX=0;g.y=32;this.Hero_bg.addChild(g);g=1==g_myHero.skin_feature.btGender?443:442;this.img_Hair.y=1==g_GameType?68:39;this.img_Hair.removeChildren();var l=this;GameUtil.loadImg(g,"prguse",function(p,q){if(""!=p&&q){Offsetmodule.getoffsetfromatlas(q.atlas,
q.img);var r=new Laya.Image;r.skin=p;r.pos(-82+q.x,8+q.y);l.img_Hair.addChild(r)}})}};e.UpdateItem=function(g,l){g.settxt(g.dataSource,l)};e.Skillselect=function(g){g<g_HeroMagicList.length&&null!=g_HeroMagicList[g]&&(g_MoveSkill=g_HeroMagicList[g]);this.Skill_List._selectedIndex=-1;GameUtil.NewShowMagicInf()};e.HeroMagic_Refresh=function(){this.Skill_List.refresh()};e.ontab1_Click=function(g){n=g.target.name;this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=
!1;this.but_tab5.selected=!1;this.but_tab6.selected=!1;g.target.selected=!0;switch(parseInt(n)){case 1:this.state_bg.visible=!1;this.Kuang_bg_1.visible=!0;this.state_alb.visible=!1;this.state_skill.visible=!1;this.fashion_bg.visible=!1;this.title_bg.visible=!1;break;case 2:this.updateHero();this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!0;this.fashion_bg.visible=!1;this.title_bg.visible=!1;this.stateData.vScrollBarSkin="";break;case 3:this.updateHero();
this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!0;this.fashion_bg.visible=!1;this.title_bg.visible=!1;this.AttributeData.vScrollBarSkin="";break;case 4:this.onState_skill();break;case 5:this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!1;this.fashion_bg.visible=!0;this.title_bg.visible=!1;this.stateData.vScrollBarSkin="";this.updateHeroNewDress();break;case 6:this.Kuang_bg_1.visible=!1,this.state_skill.visible=
!1,this.state_alb.visible=!1,this.state_bg.visible=!1,this.fashion_bg.visible=!1,this.title_bg.visible=!0,this.title_bg.pos(36,70)}};e.updateHeroNewDress=function(){this.fashion_hum.visible=!0;for(var g=this.fashion_bg._childs.length,l=0;l<g;l++){var p=this.fashion_bg._childs[l];if(p instanceof Laya.Image)for(var q=0;q<p._childs.length;q++){var r=p._childs[q],u=r.nTag;r.removeChildren();if(u==U_FASHIONDRESS||u==U_FASHIONWEAPON||u==U_FASHIONHELMET){if(null!=g_HeroItemList[u]){var v=g_HeroItemList[u].s.Looks,
w=new Laya.Image;r.addChild(w);this.LoadImageEx(v,w,!0,u,"stateitem");GameUtil.ShowItemeffectEx(this,r,g_HeroItemList[u],!0,u)}}else null!=g_HeroItemList[u]&&(v=g_HeroItemList[u].s.Looks,w=new Laya.Image,r.addChild(w),this.LoadImageEx(v,w,!1,u,"stateitem"),GameUtil.ShowItemeffectEx(this,r,g_HeroItemList[u]))}}};e.updateHero=function(){this.AttributeData.removeChildren();this.stateData.removeChildren();if(g_myHero&&THumFeature(g_myHero.data.fea.buffer))var g=THumFeature(g_myHero.data.fea.buffer).btJob;
if(g_myHero&&g_myHero.m_Abil){for(var l=g_myHero.m_Abil,p="\u804c   \u4e1a\uff1a    ;\u7b49   \u7ea7\uff1a    ;\u5f53\u524d\u7ecf\u9a8c\uff1a;\u5347\u7ea7\u7ecf\u9a8c\uff1a;\u751f\u547d\u503c\uff1a    ;\u9b54\u6cd5\u503c\uff1a    ;\u836f\u529b\u503c\uff1a    ;\u9152\u91cf\u503c\uff1a    ;\u9152\u91cf\u8fdb\u5ea6\uff1a".split(";"),q=0;q<p.length;q++){var r=new Laya.Text;switch(q){case 0:r.text=p[0]+"         "+GameUtil.getJobName(g);break;case 1:r.text=p[1]+"         "+l.Level;break;case 2:r.text=
p[2]+"         "+l.Exp;break;case 3:r.text=p[3]+"         "+l.MaxExp;break;case 4:r.text=p[4]+"         "+l.HP+" / "+l.MaxHP;break;case 5:r.text=p[5]+"         "+l.MP+" / "+l.MaxMP;break;case 6:r.text=p[6]+"         0";break;case 7:r.text=p[7]+"         0";break;case 8:r.text=p[8]+"         0"}this.stateData.addChild(r);r.fontSize=18;r.color="#ffffff";r.pos(5,20*q+8)}g="\u9632   \u5fa1\uff1a    ;\u9b54   \u5fa1\uff1a    ;\u653b   \u51fb\uff1a    ;\u9b54   \u6cd5\uff1a    ;\u9053   \u672f\uff1a    ;\u80cc\u5305\u91cd\u91cf\uff1a;\u7a7f\u6234\u91cd\u91cf\uff1a;\u8155   \u529b\uff1a    ;\u9b54\u6cd5\u8eb2\u907f\uff1a;\u6bd2\u7269\u8eb2\u907f\uff1a;\u4f53\u529b\u6062\u590d\uff1a;\u9b54\u6cd5\u6062\u590d\uff1a;\u653b\u51fb\u901f\u5ea6\uff1a;\u7cbe\u786e\u5ea6\uff1a    ;\u654f\u6377\u5ea6\uff1a    ;\u4e2d\u6bd2\u56de\u590d\uff1a".split(";");
for(q=0;q<g.length;q++){r=new Laya.Text;switch(q){case 0:r.text=g[0]+"         "+l.AC+" - "+l.MaxAC;break;case 1:r.text=g[1]+"         "+l.MAC+" - "+l.MaxMAC;break;case 2:r.text=g[2]+"         "+l.DC+" - "+l.MaxDC;break;case 3:r.text=g[3]+"         "+l.MC+" - "+l.MaxMC;break;case 4:r.text=g[4]+"         "+l.SC+" - "+l.MaxSC;break;case 5:r.text=g[5]+"         "+l.Weight+" / "+l.MaxWeight;break;case 6:r.text=g[6]+"         "+l.WearWeight+" / "+l.MaxWearWeight;break;case 7:r.text=g[7]+"         "+l.HandWeight+
" / "+l.MaxHandWeight;break;case 8:r.text=g[8]+"         "+10*g_nHeroAntiMagic+"%";break;case 9:r.text=g[9]+"         "+10*g_nHeroAntiPoison+"%";break;case 10:r.text=g[10]+"         "+10*g_nHeroHealthRecover+"%";break;case 11:r.text=g[11]+"         "+10*g_nHeroSpellRecover+"%";break;case 12:r.text=g[12]+"         ";break;case 13:r.text=g[13]+"         "+g_nHeroHitPoint;break;case 14:r.text=g[14]+"         "+g_nHeroSpeedPoint;break;case 15:r.text=g[15]+"         "+10*g_nHeroPoisonRecover;break;case 16:r.text=
g[16]+"         ";break;case 17:r.text=g[17]+"         ";break;case 18:r.text=g[18]+"         ";break;case 19:r.text=g[19]+"         ";break;case 20:r.text=g[20]+"         ";break;case 21:r.text=g[21]+"         ";break;case 22:r.text=g[22]+"         ";break;case 23:r.text=g[23]+"         ";break;case 24:r.text=g[24]+"         ";break;case 25:r.text=g[25]+"         ";break;case 26:r.text=g[26]+"         "}this.AttributeData.addChild(r);r.fontSize=18;r.color="#ffffff";r.pos(5,20*q)}}};e.onState_skill=
function(){c=-1;this.Skill_List.vScrollBarSkin="";this.Skill_List.refresh();this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.but_tab6.selected=!1;this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_alb.visible=!1;this.state_skill.visible=!0;this.but_tab4.selected=!0;this.fashion_bg.visible=!1;this.title_bg.visible=!1};e.onMouseDown=function(g){d.x=g.stageX;d.y=g.stageY;this.Skill_List.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)||this.stateData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.AttributeData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.Hero_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Hero_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Hero_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};e.onMouseUp=function(){this.Hero_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(g){this.Hero_bg.x+=g.stageX-d.x;this.Hero_bg.y+=g.stageY-
d.y;d.x=g.stageX;d.y=g.stageY};e.close=function(){Laya.stage.off("Show_HeroItem_ico",this,this.ShowItemico);Laya.stage.off("HeroMagic_Refresh",this,this.HeroMagic_Refresh);Laya.stage.off("State_skill",this,this.onState_skill);Laya.stage.off("updateHero",this,this.updateHero);Laya.stage.off("updateHeroNewDress",this,this.updateHeroNewDress);g_OpenHeroState=!1;this.removeSelf()};return f}(HeroWinUI),HumWin=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(300,
70);this.settxt=function(p,q){this.removeChildren();var r=new Laya.Image;r.skin="gameres/png/role_editor_skill_item_bg.png";r.size(299,67);this.addChild(r);c==q&&(r.skin="gameres/png/role_editor_skill_item_bg2.png");var u=new Laya.Image;q="";if(1E3<=p.Def.wMagicId&&1500>=p.Def.wMagicId){var v=Skillmodule.findCustomSkill(p.Def.wMagicId,p.Level);if(v){var w=g_pak_list[v.iconFileIndex];q=v.wIconImageIndex}}else q=p.Def.btEffect,38==p.Def.wMagicId&&(q=4),46==p.Def.wMagicId&&(q=42),39==p.Def.wMagicId&&
(q=0),w="magicon"+GameUtil.getFile(2*q),q*=2;GameUtil.loadImg(q,w,function(z){u.skin=z});u.size(48,48);u.pos(10,10);r.addChild(u);w=new Laya.Text;w.fontSize=20;w.color="#d8b34e";w.text=p.Def.sMagicName+" "+GameApi.GetNewMagicLevelString(p.btStrengLevel);w.pos(72,10);r.addChild(w);w=new Laya.Text;w.color="#1acb02";w.fontSize=20;w.text=p.Level+"\u7ea7";w.pos(72,39);r.addChild(w);w=new Laya.Text;w.color="#ffffff";w.fontSize=20;w.text=3<=p.Level?"\u7ecf\u9a8c\uff1a -":"\u7ecf\u9a8c\uff1a "+p.CurTrain+
" / "+p.Def.MaxTrain[p.Level];w.pos(128,39);r.addChild(w);10<=p.Key&&(w=new Laya.Text,w.color="#ffffff",w.fontSize=14,w.text="NO."+(p.Key-48),w.pos(5,30),u.addChild(w))}}function b(){b.__super.call(this);this.size(350,54);this.settxt=function(p,q){this.removeChildren();if(p&&0<p.MakeIndex){var r=new Laya.Image;r.skin="gameres/png/title_item.png";h==q&&(r.skin="gameres/png/title_item_s.png");this.addChild(r);q=new Laya.Text;q.color="#ffffff";q.fontSize=20;q.text=p.s.Name;q.pos(46,12);r.addChild(q);
q=0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items";var u=new Laya.Image;r.addChild(u);GameUtil.loadImg(p.s.Looks+1,q,function(v,w){""!=v&&w&&(Offsetmodule.getoffsetfromatlas(w.atlas,w.img),u.skin=v,u.pos(21-u.width/2,21-u.height/2))})}}}var d=new Laya.Point(0,0),n=1,c=-1,h=-1,m=null,g,l=0;Laya.class(f,"HumWin",HumWinUI);Laya.class(a,"SkillRender",Laya.Box);Laya.class(b,"HumIcon_Render",Laya.Box);f.prototype.ShowItemico=
function(p){if(this.but_tab6.selected){if(this.IconShow.removeChildren(),g_UserItemList[U_ICON]){if(0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length)var q=g_pak_list[g_ClientConfig.nShowUserIcon];var r=this;GameUtil.loadImg(g_UserItemList[U_ICON].s.Looks+3,q,function(D){var E=new Laya.Image;E.skin=D;E.pos(24.5-E.width/2,24.5-E.height/2);r.IconShow.addChild(E)})}}else{null!=ItemHeard&&ItemHeard?this.Item_4.visible=!1:(this.Item_head.visible=!1,this.img_head.visible=!1);
if(p==U_HELMET||-1==p){this.Item_head.removeChildren();DragItem.testType=DragItem.dragItemType.HumanItem;var u=new DragItem,v={itemsData:g_UserItemList,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.HumanItem};u.setData(v,U_HELMET);this.Item_head.addChild(u);u.setWidthAndHeight(u.parent.width,u.parent.height);g_UserItemList[U_HELMET]&&(this.LoadImageEx(g_UserItemList[U_HELMET].s.Looks,u.itemImg,!1,U_HELMET,"stateitem"),GameUtil.ShowItemeffectEx(this,this.Item_head,
g_UserItemList[U_HELMET]))}var w=this.Kuang_bg_1._childs.length;for(q=0;q<w;q++){var z=this.Kuang_bg_1._childs[q];if(z instanceof Laya.Image)for(var A=0;A<z._childs.length;A++){var C=z._childs[A];if(C){var B=C.nTag;"number"===typeof B&&(p==B||-1==p)&&40>B&&(C.removeChildren(),null!=g_UserItemList[B]?(DragItem.testType=DragItem.dragItemType.HumanItem,u=new DragItem,v={itemsData:g_UserItemList,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.HumanItem},u.setData(v,
B),v=g_UserItemList[B].s.Looks,B==U_WEAPON||B==U_DRESS||B==U_HELMET||B==U_HAT?(B==U_HELMET?this.LoadImageEx(v,u.itemImg,!0,B,"stateitem"):B==U_HAT&&0!=g_UserItemList[U_HAT].s.AniCount?(C=this.Item_13,this.LoadImageEx(v,u.itemImg,!1,B,"stateitem"),this.Item_13.addChild(u)):this.LoadImageEx(v,u.itemImg,!0,B,"stateitem"),g_UserItemList[B].tag=B,GameUtil.ShowItemeffectEx(this,C,g_UserItemList[B],!0,B)):B==U_SHIELD?(this.LoadImageEx(v,u.itemImg,!0,B,"stateitem"),GameUtil.ShowItemeffectEx(this,C,g_UserItemList[B],
!0,B)):(this.LoadImageEx(v,u.itemImg,!1,B,"stateitem"),GameUtil.ShowItemeffectEx(this,C,g_UserItemList[B]))):(DragItem.testType=DragItem.dragItemType.HumanItem,u=new DragItem,v={itemsData:g_UserItemList,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.HumanItem},u.setData(v,B)),C.addChild(u),u.setWidthAndHeight(u.parent.width,u.parent.height))}}}for(q=p=0;q<g_UserItemList.length;q++)null!=g_UserItemList[q]&&(p+=GameApi.GetItemScore(g_UserItemList[q]));this.itemScorse.text=
"\u88c5\u5907\u8bc4\u5206\uff1a"+p}};f.prototype.LoadImageEx=function(p,q,r,u,v){var w=this;GameUtil.loadImg(p,v,function(z,A){if(r)switch(A=Offsetmodule.getoffsetfromatlas(A.atlas,A.img),q.skin=z,w.img_Hair.y=1==g_GameType?35:39,u){case U_WEAPON:1==g_GameType?q.pos(-25+A.x,40+A.y):q.pos(-20+A.x,52+A.y);break;case U_DRESS:1==g_GameType?q.pos(-75+A.x,-28+A.y):q.pos(-73+A.x,-18+A.y);break;case U_HELMET:1==g_GameType?q.pos(-69+A.x,14+A.y):q.pos(-69+A.x,18+A.y);break;case U_SHIELD:q.pos(-50+A.x,-24+A.y);
break;case U_HAT:q.pos(-69+A.x,20+A.y);break;case U_FASHIONDRESS:1==g_GameType?q.pos(-67+A.x,-27+A.y):q.pos(-64+A.x,-18+A.y);break;case U_FASHIONWEAPON:1==g_GameType?q.pos(-27+A.x,40+A.y):q.pos(-20+A.x,52+A.y);break;case U_FASHIONHELMET:q.pos(-74.5+A.x,28+A.y)}else q.skin=z,q.pos(24.5-q.width/2,24.5-q.height/2)});this.ShowHeadItems()};f.prototype.onItem_Down=function(p){var q=p.target instanceof DragItem?p.currentTarget:p.target,r=q.nTag;if("head"==p.target.name||"head"==p.currentTarget.name)r=4;
g_SelectIndex=r;r==U_ICON?null!=g_UserItemList[U_ICON]&&(g_SelectIndex=GameUtil.GetItemType(g_UserItemList[U_ICON].s),g_OpenIdx=17,g_MoveItems.Index=U_ICON,g_MoveItems.Items=g_UserItemList[U_ICON],GameUtil.NewShowItemsInf(g_MoveItems.Items)):40==g_SelectIndex?GameApi.ShowShouShi(g_UserItemList):41==g_SelectIndex?Sendmessage.SendGameMainBtnMsg("\u4fee\u70bc\u7cfb\u7edf"):30==q.name?sndacasketState.active==g_btSelfSndacasketState?Sendmessage.SendQFCMD("@openSndacasket"):GameApi.ShoushiBox(g_UserItemList):
null!=g_UserItemList[r]?(p=Laya.Browser.now(),200>p-l?(clearTimeout(g),g_WaitItems.Items=g_UserItemList[r],g_WaitItems.Index=r,Sendmessage.TakeOffItem(g_WaitItems.Items,g_WaitItems.Index)):(clearTimeout(g),g=setTimeout(function(){g_OpenIdx=1;g_MoveItems.Index=r;g_MoveItems.Items=g_UserItemList[r];GameUtil.NewShowItemsInf(g_MoveItems.Items)}.bind(this),200)),l=p):GameApi.ShowScreen(!0,r,1)};f.prototype.onItem_Up=function(p){};f.prototype.onItem_Move=function(p){};f.prototype.init=function(){this.itemArr=
[];this.itemNum=[];this.AttributeArr=[];this.AttributeNum=[];this.setHum();g_OpenState=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(this.itemScorse.visible=!0);this.Hum_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.but_tab1.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab2.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab3.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab4.on(Laya.Event.CLICK,
this,this.ontab1_Click);this.but_tab5.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab6.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab1.selected=!0;this.Item_0.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_0.nTag=0;this.Item_1.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_1.nTag=1;this.Item_2.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_2.nTag=2;this.Item_3.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_3.nTag=3;this.Item_4.on(Laya.Event.CLICK,this,this.onItem_Down);
this.Item_4.nTag=4;this.Item_5.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_5.nTag=5;this.Item_6.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_6.nTag=6;this.Item_7.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_7.nTag=7;this.Item_8.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_8.nTag=8;this.Item_9.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_9.nTag=9;this.Item_10.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_10.nTag=10;this.Item_11.on(Laya.Event.CLICK,this,
this.onItem_Down);this.Item_11.nTag=11;this.Item_12.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_12.nTag=12;this.Item_13.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_13.nTag=13;this.Item_14.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_14.nTag=14;this.Item_15.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_15.nTag=15;this.Item_16.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_16.nTag=16;this.Item_40.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_40.nTag=40;
this.fashion_body.on(Laya.Event.CLICK,this,this.onItem_Down);this.fashion_body.nTag=18;this.fashion_weapon.on(Laya.Event.CLICK,this,this.onItem_Down);this.fashion_weapon.nTag=19;this.Item_20.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_20.nTag=20;this.Item_21.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_21.nTag=21;this.Item_22.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_22.nTag=22;this.Item_23.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_23.nTag=23;this.Item_24.on(Laya.Event.CLICK,
this,this.onItem_Down);this.Item_24.nTag=24;this.Item_25.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_25.nTag=25;this.Item_26.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_26.nTag=26;this.Item_27.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_27.nTag=27;this.Item_28.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_28.nTag=28;this.Item_29.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_29.nTag=29;this.Item_head.on(Laya.Event.CLICK,this,this.onItem_Down);this.Item_30.on(Laya.Event.CLICK,
this,this.onItem_Down);this.check_fashion.on(Laya.Event.CLICK,this,this.changefashion);g_isTuLongShengYu?(1!=g_show_fashion&&Sendmessage.showfashion(1),this.check_fashion.selected=!0):this.check_fashion.selected=1==g_show_fashion;this.IconShow.on(Laya.Event.CLICK,this,this.onItem_Down);this.IconShow.nTag=52;this.btn_setskill.on(Laya.Event.CLICK,this,function(){GameApi.Showskillwin(!0)});this.Skill_List.repeatX=1;this.Skill_List.repeatY=9;this.Skill_List.vScrollBarSkin="";this.Skill_List.itemRender=
a;this.Skill_List.selectEnable=!0;this.Skill_List.selectHandler=new Laya.Handler(this,this.Skillselect);this.Skill_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.Skill_List.array=g_UserMagicList;this.State_List=[];this.State_List.repeatX=2;this.State_List.repeatY=15;this.State_List.vScrollBarSkin="";this.HumIcon_List.repeatX=1;this.HumIcon_List.repeatY=9;this.HumIcon_List.vScrollBarSkin="gameres/ui/vscroll.png";this.HumIcon_List.itemRender=b;this.HumIcon_List.selectEnable=!0;this.HumIcon_List.selectHandler=
new Laya.Handler(this,this.HumIconSelect);this.HumIcon_List.renderHandler=new Laya.Handler(this,this.HumIconUpdateItem);this.HumIcon_List.array=g_IconCList;Laya.stage.on("Show_Item_ico",this,this.ShowItemico);Laya.stage.on("Magic_Refresh",this,this.Magic_Refresh);Laya.stage.on("State_skill",this,this.onState_skill);Laya.stage.on("updateHum",this,this.updateHum);Laya.stage.on("UpdateNameColor",this,this.UpdateNameColor);Laya.stage.on("updateHumIcon",this,this.updateHumIcon);Laya.stage.on("updateHumNewDress",
this,this.updateHumNewDress);Laya.stage.on("showDuraHum",this,this.showDuraHum);Laya.stage.on("updateNeiGuanHair",this,this.updateNeiGuanHair);Laya.stage.on("update_SelfSndacasketState",this,this.setSndacasketState);this.setSndacasketState();c=-1;this.changeSize();this.ShowHeadItems();this.updateHum()};f.prototype.setSndacasketState=function(){switch(g_btSelfSndacasketState){case sndacasketState.disabled:this.Item_30.visible=!1;break;case sndacasketState.active:var p=[.3086,.6094,.082,0,0,.3086,.6094,
.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0];p=new Laya.ColorFilter(p);this.Item_30.filters=[p];this.Item_30.visible=!0;break;case sndacasketState.show:this.Item_30.filters=null;this.Item_30.visible=!0;break;default:this.Item_30.visible=!1}this.Item_40.visible=1==g_btSelfShowGodBless?!0:!1};f.prototype.updateNeiGuanHair=function(p,q){GameUtil.updateNeiGuanHair(this.img_Hair,p,q)};f.prototype.showDuraHum=function(){for(var p=0;p<g_UserItemList.length;p++){var q=g_UserItemList[p];if(q)for(var r=0;r<this.Kuang_bg_1._childs.length;r++){var u=
this.Kuang_bg_1._childs[r].getChildByName("Item_"+p);"img_head"==this.Kuang_bg_1._childs[r].name&&p==U_HELMET&&(u=this.Item_head);var v=q.Dura/1E3;if(u){var w=u.getChildByName("equip"),z=new Laya.Point(u.width-5,u.height-5);3>v&&!w?(w=Animationmodule.playframe(!0,u,"gameres/animation/equip/",1,8,100,!0,!1,z),w.name="equip"):3<=v&&w&&Animationmodule.removeAni(w)}}}};f.prototype.changeSize=function(){this.width=Laya.stage.width;this.height=Laya.stage.height};f.prototype.updateHumIcon=function(p,q){this.HumIcon_List.refresh()};
f.prototype.HumIconUpdateItem=function(p,q){p.settxt(p.dataSource,q)};f.prototype.HumIconSelect=function(p){h=p;p<g_IconCList.length&&null!=g_IconCList[p]&&(m=g_IconCList[p],g_SelectIndex=GameUtil.GetItemType(m.s),g_OpenIdx=16,g_MoveItems.Index=p,g_MoveItems.Items=m,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.HumIcon_List._selectedIndex=-1};f.prototype.changefashion=function(p){Sendmessage.showfashion(1)};f.prototype.ShowHeadItems=function(){var p=ObjectManage.findobject(playerID);if(p&&p.txt_name){this.hum_ico.skin=
"gameres/png/00377-1.png";this.fashion_hum.skin="gameres/png/00377-2.png";0==p.skin_feature.btGender&&(this.hum_ico.skin="gameres/png/00376-1.png",this.fashion_hum.skin="gameres/png/00376-2.png");if(-1!=p.txt_name.text.indexOf("\n")){var q=p.txt_name.text.split("\n");q=q[q.length-1]}else q=p.txt_name.text;this.charName.text=q;p.grildname&&(q=p.grildname.split("/"),this.guildName.text=q[0]);GameUtil.updateNeiGuanHair(this.img_Hair,p.skin_feature.btHair,p.skin_feature.btGender)}};f.prototype.UpdateItem=
function(p,q){p.settxt(p.dataSource,q)};f.prototype.UpdateNameColor=function(p){this.charName.color=Get2RGB(p)};f.prototype.Skillselect=function(p){c=p;p<g_UserMagicList.length&&null!=g_UserMagicList[p]&&(g_MoveSkill=g_UserMagicList[p]);this.Skill_List._selectedIndex=-1;g_OpenIdx=11;GameUtil.NewShowMagicInf()};f.prototype.Magic_Refresh=function(){this.Skill_List.refresh()};f.prototype.ontab1_Click=function(p){n=p.target.name;this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=
!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.but_tab6.selected=!1;p.target.selected=!0;this.showTab(n)};f.prototype.showTab=function(p){switch(parseInt(p)){case 1:this.state_bg.visible=!1;this.Kuang_bg_1.visible=!0;this.state_alb.visible=!1;this.state_skill.visible=!1;this.fashion_bg.visible=!1;this.state_icon.visible=!1;if(cur_use_app||2==g_Termial)Laya.stage.offAll("humanCheckDragItem"),Laya.stage.offAll("fashionCheckDragItem");this.ShowItemico(-1);break;case 2:this.updateHum();this.Kuang_bg_1.visible=
!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!0;this.fashion_bg.visible=!1;this.state_icon.visible=!1;this.stateData.vScrollBarSkin="";break;case 3:this.updateHum();this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!0;this.fashion_bg.visible=!1;this.state_icon.visible=!1;this.AttributeData.vScrollBarSkin="";break;case 4:this.onState_skill();break;case 5:this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=
!1;this.state_bg.visible=!1;this.fashion_bg.visible=!0;this.state_icon.visible=!1;this.stateData.vScrollBarSkin="";if(cur_use_app||2==g_Termial)Laya.stage.offAll("humanCheckDragItem"),Laya.stage.offAll("fashionCheckDragItem");this.updateHumNewDress();break;case 6:this.Kuang_bg_1.visible=!1,this.state_skill.visible=!1,this.state_alb.visible=!1,this.state_bg.visible=!1,this.fashion_bg.visible=!1,this.state_icon.visible=!0,this.ShowItemico(-1)}};f.prototype.updateHumNewDress=function(){g_isTuLongShengYu&&
!this.check_fashion.selected&&(this.check_fashion.selected=!0,Sendmessage.showfashion(1));this.fashion_hum.visible=!0;for(var p=this.fashion_bg._childs.length,q=0;q<p;q++){var r=this.fashion_bg._childs[q];if(r instanceof Laya.Image)for(var u=0;u<r._childs.length;u++){var v=r._childs[u],w=v.nTag;if("number"===typeof w)if(v.removeChildren(),w==U_FASHIONDRESS||w==U_FASHIONWEAPON||w==U_FASHIONHELMET){DragItem.testType=DragItem.dragItemType.fashion;var z=new DragItem,A={itemsData:g_UserItemList,selectIndex:void 0,
hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.fashion};z.setData(A,w);v.addChild(z);z.setWidthAndHeight(z.parent.width,z.parent.height);null!=g_UserItemList[w]&&(A=g_UserItemList[w].s.Looks,this.LoadImageEx(A,z.itemImg,!0,w,"stateitem"),GameUtil.ShowItemeffectEx(this,v,g_UserItemList[w],!0,w))}else DragItem.testType=DragItem.dragItemType.fashion,z=new DragItem,A={itemsData:g_UserItemList,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.fashion},
z.setData(A,w),v.addChild(z),z.setWidthAndHeight(z.parent.width,z.parent.height),null!=g_UserItemList[w]&&(A=g_UserItemList[w].s.Looks,this.LoadImageEx(A,z.itemImg,!1,w,"stateitem"),GameUtil.ShowItemeffectEx(this,v,g_UserItemList[w]))}}};f.prototype.updateHum=function(){this.getHumAbil();var p=this.stateData._childs[0],q=this.AttributeData._childs[0];if(p)for(var r=0;r<this.itemNum.length;r++)if(this.itemNum[r]){var u=p._childs[r];if(u)var v=u.getChildByName("txt2");v&&(v.text=this.itemNum[r])}if(q)for(r=
0;r<this.AttributeNum.length;r++)if(this.AttributeNum[r]){if(p=q._childs[r])var w=p.getChildByName("txt4");w&&(w.text=this.AttributeNum[r])}};f.prototype.getHumAbil=function(){var p=ObjectManage.findobject(playerID);if(p){var q=THumFeature(p.data.fea.buffer);if(q)var r=q.btJob}q=ObjectManage.GetAttr(playerID);p&&q&&q.NewValue&&10<q.NewValue.length&&(this.itemArr=["\u804c       \u4e1a:","\u7b49       \u7ea7:","\u5f53\u524d\u7ecf\u9a8c:","\u5347\u7ea7\u7ecf\u9a8c:","\u751f  \u547d  \u503c:","\u9b54  \u6cd5  \u503c:",
"\u836f  \u529b  \u503c:","\u9152  \u91cf  \u503c:","\u9152\u91cf\u8fdb\u5ea6:",g_nGameDiamond.key+":",g_nGameGird.key+":",g_GamePointNum.key+":",g_GameGoldNum.key+":",g_gamePopNum.key+":",g_gameGlory.key+":"],this.itemNum=[GameUtil.getJobName(r),q.Level,q.Exp,q.MaxExp,GameUtil.makeBigNum(q.HP)+" / "+GameUtil.makeBigNum(q.MaxHP),GameUtil.makeBigNum(q.MP)+" / "+GameUtil.makeBigNum(q.MaxMP),"0","0","0",g_nGameDiamond.value,g_nGameGird.value,g_GamePointNum.value,g_GameGoldNum.value,q.CreditPoint,g_gameGlory.value],
this.AttributeArr="\u9632       \u5fa1:;\u9b54       \u5fa1:;\u653b       \u51fb:;\u9b54       \u6cd5:;\u9053       \u672f:;\u80cc\u5305\u91cd\u91cf:;\u7a7f\u6234\u91cd\u91cf:;\u8155       \u529b:;\u9b54\u6cd5\u8eb2\u907f:;\u6bd2\u7269\u8eb2\u907f:;\u4f53\u529b\u6062\u590d:;\u9b54\u6cd5\u6062\u590d:;\u653b\u51fb\u901f\u5ea6:;\u7cbe  \u786e  \u5ea6:;\u654f  \u6377  \u5ea6:;\u4e2d\u6bd2\u56de\u590d:;\u81f4\u547d\u4e00\u51fb:;\u653b\u51fb\u4f24\u5bb3:;\u7269\u4f24\u51cf\u5c11:;\u9b54\u4f24\u51cf\u5c11:;\u5ffd\u89c6\u9632\u5fa1:;\u4f24\u5bb3\u53cd\u5f39:;\u4f53\u8d28\u589e\u52a0:;\u7ecf\u9a8c\u9644\u52a0:;\u6012\u6c14\u6062\u590d:;\u5408\u51fb\u4f24\u5bb3:;\u76ee\u6807\u66b4\u7387:;\u9b54\u529b\u589e\u52a0:;\u4eba\u7269\u8840\u91cf:;\u4eba\u7269\u9b54\u529b:".split(";"),
this.AttributeNum=[q.AC+" - "+q.MaxAC,q.MAC+" - "+q.MaxMAC,q.DC+" - "+q.MaxDC,q.MC+" - "+q.MaxMC,q.SC+" - "+q.MaxSC,q.Weight+" / "+q.MaxWeight,q.WearWeight+" / "+q.MaxWearWeight,q.HandWeight+" / "+q.MaxHandWeight,10*g_nMyAntiMagic+"%",10*g_nMyAntiPoison+"%",10*g_nMyHealthRecover+"%",10*g_nMySpellRecover+"%",rolespeed,g_nMyHitPoint,g_nMySpeedPoint,10*g_nMyPoisonRecover+"%",q.NewValue[0]+"%",q.NewValue[1]+"%",q.NewValue[2]+"%",q.NewValue[3]+"%",q.NewValue[4]+"%",q.NewValue[5]+"%",q.NewValue[6],q.NewValue[7]+
"%",q.NewValue[8]+"%",q.NewValue[9]+"%",q.NewValue[10]+"%",q.NewValue[13],q.NewValue[14]+"%",q.NewValue[15]+"%"])};f.prototype.setHum=function(){this.AttributeData.removeChildren();this.stateData.removeChildren();this.getHumAbil();for(var p=0;p<this.itemArr.length;p++){var q=new Laya.Box;q.name="state_box";var r=new Laya.Text;r.text=this.itemArr[p];r.fontSize=20;r.color="#ded1c0";r.align="right";r.valign="middle";r.leading=2;r.size(110,30);q.addChild(r);r.pos(0,0);r=new Laya.Image;r.skin="gameres/png/hum_Attribute.png";
r.size(165,30);q.addChild(r);r.x=115;r=new Laya.Text;r.name="txt2";r.text=this.itemNum[p];r.fontSize=20;r.color="#ded1c0";r.align="left";r.valign="middle";r.size(160,30);q.addChild(r);r.pos(120,0);q.y=40*p;this.stateData.addChild(q)}for(p=0;p<this.AttributeArr.length;p++)q=new Laya.Box,q.name="state_box1",r=new Laya.Text,r.text=this.AttributeArr[p],r.fontSize=20,r.color="#ded1c0",r.align="right",r.valign="middle",r.leading=2,r.size(110,30),q.addChild(r),r.pos(0,0),r=new Laya.Image,r.skin="gameres/png/hum_Attribute.png",
r.size(165,30),q.addChild(r),r.x=115,r=new Laya.Text,r.name="txt4",r.text=this.AttributeNum[p],r.fontSize=20,r.color="#ded1c0",r.align="left",r.valign="middle",r.size(160,30),q.addChild(r),r.pos(120,0),q.y=40*p,this.AttributeData.addChild(q)};f.prototype.onState_skill=function(){c=-1;this.Skill_List.refresh();this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_alb.visible=
!1;this.state_skill.visible=!0;this.but_tab4.selected=!0;this.fashion_bg.visible=!1;this.state_icon.visible=!1};f.prototype.onMouseDown=function(p){d.x=p.stageX;d.y=p.stageY;"but_Close"==p.target.name?this.close():this.HumIcon_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.Skill_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.stateData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.AttributeData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.Hum_bg.on(Laya.Event.MOUSE_UP,
this,this.onMouseUp),this.Hum_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Hum_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.Hum_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(p){this.Hum_bg.x+=p.stageX-d.x;this.Hum_bg.y+=p.stageY-d.y;d.x=p.stageX;d.y=p.stageY};f.prototype.close=function(){this.visible=!1};return f}(HumWinUI),JiaoYiWin=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);
this.size(48,48);var c=new Laya.Image;c.width=50;c.height=50;c.skin="gameres/ui/img_bag_bg.png";this.addChild(c);var h=new Laya.Image;c.addChild(h);this.setpos=function(m){h.visible=!0;h.skin=m;h.x=c.width/2-h.width/2;h.y=c.height/2-h.height/2;GameUtil.setTxtFixedPos(h,c.height)};this.settxt=function(m,g){if(10>g&&null!=g_HumJiaoYiList[g])if(h.blendMode="overlay",GameUtil.loadImg(g_HumJiaoYiList[g].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(c,g_HumJiaoYiList[g]),m=g_HumJiaoYiList[g].s.StdMode,
(17==m||18==m||41==m||40==m||42==m||31==m&&-1!=g_HumJiaoYiList[g].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_HumJiaoYiList[g].s.Reserved&&0<g_HumJiaoYiList[g].Dura)if(m=c.getChildByName("txt"))m.text="x"+(g_HumJiaoYiList[g].Dura+1),l=c.width-m.width-4,m.x=l;else{m=new Laya.Text;m.name="txt";m.color="#ffffff";m.text="x"+(g_HumJiaoYiList[g].Dura+1);GameUtil.setCanAddTxtStroke(m);m.pos(30,30);var l=c.width-m.width-4;m.x=l;c.addChild(m)}else 0==m&&5==g_HumJiaoYiList[g].s.Source&&0<g_HumJiaoYiList[g].Dura&&
((m=c.getChildByName("txt"))?(m.text="x"+g_HumJiaoYiList[g].Dura,l=c.width-m.width-4,m.x=l):(m=new Laya.Text,m.name="txt",m.color="#ffffff",m.text="x"+g_HumJiaoYiList[g].Dura,GameUtil.setCanAddTxtStroke(m),m.pos(30,30),l=c.width-m.width-4,m.x=l,c.addChild(m)));else h.visible=!1,(m=c.getChildByName("effect"))&&m.removeSelf();c.skin="gameres/ui/img_bag_bg.png";n==g&&(c.skin="gameres/ui/img_bag_bg1.png")}}function b(){b.__super.call(this);this.size(48,48);var c=new Laya.Image;c.width=50;c.height=50;
c.skin="gameres/ui/img_bag_bg.png";this.addChild(c);var h=new Laya.Image;c.addChild(h);this.setpos=function(m){h.visible=!0;h.skin=m;h.x=c.width/2-h.width/2;h.y=c.height/2-h.height/2;GameUtil.setTxtFixedPos(h,c.height)};this.settxt=function(m,g){if(10>g&&null!=g_MyJiaoYiList[g])if(h.blendMode="overlay",GameUtil.loadImg(g_MyJiaoYiList[g].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(c,g_MyJiaoYiList[g]),m=g_MyJiaoYiList[g].s.StdMode,(17==m||18==m||41==m||40==m||42==m||31==m&&-1!=g_MyJiaoYiList[g].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&
0<g_MyJiaoYiList[g].s.Reserved&&0<g_MyJiaoYiList[g].Dura)if(m=c.getChildByName("txt"))m.text="x"+(g_MyJiaoYiList[g].Dura+1),l=c.width-m.width-4,m.x=l;else{m=new Laya.Text;m.name="txt";m.color="#ffffff";m.text="x"+(g_MyJiaoYiList[g].Dura+1);GameUtil.setCanAddTxtStroke(m);m.pos(0,30);var l=c.width-m.width-4;m.x=l;c.addChild(m)}else 0==m&&5==g_MyJiaoYiList[g].s.Source&&0<g_MyJiaoYiList[g].Dura&&((m=c.getChildByName("txt"))?(m.text="x"+g_MyJiaoYiList[g].Dura,l=c.width-m.width-4,m.x=l):(m=new Laya.Text,
m.name="txt",m.color="#ffffff",m.text="x"+g_MyJiaoYiList[g].Dura,GameUtil.setCanAddTxtStroke(m),m.pos(0,30),m.align="right",l=c.width-m.width-4,m.x=l,c.addChild(m)));else h.visible=!1,(m=c.getChildByName("effect"))&&m.removeSelf();c.skin="gameres/ui/img_bag_bg.png";d==g&&(c.skin="gameres/ui/img_bag_bg1.png")}}new Laya.Point(0,0);var d=-1,n=-1;Laya.class(f,"JiaoYiWin",JiaoYiWinUI);Laya.class(a,"Hum_ListRender",Laya.Box);Laya.class(b,"Me_ListRender",Laya.Box);f.prototype.Hum_ListUpdateItem=function(c,
h){c.settxt(c.dataSource,h)};f.prototype.Me_ListUpdateItem=function(c,h){c.showItemUI({itemsData:g_MyJiaoYiList,selectIndex:d,hasBgFrame:!0,maxUnlockCount:void 0,itemType:DragItem.dragItemType.jiaoyiItem},h)};f.prototype.init=function(){this.InPut_Me_Gold.editable=!0;this.nGold=0;g_OpenJiaoYi=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_QueR.on(Laya.Event.CLICK,this,this.no_QueR);this.but_ok.on(Laya.Event.CLICK,this,this.onJiaoYi);this.InPut_Me_Gold.text=0;for(var c=this.InPut_Hum_Gold.text=
0;12>c;c++)g_MyJiaoYiList[c]=null,g_HumJiaoYiList[c]=null;g_OpenBag&&(c=GameUtil.InstanceOfMem(NewBagUI))&&(this.JiaoYi_bg.x=c.Bagimg_bg.x+c.Bagimg_bg.width-20,this.JiaoYi_bg.y=c.Bagimg_bg.y);this.JiaoYi_bg.skin="gameres/png/jiaoyibg.png";this.JiaoYi_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Hum_List.repeatX=5;this.Hum_List.repeatY=2;this.Hum_List.spaceX=1;this.Hum_List.spaceY=1;DragItem.testType=DragItem.dragItemType.jiaoyiItem;this.Hum_List.itemRender=a;this.Hum_List.selectEnable=
!0;this.Hum_List.selectHandler=new Laya.Handler(this,this.Hum_Listselect);this.Hum_List.renderHandler=new Laya.Handler(this,this.Hum_ListUpdateItem);this.Me_List.repeatX=5;this.Me_List.repeatY=2;this.Me_List.spaceX=1;this.Me_List.spaceY=1;this.Me_List.itemRender=DragItem;this.Me_List.selectEnable=!0;this.Me_List.selectHandler=new Laya.Handler(this,this.Me_Listselect);this.Me_List.renderHandler=new Laya.Handler(this,this.Me_ListUpdateItem);Laya.stage.on("Update_Hum_List_Refresh",this,this.Hum_List_Refresh);
Laya.stage.on("Update_Me_List_Refresh",this,this.Me_List_Refresh);Laya.stage.on("Show_Me_Gold",this,this.Show_Me_Gold);Laya.stage.on("Show_Hum_Gold",this,this.Show_Hum_Gold);this.startpos=new Laya.Point;var h=[];for(c=0;12>c;c++)h.push(c);this.Hum_List.array=h;this.Me_List.array=h;""!=G_Trade_Other_Name&&(this.txt_HumName.text=G_Trade_Other_Name);n=d=-1;(c=ObjectManage.findobject(playerID))&&c.txt_name&&(this.txt_Me_Name.text=GameUtil.getPureName(c));this.InPut_Me_Gold.on(Laya.Event.FOCUS,this,this.OnFocus);
this.InPut_Me_Gold.on(Laya.Event.BLUR,this,this.OnBlur)};f.prototype.OnFocus=function(){cur_use_app&&this.InPut_Me_Gold.editable&&(this.JiaoYi_bg.top=-220)};f.prototype.OnBlur=function(){cur_use_app&&(this.JiaoYi_bg.y=35)};f.prototype.onJiaoYi=function(c){this.InPut_Me_Gold.editable=!1;Sendmessage.SubmitTrade()};f.prototype.Show_Hum_Gold=function(c){this.InPut_Hum_Gold.text=c};f.prototype.Show_Me_Gold=function(c){this.InPut_Me_Gold.text=c};f.prototype.no_QueR=function(){var c=parseInt(this.InPut_Me_Gold.text);
isNaN(c)&&(c=0);c>g_GameCionNum.value?(Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u91d1\u5e01\u4e0d\u8db3\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",callfn:function(){}}]),this.InPut_Me_Gold.text=0):(this.InPut_Me_Gold.editable=!1,0<c?(Sendmessage.TradeGold(c),g_MyJiaoYiSum=this.nGold=c):this.InPut_Me_Gold.text=c)};f.prototype.Me_List_Refresh=function(c){this.Me_List.refresh()};f.prototype.Hum_List_Refresh=function(c){this.Hum_List.refresh()};f.prototype.Hum_Listselect=function(c){n=c;null!=
g_HumJiaoYiList[c]&&(g_OpenIdx=5,g_MoveItems.Items=g_HumJiaoYiList[c],this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.Hum_List._selectedIndex=-1};f.prototype.Me_Listselect=function(c){d=c;null!=g_MyJiaoYiList[c]&&(g_OpenIdx=12,g_MoveItems.Items=g_MyJiaoYiList[c],this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.Me_List._selectedIndex=-1};f.prototype.onMouseDown=function(c){this.Me_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=c.stageX,
this.startpos.y=c.stageY,this.JiaoYi_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.JiaoYi_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.JiaoYi_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.JiaoYi_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(c){this.JiaoYi_bg.x+=c.stageX-this.startpos.x;this.JiaoYi_bg.y+=c.stageY-this.startpos.y;this.startpos.x=c.stageX;this.startpos.y=c.stageY};f.prototype.close=function(){Laya.stage.off("Update_Hum_List_Refresh",
this,this.Hum_List_Refresh);Laya.stage.off("Update_Me_List_Refresh",this,this.Me_List_Refresh);Laya.stage.off("Show_Me_Gold",this,this.Show_Me_Gold);Laya.stage.off("Show_Hum_Gold",this,this.Show_Hum_Gold);g_OpenJiaoYi=!1;GameApi.CloseJiaoYi();Sendmessage.CancelTrade();this.removeSelf();this.Me_List.destroy();(cur_use_app||2==g_Termial)&&Laya.stage.event("clearCheckClickHandler",DragItem.dragItemType.jiaoyiItem)};return f}(JiaoYiWinUI),LookHum=function(e){function f(){f.__super.call(this);this.init()}
function a(){a.__super.call(this);this.size(350,54);this.settxt=function(c,h){this.removeChildren();h=new Laya.Image;h.skin="gameres/png/title_item.png";this.addChild(h);var m=new Laya.Text;m.color="#ffffff";m.fontSize=18;m.text=c.s.Name;m.pos(46,12);h.addChild(m);if(c&&0<c.MakeIndex){m=0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items";var g=new Laya.Image;h.addChild(g);GameUtil.loadImg(c.s.Looks+1,m,function(l){""!=l&&
(g.skin=l,g.pos(24.5-g.width/2,24.5-g.height/2))})}}}var b=new Laya.Point(0,0),d=[],n=[];Laya.class(f,"LookHum",LookHumUI);Laya.class(a,"SHumIcon_Render",Laya.Box);f.prototype.ShowItemicon=function(c){ItemHeard?this.Item_4.visible=!1:(this.Item_head.visible=!1,this.img_head.visible=!1);if(null!=d[U_HELMET]){this.Item_head.removeChildren();var h=d[U_HELMET].s.Looks;if(d[U_HELMET]&&0<d[U_HELMET].MakeIndex){var m=new Laya.Image;this.LoadImageEx(h,m,!1,U_HELMET,"stateitem");this.Item_head.addChild(m);
GameUtil.ShowItemeffectEx(this,m,d[U_HELMET])}}m=this.Kuang_bg_2._childs.length;for(h=0;h<m;h++){var g=this.Kuang_bg_2._childs[h];if(g instanceof Laya.Image)for(var l=0;l<g._childs.length;l++){var p=g._childs[l];if(p){var q=p.nTag;if("number"===typeof q&&(c==q||-1==c)&&40>q){p.removeChildren();if(null!=d[q]&&0<d[q].MakeIndex){var r=new Laya.Image,u=d[q].s.Looks;q==U_WEAPON||q==U_DRESS||q==U_HELMET?(d[q].tag=q,this.LoadImageEx(u,r,!0,q,"stateitem"),GameUtil.ShowItemeffectEx(this,p,d[q],!0,q)):q==U_SHIELD||
q==U_HAT?(this.LoadImageEx(u,r,!0,q,"stateitem"),GameUtil.ShowItemeffectEx(this,p,d[q],!0,q)):(this.LoadImageEx(u,r,!1,q,"stateitem"),GameUtil.ShowItemeffectEx(this,p,d[q]));p.addChild(r)}if(c==q)break}}}}for(h=c=0;h<d.length;h++)null!=d[h]&&(c+=GameApi.GetItemScore(d[h]));this.itemScorse.text="\u88c5\u5907\u8bc4\u5206\uff1a"+c};f.prototype.LoadImageEx=function(c,h,m,g,l){var p=this;GameUtil.loadImg(c,l,function(q,r){if(m&&""!=q&&r)switch(r=Offsetmodule.getoffsetfromatlas(r.atlas,r.img),h.skin=q,
p.img_Hair.y=1==g_GameType?35:39,g){case U_WEAPON:1==g_GameType?h.pos(-25+r.x,40+r.y):h.pos(-20+r.x,52+r.y);break;case U_DRESS:1==g_GameType?h.pos(-75+r.x,-28+r.y):h.pos(-73+r.x,-18+r.y);break;case U_HELMET:1==g_GameType?h.pos(-69+r.x,14+r.y):h.pos(-69+r.x,18+r.y);break;case U_SHIELD:h.pos(-50+r.x,-24+r.y);break;case U_HAT:h.pos(-69+r.x,20+r.y);break;case U_FASHIONDRESS:1==g_GameType?h.pos(-67+r.x,-27+r.y):h.pos(-64+r.x,-18+r.y);break;case U_FASHIONWEAPON:1==g_GameType?h.pos(-27+r.x,40+r.y):h.pos(-20+
r.x,52+r.y);break;case U_FASHIONHELMET:h.pos(-74.5+r.x,28+r.y)}else h.skin=q,h.pos(24.5-h.width/2,24.5-h.height/2)})};f.prototype.onItem_Down=function(c){var h=c.target.nTag;"head"==c.target.name&&(h=4);30==c.target.name?GameApi.LookShoushiBox(d):40==h?GameApi.ShowLookShouS(d):null!=d[h]&&0<d[h].MakeIndex&&(g_OpenIdx=5,g_MoveItems.Index=h,g_MoveItems.Items=d[h],GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};f.prototype.init=function(){g_OpenState=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);
g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(this.itemScorse.visible=!0);this.LookHum_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.New_kuang.visible=!1;this.lookHumIcon_bg.visible=!1;this.selectedTab=this.Tab_1;this.Tab_1.selected=!0;this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.nTag=0;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.nTag=1;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);
this.Item_2.nTag=2;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.nTag=3;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.nTag=4;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.nTag=5;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.nTag=6;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.nTag=7;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.nTag=8;this.Item_9.on(Laya.Event.MOUSE_DOWN,
this,this.onItem_Down);this.Item_9.nTag=9;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.nTag=10;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.nTag=11;this.Item_12.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_12.nTag=12;this.Item_13.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_13.nTag=13;this.Item_14.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_14.nTag=14;this.Item_15.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);
this.Item_15.nTag=15;this.Item_16.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_16.nTag=16;this.Item_40.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_40.nTag=40;this.Tab_1.on(Laya.Event.MOUSE_DOWN,this,this.Tab_Show_Type);this.Tab_2.on(Laya.Event.MOUSE_DOWN,this,this.Tab_Show_Type);this.Tab_3.on(Laya.Event.MOUSE_DOWN,this,this.Tab_Show_Type);this.fashion_body.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_body.nTag=18;this.fashion_weapon.on(Laya.Event.MOUSE_DOWN,
this,this.onItem_Down);this.fashion_weapon.nTag=19;this.Item_20.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_20.nTag=20;this.Item_21.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_21.nTag=21;this.Item_22.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_22.nTag=22;this.Item_23.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_23.nTag=23;this.Item_24.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_24.nTag=24;this.Item_25.on(Laya.Event.MOUSE_DOWN,this,
this.onItem_Down);this.Item_25.nTag=25;this.Item_26.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_26.nTag=26;this.Item_27.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_27.nTag=27;this.Item_28.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_28.nTag=28;this.Item_29.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_29.nTag=29;this.Item_30.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_head.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);d=null;this.Item_30.visible=
1<=g_btSelfSndacasketState?!0:!1;this.Item_40.visible=1==g_btSelfShowGodBless?!0:!1;Laya.stage.on("updateNeiGuanHair",this,this.updateNeiGuanHair)};f.prototype.Tab_Show_Type=function(c){var h=c.target.name;this.Kuang_bg_2.visible=!1;this.New_kuang.visible=!1;this.lookHumIcon_bg.visible=!1;this.selectedTab.selected=!1;this.selectedTab=c.target;c.target.selected=!0;switch(parseInt(h)){case 1:this.Kuang_bg_2.visible=!0;break;case 2:this.New_kuang.visible=!0;this.updateLooksHumNewDress();break;case 3:this.lookHumIcon_bg.visible=
!0,this.ShowsHumIcon()}};f.prototype.ShowsHumIcon=function(){this.LookIcon_List.repeatX=1;this.LookIcon_List.repeatY=9;this.LookIcon_List.vScrollBarSkin="gameres/ui/vscroll.png";this.LookIcon_List.itemRender=a;this.LookIcon_List.selectEnable=!0;this.LookIcon_List.selectHandler=new Laya.Handler(this,this.SHumIconSelect);this.LookIcon_List.renderHandler=new Laya.Handler(this,this.SHumIconUpdateItem);this.LookIcon_List.array=n;this.IconShow.on(Laya.Event.MOUSE_DOWN,this,this.onIconShow_Down);this.IconShow.removeChildren();
if(d[U_ICON]&&0<d[U_ICON].MakeIndex){var c=new Laya.Image;this.IconShow.addChild(c);this.LoadImageEx(d[U_ICON].s.Looks+3,c,!1,U_ICON,0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items")}};f.prototype.onIconShow_Down=function(){null!=d[U_ICON]&&0<d[U_ICON].MakeIndex&&(g_OpenIdx=5,g_MoveItems.Items=d[U_ICON],GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};f.prototype.SHumIconSelect=function(c){null!=n[c]&&0<n[c].MakeIndex&&
(g_OpenIdx=5,g_MoveItems.Items=n[c],GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};f.prototype.SHumIconUpdateItem=function(c,h){c.settxt(c.dataSource,h)};f.prototype.updateLooksHumNewDress=function(){this.fashion_hum.visible=!0;for(var c=this.New_kuang._childs.length,h=0;h<c;h++){var m=this.New_kuang._childs[h];if(m instanceof Laya.Image)for(var g=0;g<m._childs.length;g++){var l=m._childs[g],p=l.nTag;if("number"===typeof p)if(l.removeChildren(),p==U_FASHIONDRESS||p==U_FASHIONWEAPON||p==U_FASHIONHELMET){if(null!=
d[p]&&0<d[p].s.nIdx){var q=d[p].s.Looks,r=new Laya.Image;l.addChild(r);this.LoadImageEx(q,r,!0,p,"stateitem");GameUtil.ShowItemeffectEx(this,l,d[p],!0,p)}}else null!=d[p]&&0<d[p].s.nIdx&&(q=d[p].s.Looks,r=new Laya.Image,l.addChild(r),this.LoadImageEx(q,r,!1,p,"stateitem"),GameUtil.ShowItemeffectEx(this,l,d[p]))}}};f.prototype.ShowHum=function(c){if(null!=c){var h=THumFeature(c.Feature.buffer);this.hum_ico2.skin="gameres/png/00377-1.png";this.fashion_hum.skin="gameres/png/00377-2.png";0==h.btGender&&
(this.hum_ico2.skin="gameres/png/00376-1.png",this.fashion_hum.skin="gameres/png/00376-2.png");this.uaer_name.text=c.UserName;this.uaer_name.color=Get2RGB(c.NAMECOLOR);this.user_title.text=c.GuildName;""!==c.GuildRankName&&(this.user_title.text+="["+c.GuildRankName+"]");GameUtil.updateNeiGuanHair(this.img_Hair,h.btHair,h.btGender);d=c.UseItems;n=c.UserIconList;this.ShowItemicon(-1);this.copyname.on(Laya.Event.CLICK,this,function(){g_copyName=c.UserName;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u590d\u5236\u6210\u529f\uff0c\u53ef\u4ee5\u5728\u6dfb\u52a0\u597d\u53cb\u754c\u9762\u7c98\u8d34\u3002",
callfn:function(){}}])})}};f.prototype.updateNeiGuanHair=function(c,h){GameUtil.updateNeiGuanHair(this.img_Hair,c,h)};f.prototype.onMouseDown=function(c){"but_Close"==c.target.name?this.close():(b.x=c.stageX,b.y=c.stageY,this.LookIcon_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.LookHum_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.LookHum_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.LookHum_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)))};f.prototype.onMouseUp=
function(){this.LookHum_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(c){this.LookHum_bg.x+=c.stageX-b.x;this.LookHum_bg.y+=c.stageY-b.y;b.x=c.stageX;b.y=c.stageY};f.prototype.close=function(){this.LookHum_bg.off(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.LookHum_bg.off(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.LookHum_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.off("updateNeiGuanHair",this,this.updateNeiGuanHair);for(var c=this.Kuang_bg_2._childs.length,
h=0;h<c;h++){var m=this.Kuang_bg_2._childs[h];if(m instanceof Laya.Image)for(var g=0;g<m._childs.length;g++){var l=m._childs[g];l._childs[1]&&""!==l._childs[1].name&&Animationmodule.removeAniname(l._childs[1].name)}}c=this.New_kuang._childs.length;for(h=0;h<c;h++)if(m=this.New_kuang._childs[h],m instanceof Laya.Image)for(g=0;g<m._childs.length;g++)l=m._childs[g],l._childs[1]&&""!==l._childs[1].name&&Animationmodule.removeAniname(l._childs[1].name);this.removeSelf()};return f}(LookHumUI),LookShop=
function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var n=new Laya.Image;n.width=50;n.height=50;n.skin="gameres/ui/img_bag_bg.png";this.addChild(n);var c=new Laya.Image;n.addChild(c);this.setpos=function(h){c.visible=!0;c.skin=h;c.x=n.width/2-c.width/2;c.y=n.height/2-c.height/2;GameUtil.setTxtFixedPos(c,n.width)};this.settxt=function(h,m){20>m&&0!=G_BaiTanData.Item[m].MakeIndex?(GameUtil.loadImg(G_BaiTanData.Item[m].s.Looks,"items",this.setpos),
GameUtil.ShowItemeffect(n,G_BaiTanData.Item[m]),(17==G_BaiTanData.Item[m].s.StdMode||18==G_BaiTanData.Item[m].s.StdMode||41==G_BaiTanData.Item[m].s.StdMode||40==G_BaiTanData.Item[m].s.StdMode||42==G_BaiTanData.Item[m].s.StdMode||31==G_BaiTanData.Item[m].s.StdMode&&-1!=G_BaiTanData.Item[m].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<G_BaiTanData.Item[m].s.Reserved&&0<G_BaiTanData.Item[m].Dura?c.getChildByName("itemNums")||(h=new Laya.Text,h.name="itemNums",h.color="#ffffff",h.align="right",h.width=
40,h.text="x"+(G_BaiTanData.Item[m].Dura+1),GameUtil.setCanAddTxtStroke(h),h.pos(-5,20),c.addChild(h),GameUtil.setTxtFixedPos(c,n.width)):0==G_BaiTanData.Item[m].s.StdMode&&5==G_BaiTanData.Item[m].s.Source&&0<G_BaiTanData.Item[m].Dura&&!c.getChildByName("itemNums")&&(h=new Laya.Text,h.name="itemNums",h.color="#ffffff",h.align="right",h.width=40,h.text="x"+G_BaiTanData.Item[m].Dura,GameUtil.setCanAddTxtStroke(h),h.pos(-10,20),c.addChild(h),GameUtil.setTxtFixedPos(c,n.width))):(c.visible=!1,(h=n.getChildByName("effect"))&&
h.removeSelf());n.skin="gameres/ui/img_bag_bg.png";d==m&&(n.skin="gameres/ui/img_bag_bg1.png")}}var b=new Laya.Point(0,0),d=-1;Laya.class(f,"LookShop",LooksShopUI);Laya.class(a,"LookShopRender",Laya.Box);f.prototype.UpdateItem=function(n,c){n.settxt(n.dataSource,c)};f.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_Exit.on(Laya.Event.CLICK,this,this.close);this.but_Buy.on(Laya.Event.CLICK,this,this.onbut_Buy);this.LookShop_bg.skin="gameres/png/myshopwin.png";
if(g_OpenBag){var n=GameUtil.InstanceOfMem(NewBagUI);n&&(this.LookShop_bg.x=n.Bagimg_bg.x+n.Bagimg_bg.width-20,this.LookShop_bg.y=n.Bagimg_bg.y)}this.LookShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.LookShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.LookShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.Look_S_List.repeatX=5;this.Look_S_List.repeatY=4;this.Look_S_List.spaceX=1;this.Look_S_List.spaceY=1;this.Look_S_List.itemRender=a;this.Look_S_List.selectEnable=
!0;this.Look_S_List.selectHandler=new Laya.Handler(this,this.Shop_Listselect);this.Look_S_List.renderHandler=new Laya.Handler(this,this.UpdateItem);Laya.stage.on("Update_Look_S_List",this,this.Look_S_List_Refresh);this.initlist()};f.prototype.initlist=function(){this.txt_ShopName.text=g_SelectedName+" \u7684\u4e2a\u4eba\u5546\u5e97";this.txt_Name.text="";this.txt_Gold.text="";for(var n=[],c=0;20>c;c++)n.push(c);this.Look_S_List.array=n;d=-1};f.prototype.Look_S_List_Refresh=function(n){this.Look_S_List.refresh()};
f.prototype.onbut_Buy=function(n){if(-1!=d&&20>d&&0!=G_BaiTanData.Item[d].MakeIndex){var c=G_BaiTanData.nRecogId,h=G_BaiTanData.Item[d].MakeIndex,m=baitanGoldTypes[d],g=G_BaiTanData.Item[d].s.Price;n=G_BaiTanData.Item[d].s.Name;var l=GameUtil.getCurrencyByGoldType(m)+".";Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u8d2d\u4e70\u8be5\u7269\u54c1\uff1f \r\n \u7269\u54c1: \u3010 "+n+" \u3011\r\n\u51fa\u552e\u4ef7\u683c\uff1a"+g+l,callfn:function(){Sendmessage.BuyBaiTanItem(c,
h,m,g,d)}}])}};f.prototype.Shop_Listselect=function(n){this.txt_Name.text="";this.txt_Gold.text="";d=n;if(0!=G_BaiTanData.Item[n].MakeIndex)switch(g_OpenIdx=5,g_MoveItems.Items=G_BaiTanData.Item[n],this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items),this.txt_Name.text=g_MoveItems.Items.s.Name,baitanGoldTypes[n]){case 1:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_GameCionNum.key;break;case 2:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_bindCionNum.key;break;case 3:this.txt_Gold.text=
G_BaiTanData.Item[n].s.Price+" "+g_GameGoldNum.key;break;case 4:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_bindGoldNum.key;break;case 5:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_GamePointNum.key;break;case 6:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_nGameDiamond.key;break;case 7:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_nGameGird.key;break;case 8:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+" "+g_gameGlory.key;break;case 9:this.txt_Gold.text=G_BaiTanData.Item[n].s.Price+
" "+g_gamePopNum.key}this.Look_S_List._selectedIndex=-1};f.prototype.onMouseDown=function(){if(!(this.but_Exit.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Name.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Gold.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_ShopName.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.Look_S_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))&&this.LookShop_bg.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)){var n=this.LookShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));b.x=n.x;b.y=n.y;this.bgCanMove=!0}};f.prototype.onMouseUp=function(){this.bgCanMove=!1};f.prototype.onMouseMove=function(){if(!(this.but_Exit.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Name.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Gold.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_ShopName.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||
this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.Look_S_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))&&this.LookShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.bgCanMove){var n=this.LookShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.LookShop_bg.x+=n.x-b.x;this.LookShop_bg.y+=n.y-b.y}};f.prototype.close=function(){this.removeSelf();Laya.stage.off("Update_Look_S_List",this,this.Look_S_List_Refresh)};return f}(LooksShopUI),
LookShous=function(e){function f(){f.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya.class(f,"LookShous",LookShousUI);f.prototype.ShouShiShow=function(b){if(null!=b)for(var d=this.sKuang._childs.length,n=0;n<d;n++){var c=this.sKuang._childs[n];c.removeChildren();var h=parseInt(c.name)+40;c.Items=null;if(null!=b[h]&&0<b[h].MakeIndex){var m=b[h].s.Looks,g=new Laya.Image,l=this;g.name=n;c.Items=b[h];GameUtil.loadImg(m,"items",function(p,q){var r=l.sKuang.getChildByName(p.name.toString());
p.skin=q;p.pos(22-p.width/2,22-p.height/2);r.addChild(p)}.bind(this,g));c.addChild(g);GameUtil.ShowItemeffectEx(this,c,b[h],!0,h)}}};f.prototype.onItem_Down=function(b){b=b.target.Items;null!=b&&0<b.MakeIndex&&(g_OpenIdx=22,g_MoveItems.Index=b.tag,g_MoveItems.Items=b,GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};f.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Shoushi_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Item_0.on(Laya.Event.MOUSE_DOWN,this,
this.onItem_Down);this.Item_0.Items=null;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.Items=null;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.Items=null;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.Items=null;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.Items=null;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.Items=null;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);
this.Item_6.Items=null;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.Items=null;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.Items=null;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.Items=null;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.Items=null;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.Items=null};f.prototype.onMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;
this.Shoushi_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Shoushi_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.Shoushi_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseUp=function(){this.Shoushi_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(b){this.Shoushi_bg.x+=b.stageX-a.x;this.Shoushi_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};f.prototype.close=function(){this.removeSelf()};return f}(LookShousUI),LookShoushi=function(e){function f(){f.__super.call(this);
this.init()}var a=new Laya.Point(0,0);Laya.class(f,"LookShoushi",LookShoushiUI);e=f.prototype;e.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.BtnColse);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.Items=null;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.Items=null;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.Items=null;this.Item_3.on(Laya.Event.MOUSE_DOWN,
this,this.onItem_Down);this.Item_3.Items=null;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.Items=null;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.Items=null};e.ShowShoushi=function(b){if(null!=b)for(var d=this.img_box._childs.length,n=0;n<d;n++){var c=this.img_box._childs[n];c.removeChildren();var h=parseInt(c.name)+30;c.Items=null;if(null!=b[h]&&0<b[h].MakeIndex){var m=b[h].s.Looks,g=new Laya.Image;c.Items=b[h];GameUtil.loadImg(m,"items",function(l,
p){l&&p&&(l.skin=p,l.pos(24.5-l.width/2,24.5-l.height/2))}.bind(this,g));c.addChild(g);GameUtil.ShowItemeffectEx(this,c,b[h],!0,h)}}};e.onItem_Down=function(b){var d=b.target.Items;parseInt(b.target.name);null!=d&&0<d.MakeIndex&&(g_OpenIdx=21,g_MoveItems.Index=d.tag,g_MoveItems.Items=d,GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};e.BtnColse=function(){this.removeSelf()};e.OnMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,
this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(b){this.img_box.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.img_bg.x+=b.stageX-a.x,this.img_bg.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};return f}(LookShoushiUI),minimap=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(150,47);this.lb_txt=new Laya.Button;
this.lb_txt.labelColors="#c6bb94";this.lb_txt.labelSize=18;this.lb_txt.skin="gameres/ui/npclist_btn.png";this.lb_txt.stateNum=2;this.lb_txt.size(150,47);this.addChild(this.lb_txt);this.settxt=function(d){this.lb_txt.label=d.npcname}}var b=-1;Laya.class(f,"minimap",minimapUI);Laya.class(a,"item",Laya.Box);f.prototype.init=function(){var d=this;this.img_url=this.up_time=0;this.lb_posy=this.lb_posx="";this.mousetype=!0;this.startCalPos=!1;this.hideTargetPos();Laya.stage.on("close_minimap",this,this.close);
Laya.stage.on("startCalPosTrue",this,function(){d.startCalPos=!0});Laya.stage.on("setRandomStone_labContent",this,this.setRandomStone_labContent);Laya.stage.on("setToCtiyStone_labContent",this,this.setToCtiyStone_labContent);Laya.stage.on("keepGo",this,this.keepGo);this.btn_close.on(Laya.Event.CLICK,this,this.close);this.but_goto.on(Laya.Event.CLICK,this,this.gotomapxy);this.Big_mapimg.skin="gameres/png/img_bj.png";this.Big_mapimg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.initStone();this.posMark=
null};f.prototype.MouseDownMap=function(){var d=this.img_bj.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.posMark=d=new Laya.Point(Math.floor(d.x/(this.img_bj.width/Mapmodule.mapMaxX)),Math.floor(d.y/(this.img_bj.height/Mapmodule.mapMaxY)));if(AStart.cur_matx&&AStart.cur_matx[0]&&d.y<AStart.cur_matx.length&&d.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[d.y][d.x]){Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null;var n=ObjectManage.findobject(playerID);
n&&!n.is_die&&(b=-1,this.npc_list.refresh(),Movemodule.autoMove(d))}};f.prototype.drawlin=function(d){var n=this.img_bj.width/Mapmodule.mapMaxX,c=this.img_bj.height/Mapmodule.mapMaxY,h=ObjectManage.findobject(playerID);if(h){var m=h.grid.x*n,g=h.grid.y*c;this.role_sp.pos(m-this.role_sp.width/2,g-this.role_sp.height);this.sp_lines.graphics.clear();if(0<Movemodule.move_list.length){for(var l=[],p=Movemodule.move_index;p<Movemodule.move_list.length;++p)l.push((Movemodule.move_list[p].x-h.grid.x)*n),
l.push((Movemodule.move_list[p].y-h.grid.y)*c);this.sp_lines.graphics.drawLines(m,g,l,"#ff0000",1);if(this.startCalPos||d)this.startCalPos=!1,d=this.calcShowTargetPos(new Laya.Point(l[l.length-2]+m,l[l.length-1]+g)),this.showTargetPos(d,Movemodule.move_list[Movemodule.move_list.length-1])}else this.hideTargetPos()}};f.prototype.calcShowTargetPos=function(d){d=this.sp_lines.localToGlobal(d);return this.Big_mapimg.globalToLocal(d)};f.prototype.showTargetPos=function(d,n){d&&(this.targetPos_img.x=d.x-
this.targetPos_img.width/2,this.targetPos_img.y=d.y-this.targetPos_img.height-4,this.targetPos_txt.changeText("("+n.x+","+n.y+")"),this.targetPos_img.visible=!0)};f.prototype.hideTargetPos=function(){this.startCalPos&&(this.startCalPos=!1);this.targetPos_img.visible&&(this.targetPos_img.visible=!1)};f.prototype.gotomapxy=function(){var d=ObjectManage.findobject(playerID);if(!d.is_die&&-1!=b&&0<this.npc_list.array.length){var n=parseInt(this.npc_list.array[b].mapx);d=parseInt(this.npc_list.array[b].mapy);
g_mapnpc=n=new Laya.Point(n,d);if(AStart.cur_matx&&AStart.cur_matx[0]&&n.y<AStart.cur_matx.length&&n.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[n.y][n.x]){for(d=0;8>d;d++){var c=GameUtil.GetNextPoint(n.x,n.y,d);if(AStart.cur_matx&&AStart.cur_matx[0]&&c.y<AStart.cur_matx.length&&c.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[c.y][c.x]){n=c;break}}Fightmodule.leavefight();Movemodule.stopmove();if(d=ObjectManage.findobject(playerID))20<d.grid.distance(n.x,n.y)?Movemodule.start2move(d.grid,n):
Movemodule.startmove(d.grid,n),Movemodule.end_point=n,this.startCalPos=!0,n=Laya.stage.getChildByName("moveing"),null==n&&(n=new Laya.Point(browser_width/2,browser_height/2+105),n=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/moveing/",1,12,100,!0,!1,n),n.name="moveing",n.zOrder=0,autohookstate&&Laya.stage.event("onhook",["0"]))}}};f.prototype.updatepos=function(){var d=ObjectManage.findobject(playerID);d&&(this.lb_posx="X:"+d.grid.x,this.lb_posy="Y:"+d.grid.y,this.lb_mapname.text=Mapdata.cur_name+
"  "+this.lb_posx+" "+this.lb_posy,this.drawlin())};f.prototype.setMapdata=function(d){Laya.timer.loop(500,this,this.updatepos);this.lb_mapname.text=Mapdata.cur_name+"  "+this.lb_posx+" "+this.lb_posy;this.img_url=d;this.startpos=new Laya.Point;this.showimg();this.showlist();this.drawlin(!0);this.ratio=this.last_dis=0;this.span=.05};f.prototype.mapmove=function(d){if(d.touches&&2==d.touches.length){var n=d.touches[0].stageX-d.touches[1].stageX;d=d.touches[0].stageY-d.touches[1].stageY;n=Math.sqrt(n*
n+d*d);if(n>this.last_dis){if(2<this.ratio)return;this.ratio+=this.span;this.img_bj.x-=this.img_bj.width*this.span/2;this.img_bj.y-=this.img_bj.height*this.span/2;this.img_bj.scaleX+=this.span;this.img_bj.scaleY+=this.span}if(n<this.last_dis){if(0>=this.ratio){this.img_bj.scale(497/this.img_bj.width,334/this.img_bj.height);this.img_bj.pos(0,0);return}this.ratio-=this.span;this.img_bj.scaleX-=this.span;this.img_bj.scaleY-=this.span;0>this.img_bj.x&&(this.img_bj.x+=Math.abs(this.img_bj.x/5));0>this.img_bj.y&&
(this.img_bj.y+=Math.abs(this.img_bj.y/5))}this.mousetype=!1;this.last_dis=n}else{0>this.img_bj.x+(d.stageX-this.startpos.x)&&this.img_bj.x+(d.stageX-this.startpos.x)>-(this.img_bj.width*this.img_bj.scaleX)+497&&(this.img_bj.x+=d.stageX-this.startpos.x);0>this.img_bj.y+(d.stageY-this.startpos.y)&&this.img_bj.y+(d.stageY-this.startpos.y)>-(this.img_bj.height*this.img_bj.scaleY)+334&&(this.img_bj.y+=d.stageY-this.startpos.y);if(this.startpos.x!=d.stageX||this.startpos.y!=d.stageY)this.mousetype=!1;
this.startpos.x=d.stageX;this.startpos.y=d.stageY}};f.prototype.mapup=function(d){this.img_bj.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.img_bj.off(Laya.Event.MOUSE_MOVE,this,this.mapmove),this.img_bj.off(Laya.Event.MOUSE_UP,this,this.mapup),this.img_bj.off(Laya.Event.MOUSE_OUT,this,this.mapup),this.mousetype&&300<Laya.Browser.now()-this.up_time&&(this.MouseDownMap(),this.up_time=Laya.Browser.now()),this.mousetype=!0)};f.prototype.mapdown=function(d){if(d.touches&&2==d.touches.length){var n=
d.touches[0].stageX-d.touches[1].stageX,c=d.touches[0].stageY-d.touches[1].stageY;this.last_dis=Math.sqrt(n*n+c*c)}this.startpos.x=d.stageX;this.startpos.y=d.stageY;this.img_bj.on(Laya.Event.MOUSE_MOVE,this,this.mapmove);this.img_bj.on(Laya.Event.MOUSE_UP,this,this.mapup);this.img_bj.on(Laya.Event.MOUSE_OUT,this,this.mapup)};f.prototype.showimg=function(){this.img_bj=new Laya.Sprite;this.sp_lines=new Laya.Sprite;this.img_bj.addChild(this.sp_lines);this.role_sp=new Laya.Sprite;this.img_bj.addChild(this.role_sp);
this.role_sp.name="minimap_pos";this.role_sp.width=45;this.role_sp.height=63;var d=Animationmodule.playframe(!1,this.role_sp,"gameres/animation/minimap/",530,539,120,!0,!1);d&&(d.pos(-2,35),d.name="ani_pos");this.boxmap.addChild(this.img_bj);if(null!=this.img_url){var n="";1E4<=this.img_url?(n="mmap10",this.img_url-=1E4):999<=this.img_url?(n="mmap",this.img_url-=999):800<=this.img_url?(n="mmap1",this.img_url-=800):(n="mmap",this.img_url=this.img_url)}d=GameMission.getUrl(n,this.img_url);""!=d&&this.img_bj.loadImage(d,
0,0,0,0,Laya.Handler.create(this,function(){this.img_bj.on(Laya.Event.MOUSE_DOWN,this,this.mapdown);this.img_bj.on(Laya.Event.DOUBLE_CLICK,this,this.teleport);this.drawlin();this.drawdesc();this.img_bj.scale(497/this.img_bj.width,334/this.img_bj.height)}))};f.prototype.teleport=function(){var d=this.img_bj.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));d=new Laya.Point(Math.floor(d.x/(this.img_bj.width/Mapmodule.mapMaxX)),Math.floor(d.y/(this.img_bj.height/Mapmodule.mapMaxY)));
if(AStart.cur_matx&&AStart.cur_matx[0]&&d.y<AStart.cur_matx.length&&d.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[d.y][d.x]){Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null;var n=ObjectManage.findobject(playerID);n&&!n.is_die&&Sendmessage.sendSay("@\u4f20\u9001 "+d.x+" "+d.y)}};f.prototype.drawdesc=function(){for(var d=this.img_bj.width/Mapmodule.mapMaxX,n=this.img_bj.height/Mapmodule.mapMaxY,c=0;c<g_mapdesc.length;c++){var h=g_mapdesc[c];if(h&&5<h.length&&h[0]==Mapdata.cur_name&&
"0"==h[5]){var m=.1>this.img_bj.width/1300?.1:this.img_bj.width/1300,g=new Laya.Text;g.text=h[3];g.fontSize=34;g.scale(m,m);g.color="#"+Get3RGB(h[4].substr(1));g.stroke=2;g.bold=!0;g.strokeColor="#000000";m=parseInt(h[1])*d;h=parseInt(h[2])*n;g.pos(m-g.width/2,h-g.height/2);this.img_bj.addChild(g)}}};f.prototype.showlist=function(){var d=Mapdata.getNPClist();this.npc_list.itemRender=a;this.npc_list.repeatX=1;this.npc_list.repeatY=6;this.npc_list.spaceY=5;this.npc_list.vScrollBarSkin="";this.npc_list.selectEnable=
!0;this.npc_list.renderHandler=new Laya.Handler(this,this.updateitem);this.npc_list.selectHandler=new Laya.Handler(this,this.select);this.npc_list.array=d};f.prototype.updateitem=function(d,n){d.settxt(d.dataSource);b==n?(d.lb_txt.color="#FFC600",d.lb_txt.selected=!0):(d.lb_txt.color="#ffffff",d.lb_txt.selected=!1);"1"==d.dataSource.mapnps&&(g_mapnpc=new Laya.Point(d.dataSource.mapx,d.dataSource.mapy))};f.prototype.select=function(d){b=d;this.npc_list._selectedIndex=-1};f.prototype.close=function(){Laya.stage.off("keepGo",
this,this.keepGo);this.posMark=null;Laya.stage.off("close_minimap",this,this.close);Laya.stage.off("setRandomStone_labContent",this,this.setRandomStone_labContent);Laya.stage.off("setToCtiyStone_labContent",this,this.setToCtiyStone_labContent);b=-1;Laya.timer.clear(this,this.updatepos);this.img_bj.off(Laya.Event.MOUSE_DOWN,this,this.mapdown);this.img_bj.off(Laya.Event.MOUSE_UP,this,this.mapup);this.img_bj.off(Laya.Event.MOUSE_OUT,this,this.mapup);isOpen=!0;Animationmodule.removeAniname("ani_pos");
this.removeSelf()};f.prototype.onMouseDown=function(d){this.npc_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.boxmap.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=d.stageX,this.startpos.y=d.stageY,this.Big_mapimg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Big_mapimg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Big_mapimg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.Big_mapimg.off(Laya.Event.MOUSE_MOVE,this,
this.onMouseMove)};f.prototype.onMouseMove=function(d){this.Big_mapimg.x+=d.stageX-this.startpos.x;this.Big_mapimg.y+=d.stageY-this.startpos.y;this.startpos.x=d.stageX;this.startpos.y=d.stageY};f.prototype.initStone=function(){var d=this;GameUtil.loadImg(1010,"items",function(n){d.toCtiyStone_img._childs[0].skin=n});GameUtil.loadImg(1025,"items",function(n){d.randomStone_img._childs[0].skin=n});this.toCtiyStone_img.on(Laya.Event.CLICK,this,this.onCtiyStone);this.randomStone_img.on(Laya.Event.CLICK,
this,this.onRandomStone);this.setToCtiyStone_labContent(!0);this.setRandomStone_labContent()};f.prototype.setToCtiyStone_labContent=function(d){d||(this.posMark=null);d=GameUtil.getBagItemByDBName("\u76df\u91cd\u56de\u57ce\u77f3");this.toCtiyStone_lab.text=d?GameUtil.GetTypeCount(d):"0"};f.prototype.setRandomStone_labContent=function(){var d=GameUtil.getBagItemByDBName("\u968f\u673a\u4f20\u9001\u77f3");this.randomStone_lab.text=d?GameUtil.GetTypeCount(d):"0"};f.prototype.onCtiyStone=function(d){d=
GameUtil.getBagItemByDBName("\u76df\u91cd\u56de\u57ce\u77f3");if(0>=(d?GameUtil.GetTypeCount(d):0))GameUtil.onShowTip("\u4f20\u9001\u77f3\u6570\u91cf\u4e0d\u8db3");else Sendmessage.sendEat(0,d.MakeIndex,d.s.Name)};f.prototype.onRandomStone=function(d){d=GameUtil.getBagItemByDBName("\u968f\u673a\u4f20\u9001\u77f3");if(0>=(d?GameUtil.GetTypeCount(d):0))GameUtil.onShowTip("\u4f20\u9001\u77f3\u6570\u91cf\u4e0d\u8db3");else Fightmodule.leavefight(),Movemodule.stopmove(),Movemodule.end_point=null,this.posMark&&
(g_suijiStone=!0),Sendmessage.sendEat(0,d.MakeIndex,d.s.Name)};f.prototype.keepGo=function(){if(this.posMark)if(this.posMark.x==Objectcontrol.self_obj.grid.x&&this.posMark.y==Objectcontrol.self_obj.grid.y)this.posMark=null;else{var d=this.posMark;if(AStart.cur_matx&&AStart.cur_matx[0]&&d.y<AStart.cur_matx.length&&d.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[d.y][d.x]){Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null;var n=ObjectManage.findobject(playerID);n&&!n.is_die&&
(b=-1,this.npc_list.refresh(),Movemodule.autoMove(d))}}};return f}(minimapUI),MyShop=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var n=new Laya.Image;n.width=50;n.height=50;n.skin="gameres/ui/img_bag_bg.png";this.addChild(n);var c=new Laya.Image;n.addChild(c);this.setpos=function(h){c.visible=!0;c.skin=h;c.x=n.width/2-c.width/2;c.y=n.height/2-c.height/2;GameUtil.setTxtFixedPos(c,n.height)};this.settxt=function(h,m){m<g_MyShopList.length&&
null!=g_MyShopList[m]?(GameUtil.loadImg(g_MyShopList[m].Items.s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(n,g_MyShopList[m].Items),(17==g_MyShopList[m].Items.s.StdMode||18==g_MyShopList[m].Items.s.StdMode||41==g_MyShopList[m].Items.s.StdMode||40==g_MyShopList[m].Items.s.StdMode||42==g_MyShopList[m].Items.s.StdMode||31==g_MyShopList[m].Items.s.StdMode&&-1!=g_MyShopList[m].Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MyShopList[m].Items.s.Reserved&&0<g_MyShopList[m].Items.Dura?c.getChildByName("itemNums")||
(h=new Laya.Text,h.name="itemNums",h.color="#ffffff",h.align="right",h.width=40,h.text="x"+(g_MyShopList[m].Items.Dura+1),GameUtil.setCanAddTxtStroke(h),h.pos(-5,20),c.addChild(h),GameUtil.setTxtFixedPos(c,n.height)):0==g_MyShopList[m].Items.s.StdMode&&5==g_MyShopList[m].Items.s.Source&&0<g_MyShopList[m].Items.Dura&&!c.getChildByName("itemNums")&&(h=new Laya.Text,h.name="itemNums",h.color="#ffffff",h.align="right",h.width=40,h.text="x"+g_MyShopList[m].Items.Dura,GameUtil.setCanAddTxtStroke(h),h.pos(-10,
20),c.addChild(h),GameUtil.setTxtFixedPos(c,n.height))):(c.visible=!1,(h=n.getChildByName("effect"))&&h.removeSelf());n.skin="gameres/ui/img_bag_bg.png";d==m&&(n.skin="gameres/ui/img_bag_bg1.png")}}var b=new Laya.Point(0,0),d=-1;Laya.class(f,"MyShop",NewMyShopUI);Laya.class(a,"MyShopRender",Laya.Box);f.prototype.UpdateItem=function(n,c){n.settxt(n.dataSource,c)};f.prototype.init=function(){g_OpenMyShop=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_exit.on(Laya.Event.CLICK,this,this.Bait_exit);
this.but_begin.on(Laya.Event.CLICK,this,this.begin_Bait);this.txt_ShopName.text="";this.txt_Name.text="";this.txt_Gold.text="";var n=ObjectManage.findobject(playerID);n&&(n=n.sp.getChildByName("stallstxt"))&&(this.txt_ShopName.text=n.text);this.MyShop_bg.skin="gameres/png/myshopwin.png";g_OpenBag&&(n=GameUtil.InstanceOfMem(NewBagUI))&&(this.MyShop_bg.x=n.Bagimg_bg.x+n.Bagimg_bg.width-20,this.MyShop_bg.y=n.Bagimg_bg.y);this.MyShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Shop_List.repeatX=
5;this.Shop_List.repeatY=4;this.Shop_List.spaceX=1;this.Shop_List.spaceY=1;this.Shop_List.itemRender=a;this.Shop_List.selectEnable=!0;this.Shop_List.selectHandler=new Laya.Handler(this,this.Shop_Listselect);this.Shop_List.renderHandler=new Laya.Handler(this,this.UpdateItem);Laya.stage.on("Update_Shop_List",this,this.Shop_Refresh);n=[];for(var c=0;20>c;c++)n.push(c);this.Shop_List.array=n;d=-1;this.txt_Name.on(Laya.Event.FOCUS,this,this.OnFocus);this.txt_Name.on(Laya.Event.BLUR,this,this.OnBlur);this.txt_Gold.on(Laya.Event.FOCUS,
this,this.OnFocus);this.txt_Gold.on(Laya.Event.BLUR,this,this.OnBlur)};f.prototype.OnFocus=function(){cur_use_app&&(this.MyShop_bg.top=-220)};f.prototype.OnBlur=function(){cur_use_app&&(this.MyShop_bg.y=34)};f.prototype.Shop_Refresh=function(n){this.Shop_List.refresh()};f.prototype.begin_Bait=function(){""==this.txt_ShopName.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6446\u644a\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a\uff01\uff01\uff01",callfn:function(){}}]):15<this.txt_ShopName.text.length?
Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6446\u644a\u540d\u79f0\u6700\u591a15\u4e2a\u5b57\uff01\uff01",callfn:function(){}}]):(Sendmessage.StartBaiTan(this.txt_ShopName.text),this.removeSelf())};f.prototype.Shop_Listselect=function(n){this.txt_Name.text="";this.txt_Gold.text="";d=n;if(null!=g_MyShopList[n])switch(g_OpenIdx=5,g_MoveItems.Items=g_MyShopList[n].Items,this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items),this.txt_Name.text=g_MoveItems.Items.s.Name,g_MyShopList[n].nType){case 1:this.txt_Gold.text=
g_MyShopList[n].nGold+" "+g_GameCionNum.key;break;case 2:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_bindCionNum.key;break;case 3:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_GameGoldNum.key;break;case 4:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_bindGoldNum.key;break;case 5:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_GamePointNum.key;break;case 6:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_nGameDiamond.key;break;case 7:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_nGameGird.key;break;
case 8:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_gameGlory.key;break;case 9:this.txt_Gold.text=g_MyShopList[n].nGold+" "+g_gamePopNum.key}this.Shop_List._selectedIndex=-1};f.prototype.onMouseDown=function(n){b.x=n.stageX;b.y=n.stageY;this.MyShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.MyShop_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.MyShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseUp=function(){this.MyShop_bg.off(Laya.Event.MOUSE_MOVE,this,
this.onMouseMove)};f.prototype.onMouseMove=function(n){this.MyShop_bg.x+=n.stageX-b.x;this.MyShop_bg.y+=n.stageY-b.y;b.x=n.stageX;b.y=n.stageY};f.prototype.close=function(){Laya.stage.off("Update_Shop_List",this,this.Shop_Refresh);g_OpenMyShop=!1;this.removeSelf()};f.prototype.Bait_exit=function(){Laya.stage.off("Update_Shop_List",this,this.Shop_Refresh);g_OpenMyShop=!1;Sendmessage.StopBaiTan();this.removeSelf()};return f}(NewMyShopUI),MyShopMsg=function(e){function f(){f.__super.call(this);this.init()}
var a=new Laya.Point(0,0);Laya.class(f,"MyShopMsg",MyShopMsgUI);f.prototype.init=function(){this.but_baitan.on(Laya.Event.CLICK,this,this.baitan);this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_GameGold.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_Gold.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_GameGird.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_GameDiamond.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_bindCionNum.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_bindGoldNum.on(Laya.Event.CLICK,
this,this.onTypeGold);this.but_gamePointNum.on(Laya.Event.CLICK,this,this.onTypeGold);this.txt_GoldCount.on(Laya.Event.FOCUS,this,this.OnFocus);this.txt_GoldCount.on(Laya.Event.BLUR,this,this.OnBlur);this.MyShopMsg_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.posList=[];this.but_GameGold.selected=!0;this.MyShopMsg_bg.skin="gameres/png/myshopmsg.png";g_GameGoldNum&&(this.goldname1.text=g_GameGoldNum.key);g_GameCionNum&&(this.goldname2.text=g_GameCionNum.key);g_nGameGird&&(this.goldname3.text=
g_nGameGird.key);g_nGameDiamond&&(this.goldname4.text=g_nGameDiamond.key);g_bindCionNum&&(this.goldname5.text=g_bindCionNum.key);g_bindGoldNum&&(this.goldname6.text=g_bindGoldNum.key);g_GamePointNum&&(this.goldname7.text=g_GamePointNum.key);this.setCurrencyShow(g_serverconfigtxt.currencyShowList,this.btns_box._childs);GameUtil.showOperationBtnsSort(this.posList,this.btns_box._childs)};f.prototype.setCurrencyShow=function(b,d){if(b&&""!=b){var n=d.length;b=b.split(",");for(var c=0;c<n;c++)d[c].visible=
"1"==b[c]}};f.prototype.OnFocus=function(){cur_use_app&&(this.MyShopMsg_bg.top=0)};f.prototype.OnBlur=function(){cur_use_app&&(this.MyShopMsg_bg.y=122)};f.prototype.onTypeGold=function(b){this.but_GameGold.selected=!1;this.but_Gold.selected=!1;this.but_GameGird.selected=!1;this.but_GameDiamond.selected=!1;this.but_bindCionNum.selected=!1;this.but_bindGoldNum.selected=!1;this.but_gamePointNum.selected=!1;b.target.selected=!0};f.prototype.baitan=function(){g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=
null;if(null!=g_WaitItems.Items){var b=parseInt(this.txt_GoldCount.text);if(0<b){var d=this.getGoldType();g_WaitItems.nGold=b;g_WaitItems.nType=d;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex);Sendmessage.AddBaiTanItem(g_WaitItems.Items.MakeIndex,b,d)}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u8f93\u5165\u6446\u644a\u51fa\u552e\u4ef7\u683c\uff01",callfn:function(){}}])}this.removeSelf()};f.prototype.getGoldType=function(){if(this.but_Gold.selected)return 1;
if(this.but_bindCionNum.selected)return 2;if(this.but_GameGold.selected)return 3;if(this.but_bindGoldNum.selected)return 4;if(this.but_gamePointNum.selected)return 5;if(this.but_GameDiamond.selected)return 6;if(this.but_GameGird.selected)return 7};f.prototype.onMouseDown=function(b){this.txt_GoldCount.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(a.x=b.stageX,a.y=b.stageY,this.MyShopMsg_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.MyShopMsg_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),
this.MyShopMsg_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.MyShopMsg_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(b){this.txt_GoldCount.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.MyShopMsg_bg.x+=b.stageX-a.x,this.MyShopMsg_bg.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};f.prototype.close=function(){this.removeSelf()};return f}(MyShopMsgUI),MyStoreWin=function(e){function f(){f.__super.call(this);Storetype=
-1;this.init()}function a(){a.__super.call(this);this.ItemZero=new MyStoreItemUI;this.addChild(this.ItemZero);this.ItemZero.ItemBack.on(Laya.Event.CLICK,this,function(){var n=this.dataSource.Item.MakeIndex,c=this.dataSource.Item.s.Name;n&&""!=n&&Sendmessage.SendMoveMyShopItem(n,0,1,c)});this.ItemZero.ItemRetrieve.on(Laya.Event.CLICK,this,function(){var n=this.dataSource.Item.MakeIndex,c=this.dataSource.Item.s.Name;n&&""!=n&&Sendmessage.SendMoveMyShopItem(n,0,2,c)});this.ZeroShowItem=function(n,c){c=
GameUtil.ShowMoneyType(n.btMoneyType);var h=GameUtil.ShowbtItemType(n.btItemType);GameUtil.ShowItemNum(n.Item,this.ItemZero.ItemImg,23.5,18.5);this.ItemZero.ItemName.text=n.Item.s.Name;this.ItemZero.ItemPrice.text=n.Item.s.Price+c;this.ItemZero.ItemType.text=h;this.ItemZero.ItemTime.text=n.dCreateDate;this.ItemZero.ItemBack.text="\u8fd4\u56de\u4ed3\u5e93";this.ItemZero.ItemRetrieve.text="\u53d6\u56de"}}function b(){b.__super.call(this);this.ItemOne=new StoreSoldItemUI;this.addChild(this.ItemOne);
this.ItemOne.ItemRemove.on(Laya.Event.CLICK,this,function(){var n=this.dataSource.Item.MakeIndex;n&&""!=n&&Sendmessage.SendDeleteSelledItem(n)});this.OneShowItem=function(n,c){c=GameUtil.ShowMoneyType(n.btMoneyType);GameUtil.ShowItemNum(n.Item,this.ItemOne.ItemImg,23.5,18.5);this.ItemOne.ItemName.text=n.Item.s.Name;this.ItemOne.ItemSoldName.text=n.sBuyName;this.ItemOne.ItemPrice.text=n.Item.s.Price+c;this.ItemOne.ItemTime.text=n.dCreateDate;this.ItemOne.ItemRemove.text=1==n.boGetMoney?"\u5220\u9664":
"\u53d6\u6b3e"}}function d(){d.__super.call(this);this.ItemTwo=new StoreStorageItemUI;this.addChild(this.ItemTwo);this.ItemTwo.ItemBack.on(Laya.Event.CLICK,this,function(){var n=this.dataSource.Item.MakeIndex,c=this.dataSource.Item.s.Name;n&&""!=n&&Sendmessage.SendMoveMyShopItem(n,1,0,c)});this.ItemTwo.ItemRetrieve.on(Laya.Event.CLICK,this,function(){var n=this.dataSource.Item.MakeIndex,c=this.dataSource.Item.s.Name;n&&""!=n&&Sendmessage.SendMoveMyShopItem(n,1,2,c)});this.TwoShowItem=function(n,c){c=
GameUtil.ShowMoneyType(n.btMoneyType);var h=GameUtil.ShowbtItemType(n.btItemType);GameUtil.ShowItemNum(n.Item,this.ItemTwo.ItemImg,23.5,18.5);this.ItemTwo.ItemName.text=n.Item.s.Name;this.ItemTwo.ItemPrice.text=n.Item.s.Price+c;this.ItemTwo.ItemType.text=h;this.ItemTwo.ItemTime.text=n.dCreateDate;this.ItemTwo.ItemBack.text="\u653e\u5165\u5e97\u94fa";this.ItemTwo.ItemRetrieve.text="\u53d6\u56de"}}Laya.class(f,"MyStoreWin",MyStoreUI);e=f.prototype;Laya.class(a,"ShowBoxZero",Laya.Box);Laya.class(b,"ShowBoxOne",
Laya.Box);Laya.class(d,"ShowBoxTwo",Laya.Box);e.init=function(){Storetype=0;var n=["\u4e0d\u9650"],c=[];this.box_0.visible=!0;this.box_1.visible=!1;this.box_2.visible=!1;this.box_3.visible=!1;this.box_4.visible=!1;this.startpos=new Laya.Point;this.btn_close.on(Laya.Event.CLICK,this,this.BtnClose);this.btn_information.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sell.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sold.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_mydepot.on(Laya.Event.CLICK,
this,this.BtnClick);this.btn_diary.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_search.on(Laya.Event.CLICK,this,this.BtnClick);this.img_item.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_baitan.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_first.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_previous.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_next.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_last.on(Laya.Event.CLICK,this,this.BtnClick);
this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.input_search.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_search.on(Laya.Event.BLUR,this,this.OnBlur);this.price.on(Laya.Event.FOCUS,this,this.OnFocus);this.price.on(Laya.Event.BLUR,this,this.OnBlur);this.price_low.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_low.on(Laya.Event.BLUR,this,this.OnBlur);this.price_high.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_high.on(Laya.Event.BLUR,this,this.OnBlur);Laya.stage.on("show_store_message",
this,this.ShowStoreMessage);Laya.stage.on("show_store_selling",this,this.ShowSellingItems);Laya.stage.on("game_showStorePage",this,this.ShowPage);Laya.stage.on("show_store_sold",this,this.ShowSelledItems);Laya.stage.on("show_store_storage",this,this.ShowStorageItems);Laya.stage.on("delete_ItemImage",this,this.DeleteItemImage);for(var h=0;h<g_GameMoneyType.length;h++)g_GameMoneyType[h]&&""!=g_GameMoneyType[h]&&(n.push(g_GameMoneyType[h]),c.push(g_GameMoneyType[h]));this.type.labels=n.toString();this.type.selectedIndex=
0;this.type1.labels=c.toString();this.type1.selectedIndex=0;this.ShowBox_0();this.ShowBox_1();this.ShowBox_2()};e.OnFocus=function(){cur_use_app&&(this.img_bg.top=-280)};e.OnBlur=function(){cur_use_app&&(this.img_bg.y=12)};e.ShowBox_0=function(){this.ListItem.repeatX=1;this.ListItem.repeatY=5;this.ListItem.itemRender=a;this.ListItem.selectEnable=!0;this.ListItem.selectHandler=new Laya.Handler(this,this.ZeroSelected);this.ListItem.renderHandler=new Laya.Handler(this,this.ZeroUpdataItem)};e.ShowSellingItems=
function(n){this.ListItem.array=n;this.ZeroSelected=-1};e.ZeroSelected=function(n){this.ZeroSelected=n};e.ZeroUpdataItem=function(n,c){-1==this.ZeroSelected&&n.ZeroShowItem(n.dataSource,c);this.ZeroSelected==c?(n.ItemZero.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,SelectedStoreItem=n.dataSource.Item,GameUtil.ShowItemNum(SelectedStoreItem,this.img_item,34,34),this.btn_add.label="\u4fee\u6539",AddStoreItem=null,n.dataSource&&GameUtil.NewShowItemsInf(n.dataSource.Item,null,this.img_bg.x)):
n.ItemZero.img_bg.skin=""};e.ShowBox_1=function(){this.ListOne.repeatX=1;this.ListOne.repeatY=5;this.ListOne.itemRender=b;this.ListOne.selectEnable=!0;this.ListOne.selectHandler=new Laya.Handler(this,this.OneSelected);this.ListOne.renderHandler=new Laya.Handler(this,this.OneUpDataItem)};e.ShowSelledItems=function(n){this.ListOne.array=n;this.OneSelected=-1};e.OneSelected=function(n){this.OneSelected=n};e.OneUpDataItem=function(n,c){-1==this.OneSelected&&n.OneShowItem(n.dataSource,c);this.OneSelected==
c?(n.ItemOne.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,n.dataSource&&GameUtil.NewShowItemsInf(n.dataSource.Item,null,this.img_bg.x)):n.ItemOne.img_bg.skin=""};e.ShowBox_2=function(){this.ListTwo.repeatX=1;this.ListTwo.repeatY=5;this.ListTwo.itemRender=d;this.ListTwo.selectEnable=!0;this.ListTwo.selectHandler=new Laya.Handler(this,this.TwoSelected);this.ListTwo.renderHandler=new Laya.Handler(this,this.TwoUpDataItem)};e.ShowStorageItems=function(n){this.ListTwo.array=n;this.TwoSelected=
-1};e.TwoSelected=function(n){this.TwoSelected=n};e.TwoUpDataItem=function(n,c){-1==this.TwoSelected&&n.TwoShowItem(n.dataSource,c);this.TwoSelected==c?(n.ItemTwo.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,SelectedStoreItem=n.dataSource.Item,GameUtil.ShowItemNum(SelectedStoreItem,this.img_item,34,34),this.btn_add.label="\u4fee\u6539",AddStoreItem=null,n.dataSource&&GameUtil.NewShowItemsInf(n.dataSource.Item,null,this.img_bg.x)):n.ItemTwo.img_bg.skin=""};e.BtnClick=function(n){n=
n.target.name;switch(parseInt(n)){case 0:Storetype=0;this.position.selectedIndex=0;this.box_0.visible=!0;this.box_1.visible=!1;this.box_2.visible=!1;this.box_3.visible=!1;this.box_4.visible=!1;this.btn_sell.selected=!0;this.btn_sold.selected=!1;this.btn_mydepot.selected=!1;this.btn_diary.selected=!1;this.btn_information.selected=!1;break;case 1:Storetype=1;this.position.selectedIndex=1;this.box_0.visible=!1;this.box_1.visible=!0;this.box_2.visible=!1;this.box_3.visible=!1;this.box_4.visible=!1;this.btn_sell.selected=
!1;this.btn_sold.selected=!0;this.btn_mydepot.selected=!1;this.btn_diary.selected=!1;this.btn_information.selected=!1;break;case 2:Storetype=2;this.position.selectedIndex=2;this.box_0.visible=!1;this.box_1.visible=!1;this.box_2.visible=!0;this.box_3.visible=!1;this.box_4.visible=!1;this.btn_sell.selected=!1;this.btn_sold.selected=!1;this.btn_mydepot.selected=!0;this.btn_diary.selected=!1;this.btn_information.selected=!1;break;case 3:Storetype=-1;this.box_0.visible=!1;this.box_1.visible=!1;this.box_2.visible=
!1;this.box_3.visible=!0;this.box_4.visible=!1;this.btn_sell.selected=!1;this.btn_sold.selected=!1;this.btn_mydepot.selected=!1;this.btn_diary.selected=!0;this.btn_information.selected=!1;break;case 4:Storetype=-1,this.box_0.visible=!1,this.box_1.visible=!1,this.box_2.visible=!1,this.box_3.visible=!1,this.box_4.visible=!0,this.btn_information.selected=!0,this.btn_sell.selected=!1,this.btn_sold.selected=!1,this.btn_mydepot.selected=!1,this.btn_diary.selected=!1}switch(n){case "btn_first":0<g_StoreItemIndex[Storetype]&&
-1!=Storetype&&Sendmessage.GetMyShopItems(0,Storetype);break;case "btn_previous":0<g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(g_StoreItemIndex[Storetype]-5,Storetype);break;case "btn_next":5<g_StoreItemNum[Storetype]-g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(g_StoreItemIndex[Storetype]+5,Storetype);break;case "btn_last":5<g_StoreItemNum[Storetype]-g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(5*(this.MaxPage-1),Storetype);
break;case "btn_search":var c=GameUtil.ShowSelectedIdx(this.type.selectedLabel);n=this.category.selectedIndex;var h=this.sort.selectedIndex,m=parseInt(this.price_low.text),g=parseInt(this.price_high.text),l=this.input_search.text;0==Storetype?Sendmessage.QueryMyShopSellingItems(n,c,h,m,g,l):1==Storetype?Sendmessage.QueryMyShopSelledItems(n,c,h,m,g,l):2==Storetype&&Sendmessage.QueryMyshopStorageItems(n,c,h,m,g,l);break;case "img_item":GameApi.ShowScreen(!0,null,11);break;case "btn_add":c=GameUtil.ShowSelectedIdx(this.type1.selectedLabel);
AddStoreItem?(h=AddStoreItem.MakeIndex,m=this.ShopType.selectedIndex,n=this.type2.selectedIndex,g=parseInt(this.price.text),l=AddStoreItem.s.Name,Sendmessage.SendAddToMyShop(h,m,n,c,g,l)):SelectedStoreItem&&!AddStoreItem&&(h=SelectedStoreItem.MakeIndex,m=this.ShopType.selectedIndex,n=this.type2.selectedIndex,g=parseInt(this.price.text),l=SelectedStoreItem.s.Name,Sendmessage.SendChangeMyShopItem(h,m,n,c,g,l));break;case "btn_baitan":Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:"\u8f93\u5165\u5546\u94fa\u4fe1\u606f",
callfn:function(p){Sendmessage.SendShopName(p)}}])}this.ListItem.selectedIndex=-1;this.ListOne.selectedIndex=-1;this.ListTwo.selectedIndex=-1};e.ShowPage=function(n,c,h){this.MaxPage=Math.ceil(n/5);this.CurPage=Math.ceil(c/5)+1;0==n&&(this.CurPage=0);switch(h){case 0:this.text_num0.text="\u6b63\u5728\u51fa\u552e"+this.CurPage+"/"+this.MaxPage;break;case 1:this.text_num1.text="\u5df2\u7ecf\u51fa\u552e"+this.CurPage+"/"+this.MaxPage;break;case 2:this.text_num2.text="\u6211\u7684\u4ed3\u5e93"+this.CurPage+
"/"+this.MaxPage}};e.ShowStoreMessage=function(n){n&&(this.txt_storeName.text="\u5e97\u94fa\u540d\u79f0\uff1a"+n.sShopName,this.txt_storeTime.text="\u5f00\u4e1a\u65f6\u95f4\uff1a"+n.dCreateDate,this.txt_storeSelling.text="\u6b63\u5728\u51fa\u552e\uff1a"+n.nSellingItemCount,this.txt_storeSelled.text="\u5df2\u7ecf\u51fa\u552e\uff1a"+n.nSelledItemCount,this.txt_storeStorage.text="\u6211\u7684\u4ed3\u5e93\uff1a"+n.nStorageItemCount)};e.DeleteItemImage=function(){this.img_item._childs[0]&&this.img_item.removeChild(this.img_item._childs[0])};
e.BtnClose=function(){Laya.stage.off("show_store_message",this.ShowStoreMessage);Laya.stage.off("show_store_selling",this,this.ShowSellingItems);Laya.stage.off("game_showStorePage",this,this.ShowPage);Laya.stage.off("show_store_sold",this,this.ShowSelledItems);Laya.stage.off("show_store_storage",this,this.ShowStorageItems);Laya.stage.off("delete_ItemImage",this,this.DeleteItemImage);this.removeSelf()};e.OnMouseDown=function(n){this.startpos.x=n.stageX;this.startpos.y=n.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,
this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(n){this.img_bg.x+=n.stageX-this.startpos.x;this.img_bg.y+=n.stageY-this.startpos.y;this.startpos.x=n.stageX;this.startpos.y=n.stageY};e.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};return f}(MyStoreUI),NewBag=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);
this.size(48,48);var h=new Laya.Image;h.width=50;h.height=50;this.addChild(h);var m=new Laya.Image;h.addChild(m);this.MakeIndex=0;this.settxt=function(g,l){if(l<g_BagItemsList.length&&null!=g_BagItemsList[l]&&this.MakeIndex!=g_BagItemsList[l].MakeIndex)this.MakeIndex=g_BagItemsList[l].MakeIndex,GameUtil.loadImg(g_BagItemsList[l].s.Looks,"items",function(q){m.visible=!0;m.skin=q;m.x=h.width/2-m.width/2;m.y=h.height/2-m.height/2;m._style&&(m.blendMode="overlay");GameUtil.ShowItemeffect(h,g_BagItemsList[l])}),
(g=h.getChildByName("effect"))&&Animationmodule.removeAni(g);else if(null==g_BagItemsList[l]){m.visible=!1;this.MakeIndex=0;(g=h.getChildByName("effect"))&&g.removeSelf();var p=h.getChildByName("score");p&&(g_ItemScoreRecord.boStartArrow?Animationmodule.removeAni(p):p.removeSelf())}l<g_BagItemsList.length&&null!=g_BagItemsList[l]&&(g=g_BagItemsList[l].s.StdMode,m.removeChildren(),(17==g||18==g||41==g||40==g||42==g||31==g&&-1!=g_BagItemsList[l].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_BagItemsList[l].s.Reserved&&
0<g_BagItemsList[l].Dura?(p=new Laya.Text,p.color="#ffffff",p.align="right",p.width=40,p.text="x"+(g_BagItemsList[l].Dura+1),GameUtil.setCanAddTxtStroke(p),m.addChild(p),GameUtil.setTxtFixedPos(m,h.width)):0==g&&5==g_BagItemsList[l].s.Source&&0<g_BagItemsList[l].Dura&&(p=new Laya.Text,p.color="#ffffff",p.align="right",p.width=40,p.text="x"+g_BagItemsList[l].Dura,GameUtil.setCanAddTxtStroke(p),m.addChild(p),GameUtil.setTxtFixedPos(m,h.width)),g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boBagShow&&
((p=h.getChildByName("score"))&&Animationmodule.removeAni(p),(5==g||6==g||10==g||11==g||15==g||16==g||19<=g&&24>=g||25==g&&1==g_ClientConfig.boItem25Value||26<=g&&30>=g||48==g||51==g||53==g||62<=g&&69>=g||78==g||75==g||76==g||77==g||79<=g&&89>=g||178==g)&&GameUtil.scoreComparison(g_BagItemsList[l])&&(p=h.getChildByName("score"),!p&&(g=Animationmodule.playframe(!1,h,"gameres/animation/equipment_comparison/","00000","00003",280,!0,!1)))))&&(g.pos(35,28),g.zOrder=99999,g.name="score");l>GameUtil.MaxBagItems()-
1?h.skin="gameres/ui/lock_img.png":h.skin="gameres/ui/img_bag_bg.png";b==l&&l<=GameUtil.MaxBagItems()-1&&(h.skin="gameres/ui/img_bag_bg1.png")}}new Laya.Point(0,0);var b=-1,d=[],n,c=0;Laya.class(f,"NewBag",NewBagUI);Laya.class(a,"NewBagRender",Laya.Box);f.prototype.UpdateItem=function(h,m){var g={itemsData:g_BagItemsList,selectIndex:b,hasBgFrame:!0,maxUnlockCount:GameUtil.MaxBagItems()-1,itemType:DragItem.dragItemType.bagItem};h.showItemUI(g,m,this.noUpdate)};f.prototype.init=function(){(cur_use_app||
2==g_Termial)&&Laya.stage.offAll("bagCheckDragItem");this.Bagimg_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Bag_List.repeatX=10;this.Bag_List.repeatY=5;this.Bag_List.spaceX=-1;this.Bag_List.spaceY=-1;DragItem.testType=DragItem.dragItemType.bagItem;this.Bag_List.itemRender=DragItem;this.Bag_List.selectEnable=!0;this.Bag_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.but_re.width=83;this.but_re.label="\u6574\u7406\u80cc\u5305";this.but_re.x-=16;this.but_re.on(Laya.Event.CLICK,
this,this.onQueryBag);Laya.stage.on("Show_Bag_Item_ico",this,this.Bag_Refresh);Laya.stage.on("Update_Bag",this,this.UpdateGold);this.startpos=new Laya.Point;this.RandomPOS=!0;for(var h=[],m=maxPackSizeBackup?maxPackSizeBackup:48,g=0;g<m;g++)h.push(g);this.Bag_List.array=h;this.Bag_List.totalPage=Math.ceil(this.Bag_List.array.length/50);for(g=0;g<this.Bag_List._cells.length;g++)this.Bag_List._cells[g].on(Laya.Event.CLICK,this,this.Bag_Listselect);this.customBtn();this.customGold();this.UpdateGold();
this.addTabClickEvent();g_OpenBag=!0};f.prototype.addTabClickEvent=function(){for(var h=0;h<this.tab_box._childs.length;h++){var m=this.tab_box._childs[h];m.visible=0==h&&h==this.Bag_List.totalPage-1?!1:h<=this.Bag_List.totalPage-1;m.on(Laya.Event.CLICK,this,this.onChangePage,[h]);0==h&&(m.selected=!0)}};f.prototype.onChangePage=function(h,m){this.tab_box._childs[h].visible&&(this.Bag_List.page=h);for(m=0;m<this.tab_box._childs.length;m++)this.tab_box._childs[m].selected=m==h};f.prototype.ChangeMoney=
function(){Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8bf7\u8f93\u5165\u91d1\u5e01\u6570\u91cf\uff1f",ipttype:"string",callfn:function(h){0<parseInt(h)?Sendmessage.sendDropGold(parseInt(h)):Sendmessage.sendDropGold(0)}}])};f.prototype.customBtn=function(){for(var h=0;h<g_customBtn.length;h++)if(0!=g_customBtn[h].boOpen){var m=new Laya.Button;m.skin="gameres/ui/bag_btnBg"+h+".png";m.stateNum=2;m.label=g_customBtn[h].sName;m.labelColors=Get2RGB(g_customBtn[h].nColor);m.labelSize=g_customBtn[h].nSize;
m.labelStroke=2;m.labelStrokeColor="#000000";m.width=83;m.height=39;this.Bagimg_bg.addChild(m);m.x=g_customBtn[h].nX;m.y=g_customBtn[h].nY;m.on(Laya.Event.CLICK,this,function(g){Sendmessage.SendQFCMD(g)},[g_customBtn[h].sCmd])}};f.prototype.Bag_Refresh=function(h){0!=this.visible&&(this.Bag_List.refresh(),Laya.stage.event("updateBagListOnMyShelves"))};f.prototype.Bag_Listselect=function(h){var m=h.currentTarget._dataSource;if(g_fastaccess&&null!=m&&g_BagItemsList[m])g_WaitItems.Items=g_BagItemsList[m],
h=3,1!=g_StoreType&&(h=4),0<=g_StoreCount&&g_StoreCount<g_StoreMaxCount?(Sendmessage.DepotOrBagItems2(g_WaitItems.Items.MakeIndex,h),GameUtil.isMultiple(g_WaitItems.Items)?Laya.stage.event("item_hint",[g_WaitItems.Items,-g_WaitItems.Items.Dura]):Laya.stage.event("item_hint",[g_WaitItems.Items,-1]),GameUtil.AddStoreItems(g_WaitItems.Items),GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_StoreCount+=1,Laya.stage.event("Show_Bag_Item_ico"),Laya.stage.event("ShowDrug_Items"),
Laya.stage.event("Drug_Item_ico"),Laya.stage.event("Drug_Set_Items",[g_DrugButNumber])):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4ed3\u5e93\u5df2\u6ee1\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5b58\u50a8\uff01\uff01\uff01",callfn:function(){}}]),g_WaitItems.Items=null;else{h=Laya.Browser.now();if(200>h-c){this.noUpdate=!1;clearTimeout(n);if(null!=m&&g_BagItemsList[m]){if(GameUtil.isConsumableItem(g_BagItemsList[m])){if(0<this.lastDoubleClickTime&&1E3>Laya.Browser.now()-this.lastDoubleClickTime)return;
this.lastDoubleClickTime=Laya.Browser.now()}g_WaitItems.Items=g_BagItemsList[m];m=g_WaitItems.Items.s.StdMode;if(0==m||1==m||2==m||3==m||211==m||31==m||40==m||49==m||25==m&&8==g_WaitItems.Items.s.Source)211!=m&&GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),25==m&&8==g_WaitItems.Items.s.Source?Sendmessage.blessbottle(1,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name):(Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name),14<g_WaitItems.Items.s.Shape&&25>g_WaitItems.Items.s.Shape&&
(g_boxid=g_WaitItems.Items.MakeIndex)),1>=g_WaitItems.Items.Dura&&Laya.stage.event("ShowDrug_Items");else if(41==m)0<g_WaitItems.Items.Dura&&Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u62c6\u5206\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:function(g){0<parseInt(g)&&(GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.blessbottle(parseInt(g),g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))}}]);else if(4==m)Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u5b66\u4e60 : \u3010 "+
g_WaitItems.Items.s.Name+" \u3011 \uff1f",callfn:function(){g_WaitItems.Items&&(GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))}}]);else{m=GameUtil.GetItemType(g_WaitItems.Items.s);if(52==m){g_WaitItems.Index=m;Sendmessage.sendTakeOnItem(m,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);return}6==m&&null!=g_UserItemList[6]?null!=g_UserItemList[5]?(m=this.RandomPOS?6:5,this.RandomPOS=!this.RandomPOS):m=5:7==m&&null!=
g_UserItemList[7]?null!=g_UserItemList[8]?(m=this.RandomPOS?7:8,this.RandomPOS=!this.RandomPOS):m=8:23==m&&null!=g_UserItemList[23]?null!=g_UserItemList[22]?(m=this.RandomPOS?23:22,this.RandomPOS=!this.RandomPOS):m=22:24==m&&null!=g_UserItemList[24]&&(null!=g_UserItemList[25]?(m=this.RandomPOS?24:25,this.RandomPOS=!this.RandomPOS):m=25);g_WaitItems.Index=m;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Sendmessage.TakeOnItem2(g_WaitItems.Items,m);this.Bag_Refresh()}}(m=GameUtil.InstanceOfMem(NewItemInfoUI))&&
m.close()}else b=m,clearTimeout(n),this.noUpdate=!0,n=setTimeout(function(){this.noUpdate=!1;g_DrugButNumber=-1;g_nBagIdx=b;if(null!=g_BagItemsList[g_nBagIdx]){g_OpenIdx=0;g_DrugButNumber=-1;g_SelectIndex=GameUtil.GetItemType(g_BagItemsList[g_nBagIdx].s);if(207==g_SelectIndex||208==g_SelectIndex||209==g_SelectIndex)g_SelectIndex=GameUtil.GetItemTypeEx(g_BagItemsList[g_nBagIdx].s);g_MoveItems.Items=g_BagItemsList[g_nBagIdx];g_MoveItems.Index=-1;GameUtil.NewShowItemsInf(g_MoveItems.Items,null,Laya.stage.width/
2)}else GameUtil.NewShowItemsClose();g_ClientConfig.boExtendDB&&g_nBagIdx>GameUtil.MaxBagItems()-1&&g_nBagIdx<GameUtil.LimitMaxBagItems()&&Sendmessage.sendLockedBagSlot()}.bind(this),200),this.Bag_List._selectedIndex=-1;c=h}};f.prototype.getNposByEquipScoreComparison=function(h,m,g,l){return GameApi.GetItemScore(m)>GameApi.GetItemScore(h)?g:l};f.prototype.customGold=function(){for(var h=0;h<g_gameGold.length;h++)if(0!=g_gameGold[h].boOpen&&g_gameGold[h]&&g_gameGold[h].boOpen&&eval(g_gameGold[h].sVarName)){var m=
this.Bagimg_bg.getChildByName("img"+h);m||(m=new Laya.Image,this.Bagimg_bg.addChild(m));m.skin=g_gameGold[h].sShowUI;m.x=g_gameGold[h].nX;m.y=g_gameGold[h].nY;m.name="img"+h;var g=this.Bagimg_bg.getChildByName("kuang"+h);g||(g=new Laya.Label,this.Bagimg_bg.addChild(g));g.mouseEnabled=!1;g.overflow="visible";g.valign="middle";g.font="SimSun";g.x=m.x+m.width;g.y=m.y;g.width=162;g.height=m.height;g.text=g_gameGold[h].sGoldName+"\uff1a"+eval(g_gameGold[h].sVarName).value;g.fontSize=16;g.align="left";
g.color="#f6f1f1";g.name="kuang"+h;g.wordWrap="false";d.push({key:g.name,name:g_gameGold[h].sGoldName,value:eval(g_gameGold[h].sVarName)});if("g_GameCionNum"==g_gameGold[h].sVarName&&m)m.on(Laya.Event.CLICK,this,this.ChangeMoney)}};f.prototype.UpdateGold=function(){for(var h=0;h<d.length;h++){var m=d[h],g=this.Bagimg_bg.getChildByName(m.key);g&&m&&g.name==m.key&&(g.text=m.name+":"+m.value.value)}if(h=ObjectManage.GetAttr(playerID))this.txt_wsize.text="\u8d1f\u91cd\uff1a"+h.Weight+" / "+h.MaxWeight};
f.prototype.onQueryBag=function(){Sendmessage.QueryBagItems();CanUserItem=!1;setTimeout(function(){CanUserItem=!0},500)};f.prototype.onMouseDown=function(h){"but_Close"==h.target.name?this.close():this.Bag_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=h.stageX,this.startpos.y=h.stageY,this.Bagimg_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Bagimg_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Bagimg_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=
function(){this.Bagimg_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(h){this.Bagimg_bg.x+=h.stageX-this.startpos.x;this.Bagimg_bg.y+=h.stageY-this.startpos.y;this.startpos.x=h.stageX;this.startpos.y=h.stageY};f.prototype.close=function(){this.visible=!1};return f}(NewBagUI),NewHeroBag=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var d=new Laya.Image;d.width=50;d.height=50;this.addChild(d);var n=
new Laya.Image;d.addChild(n);this.setpos=function(c){n.visible=!0;n.skin=c;n.x=d.width/2-n.width/2;n.y=d.height/2-n.height/2;n._style&&(n.blendMode="overlay")};this.settxt=function(c,h){h<g_HeroBagItemsList.length&&null!=g_HeroBagItemsList[h]?(GameUtil.loadImg(g_HeroBagItemsList[h].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(d,g_HeroBagItemsList[h]),n.removeChildren(),(17==g_HeroBagItemsList[h].s.StdMode||18==g_HeroBagItemsList[h].s.StdMode||41==g_HeroBagItemsList[h].s.StdMode||40==g_HeroBagItemsList[h].s.StdMode||
42==g_HeroBagItemsList[h].s.StdMode||31==g_HeroBagItemsList[h].s.StdMode&&-1!=g_HeroBagItemsList[h].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_HeroBagItemsList[h].s.Reserved&&0<g_HeroBagItemsList[h].Dura&&(c=new Laya.Text,c.color="#ffffff",c.align="right",c.width=40,c.text="x"+(g_HeroBagItemsList[h].Dura+1),c.pos(-5,20),n.addChild(c))):(n.visible=!1,(c=d.getChildByName("effect"))&&c.removeSelf());h>g_HeroBagNum-1?d.skin="gameres/ui/lock_img.png":d.skin="gameres/ui/img_bag_bg.png";b==h&&h<=g_HeroBagNum-
1&&(d.skin="gameres/ui/img_bag_bg1.png")}}new Laya.Point(0,0);var b=-1;Laya.class(f,"NewHeroBag",NewHeroBagUI);Laya.class(a,"NewHeroBagRender",Laya.Box);f.prototype.UpdateItem=function(d,n){d.settxt(d.dataSource,n)};f.prototype.init=function(){g_OpenHeroBag=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.item_bg.ItemsList=[];this.HeroBag_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.HeroBag_List.repeatX=5;this.HeroBag_List.repeatY=10;this.HeroBag_List.spaceX=1;this.HeroBag_List.spaceY=
1;this.HeroBag_List.vScrollBarSkin="";this.HeroBag_List.itemRender=a;this.HeroBag_List.selectEnable=!0;this.HeroBag_List.selectHandler=new Laya.Handler(this,this.HeroBag_Listselect);this.HeroBag_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.but_re.on(Laya.Event.CLICK,this,this.onQueryHeroBag);Laya.stage.on("Show_HeroBag_Item_ico",this,this.HeroBag_Refresh);this.startpos=new Laya.Point;for(var d=[],n=0;48>n;n++)d.push(n);this.HeroBag_List.array=d;g_OpenHeroBag=!0};f.prototype.HeroBag_Refresh=
function(d){this.HeroBag_List.refresh()};f.prototype.HeroBag_Listselect=function(d){b=d;g_DrugButNumber=-1;g_nBagIdx=b;null!=g_HeroBagItemsList[g_nBagIdx]?(g_OpenIdx=14,g_SelectIndex=GameUtil.GetItemType(g_HeroBagItemsList[g_nBagIdx].s),g_MoveItems.Items=g_HeroBagItemsList[g_nBagIdx],g_MoveItems.Index=-1,GameUtil.NewShowItemsInf(g_MoveItems.Items)):GameUtil.NewShowItemsClose();this.HeroBag_List._selectedIndex=-1};f.prototype.onQueryHeroBag=function(){Sendmessage.QueryHeroBagItems()};f.prototype.onMouseDown=
function(d){this.HeroBag_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=d.stageX,this.startpos.y=d.stageY,this.HeroBag_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.HeroBag_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.HeroBag_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.HeroBag_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(d){this.HeroBag_bg.x+=d.stageX-this.startpos.x;this.HeroBag_bg.y+=
d.stageY-this.startpos.y;this.startpos.x=d.stageX;this.startpos.y=d.stageY};f.prototype.close=function(){Laya.stage.off("Show_HeroBag_Item_ico",this,this.HeroBag_Refresh);g_OpenHeroBag=!1;b=-1;this.removeSelf()};return f}(NewHeroBagUI),NewItemInfo=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(260,50);this.settxt=function(h,m){}}var b=new Laya.Point(0,0),d=[],n="",c=!0;Laya.class(f,"NewItemInfo",NewItemInfoUI);Laya.class(a,"ItemsRender",Laya.Box);
f.prototype.line_feed=function(h,m){for(var g=0;g<h.length;g++){var l=h[g];if(l)if(l.name&&"desc"==l.name&&l.str)this.makeDescStr(l.str);else if(l.name&&"custom"==l.name&&l.obj)this.makeCunstomAttr(l.obj);else if(-1!=l.indexOf("\u2605")||-1!=l.indexOf("\u25cf"))this.makeStar(l);else{var p=new Laya.Box;p.width=260;var q=new Laya.Label;l=l.split("/*/");q.fontSize=18;q.width=260;q.wordWrap=!0;var r;-1<l[0].indexOf("\u6240\u9700\u8f6c\u751f&")&&m&&m.s&&-1<[40,41,42,43,44].indexOf(m.s.Need)&&(r="\u6240\u9700\u8f6c\u751f\u7b49\u7ea7\uff1a"+
m.s.NeedLevel%65536+"&"+this.getShowNameByDB(m.s.Need)+Math.floor(m.s.NeedLevel/65536));q.text=r?r:l[0];r=void 0;p.height=20*Math.ceil(GameUtil.getTextWidthByMeasure(18,q.text)/q.width);0==q.text.indexOf("\u88c5\u5907\u8bc4\u5206:")?q.color="#00ff00":q.color=l[1];p.addChild(q);this.m_List.addChild(p)}}};f.prototype.getShowNameByDB=function(h){switch(h){case 40:return"\u7b49\u7ea7\uff1a";case 41:return"\u653b\u51fb\u529b\uff1a";case 42:return"\u9b54\u6cd5\u529b\uff1a";case 43:return"\u9053\u672f\uff1a";
case 44:return"\u58f0\u671b\u70b9\uff1a"}return"noShowName"};f.prototype.makeStar=function(h){var m=new Laya.Box;m.height=20;m.width=260;for(var g=0;g<h.length;g++){var l=new Laya.Image;"\u2605"==h[g]?l.skin="gameres/ui/star10.png":"\u25cf"==h[g]&&(l.skin="gameres/ui/star1.png");l.x=20*g;m.addChild(l)}this.m_List.addChild(m)};f.prototype.makeCunstomAttr=function(h){if(""!=h.sTitle&&"\u81ea\u5b9a\u4e49\u5c5e\u6027"!=h.sTitle){var m=new Laya.Box;m.height=20;m.width=260;var g=new Laya.Label;g.fontSize=
18;g.text=h.sTitle;g.color=Get2RGB(h.nColor);m.addChild(g);this.m_List.addChild(m)}var l=[];g=[];for(var p=0;p<CUSTOMITEMABIL_LEN;p++)0<h.arrAbilValue[p]&&0!=h.arrAbilType[p]&&(m=new Laya.Label,m.fontSize=18,m.text=g_customItemAttr.CustomItemAttr[h.arrAbilType[p]-1]+h.arrAbilValue[p]+(0==h.arrAbilMethod[p]?"":"%"),m.color=Get2RGB(h.arrAbilColor[p]),m.line=h.arrAbilLine[p],l.push(m));l.sort(function(u,v){return u.line-v.line});l=this.mergeLine(l);for(p=0;p<l.length;p++){m=new Laya.Box;m.height=20;
m.width=260;for(var q=0,r=0;r<l[p].txt.length;r++)m.addChild(l[p].txt[r]),l[p].txt[r].x=q,q+=l[p].txt[r].width+5;this.m_List.addChild(m)}for(p=0;p<CUSTOMITEMPROGRESSBAR_LEN;p++)m={},m.caption=h.arrPrgbarCaption[p],m.color=h.arrPrgbarColor[p],m.enabled=h.arrPrgbarEnabled[p],m.img=h.arrPrgbarImg[p],m.level=h.arrPrgbarLevel[p],m.showmode=h.arrPrgbarShowMode[p],m.valuecur=h.arrPrgbarValueCur[p],m.valuemax=h.arrPrgbarValueMax[p],g.push(m);this.makeCustomBar(g)};f.prototype.makeCustomBar=function(h){for(var m=
0;m<h.length;m++){var g=h[m];if(0!=g.enabled){var l=new Laya.Box;l.height=40;l.width=260;var p=g.valuecur/g.valuemax*100+"%",q=g.caption.replace(/%p/g,g.valuecur),r=new Laya.Label;r.fontSize=18;r.color=Get2RGB(g.color);q=q.replace(/%m/g,g.valuemax);q=q.replace(/%R/g,p);r.text=q;r.overflow="hidden";l.addChild(r);q=new Laya.Image;q.skin=1==m?"gameres/ui/00020.png":"gameres/ui/00000.png";q.y=20;0<g.img&&10>g.img?(r=new Laya.Image,r.skin="gameres/animation/bar/"+GameUtil.getprefixname(g.img+20*m,6)+".png",
q.addChild(r)):9<g.img&&20>g.img&&(r=Animationmodule.playframe(!0,q,"gameres/animation/bar/",20*m+1,g.img+20*m,100,!0),q.addChild(r),r.zOrder=0);r=new Laya.Image;r.skin="gameres/animation/bar/hide"+m+".png";r.right=0;r.scaleX=1-g.valuecur/g.valuemax;q.addChild(r);2!=g.showmode&&(r=new Laya.Label,r.fontSize=10,r.color="#ffffff",1==g.showmode?r.text=p:0==g.showmode&&(r.text=g.valuecur+"/"+g.valuemax),q.addChild(r),r.centerX=.5,r.zOrder=1);l.addChild(q);this.m_List.addChild(l)}}};f.prototype.mergeLine=
function(h){for(var m=[],g=[],l=0;l<h.length;l++)if(-1==m.indexOf(h[l].line))g.push({line:h[l].line,txt:[h[l]]}),m.push(h[l].line);else for(var p=0;p<g.length;p++)if(g[p].line==h[l].line){g[p].txt.push(h[l]);break}return g};f.prototype.makeDescStr=function(h){if(0!=h.indexOf("{")||-1==h.indexOf("}")){h=h.split("\\");for(var m=0;m<h.length;m++){var g=h[m],l=[];-1!=g.indexOf(">")?(g=g.split(">"),this.makeSliece(g,l)):l.push(g);(g=this.makeDescBox(l))&&this.m_List.addChild(g)}}};f.prototype.makeSliece=
function(h,m){for(var g=0;g<h.length;g++)for(var l=h[g].split("<"),p=0;p<l.length;p++)m.push(l[p]);return m};f.prototype.makeDescBox=function(h){if(h){var m=new Laya.Box;m.height=20;m.width=260;for(var g=new Laya.Point(0,0),l=0;l<h.length;l++)if(-1==h[l].indexOf(":")||-1==h[l].toUpperCase().indexOf("PLAYIMG")&&-1==h[l].toUpperCase().indexOf("IMG"))if(-1!=h[l].indexOf("-/")){var p="#ffffff";g=this.makeDescTxt("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",p,
g,m)}else if(-1!=h[l].indexOf("/")){var q=h[l].split("/");p="#ffffff";for(var r,u=0;u<q.length;u+=r)q[u]?isNaN(parseInt(q[u]))?(g=this.makeDescTxt(q[u],p,g,m),r=1):(r=2,""!=q[u+1]&&(""!=q[u].trim()&&(p=Get2RGB(q[u])),g=this.makeDescTxt(q[u+1],p,g,m))):r=1}else""!=h[l]&&("-"==h[l]&&(h[l]="--------------------------------------"),g=this.makeDescTxt(h[l],"#ffffff",g,m));else-1!=h[l].toUpperCase().indexOf("PLAYIMG")?(g=GameMission.LineText_PLAYIMG(h[l],g,m,!0),20<g.y&&(m.height=g.y)):-1!=h[l].toUpperCase().indexOf("IMGEX")?
(g=GameMission.LineText_IMGEX(h[l],g,m,!0),20<g.y&&(m.height=g.y)):-1!=h[l].toUpperCase().indexOf("IMG")&&(g=GameMission.LineText_IMG(h[l],g,m,!0),20<g.y&&(m.height=g.y));return 0<m._childs.length?m:null}};f.prototype.makeDescTxt=function(h,m,g,l){var p=new Laya.Label;p.fontSize=18;p.text=h;p.color=m;l.addChild(p);p.x=g.x;g.x+=p.width;return g};f.prototype.loadImg=function(h,m){if(h&&h.str)if(GameMission.LoadIngimage(h.str,null,!0),0<g_ItemImg.length){var g=this;GameUtil.loadImgEx(g_ItemImg,function(){g.ShowList(m)})}else this.ShowList(m)};
f.prototype.ShowList=function(h,m){this.m_List.vScrollBarSkin="gameres/ui/vscroll.png";this.m_List.removeChildren();this.line_feed(h,m);if(this.m_List._childs[0]){h=this.m_List._childs[0];m=5;this.Item_bg.height=22*h._childs.length+200;for(var g=0;g<h._childs.length;g++){var l=h._childs[g];l.y=m;m+=l.height+5}}280>this.Item_bg.height&&(this.Item_bg.height=280);520<this.Item_bg.height&&(this.Item_bg.height=520);this.m_List.height=this.Item_bg.height-135};f.prototype.ShowInfo=function(h,m,g,l){this.img_logo.removeChildren();
4!=g_OpenIdx&&"comparison1"!=this.name&&GameUtil.addTipMask(this);this.img_logo.skin="gameres/ui/img_bag_bg.png";this.img_logo.width=50;this.img_logo.height=50;this.img_logo.pos(2,2);var p=new Laya.Image;p.skin=m;p.pos(25-p.width/2,25-p.height/2);"comparison1"==this.name&&l?GameUtil.ShowItemeffect(this.img_logo,l):null!=g_MoveItems.Items&&GameUtil.ShowItemeffect(this.img_logo,g_MoveItems.Items);p._style&&(p.blendMode="overlay");this.wear_txt.visible=l&&GameUtil.GetUserItems(l.MakeIndex)?!0:!1;this.img_logo.addChild(p);
m=h[0].split("/*/");p=new Laya.Label;p.fontSize=18;p.color=5==g_OpenIdx?"#ffff00":m[1];p.text=m[0];p.width=185;p.wordWrap=!0;p.pos(51,6);this.img_logo.addChild(p);h.splice(0,1);var q=[];for(p=0;p<h.length;p++)h[p].name&&"desc"==h[p].name&&h[p].str&&(-1!=h[p].str.toUpperCase().indexOf("IMG")||-1!=h[p].str.toUpperCase().indexOf("PLAYIMG"))?this.loadImg(h[p],h):q.push(h[p]);this.ShowList(q,l);this.GetShowType(m[0]);this.ItemDescTop.text="";if(g_ItemDesc)for(h=g_ItemDesc,p=0;p<h.length;p++)if(l=h[p].split("="),
l[0]&&l[1]&&l[0]==m[0]&&-1!=l[1].indexOf("|"))for(q=0;0==l[1].indexOf("{")&&-1!=l[1].indexOf("}");){var r=l[1].substring(l[1].indexOf("{"),l[1].indexOf("}")+1),u=r.substring(1,r.indexOf("|"));r=r.substring(r.indexOf("|")+1,r.indexOf("}"));var v=new Laya.Label;v.fontSize=14;v.text=u;v.color=Get2RGB(r);this.ItemDescTop.addChild(v);v.x=q;q+=v.width;l[1]=l[1].substr(l[1].indexOf("}")+1)}g&&(this.Item_bg.x=0,0<g-this.Item_bg.width&&10<Math.abs(g-this.Item_bg.x-this.Item_bg.width)&&(this.Item_bg.x=g-this.Item_bg.width+
10))};f.prototype.init=function(){d=[];this.but_Close.on(Laya.Event.CLICK,this,this.close);this.wear_txt.visible=!1;this.zOrder=9999;this.Item_bg.ItemsList=[];this.Item_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.shop_minus.on(Laya.Event.CLICK,this,this.onShopNumChange,[-1]);this.shop_plus.on(Laya.Event.CLICK,this,this.onShopNumChange,[1]);this.change_side.on(Laya.Event.CLICK,this,this.changeSide);this.ShopNum.on(Laya.Event.INPUT,this,this.onShopNumChange);this.GetShowType()};f.prototype.OnInput=
function(){""===this.ShopNum.text&&(this.ShopNum.text="1");this.onShopNumChange()};f.prototype.OnFocus=function(){cur_use_app&&(this.Item_bg.top=-50)};f.prototype.OnBlur=function(){cur_use_app&&(this.Item_bg.y=50)};f.prototype.onShopNumChange=function(h){n=parseInt(this.ShopNum.text);if(1==h||-1==h)n+=h,this.ShopNum.text=n;1>this.ShopNum.text&&(n=0,this.ShopNum.text=0);for(var m=h=0;m<g_BagItemsList.length;m++)g_BagItemsList[m]||(h+=1);m=ObjectManage.GetAttr(playerID);m=Math.floor((m.MaxWeight-m.Weight)/
g_MoveItems.Items.s.Weight);(17==g_MoveItems.Items.s.StdMode||18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.Dura||(0!=g_MoveItems.Items.s.Weight?m>h?n>h&&(n=h):n>m&&(n=m):n>h&&
(n=h),0==h&&(n=1));0>n&&(n=1);this.ShopNum.text=n;this.ShopPic.text=n*g_MoveItems.Items.s.Price};f.prototype.GetShowType=function(h){this.but_bg.removeChildren();if(5!=g_OpenIdx){if(null!=g_MoveItems.Items&&null!=g_MoveItems.Items.s){d=[];if(0==g_OpenIdx||3==g_OpenIdx){var m=g_MoveItems.Items.s.StdMode;0==m||1==m||2==m||3==m?(d.push("\u4f7f\u7528"),0==m&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.DuraMax&&(d.push("\u53e0\u52a0"),d.push("\u62c6\u5206")),"\u4fee\u590d\u795e\u6c34"!=g_MoveItems.Items.s.Name&&
d.push("\u5e03\u7f6e")):211==m||31==m?d.push("\u4f7f\u7528"):4==m?d.push("\u5b66\u4e60"):(17==m||18==m||40==m||41==m||42==m)&&0<g_MoveItems.Items.s.Reserved?(0<g_MoveItems.Items.Dura&&d.push("\u62c6\u5206"),d.push("\u53e0\u52a0")):40==m||41==m||49==m?d.push("\u4f7f\u7528"):25==m&&8==g_MoveItems.Items.s.Source?(d.push("\u4f7f\u7528"),d.push("\u88c5\u5907")):43!=m&&46!=m&&d.push("\u88c5\u5907");g_OpenStore&&3!=g_OpenIdx&&(d=[],d.push("\u5b58\u5230\u4ed3\u5e93"));g_OpenHeroBag&&3!=g_OpenIdx&&(d=[],d.push("\u8f6c\u7ed9\u82f1\u96c4"))}else 1==
g_OpenIdx||18==g_OpenIdx||20==g_OpenIdx?d.push("\u5378\u4e0b"):15==g_OpenIdx?d.push("\u82f1\u96c4\u5378\u4e0b"):2==g_OpenIdx&&d.push("\u53d6\u56de\u80cc\u5305");4==g_OpenIdx?(d.push("\u8d2d\u4e70"),this.ShopTextNum.visible=!this.wear_txt.visible,this.ShopNum.visible=!this.wear_txt.visible,this.ShopTextPic.visible=!this.wear_txt.visible,this.ShopPic.visible=!this.wear_txt.visible,this.m_List.height-=60,this.m_List.vScrollBarSkin="gameres/ui/vscroll.png",n=this.ShopNum.text=1,this.ShopPic.text=parseInt(this.ShopNum.text)*
g_MoveItems.Items.s.Price):14==g_OpenIdx?(m=g_MoveItems.Items.s.StdMode,0==m||1==m||2==m||3==m||31==m?d.push("\u82f1\u96c4\u4f7f\u7528"):(17==m||18==m||40==m||41==m||42==m)&&0<g_MoveItems.Items.s.Reserved?(0<g_MoveItems.Items.Dura&&d.push("\u82f1\u96c4\u62c6\u5206"),d.push("\u82f1\u96c4\u53e0\u52a0")):4==m?d.push("\u82f1\u96c4\u5b66\u4e60"):(40!=m||41!=m||49!=m||31!=m||211!=m||25!=m)&&d.push("\u82f1\u96c4\u88c5\u5907"),g_OpenBag&&(d=[],d.push("\u8f6c\u56de\u4e3b\u4eba"))):4!=g_OpenIdx&&(this.ShopTextNum.visible=
!1,this.ShopNum.visible=!1,this.ShopTextPic.visible=!1,this.ShopPic.visible=!1);6==g_OpenIdx&&"\u4fee\u590d\u795e\u6c34"!=g_MoveItems.Items.s.Name?d.push("\u5e03\u7f6e\u836f\u54c1"):7==g_OpenIdx?d.push("\u786e\u5b9a"):8==g_OpenIdx?d.push("\u4fee\u7406"):9==g_OpenIdx?d.push("\u51fa\u552e"):12==g_OpenIdx?d.push("\u53d6\u56de\u7269\u54c1"):13==g_OpenIdx?d.push("\u4e0a\u4ea4"):g_OpenMyShop&&1!=g_OpenIdx&&3!=g_OpenIdx&&2!=g_OpenIdx&&16!=g_OpenIdx&&!player_stalls?(d=[],d.push("\u653e\u5165\u6446\u644a")):
g_OpenJiaoYi&&1!=g_OpenIdx&&3!=g_OpenIdx&&16!=g_OpenIdx?(d=[],d.push("\u653e\u5165\u4ea4\u6613")):16==g_OpenIdx||17==g_OpenIdx?16==g_OpenIdx&&70<=g_MoveItems.Items.s.StdMode&&74>=g_MoveItems.Items.s.StdMode?d.push("\u88c5\u5907"):17==g_OpenIdx&&d.push("\u53d6\u6d88\u8bbe\u7f6e"):19==g_OpenIdx?d.push("\u786e\u5b9a"):23==g_OpenIdx?d.push("\u653e\u5165\u5546\u5e97"):25==g_OpenIdx?d.push("\u4e0a\u67b6\u62cd\u5356"):(26==g_OpenIdx||27==g_OpenIdx||28==g_OpenIdx)&&d.push("\u653e\u5165")}else if(11==g_OpenIdx&&
h){d=[];if("\u57fa\u672c\u5251\u672f"==h||"\u653b\u6740\u5251\u672f"==h||"\u7cbe\u795e\u529b\u6218\u6cd5"==h||"\u62a4\u4f53\u795e\u76fe"==h)return;d.push("\u5e03\u7f6e\u6280\u80fd")}this.img_butbg.removeChildren();h=this.img_butbg.visible=!1;if(1<d.length||43==m||46==m){var g=this.but_bg.width/(d.length+1);for(m=0;m<d.length;m++){var l=new Laya.Button;l.width=g;l.height=25;l.stateNum=2;l.labelSize=18;l.skin="gameres/ui/btn_ok.png";l.label=d[m];l.labelColors="#D7B581,#D7B581";l.pos(m*g,9);l.on(Laya.Event.CLICK,
this,this.but_fun_0_Click);this.but_bg.addChild(l);h=!0}}else{if(""==d)return;l=new Laya.Button;l.width=85;l.height=25;l.stateNum=2;l.skin="gameres/ui/btn_ok.png";l.label=d[0];l.labelSize=18;l.labelColors="#D7B581,#D7B581";l.pos(30,9);if(4==g_OpenIdx||2==g_OpenIdx||3==g_OpenIdx||7==g_OpenIdx||6==g_OpenIdx||8==g_OpenIdx||9==g_OpenIdx||11==g_OpenIdx||12==g_OpenIdx||13==g_OpenIdx||16==g_OpenIdx||17==g_OpenIdx)6==g_OpenIdx&&-1!=g_DrugButNumber&&null!=g_DrugItemsList[g_DrugButNumber]&&(l.label="\u66ff\u6362\u836f\u54c1"),
l.pos(87,9);l.on(Laya.Event.CLICK,this,this.but_fun_0_Click);this.but_bg.addChild(l)}2!=g_OpenIdx&&3!=g_OpenIdx&&4!=g_OpenIdx&&6!=g_OpenIdx&&7!=g_OpenIdx&&8!=g_OpenIdx&&9!=g_OpenIdx&&10!=g_OpenIdx&&11!=g_OpenIdx&&12!=g_OpenIdx&&13!=g_OpenIdx&&26!=g_OpenIdx&&27!=g_OpenIdx&&28!=g_OpenIdx&&16!=g_OpenIdx&&17!=g_OpenIdx&&18!=g_OpenIdx&&19!=g_OpenIdx&&20!=g_OpenIdx&&23!=g_OpenIdx?(l=new Laya.Button,l.width=85,l.height=25,l.stateNum=2,l.labelSize=18,l.skin="gameres/ui/btn_ok.png",14==g_OpenIdx?(m=g_MoveItems.Items.s.StdMode,
l.label=!g_OpenBag||0==m||1==m||2==m||3==m||4==m||31==m||40==m&&41==m&&49==m&&31==m&&211==m&&25==m?"\u82f1\u96c4\u4e22\u5f03":"\u82f1\u96c4\u88c5\u5907"):l.label="\u4e22\u5f03",l.labelColors="#D7B581,#D7B581",g_OpenState&&0!=g_OpenIdx&&14!=g_OpenIdx&&(l.label="\u66ff\u6362"),g_OpenHeroState&&15==g_OpenIdx&&(l.label="\u82f1\u96c4\u66ff\u6362"),l.pos(150,9),1>d.length&&l.pos(93,9),h&&(l.width=g,l.height=25,l.pos(d.length*g,9)),l.on(Laya.Event.CLICK,this,this.but_funClick),this.but_bg.addChild(l)):l.x=
(this.but_bg.width-l.width)/2}};f.prototype.but_fun_0_Click=function(h){var m=h.target.label;switch(m){case "\u66f4\u591a":h.target.label="\u9690\u85cf";this.img_butbg.visible=!0;break;case "\u9690\u85cf":h.target.label="\u66f4\u591a";this.img_butbg.visible=!1;break;case "\u4f7f\u7528":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;211!=g_WaitItems.Items.s.StdMode&&GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);25==g_WaitItems.Items.s.StdMode&&8==g_WaitItems.Items.s.Source?Sendmessage.blessbottle(1,
g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name):Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);Laya.stage.event("ShowDrug_Items");this.removeSelf();Laya.stage.removeChildByName("comparison1");14<g_WaitItems.Items.s.Shape&&25>g_WaitItems.Items.s.Shape&&(g_boxid=g_WaitItems.Items.MakeIndex);break;case "\u62c6\u5206":h=function(r){0<parseInt(r)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.blessbottle(parseInt(r),
g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))};Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u62c6\u5206\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:h}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u53e0\u52a0":for(h=0;h<g_BagItemsList.length;h++){if(null!=g_BagItemsList[g_nBagIdx]&&null!=g_BagItemsList[h]&&0<=g_BagItemsList[g_nBagIdx].Dura&&g_BagItemsList[g_nBagIdx].s.Name==g_BagItemsList[h].s.Name&&g_BagItemsList[h].s.IsBind==g_BagItemsList[g_nBagIdx].s.IsBind&&
g_BagItemsList[h].MakeIndex!=g_BagItemsList[g_nBagIdx].MakeIndex&&1<g_BagItemsList[h].DuraMax-g_BagItemsList[h].Dura&&(0==g_BagItemsList[g_nBagIdx].s.StdMode||17==g_BagItemsList[g_nBagIdx].s.StdMode||17==g_BagItemsList[g_nBagIdx].s.StdMode||18==g_BagItemsList[g_nBagIdx].s.StdMode||41==g_BagItemsList[g_nBagIdx].s.StdMode||40==g_BagItemsList[g_nBagIdx].s.StdMode||42==g_BagItemsList[g_nBagIdx].s.StdMode||31==g_BagItemsList[g_nBagIdx].s.StdMode&&-1!=g_BagItemsList[g_nBagIdx].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){h>
g_nBagIdx?(g_WaitItems.index=h,0==g_BagItemsList[g_nBagIdx].s.StdMode?Sendmessage.sendStackDrug(g_BagItemsList[h].MakeIndex,g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0):Sendmessage.sendStackThing(g_BagItemsList[h].MakeIndex,g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0)):(g_WaitItems.index=g_nBagIdx,0==g_BagItemsList[g_nBagIdx].s.StdMode?Sendmessage.sendStackDrug(g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[h].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,
0):Sendmessage.sendStackThing(g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[h].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0));var g=!0;break}if(g)break}this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u4f7f\u7528":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;211!=g_WaitItems.Items.s.StdMode&&(GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),--g_HeroBagCount);Sendmessage.heroEat(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);this.removeSelf();
Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u62c6\u5206":h=function(r){0<parseInt(r)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.blessbottleH(parseInt(r),g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))};Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u62c6\u5206\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:h}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");
break;case "\u82f1\u96c4\u53e0\u52a0":for(h=0;h<g_HeroBagItemsList.length;h++){if(null!=g_HeroBagItemsList[h]&&null!=g_HeroBagItemsList[g_nBagIdx]&&0<=g_HeroBagItemsList[h].Dura&&g_HeroBagItemsList[h].s.Name==g_HeroBagItemsList[g_nBagIdx].s.Name&&g_HeroBagItemsList[g_nBagIdx].MakeIndex!=g_HeroBagItemsList[h].MakeIndex&&49!=g_HeroBagItemsList[h].Dura&&49!=g_HeroBagItemsList[g_nBagIdx].Dura&&(17==g_HeroBagItemsList[h].s.StdMode||18==g_HeroBagItemsList[h].s.StdMode||41==g_HeroBagItemsList[h].s.StdMode||
40==g_HeroBagItemsList[h].s.StdMode||42==g_HeroBagItemsList[h].s.StdMode||31==g_HeroBagItemsList[h].s.StdMode&&-1!=g_HeroBagItemsList[h].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){h>g_nBagIdx?(g_WaitItems.index=h,Sendmessage.sendHeroStackThing(g_HeroBagItemsList[h].MakeIndex,g_HeroBagItemsList[g_nBagIdx].MakeIndex,g_HeroBagItemsList[h].s.DBName,0)):(g_WaitItems.index=g_nBagIdx,Sendmessage.sendHeroStackThing(g_HeroBagItemsList[g_nBagIdx].MakeIndex,g_HeroBagItemsList[h].MakeIndex,g_HeroBagItemsList[h].s.DBName,
0));g=!0;break}if(g)break}this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u5b66\u4e60":Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u5b66\u4e60 : \u3010 "+g_MoveItems.Items.s.Name+" \u3011 \uff1f",callfn:function(){g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);--g_HeroBagCount;Sendmessage.heroEat(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name)}}]);this.removeSelf();
Laya.stage.removeChildByName("comparison1");break;case "\u5b66\u4e60":Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u5b66\u4e60 : \u3010 "+g_MoveItems.Items.s.Name+" \u3011 \uff1f",callfn:function(){g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;null!=g_WaitItems.Items.MakeIndex&&GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name)}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");
break;case "\u88c5\u5907":f.equipmentItems(g_MoveItems.Items,g_SelectIndex);this.removeSelf();Laya.stage.removeChildByName("comparison1");3==g_OpenIdx&&GameApi.ShowScreen(!1);break;case "\u53d6\u6d88\u8bbe\u7f6e":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;h=GameUtil.GetItemType(g_WaitItems.Items.s);g_WaitItems.Index=h;Sendmessage.TakeOffItem(g_WaitItems.Items,h);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u88c5\u5907":h=g_SelectIndex;g_WaitItems.Items=
g_MoveItems.Items;g_MoveItems.Items=null;14==g_OpenIdx&&(6==h&&null!=g_HeroItemList[6]?null!=g_HeroItemList[5]?(h=c?6:5,c=!c):h=5:7==h&&null!=g_HeroItemList[7]?null!=g_HeroItemList[8]?(h=c?7:8,c=!c):h=8:23==h&&null!=g_HeroItemList[23]?null!=g_HeroItemList[22]?(h=c?23:22,c=!c):h=22:24==h&&null!=g_HeroItemList[24]&&(null!=g_HeroItemList[25]?(h=c?24:25,c=!c):h=25));g_WaitItems.Index=h;GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);--g_HeroBagCount;Sendmessage.heroTakeOn(g_WaitItems.Items.MakeIndex,
h,g_WaitItems.Items.s.Name);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5378\u4e0b":f.toUnloadEquip(g_MoveItems.Items,g_MoveItems.Index);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u5378\u4e0b":g_HeroBagNum>g_HeroBagCount?(g_WaitItems.Items=g_MoveItems.Items,g_WaitItems.Index=g_MoveItems.Index,g_MoveItems.Items=null,Sendmessage.HeroTakeOffItem(g_WaitItems.Items,g_WaitItems.Index),g_HeroBagCount+=1):Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u82f1\u96c4\u80cc\u5305\u5df2\u6ee1\uff01\uff01\uff01",callfn:function(){}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u53d6\u56de\u80cc\u5305":f.moveItemToBackpack(g_MoveItems.Items);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u8f6c\u56de\u4e3b\u4eba":g=!0;for(h=0;h<g_BagItemsList.length;h++)g_BagItemsList[h]||(g=!1);if(g){Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return}g_WaitItems.Items=
g_MoveItems.Items;g_MoveItems.Items=null;Sendmessage.heroBagToMasterBag(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);GameUtil.AddItemNewBag(g_WaitItems.Items);GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);g_WaitItems.Items=null;--g_HeroBagCount;this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5b58\u5230\u4ed3\u5e93":f.storeItemToWareHouse(g_MoveItems.Items);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u8f6c\u7ed9\u82f1\u96c4":g_WaitItems.Items=
g_MoveItems.Items;g_MoveItems.Items=null;g_HeroBagNum>g_HeroBagCount?(Sendmessage.masterBagToHeroBag(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name),GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),GameUtil.HeroAddItem(g_WaitItems.Items),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_HeroBagCount+=1):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u82f1\u96c4\u80cc\u5305\u5df2\u6ee1\uff01\uff01\uff01",callfn:function(){}}]);g_WaitItems.Items=null;this.removeSelf();Laya.stage.removeChildByName("comparison1");
break;case "\u5e03\u7f6e":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;g_ScrenIdx=1;GameApi.ShowDrug(!0);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u8d2d\u4e70":g=!0;for(h=0;h<g_BagItemsList.length;h++)g_BagItemsList[h]||(g=!1);if(g){Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return}4==g_OpenIdx&&(0==this.ShopNum.text||""==this.ShopNum.text?Laya.stage.event("show_log",[{txt:"\u8d2d\u4e70\u6570\u91cf\u4e0d\u80fd\u4e3a0",
color:"#ff0000"}]):(Sendmessage.BuyShopItem(n,g_MoveItems.Items.s.Name),g_MoveItems.Items=null));this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5e03\u7f6e\u836f\u54c1":case "\u66ff\u6362\u836f\u54c1":if(-1!=g_DrugButNumber){null!=g_DrugItemsList[g_DrugButNumber]&&(g_BagItemsList[g_nBagIdx]=g_DrugItemsList[g_DrugButNumber],g_BagItemsList[g_DrugButNumber]=g_MoveItems.Items);g_DrugItemsList[g_DrugButNumber]=g_MoveItems.Items;g_MoveItems.Items=null;Laya.stage.event("Show_Bag_Item_ico");
Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);GameApi.ShowScreen(!1);g=[];for(h=0;h<g_DrugItemsList.length;++h){var l=g_DrugItemsList[h];null!=l?g.push({looks:l.s.Looks,mode:l.s.StdMode}):g.push({looks:null,mode:null})}h=JSON.stringify(g);GameUtil.setSaveData("druglist",h)}this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u4fee\u7406":-1!=G_Show_Item_Price?Laya.stage.event("show_alert_dlg",[{type:2,
txt:"\u4f60\u662f\u5426\u786e\u5b9a\u7ef4\u4fee\uff1f\r\n \u7269\u54c1: \u3010 "+g_MoveItems.Items.s.Name+" \u3011\r\n\u4fee\u7406\u4ef7\u683c\uff1a"+G_Show_Item_Price+" \u91d1\u5e01\u3002",callfn:function(){console.log("sName",m);Sendmessage.sendRepairItem(G_NPC_ID,g_MoveItems.Items.MakeIndex,g_MoveItems.Items.s.Name)}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u7269\u54c1\u65e0\u6cd5\u4fee\u7406\uff01\uff01\uff01",callfn:function(){}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");
break;case "\u51fa\u552e":-1!=G_Show_Item_Price&&g_MoveItems&&g_MoveItems.Items?Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u51fa\u552e\uff1f\r\n \u7269\u54c1: \u3010 "+g_MoveItems.Items.s.Name+" \u3011\r\n\u51fa\u552e\u4ef7\u683c\uff1a"+G_Show_Item_Price+" \u91d1\u5e01\u3002",callfn:function(){console.log("sName",m);Sendmessage.sendSellItem(G_NPC_ID,g_MoveItems.Items.MakeIndex,g_MoveItems.Items.s.Name);g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;
GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Laya.stage.event("Screen_Del_Items",g_WaitItems.Items.MakeIndex);Laya.stage.event("ShowDrug_Items")}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u7269\u54c1\u65e0\u6cd5\u51fa\u552e\uff01\uff01\uff01",callfn:function(){}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u786e\u5b9a":7==g_OpenIdx?(Laya.stage.event("draw_npc_items",g_MoveItems.Items),GameApi.ShowScreen(!1),Sendmessage.NpcDlgOptions(G_NPC_ID,
g_npc_opt_boxid,g_MoveItems.Items.MakeIndex,0),GameUtil.DelBagItems(g_MoveItems.Items.MakeIndex),this.removeSelf(),Laya.stage.removeChildByName("comparison1")):19==g_OpenIdx&&null!=g_MoveItems.Items&&(Sendmessage.SendCMOpenBox(g_MoveItems.Items.MakeIndex,g_MoveItems.Items.s.Name),this.removeSelf(),Laya.stage.removeChildByName("comparison1"));break;case "\u5e03\u7f6e\u6280\u80fd":GameApi.Showskillwin(!0);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u653e\u5165\u6446\u644a":GameApi.ShowMyShopMsg(!0);
this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u653e\u5165\u4ea4\u6613":f.pushToJiaoYiHandle(g_MoveItems.Items);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u53d6\u56de\u7269\u54c1":f.retrieveJiaoyiItemHandler(g_MoveItems.Items);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u4e0a\u4ea4":Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u4e0a\u4ea4\u7269\u54c1: \u3010 "+g_MoveItems.Items.s.Name+
" \u3011\uff1f",callfn:function(){console.log("sName",m);Sendmessage.sendGiveItem(g_MoveItems.Items,G_NPC_ID);g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Laya.stage.event("Screen_Del_Items",g_WaitItems.Items.MakeIndex)}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");GameApi.ShowScreen(!1);break;case "\u653e\u5165\u5546\u5e97":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;var p=GameUtil.InstanceOfMem(MyStoreUI);
p&&g_WaitItems.Items&&(GameUtil.loadImg(g_WaitItems.Items.s.Looks,"items",function(r,u){r=new Laya.Image(r);p.img_item._childs[0]&&p.img_item.removeChild(p.img_item._childs[0]);p.img_item.addChild(r);GameUtil.ShowItemeffect(r,g_WaitItems.Items);(41==g_WaitItems.Items.s.StdMode||40==g_WaitItems.Items.s.StdMode||31==g_WaitItems.Items.s.StdMode&&-1!=g_WaitItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_WaitItems.Items.s.Reserved&&0<g_WaitItems.Items.Dura&&(u=new Laya.Label,u.color="#ffffff",
u.fontSize=18,u.text="x"+(g_WaitItems.Items.Dura+1),GameUtil.setCanAddTxtStroke(u),u.align="right",u.width=30,r.addChild(u),GameUtil.setTxtFixedPos(r,p.img_item.width,p.img_item.height));r.pos(34-r.width/2,34-r.height/2);GameUtil.setTxtFixedPos(r,p.img_item.width,p.img_item.height)}),this.removeSelf(),Laya.stage.removeChildByName("comparison1"),GameApi.ShowScreen(!1),AddStoreItem=g_WaitItems.Items,SelectedStoreItem=null,p.btn_add.label="\u589e\u52a0");break;case "\u4e0a\u67b6\u62cd\u5356":g_WaitItems.Items=
g_MoveItems.Items;g_MoveItems.Items=null;var q=this;g_WaitItems.Items&&(0,h=function(r){Sendmessage.sendTranslateItem(g_WaitItems.Items.MakeIndex,parseInt(r),G_NPC_ID,g_WaitItems.Items.s.Name);GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);q.removeSelf();Laya.stage.event("Screen_Del_Items",g_WaitItems.Items.MakeIndex)},Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u4e0a\u67b6\u62cd\u5356\u7684\u4ef7\u683c\uff01",ipttype:"string",callfn:h}]));break;case "\u653e\u5165":Laya.stage.event("drawUpgrade",
g_MoveItems.Items),GameApi.ShowScreen(!1),GameUtil.DelBagItems(g_MoveItems.Items.MakeIndex),this.removeSelf(),Laya.stage.removeChildByName("comparison1")}Laya.stage.event("Show_Bag_Item_ico")};f.prototype.but_funClick=function(h){switch(h.target.label){case "\u4e22\u5f03":if(null==g_MoveItems.Items)return;(17==g_MoveItems.Items.s.StdMode||18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&
-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.DuraMax?(h=function(m){0<parseInt(m)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendDropItem(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,parseInt(m)),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_selfdropitem.push(g_WaitItems.Items.MakeIndex),
Laya.stage.event("ShowDrug_Items"))},Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u4e22\u5f03\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:h}])):(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendDropItem(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,1),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_selfdropitem.push(g_WaitItems.Items.MakeIndex),Laya.stage.event("ShowDrug_Items"),-1!=
g_DrugButNumber&&(h=GameApi.autofillrule(g_WaitItems.Items.s.StdMode,g_WaitItems.Items.s.Looks),0!=h.length&&GameApi.autofillitem(h)));break;case "\u82f1\u96c4\u88c5\u5907":h=g_SelectIndex;g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;14==g_OpenIdx&&(6==h&&null!=g_HeroItemList[6]?null!=g_HeroItemList[5]?(h=c?6:5,c=!c):h=5:7==h&&null!=g_HeroItemList[7]?null!=g_HeroItemList[8]?(h=c?7:8,c=!c):h=8:23==h&&null!=g_HeroItemList[23]?null!=g_HeroItemList[22]?(h=c?23:22,c=!c):h=22:24==h&&null!=
g_HeroItemList[24]&&(null!=g_HeroItemList[25]?(h=c?24:25,c=!c):h=25));g_WaitItems.Index=h;GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);--g_HeroBagCount;Sendmessage.heroTakeOn(g_WaitItems.Items.MakeIndex,h,g_WaitItems.Items.s.Name);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u4e22\u5f03":if(null==g_MoveItems.Items)return;(17==g_MoveItems.Items.s.StdMode||18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||
42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.DuraMax?(h=function(m){0<parseInt(m)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),--g_HeroBagCount,Sendmessage.HeroDropItems(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,
parseInt(m)))},Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u4e22\u5f03\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:h}])):(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),--g_HeroBagCount,Sendmessage.HeroDropItems(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,1));break;case "\u66ff\u6362":h=GameUtil.GetItemType(g_MoveItems.Items.s);GameApi.ShowScreen(!0,h,1);break;case "\u82f1\u96c4\u66ff\u6362":h=GameUtil.GetItemType(g_MoveItems.Items.s),
GameApi.ShowScreen(!0,h,7)}this.removeSelf();Laya.stage.removeChildByName("comparison1");this.removeSelf();Laya.stage.removeChildByName("comparison1")};f.prototype.onMouseDown=function(h){this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(b.x=h.stageX,b.y=h.stageY,this.Item_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Item_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Item_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.Item_bg.off(Laya.Event.MOUSE_MOVE,
this,this.onMouseMove)};f.prototype.onMouseMove=function(h){this.Item_bg.x+=h.stageX-b.x;this.Item_bg.y+=h.stageY-b.y;b.x=h.stageX;b.y=h.stageY};f.prototype.changeSide=function(){if(this.change_item){var h=GameUtil.GetItemInfo(this.change_item,this.change_type);if(70<=this.change_item.s.StdMode&&74>=this.change_item.s.StdMode)if(0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length)var m=GameMission.GetPakSing(g_ClientConfig.nShowUserIcon),g=(Array(5).join("0")+(0+(this.change_item.s.Looks+
1))).slice(-5),l=m+g+".png";else l=GameUtil.ParseNameFormat(this.change_item.s.Looks);else l=GameUtil.ParseNameFormat(this.change_item.s.Looks);this.item=this.change_item;switch(this.change_idx){case 5:this.change_item=g_UserItemList[6];this.change_idx=6;break;case 6:this.change_item=g_UserItemList[5];this.change_idx=5;break;case 7:this.change_item=g_UserItemList[8];this.change_idx=8;break;case 8:this.change_item=g_UserItemList[7],this.change_idx=7}var p=Laya.stage.getChildByName("comparison");if(p&&
p.item&&this.item){var q=GameApi.GetItemScore(this.item);m=GameApi.GetItemScore(p.item);if(m==q||!q&&0!=q){if(p.gradeColor=!0,q||0==q)this.gradeColor=!0}else m>q?(p.gradeColor=!0,this.gradeColor=!1):m<q&&(p.gradeColor=!1,this.gradeColor=!0);q=GameUtil.GetItemInfo(p.item,this.change_type);70<=p.item.s.StdMode&&74>=p.item.s.StdMode?0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?(m=GameMission.GetPakSing(g_ClientConfig.nShowUserIcon),g=(Array(5).join("0")+(0+(p.item.s.Looks+
1))).slice(-5),m=m+g+".png"):m=GameUtil.ParseNameFormat(p.item.s.Looks):m=GameUtil.ParseNameFormat(p.item.s.Looks);p.ShowInfo(q,m,this.change_x);this.ShowInfo(h,l,this.change_x)}}};f.prototype.close=function(){GameUtil.removeTipMask(this);this.removeSelf();Laya.stage.removeChildByName("comparison1")};f.storeItemToWareHouse=function(h,m){g_WaitItems.Items=h;g_MoveItems.Items=null;h=3;1!=g_StoreType&&(h=4);0<=g_StoreCount&&g_StoreCount<g_StoreMaxCount?(Sendmessage.DepotOrBagItems2(g_WaitItems.Items.MakeIndex,
h),g_boOpenCaiji&&(g_WaitItems.Items.s.IsBind?g_LogSocket.AddGameDataLog(1,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u5df2\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(1,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u975e\u7ed1\u5b9a\u7269\u54c1","")),GameUtil.isMultiple(g_WaitItems.Items)?(h=GameUtil.checkMaterialItemCanBeStacked(g_WaitItems.Items)?g_WaitItems.Items.Dura+1:g_WaitItems.Items.Dura,Laya.stage.event("item_hint",[g_WaitItems.Items,-h])):Laya.stage.event("item_hint",
[g_WaitItems.Items,-1]),GameUtil.AddStoreItems(g_WaitItems.Items,m),GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_StoreCount+=1,Laya.stage.event("Show_Bag_Item_ico"),Laya.stage.event("ShowDrug_Items"),Laya.stage.event("Drug_Item_ico"),Laya.stage.event("Drug_Set_Items",[g_DrugButNumber])):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4ed3\u5e93\u5df2\u6ee1\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5b58\u50a8\uff01\uff01\uff01",callfn:function(){}}]);
g_WaitItems.Items=null};f.moveItemToBackpack=function(h,m){m=!0;for(var g=ObjectManage.GetAttr(playerID),l=0;l<g_BagItemsList.length;l++)g_BagItemsList[l]||(m=!1);if(m)Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);else if(g&&0<g.Weight+h.s.Weight-g.MaxWeight)Laya.stage.event("show_log",[{txt:"\u8d1f\u91cd\u8d85\u51fa",color:"#ff0000"}]);else return g_WaitItems.Items=h,g_MoveItems.Items=null,h=1,1!=g_StoreType&&(h=2),Sendmessage.DepotOrBagItems2(g_WaitItems.Items.MakeIndex,
h),g_boOpenCaiji&&(g_WaitItems.Items.s.IsBind?g_LogSocket.AddGameDataLog(0,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u5df2\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(0,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u975e\u7ed1\u5b9a\u7269\u54c1","")),GameUtil.DelStoreItems(g_WaitItems.Items.MakeIndex),g_WaitItems.Items=null,--g_StoreCount,!0};f.pushToJiaoYiHandle=function(h,m){g_WaitItems.Items=h;g_MoveItems.Items=null;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);
GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex);Sendmessage.AddTradeItem(g_WaitItems.Items);Laya.stage.event("ShowDrug_Items")};f.retrieveJiaoyiItemHandler=function(h){g_WaitItems.Items=h;g_MoveItems.Items=null;GameApi.DelJiaoYiItems(g_WaitItems.Items.MakeIndex);Sendmessage.DeleteTradeItem(g_WaitItems.Items)};f.equipmentItems=function(h,m){g_WaitItems.Items=h;g_MoveItems.Items=null;if(52==m)g_WaitItems.Items=g_WaitItems.Items,g_WaitItems.Index=m,Sendmessage.sendTakeOnItem(m,g_WaitItems.Items.MakeIndex,
g_WaitItems.Items.s.Name);else{if(0==g_OpenIdx){6==m&&null!=g_UserItemList[6]?null!=g_UserItemList[5]?(m=c?6:5,c=!c):m=5:7==m&&null!=g_UserItemList[7]?null!=g_UserItemList[8]?(m=c?7:8,c=!c):m=8:23==m&&null!=g_UserItemList[23]?null!=g_UserItemList[22]?(m=c?23:22,c=!c):m=22:24==m&&null!=g_UserItemList[24]&&(null!=g_UserItemList[25]?(m=c?24:25,c=!c):m=25);h=GameUtil.InstanceOfMem(ShoushiUI);var g=g_WaitItems.Items.s.StdMode,l=g_WaitItems.Items.s.OverLap;if(h)if(!(15!=g&&19!=g&&20!=g&&21!=g&&22!=g&&23!=
g&&24!=g&&26!=g||3!=l&&6!=l&&7!=l))if(0==g_WaitItems.Items.s.Expand1||7==g_WaitItems.Items.s.Expand1)for(h=30;36>h;h++){if(null==g_UserItemList[h]){m=h;break}}else m=30+g_WaitItems.Items.s.Expand1-1;else if(0==g_WaitItems.Items.s.Expand1||7==g_WaitItems.Items.s.Expand1)for(h=30;36>h;h++)if(null==g_UserItemList[h]){m=h;break}}g_WaitItems.Index=m;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Sendmessage.TakeOnItem2(g_WaitItems.Items,m)}};f.toUnloadEquip=function(h,m){g_WaitItems.Items=h;g_WaitItems.Index=
m;g_MoveItems.Items=null;Sendmessage.TakeOffItem(g_WaitItems.Items,g_WaitItems.Index)};return f}(NewItemInfoUI),NewNpcShop=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(400,30);this.settxt=function(h,m){this.removeChildren();var g=new Laya.Text;g.color="#ffffff";g.fontSize=18;g.text=h.name;this.addChild(g);var l=new Laya.Text;l.color="#ffffff";l.fontSize=18;l.text=h.gprice;l.pos(g.x+200,g.y);this.addChild(l);1<=parseInt(h.gsub)&&(h=new Laya.Image,
h.skin="gameres/png/npcxz2.png",h.pos(l.x+80,g.y-3),this.addChild(h));n==m&&(h=new Laya.Image,h.skin="gameres/png/npcxz.png",h.pos(0,-5),this.addChild(h))}}function b(){b.__super.call(this);this.size(48,48);this.settxt=function(h,m){this.removeChildren();h=new Laya.Image;h.width=50;h.height=50;h.skin="gameres/ui/img_bag_bg.png";45<m?h.skin="gameres/ui/lock_img.png":c==m&&(h.skin="gameres/ui/img_bag_bg1.png");this.addChild(h);if(m<g_ItemMemuListInf.length&&null!=g_ItemMemuListInf[m]){var g=new Laya.Image;
GameUtil.loadImg(g_ItemMemuListInf[m].s.Looks,"items",function(l){g.skin=l;g.pos(24-g.width/2,24-g.height/2)});h.addChild(g);GameUtil.ShowItemeffect(h,g_ItemMemuListInf[m])}}}var d=new Laya.Point(0,0),n=-1,c=-1;Laya.class(f,"NewNpcShop",NewNpcShopUI);Laya.class(a,"NewNpcRender",Laya.Box);Laya.class(b,"NewNpcRender2",Laya.Box);f.prototype.UpdateItem=function(h,m){h.settxt(h.dataSource,m)};f.prototype.M_Listtselect=function(h){G_npcShopPage=0;n=h;c=-1;h<g_ItemMemuList.length&&(null!=g_ItemMemuList[n]&&
1<=parseInt(g_ItemMemuList[n].gsub)?(Sendmessage.sendGetDetailItem(g_ItemMemuList[n],G_npcShopPage),this.inf_bg.visible=!0):this.inf_bg.visible=!1);this.M_List._selectedIndex=-1};f.prototype.changePage=function(h){null!=g_ItemMemuList[n]&&1<=parseInt(g_ItemMemuList[n].gsub)?0>G_npcShopPage+h||(Sendmessage.sendGetDetailItem(g_ItemMemuList[n],G_npcShopPage+h),this.inf_bg.visible=!0):this.inf_bg.visible=!1};f.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.NpcShop_bg.skin=
"gameres/png/npcitems.png";this.Npc_BuyBj.visible=g_show_Npcbj;this.NpcShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.NpcShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.pageup.on(Laya.Event.CLICK,this,this.changePage,[-10]);this.pagedown.on(Laya.Event.CLICK,this,this.changePage,[10]);this.M_List.repeatX=1;this.M_List.repeatY=10;this.M_List.vScrollBarSkin=
"gameres/ui/vscroll.png";this.M_List.itemRender=a;this.M_List.selectEnable=!0;this.M_List.selectHandler=new Laya.Handler(this,this.M_Listtselect);this.M_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.M_List.array=g_ItemMemuList;this.M_List2.repeatX=2;this.M_List2.repeatY=5;this.M_List2.spaceX=1;this.M_List2.spaceY=1;this.M_List2.itemRender=b;this.M_List2.selectEnable=!0;this.M_List2.selectHandler=new Laya.Handler(this,this.M_Listtselect2);this.M_List2.renderHandler=new Laya.Handler(this,
this.UpdateItem2);for(var h=[],m=0;20>m;m++)h.push(m);this.M_List2.array=h;this.inf_Close.on(Laya.Event.CLICK,this,this.oninf_Close);Laya.stage.on("Update_Npc_Items2",this,this.ShowItem2);Laya.stage.on("npc_shop_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);c=n=-1;this.Npc_Buy.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_BuyBj.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_Repair.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_Repair2.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_Sell.on(Laya.Event.CLICK,
this,this.onNpc_Buy)};f.prototype.onNpc_Buy=function(h){switch(h.target.name){case "2":GameApi.ShowScreen(!0,0,5);break;case "3":null!=g_ItemMemuList[n]&&(1<=parseInt(g_ItemMemuList[n].gsub)?null!=g_ItemMemuListInf[c]&&Sendmessage.SendButItemFormInfo(g_ItemMemuListInf[c]):Sendmessage.sendBuyItem(g_ItemMemuList[n]));break;case "4":null!=g_ItemMemuList[n]&&(1<=parseInt(g_ItemMemuList[n].gsub)?null!=g_ItemMemuListInf[c]&&Sendmessage.SendButBindItemFormInfo(g_ItemMemuListInf[c]):Sendmessage.sendBindBuyItem(g_ItemMemuList[n]))}};
f.prototype.BUYITEM_SUCCESS=function(){g_ItemMemuListInf[c]=null;this.ShowItem2()};f.prototype.ShowItem2=function(){this.pageNum.text=G_npcShopPage/10+1;this.M_List2.array=g_ItemMemuListInf;this.M_List2.refresh()};f.prototype.UpdateItem2=function(h,m){h.settxt(h.dataSource,m)};f.prototype.M_Listtselect2=function(h){c=h;g_OpenIdx=10;g_MoveItems.Index=-11;g_MoveItems.Items=g_ItemMemuListInf[h];GameUtil.NewShowItemsInf(g_MoveItems.Items,null,615);this.M_List2._selectedIndex=-1};f.prototype.oninf_Close=
function(){this.inf_bg.visible=!1};f.prototype.onMouseDown=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var h=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));d.x=h.x;d.y=h.y;this.bgCanMove=!0}};f.prototype.onMouseUp=function(){this.bgCanMove=!1};f.prototype.onMouseMove=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)&&this.bgCanMove){var h=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.NpcShop_bg.x+=h.x-d.x;this.NpcShop_bg.y+=h.y-d.y}};f.prototype.close=function(){Laya.stage.off("Update_Npc_Items2",this,this.ShowItem2);Laya.stage.off("npc_shop_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);this.removeSelf()};return f}(NewNpcShopUI),NewNpcWin=function(e){function f(){f.__super.call(this);this.init()}new Laya.Point(0,0);Laya.class(f,"NewNpcWin",NewNpcWinUI);
f.prototype.init=function(){this.closeOffestY=this.closeOffestX=30;this.panelPos=[];Laya.stage.on("Show_NewNpc",this,this.LoadIngimage);Laya.stage.on("Change_bg",this,this.changedialog);Laya.stage.on("close",this,this.close);Laya.stage.on("Change_pos",this,this.Change_pos);Laya.stage.on("timeCountDown",this,this.timeCountDown);this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Npc_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Npc_bg.pos(browser_width/2-this.Npc_bg.width/2,browser_height/
2-this.Npc_bg.height/2);this.startpos=new Laya.Point;this.posType=4;this.nWindowsY=this.nWindowsX=0;this.bShowClose=1};f.prototype.Change_pos=function(a,b,d,n){this.posType=a;this.nWindowsX=b;this.nWindowsY=d;this.bShowClose=n;this.SetPos()};f.prototype.onMouseDown=function(a){if(!(a.target instanceof DragItem||a.target.inDiyList)){if(a.touches&&2==a.touches.length){var b=a.touches[0].stageX-a.touches[1].stageX,d=a.touches[0].stageY-a.touches[1].stageY;this.movedis=Math.sqrt(b*b+d*d)}this.startpos.x=
a.stageX;this.startpos.y=a.stageY;this.Npc_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.Npc_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Npc_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);(a=Laya.stage.getChildByName("yangdaweigood"))&&a.removeSelf()}};f.prototype.onMouseUp=function(){this.Npc_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(a){if(g_npcCanMove)if(a.touches&&2==a.touches.length){var b=parseInt(a.touches[0].stageX-a.touches[1].stageX);
a=parseInt(a.touches[0].stageY-a.touches[1].stageY);b=Math.sqrt(b*b+a*a);a=this.Npc_bg.scaleX+.01*(b-this.movedis);a<this.Npc_bg.width/this.Npc_bg.width&&(a=this.Npc_bg.width/this.Npc_bg.width);a>870/this.Npc_bg.width&&(a=870/this.Npc_bg.width);var d=this.Npc_bg.height/2;this.Npc_bg.x=parseInt(this.Npc_bg.x-(this.Npc_bg.width/2-this.Npc_bg.x)*(a-this.Npc_bg.scaleX)/this.Npc_bg.scaleX);this.Npc_bg.y=parseInt(this.Npc_bg.y-(d-this.Npc_bg.y)*(a-this.Npc_bg.scaleY)/this.Npc_bg.scaleY);this.Npc_bg.scaleX=
a;this.Npc_bg.scaleY=a;this.movedis=b}else this.Npc_bg.x+=a.stageX-this.startpos.x,this.Npc_bg.y+=a.stageY-this.startpos.y,this.startpos.x=a.stageX,this.startpos.y=a.stageY};f.prototype.timeCountDown=function(a){Laya.timer.loop(1E3*a,this,this.close)};f.prototype.LoadIngimage=function(a){var b=this;fsize=12;b.Npc_bg.alpha=1;b.Show_gb.x=g_GameConfigWEB.funActivity.npcX;b.Show_gb.y=g_GameConfigWEB.funActivity.npcY;0==testNpc_X?b.but_Close.pos(b.Npc_bg.width-b.but_Close.width-20-this.closeOffestX,10-
this.closeOffestY):b.but_Close.pos(testNpc_X-this.closeOffestX,testNpc_Y-this.closeOffestY);"gameres/png/npc_di.png"==b.Npc_bg.skin&&b.but_Close.pos(518-this.closeOffestX+10,0-this.closeOffestY+10);b.panelPos||(b.Show_gb.width=b.Npc_bg.width,b.Show_gb.height=b.Npc_bg.height);GameMission.LoadIngimage(a,b.Show_gb);sNewNpcStr="";GameApi.ShowNewNpcDlgEx(!1);0==b.Npc_bg.width||0==b.Npc_bg.height?Laya.loader.load(npc_img_name,Laya.Handler.create(b,function(){b.SetPos()})):b.SetPos()};f.prototype.changedialog=
function(a,b,d,n,c){c&&(this.isMoveClose=c[0]?!0:!1,0<c[1]&&this.timeCountDown(c[1]));this.has_skin=!0;this.panelPos=d;g_ChangerIndex=g_Changerpak=-1;g_TempNPCLabe=!1;a=parseInt(a);if(a<g_pak_list.length){a=g_pak_list[a];var h=this;n&&(this.visible=!1);GameUtil.loadImg(b,a,function(m){npc_img_name=m;h.Npc_bg.skin=npc_img_name;h.Npc_bg.pos(browser_width/2-h.Npc_bg.width/2,browser_height/2-h.Npc_bg.height/2);h.Show_gb.width=h.Npc_bg.width;h.Show_gb.height=h.Npc_bg.height;0==testNpc_X?h.but_Close.pos(h.Npc_bg.width-
h.but_Close.width-20-h.closeOffestX,10-h.closeOffestY):h.but_Close.pos(testNpc_X-h.closeOffestX,testNpc_Y-h.closeOffestY);this.SetPos();this.visible=!0}.bind(this))}this.panelPos&&4==this.panelPos.length?(this.Show_gb.visible=!1,GameUtil.intervalFrameDeal(56,this,function(){this.Show_gb.x=parseInt(this.panelPos[0]);this.Show_gb.y=parseInt(this.panelPos[1]);this.Show_gb.width=parseInt(this.panelPos[2]);this.Show_gb.height=parseInt(this.panelPos[3]);this.Show_gb.visible=!0}.bind(this)),g_npcCanMove||
(this.Show_gb.vScrollBarSkin="")):(this.panelPos&&2==this.panelPos.length?(this.Show_gb.x=parseInt(this.panelPos[0]),this.Show_gb.y=parseInt(this.panelPos[1])):(this.Show_gb.x=0,this.Show_gb.y=0),this.Show_gb.width=this.Npc_bg.width,this.Show_gb.height=this.Npc_bg.height)};f.prototype.SetVisible=function(a){this.but_Close.pos(testNpc_X-this.closeOffestX,testNpc_Y-this.closeOffestY);"gameres/png/npc_di.png"==this.Npc_bg.skin&&this.but_Close.pos(518-this.closeOffestX+10,0-this.closeOffestY+10);this.Npc_bg.visible=
a};f.prototype.SetPos=function(){switch(this.posType){case 0:this.Npc_bg.x=0+this.nWindowsX;this.Npc_bg.y=0+this.nWindowsY;break;case 1:this.Npc_bg.x=browser_width-this.Npc_bg.width+this.nWindowsX;this.Npc_bg.y=0+this.nWindowsY;break;case 2:this.Npc_bg.y=browser_height-this.Npc_bg.height+this.nWindowsY;this.Npc_bg.x=0+this.nWindowsX;break;case 3:this.Npc_bg.x=browser_width-this.Npc_bg.width+this.nWindowsX;this.Npc_bg.y=browser_height-this.Npc_bg.height+this.nWindowsY;break;case 4:this.Npc_bg.x=(browser_width-
this.Npc_bg.width)/2+this.nWindowsX,this.Npc_bg.y=(browser_height-this.Npc_bg.height)/2+this.nWindowsY}this.Npc_bg.visible=!0;this.but_Close.visible=this.bShowClose?!0:!1};f.prototype.close=function(){this.isMoveClose=void 0;Laya.timer.clearAll(this);var a=Laya.stage.getChildByName("yangdaweigood");a&&a.removeSelf();G_NPC_ID=-1;Laya.stage.event("close_screenwin");a=!0;for(var b=0;b<g_boxItemArr.length;b++)if(g_boxItemArr[b]){a&&(Sendmessage.NpcDlgOptions(null,null,null,3),a=!1);var d=g_boxItemArr[b];
g_boxItemArr[b]=null;GameUtil.AddItemNewBag(d)}npc_img_name="gameres/png/npc_di.png";Laya.stage.off("Show_NewNpc",this,this.LoadIngimage);Laya.stage.off("Change_bg",this,this.changedialog);Laya.stage.off("close",this,this.close);Laya.stage.off("Change_pos",this,this.Change_pos);Laya.stage.off("timeCountDown",this,this.timeCountDown);Laya.stage.offAll("draw_npc_items");this.removeSelf();OpenTextColor=!0;(cur_use_app||2==g_Termial)&&Laya.stage.event("clearCheckClickHandler",DragItem.dragItemType.OkBar);
this.getChildByName("fleixbleListWin_name")&&Laya.stage.event("closeFieixbleList");this.Npc_bg.getChildByName("leaderBossWin_name")&&Laya.stage.event("closeLeaderBossWin")};return f}(NewNpcWinUI),NewSaleShop=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(400,30);this.settxt=function(h,m){this.removeChildren();var g=new Laya.Text;g.color="#ffffff";g.fontSize=18;g.text=h.name;this.addChild(g);var l=new Laya.Text;l.color="#ffffff";l.fontSize=18;
l.text=h.gprice;l.pos(g.x+200,g.y);this.addChild(l);1<=parseInt(h.gsub)&&(h=new Laya.Image,h.skin="gameres/png/npcxz2.png",h.pos(l.x+80,g.y-3),this.addChild(h));n==m&&(h=new Laya.Image,h.skin="gameres/png/npcxz.png",h.pos(0,-5),this.addChild(h))}}function b(){b.__super.call(this);this.size(300,30);this.settxt=function(h,m){if(h&&h.s){this.removeChildren();var g=new Laya.Text;g.color="#ffffff";g.fontSize=18;g.text=h.s.Name;this.addChild(g);var l=new Laya.Text;l.color="#ffffff";l.fontSize=18;l.text=
h.s.Price;l.pos(g.x+150,g.y);this.addChild(l);var p=ObjectManage.findobject(playerID);h.sellerName==p.txt_name.text&&(g.color="#28ff00",l.color="#28ff00");c==m&&(h=new Laya.Image,h.skin="gameres/png/npcxz.png",h.pos(0,-5),this.addChild(h))}}}var d=new Laya.Point(0,0),n=-1,c=-1;Laya.class(f,"NewSaleShop",NewSaleShopUI);Laya.class(a,"NewSaleRender",Laya.Box);Laya.class(b,"NewSaleRender2",Laya.Box);f.prototype.UpdateItem=function(h,m){h.settxt(h.dataSource,m)};f.prototype.M_Listtselect=function(h){G_npcShopPage=
0;n=h;c=-1;h<g_ItemMemuList.length&&Sendmessage.sendSaleDetailItem(g_ItemMemuList[n],G_npcShopPage);this.M_List._selectedIndex=-1};f.prototype.changePage=function(h){null==g_ItemMemuList[n]||0>G_npcShopPage+h||Sendmessage.sendSaleDetailItem(g_ItemMemuList[n],G_npcShopPage+h)};f.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.NpcShop_bg.skin="gameres/png/npcitems.png";G_npcShopPage=0;this.NpcShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.NpcShop_bg.on(Laya.Event.MOUSE_UP,
this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.pageup.on(Laya.Event.CLICK,this,this.changePage,[-10]);this.pagedown.on(Laya.Event.CLICK,this,this.changePage,[10]);this.M_List.repeatX=1;this.M_List.repeatY=10;this.M_List.vScrollBarSkin="gameres/ui/vscroll.png";this.M_List.itemRender=a;this.M_List.selectEnable=!0;this.M_List.selectHandler=new Laya.Handler(this,this.M_Listtselect);this.M_List.renderHandler=
new Laya.Handler(this,this.UpdateItem);this.M_List.array=g_ItemMemuList;this.M_List2.repeatX=1;this.M_List2.repeatY=10;this.M_List2.spaceX=1;this.M_List2.spaceY=1;this.M_List2.itemRender=b;this.M_List2.selectEnable=!0;this.M_List2.selectHandler=new Laya.Handler(this,this.M_Listtselect2);this.M_List2.renderHandler=new Laya.Handler(this,this.UpdateItem2);for(var h=[],m=0;20>m;m++)h.push(m);this.M_List2.array=h;this.inf_Close.on(Laya.Event.CLICK,this,this.oninf_Close);Laya.stage.on("Update_Sale_Items2",
this,this.ShowItem2);Laya.stage.on("npc_sale_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);c=n=-1;this.Npc_Buy.on(Laya.Event.CLICK,this,this.onNpc_Buy)};f.prototype.onNpc_Buy=function(h){null!=g_ItemMemuList[n]&&null!=g_ItemMemuListInf[c]&&Sendmessage.SendButItemFormSale(g_ItemMemuListInf[c])};f.prototype.BUYITEM_SUCCESS=function(){g_ItemMemuListInf.splice(c,1);this.ShowItem2()};f.prototype.ShowItem2=function(){this.inf_bg.visible=!0;this.pageNum.text=G_npcShopPage/10+1;this.M_List2.array=g_ItemMemuListInf;
this.M_List2.refresh()};f.prototype.UpdateItem2=function(h,m){h.settxt(h.dataSource,m)};f.prototype.M_Listtselect2=function(h){c=h;g_OpenIdx=10;g_MoveItems.Index=-11;g_MoveItems.Items=g_ItemMemuListInf[h];GameUtil.NewShowItemsInf(g_MoveItems.Items);this.M_List2._selectedIndex=-1};f.prototype.oninf_Close=function(){this.inf_bg.visible=!1;G_npcShopPage=0};f.prototype.onMouseDown=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)){var h=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));d.x=h.x;d.y=h.y;this.bgCanMove=!0}};f.prototype.onMouseUp=function(){this.bgCanMove=!1};f.prototype.onMouseMove=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.bgCanMove){var h=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.NpcShop_bg.x+=h.x-d.x;this.NpcShop_bg.y+=
h.y-d.y}};f.prototype.close=function(){Laya.stage.off("Update_Sale_Items2",this,this.ShowItem2);Laya.stage.off("npc_sale_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);this.removeSelf()};return f}(NewSaleShopUI),NewStore=function(e){function f(){f.__super.call(this);this.init()}var a=new Laya.Point(0,0),b=-1;Laya.class(f,"NewStore",NewStoreRomUI);f.prototype.init=function(){g_OpenStore=!0;var d=GameUtil.InstanceOfMem(NewBagUI);d&&(this.y=d.Bagimg_bg.y-6);this.but_Close.on(Laya.Event.CLICK,this,this.close);
this.btn_fastaccess.on(Laya.Event.CLICK,this,this.onFastAccess);Laya.stage.on("Show_Store_Item_ico",this,this.ShowInfo);Laya.stage.on("closestore",this,this.close);this.Store_bg.ItemsList=[];this.Store_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Store_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Store_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.m_List.repeatX=6;this.m_List.repeatY=6;this.m_List.spaceX=-1;this.m_List.spaceY=-1;this.m_List.itemRender=DragItem;DragItem.testType=
DragItem.dragItemType.wareHouseItem;this.m_List.selectEnable=!0;this.m_List.selectHandler=new Laya.Handler(this,this.StoreSelect);this.m_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.curPage=0;this.m_List.page=0;this.lastPage_btn.gray=!0;this.lastPage_btn.on(Laya.Event.CLICK,this,this.onChangePage,[!0]);this.nextPage_btn.on(Laya.Event.CLICK,this,this.onChangePage,[!1])};f.prototype.onChangePage=function(d,n){d?this.curPage--:this.curPage++;this.curPage=GameUtil.valueLimit(this.curPage,
this.m_List.totalPage-1);d?this.lastPage_btn.gray||(this.m_List.page=this.curPage):this.nextPage_btn.gray||(this.m_List.page=this.curPage);this.lastPage_btn.gray=0==this.curPage;this.nextPage_btn.gray=this.curPage>=this.m_List.totalPage-1};f.prototype.lb_Img_Click=function(d){console.log("sName",d.target.label)};f.prototype.UpdateItem=function(d,n){d.showItemUI({itemsData:g_StoreItemList,selectIndex:b,hasBgFrame:!0,maxUnlockCount:g_StoreMaxCount-1,itemType:DragItem.dragItemType.wareHouseItem},n)};
f.prototype.ShowItemico=function(d){b=-1;this.ShowInfo(d)};f.prototype.ShowInfo=function(d){if(0<d)for(var n=[],c=0;c<d;c++)n.push(c);else for(n=[],c=0;c<g_StoreMaxCount;c++)n.push(c);this.m_List.array=n;this.m_List.totalPage=Math.ceil(this.m_List.array.length/36);this.m_List.refresh()};f.prototype.StoreSelect=function(d){b=d;if(d<g_StoreItemList.length&&null!=g_StoreItemList[d])if(g_fastaccess){for(var n=!0,c=ObjectManage.GetAttr(playerID),h=0;h<g_BagItemsList.length;h++)g_BagItemsList[h]||(n=!1);
if(n){Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return}if(c&&0<c.Weight+g_StoreItemList[d].s.Weight-c.MaxWeight){Laya.stage.event("show_log",[{txt:"\u8d1f\u91cd\u8d85\u51fa",color:"#ff0000"}]);return}g_WaitItems.Items=g_StoreItemList[d];n=1;1!=g_StoreType&&(n=2);Sendmessage.DepotOrBagItems2(g_WaitItems.Items.MakeIndex,n);GameUtil.DelStoreItems(g_WaitItems.Items.MakeIndex);g_WaitItems.Items=null;--g_StoreCount}else g_OpenIdx=2,g_MoveItems.Items=g_StoreItemList[d],
GameUtil.NewShowItemsInf(g_MoveItems.Items);d>=g_StoreMaxCount&&Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u662f\u5426\u5f00\u542f\u683c\u5b50\uff1f",callfn:function(){Sendmessage.DepotOrBagItems2(0,0)},callcancelfun:function(){}}]);this.m_List._selectedIndex=-1};f.prototype.onMouseDown=function(){if(!this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.Store_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var d=
this.Store_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));a.x=d.x;a.y=d.y;this.TaskCanMove=!0}};f.prototype.onMouseUp=function(){this.TaskCanMove=!1};f.prototype.onMouseMove=function(){if(!this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.Store_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.TaskCanMove){var d=this.Store_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));
this.Store_bg.x+=d.x-a.x;this.Store_bg.y+=d.y-a.y}};f.prototype.onFastAccess=function(){g_fastaccess=!g_fastaccess;this.btn_fastaccess.skin=g_fastaccess?"gameres/ui/fastaccess2.png":"gameres/ui/fastaccess1.png"};f.prototype.close=function(){Laya.stage.off("Show_Store_Item_ico",this,this.ShowInfo);Laya.stage.off("closestore",this,this.close);g_OpenStore=g_fastaccess=!1;this.removeSelf();this.m_List.destroy();(cur_use_app||2==g_Termial)&&Laya.stage.event("clearCheckClickHandler",DragItem.dragItemType.wareHouseItem)};
return f}(NewStoreRomUI),PersonalStore=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.item=new PerStore_shopUI;var d=ObjectManage.findobject(playerID);this.item.lable_shopName.on(Laya.Event.CLICK,this,function(){var n=this.item.lable_name.text;n&&""!=n&&(g_StoreName=n);d&&d.txt_name&&d.txt_name.text==n?Sendmessage.QuerySelectShopInfo(d.txt_name.text,d.data.record):Sendmessage.QueryUserShopItems(0,0,0,0,0,"",n);(n=GameUtil.InstanceOfMem(PersonalStoreUI))&&
n.BtnClose()});this.addChild(this.item);this.show=function(n,c){c="";switch(n.btState){case 0:c="\u5728\u7ebf";break;case 1:c="\u6446\u644a";break;case 2:c="\u79bb\u7ebf"}this.item.lable_shopName.text=n.sShopName;this.item.lable_name.text=n.sMasterName;this.item.lable_time.text=n.dCreateDate;this.item.lable_itemNum.text=n.nSellingItemCount;this.item.lable_num.text=n.nSelledItemCount;this.item.lable_state.text=c;this.item.label_attention.text=n.nCareValue;g_StoreOnline=c}}function b(){b.__super.call(this);
this.ByItem=new PerStoreItemUI;this.addChild(this.ByItem);var d=ObjectManage.findobject(playerID);this.ShowItem=function(n,c){var h=GameUtil.ShowMoneyType(n.btMoneyType),m=GameUtil.ShowbtItemType(n.btItemType);c=d&&d.txt_name&&n.sMasterName==d.txt_name.text?"\u53d6\u56de":"\u8d2d\u4e70";GameUtil.ShowItemNum(n.Item,this.ByItem.ItemImg,23.5,18.5);this.ByItem.ItemName.text=n.Item.s.Name;this.ByItem.ItemPrice.text=n.Item.s.Price+h;this.ByItem.ShopName.text=n.sShopName;this.ByItem.ShopkeeperName.text=
n.sMasterName;this.ByItem.ItemType.text=m;this.ByItem.ItemBy.text=c};this.ByItem.ShopName.on(Laya.Event.CLICK,this,function(){var n=this.ByItem.ShopkeeperName.text;n&&""!=n&&(g_StoreName=n);d&&d.txt_name&&d.txt_name.text==n?Sendmessage.QuerySelectShopInfo(d.txt_name.text,d.data.record):Sendmessage.QueryUserShopItems(0,0,0,0,0,"",n);(n=GameUtil.InstanceOfMem(PersonalStoreUI))&&n.BtnClose()});this.ByItem.ItemBy.on(Laya.Event.CLICK,this,function(){var n=this.dataSource.Item.MakeIndex,c=this.ByItem.ShopkeeperName.text,
h=this.ByItem.ItemName.text;"\u8d2d\u4e70"==this.ByItem.ItemBy.text?n&&""!=n&&Laya.stage.event("show_alert_dlg",[{type:2,txt:'\u662f\u5426\u786e\u8ba4\u8d2d\u4e70"'+this.ByItem.ItemName.text+'"?',callfn:function(){Sendmessage.SendBuyUserShopItem(n,c)}}]):"\u53d6\u56de"==this.ByItem.ItemBy.text&&n&&""!=n&&(Sendmessage.SendMoveMyShopItem(n,0,2,h),(h=GameUtil.InstanceOfMem(PersonalStoreUI))&&h.BtnClose())})}Laya.class(f,"PersonalStore",PersonalStoreUI);Laya.class(a,"shopItem",Laya.Box);Laya.class(b,
"ByShopItem",Laya.Box);e=f.prototype;e.init=function(){this.startpos=new Laya.Point;this.box_1.visible=!1;var d=["\u4e0d\u9650"];this.btn_close.on(Laya.Event.CLICK,this,this.BtnClose);this.btn_myshop.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_buyitem.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_allstore.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_next.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_previous.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_first.on(Laya.Event.CLICK,
this,this.BtnClick);this.btn_last.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_itemsearch.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_search.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);Laya.stage.on("game_show_PersonalStore",this,this.ShowStore);Laya.stage.on("game_show_PersonalItems",this,this.ShowPresonalItem);Laya.stage.on("game_show_Page",this,this.ShowPage);this.list_shop.repeatX=1;this.list_shop.repeatY=8;this.list_shop.selectEnable=
!0;this.list_shop.itemRender=a;this.list_shop.renderHandler=new Laya.Handler(this,this.updataShop);this.list_shop.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_item.itemRender=b;this.list_item.repeatX=1;this.list_item.repeatY=5;this.list_item.selectEnable=!0;this.list_item.renderHandler=new Laya.Handler(this,this.updataItem);this.list_item.selectHandler=new Laya.Handler(this,this.SelectItem);for(var n=0;n<g_GameMoneyType.length;n++)g_GameMoneyType[n]&&""!=g_GameMoneyType[n]&&d.push(g_GameMoneyType[n]);
this.pricetype.labels=d.toString();this.pricetype.selectedIndex=0;this.Search();this.input_search.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_search.on(Laya.Event.BLUR,this,this.OnBlur);this.ItemSearch.on(Laya.Event.FOCUS,this,this.OnFocus);this.ItemSearch.on(Laya.Event.BLUR,this,this.OnBlur);this.price_low.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_low.on(Laya.Event.BLUR,this,this.OnBlur);this.price_high.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_high.on(Laya.Event.BLUR,this,
this.OnBlur)};e.OnFocus=function(){cur_use_app&&(this.img_bg.top=-280)};e.OnBlur=function(){cur_use_app&&(this.img_bg.y=3)};e.BtnClose=function(){this.removeSelf();Laya.stage.off("game_show_PersonalStore",this,this.ShowStore);Laya.stage.off("game_show_PersonalItems",this,this.ShowPresonalItem);Laya.stage.off("game_show_Page",this,this.ShowPage)};e.BtnClick=function(d){switch(d.target.name){case "myshop":(d=ObjectManage.findobject(playerID))&&d.txt_name&&Sendmessage.QuerySelectShopInfo(g_RoleNameOnly,
d.data.record);break;case "buyitem":this.btn_allstore.selected=!1;this.btn_buyitem.selected=!0;this.box_0.visible=!1;this.box_1.visible=!0;break;case "btn_allstore":this.box_0.visible=!0;this.box_1.visible=!1;this.btn_allstore.selected=!0;this.btn_buyitem.selected=!1;break;case "btn_first":this.box_0.visible?0<G_Cur_Store_Page&&Sendmessage.GetUserShops(0):this.box_1.visible&&0<G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(0);break;case "btn_previous":this.box_0.visible?0<G_Cur_Store_Page&&Sendmessage.GetUserShops(G_Cur_Store_Page-
8):this.box_1.visible&&0<G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(G_Cur_Item_Page-5);break;case "btn_next":this.box_0.visible?8<G_Total_Store_num-G_Cur_Store_Page&&Sendmessage.GetUserShops(G_Cur_Store_Page+8):this.box_1.visible&&5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(G_Cur_Item_Page+5);break;case "btn_last":this.box_0.visible?8<G_Total_Store_num-G_Cur_Store_Page&&Sendmessage.GetUserShops(8*(this.MaxPage-1)):this.box_1.visible&&5<G_Total_Item_num-G_Cur_Item_Page&&
Sendmessage.SearchGetShopItems(5*(this.MaxPage-1));break;case "btn_search":Sendmessage.QueryUserShops(this.searchType.selectedIndex,this.sort.selectedIndex,this.input_search.text);break;case "btn_itemsearch":this.Search()}this.list_shop.selectedIndex=-1;this.list_item.selectedIndex=-1};e.Search=function(){var d=GameUtil.ShowSelectedIdx(this.pricetype.selectedLabel),n=parseInt(this.price_low.text),c=parseInt(this.price_high.text);Sendmessage.SearchShopItems(n,c,this.ItemType.selectedIndex,d,this.ItemSort.selectedIndex,
this.ItemSearch.text)};e.ShowPage=function(d,n,c){this.MaxPage=Math.ceil(d/c);this.CurPage=Math.ceil(n/c)+1;0==d&&(this.CurPage=0);5==c?this.item_num.text=this.CurPage+"/"+this.MaxPage:8==c&&(this.store_num.text=this.CurPage+"/"+this.MaxPage)};e.ShowStore=function(d){this.list_shop.array=d;this.selected=-1};e.updataShop=function(d,n){-1==this.selected&&d.show(d.dataSource,n);d.item.img_bg.skin=this.selected==n?"gameres/png/personalstore_00112.png":""};e.OnSelect=function(d){this.selected=d};e.ShowPresonalItem=
function(d){this.list_item.array=d;this.ItemSelected=-1};e.updataItem=function(d,n){-1==this.ItemSelected&&d.ShowItem(d.dataSource,n);this.ItemSelected==n?(d.ByItem.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=-1,GameUtil.NewShowItemsInf(d.dataSource.Item,null,this.img_bg.x)):d.ByItem.img_bg.skin=""};e.SelectItem=function(d){this.ItemSelected=d};e.OnMouseDown=function(d){this.box_0.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.box_1.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||
(this.startpos.x=d.stageX,this.startpos.y=d.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};e.onMouseMove=function(d){this.img_bg.x+=d.stageX-this.startpos.x;this.img_bg.y+=d.stageY-this.startpos.y;this.startpos.x=d.stageX;this.startpos.y=d.stageY};e.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};return f}(PersonalStoreUI),RichText=
function(e){function f(a,b,d){f.__super.call(this);this.init(a,b,d)}Laya.class(f,"RichText",Laya.Panel);f.prototype.init=function(a,b,d){this.line_h=0;this.size(a,b);this.vScrollBarSkin="";this.all_list=[];this.privateChat_list=[];this.max_line=d;this.cur_line=0};f.prototype.autolien=function(a,b){if(this.line_h>this.height){if(this.cur_line>this.max_line){this.line_h-=a;b||(b=this.all_list);for(var d=b.length-1;0<=d;d--){var n=b[d];0==d?(n.removeSelf(),b.splice(d,1),this.cur_line--):n.y-=a}}this.vScrollBar&&
(a=this.line_h-this.height,this.vScrollBar.setScroll(0,a,a))}};f.prototype.resetbox=function(a,b){this.removeChildren();this.cur_line=this.line_h=0;b||(b=this.all_list);for(var d=0,n=b.length;d<n;d++){var c=b[d];c&&c.visible&&(c.pos(0,this.line_h),this.addChild(c),this.line_h+=a,this.cur_line++,this.autolien(22,b))}};f.prototype.noChineseNumsOfContent=function(a,b){for(var d=0,n=0;n<a.length;n++)255>=a.charCodeAt(n)&&d++;return Math.floor(d/3)+(b>d?0:-2)};f.prototype.setBox=function(a,b,d,n,c){var h=
0,m=[],g=new Laya.Box;g.width=this.width-20;var l=new Laya.Sprite;g.addChild(l);g.type=d;g.isTopInfo=c;for(var p=0;0<a.length;){if((p=a[0])&&h+p.width<this.width-20)p.pos(h,2),g.addChild(p),h+=p.width,a.shift();else if("label"==p.name){var q=new Laya.Sprite;q.name="label";q.color=p.color;q.height=18;if(n)p.width=GameUtil.getTextWidthByMeasure(18,p.text);else{var r=Math.ceil((this.width-10-h)/18),u=this.noChineseNumsOfContent(p.text,r);r+=u;for(var v=0,w=p.text.length+1;v<w;v++)if(!(v<r)&&(q.text=
p.text.substr(0,v),u=GameUtil.getTextWidthByMeasure(18,q.text),h+u>=this.width-10)){q.text=p.text.substr(v-1);GameUtil.resetGraphicsTxtAttr(q);q.width=GameUtil.getTextWidthByMeasure(18,q.text);p.text=p.text.substr(0,v-1);GameUtil.resetGraphicsTxtAttr(p);p.width=GameUtil.getTextWidthByMeasure(18,p.text);a[0]=q;m=a;a=[];break}}p.pos(h,2);g.addChild(p);h+=p.width;0<a.length&&a.shift()}else m=a,a=[];p=p.width+p.x}l.graphics.drawRect(0,0,p+10,22,Get2RGB(parseInt(b)));g.pos(0,this.line_h);this.addChild(g);
this.addBoxToPrivateChatList(g);this.all_list.push(g);this.line_h+=22;this.cur_line++;this.autolien(22,this.all_list);0<n&&(this.scrollTextByOverWidth(g),Laya.timer.once(1E3*n,this,function(){g.time=-1;for(var z=0;z<this.all_list.length;z++)-1==this.all_list[z].time&&(g.removeSelf(),this.all_list.splice(z,1),Laya.stage.event("delChatBox"),this.height-=21,this.cur_line--,5>this.height&&(this.height=0));this.resetbox(22,this.all_list)},[g]));m&&0<m.length&&(!n||0>n)&&!c&&this.setBox(m,b,d,n)};f.prototype.scrollTextByOverWidth=
function(a){if(a.measureWidth>this.width||a.width>this.width){var b=a.measureWidth-this.width;this.cycleRolling(a,b,3E3/225*b,!0)}};f.prototype.cycleRolling=function(a,b,d,n){var c=this;a&&a.parent&&(n=(void 0===n?0:n)?0:3E3,Laya.Tween.to(a,{x:-b},d,Laya.Ease.sineInOut,Laya.Handler.create(this,function(){Laya.Tween.to(a,{x:0},0,null,null,2E3);c.cycleRolling(a,b,d)}),n))};f.prototype.addBoxToPrivateChatList=function(a){2==a.type&&this.privateChat_list.push(a)};f.prototype.showByType=function(a,b,d){2==
a?(this.setBoxShow(this.privateChat_list,a),this.resetbox(22,this.privateChat_list)):(this.setBoxShow(this.all_list,a),this.resetbox(22,this.all_list))};f.prototype.setBoxShow=function(a,b){for(var d,n=0,c=a.length;n<c;n++)if(d=a[n])d.visible=(d.type==b||-1==b)&&!d.isTopInfo};return f}(Laya.Panel),RockerUI=function(e){function f(){f.__super.call(this);this.rocker=new Laya.Sprite;this.visible=!1;this.onLoaded()}this.rocker=null;this.use_h=this.use_w=0;this.type="";this.lastmovedir=-1;this.rockercount=
1;Laya.class(f,"RockerUI",Laya.View);f.prototype.onLoaded=function(){this.curpos=new Laya.Point;this.dir=0;this.bg=new Laya.Image;this.bg.alpha=1;this.on(Laya.Event.MOUSE_DOWN,this,this.onDragStart);var a=Laya.loader.getRes("gameres/ui/rocke_bj.png");a.width=154;a.height=154;this.bg.loadImage("gameres/ui/rocke_bj.png");this.bg_radius=a.width/2;this.rockerman=new Laya.Image;this.rockerman.loadImage("gameres/ui/rockerman_1.png");this.rockerman.pos(53,50);this.rocker_hu=new Laya.Image;this.rocker_hu.loadImage("gameres/png/rocker_hu_1.png",
0,0,154,154);this.rocker_hu.pos(0,0);this.bg.addChild(this.rockerman);this.bg.addChild(this.rocker_hu);this.bg.x-=65;this.bg.y+=70;this.addChild(this.bg);this.clickcdtime=Laya.Browser.now();this.but_dir_list=[];for(var b=0;8>b;b++){this.but_dir=new Laya.Button;this.but_dir.alpha=1;this.but_dir.skin="gameres/ui/rocke_"+b+".png";this.but_dir.stateNum=1;this.but_dir.nDir=b;switch(b){case 0:this.but_dir.x=49;this.but_dir.y=-13;this.but_dir_list.push(this.but_dir);break;case 1:this.but_dir.x=94;this.but_dir.y=
8;this.but_dir_list.push(this.but_dir);break;case 2:this.but_dir.x=112;this.but_dir.y=49;this.but_dir_list.push(this.but_dir);break;case 3:this.but_dir.x=93;this.but_dir.y=91;this.but_dir_list.push(this.but_dir);break;case 4:this.but_dir.x=49;this.but_dir.y=114;this.but_dir_list.push(this.but_dir);break;case 5:this.but_dir.x=7;this.but_dir.y=95;this.but_dir_list.push(this.but_dir);break;case 6:this.but_dir.x=-16;this.but_dir.y=49;this.but_dir_list.push(this.but_dir);break;case 7:this.but_dir.x=2,
this.but_dir.y=6,this.but_dir_list.push(this.but_dir)}this.but_dir.on(Laya.Event.CLICK,this,this.DirMoseDown);this.bg.addChild(this.but_dir);this.but_dir_list[b].visible=!1;this.but_dir_list[b].alpha=1}this.rocker.loadImage("gameres/ui/rocke_qiu.png");this.addChild(this.rocker);b=Laya.loader.getRes("gameres/ui/rocke_qiu.png");this.ball_radius=b.width/2;this.rocker.pivot(b.width/2,b.height/2);this.rocker.alpha=1;this.use_w=a.width/2-65;this.use_h=a.height/2+70;this.rocker.pos(this.use_w,this.use_h);
g_rocker_moving=this.is_move=!1;Laya.timer.clear(this,this.passEvent);Laya.timer.frameLoop(1,this,this.passEvent);Laya.stage.on("move_position",this,this.ChangeRocker);Laya.stage.on("dragEnd",this,this.leaverocker);this.turn_dir=this.move_time=0};f.prototype.DirMoseDown=function(a){if(!(roledielock||Actionlock||rockerlock||player_stalls)&&400<=Laya.Browser.now()-this.clickcdtime){a=a.target.nDir;var b=ObjectManage.findobject(playerID);b.cur_dir==a||!b.action_over&&1!=b.cur_state&&6!=b.cur_state?Objectcontrol.objectmove({dir:a,
state:g_Move_Type}):(GameUtil.delhalo(attackerID),b.changestate(null,1,a,!0),Sendmessage.ChangDir(b.grid.x,b.grid.y,a));this.clickcdtime=Laya.Browser.now()}};f.prototype.passEvent=function(){if(!GlobalCfglist.doubleRocker&&!g_furious_collision_ing&&this.dir&&this.is_move){if(1==Objectcontrol.self_obj.paralysis_state){var a=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.WALK),b=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.RUN);if(1==g_Move_Type&&0==a)return a;if(2==g_Move_Type&&0==b)return b}g_rocker_moving=
!0;Objectcontrol.objectmove({dir:this.dir-1,state:g_Move_Type});Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null}};f.prototype.onDragStart=function(a){Objectcontrol.self_obj&&!GlobalCfglist.doubleRocker&&(this.curTouchid=a.touchId,this.rocker&&this.rocker.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.move_over=this.is_move=!0,attackerID=0,Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onDragEnd),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onDragMove),Laya.stage.on(Laya.Event.MOUSE_UP,
this,this.onDragEnd),use_move_start=!0,this.move_time=Laya.Browser.now(),Laya.timer.loop(200,this,this.rockerman_loop)))};f.prototype.onDragMove=function(a){if(a.touchId==this.curTouchid&&(autohookstate&&Laya.stage.event("stopAutoHookStateByRockerMove"),this.bg.alpha=1,this.rocker.alpha=1,rockerfirst=!0,this.is_move&&(677>Laya.stage.mouseX||300>Laya.stage.mouseY))){this.curpos.x=this.mouseX;this.curpos.y=this.mouseY;a=this.curpos.distance(this.use_w,this.use_h);var b=Math.atan2(this.curpos.y-this.use_h,
this.curpos.x-this.use_w),d=this.bg_radius;if(a<.5*d)this.rocker.pos(this.curpos.x,this.curpos.y),g_Move_Type=1;else{var n=Math.cos(b)*d+this.use_w,c=Math.sin(b)*d+this.use_h;a<=d?this.rocker.pos(this.curpos.x,this.curpos.y):this.rocker.pos(n,c);g_Move_Type=2;g_boCobWeb&&(g_Move_Type=1)}10>a||(this.turn_dir=0,this.dir=this.Countdir(b),rocker_move_dir=this.dir-1,this.passEvent())}};f.prototype.rockerman_loop=function(){6<rockercount&&(rockercount=1);1==g_Move_Type?this.rockerman.skin="gameres/ui/rockerman_"+
rockercount+".png":2==g_Move_Type&&(this.rockerman.skin="gameres/ui/rockerman_1"+rockercount+".png");-1<rocker_move_dir&&8>rocker_move_dir&&(this.rocker_hu.skin="gameres/png/rocker_hu_"+rocker_move_dir+".png");rockercount++};f.prototype.setRockerType=function(a){this.type=a};f.prototype.leaverocker=function(){g_rocker_moving=this.is_move=!1;this.move_time=this.turn_dir=this.dir=this.curTouchid=0;rocker_move_dir=-1;this.rocker.pos(this.use_w,this.use_h);Laya.stage.event("RockerMoveEnd");Laya.stage.event("rockertip",
!0);Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onDragEnd);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onDragEnd);rockerposview||(this.visible=!1);Laya.timer.clear(this,this.rockerman_loop)};f.prototype.onDragEnd=function(a){use_move_start=rockerfirst=!1;this.bg&&a&&(!(a.touches&&1<=a.touches.length)&&Objectcontrol.self_obj||this.isSpecialChannelOnIOS(a))&&(0==this.turn_dir||!Objectcontrol.self_obj||Objectcontrol.self_obj.cur_dir+1==this.turn_dir||
1!=Objectcontrol.self_obj.cur_state&&6!=Objectcontrol.self_obj.cur_state||(Objectcontrol.self_obj.changestate(null,1,this.turn_dir-1,!0),Sendmessage.ChangDir(Objectcontrol.self_obj.grid.x,Objectcontrol.self_obj.grid.y,this.turn_dir-1)),this.leaverocker())};f.prototype.isSpecialChannelOnIOS=function(a){return Laya.Browser.onIOS&&a.touches&&1<=a.touches.length&&a.touchId==this.curTouchid};f.prototype.Countdir=function(a){a=0<a?180*a/Math.PI:180*(2*Math.PI+a)/Math.PI;return 20<a&&55>=a?4:55<a&&120>=
a?5:120<a&&150>=a?6:150<a&&210>=a?7:210<a&&250>=a?8:250<a&&300>=a?1:300<a&&330>=a?2:3};f.prototype.ChangeRocker=function(){if(rockerposview){this.left=125;this.bottom=78;for(var a=0;8>a;a++)this.but_dir_list[a].visible=!0}else for(a=0;8>a;a++)this.but_dir_list[a].visible=!1;GlobalCfglist.doubleRocker||(this.rocker.visible=!0,Laya.stage.event("rockertip",!rockerposview),this.visible=rockerposview)};return f}(Laya.View),ScreenWin=function(e){function f(){f.__super.call(this);this.init()}function a(){ItemsRender.__super.call(this);
this.size(51,51);this.settxt=function(m,g){this.removeChildren();var l=new Laya.Image;l.skin="gameres/ui/img_bag_bg.png";n==g&&(l.skin="gameres/ui/img_bag_bg1.png");l.width=50;l.height=50;this.addChild(l);if(g<d.length&&null!=d[g]&&d[g]&&d[g].s){var p=new Laya.Image;GameUtil.loadImg(d[g].s.Looks,"items",function(q){p.skin=q;p.pos(25-p.width/2,25-p.height/2);p._style&&(p.blendMode="overlay");GameUtil.setTxtFixedPos(p,l.width)});l.addChild(p);GameUtil.ShowItemeffect(l,d[g]);m=d[g];g=m.s.StdMode;(17==
g||18==g||41==g||40==g||42==g||31==g&&-1!=m.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<m.s.Reserved&&0<m.Dura?(g=new Laya.Text,g.color="#ffffff",g.align="right",g.width=40,g.text="x"+(m.Dura+1),GameUtil.setCanAddTxtStroke(g),p.addChild(g),GameUtil.setTxtFixedPos(p,l.width)):0==g&&5==m.s.Source&&0<m.Dura&&(g=new Laya.Text,g.color="#ffffff",g.align="right",g.width=40,g.text="x"+m.Dura,GameUtil.setCanAddTxtStroke(g),p.addChild(g),GameUtil.setTxtFixedPos(p,l.width,l.height))}}}var b=new Laya.Point(0,
0),d=[],n=-1,c=-1,h=-1;Laya.class(f,"ScreenWin",ScreenWUI);Laya.class(a,"ScreeRender",Laya.Box);f.prototype.RefreshSearchItems=function(){this.SearchItems(h,c,this.sellTypes)};f.prototype.SearchItems=function(m,g,l){this.InType=g;d=[];this.m_List.refresh();c=g;h=m;l&&(this.sellTypes=l);switch(g){case 1:for(g=0;g<g_BagItemsList.length;g++)if(null!=g_BagItemsList[g]){var p=GameUtil.GetItemType(g_BagItemsList[g].s);l=g_BagItemsList[g].s.OverLap;if(0==l||1==l)m==U_ARMRINGL||m==U_ARMRINGR?p!=U_ARMRINGL&&
p!=U_ARMRINGR&&(m!=U_ARMRINGL||25!=g_BagItemsList[g].s.StdMode)||d.push(g_BagItemsList[g]):m==U_RINGL||m==U_RINGR?p!=U_RINGL&&p!=U_RINGR||d.push(g_BagItemsList[g]):m==U_FASHIONARMRINGL||m==U_FASHIONARMRINGR?p!=U_FASHIONARMRINGL&&p!=U_FASHIONARMRINGR||d.push(g_BagItemsList[g]):m==U_FASHIONRINGL||m==U_FASHIONRINGR?p!=U_FASHIONRINGL&&p!=U_FASHIONRINGR||d.push(g_BagItemsList[g]):p!=m||d.push(g_BagItemsList[g])}break;case 2:for(g=0;g<g_BagItemsList.length;g++)if(m=!1,null!=g_BagItemsList[g]&&3>=g_BagItemsList[g].s.StdMode&&
"\u4fee\u590d\u795e\u6c34"!=g_BagItemsList[g].s.Name){for(l=0;l<g_DrugItemsList.length;l++)if(null!=g_DrugItemsList[l]&&g_BagItemsList[g].s.Name==g_DrugItemsList[l].s.Name){m=!0;break}m||d.push(g_BagItemsList[g])}break;case 3:if("*"==m)for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&d.push(g_BagItemsList[g]);else if(m)for(m=m.split(","),g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&-1!=m.indexOf(g_BagItemsList[g].s.StdMode+"")&&d.push(g_BagItemsList[g]);break;case 4:for(g=0;g<g_BagItemsList.length;g++)null!=
g_BagItemsList[g]&&4<g_BagItemsList[g].s.StdMode&&this.filterItemByStdMode(g_BagItemsList[g],l);break;case 5:for(g=0;g<g_BagItemsList.length;g++)null!=g_BagItemsList[g]&&this.filterItemByStdMode(g_BagItemsList[g],l);break;case 6:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&g_BagItemsList[g].s.Name==m&&d.push(g_BagItemsList[g]);break;case 7:for(g=0;g<g_HeroBagItemsList.length;g++)null!=g_HeroBagItemsList[g]&&(p=GameUtil.GetItemType(g_HeroBagItemsList[g].s),l=g_HeroBagItemsList[g].s.OverLap,
0==l||1==l)&&(m==U_ARMRINGL||m==U_ARMRINGR?p!=U_ARMRINGL&&p!=U_ARMRINGR||d.push(g_HeroBagItemsList[g]):m==U_RINGL||m==U_RINGR?p!=U_RINGL&&p!=U_RINGR||d.push(g_HeroBagItemsList[g]):m==U_FASHIONARMRINGL||m==U_FASHIONARMRINGR?p!=U_FASHIONARMRINGL&&p!=U_FASHIONARMRINGR||d.push(g_HeroBagItemsList[g]):m==U_FASHIONRINGL||m==U_FASHIONRINGR?p!=U_FASHIONRINGL&&p!=U_FASHIONRINGR||d.push(g_HeroBagItemsList[g]):p!=m||d.push(g_HeroBagItemsList[g]));break;case 8:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&
d.push(g_BagItemsList[g]);break;case 9:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&(p=g_BagItemsList[g].s.Expand1,l=g_BagItemsList[g].s.OverLap,4!=l&&5!=l&&6!=l&&7!=l||p!=m&&0!=p||d.push(g_BagItemsList[g]));break;case 10:for(g=0;g<g_BagItemsList.length;g++)null!=g_BagItemsList[g]&&(p=g_BagItemsList[g].s.Expand1,l=g_BagItemsList[g].s.OverLap,2!=l&&3!=l&&6!=l&&7!=l||p!=m&&0!=p&&7!=p||d.push(g_BagItemsList[g]));break;case 11:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&d.push(g_BagItemsList[g]);
break;case 12:m=g_BagItemsList;if(4==Gameconfig.drugType||5==Gameconfig.drugType||6==Gameconfig.drugType)m=g_HeroBagItemsList;for(g=0;g<m.length;g++)if(l=m[g])switch(Gameconfig.drugType){case 0:case 4:0==l.s.StdMode&&0<l.s.AC&&0==l.s.MAC&&d.push(l);break;case 1:case 5:0==l.s.StdMode&&0==l.s.AC&&0<l.s.MAC&&d.push(l);break;case 2:case 6:0==l.s.StdMode&&0<l.s.AC&&0<l.s.MAC&&d.push(l);break;case 3:(2!=l.s.StdMode&&3!=l.s.StdMode||-1==l.s.Name.indexOf("\u4f20\u9001"))&&-1==l.s.Name.indexOf("\u56de\u57ce")&&
-1==l.s.Name.indexOf("\u5730\u7262\u9003\u8131")||d.push(l)}break;case 13:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&d.push(g_BagItemsList[g]);break;case 14:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&(m=g_BagItemsList[g].s.StdMode,5>m||31==m||40==m||41==m||49==m||54<m&&90>m&&62!=m&&64!=m&&65!=m||175==m||176==m||177==m||211==m||d.push(g_BagItemsList[g]));break;case 15:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&(m=g_BagItemsList[g].s.StdMode,55!=m&&56!=m&&57!=m&&
58!=m&&175!=m||d.push(g_BagItemsList[g]));break;case 16:for(g=0;g<g_BagItemsList.length;g++)g_BagItemsList[g]&&(m=g_BagItemsList[g].s.StdMode,59!=m&&176!=m&&177!=m||d.push(g_BagItemsList[g]))}if(10>d.length){m=[];for(g=0;15>g;g++)m.push(g);this.to25GridNum(m)}else this.to25GridNum(d);this.m_List.refresh();n=-1};f.prototype.to25GridNum=function(m){if(25>m.length)for(var g=25-m.length,l=0;l<g;l++)m.push({});this.m_List.array=m};f.prototype.filterItemByStdMode=function(m,g){g?-1<g.indexOf(m.s.StdMode+
"")&&d.push(m):d.push(m)};f.prototype.init=function(){this.InType=0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Screen_bg.skin="gameres/png/00029.png";this.Screen_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.sellTypes=null;this.m_List.repeatX=5;this.m_List.repeatY=5;this.m_List.spaceX=1;this.m_List.spaceY=1;this.m_List.vScrollBarSkin="gameres/ui/vscroll.png";this.m_List.itemRender=a;this.m_List.selectEnable=!0;this.m_List.selectHandler=new Laya.Handler(this,this.ScreenSelect);
this.m_List.renderHandler=new Laya.Handler(this,this.UpdateItem);for(var m=[],g=0;15>g;g++)m.push(g);this.to25GridNum(m);Laya.stage.on("Screen_Uptade_Items",this,this.Uptade_Items);Laya.stage.on("Screen_Del_Items",this,this.Del_Items);Laya.stage.on("Screen_Add_Items",this,this.Add_Items);Laya.stage.on("Screen_Refresh_Items",this,this.Refresh_Items);Laya.stage.on("close_screenwin",this,function(){4!=this.InType&&5!=this.InType||this.close()});Laya.stage.on("Screen_Refresh_SearchItems",this,this.RefreshSearchItems)};
f.prototype.Refresh_Items=function(m){this.m_List.refresh()};f.prototype.Uptade_Items=function(m,g,l){for(var p=0;p<d.length;p++)null!=d[p]&&d[p].MakeIndex==m&&(d[p].Dura=g,d[p].DuraMax=l)};f.prototype.Del_Items=function(m){for(var g=0;g<d.length;g++)if(null!=d[g]&&d[g].MakeIndex==m){d[g]=null;this.m_List.refresh();break}};f.prototype.Add_Items=function(m){if(null!=m)for(var g=0;g<d.length;g++)if(null==d[g]){d[g]=m;this.m_List.refresh();break}};f.prototype.ScreenSelect=function(m){n=m;if(null!=d[n]&&
d[n].s){switch(c){case 1:g_OpenIdx=3;break;case 9:g_OpenIdx=3;m=GameUtil.GetItemType(d[n].s);var g=d[n].s.Expand1;if(209==m||208==m||207==m)if(0==g)for(m=40;52>m;m++){if(null==g_UserItemList[m]){g_SelectIndex=m;break}}else g_SelectIndex=40+g-1;else if(0==g)for(m=40;52>m;m++){if(null==g_UserItemList[m]){g_SelectIndex=m;break}}else g_SelectIndex=40+g-1;break;case 10:g_OpenIdx=3;GameUtil.GetItemType(d[n].s);g=d[n].s.Expand1;if(0==g||7==g)for(m=30;36>m;m++){if(null==g_UserItemList[m]){g_SelectIndex=m;
break}}else g_SelectIndex=30+g-1;break;case 2:g_OpenIdx=6;if(-1!=g_setDrugNumber){for(m=0;m<g_DrugItemsList.length;++m)g_DrugItemsList[m]&&g_DrugItemsList[m].s.Name==d[n].s.Name&&(g_DrugItemsList[m]=null);g_DrugButNumber=g_setDrugNumber;g_setDrugNumber=-1;g_DrugItemsList[g_DrugButNumber]=d[n];Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);GameApi.ShowScreen(!1);g=[];for(m=0;m<g_DrugItemsList.length;++m){var l=
g_DrugItemsList[m];null!=l?g.push({looks:l.s.Looks,mode:l.s.StdMode}):g.push({looks:null,mode:null})}m=JSON.stringify(g);GameUtil.setSaveData("druglist",m);Laya.stage.event("Show_Bag_Item_ico")}return;case 4:g_OpenIdx=8;Sendmessage.sendQueryRepairCost(G_NPC_ID,d[n].MakeIndex,d[n].s.Name);break;case 5:g_OpenIdx=9;Sendmessage.sendQueryPrice(G_NPC_ID,d[n].MakeIndex,d[n].s.Name);break;case 6:g_OpenIdx=13;break;case 7:g_OpenIdx=14;break;case 8:g_OpenIdx=19;break;case 11:g_OpenIdx=23;break;case 12:Laya.stage.event("setDrugImg",
[d[n]]);GameApi.ShowScreen(!1);return;case 13:g_OpenIdx=25;Sendmessage.sendTranslateChoose(d[n].MakeIndex);break;case 14:g_OpenIdx=26;break;case 15:g_OpenIdx=27;break;case 16:g_OpenIdx=28}g_MoveItems.Items=d[n];GameUtil.NewShowItemsInf(g_MoveItems.Items)}this.m_List._selectedIndex=-1};f.prototype.UpdateItem=function(m,g){m.settxt(m.dataSource,g)};f.prototype.onItem_Down=function(m){};f.prototype.onItem_Up=function(m){};f.prototype.onItem_Move=function(m){};f.prototype.onMouseDown=function(m){this.but_Close.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)||this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(b.x=m.stageX,b.y=m.stageY,this.Screen_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Screen_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Screen_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.Screen_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(m){this.Screen_bg.x+=m.stageX-b.x;this.Screen_bg.y+=m.stageY-b.y;b.x=m.stageX;
b.y=m.stageY};f.prototype.close=function(){this.sellTypes=null;Laya.stage.off("Screen_Uptade_Items",this,this.Uptade_Items);Laya.stage.off("Screen_Del_Items",this,this.Del_Items);Laya.stage.off("Screen_Add_Items",this,this.Add_Items);Laya.stage.off("Screen_Refresh_Items",this,this.Refresh_Items);Laya.stage.off("Screen_Refresh_SearchItems",this,this.RefreshSearchItems);this.removeSelf()};return f}(ScreenWUI),ShousWin=function(e){function f(){f.__super.call(this);this.init()}var a=new Laya.Point(0,
0),b,d=0;Laya.class(f,"ShousWin",ShousWinUI);f.prototype.onItem_Down=function(n,c){var h=(c.target instanceof DragItem?c.currentTarget:c.target).Items;null!=h&&0<h.MakeIndex?(c=Laya.Browser.now(),200>c-d?(clearTimeout(b),g_WaitItems.Items=h,g_WaitItems.Index=n,Sendmessage.TakeOffItem(g_WaitItems.Items,g_WaitItems.Index)):(clearTimeout(b),b=setTimeout(function(){g_OpenIdx=20;g_MoveItems.Index=n;g_MoveItems.Items=h;GameUtil.NewShowItemsInf(g_MoveItems.Items)}.bind(this),200)),d=c):(c=parseInt(c.target.name),
GameApi.ShowScreen(!0,c,9))};f.prototype.ParseNameFormat=function(n){var c=n;1E4<=n&&(n-=1E4);n=GameUtil.getprefixname(n,5);return 1E4<=c?"data/stateitem1/"+n+".png":"data/stateitem/"+n+".png"};f.prototype.ShouShiShow=function(n){if(null!=n)for(var c=this.sKuang._childs.length,h=0;h<c;h++){var m=this.sKuang._childs[h];m.removeChildren();var g=parseInt(m.name)+40;m.Items=null;DragItem.testType=DragItem.dragItemType.shenyou;var l=new DragItem;l.setData({itemsData:g_UserItemList,selectIndex:void 0,hasBgFrame:!1,
maxUnlockCount:void 0,itemType:DragItem.dragItemType.shenyou},g);m.addChild(l);l.setWidthAndHeight(l.parent.width,l.parent.height);l.name=h+1;null!=n[g]&&0<n[g].MakeIndex&&(GameUtil.loadImg(n[g].s.Looks,"stateitem",function(p,q){p.itemImg.skin=q;p.itemImg.x=p.width/2-p.itemImg.width/2;p.itemImg.y=p.height/2-p.itemImg.height/2;if(q=p.getChildByName("effect")){var r=0,u=0;q.offx&&q.offy&&(r=q.offx,u=q.offy);q.pos(p.width/2-r,p.height/2-u)}}.bind(this,l)),m.Items=n[g],GameUtil.ShowItemeffectEx(this,
m,n[g],!0,g))}};f.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Shoushi_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Item_0.on(Laya.Event.CLICK,this,this.onItem_Down,[40]);this.Item_0.Items=null;this.Item_1.on(Laya.Event.CLICK,this,this.onItem_Down,[41]);this.Item_1.Items=null;this.Item_2.on(Laya.Event.CLICK,this,this.onItem_Down,[42]);this.Item_2.Items=null;this.Item_3.on(Laya.Event.CLICK,this,this.onItem_Down,[43]);this.Item_3.Items=null;this.Item_4.on(Laya.Event.CLICK,
this,this.onItem_Down,[44]);this.Item_4.Items=null;this.Item_5.on(Laya.Event.CLICK,this,this.onItem_Down,[45]);this.Item_5.Items=null;this.Item_6.on(Laya.Event.CLICK,this,this.onItem_Down,[46]);this.Item_6.Items=null;this.Item_7.on(Laya.Event.CLICK,this,this.onItem_Down,[47]);this.Item_7.Items=null;this.Item_8.on(Laya.Event.CLICK,this,this.onItem_Down,[48]);this.Item_8.Items=null;this.Item_9.on(Laya.Event.CLICK,this,this.onItem_Down,[49]);this.Item_9.Items=null;this.Item_10.on(Laya.Event.CLICK,this,
this.onItem_Down,[50]);this.Item_10.Items=null;this.Item_11.on(Laya.Event.CLICK,this,this.onItem_Down,[51]);this.Item_11.Items=null;Laya.stage.on("update_shengxiao",this,this.ShouShiShow)};f.prototype.onMouseDown=function(n){this.sKuang.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(a.x=n.stageX,a.y=n.stageY,this.Shoushi_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Shoushi_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Shoushi_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};
f.prototype.onMouseUp=function(){this.Shoushi_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(n){this.Shoushi_bg.x+=n.stageX-a.x;this.Shoushi_bg.y+=n.stageY-a.y;a.x=n.stageX;a.y=n.stageY};f.prototype.close=function(){Laya.stage.off("update_shengxiao",this,this.ShouShiShow);this.removeSelf();this.sKuang.destroy();(cur_use_app||2==g_Termial)&&Laya.stage.event("clearCheckClickHandler",DragItem.dragItemType.shenyou)};return f}(ShousWinUI),ShoushiWin=function(e){function f(){f.__super.call(this);
this.init()}var a=new Laya.Point(0,0),b,d=0;Laya.class(f,"ShoushiWin",ShoushiUI);e=f.prototype;e.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.BtnColse);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.Item_0.on(Laya.Event.CLICK,this,this.onItem_Down,[30]);this.Item_0.Items=null;this.Item_1.on(Laya.Event.CLICK,this,this.onItem_Down,[31]);this.Item_1.Items=null;this.Item_2.on(Laya.Event.CLICK,this,this.onItem_Down,[32]);this.Item_2.Items=null;this.Item_3.on(Laya.Event.CLICK,
this,this.onItem_Down,[33]);this.Item_3.Items=null;this.Item_4.on(Laya.Event.CLICK,this,this.onItem_Down,[34]);this.Item_4.Items=null;this.Item_5.on(Laya.Event.CLICK,this,this.onItem_Down,[35]);this.Item_5.Items=null;Laya.stage.on("show_shoushi_box",this,this.ShowShoushi)};e.ShowShoushi=function(n){if(null!=n)for(var c=this.img_box._childs.length,h=0;h<c;h++){var m=this.img_box._childs[h];m.removeChildren();var g=parseInt(m.name)+30;m.Items=null;DragItem.testType=DragItem.dragItemType.Shoushi;var l=
new DragItem;l.setData({itemsData:g_UserItemList,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.Shoushi},g);l.name=h+1;m.addChild(l);l.setWidthAndHeight(l.parent.width,l.parent.height);null!=n[g]&&0<n[g].MakeIndex&&(GameUtil.loadImg(n[g].s.Looks,"stateitem",function(p,q){p.itemImg.skin=q;p.itemImg.x=p.width/2-p.itemImg.width/2;p.itemImg.y=p.height/2-p.itemImg.height/2}.bind(this,l)),m.Items=n[g],GameUtil.ShowItemeffectEx(this,m,n[g],!0,g))}};e.onItem_Down=function(n,
c){c=c.target instanceof DragItem?c.currentTarget:c.target;var h=c.Items;c=parseInt(c.name);null==h?GameApi.ShowScreen(!0,c,10):null!=h&&0<h.MakeIndex&&(c=Laya.Browser.now(),200>c-d?(clearTimeout(b),g_WaitItems.Items=h,g_WaitItems.Index=n,Sendmessage.TakeOffItem(g_WaitItems.Items,g_WaitItems.Index)):(clearTimeout(b),b=setTimeout(function(){g_OpenIdx=18;g_MoveItems.Index=n;g_MoveItems.Items=h;GameUtil.NewShowItemsInf(g_MoveItems.Items)}.bind(this),200)),d=c)};e.BtnColse=function(){Laya.stage.off("show_shoushi_box",
this,this.ShowShoushi);this.removeSelf();this.img_box.destroy();(cur_use_app||2==g_Termial)&&Laya.stage.event("clearCheckClickHandler",DragItem.dragItemType.Shoushi)};e.OnMouseDown=function(n){a.x=n.stageX;a.y=n.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(n){this.img_box.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)||(this.img_bg.x+=n.stageX-a.x,this.img_bg.y+=n.stageY-a.y,a.x=n.stageX,a.y=n.stageY)};return f}(ShoushiUI),SimpleScreen=function(e){function f(){f.__super.call(this);this.chatMsgList=[];this.chatNum=0;this.newTaskNodeList=[];this.init()}function a(){a.__super.call(this);this.hum=new box_item4UI;this.addChild(this.hum);this.hum.btn.visible=!1;this.hum.img.x+=10;this.hum.sp_txt.x+=10;this.hum.on(Laya.Event.CLICK,this,function(){var h=parseInt(this._childs[0].posX.text),m=ObjectManage.findobject(h);
m&&m.txt_name&&(2==m.type?(GameApi.ShowNewNpcDlg(!1),ObjectManage.clickObjHandle(m,null,1),Sendmessage.sendNPCClick(h)):3==m.type&&m.data.record!=playerID&&GameUtil.addhalo(m))});this.show=function(h){h&&(this.hum.txt.text=h.key,this.hum.txt.x=0,this.hum.posX.text=h.value,h=h.job,0==h?this.hum.img.skin="gameres/ui/icon_war.png":1==h?this.hum.img.skin="gameres/ui/icon_mage.png":2==h&&(this.hum.img.skin="gameres/ui/icon_daoshi.png"))}}function b(){b.__super.call(this);this.mon=new box_item4UI;this.addChild(this.mon);
this.mon.btn.visible=!1;this.mon.on(Laya.Event.CLICK,this,function(){var h=parseInt(this._childs[0].posX.text);(h=ObjectManage.findobject(h))&&h.txt_name&&1==h.type&&GameUtil.addhalo(h)});this.monObj={key:"",value:-1};this.show=function(h){h&&this.monObj.value!=h.value&&(this.mon.txt.text=h.key,this.mon.txt.x=0,this.mon.posX.text=h.value,this.mon.img.skin="gameres/ui/icon_mon.png",Laya.Tween.clearAll(this.mon.txt),7<this.mon.txt.text.length&&c(this.mon.txt,this.mon.sp_txt.width),this.monObj=h)}}function d(){d.__super.call(this);
this.item=new box_item4UI;this.addChild(this.item);this.item.sp_txt.x+=5;this.item.btn.x+=10;this.item.btn.text="\u62fe\u53d6";this.itemObj={key:"",value:new Laya.Point,color:""};this.show=function(h){!h||this.itemObj.value.x==h.value.x&&this.itemObj.value.y==h.value.y||(this.item.sp_txt.x=10,this.item.txt.text=h.key,this.item.txt.color=h.color,this.item.posX.text=h.value.x,this.item.posY.text=h.value.y,Laya.Tween.clearAll(this.item.txt),7<this.item.txt.text.length&&c(this.item.txt,this.item.sp_txt.width),
this.itemObj=h)};this.item.on(Laya.Event.CLICK,this,function(){var h=this._childs[0];h=new Laya.Point(Math.floor(h.posX.text),Math.floor(h.posY.text));var m=Objectcontrol.self_obj;if(m.action_over||1==m.cur_state||6==m.cur_state)AStart.cur_matx&&AStart.cur_matx[0]&&h.y<AStart.cur_matx.length&&h.x<AStart.cur_matx[0].length&&Movemodule.start3move(m.grid,h),m.grid.x==h.x&&m.grid.y==h.y&&Laya.stage.event("updatepos")})}function n(){n.__super.call(this);this.chatTxt=new Laya.TextArea;this.chatTxt.skin=
"gameres/png/chat.png";this.chatTxt.mouseEnabled=!1;this.chatTxt.height=18;this.chatTxt.width=180;this.chatTxt.color="#ffffff";this.addChild(this.chatTxt);this.show=function(h){this.chatTxt.text=h}}function c(h,m){h=void 0===h?null:h;if(null!=h){var g=h;h=g.parent;g.overflow="";h.scrollRect=new Laya.Rectangle(0,0,void 0===m?130:m,21);var l=GameUtil.getTextWidthByMeasure(18,g.text);return Laya.Tween.to(g,{x:0-l},4E3,null,Laya.Handler.create(this,function(){g.x<=0-l&&(g.x=0,Laya.timer.once(500,this,
function(){c(g)}))}))}}Laya.class(f,"SimpleScreen",SimpleScreenUI);Laya.class(a,"humItem",Laya.Box);Laya.class(b,"monItem",Laya.Box);Laya.class(d,"itemItem",Laya.Box);Laya.class(n,"chatItem",Laya.Box);e=f.prototype;e.init=function(){this.img_task.visible=!0;this.img_circum.visible=!1;this.btn_task.selected=!0;this.getCircum();Laya.stage.on("UPDATETASK",this,this.updatetask);this.chat_detail.on(Laya.Event.CLICK,this,this.showDetail,[this.chat_detail]);this.task_detail.on(Laya.Event.CLICK,this,this.showDetail,
[this.task_detail]);this.btn_change.on(Laya.Event.CLICK,this,this.changeShow);this.originX;this.openShow=!0;this.btn_hide.on(Laya.Event.CLICK,this,function(){void 0==this.originX&&(this.originX=this.bg.x);this.openShow=!this.openShow;GameUtil.drawerEffect(this.bg,{x:this.openShow?this.originX:this.originX-this.bg.width});this.btn_hide.skin=this.openShow?"gameres/ui/btn_ss_hide.png":"gameres/ui/btn_ss_show.png"});this.img_screen.visible=1==g_simScreen;this.panel_task.vScrollBarSkin="gameres/ui/vscroll.png";
this.panel_task._childs[1]&&(this.panel_task._childs[1].hide=!0);this.list_chat.repeatX=1;this.list_chat.repeatY=10;this.list_chat.vScrollBarSkin="gameres/ui/vscroll.png";this.list_chat.getChildByName("scrollBar")&&(this.list_chat.getChildByName("scrollBar").hide=!0);this.list_chat.itemRender=n;Laya.timer.clear(this,this.updateinfo);Laya.timer.loop(1E3,this,this.updateinfo);Laya.stage.on("closeTimer_simplescreen",this,function(){Laya.timer.clear(this,this.updateinfo)})};e.showPanel=function(h,m){h&&
m&&("btn_task"==m.name&&TaskOpen&&1==this.img_screen.visible&&1==this.img_task.visible&&!g_ClientConfig.boNewTaskMode?(Laya.stage.event("game_dlg_cmd",[{id:"task_scene"}]),TaskOpen=!1):(this.img_task.visible=!1,this.btn_task.selected=!1,this.img_chat.visible=!1,this.img_circum.visible=!1,this.btn_circum.selected=!1,this.img_screen.visible=!0,h.visible=!0,m.selected=!0,this.btn_hide.skin=1==this.img_screen.visible?"gameres/ui/btn_ss_hide.png":"gameres/ui/btn_ss_show.png"))};e.changeShow=function(){this.btn_task.visible=
!this.btn_task.visible;this.btn_hum.visible=!this.btn_hum.visible;this.btn_circum.visible=!this.btn_circum.visible;this.btn_item.visible=!this.btn_item.visible;this.TabClickHandler(this.btn_task.visible?"btn_task":"btn_circum");this.img_task.visible=this.btn_task.visible;this.img_circum.visible=this.btn_circum.visible};e.getCircum=function(){this.humArray=[];this.monArray=[];this.itemArray=[];this.startpos=new Laya.Point;this.btn_hum.on(Laya.Event.CLICK,this,this.TabClick);this.btn_item.on(Laya.Event.CLICK,
this,this.TabClick);this.btn_circum.on(Laya.Event.CLICK,this,this.TabClick);this.btn_task.on(Laya.Event.CLICK,this,this.TabClick);this.list_hum.repeatX=1;this.list_hum.repeatY=10;this.list_hum.vScrollBarSkin="gameres/ui/vscroll.png";this.list_hum.getChildByName("scrollBar")&&(this.list_hum.getChildByName("scrollBar").hide=!0);this.list_hum.itemRender=a;this.list_hum.selectEnable=!0;this.list_hum.renderHandler=new Laya.Handler(this,this.UpdateHum);this.list_mon.repeatX=1;this.list_mon.repeatY=10;this.list_mon.vScrollBarSkin=
"gameres/ui/vscroll.png";this.list_mon.getChildByName("scrollBar")&&(this.list_mon.getChildByName("scrollBar").hide=!0);this.list_mon.itemRender=b;this.list_mon.selectEnable=!0;this.list_mon.renderHandler=new Laya.Handler(this,this.UpdateMon);this.list_item.repeatX=1;this.list_item.repeatY=10;this.list_item.vScrollBarSkin="gameres/ui/vscroll.png";this.list_item.getChildByName("scrollBar")&&(this.list_item.getChildByName("scrollBar").hide=!0);this.list_item.itemRender=d;this.list_item.selectEnable=
!0;this.list_item.renderHandler=new Laya.Handler(this,this.UpdateItem);Laya.stage.on("update_circum_hum",this,this.updateHumList);Laya.stage.on("update_circum_item",this,this.updateItemList)};e.updateinfo=function(){this.updateItemList();this.updateHumList()};e.updateHumList=function(){this.getHumList();this.list_hum.array=this.humArray;this.list_mon.array=this.monArray;Laya.stage.event("refreshTargetList")};e.updateItemList=function(){this.getItemList();this.list_item.array=this.itemArray};e.updateChatList=
function(){this.list_chat.renderHandler=new Laya.Handler(this,this.UpdateChat);this.list_chat.array=this.chatMsgList};e.getHumList=function(){var h=ObjectManage.object_list,m=[],g=[];if(self=Objectcontrol.self_obj){for(var l=null,p=0,q=h.length;p<q;p++)if(h[p]&&null!=h[p].data&&h[p].data.record!=playerID&&!(7<self.grid.distance(h[p].grid.x,h[p].grid.y))){var r=GameUtil.getName(h[p].type,h[p].txt_name.text,h[p].txt_name.nameList);if(void 0!=g_serverconfigtxt.npcBubbleTip&&"0"!=g_serverconfigtxt.npcBubbleTip){var u=
this.checkNpcBubble(self.grid,h[p],r);u&&(l?u.spaceNum<l.spaceNum&&(l=u):l=u)}if(h[p].txt_name&&""!==h[p].txt_name.text){u=h[p].data.record;var v=THumFeature(h[p].data.fea.buffer).btJob;if(3!=h[p].type||h[p].is_die)1!=h[p].type||h[p].is_die||(w=h[p].m_Abil?Math.ceil(h[p].m_Abil.HP/h[p].m_Abil.MaxHP*100):1,g.push({key:r,value:u,hpRate:w}));else{var w=h[p].m_Abil?Math.ceil(h[p].m_Abil.HP/h[p].m_Abil.MaxHP*100):1;m.push({key:r,value:u,job:v,hpRate:w})}}}l?Laya.stage.event("changeNpcTipBubble",[l.name,
l.bubbleNpc]):Laya.stage.event("hideNpcTipBubble");this.humArray=m;this.monArray=g}};e.checkNpcBubble=function(h,m,g){if(2==m.type){var l=Math.abs(h.x-m.grid.x);h=Math.abs(h.y-m.grid.y);if(2>=l+h)return{spaceNum:l+h,bubbleNpc:m,name:g}}};e.getItemList=function(){var h=ItemMgr.getInstance().DropItemList,m=[],g=ObjectManage.findobject(playerID);if(g){for(var l=0;l<h.length;l++)if(h[l]){var p=h[l].Name,q=Get2RGB(h[l].Color),r=new Laya.Point(h[l].x,h[l].y);""!=p&&0!=q&&3>g.grid.distance(r.x,r.y)&&m.push({key:p,
value:r,color:q})}this.itemArray=m}};e.UpdateHum=function(h){h.show(h.dataSource)};e.UpdateMon=function(h){h.show(h.dataSource)};e.UpdateItem=function(h){h.show(h.dataSource)};e.UpdateChat=function(h){h.show(h.dataSource)};e.TabClick=function(h){this.TabClickHandler(h.target.name.toString())};e.TabClickHandler=function(h){this.img_circum.visible=!1;this.img_task.visible=!1;this.panel_task.visible=!1;this.box0.visible=!1;this.box1.visible=!1;this.box2.visible=!1;this.btn_hum.selected=!1;this.btn_item.selected=
!1;this.btn_circum.selected=!1;this.btn_task.selected=!1;"btn_hum"==h?(this.img_task.visible=!0,this.box0.visible=!0,this.btn_hum.selected=!0):"btn_item"==h?(this.img_circum.visible=!0,this.box1.visible=!0,this.btn_item.selected=!0):"btn_circum"==h?(this.img_circum.visible=!0,this.box2.visible=!0,this.btn_circum.selected=!0):"btn_task"==h&&(this.img_task.visible=!0,this.panel_task.visible=!0,this.btn_task.selected=!0)};e.showDetail=function(h){h==this.chat_detail?Laya.stage.event("show_chat_dlg",
[null,!0]):h==this.task_detail&&1==TaskOpen&&(Laya.stage.event("game_dlg_cmd",[{id:"task_scene"}]),TaskOpen=!1)};e.updatetask=function(h,m){if((h=this.panel_task)&&!g_ClientConfig.boNewTaskMode)for(h.on(Laya.Event.CLICK,this,GameUtil.onRWWin_CLICK),h.removeChildren(),m=nGT_Y=nGT_X=0;m<g_MissCaptionList.length;m++){var g=new Laya.Image;g.y=nGT_Y;g.skin="gameres/png/rw_bg.png";g.width=185;g.height=25;if(""!=g_MissCaptionList[m].sTabName&&0<g_MissCaptionList[m].sList.length){var l=new Laya.Image;switch(g_MissCaptionList[m].sTabName){case "\u4e3b\u7ebf\u4efb\u52a1":l.skin=
"gameres/ui/task_main.png";break;case "\u652f\u7ebf\u4efb\u52a1":l.skin="gameres/ui/task_branch.png";break;case "\u65e5\u5e38\u4efb\u52a1":l.skin="gameres/ui/task_day.png";break;case "\u526f\u672c\u4efb\u52a1":l.skin="gameres/ui/task_fuben.png";break;case "\u6d3b\u52a8\u4efb\u52a1":l.skin="gameres/ui/task_event.png"}l.pos(0,0);l.size(39,20);g.addChild(l);for(l=0;l<g_MissCaptionList[m].sList.length;l++)""!=g_MissCaptionList[m].sList[l].sNvStr&&GameMission.ShowNavigation(g_MissCaptionList[m].sList[l].sShowtxt+
"\\"+g_MissCaptionList[m].sList[l].sNvStr,g);h.addChild(g);nGT_Y+=g.height+2}}};e.tidyMsg=function(h){var m="";h=h.split("{");for(var g=0;g<h.length;g++){var l=h[g];if(l){var p=l.indexOf("|"),q=l.indexOf("}");-1!=p&&-1!=q&&(p=l.substring(p,q+1),l=l.replace(p,""));m+=l}}return m};return f}(SimpleScreenUI),skillwin=function(e){function f(){f.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya.class(f,"skillwin",skillwinUI);f.prototype.UpdateItem=function(b,d){b.settxt(b.dataSource,d)};f.prototype.init=
function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.skill_gb.skin="gameres/png/skillwin.png";this.skill_gb.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.skill_0.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_1.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_2.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_3.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_4.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_5.on(Laya.Event.CLICK,this,this.onskillDown);
this.skill_6.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_7.on(Laya.Event.CLICK,this,this.onskillDown);this.but_rest.on(Laya.Event.CLICK,this,this.onbut_rest);Laya.stage.on("Update_Skill_Show",this,this.ShowSkillIcon);this.ShowSkillIcon()};f.prototype.onbut_rest=function(){for(var b=0;b<g_UserMagicList.length;b++)null!=g_UserMagicList[b]&&GameApi.SetSkillKey(g_UserMagicList[b].Def.wMagicId,0);for(b=0;b<g_SetupMagicList.length;b++)Laya.stage.event("remove_magic",b),g_SetupMagicList[b]=null;
this.ShowSkillIcon();Laya.stage.event("add_magic_attack");Laya.stage.event("Magic_Refresh");Animationmodule.removeAniname("skilllockani");activate_ok=null};f.prototype.onskillDown=function(b){b=parseInt(b.target.name);if(null!=g_MoveSkill){if(g_SetupMagicList[b]==g_MoveSkill)return;for(var d=0;d<g_SetupMagicList.length;d++)if(null!=g_SetupMagicList[d]&&g_MoveSkill.Def.wMagicId==g_SetupMagicList[d].Def.wMagicId){GameApi.SetSkillKey(g_SetupMagicList[d].Def.wMagicId,0);Laya.stage.event("remove_magic",
d);g_SetupMagicList[d]=null;break}null!=g_SetupMagicList[b]&&(GameApi.SetSkillKey(g_SetupMagicList[b].Def.wMagicId,0),activate_ok==g_SetupMagicList[b]&&(activate_ok=null),Laya.stage.event("remove_magic",b));g_SetupMagicList[b]=g_MoveSkill;GameApi.SetSkillKey(g_SetupMagicList[b].Def.wMagicId,b+49);null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);this.ShowSkillIcon();Laya.stage.event("Magic_Refresh");Laya.stage.event("update_icon",
b)}console.log("onskillDown",b)};f.prototype.ShowSkillIcon=function(){for(var b=-1,d=null,n=0;n<this.but_bg._childs.length;n++)if(d=this.but_bg._childs[n],null!=d&&(d.removeChildren(),b=parseInt(d.name),null!=g_SetupMagicList[b])){var c=new Laya.Button,h=g_SetupMagicList[b].Def.btEffect;38==g_SetupMagicList[b].Def.wMagicId&&(h=4);46==g_SetupMagicList[b].Def.wMagicId&&(h=42);39==g_SetupMagicList[b].Def.wMagicId&&(h=0);GameUtil.loadImg(2*h,"magicon",function(m){c.skin=m});c.size(48,48);c.stateNum=1;
c.name=d.name;d.addChild(c);d=new Laya.Text;d.text=g_SetupMagicList[b].Def.sMagicName;d.color="#ffffff";d.fontSize=10;c.addChild(d);d.x=(48-d.width)/2;d.y=30}};f.prototype.onMouseDown=function(b){this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_rest.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(a.x=b.stageX,a.y=b.stageY,this.skill_gb.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.skill_gb.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.skill_gb.on(Laya.Event.MOUSE_MOVE,
this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.skill_gb.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(b){this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_rest.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.skill_gb.x+=b.stageX-a.x,this.skill_gb.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};f.prototype.close=function(){Laya.stage.off("Update_Skill_Show",this,this.ShowSkillIcon);this.removeSelf()};return f}(skillwinUI),
statebonus=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"statebonus",statebonusUI);f.prototype.init=function(){this.startpos=new Laya.Point;this.btnnum=-1;this.btnbool=!1;this.btncount=0;Laya.timer.loop(100,this,this.statechange);this.statpoint_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.statpoint_close.on(Laya.Event.CLICK,this,this.close);this.state_panel.vScrollBarSkin="gameres/ui/vscroll.png";for(var a=1;10>a;a++){var b=this.state_panel.getChildByName("statpoint_plus"+
a);b&&(b.on(Laya.Event.MOUSE_DOWN,this,this.setbtn,[a,!0,1]),b.on(Laya.Event.MOUSE_OUT,this,this.setbtn,[a,!1,1]),b.on(Laya.Event.MOUSE_UP,this,this.setbtn,[a,!1,1]))}for(a=1;10>a;a++)if(b=this.state_panel.getChildByName("statpoint_minus"+a))b.on(Laya.Event.MOUSE_DOWN,this,this.setbtn,[a,!0,-1]),b.on(Laya.Event.MOUSE_OUT,this,this.setbtn,[a,!1,-1]),b.on(Laya.Event.MOUSE_UP,this,this.setbtn,[a,!1,-1]);this.updatestate();this.statpoint_ok.on(Laya.Event.CLICK,this,function(){Sendmessage.sendAdjustBonus(g_nBonusPoint,
g_BonusAbilChg);this.close()})};f.prototype.setbtn=function(a,b,d){this.btnnum=a;this.btnbool=b;this.btncount=d};f.prototype.statechange=function(){if(0<this.btnnum&&this.btnbool&&this.btncount){switch(this.btnnum){case 1:if(0>=g_BonusAbilChg.DC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.DC+=this.btncount;break;case 2:if(0>=g_BonusAbilChg.MC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.MC+=this.btncount;break;case 3:if(0>=g_BonusAbilChg.SC&&
-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.SC+=this.btncount;break;case 4:if(0>=g_BonusAbilChg.AC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.AC+=this.btncount;break;case 5:if(0>=g_BonusAbilChg.MAC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.MAC+=this.btncount;break;case 6:if(0>=g_BonusAbilChg.HP&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.HP+=this.btncount;break;case 7:if(0>=
g_BonusAbilChg.MP&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.MP+=this.btncount;break;case 8:if(0>=g_BonusAbilChg.Hit&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.Hit+=this.btncount;break;case 9:if(0>=g_BonusAbilChg.Speed&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.Speed+=this.btncount}g_nBonusPoint-=this.btncount;this.updatestate()}};f.prototype.close=function(){this.statpoint_bg.off(Laya.Event.MOUSE_DOWN,
this,this.onMouseDown);this.statpoint_bg.off(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.statpoint_bg.off(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.statpoint_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.timer.clear(this,this.statechange);this.removeSelf()};f.prototype.onMouseDown=function(a){this.state_panel.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.statpoint_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.statpoint_bg.on(Laya.Event.MOUSE_OUT,
this,this.onMouseUp),this.statpoint_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.prototype.onMouseUp=function(){this.statpoint_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(a){this.statpoint_bg.x+=a.stageX-this.startpos.x;this.statpoint_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};f.prototype.updatestate=function(){var a=ObjectManage.findobject(playerID);if(g_BonusTick&&g_BonusAbil&&g_NakedAbil&&a&&a.m_Abil){var b=
function(G,K,H){var I=CodeUtil._LOBYTE(G);G=CodeUtil._HIBYTE(G);for(var J=1;J<K+1;J++)I+1<G?(I++,H.x++):(G++,H.y++)};this.statpoint_minus1.disabled=0>=g_BonusAbilChg.DC;this.statpoint_minus2.disabled=0>=g_BonusAbilChg.MC;this.statpoint_minus3.disabled=0>=g_BonusAbilChg.SC;this.statpoint_minus4.disabled=0>=g_BonusAbilChg.AC;this.statpoint_minus5.disabled=0>=g_BonusAbilChg.MAC;this.statpoint_minus6.disabled=0>=g_BonusAbilChg.HP;this.statpoint_minus7.disabled=0>=g_BonusAbilChg.MP;this.statpoint_minus8.disabled=
0>=g_BonusAbilChg.Hit;this.statpoint_minus9.disabled=0>=g_BonusAbilChg.Speed;this.statpoint_plus1.disabled=0>=g_nBonusPoint;this.statpoint_plus2.disabled=0>=g_nBonusPoint;this.statpoint_plus3.disabled=0>=g_nBonusPoint;this.statpoint_plus4.disabled=0>=g_nBonusPoint;this.statpoint_plus5.disabled=0>=g_nBonusPoint;this.statpoint_plus6.disabled=0>=g_nBonusPoint;this.statpoint_plus7.disabled=0>=g_nBonusPoint;this.statpoint_plus8.disabled=0>=g_nBonusPoint;this.statpoint_plus9.disabled=0>=g_nBonusPoint;this.point1.text=
g_BonusAbilChg.DC+g_BonusAbil.DC+" / "+g_BonusTick.DC;this.point2.text=g_BonusAbilChg.MC+g_BonusAbil.MC+" / "+g_BonusTick.MC;this.point3.text=g_BonusAbilChg.SC+g_BonusAbil.SC+" / "+g_BonusTick.SC;this.point4.text=g_BonusAbilChg.AC+g_BonusAbil.AC+" / "+g_BonusTick.AC;this.point5.text=g_BonusAbilChg.MAC+g_BonusAbil.MAC+" / "+g_BonusTick.MAC;this.point6.text=g_BonusAbilChg.HP+g_BonusAbil.HP+" / "+g_BonusTick.HP;this.point7.text=g_BonusAbilChg.MP+g_BonusAbil.MP+" / "+g_BonusTick.MP;this.point8.text=g_BonusAbilChg.Hit+
g_BonusAbil.Hit+" / "+g_BonusTick.Hit;this.point9.text=g_BonusAbilChg.Speed+g_BonusAbil.Speed+" / "+g_BonusTick.Speed;var d=new Laya.Point(0,0),n=new Laya.Point(0,0),c=new Laya.Point(0,0),h=new Laya.Point(0,0),m=new Laya.Point(0,0),g=new Laya.Point(0,0),l=new Laya.Point(0,0),p=new Laya.Point(0,0),q=new Laya.Point(0,0),r=new Laya.Point(0,0),u=parseInt((g_BonusAbilChg.DC+g_BonusAbil.DC)/g_BonusTick.DC),v=parseInt((g_BonusAbilChg.MC+g_BonusAbil.MC)/g_BonusTick.MC),w=parseInt((g_BonusAbilChg.SC+g_BonusAbil.SC)/
g_BonusTick.SC),z=parseInt((g_BonusAbilChg.AC+g_BonusAbil.AC)/g_BonusTick.AC),A=parseInt((g_BonusAbilChg.MAC+g_BonusAbil.MAC)/g_BonusTick.MAC),C=parseInt(g_BonusAbil.DC/g_BonusTick.DC),B=parseInt(g_BonusAbil.MC/g_BonusTick.MC),D=parseInt(g_BonusAbil.SC/g_BonusTick.SC),E=parseInt(g_BonusAbil.AC/g_BonusTick.AC),F=parseInt(g_BonusAbil.MAC/g_BonusTick.MAC);b(g_NakedAbil.DC,u,d);b(g_NakedAbil.MC,v,n);b(g_NakedAbil.SC,w,c);b(g_NakedAbil.AC,z,h);b(g_NakedAbil.MAC,A,m);b(g_NakedAbil.DC,C,g);b(g_NakedAbil.MC,
B,l);b(g_NakedAbil.SC,D,p);b(g_NakedAbil.AC,E,q);b(g_NakedAbil.MAC,F,r);this.state1.text=a.m_Abil.DC+d.x-g.x+" - "+(a.m_Abil.MaxDC+d.y-g.y);this.state2.text=a.m_Abil.MC+n.x-l.x+" - "+(a.m_Abil.MaxMC+n.y-l.y);this.state3.text=a.m_Abil.SC+c.x-p.x+" - "+(a.m_Abil.MaxSC+c.y-p.y);this.state4.text=a.m_Abil.AC+h.x-q.x+" - "+(a.m_Abil.MaxAC+h.y-q.y);this.state5.text=a.m_Abil.MAC+m.x-r.x+" - "+(a.m_Abil.MaxMAC+m.y-r.y);this.state6.text=a.m_Abil.MaxHP+parseInt(g_BonusAbilChg.HP/g_BonusTick.HP);this.state7.text=
a.m_Abil.MaxMP+parseInt(g_BonusAbilChg.MP/g_BonusTick.MP);this.state8.text=g_nMyHitPoint+parseInt(g_BonusAbilChg.Hit/g_BonusTick.Hit);this.state9.text=g_nMySpeedPoint+parseInt(g_BonusAbilChg.Speed/g_BonusTick.Speed);this.pointcount.text=g_nBonusPoint}else this.statpoint_bg.visible=!1};return f}(statebonusUI),StoreWin=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.item=new StoreItemUI;this.addChild(this.item);this.item.ItemBy.on(Laya.Event.CLICK,this,
function(){var b=this.dataSource.Item.MakeIndex;b&&""!=b&&g_StoreName&&""!=g_StoreName&&Laya.stage.event("show_alert_dlg",[{type:2,txt:'\u662f\u5426\u786e\u8ba4\u8d2d\u4e70"'+this.item.ItemNmae.text+'"?',callfn:function(){Sendmessage.SendBuyUserShopItem(b,g_StoreName)}}])});this.show=function(b,d){d=GameUtil.ShowMoneyType(b.btMoneyType);var n=GameUtil.ShowbtItemType(b.btItemType);GameUtil.ShowItemNum(b.Item,this.item.ItemImg,23.5,18.5);this.item.ItemNmae.text=b.Item.s.Name;this.item.ItemPrice.text=
b.Item.s.Price+d;this.item.ItemType.text=n;this.item.ItemTime.text=b.dCreateDate;this.item.ItemBy.text="\u8d2d\u4e70"}}Laya.class(f,"StoreWin",StoreUI);e=f.prototype;Laya.class(a,"ShowStoreItems",Laya.Box);e.init=function(){var b=["\u4e0d\u9650"];this.txt_name.text=g_StoreName+"\u7684\u5e97\u94fa";this.txt_state.text="\u5f53\u524d\u72b6\u6001\uff1a"+g_StoreOnline;this.txt_num.text="\u5e97\u94fa\u7269\u54c1\u6570\uff1a"+G_Total_Item_num;this.startpos=new Laya.Point;this.btn_close.on(Laya.Event.CLICK,
this,this.BtnClose);this.btn_first.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_previous.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_next.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_last.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_itemsearch.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);Laya.stage.on("game_show_storeItem",this,this.ShowItems);Laya.stage.on("game_show_showStorePage",this,this.ShowPage);for(var d=0;d<g_GameMoneyType.length;d++)g_GameMoneyType[d]&&
""!=g_GameMoneyType[d]&&b.push(g_GameMoneyType[d]);this.pricetype.labels=b.toString();this.pricetype.selectedIndex=0;this.ShowList()};e.ShowList=function(){this.List_store.repeatX=1;this.List_store.repeatY=5;this.List_store.itemRender=a;this.List_store.selectEnable=!0;this.List_store.selectHandler=new Laya.Handler(this,this.onSelect);this.List_store.renderHandler=new Laya.Handler(this,this.updataItem)};e.ShowItems=function(b){this.List_store.array=b;this.Selected=-1};e.onSelect=function(b){this.Selected=
b};e.updataItem=function(b,d){-1==this.Selected&&b.show(b.dataSource,d);this.Selected==d?(b.item.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,SelectedStoreItem=b.dataSource.Item,AddStoreItem=null,b.dataSource&&GameUtil.NewShowItemsInf(b.dataSource.Item,null,this.img_bg.x)):b.item.img_bg.skin=""};e.BtnClose=function(){Laya.stage.off("game_show_storeItem",this,this.ShowItems);Laya.stage.off("game_show_showStorePage",this,this.ShowPage);this.removeSelf()};e.BtnClick=function(b){switch(b.target.name){case "btn_first":0<
G_Cur_Item_Page&&Sendmessage.GetUserShopItems(0);break;case "btn_previous":0<G_Cur_Item_Page&&Sendmessage.GetUserShopItems(G_Cur_Item_Page-5);break;case "btn_next":5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.GetUserShopItems(G_Cur_Item_Page+5);break;case "btn_last":5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.GetUserShopItems(5*(this.MaxPage-1));break;case "btn_itemsearch":this.Search()}this.List_store.selectedIndex=-1};e.Search=function(){var b=GameUtil.ShowSelectedIdx(this.pricetype.selectedLabel),
d=parseInt(this.price_low.text),n=parseInt(this.price_high.text);Sendmessage.QueryUserShopItems(d,n,this.ItemType.selectedIndex,b,this.ItemSort.selectedIndex,this.ItemSearch.text,g_StoreName)};e.ShowPage=function(b,d,n){this.MaxPage=Math.ceil(b/n);this.CurPage=Math.ceil(d/n)+1;0==b&&(this.CurPage=0);5==n&&(this.txt_page.text="\u9875\u6570\uff1a"+this.CurPage+"/"+this.MaxPage)};e.OnMouseDown=function(b){this.List_store.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=b.stageX,this.startpos.y=
b.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};e.onMouseMove=function(b){this.img_bg.x+=b.stageX-this.startpos.x;this.img_bg.y+=b.stageY-this.startpos.y;this.startpos.x=b.stageX;this.startpos.y=b.stageY};e.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};return f}(StoreUI);
(function(){function e(){e.__super.call(this);this.Init()}Laya.class(e,"UIAlert",laya.display.Sprite);var f=e.prototype;f.Init=function(){this.ShowCallFn=null;this.Cfg={};Laya.stage.on("show_alert_dlg",this,this.ShowAlert);this.ResLoaded()};f.OnFocus=function(){cur_use_app&&(this.root.img_bg.top=0)};f.OnBlur=function(){cur_use_app&&(this.root.img_bg.y=117)};f.ResLoaded=function(){this.root=new AlertUI;this.addChild(this.root);this.ResetUI()};f.ShowAlert=function(a){if(this.root){this.root.visible=
!0;this.Cfg=a;var b=this.root.img_bg.getChildByName("node_grop"),d=this.root.img_bg.getChildByName("btn_ok"),n=this.root.img_bg.getChildByName("txt_input");n.text="";var c=this.root.img_bg.getChildByName("lbl_txt_ipt"),h=this.root.img_bg.getChildByName("sel_node");h.getChildByName("btn_sel_0").visible=!1;h.getChildByName("btn_sel_1").visible=!1;h.getChildByName("lbl_sel_0").visible=!1;h.getChildByName("lbl_sel_1").visible=!1;a.ipttype&&(n.type=a.ipttype);c&&(c.y=87);switch(a.type){case 1:b.visible=
!1;d.visible=!0;n.visible=!1;c.visible=!1;h.visible=!1;break;case 2:b.visible=!0;d.visible=!1;n.visible=!1;c.visible=!1;h.visible=!1;h.getChildByName("btn_sel_0").visible=!1;h.getChildByName("btn_sel_1").visible=!1;h.getChildByName("lbl_sel_0").visible=!1;h.getChildByName("lbl_sel_1").visible=!1;break;case 3:b.visible=!1;d.visible=!1;n.visible=!1;var m=this;c.visible=!1;h.visible=!1;setTimeout(function(){m.visible=!1;clearTimeout(this)},5E3);break;case 4:n.visible=!0;b.visible=!0;d.visible=!1;c.text=
a.txt;c.y=51;c.visible=!0;h.visible=!1;a.txt="";break;case 5:n.visible=!0;n.mouseEnabled=!0;h.visible=!0;b.visible=!0;d.visible=!1;c.visible=!0;c.text=a.des;c.y=51;h.getChildByName("btn_sel_0").visible=!0;h.getChildByName("btn_sel_1").visible=!0;h.getChildByName("btn_sel_0").selected=!0;h.getChildByName("btn_sel_1").selected=!1;h.getChildByName("lbl_sel_0").text=a.sel_des;h.getChildByName("lbl_sel_1").text=a.sel_des1;h.getChildByName("lbl_sel_0").visible=!0;h.getChildByName("lbl_sel_1").visible=!0;
break;case 6:b.visible=!1;d.visible=!0;n.visible=!1;c.visible=!1;h.visible=!1;Actionlock=!0;Laya.timer.once(3E3,this,function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521d\u59cb\u5316\u6570\u636e\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}])});break;case 7:b.visible=!1,d.visible=!0,n.visible=!1,c.visible=!1,h.visible=!1}this.root.img_bg.getChildByName("lbl_txt").text=a.txt;a.callfn&&(this.ShowCallFn=a.callfn);a.callcancelfun&&
(this.CallCancelFn=a.callcancelfun);this.root.img_bg.pos((Laya.stage.width-this.root.img_bg.width)/2,(Laya.stage.height-this.root.img_bg.height)/2)}};f.ResetUI=function(){this.root.visible=!1;this.root.img_bg.getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("node_grop").getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("node_grop").getChildByName("btn_cnl").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").on(Laya.Event.CLICK,
this,this.BtnClick);this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("txt_input").on(Laya.Event.FOCUS,this,this.OnFocus);this.root.img_bg.getChildByName("txt_input").on(Laya.Event.BLUR,this,this.OnBlur)};f.BtnClick=function(a){switch(a.target.name){case "btn_ok":if(this.ShowCallFn){if(5==this.Cfg.type)this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").selected?type=0:this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").selected&&
(type=1),a=this.root.img_bg.getChildByName("txt_input").text,a={type:0,num:parseInt(a),id:this.Cfg.id};else if(4==this.Cfg.type)a=this.root.img_bg.getChildByName("txt_input").text;else{a={num:this.root.img_bg.getChildByName("txt_input").text};var b=this.root.img_bg.getChildByName("lbl_txt").text;1<=b.indexOf("\u5f3a\u884c\u79bb\u7ebf")&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f3a\u884c\u79bb\u7ebf\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}])}this.ShowCallFn(a);
this.ShowCallFn=null}else 1==this.Cfg.type&&(b=this.root.img_bg.getChildByName("lbl_txt").text,1<=b.indexOf("\u5f3a\u884c\u79bb\u7ebf")&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f3a\u884c\u79bb\u7ebf\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}]));this.root.visible=!1;break;case "btn_cnl":this.root.visible=!1;this.CallCancelFn&&this.CallCancelFn();break;case "btn_sel_0":this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").selected=
!0;this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").selected=!1;break;case "btn_sel_1":this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").selected=!1,this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").selected=!0}}})();
var TaskScene=function(e){function f(){f.__super.call(this);this.size(350,30);this.lb_txt=new Laya.Button;this.lb_txt.size(142,54);this.lb_txt.labelColors="#faf4e4,#faf4e4";this.lb_txt.labelSize=16;this.lb_txt.stateNum=2;this.lb_txt.skin="gameres/ui/tast_btn_selected.png";this.addChild(this.lb_txt);this.settxt=function(d){this.lb_txt.label=d.sShowtxt}}function a(){a.__super.call(this);this.init()}var b=new Laya.Point(0,0);Laya.class(f,"tasktitle",Laya.Box);Laya.class(a,"TaskScene",TaskSceneUI);a.prototype.update=
function(){this.updatetitle();this.updatepaging();this.updatecontent()};a.prototype.init=function(){this.img_url=0;this.btn_close.on(Laya.Event.CLICK,this,this.close);this.task_Win.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.task_Win.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.task_Win.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.img_bj2.vScrollBarSkin="";this.btn_panel.hScrollBarSkin="";this.update()};a.prototype.onMouseDown=function(){if(!(this.btn_close.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)||this.img_bj2.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.list_title_w.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.btn_panel.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))&&this.task_Win.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var d=this.task_Win.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));b.x=d.x;b.y=d.y;this.TaskCanMove=!0}};a.prototype.onMouseUp=function(){this.TaskCanMove=!1};a.prototype.onMouseMove=function(){if(!this.btn_close.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)&&!this.img_bj2.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.list_title_w.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.task_Win.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.TaskCanMove){var d=this.task_Win.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.task_Win.x+=d.x-b.x;this.task_Win.y+=d.y-b.y}};a.prototype.updatetitle=function(){for(var d=0;d<g_MissCaptionList.length;d++)if(""!=g_MissCaptionList[d].sTabName&&0<g_MissCaptionList[d].sList.length){var n=
new Laya.Button("gameres/ui/auxiliary_tab.png",g_MissCaptionList[d].sTabName);n.stateNum=2;n.name=""+d;n.width=142;n.height=49;n.labelColors="#ffffff,#ffffff";n.labelSize=16;n.labelStroke=2;n.labelStrokeColor="#000000";n.pos(1+146*d,1);n.on(Laya.Event.CLICK,this,this.onTab_CLICK);this.btn_panel.addChild(n)}};a.prototype.getcontent=function(){};a.prototype.updatepaging=function(){var d=[];if(g_MissCaptionList[g_MissIndex])for(var n=0;n<g_MissCaptionList[g_MissIndex].sList.length;n++)""!=g_MissCaptionList[g_MissIndex].sList[n].sShowtxt&&
""!=g_MissCaptionList[g_MissIndex].sList[n].sMemo&&d.push(g_MissCaptionList[g_MissIndex].sList[n]);this.list_title.itemRender=f;this.list_title.repeatX=1;this.list_title.repeatY=4;this.list_title.selectEnable=!0;this.list_title.renderHandler=new Laya.Handler(this,this.updateitem);this.list_title.selectHandler=new Laya.Handler(this,this.select);this.list_title.array=d;this.img_bj2.removeChildren()};a.prototype.updateitem=function(d,n){d.settxt(d.dataSource);d.lb_txt.selected=this.selectIndex==n?!0:
!1};a.prototype.select=function(d){this.selectIndex=d;d=this.list_title.array[this.selectIndex].sMemo;""==d&&(Sendmessage.gettmissitem(rw_recog,10,"@"+this.list_title.array[this.selectIndex].sCmdGo),d=this.list_title.array[this.selectIndex].sNvStr);this.ShowMissMemo(d);this.list_title._selectedIndex=-1};a.prototype.onTab_CLICK=function(d){for(var n=0;n<g_MissCaptionList.length;n++){var c=this.btn_panel.getChildByName(n.toString());c&&(c.selected=!1)}n=parseInt(d.target.name);d.target.selected=!0;
n<g_MissCaptionList.length&&(g_MissIndex=n,this.updatepaging());this.selectIndex=-1};a.prototype.ShowMissMemo=function(d){this.img_bj2.removeChildren();d=d.split("\\");for(var n=-1,c=8,h=9;;){n+=1;if(n>=d.length)break;if(""!=d[n]){var m=d[n].indexOf("{"),g=d[n].indexOf("}");-1!=m&&-1!=g&&(d[n]=d[n].replace("{","<"),d[n]=d[n].replace("}",">"));for(var l=d[n].split("<"),p=0;p<l.length;p++)if(""!=l[p])for(var q=l[p].split(">"),r=0;r<q.length;r++)if(""!=q[r]){var u=q[r].toUpperCase();if(-1!=u.indexOf("#NEW"))m=
u.indexOf("#NEW("),g=u.indexOf(")"),m=u.substr(m+5,g-m-5),u=u.substr(g+1,u.length),m=GameUtil.GetMissGloba(m,parseInt(u),0),""==m&&(m=u),g=new Laya.Text,g.fontSize=14,g.color="#ffffff",g.text=""+m,g.pos(c,h),c+=GameApi.newcount(g)+GameApi.GetSpWidth(g.text),this.img_bj2.addChild(g);else if(-1!=u.indexOf("ITEMSHOW")){var v=-1;g=-1;var w=u.split(":");if(w&&4<w.length){var z=new Laya.Image,A=parseInt(w[3]),C=parseInt(w[4]);for(u=0;u<g_Showitem.length;u++)if(w[1]==g_Showitem[u].s.nIdx){v=u;g=g_Showitem[u].s.Looks;
break}}if(-1!=g){(Array(5).join("0")+(0+g)).slice(-5);GameUtil.loadImg(g,"items",function(E){z.skin=E;if(-1!=v)z.on(Laya.Event.CLICK,B,B.onShowItemClick,[v]);"1"==w[5]?(E=new Laya.Image,E.skin="data/prguse/00265.png",E.pos(c+A,h+C),B.img_bj2.addChild(E),w[6]&&w[7]&&z.pos(parseInt(w[6]),parseInt(w[7])),E.addChild(z)):(z.pos(c+A,h+C),B.img_bj2.addChild(z));c+=z.width});var B=this}else z.pos(c+A,nG_y+C),this.img_bj2.addChild(z),c+=z.width;w[2]&&0<parseInt(w[2])&&(u=new Laya.Text,u.color="#ffffff",u.align=
"right",u.text=w[2],u.pos(25,18),z.addChild(u))}else{if(-1!=u.indexOf("FCOLOR")||-1!=u.indexOf("SCOLOR")){m=u.indexOf("FCOLOR");g=new Laya.Text;g.fontSize=14;g.color="#ffffff";if(-1!=m){m=u.indexOf("/FCOLOR=");var D=u.substr(m+8,3);u=u.substr(0,m)}else m=u.indexOf("/SCOLOR="),D=u.substr(m+8,3),u=u.substr(0,m);g.color=Get2RGB(D);g.text=u;g.pos(c,h);c+=GameApi.newcount(g)+GameApi.GetSpWidth(g.text)}else-1!=u.indexOf("/@")?(g=new Laya.Text,g.fontSize=14,g.color=Get2RGB("251"),u=u.split("/@"),g.text=
u[0],g.name=u[1],g.underline=!0,g.on(Laya.Event.MOUSE_DOWN,this,GameUtil.onLa_CLICK),g.on(Laya.Event.MOUSE_UP,this,GameUtil.onLa_CLICK_OVER),g.on(Laya.Event.MOUSE_OUT,this,GameUtil.onLa_CLICK_OVER),g.pos(c,h),c+=GameApi.newcount(g)+GameApi.GetSpWidth(g.text)):(g=new Laya.Text,g.fontSize=14,g.color="#ffffff",g.text=u,g.pos(c,h),c+=GameApi.newcount(g)+GameApi.GetSpWidth(u));this.img_bj2.addChild(g)}}h+=18;c=0}}};a.prototype.onShowItemClick=function(d){-1!=d&&d<g_Showitem.length&&null!=g_Showitem[d]&&
(g_OpenIdx=5,g_MoveItems.Items=g_Showitem[d],GameUtil.NewShowItemsInf(g_MoveItems.Items))};a.prototype.ShowMissMemo_bak=function(d){this.img_bj2.removeChildren();for(var n=0,c=8,h=9;;)if(""!=d){d=d.replace("{","<");d=d.replace("}",">");var m=d.split("\\");if(n<m.length){if(""!=m[n]){if(0<m[n].indexOf("$"))break;m=m[n].split("<");for(var g=0;g<m.length;g++)if(""!=m[g]&&-1==m[g].indexOf(";"))for(var l=m[g].split(">"),p=0;p<l.length;p++)if(""!=l[p]){var q="",r=new Laya.Label;r.color="#ffffff";r.fontSize=
14;if(0<l[p].indexOf("#new")){var u=l[p].split(")"),v=u[0].split("(");""!=v[1]&&(u=u[1].split("}"),""!=u[0]&&(v=GameUtil.GetMissGloba(v[1],parseInt(u[0]),0),r.text=""+v+u[1]))}else q=l[p].split("/"),r.text=q[0];-1!=l[p].indexOf("FCOLOR")&&(v=q[1].split("="),""!=v[1]&&(r.color=Get2RGB(v[1])));-1!=l[p].indexOf("@")&&(v=q[1].split("@"),""!=v[1]&&(r.color=Get2RGB("251"),r.name=v[1],r.on(Laya.Event.CLICK,this,GameUtil.onLa_CLICK)));""!=q[0]&&(r.pos(c,h),c+=r.width,this.img_bj2.addChild(r))}}h+=18;c=8;
n+=1}else break}else break};a.prototype.updatecontent=function(){};a.prototype.close=function(){this.removeSelf();TaskOpen=!0};return a}(TaskSceneUI),uiAuxiliary=function(e){function f(){f.__super.call(this);this.Init()}Laya.class(f,"uiAuxiliary",AuxiliaryUI);e=f.prototype;e.Init=function(){var a=this;this.ShowDlg();this.skill_list4=this.skill_list3=this.skill_list1=this.skill_list0=this.skill_list="";this.itemSort_list=[];this.pickUpItemData=[];this.setingPickUpWin;this.setingItem;this.startpos=
new Laya.Point;this.onloaded();this.addTempClickEvemt();this.showDrugImg();this.update_m2set();this.getSkill();this.Controlsinit();this.heroeqsecure.visible=!1;this.heroeqsecure.visible=!1;this.viewControl.min=1;this.viewControl.max=1.5;this.viewControl.tick=.25;this.viewControl.value=1;this.viewControl.changeHandler=new Laya.Handler(this,function(d){this.viewValue.text=~~(100*d)+"%";this.viewControl.value=d;Mapmodule.root.scale(d,d);Mapmodule.onLocation();GlobalCfglist.viewScale=Math.floor(100*d)});
if(GlobalCfglist.viewScale){var b="";switch(GlobalCfglist.viewScale){case 100:b="100%";this.viewControl.value=1;break;case 125:b="125%";this.viewControl.value=1.25;break;case 150:b="150%",this.viewControl.value=1.5}this.viewValue.text=b}this.humsimple.visible=1==g_ClientConfig.boClothesSimple;this.monsimple.visible=1==g_ClientConfig.boMonSimple;this.weaponsimple.visible=1==g_ClientConfig.boWeaponSimple;Laya.stage.on("setSimple",this,this.setSimple);this.resetDrugBtns();this.tabIndex=0;if(this.box1.vScrollBar)this.box1.vScrollBar.on(Laya.Event.CHANGE,
this,function(){a.showDropDownArrowAnim()});if(this.box2.vScrollBar)this.box2.vScrollBar.on(Laya.Event.CHANGE,this,function(){a.showDropDownArrowAnim()})};e.showDropDownArrowAnim=function(){var a=2==this.tabIndex;this.dropDowAnim_box.visible=1==this.tabIndex&&this.box1.vScrollBar&&10>=this.box1.vScrollBar.value||a&&this.box2.vScrollBar&&10>=this.box2.vScrollBar.value;this.dropDowAnim_box.visible&&!this.dropDowAnim_box._childs[0]&&(a=Animationmodule.playframe(!1,this.dropDowAnim_box,"gameres/animation/dropDownArrow/",
1,10,100,!0),a.x=a.y=0)};e.setSimple=function(){(1==g_ClientConfig.boClothesSimple&&!GlobalCfglist.humsimple||1==g_ClientConfig.boMonSimple&&!GlobalCfglist.monsimple||1==g_ClientConfig.boWeaponSimple&&!GlobalCfglist.weaponsimple)&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u68c0\u6d4b\u5230\u60a8\u5f53\u524d\u5ef6\u8fdf\u8f83\u9ad8\uff0c\u5df2\u4e3a\u60a8\u6253\u5f00\u7b80\u88c5\u6a21\u5f0f\u3002\r\n\u5982\u4e0d\u9700\u8981\uff0c\u53ef\u5728\u8bbe\u7f6e\u754c\u9762\u4e2d\u5173\u95ed\u3002",
callfn:function(){}}]);1==g_ClientConfig.boClothesSimple&&(this.humsimple.selected=!0,GlobalCfglist.humsimple=!0);1==g_ClientConfig.boMonSimple&&(this.monsimple.selected=!0,GlobalCfglist.monsimple=!0);1==g_ClientConfig.boWeaponSimple&&(this.weaponsimple.selected=!0,GlobalCfglist.weaponsimple=!0)};e.setTabShow=function(){var a=0,b;for(b in this.setingDirectory_box._childs){var d=this.setingDirectory_box._childs[b];d.on(Laya.Event.CLICK,this,this.ShowDlg.bind(this,a));a++}};e.onloaded=function(){var a=
this;this.img_base.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_exit.on(Laya.Event.CLICK,this,this.BtnClick);this.setTabShow();this.hpN_img.on(Laya.Event.CLICK,this,this.setDrug,[0]);this.mpN_img.on(Laya.Event.CLICK,this,this.setDrug,[1]);this.hpS_img.on(Laya.Event.CLICK,this,this.setDrug,[2]);this.mpS_img.on(Laya.Event.CLICK,this,this.setDrug,[2]);this.tp_img.on(Laya.Event.CLICK,this,this.setDrug,[3]);this.tp1_img.on(Laya.Event.CLICK,this,this.setDrug,[3]);Laya.stage.on("setDrugImg",
this,this.setDrugImg);Laya.stage.on("update_m2set",this,this.update_m2set);Laya.stage.on("update_autoSkill",this,this.getSkill);this.hpN_imgH.on(Laya.Event.CLICK,this,this.setDrug,[4]);this.mpN_imgH.on(Laya.Event.CLICK,this,this.setDrug,[5]);this.hpS_imgH.on(Laya.Event.CLICK,this,this.setDrug,[6]);this.mpS_imgH.on(Laya.Event.CLICK,this,this.setDrug,[6]);this.ds_cure_time.visible=!1;this.exercise_time.visible=!1;this.exercise_slider.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.ds_time_slider.on(Laya.Event.MOUSE_UP,
this,this.showTimeBar);for(var b=0;7>b;b++){var d=this.img_base.getChildByName("box"+b);d&&d._childs&&("laya.ui.Panel"==d.__className?this.setEvent(d._childs[0]):this.setEvent(d))}this.switchPlayer_btn.on(Laya.Event.CLICK,this,this.onSwitchPlayer);this.initPickUpList();this.z_autoskill_1.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_1]);this.z_autoskill_2.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_2]);this.z_autoskill_3.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_3]);
this.z_autoskill_4.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_4]);this.zs_gwcs.on(Laya.Event.CHANGE,this,this.checkBox,[this.zs_gwcs]);this.zs_lyjf.on(Laya.Event.CHANGE,this,this.checkBox,[this.zs_lyjf]);this.zs_zrjf.on(Laya.Event.CHANGE,this,this.checkBox,[this.zs_zrjf]);this.i_delayShow.on(Laya.Event.CHANGE,this,this.checkBox,[this.i_delayShow]);this.f_autoskill_1.on(Laya.Event.CHANGE,this,this.checkBox,[this.f_autoskill_1]);this.f_keepskill_1.on(Laya.Event.CHANGE,this,this.checkBox,
[this.f_keepskill_1]);this.d_autoskill_2.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_2]);this.d_autoskill_3.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_3]);this.d_autoskill_5.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_5]);this.d_autoskill_6.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_6]);this.hp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_vs,this.hp_pro]);this.mp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.mp_vs,this.mp_pro]);this.Hp_mp_vs.on(Laya.Event.CHANGE,
this,this.barAtion,[this.Hp_mp_vs,this.Hp_mp_pro]);this.Hp_mp_vs2.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vs2,this.Hp_mp_pro2]);this.tp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_vs,this.tp_pro]);this.tp_vs1.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_vs1,this.tp_pro1]);this.ds_limit_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_limit_slider]);this.ds_time_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_time_slider]);this.hp_vsH.on(Laya.Event.CHANGE,this,
this.barAtion,[this.hp_vsH,this.hp_proH]);this.mp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.mp_vsH,this.mp_proH]);this.Hp_mp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vsH,this.Hp_mp_proH]);this.Hp_mp_vs2H.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vs2H,this.Hp_mp_pro2H]);this.tp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_vsH,this.tp_proH]);this.exercise_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.exercise_slider]);this.ds_limit_slider.on(Laya.Event.CHANGE,
this,this.barAtion,[this.ds_limit_slider,this.ds_limit_pro]);this.ds_time_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_time_slider]);this.group_skill_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.group_skill_slider,this.group_skill_pro]);this.hurricane.on(Laya.Event.CHANGE,this,function(){GlobalCfglist.manualHurricaneSkill=a.hurricane.selected});this.iceRoar.on(Laya.Event.CHANGE,this,function(){GlobalCfglist.manualIceRoar=a.iceRoar.selected});this.bombFire.on(Laya.Event.CHANGE,this,
function(){GlobalCfglist.manualBombFire=a.bombFire.selected});this.incendiaryShower.on(Laya.Event.CHANGE,this,function(){GlobalCfglist.manualIncendiaryShower=a.incendiaryShower.selected});this.fastLight.on(Laya.Event.CHANGE,this,function(){GlobalCfglist.manualFastLight=a.fastLight.selected});this.gameVoice.on(Laya.Event.CHANGE,this,function(){this.gameVoice.value&&(Laya.SoundManager.soundVolume=this.gameVoice.value/100-.01,this.voiceLable.text=this.gameVoice.value-1,GlobalCfglist.gameVoice=this.gameVoice.value)});
this.searchMonster.on(Laya.Event.INPUT,this,this.TxtSelectMosterChange);this.btn_ref_mon.on(Laya.Event.CLICK,this,this.resetMosterList);this.allCancel.on(Laya.Event.CHANGE,this,this.AllCancel);this.itemSort(this.itemSort_all);this.pickPlan.on(Laya.Event.CHANGE,this,this.setPickPlan);this.hidePlayer.on(Laya.Event.CLICK,this,this.hideObj);this.hideMonster.on(Laya.Event.CLICK,this,this.hideObj);this.pickPlan.visible=!1};e.onSwitchPlayer=function(){Laya.stage.event("game_dlg_cmd",[{id:"exit_to_role"}])};
e.initPickUpList=function(){this.pickUp_list.vScrollBarSkin="";this.pickUp_list.selectEnable=!0;this.pickUp_list.renderHandler=new Laya.Handler(this,this.updatePickUpList);this.pickUp_list.on(Laya.Event.CLICK,this,this.onClickPickUpItem)};e.updatePickUpList=function(a,b){if(a.dataSource){a.getChildByName("pickTypeName").changeText(a.dataSource.typeName);var d=GlobalCfglist.dropShowChecks?GlobalCfglist.dropShowChecks[b]:void 0;b=GlobalCfglist.pickUpCheckss?GlobalCfglist.pickUpCheckss[b]:void 0;a.getChildByName("dropShow_check").selected=
d?d:!1;a.getChildByName("pickUp_check").selected=b?b:!1}};e.onClickPickUpItem=function(a){var b=this.pickUp_list.selectedIndex;if(a.currentTarget.array[b]){var d=this.pickUp_list.selectedItem.typeName;switch(a.target.name){case "dropShow_check":GlobalCfglist.dropShowChecks||this.setDefaultDropShowChecks();GlobalCfglist.dropShowChecks[b]=a.target.selected;this.pickUp_list.selectedItem.show=a.target.selected;this.changeValueByPickType(this.getDataOfPickUpType(d),0,a.target.selected);Gameconfig.setItemlist();
break;case "pickUp_check":GlobalCfglist.pickUpCheckss||this.setDefaultPickUpCheckss();GlobalCfglist.pickUpCheckss[b]=a.target.selected;this.pickUp_list.selectedItem.pick=a.target.selected;this.changeValueByPickType(this.getDataOfPickUpType(d),1,a.target.selected);Gameconfig.setItemlist();break;case "pickUpCheck_btn":this.setingPickUpWin=GameUtil.openWin(this.setingPickUpWin,this,SetingPickUp),Laya.stage.event("updateSetingPickUp",[this.getDataOfPickUpType(d)])}}};e.setDefaultPickUpCheckss=function(){GlobalCfglist.pickUpCheckss=
[!1,!1,!1,!1,!1,!1,!1]};e.setDefaultDropShowChecks=function(){GlobalCfglist.dropShowChecks=[!1,!1,!1,!1,!1,!1,!1]};e.changeValueByPickType=function(a,b,d){for(var n,c=0;c<a.length;c++)if(n=a[c])switch(b){case 0:n.isshow=d;break;case 1:n.ispickup=d,n.prompt=d}};e.hideObj=function(){for(var a=0;a<ObjectManage.object_list.length;a++){var b=ObjectManage.object_list[a];b&&(3==b.type&&b.data.record!=playerID&&(b.sp&&(b.sp.visible=!GlobalCfglist.hidePlayer),b.obj_wapeff&&(b.obj_wapeff.visible=!GlobalCfglist.hidePlayer),
b.obj_wing&&(b.obj_wing.visible=!GlobalCfglist.hidePlayer),b.obj_hores&&(b.obj_hores.visible=!GlobalCfglist.hidePlayer)),1==b.type&&(b.sp.visible=!GlobalCfglist.hideMonster))}};e.OnFocus=function(){cur_use_app&&(this.img_base.top=0)};e.OnBlur=function(){cur_use_app&&(this.img_base.top=19)};e.update_m2set=function(){1==g_ClientConfig.boNoSmartPosLongHit?(GlobalCfglist.zs_gwcs=!1,this.zs_gwcs.selected=!1,this.zs_gwcs.disabled=!0):this.zs_gwcs.disabled=!1};e.itemSort=function(a){if(a){GlobalCfglist.itemtype=
a.name;this.itemSort_list=[];for(var b=0;b<AllItemList.length;b++)AllItemList[b].itemtype==a.name&&this.itemSort_list.push(AllItemList[b]);this.itemlist.array=this.itemSort_list;this.pickUpItemData=[];a=[];for(b=0;b<AllItemList.length;b++)0>a.indexOf(AllItemList[b].itemtype)&&"0"!=AllItemList[b].itemtype&&(a.push(AllItemList[b].itemtype),this.pickUpItemData.push({typeName:AllItemList[b].itemtype,show:!1,pick:!1}));this.pickUp_list.array=this.pickUpItemData;this.pickUp_list.refresh()}};e.getDataOfPickUpType=
function(a){for(var b=[],d=0;d<AllItemList.length;d++)AllItemList[d].itemtype==a&&b.push(AllItemList[d]);return b};e.getSkill=function(){this.skill_list4=this.skill_list3=this.skill_list1=this.skill_list0=this.skill_list="";this.skill_EffectList=[];this.skill_EffectList0=[];this.skill_EffectList1=[];this.skill_EffectList3=[];this.skill_EffectList4=[];for(var a=0;a<g_UserMagicList.length;a++)if(g_UserMagicList[a]){var b=g_UserMagicList[a],d=Skillmodule.getskilldata(b.Def.btEffect,b.Def.wMagicId);26==
b.Def.wMagicId&&24==b.Def.btEffect||12==b.Def.wMagicId&&13==b.Def.btEffect||25==b.Def.wMagicId&&23==b.Def.btEffect||95==b.Def.wMagicId&&43==b.Def.btEffect||76==b.Def.wMagicId&&53==b.Def.btEffect||43==b.Def.wMagicId&&38==b.Def.btEffect||(d&&0==d.mode?(this.skill_list0+=","+g_UserMagicList[a].Def.sMagicName,this.skill_EffectList0.push({effect:b.Def.btEffect,wMagicId:b.Def.wMagicId,level:b.Level})):d&&1==d.mode?(this.skill_list1+=","+g_UserMagicList[a].Def.sMagicName,this.skill_EffectList1.push({effect:b.Def.btEffect,
wMagicId:b.Def.wMagicId,level:b.Level})):d&&4==d.mode?(this.skill_list4+=","+g_UserMagicList[a].Def.sMagicName,this.skill_EffectList4.push({effect:b.Def.btEffect,wMagicId:b.Def.wMagicId,level:b.Level})):d&&3==d.mode&&(this.skill_list3+=","+g_UserMagicList[a].Def.sMagicName,this.skill_EffectList3.push({effect:b.Def.btEffect,wMagicId:b.Def.wMagicId,level:b.Level})),d&&5!=d.mode&&(this.skill_list+=","+g_UserMagicList[a].Def.sMagicName,this.skill_EffectList.push({effect:b.Def.btEffect,wMagicId:b.Def.wMagicId,
level:b.Level})))}(a=ObjectManage.findobject(playerID))&&THumFeature(a.data.fea.buffer);this.setIconShow("exercise_list");this.setIconShow("ds_summon_list");this.setIconShow("single_ds_list");this.setIconShow("group_ds_list");this.setIconShow("ds_cure_list");GlobalCfglist.single_ds_list||(a=this.skill_list0.split(","),a[1]&&(GlobalCfglist.single_ds_list=a[1]));GlobalCfglist.group_ds_list||(a=this.skill_list1.split(","),a[1]&&(GlobalCfglist.group_ds_list=a[1]))};e.setEvent=function(a){for(var b=0;b<
a._childs.length;b++)if(a._childs[b]){var d=a._childs[b];if("laya.ui.CheckBox"==d.__className)d.on(Laya.Event.CHANGE,this,this.checkBox,[d]);else"laya.ui.ComboBox"==d.__className&&"itemtype"!=d.name&&(d.selectHandler=new Laya.Handler(this,this.comboBox,[d]))}};e.checkBox=function(a){if(a){var b=a.name;b&&(GlobalCfglist[b]=a.selected,"f_keepskill_1"==b&&(a.selected?Laya.stage.event("spellUseSkillStart"):Laya.stage.event("clearSpellUseSkillTimer")));switch(b){case "nameshow1":ObjectManage.ReObjectVisible(1);
break;case "nameshow2":ObjectManage.ReObjectVisible(2);break;case "nameshow3":ObjectManage.ReObjectVisible(3);break;case "nameshow4":ObjectManage.ReObjectVisible(4);break;case "showhp":ObjectManage.ReObjHpvisible(GlobalCfglist.showhp);break;case "showExp":G_SHOW_EXP=this.showExp.selected;break;case "ShowName":ObjectManage.ShowName();break;case "ShowTitle":ObjectManage.ShowTitle();break;case "heroeqsecure":Sendmessage.sendConfig(a.selected);break;case "showBlue":for(a=0;a<ObjectManage.object_list.length;a++)(b=
ObjectManage.object_list[a])&&3==b.type&&b.Blood&&b.Blood.showBlueBar(b);break;case "i_delayShow":GlobalCfglist.delayShow=this.i_delayShow.selected;Laya.stage.event("delayShow",GlobalCfglist.delayShow);break;case "humsimple":GlobalCfglist.humsimple=this.humsimple.selected;for(a=0;a<ObjectManage.object_list.length;a++)(b=ObjectManage.object_list[a])&&3==b.type&&b.updateskin();break;case "weaponsimple":GlobalCfglist.weaponsimple=this.weaponsimple.selected;for(a=0;a<ObjectManage.object_list.length;a++)(b=
ObjectManage.object_list[a])&&3==b.type&&b.updateskin();break;case "monsimple":for(a=0;a<ObjectManage.object_list.length;a++)(b=ObjectManage.object_list[a])&&1==b.type&&b.updateskin();break;case "doubleRocker":Laya.stage.event("switchRocker"),Laya.stage.event("move_position"),GlobalCfglist.doubleRockerLoaction=this.doubleRocker.selected,GlobalCfglist.doubleRocker||Laya.stage.event("hideSingleRocker",!rockerposview)}Laya.stage.event("setAutoSkillAni")}};e.resetItemList=function(){Laya.LocalStorage.removeItem("role_set_itemlist");
AllItemList=[];var a=Laya.loader.getRes("data/json/filteitemlist.txt");if(a){a=a.toString();a=a.split("\r\n");for(var b=0;b<a.length;b++){var d=a[b].split(" ");if(6>d.length)for(var n=0;6>n;n++)d[n]||(d[n]="0");AllItemList.push({});AllItemList[b].itemtype=d[0];AllItemList[b].itemname=d[1];d[3]=1;d[4]=1;1==d[2]?d[2]=!0:d[2]=!1;1==d[3]?d[3]=!0:d[3]=!1;1==d[4]?d[4]=!0:d[4]=!1;1==d[5]?d[5]=!0:d[5]=!1;AllItemList[b].isshow=d[2];AllItemList[b].ispickup=d[3];AllItemList[b].special=d[4];AllItemList[b].prompt=
d[5]}}this.itemSort(this.itemSort_all);Gameconfig.setItemlist();this.itemlist.array=AllItemList};e.resetMosterList=function(){Laya.LocalStorage.removeItem("role_set_monsterlist");AllMonsterList=[];var a=Laya.loader.getRes("data/json/filtemonsterlist.txt");if(a){a=a.toString();a=a.split("\r\n");for(var b=0;b<a.length;b++){var d=a[b].split(" ");if(6>d.length)for(var n=0;6>n;n++)d[n]||(d[n]="0");AllMonsterList.push({});AllMonsterList[b].monsterName=d[0];1==d[1]?d[1]=!0:d[1]=!1;AllMonsterList[b].isExclude=
d[1]}}this.allCancel.selected=!1;Gameconfig.setMonsterList();this.monsterlist.array=AllMonsterList};e.barAtion=function(a,b){if(a){var d=a.parent;d&&a.value&&(d.label?d.label=a.value:d.text=a.value,GlobalCfglist[d.name]=a.value.toString(),GlobalCfglist[a.name]=a.value);b&&(b.value="group_skill_pro"==b.name?a.value/10:a.value/100)}};e.onMouseDown=function(a){"btn_exit"==a.target.name&&(this.img_base.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_base.off(Laya.Event.MOUSE_OUT,this,this.onMouseUp),
this.img_base.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),this.BtnClick());this.itemlist.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.box0.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_base.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_base.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_base.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};e.onMouseUp=function(){this.img_base.off(Laya.Event.MOUSE_MOVE,
this,this.onMouseMove)};e.onMouseMove=function(a){this.img_base.x+=a.stageX-this.startpos.x;this.img_base.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};e.AllCancel=function(){for(var a=0;a<AllMonsterList.length;a++)AllMonsterList[a]&&(AllMonsterList[a].isExclude=this.allCancel.selected);this.monsterlist.array=AllMonsterList;Gameconfig.setMonsterList()};e.TxtSelectItemChange=function(a){this.itemSort_list=[];for(var b=0;b<AllItemList.length;b++)0<=AllItemList[b].itemname.indexOf(a.text)&&
this.itemSort_list.push(AllItemList[b]);this.itemlist.array=this.itemSort_list};e.TxtSelectMosterChange=function(a){for(var b=[],d=0;d<AllMonsterList.length;d++)0<=AllMonsterList[d].monsterName.indexOf(a.text)&&b.push(AllMonsterList[d]);this.monsterlist.array=b};e.SaveLocal=function(){var a=GameUtil.getSaveData("username");var b=JSON.stringify(g_pickPlan1);var d=JSON.stringify(g_pickPlan2);GameUtil.setSaveData(a+g_playerName+"role_set_itemlist1",b);GameUtil.setSaveData(a+g_playerName+"role_set_itemlist2",
d)};e.SaveMonster=function(){for(var a=GameUtil.getSaveData("username"),b=[],d=0;d<AllMonsterList.length;d++)AllMonsterList[d]&&(b[d]=[AllMonsterList[d].isExclude]);b=JSON.stringify(b);GameUtil.setSaveData(a+g_playerName+"role_set_monsterlist",b)};e.SaveGlobalCfglist=function(){var a=GameUtil.getSaveData("username"),b=JSON.stringify(GlobalCfglist);GameUtil.setSaveData(a+g_playerName+"role_set_cfglist",b)};e.select=function(a){this.SelectIndex=a};e.select1=function(a){this.SelectIndex1=a};e.itemchange=
function(a){if(a.currentTarget.array[this.SelectIndex]){var b=a.currentTarget.array[this.SelectIndex].itemname;switch(a.target.name){case "isshow":a.currentTarget.array[this.SelectIndex].isshow=a.target.selected;Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][0]=a.target.selected);break;case "ispickup":a.currentTarget.array[this.SelectIndex].ispickup=a.target.selected;Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][1]=a.target.selected);break;case "special":a.currentTarget.array[this.SelectIndex].special=
a.target.selected;Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][2]=a.target.selected);break;case "prompt":a.currentTarget.array[this.SelectIndex].prompt=a.target.selected,Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][3]=a.target.selected)}}};e.monsterChange=function(a){if(a.currentTarget.array[this.SelectIndex1]&&"isExclude"==a.target.name){a.currentTarget.array[this.SelectIndex1].isExclude=a.target.selected;var b=a.currentTarget.array[this.SelectIndex1].monsterName;Gameconfig.monsterlist[b]&&
(Gameconfig.monsterlist[b][0]=a.target.selected)}};e.comboBox=function(a){if(a){var b=a.name;a.selectedLabel&&(GlobalCfglist[b]=a.selectedLabel)}};e.setTabSelected=function(a){for(var b=0;b<this.setingDirectory_box._childs.length;b++)this.setingDirectory_box._childs[b].selected=b==a};e.ShowDlg=function(a){a=void 0===a?0:a;this.img_base.visible=!0;this.box0.visible=!1;this.box1.visible=!1;this.box2.visible=!1;this.box3.visible=!1;this.box4.visible=!1;this.box5.visible=!1;this.box6.visible=!1;this.box0.vScrollBarSkin=
"";this.box1.vScrollBarSkin="";g_ClientConfig&&g_ClientConfig.DOpenHeroButton&&(this.box2.vScrollBarSkin="");var b=3==a?4:a,d=this.img_base.getChildByName("box"+b);this.setTabSelected(a);d&&(d.visible=!0);this.tabIndex=b;this.showDropDownArrowAnim();b&&3==b?(1>AllMonsterList.length&&this.resetMosterList(),this.monsterlist.array=AllMonsterList,this.monsterlist.on(Laya.Event.CLICK,this,this.monsterChange),this.monsterlist.selectEnable=!0,this.monsterlist.selectHandler=new Laya.Handler(this,this.select1),
this.SelectIndex1=0):b&&4==b&&(1>AllItemList.length&&this.initItemList(),this.itemlist.array=AllItemList,this.itemlist.on(Laya.Event.CLICK,this,this.itemchange),this.itemlist.selectEnable=!0,this.itemlist.selectHandler=new Laya.Handler(this,this.select),this.itemlist.visible=!1,this.SelectIndex=0)};e.BtnClick=function(a){this.savePickPlan(GlobalCfglist.pickPlan);this.SaveGlobalCfglist();this.setItemPick();this.SaveLocal();this.SaveMonster();this.visible=!1};e.setItemPick=function(){var a=ItemMgr.getInstance().DropItemList;
Gameconfig.pickItemList=[];for(var b=0;b<a.length;b++)a[b]&&Gameconfig.itemCheck(a[b].Name,3)&&Gameconfig.pickItemList.push(a[b])};e.showTimeBar=function(a){this.exercise_slider.visible=!1;this.ds_time_slider.visible=!1;a&&(a.visible=!0)};e.resetDrugBtns=function(){var a=this;this.tp_reset_btn.on(Laya.Event.CLICK,this,function(){a.tp_img.getChildByName("drug").skin="";GlobalCfglist[a.tp_img.name+"drug"]=void 0});this.tp1_reset_btn.on(Laya.Event.CLICK,this,function(){a.tp1_img.getChildByName("drug").skin=
"";GlobalCfglist[a.tp1_img.name+"drug"]=void 0});this.hpN_reset_btn.on(Laya.Event.CLICK,this,function(){a.hpN_img.getChildByName("drug").skin="";GlobalCfglist[a.hpN_img.name+"drug"]=void 0});this.mpN_reset_btn.on(Laya.Event.CLICK,this,function(){a.mpN_img.getChildByName("drug").skin="";GlobalCfglist[a.mpN_img.name+"drug"]=void 0});this.hpS_reset_btn.on(Laya.Event.CLICK,this,function(){a.hpS_img.getChildByName("drug").skin="";GlobalCfglist[a.hpS_img.name+"drug"]=void 0});this.mpS_reset_btn.on(Laya.Event.CLICK,
this,function(){a.mpS_img.getChildByName("drug").skin="";GlobalCfglist[a.mpS_img.name+"drug"]=void 0})};e.showDrugImg=function(){this.drawDrug(this.hpN_img.getChildByName("drug"),GlobalCfglist[this.hpN_img.name+"drug"]);this.drawDrug(this.mpN_img.getChildByName("drug"),GlobalCfglist[this.mpN_img.name+"drug"]);this.drawDrug(this.hpS_img.getChildByName("drug"),GlobalCfglist[this.hpS_img.name+"drug"]);this.drawDrug(this.mpS_img.getChildByName("drug"),GlobalCfglist[this.mpS_img.name+"drug"]);this.drawDrug(this.tp_img.getChildByName("drug"),
GlobalCfglist[this.tp_img.name+"drug"]);this.drawDrug(this.tp1_img.getChildByName("drug"),GlobalCfglist[this.tp1_img.name+"drug"]);this.drawDrug(this.hpN_imgH.getChildByName("drug"),GlobalCfglist[this.hpN_imgH.name+"drug"]);this.drawDrug(this.mpN_imgH.getChildByName("drug"),GlobalCfglist[this.mpN_imgH.name+"drug"]);this.drawDrug(this.hpS_imgH.getChildByName("drug"),GlobalCfglist[this.hpS_imgH.name+"drug"]);this.drawDrug(this.mpS_imgH.getChildByName("drug"),GlobalCfglist[this.mpS_imgH.name+"drug"])};
e.drawDrug=function(a,b){a&&b&&(draw=function(d){a.skin=d;a.parent&&(a.x=a.parent.width/2-a.width/2,a.y=a.parent.height/2-a.height/2)},GameUtil.loadImg(b,"items",draw))};e.setDrug=function(a,b){4!=a&&5!=a&&6!=a||null!=g_myHero?(Gameconfig.drugType=a,this.drugimg=b.target,this.setingItem=GameUtil.openWin(this.setingItem,this,SetingItem),Laya.stage.event("updateSetingItem",[0,this.getNewDrugListData(),b.target.name])):Laya.stage.event("show_log",[{txt:"\u8bf7\u5148\u53ec\u5524\u82f1\u96c4\uff01",color:"#ff0000"}])};
e.getNewDrugListData=function(){for(var a=this.isHeroDrugSeting()?g_HeroBagItemsList:g_BagItemsList,b,d=[],n=0;n<a.length;n++)if(b=a[n])switch(Gameconfig.drugType){case 0:case 4:0==b.s.StdMode&&0<b.s.AC&&0==b.s.MAC&&this.pushDrugData(d,b);break;case 1:case 5:0==b.s.StdMode&&0==b.s.AC&&0<b.s.MAC&&this.pushDrugData(d,b);break;case 2:case 6:0==b.s.StdMode&&0<b.s.AC&&0<b.s.MAC&&this.pushDrugData(d,b);break;case 3:(2!=b.s.StdMode&&3!=b.s.StdMode||-1==b.s.Name.indexOf("\u4f20\u9001"))&&-1==b.s.Name.indexOf("\u56de\u57ce")&&
-1==b.s.Name.indexOf("\u5730\u7262\u9003\u8131")||this.pushDrugData(d,b)}return d};e.pushDrugData=function(a,b){a.push({icon:[b.s.Looks,"items"],name:b.s.DBName,desc:this.getDrugDescByName(b.s.DBName)})};e.getDrugDescByName=function(a){if(!g_setingItemDesc)return"";var b;for(b in g_setingItemDesc){var d=g_setingItemDesc[b];if(b&&""!=b&&d&&""!=d&&a==b)return d}return""};e.isHeroDrugSeting=function(){return 4==Gameconfig.drugType||5==Gameconfig.drugType||6==Gameconfig.drugType};e.setDrugImg=function(a){if(a){var b=
this;setpos=function(d){if(b.drugimg&&d){var n=b.drugimg.getChildByName("drug");n&&(n.skin=d);n.x=b.drugimg.width/2-n.width/2;n.y=b.drugimg.height/2-n.height/2}};GameUtil.loadImg(a.s.Looks,"items",setpos);this.drugimg&&(GlobalCfglist[this.drugimg.name]=a)}};e.setPickPlan=function(){GlobalCfglist.pickPlan!=this.pickPlan.selectedLabel&&(GameUtil.getSaveData("username"),GlobalCfglist.pickPlan=this.pickPlan.selectedLabel,1>AllItemList.length?this.initItemList():(this.itemSort(this.itemSort_all),1==GlobalCfglist.pickPlan?
(this.savePickPlan(2),GameApi.setLocalData(AllItemList,g_pickPlan1)):(this.savePickPlan(1),GameApi.setLocalData(AllItemList,g_pickPlan2)),this.itemlist.array=AllItemList))};e.savePickPlan=function(a){for(var b=[],d=0;d<AllItemList.length;d++)b[d]=[AllItemList[d].isshow,AllItemList[d].ispickup,AllItemList[d].special,AllItemList[d].prompt];2==a?(g_pickPlan2=[],g_pickPlan2=g_pickPlan2.concat(b)):1==a&&(g_pickPlan1=[],g_pickPlan1=g_pickPlan1.concat(b))};e.initItemList=function(){this.resetItemList();
1==GlobalCfglist.pickPlan?GameApi.setLocalData(AllItemList,g_pickPlan1):GameApi.setLocalData(AllItemList,g_pickPlan2)};e.Controlsinit=function(){this.backmusic.selected=GlobalCfglist.backmusic;this.clear.selected=GlobalCfglist.clear;this.nameshow1.selected=GlobalCfglist.nameshow1;this.nameshow2.selected=GlobalCfglist.nameshow2;this.nameshow3.selected=GlobalCfglist.nameshow3;this.nameshow4.selected=GlobalCfglist.nameshow4;this.showhp.selected=GlobalCfglist.showhp;this.gameVoice.value=GlobalCfglist.gameVoice;
this.showExp.selected=GlobalCfglist.showExp;this.ShowName.selected=GlobalCfglist.ShowName;this.ShowTitle.selected=GlobalCfglist.ShowTitle;this.banCkilcMove.selected=GlobalCfglist.banCkilcMove;this.notLock.selected=GlobalCfglist.notLock;this.hidePlayer.selected=GlobalCfglist.hidePlayer;this.hideMonster.selected=GlobalCfglist.hideMonster;this.smooth.selected=GlobalCfglist.smooth;this.showBlue.selected=GlobalCfglist.showBlue;this.autoWear.selected=GlobalCfglist.autoWear;this.hurricane.selected=GlobalCfglist.manualHurricaneSkill;
this.iceRoar.selected=GlobalCfglist.manualIceRoar;this.bombFire.selected=GlobalCfglist.manualBombFire;this.incendiaryShower.selected=GlobalCfglist.manualIncendiaryShower;this.fastLight.selected=GlobalCfglist.manualFastLight;this.i_delayShow.selected=GlobalCfglist.delayShow;this.humsimple.selected=GlobalCfglist.humsimple;this.monsimple.selected=GlobalCfglist.monsimple;this.doubleRocker.selected=GlobalCfglist.doubleRocker;this.weaponsimple.selected=GlobalCfglist.weaponsimple;this.z_autoskill_1.selected=
GlobalCfglist.z_autoskill_1;this.z_autoskill_2.selected=GlobalCfglist.z_autoskill_2;this.z_autoskill_3.selected=GlobalCfglist.z_autoskill_3;this.z_autoskill_4.selected=GlobalCfglist.z_autoskill_4;this.zs_gwcs.selected=GlobalCfglist.zs_gwcs;this.zs_lyjf.selected=GlobalCfglist.zs_lyjf;this.zs_zrjf.selected=GlobalCfglist.zs_zrjf;this.d_autoskill_2.selected=GlobalCfglist.d_autoskill_2;this.d_autoskill_3.selected=GlobalCfglist.d_autoskill_3;this.d_autoskill_4.selected=GlobalCfglist.d_autoskill_4;this.d_autoskill_5.selected=
GlobalCfglist.d_autoskill_5;this.d_autoskill_6.selected=GlobalCfglist.d_autoskill_6;this.f_autoskill_1.selected=GlobalCfglist.f_autoskill_1;this.f_keepskill_1.selected=GlobalCfglist.f_keepskill_1;this.autohp.selected=GlobalCfglist.autohp;this.hppercentagetext.text=GlobalCfglist.hppercentagetext;this.autohpH.selected=GlobalCfglist.autohpH;this.hppercentagetextH.text=GlobalCfglist.hppercentagetextH;this.automp.selected=GlobalCfglist.automp;this.mppercentagetext.text=GlobalCfglist.mppercentagetext;this.autompH.selected=
GlobalCfglist.autompH;this.mppercentagetextH.text=GlobalCfglist.mppercentagetextH;this.autohp_mp.selected=GlobalCfglist.autohp_mp;this.hppercentagetext1.text=GlobalCfglist.hppercentagetext1;this.autohp_mp2.selected=GlobalCfglist.autohp_mp2;this.hppercentagetext2.text=GlobalCfglist.hppercentagetext2;this.autohp_mpH.selected=GlobalCfglist.autohp_mpH;this.hppercentagetext1H.text=GlobalCfglist.hppercentagetext1H;this.autohp_mp2H.selected=GlobalCfglist.autohp_mp2H;this.hppercentagetext2H.text=GlobalCfglist.hppercentagetext2H;
this.autotp.selected=GlobalCfglist.autotp;this.tppercentagetext.text=GlobalCfglist.tppercentagetext;this.autotp1.selected=GlobalCfglist.autotp1;this.tppercentagetext1.text=GlobalCfglist.tppercentagetext1;this.autotpH.selected=GlobalCfglist.autotpH;this.tppercentagetextH.text=GlobalCfglist.tppercentagetextH;this.hp_vs.value=GlobalCfglist.hp_vs;this.mp_vs.value=GlobalCfglist.mp_vs;this.Hp_mp_vs.value=GlobalCfglist.Hp_mp_vs;this.Hp_mp_vs2.value=GlobalCfglist.Hp_mp_vs2;this.tp_vs.value=GlobalCfglist.tp_vs;
this.tp_vs1.value=GlobalCfglist.tp_vs1;this.hp_vsH.value=GlobalCfglist.hp_vsH;this.mp_vsH.value=GlobalCfglist.mp_vsH;this.Hp_mp_vsH.value=GlobalCfglist.Hp_mp_vsH;this.Hp_mp_vs2H.value=GlobalCfglist.Hp_mp_vs2H;this.tp_vsH.value=GlobalCfglist.tp_vsH;this.unpack.selected=GlobalCfglist.unpack;this.pickPlan.selectedIndex=GlobalCfglist.pickPlan-1;this.pickItemsFirst.selected=GlobalCfglist.pickItemsFirst;this.exercise.selected=GlobalCfglist.exercise;this.setIconShow("exercise_list");this.exercise_slider.value=
GlobalCfglist.exercise_slider;this.single_fs.selected=GlobalCfglist.single_fs;this.group_fs.selected=GlobalCfglist.group_fs;this.single_ds.selected=GlobalCfglist.single_ds;this.group_ds.selected=GlobalCfglist.group_ds;this.poison_ds.selected=GlobalCfglist.poison_ds;this.ds_summon.selected=GlobalCfglist.ds_summon;this.ds_cure.selected=GlobalCfglist.ds_cure;this.auto_dodge.selected=GlobalCfglist.auto_dodge;this.setIconShow("single_ds_list");this.setIconShow("group_ds_list");this.setIconShow("ds_summon_list");
this.setIconShow("ds_cure_list");this.ds_cure_limit.text=GlobalCfglist.ds_cure_limit;this.ds_limit_slider.value=GlobalCfglist.ds_limit_slider;this.ds_time_slider.value=GlobalCfglist.ds_time_slider;this.group_skill_num.text=GlobalCfglist.group_skill_num;this.group_skill_slider.value=GlobalCfglist.group_skill_slider};e.addTempClickEvemt=function(){var a=ObjectManage.findobject(playerID);a&&THumFeature(a.data.fea.buffer);Laya.stage.on("synchronousIcon",this,this.synchronousIconHandle);this.ds_cure_list.on(Laya.Event.CLICK,
this,this.onClickItemFrame.bind(this,3));this.exercise_list.on(Laya.Event.CLICK,this,this.onClickItemFrame.bind(this,"all"));this.single_ds_list.on(Laya.Event.CLICK,this,this.onClickItemFrame.bind(this,0));this.group_ds_list.on(Laya.Event.CLICK,this,this.onClickItemFrame.bind(this,1));this.ds_summon_list.on(Laya.Event.CLICK,this,this.onClickItemFrame.bind(this,4))};e.synchronousIconHandle=function(a,b,d,n){b&&(1==n?(n=this[b].getChildByName(b+"Icon"),n.visible=!0,n.skin=a,GlobalCfglist[b+"Icon"]=
d):(this[b].getChildByName("drug").skin=a,GlobalCfglist[b+"drug"]=d[0]))};e.onClickItemFrame=function(a,b){b=b.target;var d=this.getCurSkillList(a);0<d.length?(b.getChildByName(b.name+"None").visible=!1,this.setingItem=GameUtil.openWin(this.setingItem,this,SetingItem),Laya.stage.event("updateSetingItem",[1,this.getNewSkillList(d.split(","),a),b.name])):b.getChildByName(b.name+"None").visible=!0};e.getCurSkillList=function(a){switch(a){case 0:return this.skill_list0;case 1:return this.skill_list1;
case 3:return this.skill_list3;case 4:return this.skill_list4;case "null":return[];case "all":return this.skill_list}};e.getNewSkillList=function(a,b){for(var d=[],n,c,h=0,m=0;m<a.length;m++)n=a[m],""!=n&&(c=GameApi.GetMagicDes(n),d.push({icon:this.getIconSkinByEffect(h,b),name:n,desc:c?c.replace("\n",""):""}),h++);return d};e.getIconSkinByEffect=function(a,b){if((b=this.getCurEffect(b))&&!(1>b.length)){b=b[a];a=b.effect;var d=b.wMagicId;b=b.level;38==d&&(a=4);46==d&&(a=42);39==d&&(a=0);if(1E3<=d&&
1500>=d){if(b=Skillmodule.findCustomSkill(d,b)){var n=g_pak_list[b.iconFileIndex];var c=b.wIconImageIndex}}else n="magicon"+GameUtil.getFile(2*a),c=2*a;return[c,n]}};e.setIconShow=function(a){var b=this;GlobalCfglist[a]&&""!=GlobalCfglist[a]?(this[a].getChildByName(a+"None").visible=!1,this[a].getChildByName(a+"Icon").visible=!0,GlobalCfglist[a+"Icon"]&&GameUtil.loadImg(GlobalCfglist[a+"Icon"][0],GlobalCfglist[a+"Icon"][1],function(d){b[a].getChildByName(a+"Icon").skin=d})):(this[a].getChildByName(a+
"None").visible=!0,this[a].getChildByName(a+"Icon").visible=!1,this[a].getChildByName(a+"Icon").skin="")};e.getCurEffect=function(a){switch(a){case 0:return this.skill_EffectList0;case 1:return this.skill_EffectList1;case 3:return this.skill_EffectList3;case 4:return this.skill_EffectList4;default:return this.skill_EffectList}};return f}(AuxiliaryUI);
(function(){function e(a){e.__super.call(this);this.baseKey="ui/baitan/";this.root=void 0;this.CanDragMove=!1;this.BaiTanData=a;this.StartDragPos=new Laya.Point(0,0);this.Init()}Laya.class(e,"UIBaiTan",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("update_baitan_items",this,this.UpdateBaiTanItems);this.ResLoaded()};f.ResLoaded=function(){this.root=new BaiTanUI;this.addChild(this.root);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,
this,this.MouseMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.ResetUI()};f.MouseDown=function(){if(this.root){this.CanDragMove=!0;var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=a.x;this.StartDragPos.y=a.y}};f.MouseMove=function(){if(0!=this.CanDragMove){var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=a.x-this.StartDragPos.x;this.root.y=a.y-this.StartDragPos.y}};
f.MouseUp=function(){this.CanDragMove=!1};f.ExitDlg=function(){this.root.visible=!1;for(var a=0;20>a;a++){for(var b=this.root.getChildByName("item_"+a),d=0;d<b._childs.length;d++)b._childs[d].removeSelf();b.skin=""}0==ObjectManage.findobject(playerID).data.fea.buffer[13]&&(ItemMgr.getInstance().AddBaiTanItemToBag(),Sendmessage.StopBaiTan())};f.UpdateBaiTanItems=function(){if(1==G_ShowBaiTanDataIsSelf)for(var a=ItemMgr.getInstance().BaiTanList,b=0;20>b;b++){var d=this.root.getChildByName("item_"+b);
a[b]&&a[b].item&&GameUtil.ShowItemeffect(d,a[b].item);a[b]&&a[b].item&&a[b].item.s.Name?(GameUtil.loadImg(a[b].s.Looks,"items",function(n){d.skin=n;d.pivotX=d.width/2;d.pivotY=d.height/2}),GameUtil.ShowItemeffect(d,this.BaiTanData.Item[b])):d.skin=""}else this.ShowDlg(G_BaiTanData)};f.Update=function(){var a=null;this.BaiTanData&&(a=this.BaiTanData.Item);a||(a=ItemMgr.getInstance().BaiTanList);if(this.root&&a)for(var b=0;b<a.length;b++){var d=this.root.getChildByName("item_"+b)._childs[0];if(a[b]){var n=
a[b].item;n||(n=a[b]);if(n&&n.eff_list&&d){if(d.skin=n.eff_list[n.eff_idx],n.eff_idx++,n.eff_idx>=n.eff_list.length&&(n.eff_idx=0),n)for(var c=0;c<n.eff_list.length;c++){var h=-d.height/2+13;d.x=-d.width/2+12+n.offset_list[c].x;d.y=h+n.offset_list[c].y}}else d&&d._childs[0]&&(d._childs[0].skin="")}}};f.LoadItemEffect=function(a,b){var d=a.s.EffectStartOffSet;if(0<d){var n=new Laya.Image;n.blendMode="overlay";b&&b.addChild(n);a.eff_list=[];a.offset_list=[];a.eff_idx=0;b=[];for(n=d;n<d+a.s.EffectImageCount;n++){for(var c=
"/",h=n.toString().length;5>h;h++)c+="0";c+=n+".png";b.push("data/"+g_pak_list[a.s.EffectFileIndex]+c);a.offset_list.push(Offsetmodule.getoffset(g_pak_list[a.s.EffectFileIndex],n))}}};f.ShowDlg=function(a){if(null!=this.root&&void 0!=this.root&&(this.BaiTanData=a,this.root.visible=!0,this.BaiTanData||0!=G_ShowBaiTanDataIsSelf))if(this.root.getChildByName("lbl_item_name").text="",this.root.getChildByName("lbl_item_price").text="",this.root.getChildByName("lbl_tw_name").text=G_BaiTanName+"\u7684\u644a\u4f4d",
0==G_ShowBaiTanDataIsSelf)for(a=0;20>a;a++){var b=this.root.getChildByName("item_"+a);this.BaiTanData.Item[a]&&this.BaiTanData.Item[a].s.Name?(GameUtil.loadImg(this.BaiTanData.Item[a].s.Looks,"items",function(d){b.skin=d;b.pivotX=b.width/2;b.pivotY=b.height/2}),GameUtil.ShowItemeffect(b,this.BaiTanData.Item[a])):b.skin=""}else this.UpdateBaiTanItems()};f.ResetUI=function(){if(void 0!=this.root){this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_baitan").on(Laya.Event.CLICK,
this,this.BtnClick);this.root.getChildByName("btn_esc").on(Laya.Event.CLICK,this,this.BtnClick);for(var a=0;20>a;a++)this.root.getChildByName("item_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.ShowDlg(G_BaiTanData)}};f.ShowPrice=function(a){this.root.getChildByName("lbl_item_name").text=a.item.s.Name;var b=0==a.goldtype||0==a.type?" \u5143\u5b9d":" \u91d1\u5e01";this.root.getChildByName("lbl_item_price").text=a.price+b};f.BtnClick=function(a){a=a.target.name;switch(a){case "btn_exit":this.ExitDlg();
break;case "btn_baitan":if(0==G_ShowBaiTanDataIsSelf)return;Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8bf7\u8f93\u5165\u6446\u644a\u4fe1\u606f",callfn:function(d){Sendmessage.StartBaiTan(d)},ipttype:"text"}]);break;case "btn_esc":this.ExitDlg(),G_ShowBaiTanDataIsSelf&&1==ObjectManage.findobject(playerID).data.fea.buffer[13]&&(ItemMgr.getInstance().AddBaiTanItemToBag(),Sendmessage.StopBaiTan())}if(0<=a.indexOf("item_")){a=parseInt(a.split("_")[1]);var b=null;G_ShowBaiTanDataIsSelf?b=ItemMgr.getInstance().BaiTanList[a]:
(b={},b.item=this.BaiTanData.Item[a],b.price=this.BaiTanData.Price[a],b.goldtype=this.BaiTanData.PriceGold[a],b.idx=a);ItemMgr.getInstance().CurSelecItem=b.item;ItemMgr.getInstance().LastBaiItem=b;Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo",state:-1}]);b&&this.ShowPrice(b)}}})();
(function(){function e(a){e.__super.call(this);this.boxid=a;this.Init()}Laya.class(e,"UIBox",laya.display.Sprite);var f=e.prototype;f.Init=function(){this.ResLoaded()};f.ResLoaded=function(){this.StartPos=new Laya.Point;this.root=new BoxUI;this.addChild(this.root);this.ResetUI(this.boxid);this.root.getChildByName("boxbackdrop").on(Laya.Event.CLICK,this,this.BoxClick);this.root.getChildByName("itemshow").visible=!1;var a=this.root.getChildByName("itemshow");a.visible=!1;a.getChildByName("but_itemok").on(Laya.Event.CLICK,
this,this.but_itemokClick);a.getChildByName("close").on(Laya.Event.CLICK,this,this.itemshowClick);a.getChildByName("but_itemok").skin="gameres/ui/box_btn_ok.png";a.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown)};f.ResetUI=function(a){this.boxid=a;var b=this.root.getChildByName("boxbackdrop");b.visible=!0;this.is_RotationBox=this.is_roulette=!1;this.RotationNumber=0;this.rollingkey=null;switch(a){case 15:this.showboxitemimgkey=520;this.Rotationimg=602;break;case 16:this.showboxitemimgkey=540;this.Rotationimg=
606;break;case 17:this.showboxitemimgkey=560;this.Rotationimg=608;break;case 18:this.showboxitemimgkey=580;this.Rotationimg=610;break;default:this.showboxitemimgkey=540,this.Rotationimg=616}GameUtil.loadImg(this.showboxitemimgkey,"prguse3",function(d){b.skin=d})};f.BoxClick=function(){var a=ItemMgr.getInstance().FindItemShapeFromInBag(40,this.boxid);a&&(this.keyitemindex=a.item.MakeIndex);Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u662f\u5426\u4f7f\u7528\u94a5\u5319\u6253\u5f00\u6b64\u5b9d\u7bb1\uff1f",
callfn:function(b){a?(Sendmessage.SendOpenBox(a.item.MakeIndex,a.item.s.DBName,CodeUtil._LOWORD(g_boxid),CodeUtil._HIWORD(g_boxid)),g_boxid=0):(Laya.stage.event("game_dlg_cmd",[{id:"openbox_fail"}]),Laya.stage.event("show_log",[{txt:"\u7f3a\u5c11\u5b9d\u7bb1\u94a5\u5319\uff01",color:"#ff0000"}]))},callcancelfun:function(){Laya.stage.event("game_dlg_cmd",[{id:"openbox_fail"}])}}])};f.ClosesBox=function(){Sendmessage.SendtakeoffBox();this.root&&(this.root.getChildByName("boxbackdrop").visible=!1,this.root.getChildByName("itemshow").visible=
!1)};f.showboxitemlist=function(a,b){this.keyitemindex&&(GameUtil.DelBagItems(this.keyitemindex),Laya.stage.event("show_bag_items"),this.keyitemindex=null);this.is_RotationBox=!1;b?this.callback():(Animationmodule.playframe(!1,this.root,"data/prguse3/",this.showboxitemimgkey,this.showboxitemimgkey+6,100,!1,!0,null,this,this.callback),Animationmodule.playframe(!0,this.root,"data/prguse3/",this.showboxitemimgkey+7,this.showboxitemimgkey+13,100,!1,!0));GameUtil.PlayMusicFormat("wav/Openbox.wav");this.root.getChildByName("boxbackdrop").visible=
!1;b=[];for(var d=0;d<a.length;d++){var n=a[d].item.s.Looks,c="",h=n;1E4<=n&&(c=Math.floor(n/1E4),h=n%1E4);h=("000000"+h).slice(-6);b.push("data/items"+c+"/"+h)}GameUtil.loadImgEx(b,function(g){for(var l=m.root.getChildByName("itemshow"),p=0;p<a.length;p++){var q=l.getChildByName("item_"+p);q.skin=g[p];q.on(Laya.Event.DOUBLE_CLICK,m,m.itemshowClick);q.on(Laya.Event.CLICK,m,m.showitemClick);q.item=a[p].item}g=new Laya.Point(-15,-15);m.root.itemshowani=Animationmodule.playframe(!1,l.getChildByName("item_4"),
"data/prguse3/",m.Rotationimg,m.Rotationimg+1,100,!0,!1,null);m.root.itemshowani&&(m.root.itemshowani.pos(g.x,g.y),m.root.itemshowani.name="baoxiang")});var m=this};f.callback=function(){this.root.getChildByName("itemshow").visible=!0};f.GetBoxItemIndex=function(a){this.selectitemindex=a;this.root.itemshowani._app=this;this.root.itemshowani._callback=this.rolling;this.is_RotationBox=!0};f.showitemClick=function(a){a=this.root.getChildByName("itemshow").getChildByName(a.target.name).item;g_OpenIdx=
5;g_MoveItems.Items=a;GameUtil.NewShowItemsInf(g_MoveItems.Items);a&&GameUtil.ClickSound(a)};f.itemshowClick=function(){this.is_roulette||(Sendmessage.SendGetGetselBoxItem(this.selectitemindex),this.root.getChildByName("itemshow").visible=!1,this.selectitemindex=0,this.root.itemshowani.destroy(),Animationmodule.removeAniname(this.root.itemshowani.name))};f.but_itemokClick=function(){this.is_RotationBox?this.itemshowClick():(Sendmessage.SendRotationBox(),this.is_RotationBox=this.canclose=!0,this.root.itemshowani._app=
this,this.root.itemshowani._callback=this.rolling)};f.rolling=function(){if(null==this.rollingkey)this.root.getChildByName("itemshow").getChildByName("item_4").removeChild(this.root.itemshowani),this.root.getChildByName("itemshow").getChildByName("item_0").addChild(this.root.itemshowani),this.rollingkey=9,this.roulettenumber=0,this.is_roulette=!0;else{var a=this.rollingkey%8,b=0==a?7:a-1;this.root.getChildByName("itemshow").getChildByName("item_"+[0,1,2,5,8,7,6,3][a]).removeChild(this.root.itemshowani);
this.root.getChildByName("itemshow").getChildByName("item_"+[0,1,2,5,8,7,6,3][b]).addChild(this.root.itemshowani);7==b&&(this.RotationNumber+=1);5<=this.RotationNumber&this.selectitemindex==[0,1,2,5,8,7,6,3][b]&&(this.root.itemshowani._app=null,this.root.itemshowani._callback=null,this.is_roulette=!1);this.rollingkey+=1}GameUtil.PlayMusicFormat("wav/Flashbox.wav")};f.MouseDown=function(a){var b=this.root.getChildByName("itemshow");b.getChildByName("but_itemok").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||
b.getChildByName("close").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.StartPos.x=a.stageX,this.StartPos.y=a.stageY,b.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),b.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),b.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.onMouseUp=function(){this.root.getChildByName("itemshow").off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseMove=function(a){this.root.getChildByName("itemshow").x+=a.stageX-this.StartPos.x;this.root.getChildByName("itemshow").y+=
a.stageY-this.StartPos.y;this.StartPos.x=a.stageX;this.StartPos.y=a.stageY}})();var chat_item_height=0,g_start_idx=0;
(function(){function e(n,c,h){e.__super.call(this);this.txt=new Laya.Text(n);this.temp=new Laya.Text;this.bgSpr=new Laya.Sprite;this.data=null;this.addChild(this.bgSpr);this.addChild(this.txt);this.size(310,18);this.txt.wordWrap=!0;this.txt.fontSize=18;this.temp.fontSize=18;this.Show=function(m,g,l){if(m.info!=this.data){this.data=m.info;g=this.parent.parent.name;"list_txt"==g?(this.txt.width=310,this.txt.wordWrap=!1):"chat_list"==g&&(this.txt.text=m.info,this.txt.wordWrap=!1);this.txt.removeChildren();
"chat_list"!=g&&(this.temp.text=m.info);g=0==this.temp.width?g=this.txt.width:g=this.temp.width;this.bgSpr.graphics.clear();l=m.info;var p=l.indexOf("{"),q=l.indexOf("}");0<=p&&0<=q?(p=Get2RGB(parseInt(m.front)),this.txt.text="",GameUtil.GetColorText(this.txt,l,"{","}",p),this.bgSpr.graphics.drawRect(0,0,g,18,Get2RGB(parseInt(m.bg)))):(this.txt.text=m.info,this.bgSpr.graphics.drawRect(0,0,g,this.txt.height,Get2RGB(parseInt(m.bg))),this.txt.color=Get2RGB(parseInt(m.front)))}};this.CreateText=function(m,
g,l){var p=new Laya.Text;p.color=g;p.fontSize=18;g=this.CreateSpace(l);p.text=g+m;this.txt.addChild(p)};this.CreateSpace=function(m){for(var g="",l=0;l<m;l++)g+=" ";return g}}function f(){f.__super.call(this);this.size(45,45);var n=new Laya.Image;this.addChild(n);n.pos(0,0);this.settxt=function(c){n.skin="gameres/ui/chat_face/"+c+".png";n.name=c}}function a(){a.__super.call(this);this.size(55,55);var n=new Laya.Image;n.width=55;n.height=55;n.pos(0,0);n.skin="gameres/ui/img_bag_bg.png";this.addChild(n);
var c=new Laya.Image;n.addChild(c);this.setpos=function(h){c.visible=!0;c.skin=h;c.x=n.width/2-c.width/2;c.y=n.height/2-c.height/2};this.settxt=function(h){h<g_BagItemsList.length&&null!=g_BagItemsList[h]?(GameUtil.loadImg(g_BagItemsList[h].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(n,g_BagItemsList[h])):(c.visible=!1,(h=n.getChildByName("effect"))&&h.removeSelf())}}function b(){b.__super.call(this);this.chatMsgList=[];this.specialItemList=[];this.chatType=-1;this.CurSelectChat=0;this.CMDNode=
this.btnInfoItem=null;this.baseKey="png/ui_chat/";this.ChatBaseKey="";this.ChatTypeBtnList=[];this.SelectChatIdx=-1;this.Init()}Laya.class(e,"ChatItem",Laya.Box);Laya.class(f,"faceItem",Laya.Box);Laya.class(a,"specialItem",Laya.Box);Laya.class(b,"UIChat",laya.display.Sprite);var d=b.prototype;d.Init=function(){Laya.stage.on("show_chat_from_editor",this,this.ShowChatUI);Laya.stage.on("show_chat_dlg",this,this.ShowChatDlg);Laya.stage.on("get_chat_name",this,this.getChatName);Laya.stage.on("onGetPhotoURL",
this,this.onGetPhotoURL);Laya.stage.on("sendCaptainPosInTeam",this,this.sendCaptainPosInTeam);this.ResLoaded();this.visible=!0;this.x-=520};d.onGetPhotoURL=function(n){Sendmessage.SendMonsterGM(n)||(0>n.indexOf(this.ChatBaseKey)&&""!=this.ChatBaseKey?Sendmessage.sendSay(this.ChatBaseKey+n):Sendmessage.sendSay(n));this.root.getChildByName("img_send").getChildByName("input_txt").text=""};d.openWin=!0;d.originX;d.ShowChatDlg=function(n,c){var h=this;this.visible=!0;this.openWin=!this.openWin;void 0==
this.originX&&(this.originX=0,c=new Laya.Sprite,this.addChildAt(c,0),c.width=1500,c.height=600,c.on(Laya.Event.CLICK,this,function(){h.checkOpenChatUI()}));this._childs[0].visible=this.openWin?!1:!0;GameUtil.drawerEffect(this,{x:this.openWin?this.originX-520:this.originX});if(c=this.root.getChildByName("img_send").getChildByName("input_txt"))this.visible&&n?c.text=n:c.text="";this.chat_show.showByType(-1);this.root&&this.root.getChildByName("list_txt").refresh()};d.ShowChatUI=function(n){4==n.id&&
(this.CurSelectChat=4,this.ResetChatBtnState(),this.ChatBaseKey="/");n&&(this.root.getChildByName("img_send").getChildByName("input_txt").text=n.name)};d.ResLoaded=function(){this.root=new Chat1UI;this.addChild(this.root);this.ResetUI();this.root.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.root.getChildByName("img_send").getChildByName("btn_send").on(Laya.Event.CLICK,this,this.BtnClick);Laya.stage.on("new_chat_msg",this,this.ChatMsg);this.root.getChildByName("list_txt").skin="gameres/ui/chat_bg.png";
this.root.getChildByName("list_txt").repeatX=1;this.root.getChildByName("list_txt").repeatY=33;this.root.getChildByName("list_txt").vScrollBarSkin="";this.root.getChildByName("list_txt").itemRender=e;this.root.getChildByName("list_txt").selectEnable=!0;this.root.getChildByName("list_txt").selectHandler=new Laya.Handler(this,this.OnSelect);this.root.getChildByName("list_txt").renderHandler=new Laya.Handler(this,this.UpdateItem);this.root.getChildByName("list_txt").mouseHandler=new Laya.Handler(this,
this.ClickItem);this.root.getChildByName("list_txt").array=this.chatMsgList;this.root.getChildByName("list_txt").on(Laya.Event.MOUSE_DOWN,this,this.on_Mousedown);this.ChatTypeBtnList.push(this.root.getChildByName("btn_gongliao_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_system_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_nearby_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_hanhua_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_hanghui_enable"));
this.ChatTypeBtnList.push(this.root.getChildByName("btn_team_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_siliao_enable"));this.ShowBtnInfoItem("");this.ResetChatBtnState();this.chat_show=new RichText(325,477,50);this.root.chat_panel.addChild(this.chat_show);this.chat_show.pos(0,0);Laya.stage.on("setCMDlist",this,this.setCMDlist)};d.OnFocus=function(){cur_use_app&&(this.root.getChildByName("img_send").top=0)};d.OnBlur=function(){cur_use_app&&(this.root.getChildByName("img_send").y=
460)};d.setCMDlist=function(){if(g_CMDlist&&0<g_CMDlist.length){this.CMDNode.removeChildren();this.CMDNode.y=485-35*g_CMDlist.length;for(var n=0;n<g_CMDlist.length;n++){var c=g_CMDlist[n],h=new Laya.Button;h.label=c.sCaption;h.name=c.sCmd;h.skin="gameres/ui/chat_select_order.png";h.stateNum=2;h.labelAlign="center";h.labelBold=!0;h.labelColors="#FBF1B3,#FBF1B3";h.labelSize=16;h.size(105,35);this.CMDNode.height=35*(n+1)+15;this.CMDNode.addChild(h);h.pos(3,35*n);h.on(Laya.Event.CLICK,this,this.getCMD)}}};
d.getCMD=function(n){this.root.input_txt.text=n.target.name+" ";this.root.panel_cmd.visible=!1};d.ResetChatBtnState=function(){for(var n=0;7>n;n++)this.CurSelectChat==n?(this.ChatTypeBtnList[n].stateNum=2,this.ChatTypeBtnList[n].selected=!0):(this.ChatTypeBtnList[n].stateNum=2,this.ChatTypeBtnList[n].selected=!1)};d.ClickItem=function(n,c){"mousedown"==n.type&&(n=this.GetChatListByType(this.SelectChatIdx),n[c]&&(c=n[c].info.split(":"),this.root.getChildByName("img_send").getChildByName("input_txt").text=
c[0]))};d.ResetCMDNode=function(){void 0!=this.root&&(this.CMDNode=this.root.getChildByName("panel_cmd"),this.CMDNode.zOrder=1,this.CMDNode.getChildByName("btn_chuanyin").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.getChildByName("btn_rest").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.getChildByName("btn_add_hanghui").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.getChildByName("btn_del_hanghui").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.visible=!1)};d.ShowBtnInfoItem=
function(n){null==this.btnInfoItem?(this.btnInfoItem=new Laya.Image,this.btnInfoItem.skin="gameres/ui/000000.png",this.btnInfoItem.width=100,this.btnInfoItem.height=30,this.txt=new Laya.Text,this.txt.text=" ...... ",this.addChild(this.btnInfoItem),this.btnInfoItem.addChild(this.txt),this.btnInfoItem.visible=!1):""!=n?(this.btnInfoItem.visible=!0,this.btnInfoItem.width=this.txt.width,this.txt.text=n):this.btnInfoItem.visible=!1};d.OnSelect=function(n){};d.UpdateItem=function(n,c){0==c&&(chat_item_height=
0);n.Show(n.dataSource,c,chat_item_height);c=n.height;20<n._childs[1].height&&(c=2*n.height);chat_item_height+=c};d.ResetUI=function(){this.root.getChildByName("spr_bg").skin="gameres/png/chat.png";this.root.getChildByName("img_send").getChildByName("btn_send").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_team_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_send").getChildByName("input_txt").skin="gameres/ui/chat.png";this.root.getChildByName("btn_gongliao_enable").on(Laya.Event.CLICK,
this,this.BtnClick);this.root.getChildByName("btn_system_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_nearby_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_hanhua_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_siliao_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_hanghui_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.chat_oder.on(Laya.Event.CLICK,this,this.BtnClick);
this.root.chat_face.on(Laya.Event.CLICK,this,this.BtnClick);this.root.chat_item.on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_hide").on(Laya.Event.CLICK,this,this.BtnClick);this.ResetCMDNode();this.visible=!1;this.root.list_face.vScrollBarSkin="";this.root.list_face.itemRender=f;this.root.list_face.selectEnable=!0;this.root.list_face.selectHandler=new Laya.Handler(this,this.faceSelect);this.root.list_face.renderHandler=new Laya.Handler(this,this.UpdateFace);this.root.list_face.array=
g_face_list;this.root.list_special.vScrollBarSkin="";this.root.list_special.itemRender=a;this.root.list_special.selectEnable=!0;this.root.list_special.selectHandler=new Laya.Handler(this,this.specialSelect);this.root.list_special.renderHandler=new Laya.Handler(this,this.UpdateSpecial);this.root.chat_pos.on(Laya.Event.CLICK,this,this.sendPos);(this.root.btn_add.visible=cur_use_app)?this.root.input_txt.width=326:this.root.input_txt.width=373;this.root.btn_add.on(Laya.Event.CLICK,this,function(){oncallLocalPhoto()})};
d.faceSelect=function(n){g_face_list[n]&&(this.root.input_txt.text+="</:"+g_face_list[n]+">",this.root.list_face._selectedIndex=-1,this.root.chat_face_bg.visible=!1)};d.specialSelect=function(n){var c=this.root.input_txt.text;if(-1!=c.indexOf("<[")&&-1!=c.indexOf("]>"))Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u6b21\u53ea\u80fd\u53d1\u9001\u4e00\u4e2a\u88c5\u5907\u3002",callfn:function(){}}]);else if(n=g_BagItemsList[this.specialItemList[n]])this.root.input_txt.text+="<["+n.s.Name+"\\"+
n.MakeIndex+"]>",this.root.list_special._selectedIndex=-1,this.root.chat_item_bg.visible=!1};d.UpdateFace=function(n,c){n.settxt(n.dataSource,c)};d.UpdateSpecial=function(n,c){n.settxt(n.dataSource,c)};d.sendPos=function(){var n=ObjectManage.findobject(playerID),c=this.root.input_txt.text;n&&(-1!=c.indexOf("{pos|")?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u6b21\u53ea\u80fd\u53d1\u9001\u4e00\u4e2a\u5750\u6807\u70b9\u3002",callfn:function(){}}]):this.root.input_txt.text+="{pos|("+n.grid.x+
","+n.grid.y+")|"+Mapdata.cur_id+"|"+Mapdata.cur_name+"}")};d.BtnClick=function(n){switch(n.target.name){case "btn_send":this.onSendChat();break;case "btn_hanghui":this.chatType=1;break;case "btn_zudui":this.chatType=2;break;case "btn_hanhua":this.chatType=3;break;case "btn_hide":this.openWin=!this.openWin;void 0==this.originX&&(this.originX=0);n={x:this.openWin?this.originX-520:this.originX};this._childs[0].visible=this.openWin?!1:!0;GameUtil.drawerEffect(this,n);0==this.x&&(this.root.getChildByName("img_send").getChildByName("input_txt").text=
"");break;case "chat_oder":this.root.chat_face_bg.visible=!1;this.root.chat_item_bg.visible=!1;this.CMDNode.visible=!this.CMDNode.visible;break;case "chat_face":this.CMDNode.visible=!1;this.root.chat_item_bg.visible=!1;this.root.chat_face_bg.visible=!this.root.chat_face_bg.visible;break;case "chat_item":this.specialItemList=[];for(n=0;n<g_BagItemsList.length;n++)null!=g_BagItemsList[n]&&this.specialItemList.push(n);this.root.list_special.array=this.specialItemList;this.root.chat_face_bg.visible=!1;
this.CMDNode.visible=!1;this.root.chat_item_bg.visible=!this.root.chat_item_bg.visible;break;case "btn_gongliao_enable":this.CurSelectChat=0;this.ResetChatBtnState();this.SelectChatIdx=-1;this.ChatBaseKey="";this.chat_show.showByType(-1);break;case "btn_system_enable":this.CurSelectChat=1;this.ResetChatBtnState();this.SelectChatIdx=0;this.ChatBaseKey="";this.chat_show.showByType(0);break;case "btn_nearby_enable":this.CurSelectChat=2;this.ResetChatBtnState();this.SelectChatIdx=4;this.ChatBaseKey="";
this.chat_show.showByType(4);break;case "btn_hanhua_enable":this.CurSelectChat=3;this.ResetChatBtnState();this.SelectChatIdx=6;this.ChatBaseKey="!";this.chat_show.showByType(6);break;case "btn_hanghui_enable":this.CurSelectChat=4;this.ResetChatBtnState();this.ChatBaseKey="!~";this.SelectChatIdx=3;this.chat_show.showByType(3);break;case "btn_team_enable":this.clickTeamBtn();break;case "btn_siliao_enable":this.CurSelectChat=6,this.ResetChatBtnState(),this.ChatBaseKey="/",this.SelectChatIdx=2,this.chat_show.showByType(2)}};
d.sendCaptainPosInTeam=function(){this.clickTeamBtn();this.sendPos();this.onSendChat()};d.clickTeamBtn=function(){this.CurSelectChat=5;this.ResetChatBtnState();this.ChatBaseKey="!!";this.SelectChatIdx=1;this.chat_show.showByType(1)};d.onSendChat=function(){var n=this.root.getChildByName("img_send").getChildByName("input_txt").text;""==n||Sendmessage.SendMonsterGM(n)||(0>n.indexOf(this.ChatBaseKey)&&""!=this.ChatBaseKey?Sendmessage.sendSay(this.ChatBaseKey+n):Sendmessage.sendSay(n));this.root.getChildByName("img_send").getChildByName("input_txt").text=
"";this.specialItemList=[];this.root.chat_face_bg.visible=!1;this.root.chat_item_bg.visible=!1;this.CMDNode.visible=!1};d.GetChatListByType=function(n){var c=[];if(0>n)return this.chatMsgList;for(var h=0;h<this.chatMsgList.length;h++)this.chatMsgList[h].type==n&&c.push(this.chatMsgList[h]);return c};d.MouseMove=function(n){this.ShowBtnInfoItem("")};d.ChatMsg=function(n){if(8!=n.type){var c=[],h=n.info;if(-1!=h.indexOf(":")&&10>h.indexOf(":")&&-1==h.indexOf("[\u653b\u51fb\u6a21\u5f0f")&&-1==h.indexOf("\u516c\u544a:")&&
0!=n.type){var m=h.indexOf(":"),g=h.substring(0,m);-1==g.indexOf("{")&&(c.push(g+"|name"),h=h.substring(m))}else-1!=h.indexOf("=>")&&(m=h.indexOf("=>"),g=h.substring(0,m),-1==g.indexOf("{")&&(c.push(g+"|name"),h=h.substring(m)));for(;-1!=h.indexOf("{")&&-1!=h.indexOf("|")&&-1!=h.indexOf("}")||-1!=h.indexOf("</:")&&-1!=h.indexOf(">");)0!=h.indexOf("{")&&(m=h.indexOf("{"),c.push(h.substring(0,m)),h=h.substring(m)),0!=h.indexOf("</:")&&0>h.indexOf("{<")&&(m=h.indexOf("<"),c.push(h.substring(0,m)),h=
h.substring(m)),0!=h.indexOf(">")&&0>h.indexOf("{>")&&(m=h.indexOf(">"),c.push(h.substring(0,m+1)),h=h.substring(m+1)),m=h.indexOf("{"),g=h.indexOf("}"),-1!=m&&-1!=g?(c.push(h.substring(0,g+1)),h=h.substring(g+1)):""!=h&&c.push(h);""!=h&&c.push(h);c=GameUtil.check_showItem(c);if(-1==this.SelectChatIdx||this.SelectChatIdx==n.type)h=this.isTopInfo(n),this.chatMsgList=GameUtil.makeLable(c,n.front,n.bg,!0,n.type),this.chat_show.setBox(this.chatMsgList,n.bg,n.type,void 0,h)}};d.isTopInfo=function(n){if(!n)return!1;
for(var c=0;c<topInfoList.length;c++)if(n.info==topInfoList[c].info)return!0};d.getChatName=function(n){this.CurSelectChat=6;this.ResetChatBtnState();this.ChatBaseKey="/";this.SelectChatIdx=2;var c=this.GetChatListByType(2);this.root.getChildByName("list_txt").array=c;this.root.input_txt.text="/"+n+" "};d.checkOpenChatUI=function(){this.openWin||this.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||Laya.stage.event("show_chat_dlg",[null,!1])};d.on_Mousedown=function(){this.x1=Laya.stage.mouseX;
this.y1=Laya.stage.mouseY;this.root.getChildByName("list_txt").on(Laya.Event.MOUSE_MOVE,this,this.on_Mousemove)};d.on_Mousemove=function(){this.root.getChildByName("list_txt").on(Laya.Event.MOUSE_UP,this,this.on_Mouseup)};d.on_Mouseup=function(){this.x2=Laya.stage.mouseX;this.y2=Laya.stage.mouseY;50<this.x1-this.x2&&50>Math.abs(this.y1-this.y2)&&(this.visible=!1,this.checkOpenChatUI(),Laya.stage.event("show_chat_node"),this.root.getChildByName("img_send").getChildByName("input_txt").text="")}})();
var uiChatConfig=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"uiChatConfig",chatconfigUI);e=f.prototype;e.init=function(){Laya.stage.on("VOICE_EVENT",this,this.onevent);this.pos(browser_width/2-this.width/2,browser_height/2-this.height/2);this.cur_cbox=null;this.cur_type=0;this.cur_name="";this.room_lock=!1;this.btn_close.on(Laya.Event.CLICK,this,function(){this.room_lock=this.visible=!1;Laya.MouseManager.multiTouchEnabled=!0});this.cb_voice.on(Laya.Event.CHANGE,this,function(a){VoiceSocket.switchsound(a.selected)},
[this.cb_voice]);this.cb_microphone.on(Laya.Event.CHANGE,this,function(a){VoiceSocket.switchMic(a.selected)},[this.cb_microphone]);this.createselecet(VoiceSocket.roomtypes)};e.afreshlink=function(){VoiceSocket.socket.connected||(console.log("-----afreshlinking-------"),g_serverconfig.boVoice&&VoiceSocket.connect(g_serverconfig.sVoiceIP,g_serverconfig.nVoicePort),VoiceSocket.exitroom());Laya.MouseManager.multiTouchEnabled=!1};e.onexitroom=function(){this.cb_voice.selected=!1;this.cb_microphone.selected=
!1;VoiceSocket.exitroom(this.cur_type,this.cur_name)};e.onevent=function(a){switch(a){case "onvoiceopen":this.createselecet(VoiceSocket.roomtypes);break;case "onvoiceclose":this.box_select.removeChildren();VoiceSocket.exitroom();break;case "onenterroomsuccess":this.cb_voice.selected=!0;this.cb_microphone.selected=!0;break;case "onexitroom":this.onexitroom()}};e.createselecet=function(a){for(var b="",d=0;d<a.length;d++)b+=a[d]+(d==a.length-1?"":",");var n=new Laya.RadioGroup;n.labels=b;n.stateNum=
2;n.labelPadding="10,0,0,10";n.labelSize=20;n.labelColors="#c69c61";n.skin="gameres/ui/btn2.png";n.selectHandler=new Laya.Handler(this,this.routeSelect,[n]);this.box_select.addChild(n);Laya.timer.once(500,this,function(){for(var c=0,h=0,m=0;c<n._childs.length;c++,h++)3<=h&&(h=0,m++),n._childs[c].x=10+170*h,n._childs[c].y=10+60*m,console.log(n._childs[c].x,n._childs[c].y)})};e.routeSelect=function(a,b){a.disabled=!0;b=a._childs[b].label;this.onexitroom();switch(b){case "\u961f\u4f0d":if(0!=G_Team_Grop_List.length)this.cur_type=
1,this.cur_name="Team_"+G_Team_Grop_List[0].split(";")[0];else{Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u961f\u4f0d!",callfn:function(){}}]);a.disabled=!1;return}break;case "\u884c\u4f1a":if(""!=G_Guild_Name)this.cur_type=2,this.cur_name="Gild_"+G_Guild_Name.substring(0,G_Guild_Name.indexOf("["));else{Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u884c\u4f1a!",callfn:function(){}}]);a.disabled=!1;return}break;case "\u672c\u533a":this.cur_type=3;this.cur_name=
"Area_"+g_ServerName;break;case "\u8de8\u670d":this.cur_type=4;this.cur_name="";break;case "\u5173\u95ed":this.cur_type=0,this.cur_name=""}Laya.timer.once(1E3,this,function(d){VoiceSocket.switchroom(1,this.cur_type,this.cur_name);d.disabled=!1},[a])};return f}(chatconfigUI);
(function(){function e(){e.__super.call(this);this.size(64,64);var b=new Laya.Image("gameres/png/00061.png");b.size(63,63);var d=new Laya.Image;b.addChild(d);this.addChild(b);this.Show=function(n,c,h){0!=ItemMgr.getInstance().InDepotRoomList[c]?(b.addChild(d),d.skin=h,d.tag=c,b.mouseEnabled=!0,d.mouseEnabled=!1,d.visible=!0,d.anchorX=.5,d.anchorY=.5,d.pivotX=d.width/2,d.pivotY=d.height/2,d.x=b.width/2,d.y=b.height/2):d.skin=""}}function f(){f.__super.call(this);this.dragDlg=!1;this.startDragPos=new Laya.Point(0,
0);this.baseKey="ui/store/";this.Init()}Laya.class(e,"DepotItem",Laya.Box);Laya.class(f,"UIDepot",laya.display.Sprite);var a=f.prototype;a.Init=function(){Laya.stage.on("update_depot",this,this.UpdateDepot);this.ResLoaded()};a.ResLoaded=function(){this.root=new StoreRoomUI;this.addChild(this.root);this.ResetUI();this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.OnMouseMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,
this,this.OnMouseUp);this.UpdateDepot()};a.UpdateDepot=function(){if(void 0!=this.root){var b=ItemMgr.getInstance().InDepotRoomList;this.root.getChildByName("list_view").repeatX=5;this.root.getChildByName("list_view").repeatY=8;this.root.getChildByName("list_view").vScrollBarSkin="";this.root.getChildByName("list_view").itemRender=e;this.root.getChildByName("list_view").selectEnable=!0;this.root.getChildByName("list_view").selectHandler=new Laya.Handler(this,this.OnSelect);this.root.getChildByName("list_view").renderHandler=
new Laya.Handler(this,this.UpdateItem);this.root.getChildByName("list_view").mouseHandler=new Laya.Handler(this,this.ClickItem);this.root.getChildByName("list_view").array=[];for(var d=0;d<b.length;d++)0==b[d]&&(b.splice(d,1),d--);for(d=b.length;49>d;d++)b.push(0);this.root.getChildByName("list_view").array=b}};a.OnSelect=function(b){};a.ClickItem=function(b,d){"mouseup"==b.type&&0!=ItemMgr.getInstance().InDepotRoomList[d]&&b.target._childs[0]&&(ItemMgr.getInstance().CurSelecItem=ItemMgr.getInstance().InDepotRoomList[d],
ItemMgr.getInstance().CurSelecItem.from="depot_dlg",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]))};a.UpdateItem=function(b,d){var n=ItemMgr.getInstance().InDepotRoomList[d];n&&GameUtil.loadImg(n.s.Looks,"items",function(c){b.Show(b.dataSource,d,c)})};a.OnMouseDown=function(){var b=this.root.getChildByName("img_bg"),d=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));b.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.dragDlg=!0,this.startDragPos.x=.8*d.x,
this.startDragPos.y=.8*d.y);this.root.getChildByName("list_view").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&("depot"==ItemMgr.getInstance().LastDragFrom?Laya.stage.event("update_depot"):"bag"==ItemMgr.getInstance().LastDragFrom&&(item=ItemMgr.getInstance().InBagList[g_CurDragItem.tag],ItemMgr.getInstance().AddItemToDepot(item),GameUtil.isMultiple(item)?Laya.stage.event("item_hint",[item,-item.Items.Dura]):Laya.stage.event("item_hint",[item.Items,-1]),ItemMgr.getInstance().DeleteItem(item.MakeIndex),
2==G_SpotDlgMode?Sendmessage.DepotOrBagItems(item.MakeIndex,4):Sendmessage.DepotOrBagItems(item.MakeIndex,3),Laya.stage.event("update_depot"),Laya.stage.event("show_bag_items")))};a.OnMouseMove=function(){this.root.getChildByName("img_bg");this.dragDlg&&(this.x=(Laya.stage.mouseX-this.startDragPos.x)*g_BaseScale,this.y=(Laya.stage.mouseY-this.startDragPos.y)*g_BaseScale)};a.OnMouseUp=function(){this.dragDlg=!1};a.ResetUI=function(){null!=this.root&&(this.root.getChildByName("list_view").skin="",this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,
this,this.BtnClick))};a.BtnClick=function(b){"btn_exit"==b.target.name&&(this.visible=!1)}})();
(function(){function e(a,b){this.asset;this.msgcontent=a;this.npcId=b;Laya.Dialog.closeAll();this.dialog=new Laya.Dialog;this.Init()}Laya.class(e,"UIDialog",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("npc_log_close",this,this.DoNpc);this.onSkinLoaded()};f.DoNpc=function(a){this.visible=!1;Laya.Dialog.closeAll()};f.onSkinLoaded=function(){var a=new Laya.Image;a.skin=this.asset[1];a.width=550;a.height=200;a.name="img_bg";this.dialog.addChild(a);a=new Laya.Button(this.asset[0]);
a.on(Laya.Event.CLICK,this,this.DoNpc);a.height=46;a.pos(507,0);a.stateNum=2;this.dialog.addChild(a);this.dialog.dragArea="0,0,550,200";this.dialog.show();var b=this;setTimeout(function(){b.onAddMsgItem()},300)};f.onAddMsgItem=function(){var a=this.msgcontent.split("\\"),b=new RegExp(/<.+?>/g);this.dlg_height=0;a.forEach(function(d,n){var c=new Laya.Text;n=21*n+10;c.fontSize=16;c.color="#ffffff";c.textHeight=21;c.x=40;c.y=n;var h=d.match(b);this.dlg_height=n;if(null!=h){c=40;for(var m=0;m<h.length;m++){var g=
new Laya.Text,l=new Laya.Text;this.dialog.addChild(l);this.dialog.addChild(g);g.fontSize=16;g.textHeight=21;l.textHeight=21;l.fontSize=16;var p=0,q=d.indexOf(h[m]);0<m&&(p=d.indexOf(h[m-1])+h[m-1].length);l.x=c;l.y=n;l.color="#ffffff";l.text=d.substring(p,q);c=l.x+l.textWidth;g.x=c;g.y=n;RegExp("text").test(h[m])||(RegExp("/@").test(h[m])?(l=h[m].substring(1,h[m].length-1),l=l.split("/"),g.text=l[0],g.underline=!0,g.color="#ffff00",g.on(Laya.Event.CLICK,this,this.onCmdClick,[l[1]])):RegExp("/F").test(h[m])&&
(l=h[m].substring(1,h[m].length-1),l=l.split("/"),g.text=l[0],g.underline=!1,0<l[1].indexOf("$")?g.color="#"+Get3RGB(l[1].split("$")[1].substr(2,6)):g.color=Get2RGB(parseInt(l[1].split("=")[1]))));c+=g.textWidth;m==h.length-1&&(g=new Laya.Text,g.fontSize=16,g.x=c,g.y=n,g.textHeight=21,g.color="#ffffff",g.text=d.substring(d.indexOf(h[m])+h[m].length,d.length),this.dialog.addChild(g))}}else c.text=d,this.dialog.addChild(c)},this)};f.onCmdClick=function(a){"@exit"==a?this.dialog.close():Sendmessage.SendNpcCMD(a,
this.npcId)}})();
var UIdoudizhu=function(e){function f(){f.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(86,128);this.img=new Laya.Image;this.addChild(this.img);this.setImg=function(p){this.img.skin=p}}var b=[],d=20,n=0,c=1,h=[],m=0,g=[],l=!0;Laya.class(f,"UIdoudizhu",doudizhuUI);e=f.prototype;Laya.class(a,"Item",Laya.Box);e.init=function(){var p=[];p.push({url:["ui/doudizhu/00019.png"]});Laya.loader.load(p,Laya.Handler.create(this,this.ResLoaded),null,Laya.Loader.IMAGE);this.ready=!0;
this.btn_1.visible=!1;this.btn_2.visible=!1;this.btn_3.visible=!1;this.btn_chupai.visible=!1;this.btn_chongxuan.visible=!1;this.btn_buchu.visible=!1;this.img_play1_buchu.visible=!1;this.img_play2_buchu.visible=!1;this.img_play3_buchu.visible=!1;this.img_yb_play1.visible=!1;this.img_yb_play2.visible=!1;this.img_yb_play3.visible=!1;this.img_zhenying1.visible=!1;this.img_zhenying2.visible=!1;this.img_zhenying3.visible=!1;this.img_play1_fen.visible=!1;this.img_play2_fen.visible=!1;this.img_play3_fen.visible=
!1;this.img_play1.skin="ui/doudizhu/00113.png";this.img_play2.skin="ui/doudizhu/00113.png";this.img_play3.skin="ui/doudizhu/00113.png";this.text_ready2go.visible=!1;this.text_ready3go.visible=!1;this.img_play2_buchu.visible=!1;this.img_play3_buchu.visible=!1;this.text_yb_play1.text=0;this.text_yb_play2.text=0;this.text_yb_play3.text=0;this.name_play1.text="";this.name_play2.text="";this.name_play3.text="";this.play1_time.visible=!1;this.play2_time.visible=!1;this.play3_time.visible=!1;this.list_shoupai.array=
[];this.game_result.visible=!1;Laya.stage.on("Update",this,this.Update);Laya.stage.on("NotOut",this,this.NotOut);Laya.stage.on("OutLine",this,this.OutLine);Laya.stage.on("OnTime",this,this.OnTimeUpdate);Laya.stage.on("clockTime",this,this.clockTime);Laya.stage.on("OutLineEnterGetTimerNum",this,this.OutLineEnterGetTimerNum);Laya.stage.on("MusicSound",this,this.MusicSound);Laya.SoundManager.playMusic("wav/doudizhu/MusicEx_Exciting.wav",0);Laya.timer.loop(1E3,this,this.countDown)};e.ResLoaded=function(){this.btn_exit.on(Laya.Event.CLICK,
this,this.exitCardGame3);this.btn_ready.on(Laya.Event.CLICK,this,this.ReadyCardGame3);this.btn_1.on(Laya.Event.CLICK,this,this.chooseScore);this.btn_2.on(Laya.Event.CLICK,this,this.chooseScore);this.btn_3.on(Laya.Event.CLICK,this,this.chooseScore);this.btn_chupai.on(Laya.Event.CLICK,this,this.throwCard);this.btn_buchu.on(Laya.Event.CLICK,this,this.notThrowCard);this.btn_tuoguan.on(Laya.Event.CLICK,this,this.autoCard);this.btn_chongkai.on(Laya.Event.CLICK,this,this.oneMore);this.btn_chongxuan.on(Laya.Event.CLICK,
this,this.Reelection);this.btn_tishi.on(Laya.Event.CLICK,this,this.hint);this.list_shoupai.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.btn_off_tuoguan.on(Laya.Event.CLICK,this,this.autoCard)};e.Update=function(){this.data=new cardGameInfo;this.lastCard=this.data.lastOutCard;this.lastCard=this.lastCard.split(",");for(var p=0;p<this.lastCard.length;p++)""==this.lastCard[p]&&this.lastCard.splice(p,1);if(p=ObjectManage.findobject(playerID))switch(p.nametites[0]){case this.data.role1name:this.role(1,
2,3);break;case this.data.role2name:this.role(2,3,1);break;case this.data.role3name:this.role(3,1,2)}this.ReadyGame();this.text_desk_num.text="\u3010\u6597\u5730\u4e3b\u521d\u7ea7\u573a - \u7b2c"+this.data.deskID+"\u684c\u3011";this.btn_ready.visible&&(this.box_outcard2._childs=[],this.box_outcard1._childs=[],this.box_outcard3._childs=[]);this.yuanbao.text="\u5143\u5b9d\uff1a"+g_GameGoldNum.value;this.dizhu.text="\u5e95\u6ce8\uff1a"+this.data.baseGoldPer;this.beilv.text="\u500d\u7387\uff1a"+this.data.multiple};
e.role=function(p,q,r){this.name_play1.text=this.data["role"+p+"name"];this.text_yb_play1.text=this.data["role"+p+"gameGold"];this.img_play1.skin="ui/doudizhu/00115.png";"1"==this.data["role"+p+"isCollocation"]?(this.btn_off_tuoguan.visible=!0,this.btn_chupai.visible=!1,this.btn_chongxuan.visible=!1,this.btn_buchu.visible=!1,this.btn_tishi.visible=!1,this.play1_time.visible=!1,this.play2_time.visible=!1,this.play3_time.visible=!1):(this.btn_off_tuoguan.visible=!1,this.btn_chupai.visible=!0,this.btn_chongxuan.visible=
!0,this.btn_buchu.visible=!0,this.btn_tishi.visible=!0,this.play1_time.visible=!0,this.play2_time.visible=!0,this.play3_time.visible=!0);"1"==this.data["role"+p+"chooseDiZhuChance"]?(this.btn_1.visible=!0,this.btn_2.visible=!0,this.btn_3.visible=!0):(this.btn_1.visible=!1,this.btn_2.visible=!1,this.btn_3.visible=!1);this.MyHandCard(this.data["role"+p+"roleCardsTab"]);"1"==this.data["role"+p+"outCardChance"]&&"0"==this.data["role"+p+"isCollocation"]?(this.btn_chupai.visible=!0,this.btn_chongxuan.visible=
!0,this.btn_buchu.visible=!0,this.btn_tishi.visible=!0):(this.btn_chupai.visible=!1,this.btn_chongxuan.visible=!1,this.btn_buchu.visible=!1,this.btn_tishi.visible=!1);if(this.data.lastOutCard&&this.data.lastCardName==this.data["role"+p+"name"]){this.box_outcard1._childs=[];var u=this.data.lastOutCard.split(",");u.sort(this.sortNum);for(var v=[],w=0;w<u.length-1;w++)""!=u[w]&&(v[w]=new Laya.Image("ui/doudizhu/"+u[w]+"00.png"),v[0].x=(this.box_outcard1.width-(70+20*(u.length-1)))/2,v[w].x=v[0].x+20*
w,this.box_outcard1.addChild(v[w]));this.box_outcard3._childs=[];this.box_outcard2._childs=[]}"0"==this.data["role"+p+"score"]||this.btn_ready.visible?this.img_play1_fen.visible=!1:(this.img_play1_fen.visible=!0,this.img_play1_fen.skin="1"==this.data["role"+p+"score"]?"ui/doudizhu/00104.png":"2"==this.data["role"+p+"score"]?"ui/doudizhu/00105.png":"ui/doudizhu/00106.png");this.data["role"+q+"name"]?(this.name_play2.text=this.data["role"+q+"name"],this.text_yb_play2.text=this.data["role"+q+"gameGold"],
this.img_play2.skin="ui/doudizhu/00115.png",this.text_ready2go.visible="1"==this.data["role"+q+"isReady"]?!0:!1):(this.name_play2.text=this.data["role"+q+"name"],this.text_yb_play2.text=0,this.img_play2.skin="ui/doudizhu/00113.png",this.text_ready2go.visible=!1);if(this.data.lastOutCard&&this.data.lastCardName==this.data["role"+q+"name"]){this.box_outcard2._childs=[];u=this.data.lastOutCard.split(",");u.sort(this.sortNum);v=[];for(w=0;w<u.length-1;w++)""!=u[w]&&(v[w]=new Laya.Image("ui/doudizhu/"+
u[w]+"00.png"),v[0].x=this.box_outcard2.width-(70+20*(u.length-1)),v[w].x=v[0].x+20*w,this.box_outcard2.addChild(v[w]));this.box_outcard1._childs=[];this.box_outcard3._childs=[]}"0"==this.data["role"+q+"score"]||this.btn_ready.visible||(this.img_play2_fen.visible=!0,this.img_play2_fen.skin="1"==this.data["role"+q+"score"]?"ui/doudizhu/00104.png":"2"==this.data["role"+q+"score"]?"ui/doudizhu/00105.png":"ui/doudizhu/00106.png");this.data["role"+r+"name"]?(this.name_play3.text=this.data["role"+r+"name"],
this.text_yb_play3.text=this.data["role"+r+"gameGold"],this.img_play3.skin="ui/doudizhu/00115.png",this.text_ready3go.visible="1"==this.data["role"+r+"isReady"]?!0:!1):(this.name_play3.text=this.data["role"+r+"name"],this.text_yb_play3.text=0,this.img_play3.skin="ui/doudizhu/00113.png",this.text_ready3go.visible=!1);if(this.data.lastOutCard&&this.data.lastCardName==this.data["role"+r+"name"]){this.box_outcard3._childs=[];u=this.data.lastOutCard.split(",");u.sort(this.sortNum);v=[];for(w=0;w<u.length-
1;w++)""!=u[w]&&(v[w]=new Laya.Image("ui/doudizhu/"+u[w]+"00.png"),v[w].x=20*w,this.box_outcard3.addChild(v[w]));this.box_outcard2._childs=[];this.box_outcard1._childs=[]}"0"==this.data["role"+r+"score"]||this.btn_ready.visible||(this.img_play3_fen.visible=!0,this.img_play3_fen.skin="1"==this.data["role"+r+"score"]?"ui/doudizhu/00104.png":"2"==this.data["role"+r+"score"]?"ui/doudizhu/00105.png":"ui/doudizhu/00106.png");"0"==this.data["role"+p+"score"]&&"0"==this.data["role"+q+"score"]&&"0"==this.data["role"+
r+"score"]&&(this.img_play1_fen.visible=!1,this.img_play2_fen.visible=!1,this.img_play3_fen.visible=!1);this.data["role"+p+"name"]&&(this.img_play1.skin="1"==this.data["role"+p+"chooseDiZhuChance"]?"ui/doudizhu/00114.png":"ui/doudizhu/00115.png");this.data["role"+q+"name"]&&(this.img_play2.skin="1"==this.data["role"+q+"chooseDiZhuChance"]?"ui/doudizhu/00114.png":"ui/doudizhu/00115.png");this.data["role"+r+"name"]&&(this.img_play3.skin="1"==this.data["role"+r+"chooseDiZhuChance"]?"ui/doudizhu/00114.png":
"ui/doudizhu/00115.png");d=20;"1"!=this.data["role"+p+"outCardChance"]&&"1"!=this.data["role"+p+"chooseDiZhuChance"]||"0"!=this.data["role"+p+"isCollocation"]?(this.play1_time.visible=!1,this.play1_time_text.text=20):(this.play1_time.visible=!0,n=1);"1"!=this.data["role"+q+"outCardChance"]&&"1"!=this.data["role"+q+"chooseDiZhuChance"]||"0"!=this.data["role"+q+"isCollocation"]?(this.play2_time.visible=!1,this.play2_time_text.text=20):(this.play2_time.visible=!0,n=2);"1"!=this.data["role"+r+"outCardChance"]&&
"1"!=this.data["role"+r+"chooseDiZhuChance"]||"0"!=this.data["role"+r+"isCollocation"]?(this.play3_time.visible=!1,this.play3_time_text.text=20):(this.play3_time.visible=!0,n=3);"1"==this.data["role"+p+"outCardChance"]?this.img_play1_buchu.visible=!1:"1"==this.data["role"+q+"outCardChance"]?this.img_play2_buchu.visible=!1:this.img_play3_buchu.visible=!1;"1"==this.data.isGameOver&&this.GameResult(p,q,r);if("1"==this.data["role"+p+"isDiZhu"]&&this.data["role"+q+"name"]&&this.data["role"+r+"name"]&&
(this.img_play1.skin="ui/doudizhu/00114.png",this.img_play2.skin="ui/doudizhu/00115.png",this.img_play3.skin="ui/doudizhu/00115.png",this.img_zhenying1.skin="ui/doudizhu/00116.png",this.img_zhenying2.skin="ui/doudizhu/00117.png",this.img_zhenying3.skin="ui/doudizhu/00117.png",this.img_play2_fen.visible=!1,this.img_play3_fen.visible=!1,this.img_play1_fen.visible=!1,this.data.underCards)){this.list_dipai._childs=[];u=this.data.underCards.split(",");u.sort(this.sortNum);v=[];for(w=0;w<u.length-1;w++)v[w]=
new Laya.Image("ui/doudizhu/"+u[w]+"00.png"),v[w].x=95*w,this.list_dipai.addChild(v[w]);this.img_yb_play1.visible=!0;this.img_yb_play2.visible=!0;this.img_yb_play3.visible=!0;this.img_zhenying1.visible=!0;this.img_zhenying2.visible=!0;this.img_zhenying3.visible=!0}if("1"==this.data["role"+q+"isDiZhu"]&&this.data["role"+r+"name"]&&this.data["role"+p+"name"]&&(this.img_play2.skin="ui/doudizhu/00114.png",this.img_play3.skin="ui/doudizhu/00115.png",this.img_play1.skin="ui/doudizhu/00115.png",this.img_zhenying1.skin=
"ui/doudizhu/00117.png",this.img_zhenying2.skin="ui/doudizhu/00116.png",this.img_zhenying3.skin="ui/doudizhu/00117.png",this.img_play1_fen.visible=!1,this.img_play3_fen.visible=!1,this.img_play2_fen.visible=!1,this.data.underCards)){this.list_dipai._childs=[];u=this.data.underCards.split(",");u.sort(this.sortNum);v=[];for(w=0;w<u.length-1;w++)v[w]=new Laya.Image("ui/doudizhu/"+u[w]+"00.png"),v[w].x=95*w,this.list_dipai.addChild(v[w]);this.img_yb_play1.visible=!0;this.img_yb_play2.visible=!0;this.img_yb_play3.visible=
!0;this.img_zhenying1.visible=!0;this.img_zhenying2.visible=!0;this.img_zhenying3.visible=!0}if("1"==this.data["role"+r+"isDiZhu"]&&this.data["role"+p+"name"]&&this.data["role"+q+"name"]&&(this.img_play3.skin="ui/doudizhu/00114.png",this.img_play1.skin="ui/doudizhu/00115.png",this.img_play2.skin="ui/doudizhu/00115.png",this.img_zhenying1.skin="ui/doudizhu/00117.png",this.img_zhenying2.skin="ui/doudizhu/00117.png",this.img_zhenying3.skin="ui/doudizhu/00116.png",this.img_play1_fen.visible=!1,this.img_play2_fen.visible=
!1,this.img_play3_fen.visible=!1,this.data.underCards)){this.list_dipai._childs=[];u=this.data.underCards.split(",");u.sort(this.sortNum);v=[];for(w=0;w<u.length-1;w++)v[w]=new Laya.Image("ui/doudizhu/"+u[w]+"00.png"),v[w].x=95*w,this.list_dipai.addChild(v[w]);this.img_yb_play1.visible=!0;this.img_yb_play2.visible=!0;this.img_yb_play3.visible=!0;this.img_zhenying1.visible=!0;this.img_zhenying2.visible=!0;this.img_zhenying3.visible=!0}};e.GameResult=function(p,q,r){this.game_result.visible=!0;this.MusicSound(this.data.lastOutCard);
"1"==this.data["role"+p+"isWinner"]&&"1"==this.data["role"+p+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00008.png",this.img_game_dizhu1.visible=!0,this.text_gameplay1name.text=this.data["role"+p+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="+"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+q+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=
this.data.multiple,this.text_gameplay2_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+r+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,l&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Win.wav")):"0"==this.data["role"+p+"isWinner"]&&"1"==this.data["role"+p+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00006.png",
this.img_game_dizhu1.visible=!0,this.text_gameplay1name.text=this.data["role"+p+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="-"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+q+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,
this.text_gameplay3name.text=this.data["role"+r+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,l&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Lose.wav")):"1"==this.data["role"+p+"isWinner"]&&"1"==this.data["role"+q+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00009.png",this.text_gameplay1name.text=this.data["role"+p+"name"],this.text_gameplay1_dizhu.text=
this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu2.visible=!0,this.text_gameplay2name.text=this.data["role"+q+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="-"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+r+"name"],this.text_gameplay3_dizhu.text=
this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,l&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Win.wav")):"1"==this.data["role"+p+"isWinner"]&&"1"==this.data["role"+r+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00009.png",this.text_gameplay1name.text=this.data["role"+p+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text=
"+"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+q+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu3.visible=!0,this.text_gameplay3name.text=this.data["role"+r+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text=
"-"+2*this.data.baseGoldPer*this.data.multiple,l&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Win.wav")):("0"==this.data["role"+p+"isWinner"]&&"1"==this.data["role"+q+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00007.png",this.text_gameplay1name.text=this.data["role"+p+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu2.visible=!0,this.text_gameplay2name.text=
this.data["role"+q+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="+"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+r+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple):(this.game_win.skin="ui/doudizhu/00007.png",this.text_gameplay1name.text=
this.data["role"+p+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+q+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu3.visible=!0,this.text_gameplay3name.text=
this.data["role"+r+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="+"+2*this.data.baseGoldPer*this.data.multiple),l&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Lose.wav"));this.btn_chupai.visible=!1;this.btn_chongxuan.visible=!1;this.btn_buchu.visible=!1;this.btn_tishi.visible=!1;this.play1_time.visible=!1;this.play2_time.visible=!1;this.play3_time.visible=!1};e.OutLine=function(){if(this.data.role1roleCardsTab||
this.data.role2roleCardsTab||this.data.role3roleCardsTab)this.btn_ready.visible=!1;if(!this.btn_ready.visible)for(var p=[],q=0;3>q;q++)p[q]=new Laya.Image("ui/doudizhu/00017.png"),p[q].x=95*q,this.list_dipai.addChild(p[q]);this.data.underCards&&(this.img_zhenying1.visible=!0,this.img_zhenying2.visible=!0,this.img_zhenying3.visible=!0);l=!0;this.Update();d=this.data.timerNum};e.OnTimeUpdate=function(p){c=p;if(p=ObjectManage.findobject(playerID))switch(p.nametites[0]){case this.data.role1name:var q=
this.data.role1outCardChance;var r=this.data.role1isCollocation;break;case this.data.role2name:q=this.data.role2outCardChance;r=this.data.role2isCollocation;break;case this.data.role3name:q=this.data.role3outCardChance,r=this.data.role3isCollocation}if("1"==q&&"1"==r)Laya.timer.once(250,this,function(){Sendmessage.sendCardGame3("SystemOutCard|"+c.toString())})};e.OutLineEnterGetTimerNum=function(){Sendmessage.sendCardGame3("OutLineEnterGetTimerNum|"+d.toString())};e.NotOut=function(){var p=ObjectManage.findobject(playerID);
l&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_buyao1.wav");if(p)switch(p.nametites[0]){case this.data.role1name:"1"==this.data.role1outCardChance?this.img_play3_buchu.visible=!0:"1"==this.data.role2outCardChance?this.img_play1_buchu.visible=!0:this.img_play2_buchu.visible=!0;break;case this.data.role2name:"1"==this.data.role2outCardChance?this.img_play3_buchu.visible=!0:"1"==this.data.role3outCardChance?this.img_play1_buchu.visible=!0:this.img_play2_buchu.visible=!0;break;case this.data.role3name:"1"==
this.data.role3outCardChance?this.img_play3_buchu.visible=!0:"1"==this.data.role1outCardChance?this.img_play1_buchu.visible=!0:this.img_play2_buchu.visible=!0}};e.ReadyGame=function(){if("1"==this.data.role1isReady&&"1"==this.data.role2isReady&&"1"==this.data.role3isReady){this.btn_ready.visible=!1;for(var p=[],q=0;3>q;q++)p[q]=new Laya.Image("ui/doudizhu/00017.png"),p[q].x=95*q,this.list_dipai.addChild(p[q])}};e.MyHandCard=function(p){p=p.split(",");p.sort(this.sortNum);var q=[];this.list_shoupai.width=
86*(p.length-1)-63*(p.length-2);this.list_shoupai.itemRender=a;this.list_shoupai.repeatX=p.length-1;this.list_shoupai.repeatY=1;this.list_shoupai.spaceX=-63;this.list_shoupai.selectEnable=!0;this.list_shoupai.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_shoupai.selectHandler=new Laya.Handler(this,this.onSelect);this.list_shoupai.x=(Laya.stage.width-this.list_shoupai.width)/2;for(var r=0;r<p.length;r++)""!=p[r]&&q.push("ui/doudizhu/"+p[r]+"00.png");this.list_shoupai.array=q;for(r=
0;r<this.list_shoupai.cells.length;r++)this.list_shoupai.cells[r].name=p[r]};e.UpdateItem=function(p,q){p.setImg(p.dataSource)};e.onSelect=function(p){this.list_shoupai._selectedIndex=-1};e.MouseDown=function(p){this.list_shoupai.on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.list_shoupai.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.list_shoupai.on(Laya.Event.MOUSE_OUT,this,this.MouseUp);console.log(g);if(""==g){var q=this.list_shoupai.cells.indexOf(p.target);-1==g.indexOf(q)&&g.push(q);q=new Laya.GlowFilter("#ffff00",
3,0,0);p.target.filters=[q]}};e.MouseUp=function(){this.list_shoupai.off(Laya.Event.MOUSE_MOVE,this,this.MouseMove);for(var p=0;p<g.length;p++){var q=this.list_shoupai.cells[g[p]];q.y=0==q.y?q.y-10:q.y+10;q.filters=[]}g=[]};e.MouseMove=function(p){var q=this.list_shoupai.cells.indexOf(p.target);-1==g.indexOf(q)&&g.push(q);q=new Laya.GlowFilter("#ffff00",3,0,0);p.target.filters=[q]};e.MusicSound=function(p){switch(p){case "1":l&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_NoOrder.wav");break;case "2":l&&
GameUtil.PlayMusicFormat("wav/doudizhu/Woman_Order.wav");break;case "3":l&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_Rob1.wav")}if(l)switch(this.data.lastOutCardType){case "1":p=p.slice(1,3);"16"==p?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_15.wav"):"18"==p?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_100.wav"):"19"==p?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_200.wav"):GameUtil.PlayMusicFormat("wav/doudizhu/Woman_"+p+".wav");break;case "2":p=p.slice(1,3);"16"==p?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_dui15.wav"):
GameUtil.PlayMusicFormat("wav/doudizhu/Woman_dui"+p+".wav");break;case "3":p=p.slice(1,3);"16"==p?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_tuple15.wav"):GameUtil.PlayMusicFormat("wav/doudizhu/Woman_tuple"+p+".wav");break;case "4":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sandaiyi.wav");break;case "5":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sandaiyidui.wav");break;case "6":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sidaier.wav");break;case "7":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sidailiangdui.wav");
break;case "8":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_shunzi.wav");break;case "9":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_liandui.wav");break;case "10":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_zhadan.wav");break;case "11":case "12":case "13":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_feiji.wav");break;case "14":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_wangzha.wav")}};e.Reelection=function(){for(var p=0;p<this.list_shoupai.cells.length;p++)this.list_shoupai.cells[p]&&-10==this.list_shoupai.cells[p].y&&
(this.list_shoupai.cells[p].y+=10)};e.exitCardGame3=function(){Sendmessage.sendCardGame3("exitGame|\u9000\u51fa\u623f\u95f4");Laya.timer.clear(this,this.countDown);Laya.SoundManager.stopAll();l=!1;this.removeSelf()};e.CardGame3=function(){Sendmessage.sendCardGame3("QuickJoinRoom|\u52a0\u5165\u623f\u95f4")};e.ReadyCardGame3=function(){Sendmessage.sendCardGame3("ReadyStartGame|\u73a9\u5bb6\u51c6\u5907");this.ready?(this.btn_ready.label="\u5df2\u51c6\u5907",this.ready=!1):(this.btn_ready.label="\u51c6\u5907",
this.ready=!0)};e.chooseScore=function(p){p=p.target.name.split("_")[1];Sendmessage.sendCardGame3("FromChooseDiZhuBtn|"+p);this.btn_1.visible=!1;this.btn_2.visible=!1;this.btn_3.visible=!1};e.oneMore=function(){Sendmessage.sendCardGame3("OneMoreToServer|\u518d\u6765\u4e00\u5c40");this.game_result.visible=!1;this.btn_ready.visible=!0;this.btn_ready.label="\u51c6\u5907";this.ready=!0;this.btn_off_tuoguan.visible=!1;this.img_play1_buchu.visible=!1;this.img_play2_buchu.visible=!1;this.img_play3_buchu.visible=
!1;this.img_yb_play1.visible=!1;this.img_yb_play2.visible=!1;this.img_yb_play3.visible=!1;this.img_zhenying1.visible=!1;this.img_zhenying2.visible=!1;this.img_zhenying3.visible=!1;this.img_game_dizhu1.visible=!1;this.img_game_dizhu2.visible=!1;this.img_game_dizhu3.visible=!1;this.list_dipai._childs=[];this.box_outcard1._childs=[];this.box_outcard2._childs=[];this.box_outcard3._childs=[];this.list_shoupai.array=[]};e.throwCard=function(){for(var p=0;p<this.list_shoupai.cells.length;p++)-10==this.list_shoupai.cells[p].y&&
b.push(this.list_shoupai.cells[p].name);for(p=0;p<b.length;p++)b[p]="["+(p+1)+"]="+b[p];Sendmessage.sendCardGame3("CheckCards|<"+(b.toString()+">"));b=[];h=[];m=0};e.notThrowCard=function(){Sendmessage.sendCardGame3("NoOutCards|\u4e0d\u51fa\u724c");h=[];m=0};e.autoCard=function(){Sendmessage.sendCardGame3("FromCollocationBtn|\u6258\u7ba1");h=[];m=0};e.countDown=function(){switch(n){case 1:this.play1_time_text.align="center";this.play1_time_text.text=d.toString();break;case 2:this.play2_time_text.align=
"center";this.play2_time_text.text=d.toString();break;case 3:this.play3_time_text.align="center",this.play3_time_text.text=d.toString()}0<d?d--:(1==this.data.role1chooseDiZhuChance||1==this.data.role2chooseDiZhuChance||1==this.data.role3chooseDiZhuChance?Sendmessage.sendCardGame3("SystemChooseDiZhu|"+c.toString()):(1==this.data.role1outCardChance||1==this.data.role2outCardChance||1==this.data.role3outCardChance)&&Sendmessage.sendCardGame3("SystemOutCard|"+c.toString()),d=20)};e.hint=function(){this.Reelection();
var p=[],q=ObjectManage.findobject(playerID);if(q)switch(q.nametites[0]){case this.data.role1name:p=this.data.role1roleCardsTab;break;case this.data.role2name:p=this.data.role2roleCardsTab;break;case this.data.role3name:p=this.data.role3roleCardsTab}this.lastCard&&p&&(p=p.split(","),""==p[p.length-1]&&p.pop(),this.toNum(this.lastCard),this.toNum(p),this.autoPick(this.lastCard,p));h&&0!=h.length?(h=this.unique(h),console.log(h),h.length-1<m&&(m=0),this.pushHint(h[m]),m++):(Laya.stage.event("show_log",
[{txt:"\u624b\u4e2d\u6ca1\u6709\u7b26\u5408\u8981\u6c42\u7684\u724c\u3002",color:"#ff0000"}]),m=0);h=[]};e.pushHint=function(p){for(var q=0;q<p.length;q++)for(var r=0;r<this.list_shoupai.cells.length;r++)if(parseInt(this.list_shoupai.cells[r].name)%100==p[q]&&-10!=this.list_shoupai.cells[r].y){this.list_shoupai.cells[r].y=-10;break}};e.unique=function(p){for(var q=[p[0]],r=1;r<p.length;r++)p[r].toString()!==q[q.length-1].toString()&&q.push(p[r]);return q};e.toNum=function(p){for(var q=0;q<p.length;q++)p[q]=
parseInt(p[q])%100};e.toStr=function(p){for(var q=0;q<p.length;q++)p[q]=p[q].toString()};e.sortNum=function(p,q){return q%100-p%100};e.getType=function(p){for(var q=new cardGameType,r=0;r<p.length;){for(var u=0,v=0;v<p.length;v++)p[r]==p[v]&&u++;1==u&&q.solo.push(p[r]);2==u&&q.double.push(p[r]);3==u&&q.triple.push(p[r]);4==u&&q.four.push(p[r]);r+=u}return q};e.checkHand=function(p,q){for(var r=0;r<p.length;r++)if(p[r]==q)return p[r]};e.autoPick=function(p,q){var r=this.getType(p),u=this.getType(q);
switch(this.data.lastOutCardType){case "1":for(var v=0;v<q.length;v++)if(q[v]>p[0]&&-1==h.indexOf(q[v])){var w=[];w.push(q[v]);h.push(w)}break;case "2":for(v=0;v<u.double.length;v++)u.double[v]>p[0]&&(w=[],w.push(u.double[v],u.double[v]),h.push(w));for(v=0;v<u.triple.length;v++)u.triple[v]>p[0]&&(w=[],w.push(u.triple[v],u.triple[v]),h.push(w));break;case "3":for(v=0;v<u.triple.length;v++)u.triple[v]>r.triple[0]&&(w=[],w.push(u.triple[v],u.triple[v],u.triple[v]),h.push(w));break;case "4":for(v=0;v<
u.triple.length;v++)u.triple[v]>r.triple[0]&&(w=[],w.push(u.triple[v],u.triple[v],u.triple[v]),u.solo[0]?w.push(u.solo[0]):u.double[0]?w.push(u.double[0]):u.triple[0]&&w.push(u.triple[0]),h.push(w));break;case "5":for(v=0;v<u.triple.length;v++)u.triple[v]>r.triple[0]&&(w=[],w.push(u.triple[v],u.triple[v],u.triple[v]),u.double[0]?w.push(u.double[0],u.double[0]):u.triple[0]&&w.push(u.triple[0],u.triple[0]),h.push(w));break;case "6":for(v=0;v<u.four.length;v++){if(u.four[v]>r.four[0]){w=[];w.push(u.four[v],
u.four[v],u.four[v],u.four[v]);var z=u.solo,A=u.double,C=u.triple;for(v=0;2>v;v++)z[0]?w.push(z.shift()):A[0]?w.push(A.shift()):C[0]&&w.push(C.shift())}h.push(w)}break;case "7":for(v=0;v<u.four.length;v++){if(u.four[v]>r.four[0])for(w=[],w.push(u.four[v],u.four[v],u.four[v],u.four[v]),A=u.double,C=u.triple,v=0;2>v;v++)A[0]?(z=A.shift(),w.push(z,z)):C[0]&&(z=C.shift(),w.push(z,z));h.push(w)}break;case "8":for(v=0;v<q.length;v++)if(q[v]>p[0]){w=[];w.push(q[v]);for(var B=1;B<p.length;B++)(z=this.checkHand(q,
q[v]+B))&&w.push(z);w.length==p.length&&h.push(w)}break;case "9":for(v=0;v<u.double.length;v++){if(u.double[v]>r.double[0]){w=[];w.push(u.double[v],u.double[v]);for(B=1;B<r.double.length;B++)(z=this.checkHand(u.double,u.double[v]+B))&&w.push(z,z);w.length==2*r.double.length&&h.push(w)}if(u.triple[v]>r.double[0]){w=[];w.push(u.triple[v],u.triple[v]);for(B=1;B<r.double.length;B++)(z=this.checkHand(u.triple,u.triple[v]+B))&&w.push(z,z);w.length==2*r.double.length&&h.push(w)}}break;case "10":for(v=0;v<
u.four.length;v++)u.four[v]>p[0]&&(w=[],w.push(u.four[v],u.four[v],u.four[v],u.four[v]),h.push(w));for(v=0;v<q.length-1;v++)18==q[v]&&19==q[v+1]&&(p=[],p.push(18,19),h.push(p));return;case "11":for(v=0;v<q.length;v++)if(u.triple[v]>r.triple[0]){w=[];w.push(u.triple[v]);for(B=1;B<r.triple.length;B++)(z=this.checkHand(u.triple,u.triple[v]+B))&&w.push(z,z,z);w.length==p.length&&h.push(w)}break;case "12":for(v=0;v<q.length;v++)if(u.triple[v]>r.triple[0]){w=[];w.push(u.triple[v]);for(B=1;B<r.triple.length;B++)(z=
this.checkHand(u.triple,u.triple[v]+B))&&w.push(z,z,z),z=u.solo,A=u.double,z[0]?w.push(z.shift()):A[0]&&w.push(A.shift());w.length==p.length&&h.push(w)}break;case "13":for(v=0;v<q.length;v++)if(u.triple[v]>r.triple[0]){w=[];w.push(u.triple[v]);for(B=1;B<r.triple.length;B++)(z=this.checkHand(u.triple,u.triple[v]+B))&&w.push(z,z,z),A=u.double,C=u.triple,A[0]?(A.shift(),w.push(z,z)):C[0]&&(C.shift(),w.push(z,z));w.length==p.length&&h.push(w)}break;case "14":return}for(v=0;v<u.four.length;v++)u.four[v]&&
(p=[],p.push(u.four[v],u.four[v],u.four[v],u.four[v]),h.push(p));for(v=0;v<q.length-1;v++)18==q[v]&&19==q[v+1]&&(p=[],p.push(18,19),h.push(p))};return f}(doudizhuUI),UIFPack=function(e){function f(){f.__super.call(this);this.Init()}new Laya.Point(0,0);Laya.class(f,"UIFPack",fsredpackUI);e=f.prototype;e.Init=function(){this.start()};e.start=function(){this.fasongpack.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.startpos=new Laya.Point;this.but_close.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);
this.close_btn.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);this.but_pakSend.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownFaSong);this.combox_index.on(Laya.Event.CHANGE,this,this.onCHANGED);this.box_haoy.on(Laya.Event.CHANGE,this,this.onSELECT);this.edit_gold.text="100";this.edit_gold_count.text="1";this.setGoldLabels();this.combox_gold.selectedIndex=0;Laya.stage.on("update_friend_list",this,this.onCHANGED);this.edit_gold.on(Laya.Event.FOCUS,this,this.OnFocus);this.edit_gold.on(Laya.Event.BLUR,
this,this.OnBlur);this.edit_gold_count.on(Laya.Event.FOCUS,this,this.OnFocus);this.edit_gold_count.on(Laya.Event.BLUR,this,this.OnBlur);this.pack_msg.on(Laya.Event.FOCUS,this,this.OnFocus);this.pack_msg.on(Laya.Event.BLUR,this,this.OnBlur)};e.setGoldLabels=function(){var a=g_ClientConfig.btRedPackGameUsesOptions;if(a){a=a.toString(2);a=GameUtil.getprefixname(a,6);for(var b="",d=a.length-1;0<=d;d--)if("1"==a[d])switch(d){case 5:b+=g_GameCionNum.key+",";break;case 4:b+=g_GameGoldNum.key+",";break;case 3:b+=
g_GamePointNum.key+",";break;case 2:b+=g_nGameDiamond.key+",";break;case 1:b+=g_nGameGird.key+",";break;case 0:b+=g_gameGlory.key+","}this.combox_gold.labels=b.slice(0,b.length-1)}};e.OnFocus=function(){cur_use_app&&(this.fasongpack.top=-120)};e.OnBlur=function(){cur_use_app&&(this.fasongpack.y=42)};e.onCHANGED=function(){this.box_haoy.visible=!1;this.Lb_haoy.visible=!1;if(4==this.combox_index.selectedIndex){this.box_haoy.visible=!0;this.Lb_haoy.visible=!0;for(var a="",b=RelationManager.getInstance().f_friendList,
d=0;d<b.length;d++)b[d].online&&(a+=","+b[d].name);this.box_haoy.labels="\u5168\u90e8"+a;this.box_haoy.selectedIndex=0}};e.onMouseDownBut=function(){Laya.stage.off("update_friend_list",this,this.onCHANGED);Laya.stage.removeChild(this)};e.onSELECT=function(){0==this.box_haoy.selectedIndex?this.edit_gold_count.disabled=!1:(this.edit_gold_count.text=1,this.edit_gold_count.disabled=!0)};e.onMouseDownFaSong=function(){var a=parseInt(this.edit_gold.text),b=parseInt(this.edit_gold_count.text),d=this.combox_gold.selectedLabel,
n=-1,c=parseInt(this.combox_index.selectedIndex),h=this.pack_msg.text,m=0,g=0,l=0;if(15<h.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u795d\u798f\u8bed\u957f\u5ea6\u8d85\u8fc715\u4e2a\u5b57\uff01",callfn:function(){}}]);else{switch(d){case g_GameCionNum.key:n=1;m=g_GameCionNum.value;g=g_ClientConfig.nRedPackGoldMax;l=g_ClientConfig.nRedPackGoldMin;break;case g_GameGoldNum.key:n=0;m=g_GameGoldNum.value;g=g_ClientConfig.nRedPackGameGoldMax;l=g_ClientConfig.nRedPackGameGoldMin;break;case g_GamePointNum.key:n=
2;m=g_GamePointNum.value;g=g_ClientConfig.nRedPackGamePointMax;l=g_ClientConfig.nRedPackGamePointMin;break;case g_nGameDiamond.key:n=3;m=g_nGameDiamond.value;g=g_ClientConfig.nRedPackGameDiamondMax;l=g_ClientConfig.nRedPackGameDiamondMin;break;case g_nGameGird.key:n=4;m=g_nGameGird.value;g=g_ClientConfig.nRedPackGameGirdMax;l=g_ClientConfig.nRedPackGameGirdMin;break;case g_gameGlory.key:n=5,m=g_gameGlory.value,g=g_ClientConfig.nRedPackGameGirdMax,l=g_ClientConfig.nRedPackGameGloryMin}if(a>m)Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u4f60\u6ca1\u6709\u8db3\u591f\u7684"+d+"\uff01",callfn:function(){}}]);else if(a<l||a>g||50<b||1>b)Laya.stage.event("show_alert_dlg",[{type:1,txt:d+"\u6570\u91cf\u6700\u5c0f\uff1a"+l+"\u6700\u5927\uff1a"+g+" \r\n\u7ea2\u5305\u6570\u91cf\u6700\u5c0f\uff1a1 \u4e2a,\u6700\u5927\uff1a50\u4e2a",callfn:function(){}}]);else{m="";switch(c){case 0:m="\u884c\u4f1a";break;case 1:m="\u961f\u4f0d";break;case 2:m="\u56fd\u5bb6";break;case 3:m="\u5168\u670d";break;case 4:m="\u597d\u53cb"}var p=this;
Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u60a8\u786e\u5b9a\u8981\u53d1\u653e\u7ea2\u5305\u5417\uff1f \r\n"+b+" \u4e2a\u7ea2\u5305\uff0c\u5171\u8ba1\uff1a"+a+" \u4e2a"+d+",\u53d1\u653e\u8303\u56f4\uff1a"+m+"\r\n\u795d\u798f\u5185\u5bb9\uff1a"+h,callfn:function(q){q="";var r=0;if(4==c){if(0==p.box_haoy.selectedIndex){for(var u=RelationManager.getInstance().f_friendList,v=0;v<u.length;v++){var w=u[v];w&&""!=w.name&&w.online&&(r+=1,q=q+w.name+"\\")}if(1>r){Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u672a\u6709\u597d\u53cb\u5728\u7ebf\uff0c\u53d1\u9001\u5931\u8d25\uff01",callfn:function(){}}]);return}}else q=p.box_haoy.labels.split(",")[p.box_haoy.selectedIndex]+"\\";q=q+"|"+h}else q=h;Sendmessage.sendRedPack(a,n,b,c,q);p.removeSelf()}}])}}};e.onMouseDown=function(a){this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.fasongpack.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.fasongpack.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.fasongpack.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};
e.onMouseUp=function(){this.fasongpack.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(a){this.fasongpack.x+=a.stageX-this.startpos.x;this.fasongpack.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};return f}(fsredpackUI),UIfriend=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UIFriend",FriendUI);var f=e.prototype;f.init=function(){Laya.stage.on("update_friend_list",this,this.updateShowList);this.friendInfoTip;this.initList();
this.addMsgEvent();this.addClickEvent();this.showUI(0);Laya.stage.event("friend_apply");Laya.stage.event("send_friend_info",[3,""])};f.initList=function(){this.friend_list.selectEnable=!0;this.friend_list.renderHandler=new Laya.Handler(this,this.updateItem);this.friend_list.mouseHandler=new Laya.Handler(this,this.clickItem)};f.addMsgEvent=function(){Laya.stage.on("closeFriend",this,this.onClose);Laya.stage.on("addFriend_callBack",this,this.onAddFriend)};f.addClickEvent=function(){this.bg_img.on(Laya.Event.MOUSE_DOWN,
this,this.onMouseDown);this.myFriend_btn.on(Laya.Event.CLICK,this,this.onClickDirectory);this.nearPlayer_btn.on(Laya.Event.CLICK,this,this.onClickDirectory);this.blackList_btn.on(Laya.Event.CLICK,this,this.onClickDirectory);this.addFriend_btn.on(Laya.Event.CLICK,this,this.openAddFriendTip)};f.onClickDirectory=function(a){switch(a.target){case this.myFriend_btn:RelationManager.getInstance().f_selectIndex=0;break;case this.nearPlayer_btn:RelationManager.getInstance().f_selectIndex=1;break;case this.blackList_btn:RelationManager.getInstance().f_selectIndex=
2}this.showUI(RelationManager.getInstance().f_selectIndex)};f.showUI=function(a){RelationManager.getInstance().f_selectItemIndex=-1;this.updateShowList();this.setSelectDirectoryUI(a)};f.showFriendDirectoryUI=function(a){this.addFriend_btn.visible=a;this.curFriendNum_txt.visible=a&&RelationManager.getInstance().f_maxFriendNum;this.friendNumTitle_txt.visible=this.curFriendNum_txt.visible;this.friend_list.array&&(this.curFriendNum_txt.text=RelationManager.getInstance().getSelectListData(0).length+"/"+
RelationManager.getInstance().f_maxFriendNum)};f.updateShowList=function(){this.friend_list.array=RelationManager.getInstance().getSelectListData();this.friend_list.refresh();this.showFriendDirectoryUI(0==RelationManager.getInstance().f_selectIndex)};f.setSelectDirectoryUI=function(a){this.myFriend_btn.selected=0==a;this.nearPlayer_btn.selected=1==a;this.blackList_btn.selected=2==a};f.updateItem=function(a,b){var d=RelationManager.getInstance();if(a.dataSource){var n=0,c;for(c in a.dataSource){if(4<
n)break;var h=a.getChildByName("content_txt_"+n);h.color=a.dataSource.online?"#ffffff":"#808080";h.changeText(a.dataSource[c]?a.dataSource[c]:"");n++}}a.getChildByName("selectEffect_img").visible=b==d.f_selectItemIndex};f.getCurText=function(a){return a?a.split(",")[0]:""};f.clickItem=function(a,b){"click"==a.type&&(RelationManager.getInstance().f_selectItemIndex=b,a.target.getChildByName("selectEffect_img").visible=!0,this.friendInfoTip=GameUtil.openWin(this.friendInfoTip,this,FriendInfoTip),b=a.target.dataSource.name,
a=a.target.dataSource.online,Laya.stage.event("updateFriendInfo",[RelationManager.getInstance().f_selectIndex,b,a]))};f.onAddFriend=function(a){if(""==a)GameUtil.onShowTip(FRIEND_TIP.D);else if(this.isAlreadyAddFriend(a))GameUtil.onShowTip(FRIEND_TIP.C);else this.sendFriendApply(a)};f.isAlreadyAddFriend=function(a){return-1<RelationManager.getInstance().existNameInList(RelationManager.getInstance().f_friendList,a)};f.sendFriendApply=function(a){GameUtil.onShowTip(FRIEND_TIP.B);Laya.stage.event("send_friend_info",
[1,a])};f.openAddFriendTip=function(){Laya.stage.event("openAddFriendTip",["\u6dfb\u52a0\u597d\u53cb","addFriend_callBack"])};f.onClose=function(){this.visible=!1;RelationManager.getInstance().f_selectIndex=0;this.showUI(0)};return UIfriend}(FriendUI),UIHangHui2=function(){function e(){e.__super.call(this);this.txt=new Laya.Text;this.addChild(this.txt);this.size(476,35);this.y=17;this.img_line=new laya.ui.Image("gameres/png/img_line.png");this.img_line.visible=!1;this.addChild(this.img_line);this.Show=
function(c,h){var m=this.parent.parent.parent.name;"string"!=typeof c&&c.info&&(c=c.info);switch(m){case "img_notice":this.txt.text=c;break;case "changetitle":c=c.split(",");this.txt.text=c[0];this.txt.y=5;this.txt.x=5;this.txt.leading=3;this.txt.width=310;this.txt.height=180;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_zhaoxian":c=c.split(",");this.txt.text=c[0];this.txt.y=2;this.txt.x=2;this.txt.leading=3;this.txt.width=460;this.txt.height=
220;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_waijiao":c=c.split(",");this.txt.text=c[0];this.txt.y=5;this.txt.x=5;this.txt.leading=3;this.txt.width=600;this.txt.height=240;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_chat":c=c.split(",");this.txt.text=c[0];this.txt.y=5;this.txt.x=5;this.txt.leading=3;this.txt.width=635;this.txt.height=245;this.txt.align="left";this.txt.wordWrap=
!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_rolelist":c=c.split(","),this.txt.text=c[0],this.txt.x=1,this.txt.y=0,this.txt.height=40,this.txt.width=170,this.txt.align="center",this.img_line.y=26,this.img_line.visible=!0,g_SelectTitleIdx==h?(this.txt.color="#ff0000",this.txt.fontSize=18):(this.txt.fontSize=16,this.txt.color="#ffffff")}}}function f(){f.__super.call(this);this.item=new box_item2UI;this.addChild(this.item);this.name="user_item";this.GetJob=function(c){return 0==c?
"\u6218\u58eb":1==c?"\u6cd5\u5e08":"\u9053\u58eb"};this.GetSex=function(c){return 0==c?"\u7537":"\u5973"};this.Show=function(c,h){this.item=this._childs[0];this.item.x=0;this.item.y=0;this.item.width=464;this.item.height=36;this.item.getChildByName("img_sel").x=0;this.item.getChildByName("img_sel").y=0;h==g_SelectRoleIdx?this.item.getChildByName("img_sel").visible=!0:this.item.getChildByName("img_sel").visible=!1;c=c.split("|");var m="#ffffff";1==c[1]&&(m="#fbf1b3");this.item.getChildByName("lbl_0").text=
c[0];this.item.getChildByName("lbl_0").width=106;this.item.getChildByName("lbl_0").x=1;this.item.getChildByName("lbl_0").y=11;this.item.getChildByName("lbl_1").text=this.GetJob(c[2]);this.item.getChildByName("lbl_1").width=56;this.item.getChildByName("lbl_1").x=107;this.item.getChildByName("lbl_1").y=11;this.item.getChildByName("lbl_2").text=this.GetSex(c[3]);this.item.getChildByName("lbl_2").width=56;this.item.getChildByName("lbl_2").x=163;this.item.getChildByName("lbl_2").y=11;this.item.getChildByName("lbl_3").text=
c[4];this.item.getChildByName("lbl_3").width=56;this.item.getChildByName("lbl_3").x=219;this.item.getChildByName("lbl_3").y=11;for(var g=0;4>g;g++)this.item.getChildByName("lbl_"+g).fontSize=14,this.item.getChildByName("lbl_"+g).color=m;this.item.getChildByName("btn_change_title").x=325;this.item.getChildByName("btn_change_title").y=4;this.item.getChildByName("btn_change_title").width=80;this.item.getChildByName("btn_change_title").height=28;this.item.getChildByName("btn_change_title").labelColors=
"#D7B581,#D7B581";this.item.getChildByName("btn_change_title").labelSize=14;this.item.getChildByName("btn_change_title").tag=c[0];this.item.getChildByName("btn_change_title").on(Laya.Event.CLICK,this,function(){var l=this.item.getChildByName("btn_change_title").tag;Laya.stage.event("show_changetitle_list",[l])});this.item.getChildByName("btn_change_title").visible=0!=g_SelectTitleIdx;0==g_SelectTitleIdx&&0!=h&&(this.item.getChildByName("btn_change_title").visible=!0)}}function a(){a.__super.call(this);
this.item=new box_item1UI;this.addChild(this.item);this.onclick_ok=function(c){1==G_Guald_Admin&&c&&c.target.zname&&(Sendmessage.SendManagerAdd(0,c.target.zname+";"),Sendmessage.sendGuildMemberList(2),Sendmessage.sendOpenGuildDlg())};this.onclick_esc=function(c){1==G_Guald_Admin&&c&&c.target.zname&&(Sendmessage.SendManagerAdd(1,c.target.zname+";"),Sendmessage.sendGuildMemberList(2))};this.item.getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.onclick_ok);this.item.getChildByName("btn_esc").on(Laya.Event.CLICK,
this,this.onclick_esc);this.GetJob=function(c){return 0==c?"\u6218\u58eb":1==c?"\u6cd5\u5e08":"\u9053\u58eb"};this.GetSex=function(c){return 0==c?"\u7537":"\u5973"};this.Show=function(c,h){this.item.name="item_"+h;this.item.x=0;this.item.y=0;this.item.getChildByName("lbl_idx").text=c.split(",")[0];this.item.getChildByName("lbl_idx").width=106;this.item.getChildByName("lbl_idx").x=1;this.item.getChildByName("lbl_name").text=this.GetSex(c.split(",")[1]);this.item.getChildByName("lbl_name").width=56;
this.item.getChildByName("lbl_name").x=107;this.item.getChildByName("lbl_cnt").text=this.GetJob(c.split(",")[2]);this.item.getChildByName("lbl_cnt").width=56;this.item.getChildByName("lbl_cnt").x=163;this.item.getChildByName("lbl_tj").text=c.split(",")[3];this.item.getChildByName("lbl_tj").width=56;this.item.getChildByName("lbl_tj").x=219;h="#fbf1b3";1==c.split(",")[4]&&(h="#00ff00");this.item.getChildByName("lbl_idx").color=h;this.item.getChildByName("lbl_name").color=h;this.item.getChildByName("lbl_cnt").color=
h;this.item.getChildByName("lbl_tj").color=h;this.item.getChildByName("btn_ok").x=292;this.item.getChildByName("btn_ok").width=70;this.item.getChildByName("btn_ok").height=24;this.item.getChildByName("btn_ok").label="\u540c\u610f";this.item.getChildByName("btn_ok").labelSize=14;this.item.getChildByName("btn_ok").labelColors="#D7B581,#D7B581";this.item.getChildByName("btn_ok").labelStroke=2;this.item.getChildByName("btn_ok").labelStrokeColor="#000000";this.item.getChildByName("btn_esc").x=378;this.item.getChildByName("btn_esc").width=
70;this.item.getChildByName("btn_esc").height=24;this.item.getChildByName("btn_esc").label="\u62d2\u7edd";this.item.getChildByName("btn_esc").labelSize=14;this.item.getChildByName("btn_esc").labelColors="#D7B581,#D7B581";this.item.getChildByName("btn_esc").labelStroke=2;this.item.getChildByName("btn_esc").labelStrokeColor="#000000";0==G_Guald_Admin&&(this.item.getChildByName("btn_ok").visible=!1,this.item.getChildByName("btn_esc").visible=!1);this.item.getChildByName("btn_ok").zname=this.item.getChildByName("lbl_idx").text;
this.item.getChildByName("btn_esc").zname=this.item.getChildByName("lbl_idx").text}}function b(){b.__super.call(this);this.item=new box_item3UI;this.addChild(this.item);this.Show=function(c,h){var m=c;this.temp=c;0<=m.indexOf("\u3010")&&0<=m.indexOf("\u3011")?(this.item.getChildByName("lbl_title").text=m,this.item.getChildByName("lbl_text").visible=!1,this.item.getChildByName("lbl_title").visible=!0,this.item.getChildByName("bnt_ok").visible=!1,this.item.getChildByName("bnt_esc").visible=!1):0<=m.indexOf("<sqlm>")?
(m=m.split("<sqlm>"),this.item.getChildByName("lbl_text").text=m[0],this.item.getChildByName("lbl_text").visible=!0,this.item.getChildByName("lbl_title").visible=!1,this.item.getChildByName("bnt_ok").visible=!0,this.item.getChildByName("bnt_esc").visible=!0,this.item.getChildByName("bnt_ok").on(Laya.Event.CLICK,this,function(){1==G_Guald_Admin&&(Sendmessage.GuildOperate(221,m[0]),Sendmessage.sendGuildMemberList(3))}),this.item.getChildByName("bnt_esc").on(Laya.Event.CLICK,this,function(){1==G_Guald_Admin&&
(Sendmessage.GuildOperate(222,m[0]),Sendmessage.sendGuildMemberList(3))}),this.item.getChildByName("bnt_ok").visible=!0,this.item.getChildByName("bnt_esc").visible=!0,0==G_Guald_Admin&&(this.item.getChildByName("bnt_ok").visible=!1,this.item.getChildByName("bnt_esc").visible=!1)):""!=m&&(h="",h=0<=m.indexOf("<lm>")?m.split("<lm>")[0]:0<=m.indexOf("gz")?m.split("<gz>")[0]:m,this.item.getChildByName("lbl_text").text=h,this.item.getChildByName("lbl_text").visible=!0,this.item.getChildByName("lbl_title").visible=
!1,this.item.getChildByName("bnt_ok").visible=!1,this.item.getChildByName("bnt_esc").visible=!1);this.item.name=c}}function d(){d.__super.call(this);this.StartDragPos=new Laya.Point(0,0);this.CanDragMove=!1;this.IsEditor=!0;this.basePath="";this.MainBtnList=[];this.MainNodeList=[];this.ShowDlgType=0;this.SelectRoleIdx=this.SelectUserTypeIdx=-1;this.ChangeTitleNode=this.InputNode=null;this.Init()}g_SelectRoleIdx=-1;g_SelectTitleIdx=0;Laya.class(e,"NoticeItem",Laya.Box);Laya.class(f,"UserItem",Laya.Box);
Laya.class(a,"ZMUserItem",Laya.Box);Laya.class(b,"WaiJiaoItem",Laya.Box);Laya.class(d,"UIHangHui",HangHui2UI);var n=d.prototype;n.Init=function(){this.list_zhaoxian.array=null;this.list_role.array=null;Laya.stage.on("update_notice",this,this.UpdateNotice);Laya.stage.on("update_guald_user",this,this.UpdateUser);Laya.stage.on("upadte_zm_user",this,this.UpdateZhaoMu);Laya.stage.on("show_changetitle_list",this,this.ShowChangeNode);Laya.stage.on("show_input_node2",this,this.ShowInputNode);this.ResLoaded()};
n.cloneui=function(){Laya.stage.off("update_notice",this,this.UpdateNotice);Laya.stage.off("update_guald_user",this,this.UpdateUser);Laya.stage.off("upadte_zm_user",this,this.UpdateZhaoMu);Laya.stage.off("show_changetitle_list",this,this.ShowChangeNode);Laya.stage.off("show_input_node2",this,this.ShowInputNode)};n.ResLoaded=function(){this.startpos=new Laya.Point;this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.ShowDlgType=0;this.ResetUI()};n.ShowChangeNode=function(c){this.ChangeTitleNode.visible=
!0;this.ChangeTitleUser=c;this.title_list.array=G_Guald_Title_List};n.ResetUI=function(){this.MainBtnList.push(this.btn_notice);this.MainBtnList.push(this.btn_rolelist);this.MainBtnList.push(this.btn_waijiao);this.MainBtnList.push(this.btn_chat);this.MainBtnList.push(this.btn_zhaomu);this.MainNodeList.push(this.img_notice);this.MainNodeList.push(this.img_rolelist);this.MainNodeList.push(this.img_waijiao);this.MainNodeList.push(this.img_chat);this.MainNodeList.push(this.img_zhaoxian);this.InputNode=
this.img_Editor;this.InputNode.visible=!1;this.ChangeTitleNode=this.changetitle;this.ChangeTitleNode.visible=!1;this.btn_exit3.on(Laya.Event.CLICK,this,this.BtnClick);this.input_str1.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str1.on(Laya.Event.BLUR,this,this.OnBlur);this.input_str2.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str2.on(Laya.Event.BLUR,this,this.OnBlur);this.input_str.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str.on(Laya.Event.BLUR,this,this.OnBlur);this.notice_input.on(Laya.Event.FOCUS,
this,this.OnFocus);this.notice_input.on(Laya.Event.BLUR,this,this.OnBlur);this.lbl_zm_info.on(Laya.Event.FOCUS,this,this.OnFocus);this.lbl_zm_info.on(Laya.Event.BLUR,this,this.OnBlur);this.lbl_zm_lv.on(Laya.Event.FOCUS,this,this.OnFocus);this.lbl_zm_lv.on(Laya.Event.BLUR,this,this.OnBlur);this.ResetMainDlgUI();this.BindClick();this.SetHangHuiBaseInfo();this.ResetNoticeNode()};n.OnFocus=function(c){if(cur_use_app)if(c=c.name,"input_str1"==c||"input_str2"==c||"input_str"==c)this.img_Editor.top=-60;
else if(this.btn_notice_sumit.visible&&"notice_input"==c)this.img_bg.top=-60;else if("lbl_zm_info"==c||"lbl_zm_lv"==c)this.img_bg.top=-90};n.OnBlur=function(c){if(cur_use_app)if(c=c.name,"input_str1"==c||"input_str2"==c||"input_str"==c)this.img_Editor.y=109;else if(this.btn_notice_sumit.visible&&"notice_input"==c)this.img_bg.y=25;else if("lbl_zm_info"==c||"lbl_zm_lv"==c)this.img_bg.y=25};n.SetHangHuiBaseInfo=function(){this.lbl_name.text=G_Guald_Name;this.lbl_cnt.text=G_Guald_OnlineCount+" / "+G_Guald_NowCount+
" / "+G_Guald_MaxCount};n.ShowInputNode=function(c){this.img_Editor.visible=!0;this.lbl_title.text=c.title?c.title:"";this.lbl_desc.text=c.desc?c.desc:"";this.input_str.visible=c.input?!0:!1;c.btndesc1?this.btn_ok.label=c.btndesc1:this.btn_ok.text="";c.btndesc2?this.btn_esc.label=c.btndesc2:this.btn_esc.text="";c.input_desc1?(this.lbl_input_desc0.label=c.input_desc0,this.input_str1.visible=!0,this.input_str1.restrict="\u4e00-\u9fa5-a-zA-Z0-9",this.lbl_input_desc0.text=c.input_desc1,this.lbl_input_desc0.restrict=
"0-9"):(this.lbl_input_desc0.text="",this.input_str1.visible=!1);c.input_desc2?(this.lbl_input_desc1.label=c.input_desc0,this.input_str2.visible=!0,this.lbl_input_desc1.text=c.input_desc2):(this.lbl_input_desc1.text="",this.input_str2.visible=!1);var h=this,m=function(){setTimeout(function(){h.input_str2.text="";h.input_str1.text="";h.input_str.text="";h.img_Editor.visible=!1;c.callfn=null;c.callfn1=null},500)};this.btn_esc.on(Laya.Event.CLICK,this,function(){c.callfn1&&c.callfn1();m()});this.btn_exit1.on(Laya.Event.CLICK,
this,function(){h.img_Editor.visible=!1;h.input_str1.text="";h.input_str2.text="";c.callfn&&(c.callfn=null);c.callfn1&&(c.callfn1=null)});this.btn_ok.on(Laya.Event.CLICK,this,function(){c.callfn&&c.callfn();m()})};n.UpdateWjList=function(){var c=[],h=G_WaiJiaoStr.split("/");this.list_waijiao.array=[];c.push("\u3010\u5173\u6ce8\u884c\u4f1a\u5217\u8868\u3011");for(var m=h[0].split(","),g=0;g<m.length;g++)""!=m[g].split("|")[0]&&c.push(m[g].split("|")[0]+"<gz>");c.push("\u3010\u5f85\u5904\u7406\u8054\u76df\u7533\u8bf7\u3011");
m=h[1].split(",");for(g=0;g<m.length;g++)""!=m[g]&&c.push(m[g]+"<sqlm>");c.push("\u3010\u6b63\u5728\u5ba3\u6218\u884c\u4f1a\u3011");m=h[2].split(",");for(g=0;g<m.length;g++)""!=m[g].split("|")[0]&&c.push(m[g].split("|")[0]);c.push("\u3010\u6b63\u5728\u8054\u76df\u884c\u4f1a\u3011");m=h[3].split(",");for(g=0;g<m.length;g++)""!=m[g]&&c.push(m[g]+"<lm>");this.list_waijiao.array=c};n.UpdateUser=function(){this.ResetMainDlgUI();if(G_Guald_Title_List){for(var c=[],h=0;h<G_Guald_Title_List.length-1;h++)c.push(G_Guald_Title_List[h].split(",")[0]);
this.list_title.array=c;this.btn_title_del.disabled=2>g_SelectTitleIdx}c=g_SelectTitleIdx;0>c&&(c=0);G_Guald_User_List[c]&&(this.list_role.array=G_Guald_User_List[c])};n.BindClick=function(){this.btn_notice.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_rolelist.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_chat.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_exit.on(Laya.Event.CLICK,
this,this.BtnClick);this.btn_notice_editor.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_notice_sumit.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_set.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_del.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_remove_role.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_change.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sel_zhan.on(Laya.Event.CLICK,this,this.BtnClick);
this.btn_sel_fa.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sel_dao.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_editor.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_ok.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_esc.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_mdm.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_look.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_fight.on(Laya.Event.CLICK,
this,this.BtnClick);this.btn_waijiao_can.on(Laya.Event.CLICK,this,this.BtnClick);0==G_Guald_Admin&&(this.btn_notice_editor.visible=!1,this.btn_title_add.label="\u9000\u51fa\u884c\u4f1a",this.btn_title_set.visible=!1,this.btn_title_del.visible=!1,this.btn_remove_role.visible=!1,this.btn_title_change.visible=!1,this.btn_waijiao_look.visible=!1,this.btn_waijiao_add.visible=!1,this.btn_waijiao_fight.visible=!1,this.btn_waijiao_can.visible=!1,this.btn_zhaomu_mdm.visible=!1,this.btn_zhaomu_editor.visible=
!1,this.lbl_zm_lv.editable=!1);this.btn_waijiao_can.selected=1==G_Guald_Can_Lianmeng?!0:!1};n.SetEditorTxt=function(){this.IsEditor=!this.IsEditor;this.notice_input.text=G_Guald_Notice_List;this.IsEditor?(this.notice_input.visible=!0,this.notice_input.editable=!0,this.lbl_des_title.visible=!1,this.btn_notice_sumit.visible=!0,this.btn_notice_editor.label="\u53d6 \u6d88"):(this.notice_input.visible=!0,this.notice_input.editable=!1,this.lbl_des_title.visible=!0,this.btn_notice_sumit.visible=!1,this.btn_notice_editor.label=
"\u7f16 \u8f91")};n.ResetMainDlgUI=function(){for(var c=0;5>c;c++)this.ShowDlgType==c?(this.MainNodeList[c].visible=!0,this.MainBtnList[c].selected=!0):(this.MainNodeList[c].visible=!1,this.MainBtnList[c].selected=!1);this.IsEditor&&this.SetEditorTxt();0==this.btn_zhaomu_editor.visible&&1==G_Guald_Admin&&(this.btn_zhaomu_editor.visible=!0)};n.UpdateZhaoMu=function(c){var h=[];c&&(h=c.split(";"));h[0]&&(this.lbl_zm_info.text=h[0]);h[1]&&(0<=h[1].indexOf("\u6218\u58eb")?this.btn_sel_zhan.selected=!0:
this.btn_sel_zhan.selected=!1,0<=h[1].indexOf("\u6cd5\u5e08")?this.btn_sel_fa.selected=!0:this.btn_sel_fa.selected=!1,0<=h[1].indexOf("\u9053\u58eb")?this.btn_sel_dao.selected=!0:this.btn_sel_dao.selected=!1);h[2]&&(this.lbl_zm_lv.text=h[2]);c=[];for(var m=3;m<h.length;m++)""!=h[m]&&c.push(h[m]);this.list_zhaoxian.array=c;this.btn_zhaomu_esc.visible=!1;this.btn_zhaomu_ok.visible=!1};n.EditorZhaoMu=function(){this.IsEditor=!this.IsEditor;this.btn_sel_dao.mouseEnabled=this.IsEditor;this.btn_sel_fa.mouseEnabled=
this.IsEditor;this.btn_sel_zhan.mouseEnabled=this.IsEditor;this.lbl_zm_info.mouseEnabled=this.IsEditor;this.btn_sel_zhan.selected=!this.IsEditor;this.btn_sel_fa.selected=!this.IsEditor;this.btn_sel_dao.selected=!this.IsEditor;this.lbl_zm_lv.selected=this.IsEditor;this.btn_zhaomu_esc.visible=this.IsEditor;this.btn_zhaomu_ok.visible=this.IsEditor;1==G_Guald_Admin&&(this.btn_zhaomu_editor.visible=!this.IsEditor)};n.UpdateNotice=function(){this.notice_input.text=G_Guald_Notice_List};n.ResetNoticeNode=
function(){this.list_title.repeatX=1;this.list_title.repeatY=9;this.list_title.vScrollBarSkin="";this.list_title.itemRender=e;this.list_title.selectEnable=!0;this.list_title.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_title.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_title.mouseHandler=new Laya.Handler(this,this.ClickItem1);this.list_role.repeatX=1;this.list_role.repeatY=10;this.list_role.vScrollBarSkin="";this.list_role.itemRender=f;this.list_role.selectEnable=
!0;this.list_role.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_role.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_role.mouseHandler=new Laya.Handler(this,this.ClickItem2);this.list_chat.repeatX=1;this.list_chat.repeatY=9;this.list_chat.vScrollBarSkin="";this.list_chat.itemRender=e;this.list_chat.selectEnable=!0;this.list_chat.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_chat.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_chat.mouseHandler=
new Laya.Handler(this,this.ClickItem);this.list_chat.array=G_Guald_Chat_List;this.list_zhaoxian.repeatX=1;this.list_zhaoxian.repeatY=9;this.list_zhaoxian.vScrollBarSkin="";this.list_zhaoxian.itemRender=a;this.list_zhaoxian.selectEnable=!0;this.list_zhaoxian.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_zhaoxian.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_zhaoxian.mouseHandler=new Laya.Handler(this,this.ClickItem);this.list_waijiao.repeatX=1;this.list_waijiao.repeatY=
9;this.list_waijiao.vScrollBarSkin="";this.list_waijiao.itemRender=b;this.list_waijiao.selectEnable=!0;this.list_waijiao.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_waijiao.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_waijiao.mouseHandler=new Laya.Handler(this,this.ClickItem4);this.title_list.repeatX=1;this.title_list.repeatY=9;this.title_list.vScrollBarSkin="";this.title_list.itemRender=e;this.title_list.selectEnable=!0;this.title_list.selectHandler=new Laya.Handler(this,
this.OnSelect);this.title_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.title_list.mouseHandler=new Laya.Handler(this,this.ClickItem5)};n.onMouseDown=function(c){this.list_chat.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=c.stageX,this.startpos.y=c.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};n.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,
this,this.onMouseMove)};n.onMouseMove=function(c){this.img_bg.x+=c.stageX-this.startpos.x;this.img_bg.y+=c.stageY-this.startpos.y;this.startpos.x=c.stageX;this.startpos.y=c.stageY};n.ClickItem2=function(c,h){"click"==c.type&&(g_SelectRoleIdx=this.SelectRoleIdx=h,c.target._childs[0].visible=!0)};n.ClickItem5=function(c,h){"mouseup"==c.type&&(c=G_Guald_Title_List[h].split(",")[0],this.ChangeTitleNode.visible=!1,""!=this.ChangeTitleUser?(Sendmessage.GuildOperate(5,c+"/"+this.ChangeTitleUser),this.ChangeTitleUser=
"",Sendmessage.sendGuildMemberList(1)):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u9009\u62e9\u6210\u5458",color:"#ff0000"}]))};n.ClickItem4=function(c,h){if("mouseup"==c.type&&0!=G_Guald_Admin)if(c=c.target.name,0<=c.indexOf("<lm>")){var m=c.split("<lm>");c={title:"",desc:"\u60f3\u8981\u5bf9 "+m[0]+" \u8054\u76df\u8fdb\u884c",input:"",btndesc1:"\u53d6\u6d88\u8054\u76df",btndesc2:"\u6dfb\u52a0\u5173\u6ce8",callfn:function(){Sendmessage.GuildOperate(22,m[0]);Sendmessage.sendGuildMemberList(3)},
callfn1:function(){Sendmessage.GuildOperate(1,m[0]);Sendmessage.sendGuildMemberList(3)}};Laya.stage.event("show_input_node2",[c])}else 0<=c.indexOf("<gz>")?(m=c.split("<gz>"),c={title:"",desc:"\u60f3\u8981\u5bf9 "+m[0]+" \u8054\u76df\u8fdb\u884c",input:"",btndesc1:"\u53d6\u6d88\u5173\u6ce8",btndesc2:"\u6dfb\u52a0\u8054\u76df",callfn:function(){Sendmessage.GuildOperate(11,m[0]);Sendmessage.sendGuildMemberList(3)},callfn1:function(){Sendmessage.GuildOperate(2,m[0]);Sendmessage.sendGuildMemberList(3)}},
Laya.stage.event("show_input_node2",[c])):0<=c.indexOf("<sqlm>")&&(m=c.split("<sqlm>"),c={title:"",desc:"\u60f3\u8981\u5bf9 "+m[0]+" \u8054\u76df\u8fdb\u884c",input:"",btndesc1:"\u62d2\u7edd\u8054\u76df",btndesc2:"\u6dfb\u52a0\u8054\u76df",callfn:function(){Sendmessage.GuildOperate(222,m[0]);Sendmessage.sendGuildMemberList(3)},callfn1:function(){Sendmessage.GuildOperate(221,m[0]);Sendmessage.sendGuildMemberList(3)}},Laya.stage.event("show_input_node2",[c]))};n.ClickItem1=function(c,h){"mouseup"==
c.type&&G_Guald_User_List[h]&&(g_SelectTitleIdx=h,g_SelectRoleIdx=-1,this.SelectUserTypeIdx=h,this.UpdateUser())};n.UpdateItem=function(c,h){c.Show(c.dataSource,h)};n.ResetInputUI=function(){};n.BtnClick=function(c){switch(c.target.name){case "btn_exit":Laya.stage.event("remove_hanghui_dlg");break;case "btn_exit3":this.ChangeTitleNode&&(this.ChangeTitleNode.visible=!1);break;case "btn_notice":this.ShowDlgType=0;this.ResetMainDlgUI();break;case "btn_rolelist":this.ShowDlgType=1;this.ResetMainDlgUI();
Sendmessage.sendGuildMemberList(1);break;case "btn_waijiao":this.ShowDlgType=2;this.ResetMainDlgUI();Sendmessage.sendGuildMemberList(3);break;case "btn_chat":this.ShowDlgType=3;this.ResetMainDlgUI();c=[];for(var h=0;h<G_Guald_Chat_List.length;h++)c.push(G_Guald_Chat_List[h].info);this.list_chat.array=c;break;case "btn_zhaomu":this.ShowDlgType=4;this.ResetMainDlgUI();Sendmessage.sendGuildMemberList(2);break;case "btn_title_set":if(G_Guald_Title_List[this.SelectUserTypeIdx]){var m=this;m.input_str2.type=
"number";c=function(){var p=G_Guald_Title_List[m.SelectUserTypeIdx].split(",")[0],q=m.input_str1.text,r=m.input_str2.text;r=""==r?G_Guald_Title_List[m.SelectUserTypeIdx].split(",")[1]:parseInt(r);0>=parseInt(r)?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u4eba\u6570",color:"#ff0000"}]):""==q||"number"==typeof q?Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]):"number"==typeof r?Sendmessage.GuildManagerEditor(p+";"+q,r,1):Laya.stage.event("show_log",
[{txt:"\u5c01\u53f7\u4eba\u6570\u683c\u5f0f\u9519\u8bef",color:"#ff0000"}])};c={title:"\u8bbe\u7f6e\u5c01\u53f7",input_desc1:"\u5c01\u53f7\u540d\u5b57",input_desc2:"\u5c01\u53f7\u4eba\u6570",btndesc1:"\u8bbe\u7f6e\u5c01\u53f7",btndesc2:"\u8fd4\u56de",callfn:c};this.input_str1.text=G_Guald_Title_List[m.SelectUserTypeIdx].split(",")[0];this.input_str2.text=G_Guald_Title_List[m.SelectUserTypeIdx].split(",")[2];this.ShowInputNode(c)}else Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u8981\u8bbe\u7f6e\u7684\u5c01\u53f7",
color:"#ff0000"}]);break;case "btn_title_add":1==G_Guald_Admin?(m=this,m.input_str2.type="number",c=function(){var p=m.input_str1.text,q=m.input_str2.text;0>=parseInt(q)||""==q?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u4eba\u6570",color:"#ff0000"}]):""==p||"number"==typeof p?Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]):"number"==typeof parseInt(q)?Sendmessage.GuildManagerEditor(p,parseInt(q),0):Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u4eba\u6570\u683c\u5f0f\u9519\u8bef",
color:"#ff0000"}])},c={title:"\u6dfb\u52a0\u5c01\u53f7",input_desc1:"\u8bf7\u8f93\u5165\u5c01\u53f7",input_desc2:"\u8bf7\u8f93\u5165\u5c01\u53f7\u4eba\u6570",btndesc1:"\u6dfb\u52a0\u5c01\u53f7",btndesc2:"\u8fd4\u56de",callfn:c},this.input_str2.text=1E3,this.ShowInputNode(c)):(Sendmessage.GuildOperate(8,""),this.list_role.array=null,ObjectManage.findobject(playerID).grildname=null,this.visible=!1);break;case "btn_title_del":if(G_Guald_Title_List[this.SelectUserTypeIdx]){m=this;var g=G_Guald_Title_List[m.SelectUserTypeIdx].split(",")[0];
c={title:"\u5220\u9664\u5c01\u53f7",desc:"\u786e\u5b9a\u8981\u5220\u9664 "+g+" \u5c01\u53f7",btndesc1:"\u5220\u9664\u5c01\u53f7",btndesc2:"\u8fd4\u56de",callfn:function(){Sendmessage.GuildManagerEditor(g,0,2)}};this.ShowInputNode(c)}else Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u5c01\u53f7",color:"#ff0000"}]);break;case "btn_remove_role":G_Guald_Title_List[this.SelectUserTypeIdx]?(c=G_Guald_Title_List[this.SelectUserTypeIdx].split(","),c[this.SelectRoleIdx+3]?
Sendmessage.GuildOperate(9,c[this.SelectRoleIdx+3].split("|")[0]):Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u4f60\u8981\u5220\u9664\u7684\u6210\u5458",color:"#ff0000"}]),this.SelectRoleIdx=-1):Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u884c\u4f1a",color:"#ff0000"}]);break;case "btn_title_change":m=this;c={title:"\u8f6c\u8ba9\u57ce\u4e3b",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u8f6c\u8ba9\u57ce\u4e3b\u7684\u540d\u5b57 ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(7,
m.input_str.text)}};this.ShowInputNode(c);break;case "btn_notice_editor":this.SetEditorTxt();break;case "btn_waijiao_look":m=this;c={title:"\u5173\u6ce8\u884c\u4f1a",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u5173\u6ce8\u7684\u884c\u4f1a\u540d ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(1,m.input_str.text)}};this.ShowInputNode(c);break;case "btn_waijiao_add":m=this;c={title:"\u884c\u4f1a\u8054\u76df",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u8054\u76df\u7684\u884c\u4f1a\u540d ",
input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(2,m.input_str.text)}};this.ShowInputNode(c);break;case "btn_waijiao_fight":m=this;c={title:"\u884c\u4f1a\u5ba3\u6218",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u5ba3\u6218\u7684\u884c\u4f1a\u540d ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(3,m.input_str.text)}};this.ShowInputNode(c);break;case "btn_waijiao_can":Sendmessage.sendSay("@\u5141\u8bb8\u8054\u76df");
0!=G_Guald_Can_Lianmeng?(G_Guald_Can_Lianmeng=0,this.btn_waijiao_can.selected=!1):(this.btn_waijiao_can.selected=!0,G_Guald_Can_Lianmeng=1);break;case "btn_notice_sumit":c=this.notice_input.text.split("\n");h="";for(var l=0;l<c.length;l++)h+=c[l]+"\n";Sendmessage.guildEditorNotice(h);this.SetEditorTxt();break;case "btn_zhaomu_editor":this.EditorZhaoMu();break;case "btn_sel_dao":case "btn_sel_fa":case "btn_sel_zhan":this.IsEditor&&(c.target.selected=!c.target.selected);break;case "btn_zhaomu_ok":c=
this.lbl_zm_info.text;if(""==c){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u62db\u52df\u4fe1\u606f\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]);break}h="";this.btn_sel_zhan.selected&&(h+="\u6218\u58eb");this.btn_sel_fa.selected&&(h=""==h?"\u6cd5\u5e08":h+",\u6cd5\u5e08");this.btn_sel_dao.selected&&(h=""==h?"\u9053\u58eb":h+",\u9053\u58eb");""!=h?(l=this.lbl_zm_lv.text,0>=parseInt(l)?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7b49\u7ea7\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1",color:"#ff0000"}]):
(Sendmessage.GuildManagereCruit(c,h,l),this.lbl_zm_lv.text="",this.lbl_zm_info.text="",this.IsEditor=!0,this.EditorZhaoMu(),Sendmessage.sendGuildMemberList(2))):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u9009\u62e9\u804c\u4e1a",color:"#ff0000"}]);break;case "btn_zhaomu_esc":this.IsEditor=!0;this.EditorZhaoMu();break;case "btn_zhaomu_mdm":Sendmessage.GuildOperate(6,""),Sendmessage.sendOpenGuildDlg()}};return d}(HangHui2UI),UIHangHuiWorld=function(e){function f(){f.__super.call(this);this.StartDragPos=
new Laya.Point(0,0);this.CanDragMove=!1;this.creatItem=this.creatGold=this.applyguild="";this.Init()}Laya.class(f,"UIHangHuiWorld",HangHuiWorldUI);e=f.prototype;e.Init=function(){this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_showCreat.on(Laya.Event.CLICK,this,this.onShowCreat);this.btn_exit.on(Laya.Event.CLICK,this,this.onClose);this.check_onlyOl.on(Laya.Event.CHANGE,this,this.UpdateWorld);this.btn_creatGuild.on(Laya.Event.CLICK,this,this.sendCreatGuild);this.btn_closeCreat.on(Laya.Event.CLICK,
this,function(){this.bg_createGuild.visible=!1});this.startpos=new Laya.Point;this.list_hanghui.vScrollBarSkin="";this.list_hanghui.selectEnable=!0;this.list_hanghui.renderHandler=new Laya.Handler(this,this.onRender);Laya.stage.on("update_world_list",this,this.UpdateWorld);Laya.stage.on("update_creatGuild",this,this.updateCreate)};e.UpdateWorld=function(){this.list_hanghui.array=[];for(var a=0;a<G_Guald_HangHui_World_List.length;a++){var b=G_Guald_HangHui_World_List[a].split(",");if(!this.check_onlyOl.selected||
0!=b[7]){var d=G_Guald_Last_Name==b[0];this.list_hanghui.array.push({lb_guildname:{text:b[0]},lb_presidentname:{text:b[1]},lb_num:{text:b[2]+"/"+b[3]},lb_joincondition:{text:b[5]+"\u7ea7\u4ee5\u4e0a"},lb_applying:{visible:d},btn_apply:{visible:""==G_Guild_Name&&!d&&0==b[6]},btn_join:{visible:""==G_Guild_Name&&!d&&1==b[6]}})}}this.list_hanghui.refresh()};e.onRender=function(a,b){b=a.getChildByName("btn_apply");a=a.getChildByName("btn_join");if(b)b.on(Laya.Event.CLICK,this,this.onBtnJoin);if(a)a.on(Laya.Event.CLICK,
this,this.onBtnJoin)};e.onBtnJoin=function(a){if(a&&a.target)var b=a.target.parent._childs[0].text;b!=G_Guald_Last_Name&&(Sendmessage.NewGuildOpt(1,b),G_Guald_Last_Name=b);this.UpdateWorld()};e.onShowCreat=function(){this.bg_createGuild.visible=!this.bg_createGuild.visible;this.bg_createGuild.visible&&(this.ipt_guildName.text="",this.ipt_guildNotic.text="",Sendmessage.sendOpenGuildNewCreate())};e.updateCreate=function(a){if(a&&-1!=a.indexOf("|")){a=a.split("|");this.creatGold=parseInt(a[0]);this.creatItem=
a[1];this.lb_creatGold.text="\u91d1\u5e01\uff1a"+this.creatGold;this.lb_creatItem.text=this.creatItem;for(var b=a=0;b<g_BagItemsList.length;b++)if(null!=g_BagItemsList[b]&&g_BagItemsList[b].s.Name==this.creatItem){a+=1;break}this.lb_creatItem_num.text=a}};e.sendCreatGuild=function(){""==this.ipt_guildName.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u884c\u4f1a\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]):"0"==this.lb_creatItem_num.text?Laya.stage.event("show_alert_dlg",[{type:1,
txt:"\u6240\u9700\u7269\u54c1\u4e0d\u8db3\uff01",callfn:function(){}}]):g_GameCionNum.value<this.creatGold?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6240\u9700\u91d1\u5e01\u4e0d\u8db3\uff01",callfn:function(){}}]):(Sendmessage.sendGuildNewCreate(this.check_autoAgree.selected?1:0,40+20*this.cb_levelLimit.selectedIndex,this.ipt_guildName.text+"\u0001"+this.ipt_guildNotic.text),this.bg_createGuild.visible=!1,this.ipt_guildName.text="",this.ipt_guildNotic.text="",this.cb_levelLimit.selectedIndex=
-1)};e.onMouseDown=function(a){this.list_hanghui.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};e.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-
this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};e.onClose=function(){this.removeSelf()};return f}(HangHuiWorldUI);
(function(){function e(){e.__super.call(this);this.CanDragMove=!1;this.StartDragPos=new Laya.Point(0,0);this.Init()}Laya.class(e,"UIMagicEditor",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("update_magic_editor",this,this.ResetUI);this.ResLoaded()};f.DragUIStart=function(){this.root.getChildByName("img_bg");var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=.9*a.x;this.StartDragPos.y=.9*a.y;this.CanDragMove=!0};f.DragUIMove=
function(){if(0!=this.CanDragMove){this.root.getChildByName("img_bg");var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.StartDragPos.x)*g_BaseScale;this.root.y=(a.y-this.StartDragPos.y)*g_BaseScale}};f.DragUIEnd=function(){this.CanDragMove=!1};f.ResLoaded=function(){this.root=new magicEditorUI;this.addChild(this.root);for(var a=1;14>a;a++)this.root.getChildByName("btn_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,
this,this.DragUIMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.DragUIStart);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.DragUIEnd);this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.ResetUI()};f.ResetUI=function(){this.root.visible=!0;for(var a=MagicMgr.getInstance().UseList,b=1;14>b;b++){var d=this.root.getChildByName("btn_"+b);d.skin="gameres/ui/magicbtn.png";d.stateNum=2;d.pivotX=d.width/2;d.pivotY=d.height/2}for(b=
0;b<a.length;b++){d=a[b].Def.btEffect;38==a[b].Def.wMagicId&&(d=4);46==a[b].Def.wMagicId&&(d=42);39==a[b].Def.wMagicId&&(d=0);var n=GameUtil.ParseMagicResName(2*d);console.log(b,"=====useList=====",a[b].Key,n);d=this.root.getChildByName("btn_"+a[b].Key);d.skin=n;d.stateNum=2}};f.BtnClick=function(a){a=a.target.name;if("btn_exit"==a)this.root.visible=!1;else{a=parseInt(a.split("_")[1]);var b=MagicMgr.getInstance().OnRoleList[MagicMgr.getInstance().CurSelectIdx];MagicMgr.getInstance().DeleteFromUseNpos(a);
b?(0!=b.Key&&13!=b.Key?Laya.stage.event("remove_magic",[b.Key-1]):13==b.Key&&(b.Key=0,Laya.stage.event("add_magic_attack")),b.Key=a,MagicMgr.getInstance().AddMagicToUseList(b),Sendmessage.SendMagicKey(b),13!=b.Key?Laya.stage.event("add_magic",[b,b.Key-1]):Laya.stage.event("add_magic_attack",[b]),Laya.stage.event("update_magic_editor"),Laya.stage.event("hide_iteminfo_dlg"),Laya.stage.event("update_magic_list"),this.root.visible=!1):Laya.stage.event("show_log",[{txt:"\u653e\u7f6e\u6280\u80fd\u5931\u8d25",
color:"#ff0000"}])}}})();
(function(){function e(){e.__super.call(this);this.CanDragMove=!1;this.DescList=[];this.StartDragPos=new Laya.Point(0,0);this.baseKey="ui/magicinfo/";this.Init()}Laya.class(e,"UIMagicInfo",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.loader.load("json/skilldesc.txt",Laya.Handler.create(this,function(){var a=Laya.Loader.getRes("json/skilldesc.txt");a&&(this.DescList=a.toString().split("\r"))}),null,Laya.Loader.TEXT);Laya.stage.on("update_magic_info",this,this.ResetUI);this.ResLoaded()};
f.ResLoaded=function(){this.root=new magicinfoUI;this.addChild(this.root);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.DragUIMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.DragUIStart);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.DragUIEnd);this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_set").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_group").getChildByName("btn_del").on(Laya.Event.CLICK,
this,this.BtnClick);this.root.getChildByName("img_group").getChildByName("btn_set").on(Laya.Event.CLICK,this,this.BtnClick);this.ResetUI()};f.DragUIStart=function(){this.root.getChildByName("img_bg");var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=a.x*g_BaseScale;this.StartDragPos.y=a.y*g_BaseScale;this.CanDragMove=!0};f.DragUIMove=function(){if(0!=this.CanDragMove){this.root.getChildByName("img_bg");var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,
Laya.stage.mouseY));this.root.x=(a.x-this.StartDragPos.x)*g_BaseScale;this.root.y=(a.y-this.StartDragPos.y)*g_BaseScale}};f.DragUIEnd=function(){this.CanDragMove=!1};f.GetJobString=function(a){if(0==a)return"\u6218\u58eb: ";if(1==a)return"\u6cd5\u5e08: ";if(2==a)return"\u9053\u58eb: "};f.ResetUI=function(){this.root.visible=!1;var a=MagicMgr.getInstance().CurSelectIdx;a=MagicMgr.getInstance().GetOnRoleMagicList()[a];var b=GameUtil.ParseMagicNameFormat(2*a.Def.btEffect);this.root.getChildByName("img_magic").skin=
b;this.root.getChildByName("lbl_name").text=a.Def.sMagicName;this.root.getChildByName("lbl_info").text="Lv "+a.Level;b=this.GetMagicDes(a.Def.sMagicName).split(",");if(0!=b.length){for(var d=0;3>d;d++){var n="";if(1!=d){0==d&&0<=b[d].indexOf("\n")&&(b[d]=b[d].split("\n")[1]);if(""==b[d]||void 0==b[d])return;0==d&&(n+=this.GetJobString(a.Def.btJob));this.root.getChildByName("lbl_des_type"+d).text=n+b[d]}}this.root.visible=!0;8<=MagicMgr.getInstance().UseList.length?(this.root.getChildByName("btn_set").label=
"\u66ff\u6362",this.root.getChildByName("img_group").getChildByName("btn_set").label="\u66ff\u6362"):(this.root.getChildByName("img_group").getChildByName("btn_set").label="\u5e03\u7f6e",this.root.getChildByName("btn_set").label="\u5e03\u7f6e");this.root.getChildByName("btn_set").visible=!0;this.root.getChildByName("img_group").getChildByName("btn_set").visible=!0;void 0!=MagicMgr.getInstance().FindMagicFromUseList(a.Def.wMagicId)?(this.root.getChildByName("img_group").visible=!0,this.root.getChildByName("btn_set").visible=
!1):(this.root.getChildByName("img_group").visible=!1,this.root.getChildByName("btn_set").visible=!0);if(0==a.Def.btEffect||5==a.Def.btEffect)this.root.getChildByName("btn_set").visible=!1,this.root.getChildByName("img_group").getChildByName("btn_set").visible=!1}};f.GetMagicDes=function(a){var b=Laya.Loader.getRes("json/skilldesc.txt");if(b){b=b.toString().split("\r");for(var d=0;d<b.length;d++)if(-1!=b.indexOf(a))return b[d]}return""};f.BtnClick=function(a){switch(a.target.name){case "btn_exit":this.root.visible=
!1;break;case "btn_del":a=MagicMgr.getInstance().CurSelectIdx;a=MagicMgr.getInstance().GetOnRoleMagicList()[a];13!=a.Key?Laya.stage.event("remove_magic",[a.Key-1]):Laya.stage.event("add_magic_attack",[null]);a.Key=0;MagicMgr.getInstance().DeleteFromUseNpos(a.Key);Laya.stage.event("update_use_magic_list");Laya.stage.event("update_magic_list");Laya.stage.event("update_magic_info");this.root.visible=!1;break;case "btn_set":Laya.stage.event("game_dlg_cmd",[{id:"show_magiceditor"}]),this.root.visible=
!1}}})();
(function(){function e(){e.__super.call(this);this.AttNode=this.BtnListNode=this.LogicNode=this.HeadNode=null;this.CtrlState=!0;this.CanRotate=!1;this.StartRotatePos=new Laya.Point;this.SkillBtnList=[];this.DragSkillNode=null;this.StartRotation=0;this.IsDragMoved=!1;this.UseItemBtnList=[];this.DragItem=!1;this.HpNodeBasePos=new Laya.Point(0,0);this.BlueNodeBasePos=new Laya.Point(0,0);this.RedAniCurIdx=34;this.BlueAniCurIdx=62;this.MathTouchTime=!1;this.TotalTouchTime=0;this.showGameLogList=[];this.showLogTag=
0;this.chatMsgList=[];this.ShowChatDlg=!1;this.root=null;this.ChatBox_time=0;this.guajitime=-1;this.startpos=new Laya.Point;this.cur_touchID=null;this.isShowDrug=!0;this.drugItemTime=this.showDuraCount=0;this.showGold2=this.showGold1=null;this.hintTxtList=[];this.Init()}function f(){f.__super.call(this);this.size(310,40);this.buff_info=new Laya.Text;this.buff_info.fontSize=14;this.buff_info.color="#d2d2d2";this.buff_info.pos(40,21);this.buff_info.size(269,12);this.addChild(this.buff_info);this.buff_name=
new Laya.Text;this.buff_name.fontSize=14;this.buff_name.color="#eacd45";this.buff_name.pos(40,3);this.buff_name.size(106,12);this.addChild(this.buff_name);this.buff_time=new Laya.Text;this.buff_time.fontSize=14;this.buff_time.color="#2aff2f";this.buff_time.pos(247,1);this.buff_time.size(63,12);this.buff_time.name="buff_time";this.addChild(this.buff_time);this.buff_line=new Laya.Image;this.buff_line.skin="gameres/ui/auction_line.png";this.buff_line.bottom=0;this.buff_line.x=40;this.buff_line.width=
270;this.addChild(this.buff_line);this.buff_ani=new Laya.Panel;this.buff_ani.size(100,100);this.buff_ani.pos(0,0);this.addChild(this.buff_ani);this.settxt=function(b){this.x=0;this.buff_info.text=b.Describe;this.buff_name.text=b.Name;this.buff_time.text=b.sTime;this.buff_time.time=b.time;this.buff_time.color=b.sColor;var d=g_pak_list[b.FileIndex],n=new Laya.Point(b.x,b.y);d&&(this.buff_ani.removeChildByName("buffanidonotclear"),Animationmodule.playframe(!0,this.buff_ani,"data/"+d+"/",b.StartIndex,
b.StartIndex+b.effectCount-1,b.Interval,!0,!1,n).name="buffanidonotclear")}}Laya.class(e,"UIMain",Laya.Image);Laya.class(f,"buffRender",Laya.Box);var a=e.prototype;a.Init=function(){this.mouseThrough=this.is_cls=!0;this.ResLoaded()};a.UpdateName_Color=function(b){};a.BindMagicToAtt=function(b){var d=this.root.getChildByName("panel_att").getChildByName("btn_att");if(d)if(b){if(b==activate_ok){var n=Animationmodule.playframe(!1,d,"gameres/animation/mouse_click/",41,52,100,!0,!1);n.name="skilllockani";
n.pos(-12,-15)}n=b.Def.btEffect;38==b.Def.wMagicId&&(n=4);46==b.Def.wMagicId&&(n=42);39==b.Def.wMagicId&&(n=0);var c=GameUtil.ParseMagicResName(2*n);Laya.loader.load(c,Laya.Handler.create(this,function(){d.skin=c;d.stateNum=2}),null,Laya.Loader.IMAGE)}else d.getChildByName("skilllockani")&&Animationmodule.removeAniname("skilllockani"),d.skin="gameres/ui/btn_att.png",d.stateNum=2};a.ShowChatNode=function(b){this.ChatNode&&(this.ChatNode.visible=!b);this.ShowChatDlg=b};a.BindChatNode=function(){this.root.chat_list.skin=
"";this.root.chat_list.repeatX=1;this.root.chat_list.repeatY=5;this.root.chat_list.vScrollBarSkin="";this.root.chat_list.itemRender=ChatItem;this.root.chat_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.root.chat_list.array=this.chatMsgList;this.root.btn_chat.on(Laya.Event.CLICK,this,this.openchatconfig);this.root.btn_chatChange.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_public.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_guild.on(Laya.Event.CLICK,this,
this.ChangeChatType);this.root.btn_troops.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_siliao.on(Laya.Event.CLICK,this,this.ChangeChatType);this.SelectChatIdx=0};a.openchatconfig=function(b){cur_use_app?(b=GameUtil.InstanceOfMem(chatconfigUI),b||(b=new uiChatConfig,Laya.stage.addChild(b)),b.visible=!0,b.afreshlink()):(this.ShowChatDlg=!0,this.ChatNode.x=-450,Laya.stage.event("show_chat_dlg",[null,!0]))};a.ChangeChatType=function(b){switch(b.target.name){case "chatChange":this.root.img_changeChat.visible=
!this.root.img_changeChat.visible;break;case "public":this.root.chat_list.array=this.chatMsgList;this.root.chat_list.scrollTo(this.chatMsgList.length-1);this.SelectChatIdx=-1;this.root.btn_chatChange.skin="gameres/ui/chat_public.png";this.root.img_changeChat.visible=!1;break;case "guild":b=this.GetChatListByType(3);this.root.chat_list.array=b;this.root.chat_list.scrollTo(b.length-1);this.SelectChatIdx=3;this.root.btn_chatChange.skin="gameres/ui/chat_hanghui.png";this.root.img_changeChat.visible=!1;
break;case "troops":b=this.GetChatListByType(1);this.root.chat_list.array=b;this.root.chat_list.scrollTo(b.length-1);this.SelectChatIdx=1;this.root.btn_chatChange.skin="gameres/ui/chat_duiwu.png";this.root.img_changeChat.visible=!1;break;case "siliao":b=this.GetChatListByType(2),this.root.chat_list.array=b,this.root.chat_list.scrollTo(b.length-1),this.SelectChatIdx=2,this.root.btn_chatChange.skin="gameres/ui/chat_siliao.png",this.root.img_changeChat.visible=!1}};a.GetChatListByType=function(b){var d=
[];if(0>=b)return this.chatMsgList;for(var n=0;n<this.chatMsgList.length;n++)this.chatMsgList[n].type==b&&d.push(this.chatMsgList[n]);return d};a.OnSelect=function(b,d){};a.ClickItem=function(b,d){"click"==b.type&&Laya.stage.event("show_chat_dlg",[null,!0])};a.UpdateItem=function(b,d){b.Show(b.dataSource,d)};a.ResLoaded=function(){var b=this;this.root=new GameMainUI;this.addChild(this.root);this.root.btn_get_item.visible=1===g_funBtn[10]?!0:!1;Mapdata.setParent(this.root.pl_mini);this.SimpleScreen=
GameUtil.InstanceOfMem(SimpleScreenUI);this.SimpleScreen||(this.SimpleScreen=new SimpleScreen,this.addChild(this.SimpleScreen),this.SimpleScreen.left=0,this.SimpleScreen.top=40,g_taskPanel=this.SimpleScreen.panel_task);this.setMoneyShow();Laya.stage.on("showarrow",this,this.showarrow);Laya.stage.on("Update_Bag",this,this.updateShowGold);this.getEventBtn();this.getFunBtn();this.getOtherBtn();Laya.stage.on("update_role_info",this,this.UpdateHeadInfo);Laya.stage.on("update_actor_name",this,this.UpdateActorName);
Laya.stage.on("update_att_mode",this,this.UpdateAttMode);Laya.stage.on("update_magic_list",this,this.UpdateSkillIcons);Laya.stage.on("udpate_maindlg_items",this,this.UpdateMainDlgItems);Laya.stage.on("reset_head_icon",this,this.ResetActorHeadIcon);Laya.stage.on("show_log",this,this.ShowGameLog);Laya.stage.on("show_chat_node",this,this.ShowChatNode);Laya.stage.on("new_chat_msg",this,this.ChatMessage);Laya.stage.on("add_magic_attack",this,this.BindMagicToAtt);Laya.stage.on("update_hero_info",this,this.UpdateHeroInfo);
Laya.stage.on("update_AngryValue",this,this.UpdateAngryValue);Laya.stage.on("show_BtnHero",this,this.ShowHeroBtn);Laya.stage.on("update_Name_Color",this,this.UpdateName_Color);Laya.stage.on("role_die_state",this,this.setroledie);Laya.stage.on("heroCall_OK",this,this.heroCall);Laya.stage.on("heroExit_OK",this,this.heroExit);Laya.stage.on("heroState",this,this.heroState);Laya.stage.on("show_petBtn",this,this.show_petBtn);Laya.stage.on("close_petBtn",this,this.close_petBtn);Laya.stage.on("open_gm_info",
this,this.open_gminfo);Laya.stage.on("open_gm",this,this.opengm);Laya.stage.on("show_bag_hint",this,this.updateBagHint);Laya.stage.on("delayShow",this,this.openDelayStateBox);Laya.stage.on("changeNpcTipBubble",this,this.changeNpcTipBubble);Laya.stage.on("hideNpcTipBubble",this,this.hideNpcTipBubble);Laya.stage.on("dragItemHandle",this,this.dragItemHandle);Laya.stage.on("removeDrugByIndex",this,this.removeDrugByIndex);Laya.stage.on("pickGoodsAnimHandler",this,this.pickGoodsAnimHandler);Laya.stage.on("stopHook",
this,function(){var n=this.root.btn_autohook.getChildByName("autohook_btn");n&&(n.visible=!1)});Laya.stage.on("topeffect",this,this.showTopEffect);Laya.stage.on("otherBtnHandler",this,this.otherBtnHandler);this.root.btn_gm_gb.on(Laya.Event.CLICK,this,function(){this.root.ta_gmtest.visible=!1});this.root.btn_gm_qk.on(Laya.Event.CLICK,this,function(){this.root.ta_gmtest.text=""});Laya.stage.on("api_getItem",this,this.api_getItem);Laya.stage.on("DELAY_TIME",this,function(n){if(null!=b.delayLab){var c=
1096484;200>n&&(c=1096484);200<=n&&500>n&&(c=15463433);500<n&&(c=13571599);b.delayLab.color=c;b.delayLab.text=n+"ms"}});Laya.stage.on("item_hint",this,this.item_hint);this.root.btn_lock.visible=!1;this.root.btn_autohook.visible="1"==g_openhook;this.root.bnt_role.on(Laya.Event.CLICK,this,this.BtnClick);this.LoadHpAniRes();this.ResetUI();Laya.stage.on("ShowDrug_Items",this,this.ShowDrug_Items);this.lastDrugTime=0;this.root.Drug_0.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_1.on(Laya.Event.CLICK,
this,this.noDrug_Click);this.root.Drug_2.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_3.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_4.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.show_drug_kuang.visible=!1;this.root.show_drug_kuang.on(Laya.Event.CLICK,this,function(){this.isShowDrug=!this.isShowDrug;this.show_drug_kuang()});this.isopenMin=!0;this.originX;this.root.btn_openmini.on(Laya.Event.CLICK,this,function(){this.originX||(this.originX=this.root.img_mini.x);
this.isopenMin=!this.isopenMin;this.root.btn_openmini.skin=this.isopenMin?"gameres/ui/btn_ss_show.png":"gameres/ui/btn_ss_hide.png";GameUtil.drawerEffect(this.root.img_mini,{x:this.isopenMin?this.originX:this.originX+this.root.img_mini.width+10})});this.root.btn_position.visible=!1;this.root.btn_position.on(Laya.Event.CLICK,this,function(){rockerposview=!rockerposview;this.root.btn_position.skin=rockerposview?"gameres/ui/btn_closepos.png":"gameres/ui/btn_position.png";GlobalCfglist.doubleRocker?Laya.stage.event("updateRocker"):
(Laya.stage.event("move_position"),Laya.stage.event("hideSingleRocker",!rockerposview))});this.root.btn_lock.on(Laya.Event.CLICK,this,function(){GameUtil.delhalo(lockingID);ObjectManage.resetLockID();GameUtil.resetBackupLockID();g_boMagicGood=!1});Laya.stage.on("add_unlock_icon",this,function(){});Laya.stage.on("del_unlock_icon",this,function(){this.root.btn_lock.visible=!1});this.root.btn_qing.on(Laya.Event.CLICK,this,function(){this.is_cls=!this.is_cls;this.root.btn_qing.skin=this.is_cls?"gameres/ui/head_hide.png":
"gameres/ui/head_show.png";this.SimpleScreen.visible=this.is_cls;this.root.role_head.visible=this.is_cls;this.root.panel_node.visible=this.is_cls;this.root.chat_node.visible=this.is_cls;this.root.btn_btnList.visible=!0;this.root.panel_att.visible=!0});this.root.btn_autohook.on(Laya.Event.CLICK,this,this.onhook,["3"]);Laya.stage.on("onhook",this,this.onhook);Laya.stage.on("stopAutoHookStateByRockerMove",this,this.stopAutoHookStateByRockerMove);Laya.stage.on("guaji_pic",this,function(){var n=Laya.stage.getChildByName("autohook");
n&&(n.visible=!1);if(n=this.root.btn_autohook.getChildByName("autohook_btn"))n.visible=!1});this.root.hero_panel.visible=!1;this.root.herocall_btn.on(Laya.Event.CLICK,this,function(){Sendmessage.sendConfig(!0);Sendmessage.SendHeroCall()});this.root.herohead_sex.on(Laya.Event.CLICK,this,this.BtnClick);this.root.petState_btn.on(Laya.Event.CLICK,this,this.BtnClick);this.root.pet_lock.on(Laya.Event.CLICK,this,this.BtnClick);this.root.herolock_btn.on(Laya.Event.CLICK,this,this.heroLock);this.root.heroguard_btn.on(Laya.Event.CLICK,
this,this.heroGuard);this.root.herobag_btn.on(Laya.Event.CLICK,this,this.BtnClick);this.root.list_buffinfo.itemRender=f;this.root.list_buffinfo.vScrollBarSkin="";this.root.list_buffinfo.selectEnable=!0;this.root.list_buffinfo.spaceY=5;this.root.list_buffinfo.renderHandler=new Laya.Handler(this,this.updatebuff);this.root.heroatt_btn.on(Laya.Event.CLICK,this,function(){g_myHero&&lockingID&&(this.root.hero_power.getChildByName("poweMax")&&this.heroLock(),Sendmessage.sendHeroAtk())});Laya.stage.on("redHintCheck",
this,this.redHintCheck);Laya.stage.on("showDuraHead",this,this.showDuraHead);Laya.stage.on("showDuraTime",this,this.showDuraTime);Laya.stage.on("showbonus",this,function(n){var c=this.root.showbonus.getChildByName("bonusflash");null==c&&(c=Animationmodule.playframe(!1,this.root.showbonus,"gameres/animation/bonus/",1,6,100,!0,!1),c.name="bonusflash",c.size(40,40));this.root.showbonus.visible=n;this.makeHintPos()});this.root.showbonus.on(Laya.Event.CLICK,this,this.showstatebonus);this.root.img_friend_hint.on(Laya.Event.CLICK,
this,function(){Laya.stage.event("friend_apply");this.root.img_friend_hint.visible=!1});this.root.img_red_hint.on(Laya.Event.CLICK,this,function(){this.socialWin=GameUtil.openWin(this.socialWin,Laya.stage,UISocialWin,!0);Laya.stage.event("updateSocialDirectory",0);this.socialWin.onSocialDirectory(0);this.root.img_red_hint.visible=!1});this.root.img_team_hint.on(Laya.Event.CLICK,this,function(){Laya.stage.event("showApplyTeamTip");this.root.img_team_hint.visible=!1});this.root.img_guild_hint.on(Laya.Event.CLICK,
this,function(){Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui"}]);this.root.img_guild_hint.visible=!1});this.root.btn_att.on(Laya.Event.MOUSE_DOWN,this,this.onbtnatt_down);this.root.btn_storm.on(Laya.Event.MOUSE_DOWN,this,this.onStormStart);this.root.btn_storm.on(Laya.Event.MOUSE_UP,this,this.onStormEnd);this.root.btn_storm.on(Laya.Event.MOUSE_OUT,this,this.onStormEnd);this.ShowHeroBtn();this.root.btn_get_item.on(Laya.Event.CLICK,this,this.horseRiding);this.root.btn_bag0.on(Laya.Event.CLICK,
this,this.openBag);this.root.auto_pick.visible=g_autopick;this.root.auto_pick.on(Laya.Event.CLICK,this,function(){autohookstate||(autopickstate=!0)});this.chat_show=new RichText(450,84,10);this.root.chat_bg.addChild(this.chat_show);this.chat_show.pos(3,3);this.chat_show1=new RichText(450,0,3);this.root.chat_bg.addChild(this.chat_show1);this.chat_show1.pos(3,3);this.chat_show.on(Laya.Event.CLICK,this,this.ClickItem);this.chat_show1.on(Laya.Event.CLICK,this,this.ClickItem);this.root.panel_att_type.zOrder=
9999;this.root.atttype_all.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_couple.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_guild.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_mentor.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_peace.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_red.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_team.on(Laya.Event.CLICK,this,this.chooseatt_type);Laya.stage.on("delChatBox",
this,this.delChatBox);Laya.stage.on("show_target_head",this,this.showTargetHead);Laya.stage.on("updateTargetHp",this,this.updateTargetHp);Laya.stage.on("close_target_menu",this,function(){this.root.target_menu.visible=!1});this.root.btn_tarbuff.on(Laya.Event.CLICK,this,this.showBuffInfo);this.root.btn_selfbuff.on(Laya.Event.CLICK,this,this.showBuffInfo);this.root.btn_closebuff.on(Laya.Event.CLICK,this,this.closeBuff);this.root.target_job.on(Laya.Event.CLICK,this,this.showTargetMenu);this.root.menu_info.on(Laya.Event.CLICK,
this,this.targetMenuClick);this.root.menu_chat.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_friend.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_shield.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_team.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_guild.on(Laya.Event.CLICK,this,this.targetMenuClick);Laya.stage.on("updateBuffInfo",this,this.updateBuffInfo);Laya.stage.on("buffCountDown",this,this.buffCountDown);Laya.stage.on("loadMainGame",
this,this.loadMainGame);Laya.stage.on("bagMaxTip",this,this.bagMaxTip);Laya.stage.on("refreshTargetList",this,this.refreshTargetList);Laya.stage.on("makeHintPos",this,this.makeHintPos);var d=Laya.stage.getChildByName("mailflash");null==d&&(d=Animationmodule.playframe(!1,this.root.img_mail_Logo,"gameres/animation/mainhint/",0,9,120,!0,!1),d.name="mailflash");g_mailLogo=this.root.img_mail_Logo;this.root.btn_btnList.visible=!0;this.root.btn_other1.on(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other2.on(Laya.Event.CLICK,
this,this.onClickOther);this.root.btn_other3.on(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other4.on(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other5.on(Laya.Event.CLICK,this,this.onClickOther);this.root.rankBtn.on(Laya.Event.CLICK,this,this.onRank);this.root.bagMax.visible=!1;this.root.bagMax.on(Laya.Event.CLICK,this,this.toRecyleWin);this.initTargetBox();this.root.target_box.visible=!1;this.root.target_btn.on(Laya.Event.CLICK,this,this.onClickTargetBtn);this.root.target_player.on(Laya.Event.CLICK,
this,this.onClickTargetPlayer);this.root.target_monster.on(Laya.Event.CLICK,this,this.onClickTargetMonster)};a.onSummon=function(){Sendmessage.SendGameMainBtnMsg("\u53ec\u5524\u4ee4")};a.loadMainGame=function(){};a.testFun=function(b,d){this.isopenMin=!this.isopenMin;GameUtil.drawerEffect(this.root.img_mini,{x:this.isopenMin?b+this.root.img_mini.width:b+this.root.img_mini.width+100})};a.clienmsg=function(){Laya.stage.off("update_role_info",this,this.UpdateHeadInfo);Laya.stage.off("makeHintPos",this,
this.makeHintPos);Laya.stage.off("update_actor_name",this,this.UpdateActorName);Laya.stage.off("update_att_mode",this,this.UpdateAttMode);Laya.stage.off("update_magic_list",this,this.UpdateSkillIcons);Laya.stage.off("udpate_maindlg_items",this,this.UpdateMainDlgItems);Laya.stage.off("reset_head_icon",this,this.ResetActorHeadIcon);Laya.stage.off("show_log",this,this.ShowGameLog);Laya.stage.off("show_chat_node",this,this.ShowChatNode);Laya.stage.off("new_chat_msg",this,this.ChatMessage);Laya.stage.off("add_magic_attack",
this,this.BindMagicToAtt);Laya.stage.off("update_hero_info",this,this.UpdateHeroInfo);Laya.stage.off("update_AngryValue",this,this.UpdateAngryValue);Laya.stage.off("show_BtnHero",this,this.ShowHeroBtn);Laya.stage.off("update_Name_Color",this,this.UpdateName_Color);Laya.stage.off("role_die_state",this,this.setroledie);Laya.stage.off("heroCall_OK",this,this.heroCall);Laya.stage.off("heroExit_OK",this,this.heroExit);Laya.stage.off("heroState",this,this.heroState);Laya.stage.off("show_petBtn",this,this.show_petBtn);
Laya.stage.off("close_petBtn",this,this.close_petBtn);Laya.stage.off("open_gm_info",this,this.open_gminfo);Laya.stage.off("stopHook",this);Laya.stage.off("onhook",this,this.onhook);Laya.stage.off("stopAutoHookStateByRockerMove",this,this.stopAutoHookStateByRockerMove);Laya.stage.off("dragItemHandle",this,this.dragItemHandle);Laya.stage.off("removeDrugByIndex",this,this.removeDrugByIndex);Laya.stage.off("open_gm",this,this.opengm);Laya.stage.off("delayShow",this,this.openDelayStateBox);Laya.stage.off("topeffect",
this,this.showTopEffect);Laya.stage.off("otherBtnHandler",this,this.otherBtnHandler);Laya.stage.off("api_getItem",this,this.api_getItem);Laya.stage.off("DELAY_TIME",this);Laya.stage.off("ShowDrug_Items",this,this.ShowDrug_Items);Laya.stage.off("add_unlock_icon",this);Laya.stage.off("del_unlock_icon",this);Laya.stage.off("guaji_pic",this);Laya.stage.off("redHintCheck",this,this.redHintCheck);Laya.stage.off("showbonus",this);Laya.stage.off("showDuraHead",this,this.showDuraHead);Laya.stage.off("showDuraTime",
this,this.showDuraTime);Laya.stage.off("delChatBox",this,this.delChatBox);Laya.stage.off("show_target_head",this,this.showTargetHead);Laya.stage.off("updateTargetHp",this,this.updateTargetHp);Laya.stage.off("close_target_menu",this);Laya.stage.off("updateBuffInfo",this,this.updateBuffInfo);Laya.stage.off("buffCountDown",this,this.buffCountDown);Laya.stage.off("changeNpcTipBubble",this,this.changeNpcTipBubble);Laya.stage.off("loadMainGame",this,this.loadMainGame);Laya.stage.off("hideNpcTipBubble",
this,this.hideNpcTipBubble);Laya.stage.off("pickGoodsAnimHandler",this,this.pickGoodsAnimHandler);Laya.stage.off("bagMaxTip",this,this.bagMaxTip);Laya.stage.off("refreshTargetList",this,this.refreshTargetList);this.root.rankBtn.off(Laya.Event.CLICK,this,this.onRank);this.root.target_btn.off(Laya.Event.CLICK,this,this.onClickTargetBtn);this.root.bagMax.off(Laya.Event.CLICK,this,this.toRecyleWin);this.root.target_player.off(Laya.Event.CLICK,this,this.onClickTargetPlayer);this.root.target_monster.off(Laya.Event.CLICK,
this,this.onClickTargetMonster);this.root.btn_other1.off(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other2.off(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other3.off(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other4.off(Laya.Event.CLICK,this,this.onClickOther);this.root.btn_other5.off(Laya.Event.CLICK,this,this.onClickOther)};a.horseRiding=function(){var b=ObjectManage.findobject(playerID);b&&!autohookstate&&(b.obj_hores?Sendmessage.sendSay("@\u4e0b\u9a6c"):Sendmessage.sendSay("@\u9a91\u9a6c"))};
a.openBag=function(){var b=GameUtil.InstanceOfMem(NewBagUI);b?GameUtil.ShowNewBag(!b.visible):GameUtil.ShowNewBag(!b)};a.showstatebonus=function(){GameUtil.InstanceOfMem(statebonusUI)||(this.statebonus=new statebonus,Laya.stage.addChild(this.statebonus))};a.showDuraTime=function(){if(30<this.showDuraCount){for(var b=0;b<g_UserItemList.length;b++){var d=g_UserItemList[b];if(d){var n=d.Dura/1E3;3>n&&Laya.stage.event("show_log",[{txt:"\u60a8\u7684"+d.s.Name+"\u6301\u4e45\u5ea6\u4f4e\u4e8e"+parseInt(100*
n)+"%\uff0c\u8bf7\u53ca\u65f6\u4fee\u7406\u3002",color:"#ff0000"}])}}this.showDuraCount=0}this.showDuraCount++};a.showDuraHead=function(){for(var b=this.root.headinfo_img.getChildByName("equip"),d=0;d<g_UserItemList.length-1;d++){var n=g_UserItemList[d];if(n&&3>n.Dura/1E3){b||(b=new Laya.Point(50,5),b=Animationmodule.playframe(!0,this.root.headinfo_img,"gameres/animation/equip/",1,8,100,!0,!1,b),b.name="equip");return}}b&&Animationmodule.removeAni(b)};a.stopAutoHookStateByRockerMove=function(){GameUtil.delhalo(lockingID);
Movemodule.stopmove();chaseing=autohookstate=!1;Fightmodule.path_list=[];3==type&&Sendmessage.SendGameMainBtnMsg("stophook");var b=Laya.stage.getChildByName("autohook");b&&(b.visible=!1);if(b=this.root.btn_autohook.getChildByName("autohook_btn"))b.visible=!1};a.stopAutoHookStateByRockerMove=function(){GameUtil.delhalo(lockingID);Movemodule.stopmove();chaseing=autohookstate=!1;Fightmodule.path_list=[];3==type&&Sendmessage.SendGameMainBtnMsg("stophook");var b=Laya.stage.getChildByName("autohook");b&&
(b.visible=!1);if(b=this.root.btn_autohook.getChildByName("autohook_btn"))b.visible=!1};a.onhook=function(b){var d=Laya.Browser.now();if(!roledielock&&b&&300<d-this.guajitime)if(this.guajitime=d,GameUtil.delhalo(lockingID),Movemodule.stopmove(),autohookstate="3"==b?!autohookstate:"1"==b)Objectcontrol.self_obj&&Objectcontrol.self_obj.obj_hores&&Sendmessage.sendSay("@\u4e0b\u9a6c"),Movemodule.end_point&&(Movemodule.end_point=null),3==b&&Sendmessage.SendGameMainBtnMsg("openhook"),b=Laya.stage.getChildByName("autohook"),
null==b?(b=new Laya.Point(browser_width/2,browser_height/2+115),b=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/autohook/",1,10,100,!0,!1,b),b.name="autohook",b.zOrder=0):b.visible=!0,b=this.root.btn_autohook.getChildByName("autohook_btn"),null==b?(b=new Laya.Point(29,29),b=Animationmodule.playframe(!1,this.root.btn_autohook,"gameres/animation/autohook/",12,21,100,!0,!1,b),b.name="autohook_btn",b.zOrder=0):b.visible=!0;else{chaseing=!1;Fightmodule.path_list=[];3==b&&Sendmessage.SendGameMainBtnMsg("stophook");
if(b=Laya.stage.getChildByName("autohook"))b.visible=!1;if(b=this.root.btn_autohook.getChildByName("autohook_btn"))b.visible=!1}};a.getEventBtn=function(){var b=this.root;b=[b.btn_vip,b.bnt_game_fl,b.bnt_bysc,b.bnt_game_hd,b.bnt_shop,b.btn_rank_list,b.bnt_chongzi,b.bnt_new_user,b.btn_recharge_reward,b.onLine];for(var d=[{x:256,y:10},{x:196,y:10},{x:136,y:10},{x:76,y:10},{x:16,y:10},{x:256,y:70},{x:196,y:70},{x:136,y:70},{x:76,y:70},{x:16,y:70}],n=0,c=0;c<g_eventBtn.length;c++)0===g_eventBtn[c]?b[c].visible=
!1:(b[c].visible=!0,b[c].pos(d[n].x,d[n].y),n++)};a.getOtherBtn=function(){!g_otherBtn||1>g_otherBtn.length||(void 0!=g_otherBtn[0]&&null!=g_otherBtn[0]&&(this.root.btn_other1.visible=g_otherBtn[0]),void 0!=g_otherBtn[1]&&null!=g_otherBtn[1]&&(this.root.btn_other2.visible=g_otherBtn[1]),void 0!=g_otherBtn[2]&&null!=g_otherBtn[2]&&(this.root.btn_other3.visible=g_otherBtn[2]),void 0!=g_otherBtn[3]&&null!=g_otherBtn[3]&&(this.root.btn_other4.visible=g_otherBtn[3]),void 0!=g_otherBtn[4]&&null!=g_otherBtn[4]&&
(this.root.btn_other5.visible=g_otherBtn[4]))};a.getFunBtn=function(){var b=this.root,d=g_GameConfigWEB.funActivity.fun,n=[{x:151,y:4},{x:81,y:4},{x:10,y:4},{x:151,y:72},{x:81,y:72},{x:10,y:72},{x:151,y:141},{x:81,y:141},{x:10,y:141},{x:151,y:209},{x:81,y:209},{x:10,y:209}],c=[b.btn_social];b.btn_jiaoyi.visible=d.jiaoYi;b.btn_jiaoyi.visible&&c.push(b.btn_jiaoyi);b.btn_hanghui.visible=d.hangHui;b.btn_hanghui.visible&&c.push(b.btn_hanghui);b.btn_set.visible=d.sheZhi;b.btn_set.visible&&c.push(b.btn_set);
b.btn_baitan.visible=d.baiTan;b.btn_baitan.visible&&c.push(b.btn_baitan);b.btn_zhaomu.visible=d.zhaoMu;b.btn_zhaomu.visible&&c.push(b.btn_zhaomu);if(g_GameConfigWEB&&g_GameConfigWEB.h5NEWButtons)for(var h=0;h<g_GameConfigWEB.h5NEWButtons.length;h++){var m=g_GameConfigWEB.h5NEWButtons[h];if(0!=m.dsp){var g=new Laya.Button;g.skin=m.picPath;g.size(64,64);g.stateNum=m.btnStyle;this.root.btn_btnList.addChild(g);c.push(g);g.on(Laya.Event.CLICK,this,function(l){Sendmessage.SendQFCMD(l)},[m.cmd])}}for(h=
0;h<c.length;h++)c[h].x=n[h].x,c[h].y=n[h].y;b.btn_get_item.visible=d.qiMa};a.ShowHeroBtn=function(){g_ClientConfig&&g_ClientConfig.DOpenHeroButton&&(this.root.herocall_btn.visible=!0,this.root.heroatt_btn.visible=!0)};a.noDrug_Click=function(b){if(!(1E3>Laya.Browser.now()-this.lastDrugTime)&&(this.lastDrugTime=Laya.Browser.now(),b=b.target.parent.name,b<g_DrugItemsList.length))if(null!=g_DrugItemsList[b]){var d=Laya.Browser.now();CanUserItem&&1E3<=d-this.drugItemTime&&(g_setDrugNumber=b,GameUtil.DelBagItemByName(g_DrugItemsList[b].s.Name),
this.drugItemTime=d,CanUserItem=!1)}else g_setDrugNumber=b,GameApi.ShowScreen(!0,0,2)};a.removeDrugByIndex=function(b){this.root.Drug_bg&&this.root.Drug_bg._childs[b]&&this.root.Drug_bg.removeChildAt(b)};a.GetTypeCount=function(b){for(var d=0,n=0;n<g_BagItemsList.length;n++){var c=g_BagItemsList[n];null!=c&&c.s.StdMode==b.s.StdMode&&c.s.AniCount==b.s.AniCount&&c.s.Shape==b.s.Shape&&c.s.AC==b.s.AC&&c.s.MAC==b.s.MAC&&(d=0==b.s.StdMode&&5==b.s.Source&&0<b.DuraMax?d+g_BagItemsList[n].Dura:2!=b.s.StdMode||
5!=b.s.Shape&&3!=b.s.Shape?d+1:d+Math.ceil(g_BagItemsList[n].Dura/100))}return d};a.ShowDrug_Items=function(){function b(){for(var g=6;g<m.root.Drug_bg._childs.length;g++){var l=m.root.Drug_bg._childs[g],p=parseInt(l.name);if(p<g_DrugItemsList.length){l.removeChildren();DragItem.testType=DragItem.dragItemType.shortcutBar;var q=new DragItem,r={itemsData:g_DrugItemsList,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.shortcutBar};null!=g_DrugItemsList[p]&&0>=m.GetTypeCount(g_DrugItemsList[p])?
g_DrugItemsList[p]=null:(q.showItemUI(r,p),l.addChild(q))}}}for(var d=[],n=0;n<g_DrugItemsList.length;n++)if(null!=g_DrugItemsList[n]){var c="",h=("000000"+g_DrugItemsList[n].s.Looks).slice(-6);1E4<=h&&(c=Math.floor(h/1E4),h%=1E4);d.push("data/items"+c+"/"+h)}GameUtil.loadImgEx(d,b);var m=this;0==d.length&&b()};a.removeDrugByIndex=function(b){this.root.Drug_bg&&this.root.Drug_bg._childs[b]&&this.root.Drug_bg.removeChildAt(b)};a.drawItems=function(){};a.ResetActorHeadIcon=function(b,d){this.HeadNode&&
(this.root.headinfo_img.skin="gameres/ui/head_img-"+b+d+".png")};a.ShowGameLog=function(b){if(0!=g_GameInitFinish){var d=new Laya.Label(b.txt);d.strokeColor="#000000";d.stroke=2;d.x=(Laya.stage.width-d.width)/2;void 0==b.color&&(b.color="#00ff00");d.color=b.color;d.fontSize=18;this.showLogTag++;d.tag=this.showLogTag;d.y=this.GetLogTxtPosY();this.showGameLogList.push(d);Laya.stage.addChild(d);var n=this;setTimeout(function(){d.removeSelf();n.ResetLogList(d.tag)},1E3);d.zOrder=9999}};a.ResetLogList=
function(b){for(var d=0;d<this.showGameLogList.length;d++)this.showGameLogList[d].tag==b&&this.showGameLogList.splice(d,1)};a.GetLogTxtPosY=function(){for(var b=0;b<this.showGameLogList.length;b++)if(this.showGameLogList[b].tag==this.showLogTag)return this.showGameLogList[b].y;return 200+20*this.showGameLogList.length};a.LoadHpAniRes=function(){Laya.timer.clear(this,this.AnimationLoop);Laya.timer.loop(50,this,this.AnimationLoop)};a.AnimationLoop=function(){1==this.MathTouchTime&&this.TotalTouchTime++};
a.DragUIMove=function(b){if(0!=this.CanRotate&&null!=this.DragSkillNode){b=Laya.stage.mouseX-this.StartRotatePos.x;var d=Laya.stage.mouseY-this.StartRotatePos.y,n=this.AttNode.getChildByName("scroll_skills");n.visible=!1;if(this.DragSkillNode.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var c=Math.abs(Laya.stage.mouseX)-Math.abs(this.StartRotatePos.x),h=Math.abs(Laya.stage.mouseY)-Math.abs(this.StartRotatePos.y);n.rotation=c>h?n.rotation+b/10:n.rotation-d/10;if(15<c||15<h)this.MathTouchTime=
!1}}};a.DragUIStart=function(){if(!this.CanRotate){this.IsDragMoved=!1;for(var b=this.TotalTouchTime=0;6>b;b++)if(this.AttNode.getChildByName("btn_item_"+b).hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){this.MathTouchTime=!0;return}for(b=0;b<this.SkillBtnList.length;b++)if(this.SkillBtnList[b].hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){this.DragSkillNode=this.SkillBtnList[b];this.MathTouchTime=this.CanRotate=!0;this.StartRotation=45*parseInt(this.DragSkillNode.rotation/45);this.StartRotatePos=
new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY);break}}};a.DragUIEnd=function(){if(this.MathTouchTime&&15<this.TotalTouchTime)for(var b=0;6>b;b++)if(this.AttNode.getChildByName("btn_item_"+b).hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){g_Show_Bag_Type="main_item_editor";ItemMgr.getInstance().SelectEquipNPos=b;ItemMgr.getInstance().CurSelecItem=ItemMgr.getInstance().MainDlgUseList[b];Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]);this.MathTouchTime=!1;return}this.TotalTouchTime=
0};a.UpdateActorName=function(b){};a.ResetUI=function(){this.HeadNode=this.root.panel_head;this.BtnListNode=this.root.getChildByName("btn_btnList");this.AttNode=this.root.getChildByName("panel_att");this.LogicNode=this.root.getChildByName("panel_node");this.ChatNode=this.root.getChildByName("chat_node");this.infoStateBaox=this.root.img_mini.getChildByName("infoStateBaox");this.fpsLab=this.root.fpsLab;this.delayLab=this.root.delayLab;this.skill_rocke=new UISkillRock;this.skill_rocke.bottom=-160;this.skill_rocke.right=
-170;this.skill_rocke.scale(1.2,1.2);this.AttNode.addChild(this.skill_rocke);this.BtnListNode_Y=this.BtnListNode.y;this.ChatNode_X=this.ChatNode.x;this.ChatNode_Y=this.ChatNode.y;this.AttNode_X=this.AttNode.x;this.AttNode_Y=this.AttNode.y;this.btn_att_X=this.AttNode.getChildByName("btn_att").x;this.rock_x=this.skill_rocke.x;this.LogicNode_X=this.LogicNode.x;if(this.HeadNode&&this.BtnListNode&&this.AttNode&&this.LogicNode){if(this.root.btn_off_target)this.root.btn_off_target.on(Laya.Event.CLICK,this,
function(){GameUtil.delhalo(lockingID);Fightmodule.leavefight()});this.AttNode.getChildByName("panel_rotate");var b=this.AttNode.getChildByName("scroll_skills");b.loadImage("gameres/ui/att_base.png",0,0,0,0,Laya.Handler.create(this,function(d){d.pivotX=d.width/2;d.pivotY=d.height/2},[b]));this.ResetAttNodeRes();this.ResetBtnListRes();this.ResetLogicNodeRes();this.ResetHeadNodeRes();this.UpdateMainDlgItems();this.UpdateCtrlState();this.CreateSkillIconList();this.BindChatNode();Laya.stage.on("syncDelayShow",
this,function(){this.root.infoStateBaox.visible=GlobalCfglist.delayShow}.bind(this))}};a.ParseNameItemsFormat=function(b){for(var d="",n=b.toString().length;5>n;n++)d+="0";return 1E4<=b?"data/items1/"+d+b+".png":"data/items/"+d+b+".png"};a.UpdateMainDlgItems=function(b){this.DragItem=b?!0:!1;if(this.AttNode){b=ItemMgr.getInstance().MainDlgUseList;for(var d=0;6>d;d++){var n=this.AttNode.getChildByName("btn_item_"+d);if(b[d]){var c=this.ParseNameItemsFormat(b[d].s.Looks);if(void 0==n._childs[0]){var h=
new Laya.Image;n.addChild(h);h.skin=c}var m=this;Laya.loader.load(c,Laya.Handler.create(this,function(g,l,p){l.skin=g;l.pivotX=l.width/2;l.pivotY=l.height/2;null==l.parent&&(l.parent=m.AttNode.getChildByName("btn_item_"+p));l.x=l.parent.width/2;l.y=l.parent.height/2},[c,n._childs[0],d]),null,Laya.Loader.IMAGE)}else n._childs[0]&&(n._childs[0].skin="")}}};a.UpdateCtrlState=function(b){this.show_drug_kuang();this.ShowChatDlg?(Laya.stage.event("show_chat_dlg",[null,!1]),this.ChatNode.visible=!0,this.ShowChatDlg=
!1,this.CtrlState=!this.CtrlState):(this.CtrlState?(this.BtnListNode.visible=!1,this.ChatNode.visible=!0,this.AttNode.visible=!0,this.root.Drug_bg.visible=this.isShowDrug,this.root.show_drug_kuang.visible=!0,this.root.chat_bg.visible=!0,this.ChatNode.bottom=115):(this.root.Drug_bg.visible=!1,this.root.show_drug_kuang.visible=!1,this.BtnListNode.visible=!0,this.root.chat_bg.visible=!1,this.ChatNode.bottom=12),this.root.img_changeChat.visible=!1)};a.UpdateSkillIcons=function(b){};a.CreateSkillIconList=
function(){};a.ParseNameFormat=function(b){for(var d="",n=b.toString().length;5>n;n++)d+="0";return"data/magicion/"+d+b+".png"};a.setroledie=function(){this.root.img_hp.height=100;var b=this.root.lbl_hp.text.split("/");this.root.lbl_hp.text="0/"+GameUtil.makeBigNum(b[1])};a.UpdateHeroInfo=function(b){if(this.HeadNode){this.root.hero_level.text=b.Level;var d=b.Exp/b.MaxExp;0>d?d=0:1<d&&(d=1);this.root.hero_exp.width=113*d;d=b.HP/b.MaxHP;1<=d&&(d=0);0>=d&&(d=1);0==b.HP&&(d=0);this.root.hero_hp.width=
115*d;this.root.lbl_herohp.text=b.HP+"/"+b.MaxHP;if(0>=b.HP||g_myHero.is_die)this.root.lbl_herohp.text="0/"+b.MaxHP,this.root.herohead_sex.gray=!0;d=b.MP/b.MaxMP;1<=d&&(d=0);0>=d&&(d=1);0==b.MP&&(d=0);this.root.hero_mp.width=110*d;this.root.lbl_heromp.text=b.MP+"/"+b.MaxMP;this.root.hero_loyal.text=g_HeroLoyalPoint}};a.UpdateAngryValue=function(){if(this.HeadNode&&g_myHero){var b=g_myHero.AngryValue/g_myHero.AngryValueMax;if(0>b)b=0,this.root.hero_power.removeChildByName("poweMax");else if(1<=b){b=
1;var d=this.root.hero_power.getChildByName("poweMax");null==d&&(d=Animationmodule.playframe(!1,this.root.hero_power,"gameres/animation/hero_power/",1,6,100,!0,!1))&&(d.name="poweMax");if(this.root.heroatt_btn.getChildByName("heroatt"))return;if(d=Animationmodule.playframe(!1,this.root.heroatt_btn,"gameres/animation/mouse_click/",20,31,100,!0,!1))d.name="heroatt",d.scale(.6,.6),d.pos(-6,13)}else this.root.hero_power.removeChildByName("poweMax"),this.root.heroatt_btn.removeChildByName("heroatt");this.root.hero_power.width=
119*b}};a.checkBaseAttrTip=function(b){if(Objectcontrol.self_obj){var d=Objectcontrol.self_obj.m_Abil;if(b&&d){var n=b.MaxMP-d.MaxMP,c=b.MaxDC-d.MaxDC,h=b.MaxMC-d.MaxMC,m=b.MaxSC-d.MaxSC,g=b.MaxAC-d.MaxAC,l=b.MaxMAC-d.MaxMAC,p=b.DC-d.DC,q=b.MC-d.MC,r=b.SC-d.SC,u=b.AC-d.AC,v=b.MAC-d.MAC;this.addBaseAttrTip(b.MaxHP-d.MaxHP,"\u751f\u547d\u503c");this.addBaseAttrTip(n,"\u9b54\u6cd5\u503c");this.addBaseAttrTip(c,"\u653b\u51fb",p);this.addBaseAttrTip(h,"\u9b54\u6cd5",q);this.addBaseAttrTip(m,"\u9053\u672f",
r);this.addBaseAttrTip(g,"\u9632\u5fa1",u);this.addBaseAttrTip(l,"\u9b54\u9632",v)}}};a.addBaseAttrTip=function(b,d,n){0<b?Laya.stage.event("item_hint",[d,b,4,0<n?n:0]):0<n&&Laya.stage.event("item_hint",[d,0,4,n])};a.UpdateHeadInfo=function(b){this.checkBaseAttrTip(b);if(isWebForYYY()&&g_RoleLevelUp){var d=function(n){console.log(n)};g_RoleLevelUp--;gameClient.clientAction.saveRole({roleName:g_RoleName,level:b.Level,isNew:!1,onSuccess:d,onCancel:d})}this.root.lbl_level.text!=b.Level+""&&0!=cur_game_type&&
(3==cur_game_type&&0!=E_NewPlayerID&&b.Level?MRGameRoleUpate(g_RoleName,b.Level,3):4==cur_game_type&&0!=E_NewPlayerID&&b.Level?MRGameH5RoleUpate(b.Level,3):7==cur_game_type&&0!=E_NewPlayerID&&b.Level?upLoadRoleInfoInShahe(g_RoleName,b.Level,3):quicksdkuploadrole(E_NewPlayerID,g_RoleName,b.Level,g_Server_Name));g_levelForCaiji=b.Level;this.root.lbl_level.text=b.Level;Objectcontrol.self_obj.addJobAndLevel(b.Level);d=b.Exp/b.MaxExp;0>d?d=0:1<d&&(d=1);this.root.img_exp.width=449*d;d=this.root.lbl_exp.text.split("/")[0];
d=b.Exp-d;0<d&&Laya.stage.event("item_hint",["exp",d,1]);d=b.HP/b.MaxHP;1<=d&&(d=0);0>=d&&(d=1);0==b.HP&&(d=0);this.root.img_hp.height=80*(1-d);this.root.lbl_hp.text=GameUtil.makeBigNum(b.HP);this.root.lbl_exp.text=b.Exp+"/"+b.MaxExp;d=b.MP/b.MaxMP;1<=d&&(d=0);0>=d&&(d=1);0==b.MP&&(d=0);this.root.img_mp.height=80*(1-d);this.root.lbl_mp.text=GameUtil.makeBigNum(b.MP)};a.UpdateAttMode=function(b){switch(b){case 0:this.root.lbl_att_type.skin="gameres/ui/atttype_all.png";G_att_type="[\u5168\u4f53\u653b\u51fb]";
break;case 1:this.root.lbl_att_type.skin="gameres/ui/atttype_peace.png";G_att_type="[\u548c\u5e73\u653b\u51fb]";break;case 2:this.root.lbl_att_type.skin="gameres/ui/atttype_couple.png";G_att_type="[\u592b\u59bb\u653b\u51fb]";break;case 3:this.root.lbl_att_type.skin="gameres/ui/atttype_mentor.png";G_att_type="[\u5e08\u5f92\u653b\u51fb]";break;case 4:this.root.lbl_att_type.skin="gameres/ui/atttype_team.png";G_att_type="[\u7ec4\u961f\u653b\u51fb]";break;case 5:this.root.lbl_att_type.skin="gameres/ui/atttype_guild.png";
G_att_type="[\u884c\u4f1a\u653b\u51fb]";break;case 6:this.root.lbl_att_type.skin="gameres/ui/atttype_red.png",G_att_type="[\u7ea2\u540d\u653b\u51fb]"}};a.ResetHeadNodeRes=function(){this.HeadNode&&(this.root.lbl_att_type.text="",this.root.lbl_att_type.on(Laya.Event.CLICK,this,this.BtnClick),this.root.headinfo_img.on(Laya.Event.CLICK,this,this.BtnClick),this.root.lbl_level.text="")};a.ResetAttNodeRes=function(){if(this.AttNode){var b=this.AttNode._childs;this.AttNode.getChildByName("btn_move_type").selected=
!1;for(var d=0;d<b.length;d++)b[d].on(Laya.Event.CLICK,this,this.BtnClick);for(d=0;6>d;d++)b=this.AttNode.getChildByName("btn_item_"+d),b.on(Laya.Event.MOUSE_MOVE,this,this.DragUIMove),b.on(Laya.Event.MOUSE_DOWN,this,this.DragUIStart),b.on(Laya.Event.MOUSE_UP,this,this.DragUIEnd)}};a.updateShowGold=function(){if(this.showGold1){var b=this.showGold1.value;99999999<b?b=parseInt(b/1E8)+"\u4ebf":9999<b&&(b=parseInt(b/1E4)+"\u4e07");this.root.txt_showgold.text=b}this.showGold2&&(b=this.showGold2.value,
99999999<b?b=parseInt(b/1E8)+"\u4ebf":9999<b&&(b=parseInt(b/1E4)+"\u4e07"),this.root.txt_showgold1.text=b)};a.ResetBtnListRes=function(){if(this.BtnListNode)for(var b=this.BtnListNode._childs,d=0;d<b.length;d++)b[d].on(Laya.Event.CLICK,this,this.BtnClick)};a.ResetLogicNodeRes=function(){if(this.LogicNode&&this.LogicNode){for(var b=this.LogicNode._childs,d=0;d<this.LogicNode._childs.length-2;d++)b[d].on(Laya.Event.CLICK,this,this.BtnClick);this.root.lbl_map_name.text="";this.root.lbl_map_grid.text=
"";this.LogicNode.getChildByName("bnt_show").on(Laya.Event.CLICK,this,this.BtnClick);this.LogicNode.getChildByName("bnt_show").show=!0;this.root.bnt_new_user.on(Laya.Event.CLICK,this,this.BtnClick)}};a.ChatMessage=function(b,d){if(null!=this.root&&void 0!=this.root){for(var n=[],c=b.info;-1!=c.indexOf("{")&&-1!=c.indexOf("|")&&-1!=c.indexOf("}")||-1!=c.indexOf("</:")&&-1!=c.indexOf(">");){if(0!=c.indexOf("{")){var h=c.indexOf("{");n.push(c.substring(0,h));c=c.substring(h)}0!=c.indexOf("</:")&&0>c.indexOf("{<")&&
(h=c.indexOf("<"),n.push(c.substring(0,h)),c=c.substring(h));0!=c.indexOf(">")&&0>c.indexOf("{>")&&(h=c.indexOf(">"),n.push(c.substring(0,h+1)),c=c.substring(h+1));h=c.indexOf("{");var m=c.indexOf("}");-1!=h&&-1!=m?(n.push(c.substring(0,m+1)),c=c.substring(m+1)):""!=c&&n.push(c)}""!=c&&n.push(c);n=GameUtil.check_showItem(n);n=GameUtil.makeLable(n,b.front,b.bg,!1,b.type);d?(this.chat_show1.setBox(n,b.bg,b.type,d),this.addTopInfoToList(b),this.chat_show1.height=21*this.chat_show1.all_list.length,65<
this.chat_show1.height&&65==this.chat_show1.height,this.chat_show1.resetbox(21),this.chat_show.y=21*this.chat_show1.all_list.length+2,this.chat_show.height=84-21*this.chat_show1.all_list.length,this.chat_show.autolien(21)):this.chat_show.setBox(n,b.bg,b.type)}};a.isTopInfo=function(b){if(!b)return!1;for(var d=0;d<topInfoList.length;d++)if(b.info==topInfoList[d].info)return!0};a.addTopInfoToList=function(b){if(b){for(var d=0;d<topInfoList.length;d++)if(b.info==topInfoList[d].info)return;topInfoList.push(b)}};
a.delChatBox=function(){this.chat_show.height=84-21*this.chat_show1.all_list.length;this.chat_show.y=21*this.chat_show1.all_list.length+2;this.chat_show.autolien(21)};a.openAttPanel=!0;a.originAttX;a.originBtnsX;a.functionBtnDrawerEffect=function(){var b=this.root.panel_att,d=this.root.btn_btnList;this.openAttPanel=!this.openAttPanel;void 0==this.originAttX&&(this.originAttX=this.root.panel_att.x);void 0==this.originBtnsX&&(this.originBtnsX=this.root.btn_btnList.x);var n={x:this.openAttPanel?this.originBtnsX:
this.originBtnsX-400};GameUtil.drawerEffect(b,{x:this.openAttPanel?this.originAttX:this.originAttX+400});GameUtil.drawerEffect(d,n)};a.BtnClick=function(b){if(b.target)var d=b.target.name.toString();for(var n in g_GameMainBtnResList)if(d==n){if("bnt_chongzi"===d&&isWebForYYY())break;Sendmessage.SendGameMainBtnMsg(g_GameMainBtnResList[n])}switch(d){case "bnt_role":this.functionBtnDrawerEffect();break;case "bnt_chongzi":Laya.stage.event("game_dlg_cmd",[{id:"show_chongzhi"}]);break;case "btn_set":Laya.stage.event("game_dlg_cmd",
[{id:"show_Auxiliary"}]);break;case "btn_get_item":(n=ObjectManage.findobject(playerID))&&!autohookstate&&(n.obj_hores?Sendmessage.sendSay("@\u4e0b\u9a6c"):Sendmessage.sendSay("@\u9a91\u9a6c"));break;case "btn_friend":if(this.root.btn_friend){n=this.root.bnt_role.getChildByName("RedPacket");var c=this.root.btn_redpack.getChildByName("RedPacket2"),h=this.root.btn_friend.getChildByName("friendAni");h&&(Animationmodule.removeAniname("friendAni"),h=null);c||h||!n||Animationmodule.removeAniname("RedPacket");
Laya.stage.event("send_friend_info",[0,""]);Laya.stage.event("game_dlg_cmd",[{id:"show_friend"}])}break;case "btn_team":Laya.stage.event("game_dlg_cmd",[{id:"show_team"}]);break;case "btn_hanghui":Sendmessage.sendOpenGuildDlg();break;case "headinfo_img":(n=GameUtil.InstanceOfMem(HumWinUI))?n&&0==n.visible?GameUtil.ShowNewLogo(!0):GameUtil.ShowNewLogo(!1):GameUtil.ShowNewLogo(!0);break;case "doudizhu":Sendmessage.sendCardGame3("QuickJoinRoom|\u52a0\u5165\u623f\u95f4");break;case "btn_chonglian":Sendmessage.sendCardGame3("OutLineEnterCheck|\u91cd\u8fde");
break;case "herostate_btn":Sendmessage.sendSay("@RestHero");break;case "petState_btn":Sendmessage.sendSay("@rest");break;case "pet_lock":lockingID&&(n=ObjectManage.findobject(lockingID),Sendmessage.sendPetLock(n));break;case "herohead_sex":GameUtil.ShowHeroWin(!0);break;case "herobag_btn":GameUtil.ShowNewHeroBag(!0);break;case "btn_skills":GameUtil.ShowNewLogo(!0,1);break;case "bnt_shop":Laya.stage.event("game_dlg_cmd",[{id:"show_npc_shop"}]);break;case "bnt_show":this.root.bnt_show.show=!this.root.bnt_show.show;
this.root.btn_list.visible=this.root.bnt_show.show;this.root.bnt_show.skin=this.root.bnt_show.show?"gameres/ui/btn_ss_show.png":"gameres/ui/btn_ss_hide.png";break;case "btn_jiaoyi":Sendmessage.StartTrade();break;case "btn_social":(n=g_GameConfigWEB.funActivity.fun)&&(n.hongBao||n.haoYou||n.zuDui)&&(this.socialWin=GameUtil.openWin(this.socialWin,Laya.stage,UISocialWin,!0),Laya.stage.event("updateSocialDirectory",[0,!0]));break;case "btn_target":Objectcontrol.locking();break;case "btn_redpack":this.BtnListNode.getChildByName("btn_redpack")&&
(n=this.root.bnt_role.getChildByName("RedPacket"),c=this.root.btn_redpack.getChildByName("RedPacket2"),h=this.root.btn_friend.getChildByName("friendAni"),c&&(Animationmodule.removeAniname("RedPacket2"),c=null),c||h||!n||Animationmodule.removeAniname("RedPacket"));GameUtil.InstanceOfMem(RedPakUI);this.socialWin=GameUtil.openWin(this.socialWin,this,UISocialWin,!0);this.socialWin.visible&&Laya.stage.event("updateSocialDirectory",0);break;case "btn_warou":Objectcontrol.excavate();break;case "btn_wakuang":Objectcontrol.controltype=
5;Objectcontrol.mining();break;case "btn_task":Laya.stage.event("game_dlg_cmd",[{id:"task_scene"}]);break;case "btn_baitan":1==g_ClientConfig.nMyShopType?player_stalls?GameApi.ShowMyShop(!0):Sendmessage.OpenMyBaiTan():(n=GameUtil.InstanceOfMem(PersonalStoreUI))?Laya.stage.removeChild(n):Sendmessage.QueryUserShops(0,0,"");break;case "btn_zhaomu":Laya.stage.event("game_dlg_cmd",[{id:"open_user_mail"}]);break;case "btn_move_type":n=this.AttNode.getChildByName("btn_move_type");n.selected=!n.selected;
Laya.stage.event("game_dlg_cmd",[{id:"change_move_type"}]);break;case "lbl_att_type":this.root.panel_att_type.visible=!this.root.panel_att_type.visible}0<=d.indexOf("btn_skill_")?0<=d.indexOf("btn_skill_")&&0==this.IsDragMoved&&(0==this.MathTouchTime&&0==this.IsDragMoved?(G_Show_Editor_Type="look_self_skill",Laya.stage.event("game_dlg_cmd",[{id:"show_skills"}])):(this.MathTouchTime=!1,b=b.target._childs[0].tag,d=MagicMgr.getInstance().UseList,b=MagicMgr.getInstance().GetUseListIndexFromNpos(b),0>
b?(G_Show_Editor_Type="look_self_skill",Laya.stage.event("game_dlg_cmd",[{id:"show_skills"}])):d[b]&&Objectcontrol.useskill(d[b].Def.btEffect))):0<=d.indexOf("btn_item_")&&0!=this.MathTouchTime&&(this.MathTouchTime=!1,b=d.split("_"),b=parseInt(b[2]),d=ItemMgr.getInstance().CurSelecItem,ItemMgr.getInstance().MainDlgUseList[b]?null==d?(ItemMgr.getInstance().MainDlgUseList[b].form="main_dlg",ItemMgr.getInstance().UseItem(ItemMgr.getInstance().MainDlgUseList[b])):0==ItemMgr.getInstance().CanTakeOnItems?
Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u5e03\u7f6e",color:"#ff0000"}]):3>=d.s.StdMode?(b=ItemMgr.getInstance().MainDlgUseList[b],ItemMgr.getInstance().AddItemToBag(b,!1),ItemMgr.getInstance().RemoveItemFromMainDlg(b.MakeIndex),ItemMgr.getInstance().AddItemToMainDlg(d),ItemMgr.getInstance().DeleteItem(d.MakeIndex),ItemMgr.getInstance().CurSelecItem=null,Laya.stage.event("hide_bag_dlg"),Laya.stage.event("udpate_maindlg_items"),Laya.stage.event("hide_iteminfo_dlg")):Laya.stage.event("show_log",
[{txt:"\u6b64\u7269\u54c1\u4e0d\u80fd\u51c6\u5907\u5230\u836f\u6c34\u680f",color:"#ff0000"}]):null==d?(g_Show_Bag_Type="main_item_editor",Laya.stage.event("game_dlg_cmd",[{id:"show_bag"}])):0==ItemMgr.getInstance().CanTakeOnItems?Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u5e03\u7f6e",color:"#ff0000"}]):3>=d.s.StdMode?(ItemMgr.getInstance().AddItemToMainDlg(d),ItemMgr.getInstance().DeleteItem(d.MakeIndex),ItemMgr.getInstance().CurSelecItem=null,Laya.stage.event("show_bag_items"),Laya.stage.event("udpate_maindlg_items"),
Laya.stage.event("hide_iteminfo_dlg")):Laya.stage.event("show_log",[{txt:"\u6b64\u7269\u54c1\u4e0d\u80fd\u51c6\u5907\u5230\u836f\u6c34\u680f",color:"#ff0000"}]))};a.onbtnatt_down=function(b){b&&(this.cur_touchID=b.touchId);this.startpos.x=Laya.stage.mouseX;this.startpos.y=Laya.stage.mouseY;Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onbtnatt_up);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onbtnatt_up)};a.findAttackTargetByMode=function(b){if(!lockingID){var d,n=g_GameConfigWEB.funActivity.atkRange;
(d=ObjectManage.findlateobject1(b.grid,n,1))||(d=ObjectManage.findlateobject1(b.grid,n,3));d&&GameUtil.addhalo(d)}};a.onbtnatt_up=function(b){if(b&&b.touchId==this.cur_touchID){var d=ObjectManage.findobject(playerID);if(null!=d){var n=Math.atan2(this.startpos.y-Laya.stage.mouseY,Laya.stage.mouseX-this.startpos.x)/Math.PI;0>n&&(n+=2);10>this.startpos.distance(Laya.stage.mouseX,Laya.stage.mouseY)?(this.findAttackTargetByMode(d),Laya.stage.event("game_dlg_cmd",[{id:"actor_att",type:1,target:b.target}])):
.75<=n&&1.75>n?((b=ObjectManage.findlateobject1(d.grid,9,1))?GameUtil.addhalo(b):Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u6ca1\u6709\u76ee\u6807",color:"#ff0000"}]),b=this.root.btn_att.getChildByName("mon_atteffect"),b||(b=Animationmodule.playframe(!1,this.root.btn_att,"gameres/animation/skill/",24,31,50,!1,!0),b.scale(.53,.53),b.pos(-32,-35),b.name="mon_atteffect")):((b=ObjectManage.findlateobject1(d.grid,9,3))?GameUtil.addhalo(b):Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u6ca1\u6709\u76ee\u6807",
color:"#ff0000"}]),b=this.root.btn_att.getChildByName("player_atteffect"),b||(b=Animationmodule.playframe(!1,this.root.btn_att,"gameres/animation/skill/",16,23,50,!1,!0),b.scale(.53,.53),b.pos(-32,-35),b.name="player_atteffect"));Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onbtnatt_up);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onbtnatt_up)}}};a.onStormStart=function(){this.onStorm();Laya.timer.clear(this,this.onStorm);Laya.timer.frameLoop(5,this,this.onStorm)};a.onStorm=function(){Objectcontrol.storm()};
a.onStormEnd=function(b){"btn_storm"==b.target.name&&Laya.timer.clear(this,this.onStorm)};a.redHintCheck=function(b){"red"==b?(b=this.root.img_red_hint.getChildByName("RedPacket"),null==b&&(b=Animationmodule.playframe(!1,this.root.img_red_hint,"gameres/animation/mainhint/",30,39,100,!0,!1),b.name="RedPacket",b.size(40,40)),this.root.img_red_hint.visible=!0):"friend"==b?(b=this.root.img_friend_hint.getChildByName("friendAni"),null==b&&(b=Animationmodule.playframe(!1,this.root.img_friend_hint,"gameres/animation/mainhint/",
10,19,100,!0,!1),b.name="friendAni",b.size(40,40)),this.root.img_friend_hint.visible=!0):"team"==b?(b=this.root.img_team_hint.getChildByName("teamAni"),null==b&&(b=Animationmodule.playframe(!1,this.root.img_team_hint,"gameres/animation/mainhint/",40,49,100,!0,!1),b.name="teamAni",b.size(40,40)),this.root.img_team_hint.visible=!0):"guild"==b&&(b=this.root.img_guild_hint.getChildByName("guildAni"),null==b&&(b=Animationmodule.playframe(!1,this.root.img_guild_hint,"gameres/animation/mainhint/",20,29,
100,!0,!1),b.name="guildAni",b.size(40,40)),this.root.img_guild_hint.visible=!0);this.makeHintPos()};a.heroLock=function(){if(lockingID&&g_myHero){var b=ObjectManage.findobject(lockingID);Sendmessage.HeroLock(lockingID,b.grid,g_HeroLockType);g_HeroLockType?g_HeroLockType=0:g_HeroLockType=1}};a.heroGuard=function(){g_myHero&&(Laya.stage.event("show_log",[{txt:"\u70b9\u51fb\u9009\u62e9\u82f1\u96c4\u5b88\u62a4\u7684\u533a\u57df\uff01",color:"#ff0000"}]),g_HeroGuardOn=!0)};a.open_gminfo=function(b){this.root&&
this.root.ta_gmtest&&(this.root.ta_gmtest.text+=b)};a.opengm=function(b){this.root&&this.root.ta_gmtest&&(this.root.ta_gmtest.visible=!0)};a.openDelayStateBox=function(b){this.root&&this.root.infoStateBaox&&(this.root.infoStateBaox.visible=b)};a.heroCall=function(b,d){b=this.root;b.herohead_bg.visible=!0;b.hero_panel.visible=!0;b.herolock_btn.visible=!0;b.heroguard_btn.visible=!0;b.herostate_btn.visible=!0;b.herobag_btn.visible=!0;d=d.split("\\");b.hero_name.text=d[1];b.hero_loyal.text=d[0];g_myHero&&
(0==g_myHero.skin_feature.btGender?b.herohead_sex.skin="gameres/ui/herohead0.png":b.herohead_sex.skin="gameres/ui/herohead1.png",this.root.herohead_sex.gray=!1);b.hero_level.text=g_myHero.m_Abil.Level};a.heroExit=function(){var b=this.root;b.herohead_bg.visible=!1;b.hero_panel.visible=!1;b.herolock_btn.visible=!1;b.heroguard_btn.visible=!1;b.herostate_btn.visible=!1;b.herobag_btn.visible=!1;g_myHero=null;g_HeroBagCount=-1};a.heroState=function(b){-1!=b.indexOf("\u4f11\u606f")?this.root.herostate_btn.skin=
"gameres/ui/herostate_btn1.png":-1!=b.indexOf("\u8ddf\u968f")?this.root.herostate_btn.skin="gameres/ui/herostate_btn2.png":-1!=b.indexOf("\u653b\u51fb")&&(this.root.herostate_btn.skin="gameres/ui/herostate_btn3.png")};a.show_petBtn=function(){this.root.petState_btn.visible=!0};a.close_petBtn=function(){this.root.petState_btn.visible=!1;this.root.pet_lock.visible=!1};a.api_getItem=function(b){b&&0<b&&Sendmessage.sendapi_getItem(b)};a.originX1;a.show_drug_kuang=function(){void 0==this.originX1&&(this.originX1=
this.root.Drug_bg.x,this.root.drug_item_bg.scrollRect=new Laya.Rectangle(0,0,304,48),this.root.drug_item_bg.optimizeScrollRect=!0);GameUtil.drawerEffect(this.root.Drug_bg,{x:this.isShowDrug?this.originX1:this.originX1+this.root.Drug_bg.width-50});this.isShowDrug?this.root.show_drug_kuang.skin="gameres/ui/hero_suo.png":(this.root.show_drug_kuang.skin="gameres/ui/hero_fang.png",(cur_use_app||2==g_Termial)&&Laya.stage.event("clearCheckClickHandler",DragItem.dragItemType.shortcutBar))};a.chooseatt_type=
function(b){if(b&&b.target)switch(this.root.panel_att_type.visible=!1,b.target.name){case "atttype_all":Sendmessage.SendChageAttackMode(0);break;case "atttype_peace":Sendmessage.SendChageAttackMode(1);break;case "atttype_couple":Sendmessage.SendChageAttackMode(2);break;case "atttype_mentor":Sendmessage.SendChageAttackMode(3);break;case "atttype_team":Sendmessage.SendChageAttackMode(4);break;case "atttype_guild":Sendmessage.SendChageAttackMode(5);break;case "atttype_red":Sendmessage.SendChageAttackMode(6)}};
a.showTopEffect=function(b,d,n){var c=this.root;c=[c.btn_vip,c.bnt_game_fl,c.bnt_bysc,c.bnt_game_hd,c.bnt_shop,c.btn_rank_list,c.bnt_chongzi,c.bnt_new_user,c.btn_recharge_reward,c.onLine];if(c[b]){if(0==n){var h=c[b].getChildByName("btn_halo");n=new Laya.Point(27,28);d&&!h?(h=Animationmodule.playframe(!1,c[b],"gameres/animation/halo/",0,7,100,!0,!1,n),h.name="btn_halo"):!d&&h&&Animationmodule.removeAni(h)}else 1==n&&(c[b].visible=1==d);n=[{x:256,y:10},{x:196,y:10},{x:136,y:10},{x:76,y:10},{x:16,y:10},
{x:256,y:70},{x:196,y:70},{x:136,y:70},{x:76,y:70},{x:16,y:70}];for(d=b=0;d<c.length;d++)c[d]&&c[d].visible&&(c[d].pos(n[b].x,n[b].y),b++)}};a.otherBtnHandler=function(b,d,n){var c=this.root;b-=10;c=[c.btn_other1,c.btn_other2,c.btn_other3,c.btn_other4,c.btn_other5][b];if(0==n){var h=c.getChildByName("btn_halo");if(d&&!h){switch(b){case 0:var m="otherActivity";break;case 1:m="otherRedPack";break;case 2:m="otherChongzhi";break;case 3:m="otherBoss";break;case 4:m="otherSummon"}"otherBoss"==m?h=Animationmodule.playframe(!1,
c,"gameres/animation/"+m+"/",0,8,100,!0,!1):(h=Animationmodule.playframe(!1,c,"gameres/animation/"+m+"/",0,8,100,!0,!1,null,this,function(){h._graphics&&h._graphics._one&&h._graphics._one[0]?(h.x=(h.parent.width-h._graphics._one[0].width)/2,h.y=(h.parent.height-h._graphics._one[0].height)/2):h.pos(-13,-13)}),h.pos(-13,-13));h.name="btn_halo"}else!d&&h&&Animationmodule.removeAni(h)}else 1==n&&(c.visible=1==d)};a.showTargetHead=function(b,d){if((this.root.targethead_bg.visible=b)&&lockingID&&(this.root.target_menu.visible&&
(this.root.target_menu.visible=!1),g_ClientConfig&&g_ClientConfig.DOpenHeroButton&&this.root.bnt_show.show&&(this.root.bnt_show.show=!1),(b=ObjectManage.findobject(lockingID))&&b.txt_name)){d=b.txt_name.cur_name.toLowerCase();b.txt_name.text?(this.root.target_name.x=0,-1!=b.txt_name.text.indexOf("\n")?(d=b.txt_name.text.split("\n"),this.root.target_name.text=d[d.length-1]):this.root.target_name.text=b.txt_name.text,Laya.Tween.clearAll(this.root.target_name),7<this.root.target_name.text.length&&this.runHorseLight(this.root.target_name)):
d&&(0==d.indexOf("centerwall")?this.root.target_name.text="\u4e2d\u95f4\u57ce\u5899":0==d.indexOf("leftwall")?this.root.target_name.text="\u5de6\u57ce\u5899":0==d.indexOf("maindoor")?this.root.target_name.text="\u57ce\u95e8":0==d.indexOf("rightwall")&&(this.root.target_name.text="\u53f3\u57ce\u5899"));if(3==b.type){if(d=THumFeature(b.data.fea.buffer))0==d.btJob?this.root.target_job.skin="gameres/ui/target_zs.png":1==d.btJob?this.root.target_job.skin="gameres/ui/target_fs.png":2==d.btJob&&(this.root.target_job.skin=
"gameres/ui/target_ds.png")}else 1==b.type&&(this.root.target_job.skin="gameres/ui/target_mon.png");this.root.target_level.text=b.data.level?b.data.level:"???";this.root.target_hpNum.text=b.Blood?parseInt(b.Blood.curBlood/b.Blood.maxBlood*100)+"%":"100%";this.root.target_hpBar.scaleX=1}};a.runHorseLight=function(b){b=void 0===b?null:b;if(null!=b){var d=b;this.root.target_sp.scrollRect=new Laya.Rectangle(0,0,128,19);d.overflow="";var n=GameUtil.getTextWidthByMeasure(18,d.text);return Laya.Tween.to(d,
{x:0-n},4E3,null,Laya.Handler.create(this,function(){d.x<=0-n&&(d.x=0,Laya.timer.once(500,this,function(){this.runHorseLight(d)}))}))}};a.updateTargetHp=function(b,d,n){if(lockingID&&(n=ObjectManage.findobject(lockingID))){var c=Math.ceil(b/d*100);this.root.target_hpNum.changeText(c+"%");this.refreshTargetHp(c);n.data.level&&this.root.target_level.changeText(n.data.level);this.root.target_hpBar.scaleX=(b/d).toFixed(2)}};a.showTargetMenu=function(){if(lockingID){var b=ObjectManage.findobject(lockingID);
if(b&&3==b.type&&b.txt_name){var d=b.txt_name.text;-1!=b.txt_name.text.indexOf("\n")&&(d=b.txt_name.text.split("\n"),d=d[d.length-1]);b.txt_name.text&&(this.root.target_menu_name.text=d);this.root.menu_shield.label="\u5c4f\u655d\u53d1\u8a00";for(b=0;b<G_PRIVATE_CHAT_list.length;b++)G_PRIVATE_CHAT_list[b]==this.root.target_menu_name.text&&(this.root.menu_shield.label="\u89e3\u9664\u53d1\u8a00");this.root.target_menu.visible=!0}}};a.targetMenuClick=function(b){if(lockingID){var d=ObjectManage.findobject(lockingID);
if(d&&d.txt_name){var n=d.txt_name.text;switch(b.target.name){case "menu_info":Sendmessage.sendQueryState(lockingID,d.grid.x,d.grid.y);break;case "menu_chat":Laya.stage.event("show_chat_dlg",["/"+GameUtil.getPureName(d)+" ",!0]);break;case "menu_friend":Sendmessage.FriendOpition(1,GameUtil.getPureName(d));break;case "menu_guild":Sendmessage.GuildOperate(10,n);break;case "menu_team":1<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(GameUtil.getPureName(d)):Sendmessage.sendCreateGroup(GameUtil.getPureName(d));
break;case "menu_shield":b=null;for(d=0;d<G_PRIVATE_CHAT_list.length;d++)G_PRIVATE_CHAT_list[d]==n&&(b=d);null==b?G_PRIVATE_CHAT_list.push(n):G_PRIVATE_CHAT_list.splice(b,1)}}this.root.target_menu.visible=!1}};a.updateBagHint=function(){GameUtil.MaxBagItems();for(var b=0,d=0;d<g_BagItemsList.length;d++)null==g_BagItemsList[d]&&b++;if(d=this.root.btn_bag0.getChildByName("img_hint"))d.visible=0>=b};a.makeHintPos=function(){for(var b=0,d=0;d<this.root.hint_bg._childs.length;d++){var n=this.root.hint_bg._childs[d];
n.visible&&(n.x=40*b,b++)}};a.showarrow=function(b){var d=this.root.btn_att._childs[0];d&&(d.visible=b)};a.updatebuff=function(b){b.settxt(b.dataSource)};a.showBuffInfo=function(b){if(b&&b.target&&b.target.name){if("btn_selfbuff"==b.target.name)var d=playerID;"btn_tarbuff"==b.target.name&&(d=lockingID)}void 0!=d&&(this.root.bg_buff.visible=!0,this.updateBuffInfo(d))};a.updateBuffInfo=function(b){if(g_buffOnwerId!=b)var d=ObjectManage.findobject(g_buffOnwerId);var n=ObjectManage.findobject(b);if(n&&
1==n.isNewBuff){d&&(d.isNewBuff=!0);g_buffOnwerId=b;b=n.buff_list;d=g_customItemAttr.GameBuff;for(var c=[],h=0;h<b.length;h++){var m=b[h],g=Math.ceil((Laya.Browser.now()-n.buff_time)/1E3);g=m[1]-g;if(0<g&&d[h]){var l=d[h],p="#2aff2f";60>g&&(p="#ff2a2a");var q=parseInt(g/60)+"\u5206"+g%60+"\u79d2";l.time=g;l.sTime=q;l.sColor=p;l.index=m[2];l.Describe=l.Describe.replace(/%s/,m[0]);c.push(l)}}this.root.list_buffinfo.array=c;n.isNewBuff=!1;this.root.list_buffinfo.refresh()}};a.buffCountDown=function(){for(var b=
this.root.list_buffinfo._cells,d=0;d<b.length;d++){var n=b[d].getChildByName("buff_time");n&&n.text&&n.time&&0<n.time&&(n.time--,n.text=parseInt(n.time/60)+"\u5206"+n.time%60+"\u79d2")}};a.closeBuff=function(){var b=ObjectManage.findobject(g_buffOnwerId);b&&(b.isNewBuff=!0);this.root.bg_buff.visible=!1;g_buffOnwerId=0};a.setMoneyShow=function(){for(var b=g_GameConfigWEB.h5DIYGolds,d=!0,n=0;n<b.length;n++){var c=b[n];if(c&&1==c.topDsp)if(d)this.root.img_showgold.skin=c.showUI,this.root.txt_showgoldname.text=
c.goldName+":",this.showGold1=eval(c.varName),d=!1;else{this.root.img_showgold1.skin=c.showUI;this.root.txt_showgoldname1.text=c.goldName+":";this.showGold2=eval(c.varName);break}}this.updateShowGold()};a.item_hint=function(b,d,n,c){if(b){var h=new Laya.Text;h.fontSize=16;h.stroke=1;h.strokeColor="#000000";1==n?(h.text="\u83b7\u5f97\u7ecf\u9a8c "+Math.abs(d),h.color="#00FF00"):2==n?(h.text="\u6280\u80fd "+b+" \u589e\u52a0\u719f\u7ec3\u5ea6 "+Math.abs(d),h.color="#00FF00"):3==n?(h.text="\u83b7\u5f97\u65b0\u6280\u80fd; "+
b,h.color="#00FF00"):4==n?(h.attrMode=!0,h.text="\u751f\u547d\u503c"==b||"\u9b54\u6cd5\u503c"==b?b+"\uff1a+ "+d:b+"\uff1a+ "+c+"-"+d,h.color="#00FF00"):0<d?(h.text="\u83b7\u5f97\u7269\u54c1\uff1a"+b.s.Name+" x"+Math.abs(d),h.color="#00FF00"):(h.text="\u6d88\u8017\u7269\u54c1\uff1a"+b.s.Name+" *"+Math.abs(d),h.color="#FF0000");this.hintTxtList.push(h);7<this.hintTxtList.length&&this.hintTxtList.shift();2>this.hintTxtList.length&&this.makeHintRoll()}};a.makeHintRoll=function(){if(0<this.hintTxtList.length){var b=
this.hintTxtList[0];b.pos(10,390);var d=340;b.attrMode&&(b.pos(Laya.stage.width-300,200),d=100);Laya.stage.addChild(b);var n=this;Laya.Tween.to(b,{y:d},1E3,null,Laya.Handler.create(this,function(){b.destroy()}));Laya.timer.once(400,this,function(){n.hintTxtList.shift();n.makeHintRoll()})}};a.changeNpcTipBubble=function(b,d){this.root.npc_tipBubble.visible=!0;b!=this.root.npcBubbleName.text&&(this.root.npc_tipBubble.offAll(Laya.Event.CLICK),this.root.npc_tipBubble.on(Laya.Event.CLICK,this,this.onClickNpcTipBubble.bind(this,
d)));this.root.npcBubbleName.text=b?b:""};a.onClickNpcTipBubble=function(b){b&&Laya.stage.event("ClickNPC",[b,1,void 0])};a.hideNpcTipBubble=function(){this.root.npc_tipBubble.visible=!1};a.dragItemHandle=function(b){g_canReceiveDrag=!1;this.dragLayer||(this.dragLayer=new Laya.Sprite,this.dragLayer.x=this.dragLayer.y=0,this.dragLayer.width=Laya.stage.width,this.dragLayer.height=Laya.stage.height,this.dragLayer.name="dragLayer",Laya.stage.addChild(this.dragLayer));if(this.dragLayer){g_dragItemData=
b;this.dragLayer.visible=!0;if(!this.dragLayer._childs[0]){var d=new Laya.Image;d.name="dragItem";this.dragLayer.addChild(d)}if(d=this.dragLayer._childs[0])d.visible=!0,d.x=Laya.stage.mouseX,d.y=Laya.stage.mouseY,d.skin=b.skinRes,GameUtil.loadImg((0<g_dragItemData.itemData.length?g_dragItemData.itemData[b.indexInList]:g_dragItemData.itemData).s.Looks,"items",function(n){d.skin=n});this.dragLayer.on(Laya.Event.MOUSE_MOVE,this,this.dragItemMoveHandle);this.dragLayer.on(Laya.Event.MOUSE_UP,this,this.clearDragItem)}};
a.dragItemMoveHandle=function(b){this.dragLayer&&(b=this.dragLayer._childs[0])&&"dragItem"==b.name&&(b.x=Laya.stage.mouseX-b.width/2,b.y=Laya.stage.mouseY-b.height/2)};a.clearDragItem=function(b){b=b.target;g_canReceiveDrag=!0;b.off(Laya.Event.MOUSE_MOVE,this,this.dragItemMoveHandle);b.off(Laya.Event.MOUSE_UP,this,this.clearDragItem);b.visible=!1;this.dragLayer.visible=!1;b.destroy();this.dragLayer.destroy();this.dragLayer=null;g_dragOnItem=!1;Laya.stage.event("restoreListScroll");if(cur_use_app||
2==g_Termial)Laya.stage.event("bagCheckDragItem"),Laya.stage.event("wareHouseCheckDragItem"),Laya.stage.event("jiaoyiCheckDragItem"),Laya.stage.event("shortCheckDragItem"),Laya.stage.event("OkCheckDragItem"),Laya.stage.event("humanCheckDragItem"),Laya.stage.event("ShoushiCheckDragItem"),Laya.stage.event("shenyouCheckDragItem"),Laya.stage.event("fashionCheckDragItem");setTimeout(function(){g_dragOnItem||(g_dragItemData&&g_dragItemData.dragItemType==DragItem.dragItemType.bagItem?GameUtil.checkItemCanBreakUp(g_dragItemData.itemData)&&
g_dragItemData.itemData&&1<g_dragItemData.itemData.Dura?(Laya.stage.event("throwOnTheGround",g_dragItemData.itemData),Laya.stage.event("showItemExceptBgFrame",!0)):Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u786e\u5b9a\u8981\u4e22\u5f03\u7269\u54c1\u5417\uff1f",callfn:function(){g_canReceiveDrag=!1;Laya.stage.event("throwOnTheGround",g_dragItemData.itemData);Laya.stage.event("showItemExceptBgFrame",!0)},callcancelfun:function(){g_canReceiveDrag=!1;Laya.stage.event("showItemExceptBgFrame")}}]):
(g_canReceiveDrag=!1,Laya.stage.event("showItemExceptBgFrame")))},200)};a.getBagPos=function(b,d){this.bagTargetPos||(b||(b=0),d||(d=0),this.bagTargetPos=new Laya.Point(this.root.btn_bag0.x+(this.root.btn_bag0.width-b)/2,this.root.btn_bag0.y+(this.root.btn_bag0.height-d)/2));return this.bagTargetPos};a.pickGoodsAnimHandler=function(b){if(b&&b.url&&this.parent&&this.parent.maplayer){var d=new Laya.Sprite,n=this.parent.maplayer;d.x=b.x+n.x-20;d.y=b.y+n.y-20;d.loadImage(b.url,0,0);this.addChild(d);b=
this.getBagPos(d.width,d.height);var c=Laya.Tween.to(d,{x:b.x,y:b.y},1E3,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(h){Laya.Tween.to(h,{alpha:0},500,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){h.removeSelf();Laya.Tween.clear(c)}))},[d]))}};a.onClickOther=function(b){b&&b.target&&Sendmessage.SendGameMainBtnMsg(g_GameMainOtherBtns[b.target.name])};a.onRank=function(){Laya.stage.event("openUIRankWin")};a.addLeaderBoss=function(){Animationmodule.playframe(!1,this.root.leaderBox,
"gameres/animation/leaderBoss/",0,8,100,!0,!1).name="leaderBoss"};a.limitActivityBtnAnimHander=function(b){b?Animationmodule.playframe(!1,this.root.limitActivityBtn,"gameres/animation//",1,9,100,!0,!1).name="limitActivityBtn":Animationmodule.removeAniname("limitActivityBtn")};a.bagMaxTip=function(b){this.root.bagMax.visible=b};a.toRecyleWin=function(){GameUtil.ShowNewBag(!0);Sendmessage.SendGameMainBtnMsg("\u80cc\u5305\u56de\u6536")};a.initTargetBox=function(){this.initTargetList();this.selectTargetIdx;
this.curLockID;this.lastLockId};a.onClickTargetBtn=function(){this.root.target_box.visible=!this.root.target_box.visible;if(this.root.target_box.visible)this.onClickTargetPlayer()};a.onClickTargetPlayer=function(){this.lastLockId=this.curLockID=this.selectTargetIdx=void 0;this.isTargetPlayer=!0;this.root.target_list.array=this.getCurTargetData(!0);this.root.target_list.refresh()};a.onClickTargetMonster=function(){this.lastLockId=this.curLockID=this.selectTargetIdx=void 0;this.isTargetPlayer=!1;this.root.target_list.array=
this.getCurTargetData(!1);this.root.target_list.refresh()};a.refreshTargetList=function(){if(this.isUpdateHum()||this.isUpdateMonster())void 0!=this.selectTargetIdx&&null!=this.selectTargetIdx&&(this.lastLockId=this.root.target_list.array[this.selectTargetIdx].value),this.curLockID=this.selectTargetIdx=void 0,this.root.target_list.array=this.isTargetPlayer?this.getCurTargetData(!0):this.getCurTargetData(!1),this.root.target_list.refresh()};a.isUpdateHum=function(){if(!this.isTargetPlayer)return!1;
if(!this.root.target_list.array)return!0;var b=this.getCurTargetData(!0),d=this.root.target_list.array;if(b.length!=d.length)return!0;for(var n=0;n<d.length;n++)if(d[n].key!=b[n].key)return!0};a.isUpdateMonster=function(){if(this.isTargetPlayer)return!1;if(!this.root.target_list.array)return!0;var b=this.getCurTargetData(!1),d=this.root.target_list.array;if(b.length!=d.length)return!0;for(var n=0;n<d.length;n++)if(d[n].key!=b[n].key)return!0};a.getCurTargetData=function(b){return this.SimpleScreen?
b?this.SimpleScreen.humArray:this.SimpleScreen.monArray:[]};a.initTargetList=function(){var b=this.root.target_list;b.vScrollBarSkin="";b.renderHandler=new Laya.Handler(this,this.updateTargetListItem);b.mouseHandler=new Laya.Handler(this,this.clickTargetListItem)};a.updateTargetListItem=function(b,d){if(b.dataSource){var n=b._childs,c=n[0],h=n[1],m=n[2],g=n[3];n=n[5];c.visible=this.selectTargetIdx&&this.selectTargetIdx==d;c.visible||(c.visible=this.lastLockId&&this.lastLockId==b.dataSource.value);
h.visible=!1;m.skin=this.isTargetPlayer?"gameres/ui/rw-.png":"gameres/ui/gw-.png";g.text=b.dataSource.key;n.width=2.08*b.dataSource.hpRate}};a.refreshTargetHp=function(b){for(var d=void 0,n=this.root.target_list.array,c=0;c<n.length;c++){var h=n[c];lockingID&&lockingID==h.value&&(d=c)}void 0!=d&&this.root.target_list._childs[0]&&(d=this.root.target_list._childs[0]._childs[d])&&(d._childs[5].width=2.08*b)};a.clickTargetListItem=function(b,d){if("click"==b.type){this.lastLockId=void 0;var n=this.selectTargetIdx!=
d;this.selectTargetIdx=d;d=this.root.target_list._childs[0]._childs;for(var c in d)d[c]._childs[0].visible=!1;b.target._childs[0].visible=!0;n?(this.curLockID=void 0,(b=ObjectManage.findobject(b.target.dataSource.value))&&GameUtil.addhalo(b)):(GameUtil.delhalo(lockingID),ObjectManage.resetLockID(),GameUtil.resetBackupLockID(),g_boMagicGood=!1)}}})();this.SimpleScreen;
var UIRecharge=function(e){function f(){f.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya.class(f,"UIRecharge",rechargeUI);f.prototype.init=function(){this.rate=1;this.name="\u5143\u5b9d";this.weburl=null;this.textlist=[];this.pricelist=[];this.loadertxt();this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_close.on(Laya.Event.CLICK,this,this.close);this.price0.on(Laya.Event.CLICK,this,this.charge);this.price1.on(Laya.Event.CLICK,this,this.charge);this.price2.on(Laya.Event.CLICK,
this,this.charge);this.price3.on(Laya.Event.CLICK,this,this.charge);this.price4.on(Laya.Event.CLICK,this,this.charge);this.price5.on(Laya.Event.CLICK,this,this.charge);this.price6.on(Laya.Event.CLICK,this,this.charge);this.price7.on(Laya.Event.CLICK,this,this.showCustom);this.custom_pay_ok.on(Laya.Event.CLICK,this,this.customOK);this.custom_pay_cel.on(Laya.Event.CLICK,this,this.customCancel);this.btn_closePay.on(Laya.Event.CLICK,this,this.closePay);this.custom_value.on(Laya.Event.INPUT,this,this.customValut);
this.btn_wx.on(Laya.Event.CLICK,this,this.onpay,[2001]);this.btn_zfb.on(Laya.Event.CLICK,this,this.onpay,[1001]);this.min_value=10};f.prototype.customValut=function(){""!=this.custom_value.text&&1>Number(this.custom_value.text)&&(this.custom_value.text=this.min_value)};f.prototype.customOK=function(){var b=Number(this.custom_value.text);b<this.min_value?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u6700\u5c0f\u91d1\u989d\u4e3a\uff1a"+this.min_value,callfn:function(){}}]):0<b&&(this.charge(b,
b*this.rate),this.customCancel())};f.prototype.customCancel=function(){this.custom.visible=!1};f.prototype.showCustom=function(){this.custom.visible=!0;this.custom_value.text=this.min_value;this.custom_value.focus=!0};f.prototype.onpay=function(b){if(cur_use_app&&conchConfig&&this.weburl){if(0==cur_game_type){var d=conchConfig.getOS(),n;"Conch-ios"==d?n=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==d&&(n=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));var c=Charge_Value.split("\r\n");
var h=this.weburl.split("a=");if(2<=h.length&&2<=c.length){var m=h[1].split("&")[0];h={};h.areaid=m;h.uid=dataFromRoleScene.uid;h.yuanbao=this.lb_yuanbao.text;h.money=this.lb_money.text;h.type=b;h.url=c[1];b=JSON.stringify(h);"Conch-ios"==d?n.call("gotopay:",b):"Conch-android"==d&&n.call("gotopay",b)}}}else console.log("------------------no conchConfig-----------------------"),3==this.type&&callpayforuu(this.lb_yuanbao.text,b)};f.prototype.closePay=function(){this.pay_Panel.visible=!1};f.prototype.charge=
function(b,d){var n=d?b:b.target.num;b=d?d:b.target.body;switch(cur_game_type){case 0:this.pay_Panel.visible=!0;this.lb_yuanbao.text=b;this.lb_money.text=n;this.product_name.text=this.name;this.product_name2.text=this.name;break;case 3:MRGamePay(b,this.name,this.rate,n);break;case 4:MRGameH5Pay(100*n,this.name);break;case 5:YXFH5SDKPay(n);break;case 7:openPayInShaHe(b,this.name,this.rate,n);break;default:quicksdkpay(playerID,g_RoleName,g_levelForCaiji,b,n,this.name)}};f.prototype.onMouseDown=function(b){a.x=
b.stageX;a.y=b.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseMove=function(b){this.img_bg.x+=b.stageX-a.x;this.img_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};f.prototype.close=function(){this.removeSelf()};f.prototype.loadertxt=function(){this.textlist.push(this.text0,
this.text1,this.text2,this.text3,this.text4,this.text5,this.text6);this.pricelist.push(this.price0,this.price1,this.price2,this.price3,this.price4,this.price5,this.price6)};f.prototype.update3Money=function(b){this.name=b.data.currency;this.type=3;for(var d=0;d<this.pricelist.length;d++)this.pricelist[d].num=b.data.amount[d]*b.data.ratio,this.pricelist[d].body=b.data.amount[d],this["money"+d].text="\uffe5"+b.data.amount[d],this.textlist[d].text=b.data.amount[d]*b.data.ratio+this.name};f.prototype.update2Money=
function(b){console.log("---\x3e ",b);var d="";b=b.split("|");2==b.length&&(d=b[1].split(","),this.name=d[0],this.type=b[0],this.rate=d[1]);3==b.length&&(d=b[2].split(","),this.name=b[1],this.type=b[0],this.rate=d[1]);for(b=0;b<this.pricelist.length;b++){var n="";d[b+2]&&(n=d[b+2].split(":"));n&&2<=n.length&&(this.pricelist[b].num=n[1],this.pricelist[b].body=n[0],this["money"+b].text="\uffe5"+n[1],this.textlist[b].text=n[0]+d[0])}};f.prototype.updateMoney=function(b){console.log("---\x3e ",b);if(b.load){this.name=
b.area._charge_scale[0].name;this.rate=b.area._charge_scale[0].rate;for(var d=0;d<this.pricelist.length;d++){var n=b.area.custom_amount[d].amount;this.pricelist[d].labelSize=20;this.pricelist[d].labelColors="#f1c055";this.pricelist[d].num=n;this.pricelist[d].body=n*this.rate;this["money"+d].text="\uffe5"+n;this.textlist[d].text=n*this.rate+this.name}this.min_value=Number(b.gmaster.min_charge_amount);this.custom_value.text=this.min_value}else console.log("---\u65e0\u6548\u6570\u636e----")};return f}(rechargeUI),
UIRedPak=function(e){function f(){f.__super.call(this);this.Init()}new Laya.Point(0,0);Laya.class(f,"UIRedPak",RedPakUI);e=f.prototype;e.Init=function(){this.start()};e.start=function(){this.redPackOpenWin;this.curPage=0;this.selectedData;this.startpos=new Laya.Point;Laya.stage.on("closeRedPack",this,this.onMouseDownBut);Laya.stage.on("main_GetRedPackList",this,this.GetRedPackList);Laya.stage.on("openRedPack",this,this.openRedPack);this.sendRedPack_btn.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownOpenSend);
this.redPackLeftArrow_btn.on(Laya.Event.CLICK,this,this.changePage.bind(this,!1));this.redPackRightArrow_btn.on(Laya.Event.CLICK,this,this.changePage.bind(this,!0));this.initList();this.GetRedPackList()};e.changePage=function(a){a?this.curPage++:this.curPage--;this.updateRedPackList()};e.showSwitchPageArrow=function(){this.redPackLeftArrow_btn.selected=0==this.curPage;this.redPackLeftArrow_btn.mouseEnabled=!this.redPackLeftArrow_btn.selected;this.redPackRightArrow_btn.selected=this.curPage==this.getLastPage();
this.redPackRightArrow_btn.mouseEnabled=!this.redPackRightArrow_btn.selected};e.getLastPage=function(){return GameUtil.valueLimit(Math.ceil(g_RedPack_List.length/5)-1)};e.getDataInCurPage=function(a){if(5>=g_RedPack_List.length)return g_RedPack_List;var b=[],d=g_RedPack_List.length;for(a*=5;a<d;a++)b.push(g_RedPack_List[a]);return b};e.getFinalMoneyType=function(a){switch(a){case 0:var b=3;break;case 1:b=1;break;case 2:b=5;break;case 3:b=6;break;case 4:b=7;break;case 5:b=8}return b};e.initList=function(){this.redPack_list.repeatX=
1;this.redPack_list.repeatY=5;this.redPack_list.selectEnable=!0;this.redPack_list.selectHandler=new Laya.Handler(this,this.clickItem);this.redPack_list.renderHandler=new Laya.Handler(this,this.updateItem)};e.updateRedPackList=function(){this.redPack_list.array=this.getDataInCurPage(this.curPage);this.redPack_list.refresh();this.showSwitchPageArrow()};e.GetRedPackList=function(){this.updateRedPackList(g_RedPack_List);this.curRedPackNum_lab.changeText(g_RedPack_List.length+"/50")};e.updateItem=function(a,
b){if(a.dataSource){var d=a.dataSource,n=a._childs[1],c=a._childs[2],h=a._childs[3],m=a._childs[5],g=a._childs[6],l=a._childs[7],p=l._childs[0],q=l._childs[2],r=a._childs[8],u=a._childs[10];a._childs[0].skin=b==this.redPack_list.selectedIndex?"gameres/png/bg1.png":"gameres/png/bg2.png";n.skin=d.bOpened?"gameres/ui/redpak_redbag1.png":"gameres/ui/redpak_redbag0.png";c.changeText(d.nRedPacketTime);c.color=d.bOpened?"#e0dedb":"#f47c12";h.changeText(this.getAreaName(d.nType));h.color=this.getAreaColor(d.nType);
""!=d.sMsg&&m.changeText(d.sMsg);p.changeText(d.sUserName);q.changeText(d.nGoldNum+GameUtil.getCurrencyByGoldType(this.getFinalMoneyType(d.nGoldType)));a=this.getHadNum(d.OpenRedPacket);r.visible=0!=d.nRedPacketCount&&d.nRedPacketCount==a;r.clickName||(r.clickName="clickName",r.on(Laya.Event.CLICK,this,this.onRedPackOperation.bind(this,d,b,a)));g.clickName||(g.clickName="clickName",g.on(Laya.Event.CLICK,this,this.onRedPackOperation.bind(this,d,b,a)));g.visible=!r.visible;g.skin=d.bOpened?"gameres/ui/redPack_opened.png":
"gameres/ui/redPack_rob.png";u.changeText(this.getLastRedPackNum(d.nRedPacketCount,a,d.redPackNum));l.refresh()}};e.getLastRedPackNum=function(a,b,d){return 0<a?a-b+"":d?d:"0"};e.getAreaName=function(a){switch(a){case 0:return"[\u884c\u4f1a]";case 1:return"[\u961f\u4f0d]";case 2:return"[\u56fd\u5bb6]";case 3:return"[\u5168\u670d]";case 4:return"[\u597d\u53cb]"}};e.getAreaColor=function(a){switch(a){case 0:return"#fffe03";case 1:return"#ffffff";case 2:return"#ffffff";case 3:return"#fb0404";case 4:return"#ffffff"}};
e.getHadNum=function(a,b,d){for(var n=d=0;100>n;n++)if(""!=a[n].sUserName&&(d++,b&&-1<b.indexOf(a[n].sUserName)))return-1;return d};e.onRedPackOperation=function(a,b,d){g_RedPackIndex=b;g_RedPack_List[5*this.curPage+b].bOpened=!0;g_RedPackOpen=this.redPack_list.array[b].nRedRecog;this.selectedData=this.redPack_list.array[b];openRed=!0;Sendmessage.sendOpenRedPack(g_RedPackOpen)};e.openRedPack=function(a){this.redPackOpenWin=GameUtil.openWin(this.redPackOpenWin,this,UIRedPackOpen);if(this.selectedData){var b=
this.selectedData;Laya.stage.event("redPackOpen",[this.getHeadIcon(b.ownerGender,b.ownerJob),b.sUserName,b.sMsg,a+GameUtil.getCurrencyByGoldType(this.getFinalMoneyType(b.nGoldType))])}};e.getObtainMoney=function(a,b){b=void 0===b?0:b;for(var d,n=ObjectManage.findobject(playerID).txt_name.text,c=0;c<a.length;c++)if(d=a[c].sUserName,-1<d.indexOf(n))return a[c].nGoldValue;return b};e.getHeadIcon=function(a,b){return"gameres/ui/redpack_img-"+a+b+".png"};e.clickItem=function(a,b){if("click"==a.type)for(var d=
0;d<this.redPack_list._childs.length;d++)d==b?a.target.getChildByName("selectBg_img").skin="gameres/png/bg1.png":this.redPack_list._childs[d].getChildByName("selectBg_img").skin="gameres/png/bg2.png"};e.onMouseDownBut=function(){this.visible=!1;this.redPackOpenWin&&(this.redPackOpenWin.visible=!1)};e.onMouseDownOpenSend=function(){var a=GameUtil.InstanceOfMem(fsredpackUI);a||(a=new UIFPack,Laya.stage.addChild(a))};return f}(RedPakUI);
(function(e){function f(a,b,d,n,c,h){f.__super.call(this);this.labSelectInfo.on(Laya.Event.CLICK,this,this.LabClick);this.labchat.on(Laya.Event.CLICK,this,this.LabClick);this.labshieldchat.on(Laya.Event.CLICK,this,this.LabClick);this.ResetUI(a,b,d,n,c,h)}Laya.class(f,"UIRoleMenu",e);e=f.prototype;e.ResetUI=function(a,b,d,n,c,h){-1!=d.indexOf("\n")&&(d=d.split("\n"),d=d[d.length-1]);this.record=n;this.name=d;this.menu.x=c;this.menu.y=h;this.role_x=a;this.role_y=b;this.labName.text="\u540d\u5b57\uff1a"+
d;this.labhanghu.color="#9e9e9e";this.labhanghu.off(Laya.Event.CLICK,this,this.LabClick);ObjectManage.findobject(playerID).grildname&&(this.labhanghu.color="#f6fbb6",this.labhanghu.on(Laya.Event.CLICK,this,this.LabClick));this.labaddfriend.on(Laya.Event.CLICK,this,this.LabClick);this.labaddfriend.color="#f6fbb6";for(a=0;a<G_Friend_List.length;a++)G_Friend_List[a].split(",")[0]==this.name&&(this.labaddfriend.off(Laya.Event.CLICK,this,this.LabClick),this.labaddfriend.color="#9e9e9e");this.labteam.on(Laya.Event.CLICK,
this,this.LabClick);this.labteam.color="#f6fbb6";for(a=0;a<G_Team_Grop_List.length;a++)G_Team_Grop_List[a].split(";")[0]==this.name&&(this.labteam.off(Laya.Event.CLICK,this,this.LabClick),this.labteam.color="#9e9e9e");this.labshieldchat.text="\u5c4f\u655d\u53d1\u8a00";for(a=0;a<G_PRIVATE_CHAT_list.length;a++)G_PRIVATE_CHAT_list[a]==this.name&&(this.labshieldchat.text="\u89e3\u9664\u53d1\u8a00");this.autoWidth();this.autoPos()};e.LabClick=function(a){switch(a.target.name){case "labSelectInfo":Sendmessage.sendQueryState(this.record,
this.role_x/48,this.role_y/32);break;case "labchat":Laya.stage.event("show_chat_dlg",["/"+this.name+" ",!0]);break;case "labaddfriend":Sendmessage.FriendOpition(1,this.name);break;case "labhanghu":Sendmessage.GuildOperate(10,this.name);break;case "labteam":1<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(this.name):Sendmessage.sendCreateGroup(this.name);break;case "labshieldchat":a=null;for(var b=0;b<G_PRIVATE_CHAT_list.length;b++)G_PRIVATE_CHAT_list[b]==this.name&&(a=b);null==a?G_PRIVATE_CHAT_list.push(this.name):
G_PRIVATE_CHAT_list.splice(a,1)}this.visible=!1};e.autoWidth=function(){for(var a=0,b=0;b<this.menu._childs.length;b++)a=Math.max(a,this.menu._childs[b].width);this.menu.width=a+20};e.autoPos=function(){this.menu.x+this.menu.width>Laya.stage.width&&(this.menu.x-=this.menu.x+this.menu.width-Laya.stage.width);this.menu.y+this.menu.height>Laya.stage.height&&(this.menu.y-=this.menu.y+this.menu.height-Laya.stage.height)}})(RoleMenuUI);
var UISendPak=function(e){function f(){f.__super.call(this);this.Init()}function a(){a.__super.call(this);this.size(500,50);this.y=6;this.lb_Name=new Laya.Label;this.lb_Gold=new Laya.Label;this.lb_date=new Laya.Label;this.lb_Msg=new Laya.Label;this.lb_luck=new Laya.Label;this.img_Logo=new laya.ui.Image("gameres/ui/redpak_redbag0.png");this.img_Logo.x=0;this.img_Logo.y=0;this.lb_Name.x=this.img_Logo.x+33;this.lb_Name.y=this.img_Logo.y;this.lb_Name.color="#ffffff";this.lb_Name.fontSize=16;this.lb_Gold.x=
this.lb_Name.x+150;this.lb_Gold.y=this.lb_Name.y;this.lb_Gold.color="#ffffff";this.lb_Gold.fontSize=16;this.lb_date.x=this.lb_Gold.x+150;this.lb_date.y=this.lb_Gold.y;this.lb_date.color="#ffffff";this.lb_date.fontSize=16;this.lb_Msg.x=this.lb_Name.x;this.lb_Msg.y=this.lb_Name.y+18;this.lb_Msg.color="#ffffff";this.lb_Msg.fontSize=16;this.lb_luck.x=this.lb_Name.x;this.lb_luck.y=this.lb_Name.y+18;this.lb_luck.color="#ffffff";this.lb_luck.fontSize=16;this.addChild(this.lb_Name);this.addChild(this.lb_Gold);
this.addChild(this.lb_date);this.addChild(this.lb_Msg);this.addChild(this.lb_luck);this.addChild(this.img_Logo);this.settxt=function(l,p){p=" \u91d1\u5e01";switch(d){case 0:p=g_GameGoldNum.key;break;case 1:p=g_GameCionNum.key;break;case 2:p=g_GamePointNum.key;break;case 3:p=g_nGameDiamond.key;break;case 4:p=g_nGameGird.key;break;case 5:p=g_gameGlory.key}this.lb_Name.text=l.sUserName;this.lb_Gold.text="\u83b7\u5f97 "+l.nGoldValue+p;this.lb_date.text=l.sTime;this.lb_Msg.text="\u7559\u8a00\uff1a"+l.sNote;
l.sUserName==g&&""!=l.sNote&&(m.Editinput.disabled=!0,m.but_send.disabled=!0);n==l.sUserName&&c&&(this.lb_luck.x=this.lb_date.x,this.lb_luck.text="\u6700\u4f73\u624b\u6c14\uff01")}}new Laya.Point(0,0);var b=-1,d=0,n="",c=!1,h=-1,m=null,g="";Laya.class(f,"UISendPak",SendRedPackUI);e=f.prototype;e.Init=function(){m=this;this.start()};e.start=function(){this.startpos=new Laya.Point;Laya.stage.on("send_GetRedPackList",this,this.GetRedPackList);this.SendRpakWin.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);
this.but_close.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);this.but_send.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownSendMsg);this.GetRedPackList();this.Editinput.on(Laya.Event.FOCUS,this,this.OnFocus);this.Editinput.on(Laya.Event.BLUR,this,this.OnBlur)};e.OnFocus=function(){cur_use_app&&(this.SendRpakWin.top=-20)};e.OnBlur=function(){cur_use_app&&(this.SendRpakWin.y=68)};e.onMouseDownSendMsg=function(){if(15<this.Editinput.text.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7559\u8a00\u4e0d\u80fd\u8d85\u8fc715\u4e2a\u5b57\uff01",
callfn:function(){}}]);else if(1<=this.Editinput.text.length){var l=ObjectManage.findobject(playerID);l&&l.txt_name&&(Sendmessage.sendRedPackMsg(g_RedPack_List[h].nRedRecog,l.txt_name.text+" "+this.Editinput.text),g=l.txt_name.text,this.Editinput.disabled=!0)}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7559\u8a00\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}])};e.onMouseDownBut=function(){this.visible=!1};e.GetRedPackList=function(){this.send_list.repeatX=1;this.send_list.repeatY=
6;this.send_list.vScrollBarSkin="gameres/ui/vscroll.png";this.send_list.itemRender=a;this.send_list.selectEnable=!0;this.send_list.selectHandler=new Laya.Handler(this,this.select);this.send_list.renderHandler=new Laya.Handler(this,this.UpdateItem);var l=[],p=0,q=0;c=!1;for(var r=0;r<g_RedPack_List.length;r++)if(g_RedPack_List[r].nRedRecog==g_RedPackOpen){for(var u=0;100>u;u++)""!=g_RedPack_List[r].OpenRedPacket[u].sUserName&&(g_RedPack_List[r].OpenRedPacket[u].nGoldValue>q&&(q=g_RedPack_List[r].OpenRedPacket[u].nGoldValue,
n=g_RedPack_List[r].OpenRedPacket[u].sUserName),l.push(g_RedPack_List[r].OpenRedPacket[u]),p++);u=g_RedPack_List[r].nRedPacketCount;0!=u&&p>=u&&(c=!0);h=r;break}if(-1!=h){u="";switch(g_RedPack_List[h].nType){case 0:u="[\u884c\u4f1a]";break;case 1:u="[\u961f\u4f0d]";break;case 2:u="[\u56fd\u5bb6]";break;case 3:u="[\u5168\u670d]";break;case 4:u="[\u597d\u53cb]"}d=g_RedPack_List[h].nGoldType;this.send_list.array=l.filter(function(v){return v.nGoldValue&&v.sTime&&v.sUserName});this.lb_name.text=g_RedPack_List[h].sUserName+
" \u7684\u7ea2\u5305 "+u;this.lb_smsg.text=g_RedPack_List[h].sMsg;this.lb_count.text=g_RedPack_List[h].nRedPacketCount+" \u4e2a\u7ea2\u5305\uff0c\u5df2\u5206\u6d3e\u4e86 "+p+" \u4e2a"}p=ObjectManage.findobject(playerID);r=!0;for(u=0;u<l.length;++u)if(q=l[u],p&&p.txt_name&&q.sUserName==p.txt_name.text&&""==q.sNote){r=!1;break}r?(m.Editinput.disabled=!0,m.but_send.disabled=!0):(m.Editinput.disabled=!1,m.but_send.disabled=!1)};Laya.class(a,"Sendpakitem",Laya.Box);e.UpdateItem=function(l,p){l.settxt(l.dataSource,
p);p==b?(l.lb_Name.color="#ff0000",l.lb_Gold.color="#ff0000",l.lb_date.color="#ff0000",l.lb_Msg.color="#ff0000"):(l.lb_Name.color="#ffffff",l.lb_Gold.color="#ffffff",l.lb_date.color="#ffffff",l.lb_Msg.color="#ffffff")};e.select=function(l){b=l;var p=this.send_list.getCell(l);p&&g_RedPack_List[l]&&!g_RedPack_List[l].bOpened&&(p.img_Logo.skin="gameres/ui/redpak_redbag0.png",g_RedPack_List[l].bOpened=!0,this.send_list.array[l]=g_RedPack_List[l])};e.onMouseDown=function(l){this.send_list.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)||(this.startpos.x=l.stageX,this.startpos.y=l.stageY,this.SendRpakWin.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.SendRpakWin.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.SendRpakWin.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};e.onMouseUp=function(){this.SendRpakWin.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(l){this.SendRpakWin.x+=l.stageX-this.startpos.x;this.SendRpakWin.y+=l.stageY-this.startpos.y;this.startpos.x=l.stageX;this.startpos.y=
l.stageY};return f}(SendRedPackUI);
(function(){function e(){e.__super.call(this);this.CurSelectItem=this.LastSelectItemNode=null;this.CurSelectNum=1;this.Cur_Select_Page_Type=0;this.CanDragMove=!1;this.StartDragPos=new Laya.Point(0,0);this.baseKey="gameres/ui/";this.resList=[];this.resSelList=[];this.btnList=[];this.Init()}Laya.class(e,"UIShop",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("update_items",this,this.UpdateItems);Laya.stage.on("UpDown",this,this.BtnUpDown);this.ResLoaded()};f.UpdateItems=function(a){void 0!=
this.root&&(a?this.DrawItems():this.DrwaStrangeItems())};f.ResLoaded=function(){this.resList.push(this.basePath+"00863.png");this.resList.push(this.basePath+"00866.png");this.resList.push(this.basePath+"00869.png");this.resList.push(this.basePath+"00872.png");this.resList.push(this.basePath+"00875.png");this.resSelList.push(this.basePath+"00864.png");this.resSelList.push(this.basePath+"00867.png");this.resSelList.push(this.basePath+"00870.png");this.resSelList.push(this.basePath+"00873.png");this.resSelList.push(this.basePath+
"00876.png");this.root=new NpcShopUI;Laya.stage.addChild(this.root);for(var a=1;11>a;a++){if(6>a)this.root.getChildByName("pane_qz_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("pane_"+a).on(Laya.Event.CLICK,this,this.BtnClick)}this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.OnDragStart);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.OnDragMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.OnDragEnd);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_OUT,
this,this.OnDragEnd);this.btnList.push(this.root.getChildByName("btn_zhuagnshi"));this.btnList.push(this.root.getChildByName("btn_buji"));this.btnList.push(this.root.getChildByName("btn_qianghua"));this.btnList.push(this.root.getChildByName("btn_haoyou"));this.btnList.push(this.root.getChildByName("btn_xianliang"));this.ResetUI();this.ResetBtnRes("btn_zhuagnshi")};f.ResetBtnRes=function(a){for(var b=0;b<this.btnList.length;b++)this.btnList[b].selected=a==this.btnList[b].name?!0:!1};f.OnDragStart=
function(){if(this.root.getChildByName("img_bg").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=a.x;this.StartDragPos.y=a.y;this.CanDragMove=!0}};f.OnDragMove=function(){if(0!=this.CanDragMove)if(this.root.getChildByName("img_bg").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.parent.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.StartDragPos.x)*
g_BaseScale;this.root.y=(a.y-this.StartDragPos.y)*g_BaseScale}else this.CanDragMove=!1};f.OnDragEnd=function(){this.CanDragMove=!1};f.Update=function(){if(this.root)for(var a=ItemMgr.getInstance().ShopItemList,b=0;b<a.length;b++){var d=this.root.getChildByName("pane_"+(b+1)).getChildByName("img_item");if(a[b]&&a[b].eff_list&&d&&""!=d.skin){if(d._childs[0].skin=a[b].eff_list[a[b].eff_idx],a[b].eff_idx++,a[b].eff_idx>=a[b].eff_list.length&&(a[b].eff_idx=0),a[b])for(var n=0;n<a[b].eff_list.length;n++){var c=
-d._childs[0].height/2+13;d._childs[0].x=-d._childs[0].width/2+12+a[b].offset_list[n].x;d._childs[0].y=c+a[b].offset_list[n].y}}else d&&d._childs[0]&&(d._childs[0].skin="")}};f.LoadItemEffect=function(a,b){var d=a.s.EffectStartOffSet;if(0<d){var n=new Laya.Image;n.blendMode="overlay";b&&b.addChild(n);a.eff_list=[];a.offset_list=[];a.eff_idx=0;for(b=d;b<d+a.s.EffectImageCount;b++){n="/";for(var c=b.toString().length;5>c;c++)n+="0";n+=b+".png";a.eff_list.push("data/"+g_pak_list[a.s.EffectFileIndex]+
n);a.offset_list.push(Offsetmodule.getoffset(g_pak_list[a.s.EffectFileIndex],b));Laya.loader.load(a.eff_list,Laya.Handler.create(this,function(){}),null,Laya.Loader.IMAGE)}}};f.DrawItems=function(){function a(){for(var c=0;10>c;c++){var h="pane_"+(c+1),m=n.root.getChildByName(h).getChildByName("img_item");if(b[c]){var g=GameMission.getUrl("items",b[c].s.Looks);m._style&&(m.blendMode="overlay");GameUtil.ShowItemeffect(m,ItemMgr.getInstance().ShopItemList[c]);n.root.getChildByName(h).getChildByName("img_item").skin=
g;n.root.getChildByName(h).getChildByName("lbl_info").text=b[c].s.DBName+"\n"+b[c].s.Price+n.GetMoneyType(b[c].GameMoney)}else m&&m.getChildByName("effect")&&m.getChildByName("effect").removeSelf(),n.root.getChildByName(h).getChildByName("img_item").skin="",n.root.getChildByName(h).getChildByName("lbl_info").text=""}n.UpdatePageTitle()}var b=ItemMgr.getInstance().ShopItemList,d=this.loadItemImg(b),n=this;0==d.length?a():GameUtil.loadImgEx(d,a)};f.DrwaStrangeItems=function(){var a=ItemMgr.getInstance().StrageList,
b=this.loadItemImg(a),d=this;GameUtil.loadImgEx(b,function(){for(var n=0;5>n;n++){var c="pane_qz_"+(n+1);if(a[n]){var h=GameMission.getUrl("items",a[n].s.Looks);d.root.getChildByName(c).getChildByName("img_item").skin=h;d.root.getChildByName(c).getChildByName("lbl_info").text=a[n].s.DBName+"\n"+a[n].s.Price+d.GetMoneyType(a[n].GameMoney)}else d.root.getChildByName(c).getChildByName("img_item").skin="",d.root.getChildByName(c).getChildByName("lbl_info").text=""}})};f.GetMoneyType=function(a){var b=
"";switch(a){case 0:b=g_GameGoldNum.key;break;case 1:b=g_GameCionNum.key;break;case 2:b=g_GamePointNum.key;break;case 3:b=g_bindCionNum.key;break;case 4:b=g_bindGoldNum.key;break;case 5:b=g_nGameDiamond.key;break;case 6:b=g_nGameGird.key}return G_Money_Type=b};f.GetResNameByLooks=function(a){var b=a;1E4<=b&&(b-=1E4);var d="";for(b=b.toString().length;5>b;b++)d+="0";return 1E4<=a?"data/items1/"+d+(a-1E4)+".png":"data/items/"+d+a+".png"};f.ResetUI=function(){if(void 0!=this.root){this.root.getChildByName("panel_gift").visible=
!1;this.root.getChildByName("btn_zhuagnshi").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_buji").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_qianghua").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_haoyou").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_xianliang").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_last").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_next").on(Laya.Event.CLICK,
this,this.BtnClick);this.root.getChildByName("btn_chongzhi").on(Laya.Event.CLICK,this,this.BtnClick);this.root.btn_sponsorPack.on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);var a=this.root.getChildByName("panel_gift");a.getChildByName("input_tar_name").on(Laya.Event.CLICK,this,this.BtnClick);a.getChildByName("btn_submit").on(Laya.Event.CLICK,this,this.BtnClick);a.getChildByName("btn_return1").on(Laya.Event.CLICK,this,this.BtnClick);
this.DrawItems();this.DrwaStrangeItems()}};f.BtnUpDown=function(){null!=this.root&&(0==G_Cur_Shop_Page?this.root.getChildByName("btn_last").selected=!0:this.root.getChildByName("btn_last").selected=!1,G_Cur_Shop_Page==G_Total_Shop_Page-1?this.root.getChildByName("btn_next").selected=!0:this.root.getChildByName("btn_next").selected=!1)};f.BgImg=function(){null!=this.indexBg&&(this.root.getChildByName(this.indexBg).skin="gameres/png/bg_1.png");null!=this.BgName&&(this.root.getChildByName(this.BgName).skin=
"")};f.UpdatePageTitle=function(){ItemMgr.getInstance().ShopItemList[0]&&(this.root.getChildByName("lbl_page").text=G_Cur_Shop_Page+1+" / "+G_Total_Shop_Page)};f.ShowGiftNode=function(){this.root.getChildByName("panel_gift").visible=!0};f.SetSelectNode=function(a){var b=this.root.getChildByName("img_sel");b.x=a.x;b.y=a.y;b.parent=null;a.parent.addChild(b)};f.loadItemImg=function(a){for(var b=[],d=0;d<a.length;d++){var n=a[d].s.Looks,c="",h=n;1E4<=n&&(c=Math.floor(n/1E4),h=n%1E4);h=("000000"+h).slice(-6);
n=GameUtil.getImageSetNameByPath("data/items"+c+"/"+h);null!=n&&""!=n&&b.push(n)}return b};f.BtnClick=function(a){a=a.target.name;if("btn_exit"==a)this.root.getChildByName("panel_gift").visible=!1,this.root.getChildByName("panel_gift").getChildByName("input_tar_name").text="",this.root.visible=!1,this.BgImg();else if("btn1_exit"==a)this.root.getChildByName("panel_buy").visible=!1,Laya.stage.event("hide_iteminfo_dlg");else if("btn_return1"==a)this.root.getChildByName("panel_gift").visible=!1;else if("btn_submit"==
a)a=this.root.getChildByName("panel_gift").getChildByName("input_tar_name").text,Sendmessage.GiftShopItem(a,this.CurSelectItem.s.DBName),this.root.getChildByName("panel_gift").visible=!1,this.root.getChildByName("panel_gift").getChildByName("input_tar_name").text="",Laya.stage.event("show_bag_items");else if("btn_buy"==a)this.LastSelectItemNode?this.ShowBuyItemInfo():Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u60a8\u8981\u8d2d\u4e70\u7684\u7269\u54c1",color:"#ff0000"}]);else if("btn_gift"==
a)this.LastSelectItemNode?this.ShowGiftNode():Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u60a8\u8981\u8d60\u9001\u7684\u7269\u54c1",color:"#ff0000"}]);else if("btn_chongzhi"==a)Sendmessage.SendGameMainBtnMsg("\u5145\u503c\u9875\u9762");else if("btn_sponsorPack"==a)Sendmessage.SendGameMainBtnMsg("\u6d3b\u52a8\u4ecb\u7ecd");else if("btn_zhuagnshi"==a)this.ResetBtnRes(a),this.Cur_Select_Page_Type=G_Cur_Shop_Page=0,Sendmessage.GetShopItems(0),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),
this.BgImg();else if("btn_buji"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=1,Sendmessage.GetShopItems(1),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_qianghua"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=2,Sendmessage.GetShopItems(2),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_haoyou"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=3,Sendmessage.GetShopItems(3),
ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_xianliang"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=4,Sendmessage.GetShopItems(4),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_last"==a)0<G_Cur_Shop_Page&&(G_Cur_Shop_Page--,Sendmessage.GetShopItems(this.Cur_Select_Page_Type));else if("btn_next"==a)G_Cur_Shop_Page<G_Total_Shop_Page-1&&(G_Cur_Shop_Page++,Sendmessage.GetShopItems(this.Cur_Select_Page_Type));
else if(0<=a.indexOf("pane_qz_")){var b=a.split("_")[2];this.BgName;null!=this.BgName&&(this.root.getChildByName(this.BgName).skin="");this.root.getChildByName(a).skin="gameres/ui/select_bg.png";if(this.CurSelectItem=ItemMgr.getInstance().StrageList[b-1])g_OpenIdx=4,g_MoveItems.Items=this.CurSelectItem,GameUtil.NewShowItemsInf(g_MoveItems.Items);this.BgName=a;null!=this.indexBg&&(this.root.getChildByName(this.indexBg).skin="gameres/png/bg_1.png")}else if(0<=a.indexOf("pane_")){b=a.split("_")[1];this.indexBg;
null!=this.indexBg&&(this.root.getChildByName(this.indexBg).skin="gameres/png/bg_1.png");this.root.getChildByName(a).skin="gameres/ui/bg_2.png";if(this.CurSelectItem=ItemMgr.getInstance().ShopItemList[b-1])g_OpenIdx=4,g_MoveItems.Items=this.CurSelectItem,GameUtil.NewShowItemsInf(g_MoveItems.Items);this.indexBg=a;null!=this.BgName&&(this.root.getChildByName(this.BgName).skin="")}}})();
(function(){function e(){e.__super.call(this);this.DragStartPos=new Laya.Point(0,0);this.CanDragDlg=!1;this.ShowType=0;this.DragItemSkin="";this.CurSelectBuyIdx=-1;this.baseKey="png/ui_shop/";this.CurPageIdx=0;this.Init()}Laya.class(e,"UIShopRoom",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("buy_npc_item",this,this.BuySelectItem);Laya.stage.on("reset_img_item",this,function(){this.shellNode.getChildByName("img_item")._childs[0]&&(this.shellNode.getChildByName("img_item")._childs[0].skin=
"")});this.ResLoaded()};f.BuySelectItem=function(){var a=ItemMgr.getInstance().BuyItemRoomList;0<a.length?0<=this.CurSelectBuyIdx&&this.CurSelectBuyIdx<a.length&&Sendmessage.sendBuyItem(a[this.CurPageIdx+this.CurSelectBuyIdx]):(a=ItemMgr.getInstance().BuyItemInfoRoomList,0<=this.CurSelectBuyIdx&&this.CurSelectBuyIdx<a.length&&Sendmessage.SendButItemFormInfo(a[this.CurPageIdx+this.CurSelectBuyIdx]),this.CurSelectBuyIdx=-1)};f.ShowItemPrice=function(){var a="??????";0<=G_Show_Item_Price&&(a=G_Show_Item_Price);
this.shellNode.getChildByName("lbl_goldNum").text=a};f.ShowShopRoom=function(a){G_Show_Item_Price=0;this.CurSelectBuyIdx=-1;this.ShowType=a.type;if(void 0!=this.root){this.visible=!0;g_CurGameDlgZorder++;this.zOrder=g_CurGameDlgZorder;if(1==a.type){this.shellNode.visible=!1;this.buyNode.visible=!0;a=ItemMgr.getInstance().BuyItemRoomList;for(var b=ItemMgr.getInstance().BuyItemInfoRoomList,d=0;10>d;d++){var n=this.CurPageIdx+d;a[n]?(this.buyNode.getChildByName("lbl_"+d).text=a[n].name,this.buyNode.getChildByName("lbl_0_"+
d).text=a[n].gprice,1<=a[n].gsub?this.buyNode.getChildByName("lbl_2_"+d).text=">>>>>":this.buyNode.getChildByName("lbl_2_"+d).text=""):b[n]?(this.buyNode.getChildByName("lbl_"+d).text=b[n].s.Name,this.buyNode.getChildByName("lbl_0_"+d).text=b[n].price,this.buyNode.getChildByName("lbl_2_"+d).text=b[n].Dura):(this.buyNode.getChildByName("lbl_"+d).text="",this.buyNode.getChildByName("lbl_0_"+d).text="",this.buyNode.getChildByName("lbl_2_"+d).text="");this.buyNode.getChildByName("lbl_"+d).color="#ffffff";
this.buyNode.getChildByName("lbl_0_"+d).color="#ffffff";this.buyNode.getChildByName("lbl_2_"+d).color="#ffffff"}}else 2==a.type?(this.buyNode.visible=!1,this.shellNode.getChildByName("lbl_title").text="\u51fa\u552e\uff1a"):3==a.type&&(this.buyNode.visible=!1,this.shellNode.getChildByName("lbl_title").text="\u4fee\u7406\uff1a");this.shellNode.getChildByName("lbl_goldNum").text="";this.shellNode.getChildByName("img_item").skin=""}};f.ResLoaded=function(){this.root=new ShopRoomUI;this.buyNode=this.root.getChildByName("img_buy");
this.shellNode=this.root.getChildByName("img_shell");this.buyNode.on(Laya.Event.MOUSE_DOWN,this,this.MouseDwon);this.buyNode.on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.buyNode.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.shellNode.on(Laya.Event.MOUSE_DOWN,this,this.MouseDwon);this.shellNode.on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.shellNode.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.addChild(this.root);this.ResetUI();this.shellNode.getChildByName("btn_exit1").on(Laya.Event.CLICK,
this,this.BtnClick);this.buyNode.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_page_last").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_page_next").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_gold_bind").on(Laya.Event.CLICK,this,this.BtnClick);this.shellNode.getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_gold").on(Laya.Event.CLICK,this,this.BtnClick);
this.shellNode.getChildByName("lbl_title").color="#ffffff";this.shellNode.getChildByName("lbl_goldNum").color="#ffffff";for(var a=0;10>a;a++)this.buyNode.getChildByName("lbl_"+a).on(Laya.Event.CLICK,this,this.BtnClick),this.buyNode.getChildByName("lbl_0_"+a).on(Laya.Event.CLICK,this,this.BtnClick),this.buyNode.getChildByName("lbl_2_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.ShowShopRoom({type:this.ShowType})};f.ResetUI=function(){Laya.Button;this.buyNode.skin="gameres/png/00057.png";this.buyNode.getChildByName("btn_exit").skin=
"gameres/ui/btn_close.png";this.buyNode.getChildByName("btn_page_last").labelColors="#ffffff";this.buyNode.getChildByName("btn_page_next").labelColors="#ffffff";this.buyNode.getChildByName("btn_gold_bind").labelColors="#ffffff";this.buyNode.getChildByName("btn_gold").labelColors="#ffffff";this.buyNode.getChildByName("btn_page_last").skin="gameres/ui/00317.png";this.buyNode.getChildByName("btn_page_next").skin="gameres/ui/00317.png";this.buyNode.getChildByName("btn_gold_bind").skin="gameres/ui/00317.png";
this.buyNode.getChildByName("btn_gold").skin="gameres/ui/00317.png";this.shellNode.getChildByName("btn_exit1").skin="gameres/ui/btn_close.png";this.shellNode.visible=!1};f.MouseDwon=function(){this.shellNode.getChildByName("img_item").parent.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));if(1==this.buyNode.visible){this.buyNode.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY);var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.DragStartPos.x=
a.x*g_BaseScale;this.DragStartPos.y=a.y*g_BaseScale;this.CanDragDlg=!0}};f.MouseMove=function(){if(0!=this.CanDragDlg)if(1==this.buyNode.visible){this.root.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY);var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.DragStartPos.x)*g_BaseScale;this.root.y=(a.y-this.DragStartPos.y)*g_BaseScale}else 1==this.shellNode.visible&&(this.root.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY),a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,
Laya.stage.mouseY)),this.root.x=(a.x-this.DragStartPos.x)*g_BaseScale,this.root.y=(a.y-this.DragStartPos.y)*g_BaseScale)};f.MouseUp=function(){this.CanDragDlg=!1};f.BtnClick=function(a){a=a.target.name;switch(a){case "btn_exit":case "btn_exit1":Laya.stage.event("show_bag_items");this.visible=!1;Laya.stage.event("hide_bag_dlg");this.CurPageIdx=0;break;case "btn_page_last":0<this.CurPageIdx?this.CurPageIdx-=10:Laya.stage.event("show_log",[{txt:"\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875",color:"#ff0000"}]);
Laya.stage.event("show_shoproom",[{type:1}]);break;case "btn_page_next":a=parseInt(ItemMgr.getInstance().BuyItemRoomList.length/10);this.CurPageIdx<a?this.CurPageIdx+=10:Laya.stage.event("show_log",[{txt:"\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875",color:"#ff0000"}]);Laya.stage.event("show_shoproom",[{type:1}]);break;case "btn_gold_bind":this.BuySelectItem();break;case "btn_gold":this.BuySelectItem();break;case "btn_ok":a=ItemMgr.getInstance().LastDragItem;if(0>G_Show_Item_Price)break;2==this.ShowType?
Sendmessage.sendSellItem(G_NPC_ID,a.MakeIndex,a.s.Name):3==this.ShowType&&Sendmessage.sendRepairItem(G_NPC_ID,a.MakeIndex,a.s.Name);ItemMgr.getInstance().DeleteItem(a.MakeIndex);Laya.stage.event("show_bag_items");this.shellNode.getChildByName("lbl_goldNum").text="";this.shellNode.getChildByName("img_item").skin="";ItemMgr.getInstance().LastDragItem=null;Laya.stage.event("reset_img_item");break;default:for(var b=0;10>b;b++)if(this.buyNode.getChildByName("lbl_"+b).color="#ffffff",this.buyNode.getChildByName("lbl_0_"+
b).color="#ffffff",this.buyNode.getChildByName("lbl_2_"+b).color="#ffffff",a=="lbl_"+b||a=="lbl_0_"+b||a=="lbl_2_"+b){this.buyNode.getChildByName("lbl_"+b).color="#ff0000";this.buyNode.getChildByName("lbl_0_"+b).color="#ff0000";this.buyNode.getChildByName("lbl_2_"+b).color="#ff0000";var d=ItemMgr.getInstance().BuyItemRoomList,n=ItemMgr.getInstance().BuyItemInfoRoomList;0<d.length?d[this.CurPageIdx+b]&&(1<=d[this.CurPageIdx+b].gsub?(Sendmessage.sendGetDetailItem(d[this.CurPageIdx+b]),this.CurPageIdx=
0):this.CurSelectBuyIdx=b):n[b]&&(g_Show_Bag_Type="npc_buy_item",this.CurSelectBuyIdx=b,ItemMgr.getInstance().CurSelecItem=n[b],ItemMgr.getInstance().CurSelecItem.from="npc_buy_item",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]))}}}})();
var UISkillRock=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"UISkillRock",SkillRockUI);e=f.prototype;e.init=function(){this.click_pos=new Laya.Point;this.use_dis=this.cur_num=this.click_type=0;this.skill_list=[];this.curTouchid=null;this.curpos=new Laya.Point;this.num=8;this.rs=150;this.qiu_h=55;this.timelist=[];for(var a=0;8>a;a++)this.timelist[a]=0;this.cdlist=[];for(a=0;8>a;a++)this.cdlist[a]=0;this.nowtime=0;this.click_ok=!0;Laya.stage.on("add_magic",this,this.addskill);
Laya.stage.on("remove_magic",this,this.delskill);Laya.stage.on("update_icon",this,this.update_icon);Laya.stage.on(Laya.Event.RESIZE,this,this.changeSize);Laya.stage.on("skillrocke",this,this.skillrocke);Laya.stage.on("delskillani",this,this.delskillani);Laya.stage.on("skillcd_ani",this,this.set_skillcd);Laya.stage.on("change_type",this,this.onChangeType);Laya.stage.on("clearSkillcd_timer",this,this.clearSkillcd_timer);Laya.stage.on("setAutoSkillAni",this,this.setAutoSkillAni);this.setAutoSkillAni();
this.skillBtn_arc.on(Laya.Event.MOUSE_DOWN,this,this.onmousedown);this.base.on(Laya.Event.MOUSE_DOWN,this,this.onmousedown);for(a=0;a<this.num;++a){var b=2*Math.PI/360*-30*(a-3),d=180+Math.sin(b)*this.rs-this.qiu_h/2,n=180-Math.cos(b)*this.rs-this.qiu_h/2;b=new Laya.Button;var c=a;b.name=a;b.skin="gameres/ui/att_base.png";b.stateNum=2;b.width=57;b.height=57;b.pivot(b.width/2,b.height/2);b.pos(d+b.width/2,n+b.height/2);this.base.addChild(b);b.on(Laya.Event.CLICK,this,this.callskill);b.on(Laya.Event.MOUSE_OUT,
this,this.SkillUp);b.on(Laya.Event.MOUSE_DOWN,this,this.SkillDown);b.on(Laya.Event.MOUSE_UP,this,this.SkillUp);this.skill_list.push(b);d=new Laya.Text;d.color="#ffffff";d.fontSize=20;d.text=c+1;d.pivotX=d.width/2;d.pivotY=d.height/2;d.name="lbl_name";d.x=b.width/2;d.y=b.height/2;b.addChild(d);d=new Laya.Sprite;d.size(57,57);d.pos(0,0);d.name="skillbtn_mask";new Laya.Sprite;d.alpha=.5;d.visible=!1;b.addChild(d);d.zOrder=2;b.labelSize=25;b.labelPadding="2,0,0,0";b.labelColors="#ffffff,#ffffff";b.labelStroke=
2;b.labelStrokeColor="#000000"}this.base.rotation=-90;this.updateicon();this.changeSize();a=GameUtil.getSaveData("skillrocktype");null==a&&(a=1);this.onChangeType(a)};e.changeSize=function(){};e.set_skillcd=function(a){this.cdlist[a]=Skillmodule.checklegal(g_SetupMagicList[a].Def.btEffect,g_SetupMagicList[a].Def.wMagicId)/1E3;if(0!=this.cdlist[a]&&this.skill_list[a]){var b=this.skill_list[a].getChildByName("skillbtn_mask");b.visible=!0;g_ClientConfig.boDisabledDoubleFireHitSkill&&24==g_SetupMagicList[a].Def.btEffect&&
26==g_SetupMagicList[a].Def.wMagicId&&(b.idx=a,b.ids=g_SetupMagicList[a].Def.btEffect,b.types=g_SetupMagicList[a].Def.wMagicId,cdTimerStart=!0);this.timelist[a]=Laya.Browser.now();Laya.timer.frameLoop(1,this,this.skillcd_timer)}};e.skillcd_timer=function(){var a=8;this.nowtime=Laya.Browser.now();for(var b=0;8>b;b++){var d=(this.nowtime-this.timelist[b])/(1E3*this.cdlist[b]);if(this.timelist[b]&&1>d){var n=360*d,c=this.skill_list[b].getChildByName("skillbtn_mask");c.graphics.clear();c.graphics.drawPie(28.5,
28.5,28.5,-90+n,270,"#7f7f7f");1<=(this.cdlist[b]*(1-d)).toFixed(1)&&(this.skill_list[b].label=(this.cdlist[b]*(1-d)).toFixed(0))}else d=this.skill_list[b].getChildByName("skillbtn_mask"),d.visible=!1,this.skill_list[b].label="",this.timelist[b]=0,--a,g_ClientConfig.boDisabledDoubleFireHitSkill&&void 0!=d.idx&&24==d.ids&&26==d.types&&b==d.idx&&(d.idx=void 0,d.ids=void 0,d.types=void 0,cdTimerStart=!1)}0==a&&Laya.timer.clear(this,this.skillcd_timer)};e.clearSkillcd_timer=function(){Laya.timer.clearAll(this)};
e.callskill=function(a){if(10<this.use_dis)this.use_dis=0;else if(a=this.skill_list[a.target.name])if(null==a.getChildByName("btn_skill"))GameUtil.ShowNewLogo(!0,1,a.name);else{var b=parseInt(a.name);if(null!=g_SetupMagicList[b]){b=g_SetupMagicList[b];var d=ObjectManage.findobject(playerID);if(b&&d){this.checkUseNewLockMechanism(b.Def.btEffect,d.grid,g_ClientConfig.MagicAttackRage);if(1E3<=b.Def.wMagicId&&1500>=b.Def.wMagicId)var n=Skillmodule.findCustomSkill(b.Def.wMagicId,b.Level);if(GameUtil.israngeskill(b.Def.btEffect)||
n&&n.boFiyFried)activate_ok&&activate_ok.Def.btEffect==b.Def.btEffect&&activate_ok.Def.wMagicId==b.Def.wMagicId?(activate_ok=null,Laya.stage.event("show_log",[{txt:"\u6280\u80fd\u5df2\u53d6\u6d88\uff01",color:"#ff0000"}]),Animationmodule.removeAniname("skilllockani")):(Laya.stage.event("show_log",[{txt:"\u70b9\u51fb\u9009\u62e9\u91ca\u653e\u7684\u533a\u57df\uff01",color:"#ff0000"}]),activate_ok=b,Animationmodule.removeAniname("skilllockani"),this.rangeskillani(a));else if(GameUtil.JudgeMagicMp(b,
d)){var c;g_ClientConfig.boDisabledDoubleFireHitSkill&&24==b.Def.btEffect&&26==b.Def.wMagicId&&(c=!0);Objectcontrol.useskill(b.Def.btEffect,b.Def.wMagicId,null,b.Level,c);activate_skilluse=b.Def.btEffect;activate_skilltype=b.Def.wMagicId}else Laya.stage.event("show_log",[{txt:"\u9b54\u6cd5\u4e0d\u8db3",color:"#ff0000"}])}}n=new Laya.Point(a.width/2,a.height/2);Animationmodule.playframe(!1,a,"gameres/animation/skill/",1,8,50,!1,!0,n)}};e.checkUseNewLockMechanism=function(a,b,d){d=void 0===d?10:d;if(!lockingID){var n=
!1,c=[2,11,12,15,16,17,26,27,28,29,41,47,99];if(20==a||GameUtil.checkManualSkill(a,GlobalCfglist.manualIceRoar,31)||GameUtil.checkManualSkill(a,GlobalCfglist.manualHurricaneSkill,47)||GameUtil.checkManualSkill(a,GlobalCfglist.manualBombFire,21)||GameUtil.checkManualSkill(a,GlobalCfglist.manualIncendiaryShower,51)||8==a&&GlobalCfglist.manualFastLight||-1<c.indexOf(a))n=!0;n||((a=ObjectManage.findlateobject1(b,d,1))||(a=ObjectManage.findlateobject1(b,d,3)),a&&GameUtil.addhalo(a))}};e.SkillDown=function(a){Laya.Tween.to(a.target,
{scaleX:.8,scaleY:.8},100,null)};e.SkillUp=function(a){Laya.Tween.to(a.target,{scaleX:1,scaleY:1},200,null)};e.SkillOut=function(a){this.skill_list[a.target.name].scale(1,1)};e.onmousedown=function(a){this.curTouchid=a.touchId;this.base.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.click_type=1,this.click_pos.x=this.mouseX,this.click_pos.y=this.mouseY,this.click_ok=!0,this.use_dis=0,this.curpos.x=Laya.stage.mouseX,this.curpos.y=Laya.stage.mouseY);this.curbase_rotation=this.base.rotation;
Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onmouseup);Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onmousemove);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onmouseup)};e.onmousemove=function(a){if(!(a&&a.touchId&&a.touchId!=this.curTouchid||1!=this.click_type)){this.angle=Math.atan2(this.mouseX-this.click_pos.x,this.mouseY-this.click_pos.y);this.use_dis=this.click_pos.distance(this.mouseX,this.mouseY);if(10<this.use_dis){a=Math.atan((Laya.stage.mouseY-this.y-180)/(Laya.stage.mouseX-this.x-180));
var b=Math.atan((this.curpos.y-this.y-180)/(this.curpos.x-this.x-180));0>a&&(a+=Math.PI);0>b&&(b+=Math.PI);this.currotation=this.curbase_rotation+180/Math.PI*(a-b);-90<this.currotation&&30>this.currotation&&(this.base.rotation=this.currotation)}this.updateicon()}};e.onmouseup=function(a){a&&a.touchId&&a.touchId!=this.curTouchid||(this.base.rotation=this.curbase_rotation,this.click_type=0,this.click_ok&&60<this.use_dis&&(0<this.angle?this.base.rotation+=120:this.base.rotation-=120,0<this.angle?g_rotation+=
1:--g_rotation,-90>this.base.rotation&&(this.base.rotation=-90),30<this.base.rotation&&(this.base.rotation=30),this.click_ok=!1,2<g_rotation||-2>g_rotation)&&(g_rotation=0),this.updateicon(),Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onmousemove),Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onmouseup),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onmouseup))};e.addskill=function(a,b){12<b&&(b=12);var d=this.skill_list[b];if(null!=d){b=a.Def.btEffect;38==a.Def.wMagicId&&(b=4);46==a.Def.wMagicId&&
(b=42);39==a.Def.wMagicId&&(b=0);var n=GameUtil.ParseMagicResName(2*b),c=this;if(null==d.getChildByName("btn_skill")){var h=new Laya.Button;h.mouseEnabled=!1;Laya.loader.load(n,Laya.Handler.create(this,function(){h.skin=n;h.name="btn_skill";h.width=57;h.height=57;h.pivotX=h.width/2;h.pivotY=h.height/2;h.x=d.width/2;h.y=d.height/2;h.stateNum=2;c.updateicon()}),null,Laya.Loader.IMAGE);d.addChild(h)}else a=d.getChildByName("btn_skill"),Laya.loader.load(n,Laya.Handler.create(this,function(m){m.skin=n;
c.updateicon()},[a]),null,Laya.Loader.IMAGE);this.setAutoSkillAni()}};e.delskill=function(a){if(this.skill_list[a]){var b=this.skill_list[a].getChildByName("btn_skill");this.skill_list[a].getChildByName("skilllockani")&&(Animationmodule.removeAniname("skilllockani"),activate_ok=null);b&&b.removeSelf()}};e.updateicon=function(){for(var a=0;a<this.skill_list.length;++a){var b=this.skill_list[a];b&&(b.rotation=-this.base.rotation)}this.setAutoSkillAni()};e.update_icon=function(a){if(12!=a){if(a||0==
a)this.addskill(g_SetupMagicList[a],a),g_SetupMagicList[a]==activate_ok&&this.rangeskillani(this.skill_list[a]);else for(a=0;a<this.skill_list.length;a++){var b=parseInt(this.skill_list[a].name);null!=g_SetupMagicList[b]?this.addskill(g_SetupMagicList[b],b):this.delskill(b)}this.setAutoSkillAni()}};e.skillrocke=function(a){var b=new Laya.Point(this.base._childs[a].width/2,this.base._childs[a].height/2);Animationmodule.playframe(!1,this.base._childs[a],"gameres/animation/skill/",1,8,50,!1,!0,b)};e.delskillani=
function(){for(var a=0;a<this.skill_list.length;a++)this.skill_list[a].getChildByName("skilllockani")&&(activate_ok=null,Laya.stage.event("show_log",[{txt:"\u6280\u80fd\u5df2\u53d6\u6d88\uff01",color:"#ff0000"}]),Animationmodule.removeAniname("skilllockani"))};e.rangeskillani=function(a){a&&(a=Animationmodule.playframe(!1,a,"gameres/animation/mouse_click/",41,52,100,!0,!1),a.name="skilllockani",a.scale(.66,.66),a.pos(-12,-14))};e.setAutoSkillAni=function(){for(var a=0;a<g_SetupMagicList.length;a++){var b=
g_SetupMagicList[a],d=this.skill_list[a];if(d)var n=d.getChildByName("skilleffectani");if(b&&d){var c=b.Def.btEffect;b=b.Def.wMagicId;if(24==c&&26==b||53==c&&76==b||43==c&&95==b||38==c&&43==b||23==c&&25==b||13==c&&12==b)switch(!n&&(n=Animationmodule.playframe(!1,d,"gameres/animation/mouse_click/",41,52,100,!0,!1))&&(n.name="skilleffectani",n.scale(.66,.66),n.pos(-12,-14)),c){case 24:n.visible=GlobalCfglist.z_autoskill_2;break;case 53:n.visible=GlobalCfglist.zs_zrjf;break;case 43:n.visible=GlobalCfglist.z_autoskill_4;
break;case 38:n.visible=GlobalCfglist.zs_lyjf;break;case 23:n.visible=GlobalCfglist.z_autoskill_3;break;case 13:n.visible=GlobalCfglist.z_autoskill_1}else n&&n.removeSelf()}else n&&n.removeSelf()}};e.onChangeType=function(a){if(1==a){for(a=0;a<this.num;++a){var b=this.base.getChildByName(a);if(b)switch(a){case 0:b.pos(185,63);break;case 1:b.pos(125,75);break;case 2:b.pos(77,115);break;case 3:b.pos(49,171);break;case 4:b.pos(136,10);break;case 5:b.pos(68,38);break;case 6:b.pos(18,83);break;case 7:b.pos(-11,
143)}}this.skillBtn_arc.off(Laya.Event.MOUSE_DOWN,this,this.onmousedown);this.base.off(Laya.Event.MOUSE_DOWN,this,this.onmousedown);Laya.stage.event("showarrow",[!1]);this.base.rotation=0}else{for(a=0;a<this.num;++a){var d=2*Math.PI/360*-30*(a-3);if(b=this.base.getChildByName(a)){var n=180+Math.sin(d)*this.rs-this.qiu_h/2;d=180-Math.cos(d)*this.rs-this.qiu_h/2;b.pivot(b.width/2,b.height/2);b.pos(n+b.width/2,d+b.height/2)}}this.skillBtn_arc.on(Laya.Event.MOUSE_DOWN,this,this.onmousedown);this.base.on(Laya.Event.MOUSE_DOWN,
this,this.onmousedown);Laya.stage.event("showarrow",[!0]);this.base.rotation=-90}this.updateicon()};return f}(SkillRockUI),UITeamGroup=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"UITeamGroup",TreamGroupUI);e=f.prototype;e.init=function(){var a=this;this.selectIndex=0;this.inviteNumerTip;this.teamOperationTip;this.selfCaptain;this.initList();Laya.stage.on("createTeam_callBack",this,this.createTeamCallBack);Laya.stage.on("showSocialWinCloseBtn",this,function(){a.parent.close_btn.visible=
!0});this.addClickEvenet();this.addMsgEvent();this.showUI();Laya.stage.event("showApplyTeamTip")};e.initList=function(){this.team_list.selectEnable=!0;this.team_list.renderHandler=new Laya.Handler(this,this.updateItem);this.team_list.mouseHandler=new Laya.Handler(this,this.clickItem)};e.addClickEvenet=function(){Laya.stage.on("closeTeamGroup",this,this.onClose);Laya.stage.on("updateTeamList",this,this.updateListData);this.myTeam_btn.on(Laya.Event.CLICK,this,this.onClickDirectory);this.nearTeam_btn.on(Laya.Event.CLICK,
this,this.onClickDirectory);this.createTeam_btn.on(Laya.Event.CLICK,this,this.onCreateTeam);this.callTeammate_btn.on(Laya.Event.CLICK,this,this.onCallTeammate);this.inviteNumber_btn.on(Laya.Event.CLICK,this,this.onInviteNumber);this.leaveTeam_btn.on(Laya.Event.CLICK,this,this.onLeaveTeam);this.allowTeam_check.on(Laya.Event.CLICK,this,this.onAllowTeam);new Laya.Button};e.addMsgEvent=function(){Laya.stage.on("createTeam_faild",this,this.onTeamEventCallBack.bind(this,1));Laya.stage.on("createTeam_Ok",
this,this.onTeamEventCallBack.bind(this,2));Laya.stage.on("addTeamGroup_faild",this,this.onTeamEventCallBack.bind(this,3));Laya.stage.on("clear_team",this,this.onTeamEventCallBack.bind(this,4))};e.onTeamEventCallBack=function(a,b,d){switch(a){case 1:this.createTeamFaild(b,d);break;case 2:this.createTeamOk(b,d);break;case 3:this.addTeamMemberFaild(b,d);break;case 4:this.clearTeamGroupList(b,d)}};e.createTeamFaild=function(a,b){switch(a.record){case -1:b="\u4f60\u5df2\u7ecf\u62e5\u6709\u961f\u4f0d\uff01";
break;case -3:b="\u5bf9\u65b9\u5df2\u7ecf\u62e5\u6709\u961f\u4f0d\uff01";break;case -4:b="\u5bf9\u65b9\u4e0d\u5141\u8bb8\u7ec4\u961f\uff01";break;case -6:b="\u5df2\u5728\u9ed1\u540d\u5355\u4e2d,\u7ec4\u961f\u5931\u8d25\uff01";break;case -9:b="\u4f60\u4e0d\u5141\u8bb8\u7ec4\u961f\uff0c["+DecodeString(b)+"]\u65e0\u6cd5\u9080\u8bf7\u4f60\u7ec4\u961f\uff01";break;default:b="\u7ec4\u961f\u5931\u8d25\uff01"}if(-9==a.record)Laya.stage.event("show_log",[{txt:b,color:"#0000FF"}]);else GameUtil.onShowTip(b)};
e.createTeamOk=function(){G_BaseSetList[0].val||Sendmessage.sendGroupMode();Laya.stage.event("show_log",[{txt:"\u7ec4\u961f\u6210\u529f",color:"#00ff00"}])};e.addTeamMemberFaild=function(a,b){b="";switch(a.record){case -1:b="\u7f16\u7ec4\u8fd8\u672a\u6210\u7acb\u6216\u8005\u4f60\u8fd8\u4e0d\u591f\u7b49\u7ea7";break;case -2:b="\u60a8\u8f93\u5165\u7684\u4eba\u7269\u540d\u79f0\u4e0d\u6b63\u786e";break;case -3:b="\u5df2\u7ecf\u52a0\u5165\u7f16\u7ec4";break;case -4:b="\u5bf9\u65b9\u4e0d\u5141\u8bb8\u7f16\u7ec4";
break;case -5:b="\u60a8\u9080\u8bf7\u52a0\u5165\u7f16\u7ec4\u7684\u4eba\u5df2\u7ecf\u52a0\u5165\u5176\u5b83\u7ec4";break;case -6:b="\u4e0d\u540c\u56fd\u5bb6\u7981\u6b62\u7ec4\u961f"}GameUtil.onShowTip(b)};e.clearTeamGroupList=function(){RelationManager.getInstance().teamGropList=[];this.updateListData()};e.onClickDirectory=function(a){a.target==this.myTeam_btn&&(this.selectIndex=0);a.target==this.nearTeam_btn&&(this.selectIndex=1);this.showUI()};e.onCreateTeam=function(){Laya.stage.event("openAddFriendTip",
[FRIEND_TIP.D,"createTeam_callBack"])};e.createTeamCallBack=function(a){if(""==a)GameUtil.onShowTip(FRIEND_TIP.D);else Sendmessage.sendCreateGroup(a)};e.onCallTeammate=function(){Laya.stage.event("sendCaptainPosInTeam")};e.onInviteNumber=function(){this.inviteNumerTip=GameUtil.openWin(this.inviteNumerTip,this,TeamInviteList);this.parent.close_btn.visible=!1};e.onLeaveTeam=function(){if(this.selfCaptain){var a=ObjectManage.findobject(playerID);Sendmessage.sendDelGroupMember(GameUtil.getPureName(a))}else Sendmessage.sendGroupLeave()};
e.onAllowTeam=function(){Sendmessage.sendGroupMode()};e.showUI=function(){this.setListTitleUI(0==this.selectIndex);this.setSelectDirectoryUI(0==this.selectIndex);1==this.selectIndex&&Sendmessage.sendGroupList();this.updateListData()};e.setListTitleUI=function(a){a?(this.title_0_txt.x=227,this.title_1_txt.x=326,this.title_2_txt.x=373,this.title_3_txt.x=464,this.title_4_txt.x=575,this.title_0_txt.changeText("\u540d\u79f0"),this.title_1_txt.changeText("\u7b49\u7ea7"),this.title_2_txt.changeText("\u804c\u4e1a"),
this.title_3_txt.changeText("\u884c\u4f1a")):(this.title_0_txt.x=227,this.title_1_txt.x=350,this.title_2_txt.x=466,this.title_3_txt.x=599,this.title_0_txt.changeText("\u961f\u4f0d"),this.title_1_txt.changeText("\u4eba\u6570"),this.title_2_txt.changeText("\u884c\u4f1a"),this.title_3_txt.changeText("\u64cd\u4f5c"));this.title_img.visible=a;this.title_4_txt.visible=a};e.setSelectDirectoryUI=function(a){this.myTeam_btn.selected=a;this.nearTeam_btn.selected=!a};e.updateListData=function(){var a=0==this.selectIndex?
RelationManager.getInstance().teamGropList:RelationManager.getInstance().t_nearTeamList;this.updateShowList(a);this.setOperationBtnUI(0==this.selectIndex,a)};e.updateShowList=function(a){this.team_list.array=a;this.team_list.refresh()};e.setOperationBtnUI=function(a,b){var d=0<b.length;this.createTeam_btn.visible=a&&!d;this.selfCaptain=this.isCaptain(b);this.captain_box.visible=a&&d&&this.selfCaptain;this.leaveTeam_btn.visible=a&&d;this.noTeam_txt.visible=!d;this.allowTeam_check.visible=a;this.allowTeam_check.selected=
G_BaseSetList[0].val};e.isCaptain=function(a){var b=ObjectManage.findobject(playerID);b=GameUtil.getPureName(b);for(var d in a)if("1"==a[d].captain)return b==a[d].name?!0:!1};e.updateItem=function(a,b){if(a.dataSource){var d=0,n=a.getChildByName("applyAdd_btn"),c=0==this.selectIndex,h=Object.keys(a.dataSource);n.visible=!c;for(var m=0;5>m;m++){var g=a.getChildByName("content_txt_"+m);if(c){if(2==m||4==m)g.visible=!0;1==m&&(g.x=154);g.changeText(a.dataSource[h[m]])}else 2==m||4==m?g.visible=!1:(1==
m&&(g.x=174),g.changeText(a.dataSource[h[d]]),n.hasClick||(n.hasClick="true",n.on(Laya.Event.CLICK,this,this.onApplyAdd.bind(this,a.dataSource.teamName))),d++)}a.getChildByName("captainIcon_img").visible="1"==a.dataSource.captain;a.getChildByName("selectEffect_img").visible=b==this.team_list.selectedIndex}};e.clickItem=function(a,b){if("click"==a.type)if("applyAdd_btn"==a.target.name){if(a.target.dataSource)this.onApplyAdd(a.target.dataSource.name)}else a.target.getChildByName("selectEffect_img").visible=
!0,b=a.target.dataSource.name,clickCaptain="1"==a.target.dataSource.captain,this.teamOperationTip=GameUtil.openWin(this.teamOperationTip,this,TeamOperationTip),Laya.stage.event("updateTeamOperationTipUI",[clickCaptain,b,this.selfCaptain])};e.onApplyAdd=function(a){Sendmessage.sendGroupApply(a)};e.onClose=function(){this.selectIndex=0;this.visible=!1};return f}(TreamGroupUI);
(function(){function e(){e.__super.call(this);this.otherItemNode=this.selfItemNode=null;this.baseKey="ui/trade/";this.Init()}Laya.class(e,"UITrade",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("update_trade_item",this,this.UpdateTradeItem);Laya.stage.on("trade_cmd",this,this.TradeCMD);Laya.stage.on("update_items",this,this.UpdateTradeItem);Laya.stage.on("cannel_trade",this,this.CannelTrade);this.ResLoaded()};f.ResLoaded=function(){this.root=new TradeUI;this.addChild(this.root);
this.selfItemNode=this.root.getChildByName("img_self");this.otherItemNode=this.root.getChildByName("img_other");this.root.getChildByName("img_self").on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.root.getChildByName("img_self").on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.root.getChildByName("img_self").on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.BindClick(this.selfItemNode);this.BindClick(this.otherItemNode);this.ResetUI()};f.BindClick=function(a){for(var b=1;11>b;b++)a.getChildByName("img_"+
b).on(Laya.Event.CLICK,this,this.BtnClick)};f.MouseDown=function(){};f.MouseMove=function(){};f.MouseUp=function(){};f.TradeCMD=function(a){"start_trade"==a.id?(g_Trade_GameIcon=g_GameCionNum.value,Laya.stage.event("show_trade",[{id:"show_trade"}]),this.selfItemNode.getChildByName("lbl_self_num").text=g_RoleName,this.otherItemNode.getChildByName("lbl_other_name").text=G_Trade_Other_Name):"start_faild"==a.id?Laya.stage.event("cannel_trade",[{from:"start_faild"}]):"additem_faild"==a.id?(ItemMgr.getInstance().LastTradeItem=
null,Laya.stage.event("show_bag_items")):"change_gold_fiald"==a.id?this.selfItemNode.getChildByName("input_num").text=0:"change_gold_ok"==a.id?(this.selfItemNode.getChildByName("input_num").text=a.remsg.record,g_Trade_GameIcon=a=CodeUtil._MAKELONG(a.remsg.param,a.remsg.tag),Laya.stage.event("update_bag_info",[a])):"change_gold"==a.id?this.otherItemNode.getChildByName("lbl_other_num").text=a.remsg.record:"cancal_trade"==a.id?Laya.stage.event("cannel_trade",[{from:"cancal_trade"}]):"finish_trade"==
a.id?Laya.stage.event("cannel_trade",[{from:"finish_trade"}]):"delete_item_faild"==a.id?(Laya.stage.event("update_items"),Laya.stage.event("show_log",[{txt:"\u5220\u9664\u4ea4\u6613\u7269\u54c1\u5931\u8d25",color:"#ff0000"}])):"change_gold_fiald"==a.id?(Laya.stage.event("show_log",[{txt:"\u4fee\u6539\u91d1\u5e01\u5931\u8d25"+list[0].s.DBName,color:"#ff0000"}]),a=CodeUtil._MAKELONG(msg.param,msg.tag),Laya.stage.event("update_bag_info",[a])):"delete_item"==a.id?(a=ItemMgr.getInstance().LastTradeItem,
ItemMgr.getInstance().DeleteTradeItem(a.MakeIndex),ItemMgr.getInstance().AddItemToBag(a),Laya.stage.event("update_items"),Laya.stage.event("show_bag_items")):"additem_ok"==a.id?(a=ItemMgr.getInstance().LastTradeItem,ItemMgr.getInstance().DeleteItem(a.MakeIndex),ItemMgr.getInstance().TradeItemList.push(a),Laya.stage.event("update_items"),Laya.stage.event("show_bag_items"),ItemMgr.getInstance().LastTradeItem=null):"trade_item_info"==a.id?(a=fnDecode6BitBuf(a.body,a.body.length,!1),a=TClientItem(a.pszDest),
ItemMgr.getInstance().TradeOtherList.push(a),Laya.stage.event("update_items")):"delete_item_ok"==a.id&&(a=fnDecode6BitBuf(a.body,a.body.length,!1),a=TClientItem(a.pszDest),ItemMgr.getInstance().DeleteTradeOtherItem(a.MakeIndex))};f.Update=function(){var a=ItemMgr.getInstance().TradeItemList,b=ItemMgr.getInstance().TradeOtherList;if(this.root){for(var d=0;d<a.length;d++){var n=d;n=this.selfItemNode.getChildByName("img_"+(n+1));n=n._childs[0];if(a[d]&&a[d].eff_list&&n&&""!=n.skin&&n._childs[0]){if(n._childs[0].skin=
a[d].eff_list[a[d].eff_idx],a[d].eff_idx++,a[d].eff_idx>=a[d].eff_list.length&&(a[d].eff_idx=0),a[d])for(var c=0;c<a[d].eff_list.length;c++){var h=-n._childs[0].width/2+12,m=-n._childs[0].height/2+13;n._childs[0].x=h+a[d].offset_list[c].x;n._childs[0].y=m+a[d].offset_list[c].y}}else n&&n._childs[0]&&(n._childs[0].skin="")}for(d=0;d<b.length;d++)if(n=d,n=this.otherItemNode.getChildByName("img_"+(n+1)))if(n=n._childs[0],b[d]&&b[d].eff_list&&n&&""!=n.skin&&n._childs[0]){if(n._childs[0].skin=b[d].eff_list[b[d].eff_idx],
b[d].eff_idx++,b[d].eff_idx>=b[d].eff_list.length&&(b[d].eff_idx=0),b[d])for(c=0;c<b[d].eff_list.length;c++)h=-n._childs[0].width/2+12,m=-n._childs[0].height/2+13,n._childs[0].x=h+b[d].offset_list[c].x,n._childs[0].y=m+b[d].offset_list[c].y}else n&&n._childs[0]&&(n._childs[0].skin="")}};f.LoadItemEffect=function(a,b){this.item=a;var d=a.s.EffectStartOffSet;if(0<d){var n=new Laya.Image;n.blendMode="overlay";b._childs[0]&&b._childs[0].addChild(n);a.eff_list=[];a.offset_list=[];a.eff_idx=0;for(b=d;b<
d+a.s.EffectImageCount;b++){n="/";for(var c=b.toString().length;5>c;c++)n+="0";n+=b+".png";a.eff_list.push("data/"+g_pak_list[a.s.EffectFileIndex]+n);a.offset_list.push(Offsetmodule.getoffset(g_pak_list[a.s.EffectFileIndex],b));Laya.loader.load(a.eff_list,Laya.Handler.create(this,function(){}),null,Laya.Loader.IMAGE)}}};f.CannelTrade=function(a){var b=null;"finish_trade"==a.from?(g_GameCionNum.value=g_Trade_GameIcon,Laya.stage.event("updateAuctionHouseMoney",1),Laya.stage.event("update_bag_info"),
b=ItemMgr.getInstance().TradeOtherList):"cancal_trade"==a.from&&(Laya.stage.event("update_bag_info"),b=ItemMgr.getInstance().TradeItemList);if(b){for(a=0;a<b.length;a++)ItemMgr.getInstance().AddItemToBag(b[a]);Laya.stage.event("show_bag_items")}ItemMgr.getInstance().TradeItemList=[];ItemMgr.getInstance().TradeOtherList=[];ItemMgr.getInstance().LastTradeItem=null;"game_trade"==g_Show_Bag_Type&&(g_Show_Bag_Type="");Laya.stage.event("hide_bag_dlg");this.visible=!1};f.UpdateTradeItem=function(){for(var a=
ItemMgr.getInstance().TradeItemList,b=0;b<a.length;b++){var d=b;GameUtil.ParseNameFormat(a[b].s.Looks);d=this.selfItemNode.getChildByName("img_"+(d+1));this.CreteItemIcon(d,a[b]);GameUtil.ShowItemeffect(d,a[b])}a=ItemMgr.getInstance().TradeOtherList;for(b=0;b<a.length;b++)d=b,GameUtil.ParseNameFormat(a[b].s.Looks),d=this.otherItemNode.getChildByName("img_"+(d+1)),this.CreteItemIcon(d,a[b]),GameUtil.ShowItemeffect(d,a[b])};f.GetOffset=function(a){var b="",d=a;1E4<=a&&(d=a-1E4);for(var n=d.toString().length;5>
n;n++)b+="0";return 1E4<=a?"data/item/inbag/1/Placements/"+b+d+".txt":"data/item/inbag/Placements/"+b+a+".txt"};f.ResetTradeUI=function(){if(void 0!=this.root){for(var a=1;11>a;a++)this.CreteItemIcon(this.selfItemNode.getChildByName("img_"+a),""),this.CreteItemIcon(this.otherItemNode.getChildByName("img_"+a),"");this.otherItemNode.getChildByName("lbl_other_num").text="0";this.selfItemNode.getChildByName("input_num").text="0";this.selfItemNode.getChildByName("lbl_self_num").text=g_RoleName;this.otherItemNode.getChildByName("lbl_other_name").text=
G_Trade_Other_Name}};f.CreteItemIcon=function(a,b){function d(n){0<a._childs.length?(a._childs[0].skin=n,n=a._childs[0]):(n=new Laya.Image(n),n.anchorX=.5,n.anchorY=.5,a.addChild(n));for(var c=0;c<n._childs.length;c++)n._childs[c].removeSelf();n.x=a.width/2;n.y=a.height/2}a&&b&&GameUtil.loadImg(b.s.Looks,"items",d)};f.ResetUI=function(){void 0!=this.root&&(this.selfItemNode.getChildByName("btn_trade").on(Laya.Event.CLICK,this,this.BtnClick),this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,
this,this.BtnClick),this.selfItemNode.getChildByName("btn_submit").on(Laya.Event.CLICK,this,this.BtnClick),this.otherItemNode.getChildByName("lbl_other_num").color="#ffffff",this.selfItemNode.getChildByName("input_num").color="#ffffff",this.selfItemNode.getChildByName("lbl_self_num").text=g_RoleName,this.otherItemNode.getChildByName("lbl_other_name").text=G_Trade_Other_Name)};f.BtnClick=function(a){switch(a.target.name){case "btn_exit":Sendmessage.CancelTrade();this.visible=!1;break;case "btn_trade":Sendmessage.SubmitTrade();
break;case "btn_submit":var b=this.selfItemNode.getChildByName("input_num").text;Sendmessage.TradeGold(parseInt(b));break;default:if(b=a.target.parent,a=a.target.name.split("_")[1]-1,"img_self"==b.name){if(b=ItemMgr.getInstance().TradeItemList[parseInt(a)])ItemMgr.getInstance().CurSelecItem=b,ItemMgr.getInstance().CurSelecItem.from="dlg_trade",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}])}else"img_other"==b.name&&(b=ItemMgr.getInstance().TradeOtherList[parseInt(a)])&&(ItemMgr.getInstance().CurSelecItem=
b,ItemMgr.getInstance().CurSelecItem.from="dlg_trade",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]))}}})();
var upGradeItem=function(e){function f(){f.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya.class(f,"upGradeItem",upgradeUI);e=f.prototype;e.init=function(){this.material2=this.material1=this.item=null;this.btn_close.on(Laya.Event.CLICK,this,this.close);this.upgrade_item.on(Laya.Event.CLICK,this,this.setUpgradeItem);this.upgrade_material1.on(Laya.Event.CLICK,this,this.setmaterial1);this.upgrade_material2.on(Laya.Event.CLICK,this,this.setmaterial2);this.upgrade_bg.on(Laya.Event.MOUSE_DOWN,
this,this.onMouseDown);this.btn_upgrade.on(Laya.Event.CLICK,this,this.sendUpgradeOK);Laya.stage.on("drawUpgrade",this,this.drawUpgrade);Laya.stage.on("upgradeOK",this,this.upgradeOK);Laya.stage.on("upgradeFaild",this,this.upgradeFaild)};e.sendUpgradeOK=function(){var b="";this.item&&(b+=this.item.s.Name+"/"+this.item.MakeIndex+"/");this.material1&&(b+=this.material1.s.Name+"/"+this.material1.MakeIndex+"/");this.material2&&(b+=this.material2.s.Name+"/"+this.material2.MakeIndex+"/");Sendmessage.sendUpgrade(b)};
e.upgradeOK=function(b){this.clearBox();b&&(Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u88c5\u5907\u5347\u7ea7\u6210\u529f\uff01",callfn:function(){}}]),GameUtil.AddItemNewBag(b))};e.upgradeFaild=function(b,d){if(b)switch(0==b.record?(this.clearBox(),1==b.series&&(d=fnDecode6BitBuf(d,d.length,!1),(d=TClientItem(d.pszDest))&&GameUtil.AddItemNewBag(d))):-7==b.record&&(this.material2=this.material1=null,this.material1_img.visible=!1,this.material1_txt.visible=!0,this.material2_img.visible=!1,this.material2_txt.visible=
!0),b.record){case 0:1==b.series?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5931\u8d25,\u88c5\u5907\u5df2\u7834\u788e\uff01\uff01\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5931\u8d25\uff01\uff01\uff01",callfn:function(){}}]);break;case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8bf7\u5728\u7b2c\u4e00\u4e2a\u683c\u5b50\u91cc\u653e\u5165\u60a8\u8981\u5347\u7ea7\u7684\u88c5\u5907\uff01\uff01\uff01",
callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8bf7\u5728\u7b2c\u4e8c\u4e2a\u683c\u5b50\u91cc\u653e\u5165\u5347\u7ea7\u5b9d\u77f3\uff01\uff01\uff01",callfn:function(){}}]);break;case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8be5\u88c5\u5907\u7981\u6b62\u5347\u7ea7\uff01\uff01\uff01",callfn:function(){}}]);break;case -4:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8be5\u88c5\u5907\u65e0\u6cd5\u5347\u7ea7\uff01\uff01\uff01",
callfn:function(){}}]);break;case -5:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u7b2c\u4e8c\u4e2a\u683c\u5b50\u653e\u7684\u4e0d\u662f\u5347\u7ea7\u5b9d\u77f3\uff01\uff01\uff01",callfn:function(){}}]);break;case -6:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u7b2c\u4e09\u4e2a\u683c\u5b50\u653e\u7684\u4e0d\u662f\u9644\u52a0\u5b9d\u77f3\uff01\uff01\uff01",callfn:function(){}}]);break;case -7:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5931\u8d25\uff01\uff01\uff01",
callfn:function(){}}]);break;case -9:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u6ca1\u6709\u53ef\u4ee5\u9644\u52a0\u7684\u6280\u80fd\uff01\uff01\uff01",callfn:function(){}}]);break;case -11:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u6ca1\u6709\u6307\u5b9a\u6280\u80fd\uff01\uff01\uff01",callfn:function(){}}]);break;case -12:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u6b21\u6570\uff01\uff01\uff01",
callfn:function(){}}])}};e.clearBox=function(){this.material2=this.material1=this.item=null;this.item_img.visible=!1;this.item_txt.visible=!0;this.material1_img.visible=!1;this.material1_txt.visible=!0;this.material2_img.visible=!1;this.material2_txt.visible=!0};e.setUpgradeItem=function(){if(this.item){var b=this.item;this.item=null;this.item_img.visible=!1;this.item_txt.visible=!0;GameUtil.AddItemNewBag(b)}else GameApi.ShowScreen(!0,null,14)};e.setmaterial1=function(){if(this.material1){var b=this.material1;
this.material1=null;this.material1_img.visible=!1;this.material1_txt.visible=!0;GameUtil.AddItemNewBag(b)}else GameApi.ShowScreen(!0,null,15)};e.setmaterial2=function(){if(this.material2){var b=this.material2;this.material2=null;this.material2_img.visible=!1;this.material2_txt.visible=!0;GameUtil.AddItemNewBag(b)}else GameApi.ShowScreen(!0,null,16)};e.drawUpgrade=function(b){if(26==g_OpenIdx){var d=this.item_img,n=this.item_txt;this.item=b}else 27==g_OpenIdx?(d=this.material1_img,n=this.material1_txt,
this.material1=b):28==g_OpenIdx&&(d=this.material2_img,n=this.material2_txt,this.material2=b);d&&(null==b?(d.visible=!1,n.visible=!0):(b=GameUtil.ParseNameFormat(b.s.Looks),d.skin=b,d.visible=!0,n.visible=!1,d.loadImage(b,0,0,0,0,Laya.Handler.create(this,function(){d.x=33-d.width/2;d.y=33-d.height/2}))))};e.close=function(){Laya.stage.off("drawUpgrade",this,this.drawUpgrade);Laya.stage.off("upgradeOK",this,this.upgradeOK);Laya.stage.off("upgradeFaild",this,this.upgradeFaild);if(this.item){var b=this.item;
this.item=null;this.item_img.visible=!1;this.item_txt.visible=!0;GameUtil.AddItemNewBag(b)}this.material1&&(b=this.material1,this.material1=null,this.material1_img.visible=!1,this.material1_txt.visible=!0,GameUtil.AddItemNewBag(b));this.material2&&(b=this.material2,this.material2=null,this.material2_img.visible=!1,this.material2_txt.visible=!0,GameUtil.AddItemNewBag(b));this.removeSelf()};e.onMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.upgrade_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);
this.upgrade_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.upgrade_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseUp=function(){this.upgrade_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(b){this.upgrade_bg.x+=b.stageX-a.x;this.upgrade_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};return f}(upgradeUI),ZhaomuScene=function(e){function f(){f.__super.call(this);this.init()}new Laya.Point(0,0);var a=0;Laya.class(f,"ZhaomuScene",ZhaomuUI);f.prototype.init=
function(){this.img_url=0;this.btn_close.on(Laya.Event.CLICK,this,this.close);this.ZhaomuWin.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.startpos=new Laya.Point;this.but_quxiao.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.but_xiougai.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.but_fabu.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.but_zhaomu.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.check_dangq.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.check_all.on(Laya.Event.CLICK,
this,this.but_zhaomuClick);this.check_hh.on(Laya.Event.CLICK,this,this.but_zhaomuClick);"0"==g_Zmu_Quyu&&(this.check_dangq.selected=!0,this.check_hh.selected=!1,this.check_all.selected=!1);"2"==g_Zmu_Quyu&&(this.check_dangq.selected=!1,this.check_hh.selected=!0,this.check_all.selected=!1);"3"==g_Zmu_Quyu&&(this.check_dangq.selected=!1,this.check_hh.selected=!1,this.check_all.selected=!0);this.txt_lvmin.text=g_Zmu_MinLv;this.txt_lvmax.text=g_Zmu_MaxLv;this.txt_zmemo.text=g_Zmu_Memo};f.prototype.but_zhaomuClick=
function(b){var d=b.target.name;"check_dangq"==d?(this.check_dangq.selected=!0,this.check_hh.selected=!1,this.check_all.selected=!1):"check_all"==d?(this.check_all.selected=!0,this.check_dangq.selected=!1,this.check_hh.selected=!1):"check_hh"==d&&(this.check_hh.selected=!0,this.check_dangq.selected=!1,this.check_all.selected=!1);this.check_dangq.selected&&(g_Zmu_Quyu="0");this.check_all.selected&&(g_Zmu_Quyu="3");this.check_hh.selected&&(g_Zmu_Quyu="2");g_Zmu_MinLv=this.txt_lvmin.text;g_Zmu_MaxLv=
this.txt_lvmax.text;g_Zmu_Memo=this.txt_zmemo.text;"but_quxiao"==d?(g_Zmu_MinLv="0",g_Zmu_MaxLv="55",g_Zmu_Type="0",g_Zmu_Memo="",g_Zmu_Type="3",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()):"but_xiougai"==d?(g_Zmu_Type="2",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()):"but_fabu"==d?0>g_Zmu_MinLv?Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u62db\u52df\u7b49\u7ea7\u4e0d\u80fd\u5c0f\u4e8e0"}]):0==a?(GameApi.onHitText(this,b.target.x+b.target.width,b.target.y,["\u53d1\u5e03\u62db\u52df\u4fe1\u606f\u6bcf\u6b215W\u91d1\u5e01"]),a++):(a=0,g_Zmu_Type="1",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()):"but_zhaomu"==d&&(0>g_Zmu_MinLv?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u62db\u52df\u7b49\u7ea7\u4e0d\u80fd\u5c0f\u4e8e0"}]):
(g_Zmu_Type="0",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()))};f.prototype.onMouseDown=function(b){this.startpos.x=b.stageX;this.startpos.y=b.stageY;this.ZhaomuWin.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.ZhaomuWin.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.ZhaomuWin.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.prototype.onMouseUp=function(){this.ZhaomuWin.off(Laya.Event.MOUSE_MOVE,
this,this.onMouseMove)};f.prototype.onMouseMove=function(b){this.ZhaomuWin.x+=b.stageX-this.startpos.x;this.ZhaomuWin.y+=b.stageY-this.startpos.y;this.startpos.x=b.stageX;this.startpos.y=b.stageY};f.prototype.close=function(){this.removeSelf()};return f}(ZhaomuUI),Astart=function(){function e(){this.cost_stargiht=1;this._open=[];this._close=[];this.path_data=[];this.gridsSet=[];this.grids=this.cur_matx=null}e.prototype.setMapData=function(f,a){this.finder=new PathFinding.finders.AStarFinder({allowDiagonal:!0});
a&&(this.cur_id=f,this.cur_matx=a,this.maxX=this.cur_matx[0].length,this.maxY=this.cur_matx.length,this.path_data[f]={matrix:a},rockerlock=Actionlock=!1);this.setGrids(f)};e.prototype.setGrids=function(f){f&&(this.grids=new PathFinding.core.Grid(this.maxX,this.maxY,this.cur_matx))};e.prototype.obsdata=function(f){this.finder=new PathFinding.finders.AStarFinder({allowDiagonal:!0});this.cur_id=f;if(null==this.path_data[f])this.initpath(f);else if(this.cur_matx=this.path_data[f].matrix)this.maxX=this.cur_matx[0].length,
this.maxY=this.cur_matx.length,this.setGrids(f),rockerlock=Actionlock=!1};e.prototype.creategrid=function(f){matrix&&this.maxY<=matrix.length&&f==Mapmodule.sceneid&&(console.log("------------------------creategrid----------------------------------\x3e",this.cur_id,matrix.length),this.cur_matx=matrix,this.path_data[this.cur_id]=[],this.path_data[this.cur_id].matrix=matrix,this.setGrids(this.cur_id))};e.prototype.initpath=function(f){var a=this,b=user_site+"data/mapdata/matrix/"+f+"matrix.js",d=Laya.Browser.document.createElement("script");
d.src=b;d.setAttribute("type","text/javascript");d.setAttribute("src",b);d.onload=function(){matrix&&a.cur_id==f&&(a.maxX=matrix[0].length,a.maxY=matrix.length,rockerlock=Actionlock=!1,a.creategrid(f))};d.onerror=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5730\u56fe\u6587\u4ef6\u52a0\u8f7d\u9519\u8bef\uff01"+f,callfn:function(){}}])};Laya.Browser.document.getElementsByTagName("head")[0].appendChild(d)};e.prototype.findpath=function(f,a){if(null==this.path_data[this.cur_id])return null;
for(var b=0;b<ObjectManage.object_list.length;++b){var d=ObjectManage.object_list[b];(!d.data||d.data.record!=lockingID&&d.data.record!=playerID)&&(1==d.type||2==d.type||3==d.type)&&d.grid.x<this.grids.width&&d.grid.y<this.grids.height&&this.grids.setWalkableAt(d.grid.x,d.grid.y,!1)}f=this.finder.findPath(f.x,f.y,a.x,a.y,this.grids);this.ResetGrid(this.grids,this.cur_matx);return f};e.prototype.ResetGrid=function(f,a){for(var b,d=f.height,n=f.width,c=0;c<d;++c)for(var h=0;h<n;++h)b=f.nodes[c][h],
b.g=0,b.f=0,b.h=0,b.by=0,b.parent=null,b.opened=null,b.closed=null,b.tested=null,b.walkable=!0,b.walkable=a[c][h]?!1:!0};e.prototype.getmoveable=function(f,a){if(null==this.path_data[this.cur_id]||null==this.path_data[this.cur_id].matrix)return!1;for(var b=!1,d=0;d<ObjectManage.object_list.length;++d){var n=ObjectManage.object_list[d];if(!(n.data&&n.data.record==playerID||f==this.end.x&&a==this.end.y||n.is_die||n.grid.x!=f||n.grid.y!=a||1!=n.type&&2!=n.type&&3!=n.type)){b=!0;break}}if((d=this.path_data[this.cur_id].matrix)&&
d[0]&&a<d.length&&f<d[0].length)return 0==d[a][f]&&!b};e.prototype.createnode=function(f,a){var b=[];b.x=f;b.y=a;b.g=0;b.h=0;b.f=0;b.moveable=this.getmoveable(f,a);b.father=[];return b};e.prototype.calculateH=function(f,a){return(new Laya.Point(f.x,f.y)).distance(a.x,a.y)};e.prototype.isclose=function(f){for(var a=0;a<this._close.length;++a)if(this._close[a].x==f.x&&this._close[a].y==f.y)return!0;return!1};e.prototype.isopen=function(f){for(var a=0;a<this._open.length;++a)if(this._open[a].x==f.x&&
this._open[a].y==f.y)return!0;return!1};e.prototype.getpointdir=function(f){var a=[];0<f.y&&a.push(this.createnode(f.x,f.y-1));0<f.y&&0<f.x&&a.push(this.createnode(f.x-1,f.y-1));0<f.y&&f.x<this.maxX&&a.push(this.createnode(f.x+1,f.y-1));f.y<this.maxY&&a.push(this.createnode(f.x,f.y+1));f.y<this.maxY&&0<f.x&&a.push(this.createnode(f.x-1,f.y+1));f.y<this.maxY&&f.x<this.maxX&&a.push(this.createnode(f.x+1,f.y+1));0<f.x&&a.push(this.createnode(f.x-1,f.y));f.y<this.maxX&&a.push(this.createnode(f.x+1,f.y));
return a};e.prototype.find2path=function(f,a){for(var b=0;b<ObjectManage.object_list.length;++b){var d=ObjectManage.object_list[b];(!d.data||d.data.record!=lockingID&&d.data.record!=playerID)&&(1==d.type||2==d.type||3==d.type)&&d.grid.x<this.grids.width&&d.grid.y<this.grids.height&&this.grids.setWalkableAt(d.grid.x,d.grid.y,!1)}this._open=[];this._close=[];this.end=a;var n=this.createnode(f.x,f.y);n.g=0;n.h=this.calculateH(n,a);n.f=n.g+n.h;for(f=0;n.x!=a.x||n.y!=a.y;){if(150==f++)return null;var c=
this.getpointdir(n);for(b=0;b<c.length;++b)if(d=c[b],!this.isclose(d)&&d.moveable){var h=this.cost_stargiht+n.g,m=this.calculateH(d,a),g=h+m;if(this.isopen(d))for(var l=0;l<this._open.length;++l){var p=this._open[l];p.x==d.x&&p.y==d.y&&p.g>h&&(p.f=g,p.g=h,p.h=m,p.parent=n)}else d.g=h,d.h=m,d.f=g,d.father=n,this._open.push(d)}this._close.push(n);if(0==this._open.length)return 0;n=9999;for(b=d=0;b<this._open.length;++b)this._open[b].f<n&&(n=this._open[b].f,d=b);n=this._open[d];this._open.splice(d,1)}return n.father};
return e}(),CodeUtil=function(){function e(){}e._MAKELONG=function(f,a){return f&65535|(a&65535)<<16};e._MAKEWORD=function(f,a){return f&255|(a&255)<<8};e._LOWORD=function(f){return f&65535};e._HIWORD=function(f){return f>>16&65535};e._LOBYTE=function(f){return f&255};e._HIBYTE=function(f){return f>>8&255};e.getEncodeSize=function(f){f=4*f/3;return Math.floor(f)<f?Math.floor(f)+1:Math.floor(f)};e.getDecodeSize=function(f){return Math.floor(f-f/4)};e.getCodeMsgSize=function(f){var a=Math.floor(f);
return a<f?a+1:a};e.getFeatureLen=function(f){return this.getCodeMsgSize(4*f/3)};e.str2Bytes=function(f){var a=0,b=f.length;if(0!=b%2)return null;b/=2;for(var d=[],n=0;n<b;n++){var c=f.substr(a,2);c=parseInt(c,16);d.push(c);a+=2}return d};e.getKey=function(){return(Math.round(100*Math.random())%58<<24)+(Math.round(100*Math.random())%58<<16)+(Math.round(100*Math.random())%58<<8)+Math.round(100*Math.random())%58};e.getKeyValue=function(f){var a=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,
83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,60,61,62,64,91,92,93];var b=(f&4278190080)>>>24;var d=(f&16711680)>>>16;var n=(f&65280)>>>8;return String.fromCharCode(a[f&255])+String.fromCharCode(a[n])+String.fromCharCode(a[d])+String.fromCharCode(a[b])};return e}(),GameApi=function(){function e(){}e.ShowScreen=function(f,a,b,d){var n=GameUtil.InstanceOfMem(ScreenWUI);f?(n||(n=new ScreenWin,Laya.stage.addChild(n)),n.SearchItems(a,
b,d)):n&&n.removeSelf();n._zOrder=999};e.ShowDrug=function(f){var a=GameUtil.InstanceOfMem(DrugSetupUI);f?a||(a=new DrugSetup,Laya.stage.addChild(a)):a&&a.removeSelf()};e.Drugnullforidx=function(f){for(var a=!1,b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&g_BagItemsList[b].s.Name==f&&(a=!0);if(!a)for(b=0;b<g_DrugItemsList.length;b++)if(null!=g_DrugItemsList[b]&&g_DrugItemsList[b].s.Name==f){g_DrugItemsList[b]=null;Laya.stage.event("Drug_Item_ico");Laya.stage.event("ShowDrug_Items");g_DrugButNumber=
b;break}};e.autounpack=function(f,a,b){function d(h){for(var m=0;m<g_BagItemsList.length;m++){var g=g_BagItemsList[m];if(g&&""!=h&&g.s.Name==h)return g}return null}for(var n=b=0;n<g_BagItemsList.length;++n){var c=g_BagItemsList[n];c&&c.s.Name==a&&b++}if(b<=f&&g_unpackList[a])if(f=g_unpackList[a],-1!=f.indexOf("|"))for(f=f.split("|"),a=0;a<f.length;a++){if((b=d(f[a]))&&CanUserItem)return g_WaitItems.Items=b,GameUtil.DelBagItems(b.MakeIndex),Sendmessage.sendEat(0,b.MakeIndex,b.s.Name),!0}else if((b=
d(f))&&CanUserItem)return g_WaitItems.Items=b,GameUtil.DelBagItems(b.MakeIndex),Sendmessage.sendEat(0,b.MakeIndex,b.s.Name),!0;return!1};e.heroAutounpack=function(f,a,b){function d(h){for(var m=0;m<g_HeroBagItemsList.length;m++){var g=g_HeroBagItemsList[m];if(g&&""!=h&&g.s.Name==h)return g}return null}for(var n=b=0;n<g_HeroBagItemsList.length;++n){var c=g_HeroBagItemsList[n];c&&c.s.Name==a&&b++}if(b<=f&&g_unpackList[a])if(f=g_unpackList[a],-1!=f.indexOf("|"))for(f=f.split("|"),a=0;a<f.length;a++){if(b=
d(f[a]))return g_WaitItems.Items=b,GameUtil.DelHeroBagItems(b.MakeIndex),Sendmessage.heroEat(b.MakeIndex,b.s.Name),!0}else if(b=d(f))return g_WaitItems.Items=b,GameUtil.DelHeroBagItems(b.MakeIndex),Sendmessage.heroEat(b.MakeIndex,b.s.Name),!0;return!1};e.autofillrule=function(f,a,b){b=[];for(var d=0;d<g_BagItemsList.length;++d){var n=g_BagItemsList[d];if(n&&31!=n.s.StdMode&&n.s.StdMode==f&&n.s.Looks==a){for(var c=!0,h=0;h<g_DrugItemsList.length;++h)if(g_DrugItemsList[h]&&g_DrugItemsList[h].s.Name==
n.s.Name){c=!1;break}if(c){b=n;break}}}return b};e.autofillitem=function(f){g_DrugItemsList[g_DrugButNumber]=f;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);e.ShowScreen(!1);Laya.stage.event("Show_Bag_Item_ico")};e.ShowNewNpcShop=function(f){var a=GameUtil.InstanceOfMem(NewNpcShopUI);f?a||(a=new NewNpcShop,Laya.stage.addChild(a)):a&&a.removeSelf();f=GameUtil.InstanceOfMem(NewNpcWinUI);
GameUtil.InstanceOfMem(NewNpcShopUI)&&f&&f.close()};e.ShowNewSaleShop=function(f){var a=GameUtil.InstanceOfMem(NewSaleShopUI);f?a||(a=new NewSaleShop,Laya.stage.addChild(a)):a&&a.removeSelf();f=GameUtil.InstanceOfMem(NewNpcWinUI);GameUtil.InstanceOfMem(NewSaleShopUI)&&f&&f.close()};e.UpdateBagItemsDura=function(f,a,b){for(var d=0;d<g_BagItemsList.length;d++)null!=g_BagItemsList[d]&&g_BagItemsList[d].MakeIndex==f&&(g_BagItemsList[d].Dura=a,g_BagItemsList[d].DuraMax=b,console.log("UpdateBagItemsDura",
g_BagItemsList[d].s.Name),Laya.stage.event("Screen_Uptade_Items"))};e.fillitem=function(f,a,b){for(var d=null,n=0;n<g_BagItemsList.length;n++){var c=g_BagItemsList[n];if(null!=c){var h=!0;switch(b){case 1:h=0<c.s.AC;break;case 2:h=0<c.s.MAC;break;case 3:h=-1!=c.s.Name.indexOf("\u4f20\u9001")||-1!=c.s.Name.indexOf("\u56de\u57ce")}c.s.StdMode<=f&&c.s.AniCount>=a&&h&&-1==g_DrugItemsList.indexOf(c)&&(d=c)}}d&&e.autofillitem(d)};e.initdrugtobag=function(){var f=GameUtil.getSaveData("druglist");if(null!=
f){f=JSON.parse(f);for(var a=0;a<f.length;++a)if(g_DrugButNumber=a,null!=f[a].mode&&null!=f[a].looks){var b=this.autofillrule(f[a].mode,f[a].looks);0!=b.length&&this.autofillitem(b)}g_DrugButNumber=-1}};e.Showskillwin=function(f){var a=GameUtil.InstanceOfMem(SetSkillUI);f&&!a&&(a=new setSkill,Laya.stage.addChild(a))};e.SetSkillKey=function(f,a){if(0<=a)for(var b=0;b<g_UserMagicList.length;b++)if(g_UserMagicList[b].Def.wMagicId==f){g_UserMagicList[b].Key=a;f=0;1E3<=g_UserMagicList[b].Def.wMagicId&&
1500>=g_UserMagicList[b].Def.wMagicId&&(f=6);Sendmessage.SendMagicKey(g_UserMagicList[b].Def.wMagicId,a,f);break}};e.GetMagicDes=function(f){for(var a=0;a<skilldesclist.length;a++)if(-1!=skilldesclist[a].indexOf(f))return skilldesclist[a]};e.ShowLookHum=function(f,a){lookHumData=a;var b=GameUtil.InstanceOfMem(LookHumUI);f?(b||(b=new LookHum,Laya.stage.addChild(b)),b.ShowHum(a)):b&&b.removeSelf()};e.ShowMyShop=function(f,a){a=GameUtil.InstanceOfMem(NewMyShopUI);f?a||(a=new MyShop,Laya.stage.addChild(a)):
a&&a.removeSelf()};e.ShowMyShopMsg=function(f){var a=GameUtil.InstanceOfMem(MyShopMsgUI);f?a||(a=new MyShopMsg,Laya.stage.addChild(a)):a&&a.removeSelf()};e.AddMyShopItems=function(f){if(null!=f.Items)for(var a=0;a<g_MyShopList.length;a++)if(null==g_MyShopList[a]){var b={};b.Items=f.Items;b.Index=f.Index;b.nGold=f.nGold;b.nType=f.nType;g_MyShopList[a]=b;GameUtil.isMultiple(f.Items)?Laya.stage.event("item_hint",[f.Items,-f.Items.Dura]):Laya.stage.event("item_hint",[f.Items,-1]);g_WaitItems.Items=null;
break}};e.LookHumShop=function(f){var a=GameUtil.InstanceOfMem(LooksShopUI);f?a?a.initlist():(a=new LookShop,Laya.stage.addChild(a)):a&&a.removeSelf()};e.DelLookShopItems=function(f){for(var a=0;20>a;a++)if(G_BaiTanData.Item[a].MakeIndex==f){G_BaiTanData.Item[a].MakeIndex=0;Laya.stage.event("Update_Look_S_List");break}};e.DelMyShopItems=function(f){for(var a=0;20>a;a++)if(null!=g_MyShopList[a]&&g_MyShopList[a].Items.MakeIndex==f){g_MyShopList[a]=null;Laya.stage.event("Update_Shop_List");break}};e.StopMyShop=
function(){for(var f=0;f<g_MyShopList.length;f++)null!=g_MyShopList[f]&&(GameUtil.AddItemNewBag(g_MyShopList[f].Items),GameUtil.isMultiple(g_MyShopList[f].Items)?Laya.stage.event("item_hint",[g_MyShopList[f].Items,g_MyShopList[f].Items.Dura]):Laya.stage.event("item_hint",[g_MyShopList[f].Items,1]),g_MyShopList[f]=null)};e.ShowJiaoYi=function(f){var a=GameUtil.InstanceOfMem(JiaoYiWinUI);f?a||(a=new JiaoYiWin,Laya.stage.addChild(a)):a&&((f=GameUtil.InstanceOfMem(NewItemInfoUI))&&f.removeSelf(),g_OpenJiaoYi=
!1,a.removeSelf())};e.AddJiaoYiItems=function(f){for(var a=!0,b=0;b<g_MyJiaoYiList.length;b++)if(null==g_MyJiaoYiList[b]){g_MyJiaoYiList[b]=f;GameUtil.isMultiple(f)?(a=GameUtil.checkMaterialItemCanBeStacked(f)?f.Dura+1:f.Dura,Laya.stage.event("item_hint",[f,-a])):Laya.stage.event("item_hint",[f,-1]);Laya.stage.event("Update_Me_List_Refresh");a=!1;break}return a};e.DelJiaoYiItems=function(f){for(var a=0;a<g_MyJiaoYiList.length;a++)if(null!=g_MyJiaoYiList[a]&&g_MyJiaoYiList[a].MakeIndex==f){GameUtil.isMultiple(g_MyJiaoYiList[a])?
(f=GameUtil.checkMaterialItemCanBeStacked(g_MyJiaoYiList[a])?g_MyJiaoYiList[a].Dura+1:g_MyJiaoYiList[a].Dura,Laya.stage.event("item_hint",[g_MyJiaoYiList[a],f])):Laya.stage.event("item_hint",[g_MyJiaoYiList[a],1]);g_MyJiaoYiList[a]=null;Laya.stage.event("Update_Me_List_Refresh");break}};e.CloseJiaoYi=function(){for(var f=0;f<g_MyJiaoYiList.length;f++)if(null!=g_MyJiaoYiList[f]){if(GameUtil.isMultiple(g_MyJiaoYiList[f])){var a=GameUtil.checkMaterialItemCanBeStacked(g_MyJiaoYiList[f])?g_MyJiaoYiList[f].Dura+
1:g_MyJiaoYiList[f].Dura;Laya.stage.event("item_hint",[g_MyJiaoYiList[f],a])}else Laya.stage.event("item_hint",[g_MyJiaoYiList[f],1]);GameUtil.AddItemNewBag(g_MyJiaoYiList[f]);g_MyJiaoYiList[f]=null}};e.AddHumJiaoYiItems=function(f){if(null!=f)for(var a=0;a<g_HumJiaoYiList.length;a++)if(null==g_HumJiaoYiList[a]){g_HumJiaoYiList[a]=f;Laya.stage.event("Update_Hum_List_Refresh");break}};e.DelHumJiaoYiItems=function(f){for(var a=0;a<g_HumJiaoYiList.length;a++)if(null!=g_HumJiaoYiList[a]&&g_HumJiaoYiList[a].MakeIndex==
f){g_HumJiaoYiList[a]=null;Laya.stage.event("Update_Hum_List_Refresh");break}};e.GetUseItemLJ=function(f,a,b,d,n,c,h){var m=f;a=null;var g=[],l=[];null==lookHumData?a=g_UserItemList:c?a=lookHumData.UseItems:a=g_UserItemList;if(h){d=d.split("~&");for(f=0;f<d.length-1;f++)b=d[f].split("~#")[1],l.push(b);for(b=1;b<l.length;b+=2){f=Get2RGB(249);c=l[b];for(d=0;d<a.length;d++)if(a[d]&&c==a[d].s.Name&&-1==g.indexOf(a[d].MakeIndex)){g.push(a[d].MakeIndex);f=Get2RGB(l[b-1]);break}n.push(c+"/*/"+f)}}else if(1==
b){for(g=0;g<a.length;g++)if(a[g]&&f==a[g].s.Name){m+="/*/"+Get2RGB(254);break}n.push(m)}else for(f=0;f<d.length-1;f++){b=d[f];l=b.split("~#");b=l[1];for(c=0;c<a.length;c++)if(a[c]&&l[1]==a[c].s.Name&&-1==g.indexOf(a[c].MakeIndex)){g.push(a[c].MakeIndex);b+="/*/"+Get2RGB(254);break}n.push(b)}};e.GomUseItemCnt=function(f,a){var b=0;if(f){f=f.split("|");var d=null;null==lookHumData?d=g_UserItemList:a?d=lookHumData.UseItems:d=g_UserItemList;for(a=0;a<d.length;a++)if(null!=d[a]){a:{var n=d[a].s.Name;
for(var c=0;c<f.length;c++)if(f[c]&&(-1!=f[c].indexOf("/")?f[c].split("/")[1]:f[c])==n){f.splice(c,1);n=!0;break a}n=!1}n&&b++}}return b};e.GetUseItemCnt=function(f,a,b){var d=0,n=null,c=[];null==lookHumData?n=g_UserItemList:a?n=lookHumData.UseItems:n=g_UserItemList;if(b)for(f=f.split("~&"),a=1;a<f.length-1;a+=2){b=f[a].split("~#")[1];for(var h=0;h<n.length;h++)if(n[h]&&b==n[h].s.Name&&-1==c.indexOf(n[h].MakeIndex)){c.push(n[h].MakeIndex);d++;break}}else for(a=0;a<f.length-1;++a)for(b=f[a].split("~#")[1],
h=0;h<n.length;h++)if(null!=n[h]&&b==n[h].s.Name&&-1==c.indexOf(n[h].MakeIndex)){c.push(n[h].MakeIndex);d++;break}return d};e.GetUseItemCntByName=function(f,a){var b=null;null==lookHumData?b=g_UserItemList:a?b=lookHumData.UseItems:b=g_UserItemList;for(a=0;a<b.length;++a)if(null!=b[a]&&b[a].s.Name==f)return!0;return!1};e.setItemBlendMode=function(f,a){};e.AllItemListSelectItem=function(f){for(var a=0;a<AllItemList.length;a++)if(AllItemList[a].itemname==f)return AllItemList[a];return null};e.GetGlobalCfg=
function(f){return GlobalCfglist[f]};e.setLocalData=function(f,a){for(var b=0;b<f.length;b++){var d=f[b];d&&a[b]&&(void 0!=d.isshow&&(d.isshow=a[b][0]),void 0!=d.ispickup&&(d.ispickup=a[b][1]),void 0!=d.special&&(d.special=a[b][2]),void 0!=d.prompt&&(d.prompt=a[b][3]),void 0!=d.isExclude&&(d.isExclude=a[b][0]))}};e.initRoleSet=function(){var f=GameUtil.getSaveData("username"),a=GameUtil.getSaveData(f+g_playerName+"role_set_itemlist1");a&&(g_pickPlan1=a=JSON.parse(a));if(a=GameUtil.getSaveData(f+g_playerName+
"role_set_itemlist2"))g_pickPlan2=a=JSON.parse(a);if(a=GameUtil.getSaveData(f+g_playerName+"role_set_monsterlist"))a=JSON.parse(a),this.setLocalData(AllMonsterList,a);null==g_serverconfigtxt.gamelist?this.setDefault():this.setDefaultWEB();if(f=GameUtil.getSaveData(f+g_playerName+"role_set_cfglist"))g_GameConfig&&GlobalCfglist.boUpdate?null==g_serverconfigtxt.gamelist?this.setDefault():this.setDefaultWEB():GlobalCfglist=JSON.parse(f),1==GlobalCfglist.pickPlan&&g_pickPlan1?this.setLocalData(AllItemList,
g_pickPlan1):2==GlobalCfglist.pickPlan&&g_pickPlan2&&this.setLocalData(AllItemList,g_pickPlan2),Gameconfig.setItemlist(),Gameconfig.setMonsterList(),G_SHOW_ROLE_HP=GlobalCfglist.showhp,G_SHOW_EXP=GlobalCfglist.showExp,G_SHOW_NAME=GlobalCfglist.ShowName,G_SHOW_TITLE=GlobalCfglist.ShowTitle,void 0!=GlobalCfglist.doubleRockerLoaction&&null!=GlobalCfglist.doubleRockerLoaction&&""!=GlobalCfglist.doubleRockerLoaction&&(GlobalCfglist.doubleRocker=0==GlobalCfglist.doubleRockerLoaction?!1:!0),Laya.stage.event("switchRocker"),
this.syncViewScale();else{1==g_ClientConfig.boAutoCHangePoison&&(GlobalCfglist.d_autoskill_1="\u4e92\u6362");GlobalCfglist.d_autoskill_7=30;GlobalCfglist.d_autoskill_8=30;GlobalCfglist.hppercentagetext=75;GlobalCfglist.hptimetext=5;GlobalCfglist.hp_vs=75;GlobalCfglist.hp_time=5;GlobalCfglist.hppercentagetextH=75;GlobalCfglist.hptimetextH=5;GlobalCfglist.hp_vsH=75;GlobalCfglist.hp_timeH=5;GlobalCfglist.mppercentagetext=30;GlobalCfglist.mptimetext=5;GlobalCfglist.mp_vs=30;GlobalCfglist.mp_time=5;GlobalCfglist.mppercentagetextH=
30;GlobalCfglist.mptimetextH=5;GlobalCfglist.mp_vsH=30;GlobalCfglist.mp_timeH=5;GlobalCfglist.hppercentagetext1=30;GlobalCfglist.hptimetext1=1;GlobalCfglist.Hp_mp_vs=30;GlobalCfglist.hp_mp_time=1;GlobalCfglist.hppercentagetext2=50;GlobalCfglist.mptimetext1=1;GlobalCfglist.Hp_mp_vs2=50;GlobalCfglist.hp_mp_time2=1;GlobalCfglist.hppercentagetext1H=30;GlobalCfglist.hptimetext1H=1;GlobalCfglist.Hp_mp_vsH=30;GlobalCfglist.hp_mp_timeH=1;GlobalCfglist.hppercentagetext2H=50;GlobalCfglist.mptimetext1H=1;GlobalCfglist.Hp_mp_vs2H=
50;GlobalCfglist.hp_mp_time2H=1;GlobalCfglist.tppercentagetext=15;GlobalCfglist.tptimetext=20;GlobalCfglist.tp_vs=15;GlobalCfglist.tp_time_vs=20;GlobalCfglist.tppercentagetext1=15;GlobalCfglist.tptimetext1=20;GlobalCfglist.tp_vs1=15;GlobalCfglist.tp_time_vs2=20;GlobalCfglist.tppercentagetextH=15;GlobalCfglist.tptimetextH=30;GlobalCfglist.tp_vsH=15;GlobalCfglist.tp_time_vsH=30;GlobalCfglist.itemtype=0;GlobalCfglist.pickPlan=1;GlobalCfglist.exercise_list="";GlobalCfglist.exercise_time=1;GlobalCfglist.exercise_slider=
1;GlobalCfglist.ds_summon_list="\u53ec\u5524\u9ab7\u9ac5";GlobalCfglist.ds_cure_list="\u6cbb\u6108\u672f";GlobalCfglist.exercise_ds_list="\u53ec\u5524\u795e\u517d";GlobalCfglist.ds_cure_limit=50;GlobalCfglist.ds_cure_time=3;GlobalCfglist.ds_limit_slider=50;GlobalCfglist.ds_time_slider=3;GlobalCfglist.group_skill_num=2;GlobalCfglist.group_skill_slider=20;if(void 0==GlobalCfglist.manualHurricaneSkill||null==GlobalCfglist.manualHurricaneSkill)GlobalCfglist.manualHurricaneSkill=!0;if(void 0==GlobalCfglist.manualIceRoar||
null==GlobalCfglist.manualIceRoar)GlobalCfglist.manualIceRoar=!0;if(void 0==GlobalCfglist.manualBombFire||null==GlobalCfglist.manualBombFire)GlobalCfglist.manualBombFire=!0;if(void 0==GlobalCfglist.manualIncendiaryShower||null==GlobalCfglist.manualIncendiaryShower)GlobalCfglist.manualIncendiaryShower=!0;if(void 0==GlobalCfglist.manualFastLight||null==GlobalCfglist.manualFastLight)GlobalCfglist.manualFastLight=!0;GlobalCfglist.doubleRockerLoaction=GlobalCfglist.doubleRocker;GlobalCfglist.dropShowChecks=
[!0,!0,!0,!0,!0,!0,!0];GlobalCfglist.pickUpCheckss=[!0,!0,!0,!0,!0,!0,!0];Gameconfig.setItemlist();Gameconfig.setMonsterList();this.syncViewScale();Laya.stage.event("switchRocker")}};e.syncViewScale=function(){GlobalCfglist.viewScale&&(Mapmodule.root.scale(GlobalCfglist.viewScale/100,GlobalCfglist.viewScale/100),Mapmodule.onLocation())};e.syncDelayShow=function(){Laya.stage.event("syncDelayShow")};e.setDefault=function(){g_GameConfig&&(GlobalCfglist.backmusic=1==g_GameConfig.nYingYue,GlobalCfglist.clear=
1==g_GameConfig.nShiTi,GlobalCfglist.nameshow1=1==g_GameConfig.nMonName,GlobalCfglist.nameshow2=1==g_GameConfig.nNpcName,GlobalCfglist.nameshow3=1==g_GameConfig.nShowName,GlobalCfglist.nameshow4=1==g_GameConfig.nBBName,GlobalCfglist.showhp=1==g_GameConfig.nXueTiao,GlobalCfglist.showExp=1==g_GameConfig.nShowExp,GlobalCfglist.ShowName=1==g_GameConfig.nOnlyName,GlobalCfglist.ShowTitle=1==g_GameConfig.nChenghao,GlobalCfglist.banCkilcMove=1==g_GameConfig.nJingZhiMov,GlobalCfglist.unpack=1==g_GameConfig.nAutoPack,
GlobalCfglist.notLock=1==g_GameConfig.nJingZhiLock,GlobalCfglist.hidePlayer=1==g_GameConfig.nPingBiHum,GlobalCfglist.hideMonster=1==g_GameConfig.nPingBiMon,GlobalCfglist.heroeqsecure=1==g_GameConfig.nHeroDun,GlobalCfglist.z_autoskill_1=1==g_GameConfig.nDaoDaoCiSha,GlobalCfglist.z_autoskill_2=1==g_GameConfig.nAutoLieHuo,GlobalCfglist.z_autoskill_3=1==g_GameConfig.nBanYue,GlobalCfglist.z_autoskill_4=1==g_GameConfig.nAutoKaiTian,GlobalCfglist.zs_gwcs=1==g_GameConfig.nGeWeiCiSsha,GlobalCfglist.zs_lyjf=
1==g_GameConfig.nAutoLongYing,GlobalCfglist.zs_zrjf=1==g_GameConfig.nAutoZhuRi,GlobalCfglist.d_autoskill_2=1==g_GameConfig.nChiXuYingShen,GlobalCfglist.d_autoskill_3=1==g_GameConfig.nAutoFu,GlobalCfglist.d_autoskill_4=1==g_GameConfig.nMyZiYu,GlobalCfglist.f_autoskill_1=1==g_GameConfig.nChiXuDun,GlobalCfglist.f_keepskill_1=1==g_GameConfig.nChixuShifa,GlobalCfglist.autohp=1==g_GameConfig.nAutoHP,GlobalCfglist.automp=1==g_GameConfig.nAutoMP,GlobalCfglist.autohp_mp=1==g_GameConfig.nShunAutoHP,GlobalCfglist.autohp_mp2=
1==g_GameConfig.nShunAutoMP,GlobalCfglist.autotp=1==g_GameConfig.nChuanSongHP,GlobalCfglist.autotp1=1==g_GameConfig.nChuanSongMP,GlobalCfglist.exercise=1==g_GameConfig.nAutoLianGong,GlobalCfglist.autohpH=1==g_GameConfig.nHeroAutoHP,GlobalCfglist.autompH=1==g_GameConfig.nHeroAutoMP,GlobalCfglist.autohp_mpH=1==g_GameConfig.nHeroShunAutoHP,GlobalCfglist.autohp_mp2H=1==g_GameConfig.nHeroShunAutoMP,GlobalCfglist.autotpH=1==g_GameConfig.nHeroZhaoHui,GlobalCfglist.single_fs=1==g_GameConfig.nFaShiDanTi,GlobalCfglist.group_fs=
1==g_GameConfig.nFaShiQunTi,GlobalCfglist.single_ds=1==g_GameConfig.nDaoShiDanTi,GlobalCfglist.ds_summon=1==g_GameConfig.nDaoShiBB,GlobalCfglist.ds_cure=1==g_GameConfig.nDaoShiZhiLiao,GlobalCfglist.poison_ds=1==g_GameConfig.nDaoShiShiDu,GlobalCfglist.group_ds=1==g_GameConfig.nDaoShiQunTi,GlobalCfglist.smooth=1==g_GameConfig.nSmooth,GlobalCfglist.showBlue=1==g_GameConfig.nHumShowBlue,GlobalCfglist.d_autoskill_5=1==g_GameConfig.nAutoMagicMo,GlobalCfglist.d_autoskill_6=1==g_GameConfig.nAutoMagicMFang,
GlobalCfglist.auto_dodge=!0,GlobalCfglist.delayShow=!0,GlobalCfglist.humsimple=!1,GlobalCfglist.monsimple=!1,GlobalCfglist.weaponsimple=!1,GlobalCfglist.gameVoice=50)};e.setDefaultWEB=function(){g_GameConfig=g_GameConfigWEB.funActivity.gameConfig;null!=g_GameConfig&&(GlobalCfglist.backmusic=1==g_GameConfig.yingYue,GlobalCfglist.clear=1==g_GameConfig.shiTi,GlobalCfglist.nameshow1=1==g_GameConfig.monName,GlobalCfglist.nameshow2=1==g_GameConfig.npcName,GlobalCfglist.nameshow3=1==g_GameConfig.showName,
GlobalCfglist.nameshow4=1==g_GameConfig.bbName,GlobalCfglist.showhp=1==g_GameConfig.xueTiao,GlobalCfglist.showExp=1==g_GameConfig.showExp,GlobalCfglist.ShowName=1==g_GameConfig.onlyName,GlobalCfglist.ShowTitle=1==g_GameConfig.chenghao,GlobalCfglist.banCkilcMove=1==g_GameConfig.jingZhiMov,GlobalCfglist.unpack=1==g_GameConfig.autoPack,GlobalCfglist.notLock=1==g_GameConfig.jingZhiLock,GlobalCfglist.hidePlayer=1==g_GameConfig.pingBiHum,GlobalCfglist.hideMonster=1==g_GameConfig.pingBiMon,GlobalCfglist.heroeqsecure=
1==g_GameConfig.heroDun,GlobalCfglist.z_autoskill_1=1==g_GameConfig.daoDaoCiSha,GlobalCfglist.z_autoskill_2=1==g_GameConfig.autoLieHuo,GlobalCfglist.z_autoskill_3=1==g_GameConfig.banYue,GlobalCfglist.z_autoskill_4=1==g_GameConfig.autoKaiTian,GlobalCfglist.zs_gwcs=1==g_GameConfig.geWeiCiSsha,GlobalCfglist.zs_lyjf=1==g_GameConfig.autoLongYing,GlobalCfglist.zs_zrjf=1==g_GameConfig.autoZhuRi,GlobalCfglist.d_autoskill_2=1==g_GameConfig.chiXuYingShen,GlobalCfglist.d_autoskill_3=1==g_GameConfig.autoFu,GlobalCfglist.d_autoskill_4=
1==g_GameConfig.myZiYu,GlobalCfglist.f_autoskill_1=1==g_GameConfig.chiXuDun,GlobalCfglist.f_keepskill_1=1==g_GameConfig.chixuShifa,GlobalCfglist.autohp=1==g_GameConfig.autoHP,GlobalCfglist.automp=1==g_GameConfig.autoMP,GlobalCfglist.autohp_mp=1==g_GameConfig.shunAutoHP,GlobalCfglist.autohp_mp2=1==g_GameConfig.shunAutoMP,GlobalCfglist.autotp=1==g_GameConfig.chuanSongHP,GlobalCfglist.autotp1=1==g_GameConfig.chuanSongMP,GlobalCfglist.exercise=1==g_GameConfig.autoLianGong,GlobalCfglist.autohpH=1==g_GameConfig.heroAutoHP,
GlobalCfglist.autompH=1==g_GameConfig.heroAutoMP,GlobalCfglist.autohp_mpH=1==g_GameConfig.heroShunAutoHP,GlobalCfglist.autohp_mp2H=1==g_GameConfig.heroShunAutoMP,GlobalCfglist.autotpH=1==g_GameConfig.heroZhaoHui,GlobalCfglist.single_fs=1==g_GameConfig.faShiDanTi,GlobalCfglist.group_fs=1==g_GameConfig.faShiQunTi,GlobalCfglist.single_ds=1==g_GameConfig.daoShiDanTi,GlobalCfglist.ds_summon=1==g_GameConfig.daoShiBB,GlobalCfglist.ds_cure=1==g_GameConfig.daoShiZhiLiao,GlobalCfglist.poison_ds=1==g_GameConfig.daoShiShiDu,
GlobalCfglist.group_ds=1==g_GameConfig.daoShiQunTi,GlobalCfglist.smooth=1==g_GameConfig.smooth,GlobalCfglist.showBlue=1==g_GameConfig.humShowBlue,GlobalCfglist.d_autoskill_5=1==g_GameConfig.autoMagicMo,GlobalCfglist.d_autoskill_6=1==g_GameConfig.autoMagicMFang,GlobalCfglist.auto_dodge=1==g_GameConfig.guaJiZiDongDuoBi,GlobalCfglist.delayShow=1==g_GameConfig.yanChiXianShi,GlobalCfglist.humsimple=1==g_GameConfig.renWuJianZhuang,GlobalCfglist.monsimple=1==g_GameConfig.guaiWuJianZhuang,GlobalCfglist.weaponsimple=
1==g_GameConfig.wuQiJianZhuang,GlobalCfglist.pickItemsFirst=1==g_GameConfig.youXianShiQuWuPin,GlobalCfglist.gameVoice=g_GameConfig.youXiYinLiang+1,GlobalCfglist.viewScale=g_GameConfig.shiTuSuoFang,GlobalCfglist.manualHurricaneSkill=g_GameConfig.shouDongXFengPo,GlobalCfglist.manualIceRoar=g_GameConfig.shouDongBPXiao,GlobalCfglist.manualBombFire=g_GameConfig.shouDongBLHYan,GlobalCfglist.manualIncendiaryShower=g_GameConfig.shouDongLXHYu,GlobalCfglist.manualFastLight=g_GameConfig.shouDongJGDYing,GlobalCfglist.doubleRocker=
g_GameConfig.shuangYaoGan,GlobalCfglist.autoWear=g_GameConfig.autoWear,GlobalCfglist.maxPackSize=g_GameConfigWEB.funActivity.maxPackSize,maxPackSizeBackup=GlobalCfglist.maxPackSize,GlobalCfglist.boUpdate=g_GameConfig.update,Laya.stage.event("switchRocker"),e.syncDelayShow())};e.onHitText=function(f,a,b,d){var n=f.getChildByName("yangdaweigood");a=3;b=0;g_main_npcdialog=n=n?n:new Laya.Image;g_main_npcdialogopen=!0;n.removeChildren();n.visilbe=!0;n.name="yangdaweigood";n.skin="gameres/ui/buffkuang.png";
n.sizeGrid="4,4,4,4";n.width=100;n.height=100;n.pos(0,30);f.addChild(n);for(var c=0;c<d.length;c++){if(""!=d[c]){if(-1!=d[c].indexOf("#")){var h=d[c].split("#"),m=Get2RGB(h[0]);h=h[1]}else m="#ffffff",h=d[c];var g=new Laya.Text;g.fontSize=12;g.color=m;g.text=h;g.pos(3,a);g.width>b&&(b=g.width+7);n.addChild(g)}a+=16}n.pos(0,-20);f.but_fabu.addChild(n);n.width=b;n.height=20*d.length};e.GetBagIndexItems=function(f){for(var a=0;a<g_BagItemsList.length;a++)if(null!=g_BagItemsList[a]&&g_BagItemsList[a].MakeIndex==
f)return g_BagItemsList[a]};e.Trim=function(f,a){f=f.replace(/(^\s+)|(\s+$)/g,"");"g"==a.toLowerCase()&&(f=f.replace(/\s/g,""));return f};e.ShowLookShouS=function(f){var a=GameUtil.InstanceOfMem(LookShousUI);a||(a=new LookShous,Laya.stage.addChild(a));null!=f&&a.ShouShiShow(f)};e.ShowShouShi=function(f){var a=GameUtil.InstanceOfMem(ShousWinUI);a||(a=new ShousWin,Laya.stage.addChild(a));null!=f&&a.ShouShiShow(f)};e.ShoushiBox=function(f){var a=GameUtil.InstanceOfMem(ShoushiUI);a||(a=new ShoushiWin,
Laya.stage.addChild(a));null!=f&&a.ShowShoushi(f)};e.LookShoushiBox=function(f){var a=GameUtil.InstanceOfMem(LookShoushiUI);a||(a=new LookShoushi,Laya.stage.addChild(a));null!=f&&a.ShowShoushi(f)};e.newcount=function(f){for(var a=0,b=!0,d=0;d<f.text.length;++d)" "==f.text[d]?a+=3:b=!1;return b?a:f.width};e.GetSpWidth=function(f){var a=0;f.replace(/ /g,function(b,d){a++});return 6*a-3*a};e.GetSpWidth2=function(f){for(var a=0,b=f.length,d,n=0;n<b;n++)d=f.charCodeAt(n),a=0<=d&&128>=d?a+1:a+2;return 6*
a};e.ShowNewNpcDlgEx=function(f){var a=GameUtil.InstanceOfMem(NewNpcWinUI);a||(a=new NewNpcWin,Laya.stage.addChild(a));a.SetVisible(f);GameUtil.InstanceOfMem(NewNpcShopUI)&&a&&a.close()};e.ShowNewNpcDlg=function(f){var a=GameUtil.InstanceOfMem(NewNpcWinUI),b=GameUtil.InstanceOfMem(NewNpcShopUI);!a&&f&&(a=new NewNpcWin,Laya.stage.addChild(a));b&&!f&&b.close();a&&!f&&a.close()};e.IntNewNpcDLG=function(f){(f=GameUtil.InstanceOfMem(NewNpcWinUI))&&f.intRes()};e.GetPakTo3Img=function(f,a){if(0<=f&&f<g_imgNpcPak.length)return f=
g_imgNpcPak[f],a=(Array(5).join("0")+(0+a)).slice(-5),"data/"+f+"/"+a+".png"};e.GetPakTo2Img=function(f,a){if(0<=f&&f<g_pak_list.length)return"data/"+g_pak_list[f]+"/"};e.GetSelShopItemsByIndex=function(f){for(var a=0;20>a;a++)if(null!=G_BaiTanData&&null!=G_BaiTanData.Item[a]&&G_BaiTanData.Item[a].MakeIndex==f)return G_BaiTanData.Item[a]};e.IsOverLapItem=function(f){if(f)return""!=f.s.Name&&(17==f.s.StdMode||18==f.s.StdMode||40==f.s.StdMode||41==f.s.StdMode||(31==f.s.StdMode||211==f.s.StdMode)&&30==
f.s.Shape&&0<f.s.Reserved1)};e.GetNewMagicLevelString=function(f){var a="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e".split(""),b="";if(0<f){b="\u5f3a\u5316";if(100<=f)b+=a[0]+a[10];else if(10>f)b+=a[f-1];else{var d=Math.floor(f/10);1!=d&&(b+=a[d-1]);b+=a[9];d=f%10;0<d&&(b+=a[d-1])}b+="\u91cd"}return b};e.GetItemScore=function(f){var a=0,b=f.s;if(f&&b&&g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen){switch(b.StdMode){case 5:case 6:case 10:case 11:case 15:case 16:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 48:case 53:case 62:case 63:case 64:case 65:case 66:case 67:case 68:case 69:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 178:a=
g_ItemScoreRecord.DC*b.DC+g_ItemScoreRecord.MaxDC*b.MaxDC+g_ItemScoreRecord.MC*b.MC+g_ItemScoreRecord.MaxMC*b.MaxMC+g_ItemScoreRecord.SC*b.SC+g_ItemScoreRecord.MaxSC*b.MaxSC+g_ItemScoreRecord.MaxHP*b.HP;switch(b.stdMode){case 19:a+=g_ItemScoreRecord.AntiMC*b.MaxAC;a+=g_ItemScoreRecord.Lucky*b.MaxMAC;break;case 20:case 24:a+=g_ItemScoreRecord.Preciseness*b.MaxAC;a+=g_ItemScoreRecord.Alacrity*b.MaxMAC;break;case 21:a+=g_ItemScoreRecord.HPRecover*b.MaxAC;a+=g_ItemScoreRecord.MPRecover*b.MaxMAC;break;
case 23:a+=g_ItemScoreRecord.AckSpeed*b.AC;a+=g_ItemScoreRecord.AntiPoison*b.MaxAC;a+=g_ItemScoreRecord.PoisonRecover*b.MaxMAC;break;default:a+=g_ItemScoreRecord.AC*b.AC,a+=g_ItemScoreRecord.MaxAC*b.MaxAC,a+=g_ItemScoreRecord.MAC*b.MAC,a+=g_ItemScoreRecord.MaxMAC*b.MaxMAC}0<b.NewValue[0]&&(a+=b.NewValue[0]*g_ItemScoreRecord.Crit);0<b.NewValue[1]&&(a+=b.NewValue[1]*g_ItemScoreRecord.ADDHurt);0<b.NewValue[2]&&(a+=b.NewValue[2]*g_ItemScoreRecord.DecAC);0<b.NewValue[3]&&(a+=b.NewValue[3]*g_ItemScoreRecord.DecMAC);
0<b.NewValue[4]&&(a+=b.NewValue[4]*g_ItemScoreRecord.CloseDefense);0<b.NewValue[5]&&(a+=b.NewValue[5]*g_ItemScoreRecord.Rebound);0<b.NewValue[6]&&(a+=b.NewValue[6]*g_ItemScoreRecord.HPRecover);0<b.NewValue[7]&&(a+=b.NewValue[7]*g_ItemScoreRecord.ItemAttachEXP);0<b.NewValue[8]&&(a+=b.NewValue[8]*g_ItemScoreRecord.AddDnger);0<b.NewValue[9]&&(a+=b.NewValue[9]*g_ItemScoreRecord.TeamUpHurt);0<b.NewValue[10]&&(a+=b.NewValue[10]*g_ItemScoreRecord.ADDHurt);0<b.NewValue[13]&&(a+=b.NewValue[13]*g_ItemScoreRecord.MPRecover);
120==b.AniCount&&(a+=g_ItemScoreRecord.FastTrain);121==b.AniCount&&(a+=g_ItemScoreRecord.ProbeNecklace);111==b.AniCount&&(a+=g_ItemScoreRecord.HideMode);112==b.AniCount&&(a+=g_ItemScoreRecord.Teleport);113==b.AniCount&&(a+=g_ItemScoreRecord.Paralysis);114==b.AniCount&&(a+=g_ItemScoreRecord.Revival);115==b.AniCount&&(a+=g_ItemScoreRecord.FlameRing);116==b.AniCount&&(a+=g_ItemScoreRecord.RecoveryRing);118==b.AniCount&&(a+=g_ItemScoreRecord.MagicShield);119==b.AniCount&&(a+=g_ItemScoreRecord.MuscleRing);
135==b.AniCount&&(a+=g_ItemScoreRecord.MoXieSuite);138==b.AniCount&&(a+=g_ItemScoreRecord.HongMoSuite);139==b.AniCount&&(a+=g_ItemScoreRecord.UnParalysis);140==b.AniCount&&(a+=g_ItemScoreRecord.SupermanItem);143==b.AniCount&&(a+=g_ItemScoreRecord.UnMagicShield);144==b.AniCount&&(a+=g_ItemScoreRecord.UnRevival);171==b.AniCount&&(a+=g_ItemScoreRecord.NoDropItem);172==b.AniCount&&(a+=g_ItemScoreRecord.NoDropUseItem);150==b.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.MagicShield);151==
b.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.FlameRing);152==b.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.RecoveryRing);153==b.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.MuscleRing);154==b.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.FlameRing);155==b.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.RecoveryRing);156==b.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.MuscleRing);157==b.AniCount&&(a=
a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.Paralysis);158==b.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.MagicShield);159==b.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.ProbeNecklace);160==b.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.Revival);161==b.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.Revival);162==b.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.Revival);163==b.AniCount&&(a=a+g_ItemScoreRecord.UnParalysis+
g_ItemScoreRecord.Teleport);180==b.AniCount&&(a+=g_ItemScoreRecord.DropExp);181==b.AniCount&&(a+=g_ItemScoreRecord.DroLevel)}if(g_ItemScoreRecord.boItemBaseScore)for(b=0;b<g_EquipScoreList.length;b++){var d=g_EquipScoreList[b].split(",");if(f.s.Name==d[1]){a+=parseInt(d[2]);break}}}(f=this.addExScore(f))&&(a+=f);return a};e.addExScore=function(f){for(var a=0;a<g_EquipScoreExList.length;a++)if(g_EquipScoreExList[a]&&g_EquipScoreExList[a].MakeIndex==f.MakeIndex)return parseInt(g_EquipScoreExList[a].iExtItemScore)};
return e}(),GameMission=function(){function e(){}var f=[];e.GetMissStringInfo=function(a,b,d){for(var n=0,c="",h="";;){if((10==d||11==d)&&""!=a&&""!=MissStringArray[n]){var m=MissStringArray[n];if(m&&0<m.indexOf(a))if(0<=b.indexOf("$")){for(m=b;;){var g=m.indexOf("$"),l=m.indexOf(";");if(-1==g)break;if(0<=g){l=m.substr(g+1,l-g-1);l="$"+l+";";var p=m.substr(0,g);""!=p&&(h+=p);m=m.substr(g,m.length);m=m.replace(l,"");g=m.indexOf(l);if(0==g)break;p=m.substr(0,g);m=m.substr(g+l.length,m.length);""!=p&&
(c+=p+"\\")}}this.SetMissionStrIng(a,h,c)}else this.SetMissionStrIng(a,b,"")}n+=1;if(n>=MissStringArray.length)break}};e.GetMissStringArray=function(a,b,d){var n=20;if(0<=a&&9>=a&&-1!=b.indexOf("$"))for(10==d&&(MissStringArray[a]="");n--&&-1!=b.indexOf("$");){if(-1<b.indexOf("$")){var c=b.indexOf("$"),h=b.indexOf(";");if(-1!=c&&-1!=h){h=b.substr(c+1,h-c-1);h="$"+h+";";var m=b.substr(c+h.length,b.length-c-h.length+1),g=m.indexOf("$");if(0==g)break;g=m=m.substr(0,g);m=m.substr(1,h.length)==h?"":h+m+
h;b=b.replace(m,"")}}if((10==d||11==d)&&""!=m&&(MissStringArray[a]+=m+"\\",c=m.indexOf("@"),-1!=c)){var l=m.indexOf(">");h=m.substr(c+1,l-c-1);""!=h&&(Sendmessage.gettmissitem(rw_recog,10,"@"+h),""!=g&&(c=g.indexOf("/@"),l=g.indexOf("#"),c=-1!=c&&-1!=l?g.substr(l+2,c-3):g,l=[],l.sShowtxt=c,l.sMemo="",l.sNvStr="",l.sCmdGo=h,g_MissCaptionList[a].sList.push(l)))}}};e.SetMissionStrIng=function(a,b,d){for(var n=0;n<g_MissCaptionList.length;n++)if(g_MissCaptionList[n])for(var c=0;c<g_MissCaptionList[n].sList.length;c++)if(g_MissCaptionList[n].sList[c]&&
"@"+g_MissCaptionList[n].sList[c].sCmdGo==a){g_MissCaptionList[n].sList[c].sNvStr=d;g_MissCaptionList[n].sList[c].sMemo=b;break}Laya.stage.event("UPDATETASK",[""])};e.ShowNavigation=function(a,b){a=a.split("\\");var d=-1,n=2,c=42;b.height=0;for(var h=this.TaskBgCountShowLine(a);;){d+=1;if(d>=a.length)break;if(""!=a[d]){var m=a[d].indexOf("{"),g=a[d].indexOf("}");-1!=m&&-1!=g&&(a[d]=a[d].replace("{","<"),a[d]=a[d].replace("}",">"));for(var l=a[d].split("<"),p=0;p<l.length;p++)if(""!=l[p])for(var q=
l[p].split(">"),r=0;r<q.length;r++)if(""!=q[r]){var u=q[r].toUpperCase();if(-1!=u.indexOf("#NEW"))m=u.indexOf("#NEW("),g=u.indexOf(")"),m=u.substr(m+5,g-m-5),g=u.substr(g+1,u.length),u=GameUtil.GetMissGloba(m,parseInt(g),0),""==u&&(u=g),g=new Laya.Text,g.fontSize=16,g.stroke=1,g.strokeColor="#000000",g.color="#ffffff",g.text=""+u,g.pos(c,n),c+=GameApi.newcount(g)+GameApi.GetSpWidth(g.text),b.addChild(g);else if(-1!=u.indexOf("FCOLOR")||-1!=u.indexOf("SCOLOR")){m=u.indexOf("FCOLOR");g=new Laya.Text;
g.fontSize=16;g.stroke=1;g.strokeColor="#000000";g.color="#ffffff";if(-1!=m){m=u.indexOf("/FCOLOR=");var v=u.substr(m+8,3);u=u.substr(0,m)}else m=u.indexOf("/SCOLOR="),v=u.substr(m+8,3),u=u.substr(0,m);g.color=Get2RGB(v);g.text=u;g.pos(c,n);c+=GameApi.newcount(g)+GameApi.GetSpWidth(g.text);b.addChild(g)}else if(-1!=u.indexOf("/@"))if(u=u.split("/@"),u[0]&&-1!=u[0].indexOf("IMGEX")){var w=new Laya.Button;g=u[0].split(":");if(6<g.length){m=function(A){w.skin=A;w.size(26,31);b.addChild(w)};v=parseInt(g[1]);
if(0<=v&&v<g_pak_list.length){var z=parseInt(g[2]);GameUtil.loadImg(z,g_pak_list[v],m)}w.name=u[1];w.stateNum=1;w.pos(c+parseInt(g[5]),n+parseInt(g[6]));this.TaskBgTrigger(w.name,b,h)}w.on(Laya.Event.MOUSE_DOWN,this,GameUtil.onLa_CLICK);w.on(Laya.Event.MOUSE_UP,this,GameUtil.onLa_CLICK_OVER);w.on(Laya.Event.MOUSE_OUT,this,GameUtil.onLa_CLICK_OVER)}else g=new Laya.Text,g.fontSize=16,g.stroke=1,g.strokeColor="#000000",g.color=Get2RGB("251"),g.text=u[0],g.name=u[1],g.underline=!0,g.on(Laya.Event.MOUSE_DOWN,
this,GameUtil.onLa_CLICK),g.on(Laya.Event.MOUSE_UP,this,GameUtil.onLa_CLICK_OVER),g.on(Laya.Event.MOUSE_OUT,this,GameUtil.onLa_CLICK_OVER),g.pos(c,n),c+=GameApi.newcount(g)+GameApi.GetSpWidth(g.text),b.addChild(g),this.TaskBgTrigger(g.name,b,h);else g=new Laya.Text,g.fontSize=16,g.stroke=1,g.strokeColor="#000000",g.color="#ffffff",0==d&&(g.color="#0b9352"),g.text=u,g.pos(c,n),c+=GameApi.newcount(g)+GameApi.GetSpWidth(u),b.addChild(g);cur_use_app&&(c+=5)}c=0;n+=20;b.height=n}}};e.TaskBgCountShowLine=
function(a){for(var b=0,d=0;d<a.length;d++)""!=a[d]&&b++;return b};e.TaskBgTrigger=function(a,b,d){if(-1!=a.indexOf("_H5_")){var n="";d=2>d||3<d?0:d-1;n=a.split("_H5_");var c=-1,h=-1;if(1<n.length)switch(n=n[1],n){case "1":c=36*d;h=c+11;break;case "2":c=12+36*d;h=c+11;break;case "3":c=24+36*d,h=c+11}-1!=c&&-1!=h&&(Animationmodule.playframe(!1,b,"gameres/animation/task/",c,h,100,!0,!1).name="TaskBgTrigger");b.on(Laya.Event.CLICK,this,function(m){Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,rw_recog,
0,0,0,"@"+m)},[a])}};e.GetStringA=function(a){var b=a.indexOf("{"),d=a.indexOf("/"),n=a.indexOf("}");if(-1!=b&&-1!=d&&-1!=n)for(var c=n=!1,h=0;h<a.length;h++)if("{"==a[h])n=!0,b=h;else{if("/"==a[h])if(n){c=!0;d=h;continue}else c=n=!1;if("}"==a[h])if(n&&c){var m=a.substr(d+1,h-d-1);m=m.toUpperCase();-1!=m.indexOf("FCOLOR=")||-1!=m.indexOf("SCOLOR=")||-1!=m.indexOf("AUTOCOLOR=")?(a=a.split(""),a[b]="<",a[h]=">",c=n=!1,a=a.join("")):(m=a.substr(b+1,h-b-1),m=m.toUpperCase(),m.indexOf("IMG:"))}else m=
a.substr(b+1,h-b-1),m=m.toUpperCase(),-1!=m.indexOf("IMG:")&&(a=a.split(""),a[b]="<",a[h]=">",a=a.join("")),c=n=!1}return a};e.GetPakSing=function(a){if(a<g_pak_list.length){a=g_pak_list[a];a.replace("items","");var b="data/"+a+"/"}return b};e.LineText_IMGEX=function(a,b,d,n){var c=!1,h=[];if(-1!=a.indexOf("|")){var m=a.split("|");a=a.replace("|"+m[1],"");c=!0}var g=a.split("/"),l=a.split(":");if(6<l.length){var p=parseInt(l[1]);if(0<=p&&p<g_pak_list.length){a=new Laya.Image;var q=parseInt(l[2]);
p=this.getUrl(g_pak_list[p],q);a.skin=p;p=parseInt(l[5]);l=l[6].split("/");l=parseInt(l[0]);a.pos(b+p,d+l);if(1<g.length)a.on(Laya.Event.CLICK,this,this.onCmdClick,[g[1]]);else sCmdGo="",c&&""!=m[1]&&(a.sHitText=m[1],a.on(Laya.Event.CLICK,this,this.onHitTextClick),a.BoIsOpen=!1);n.addChild(a);b+=a.width}}h.x=b;h.y=d;return h};e.LineText_IMGEX=function(a,b,d){var n=this,c="",h="";Array.isArray(a)?(c=a[0],h=a[1]):c=a;a=c.split(":");var m=parseInt(a[1]),g=parseInt(a[2]);parseInt(a[3]);var l=parseInt(a[4]),
p=parseInt(a[5]),q=0,r=-1,u=!1;r=c.indexOf("|");if(-1!=r){var v=c.substr(r+1,c.length-r);c=c.substr(0,r);u=!0}a[7]&&(v=a[7],u=!0);a[6]&&(r=a[6].indexOf(":"),q=-1!=r?a[6].substr(r,0):parseInt(a[6]));var w=new Laya.Image;w.imgEx=!0;w.skin=this.getUrl(g_pak_list[m],g);w.pos(b.x+p,b.y+q);g!=l&&(w.on(Laya.Event.MOUSE_UP,this,function(){w.skin=n.getUrl(g_pak_list[m],g)}),w.on(Laya.Event.MOUSE_DOWN,this,function(){w.skin=n.getUrl(g_pak_list[m],l)}));u&&""!=v&&(-1<a[6].indexOf("|")||a[7])?(""!==h?w.sHitText=
v+"/"+h:w.sHitText=v,w.on(Laya.Event.CLICK,this,this.onHitTextClick),w.BoIsOpen=!1,""!==h&&(w.sCmdsJump=!0)):""!=h&&(w.sCmdsJump=!0,w.on(Laya.Event.CLICK,this,this.onCmdClick,[h]));d.addChild(w);b.x+=w.width;return b};e.LineText_PLAYIMG=function(a,b,d,n){function c(){if(0<--v){var B=Animationmodule.playframe(!0,d,"data/"+z+"/",l,l+p-1,100,!1,!0,null,this,c);if(B){B.is_use_offest=!1;B.x=r;B.y=u;B.mouseThrough=!0;var D;Array.isArray(a)?D=a[0].split("|"):D=a.split("|");B.sHitText=D[1];B.on(Laya.Event.CLICK,
this,function(E){this.onHitTextClick(E);if(""!=h)this.onCmdClick(h)});B.zOrder=0}}}var h="";if(Array.isArray(a)){var m=a[0].split(":");h=a[1]}else m=a.split(":");var g=parseInt(m[1]),l=parseInt(m[2]),p=parseInt(m[3]),q=parseInt(m[4]),r=b.x+parseInt(m[5]),u=b.y+parseInt(m[6]);parseInt(m[7]);if(m[8])var v=m[8].indexOf("|")?parseInt(m[8].split("|")[0]):parseInt(m[8]);m="";if(-1!=g&&g<g_pak_list.length){new Laya.Point(r,u);var w=new Laya.Image,z=g_pak_list[g];m=this.getUrl(z,l);w.skin=m;if(v&&0!=v)0<
v&&(A=Animationmodule.playframe(!0,d,"data/"+z+"/",l,l+p-1,q,!1,!0,null,this,c));else var A=Animationmodule.playframe(!0,d,"data/"+z+"/",l,l+p-1,q,!0,!1);if(A){A.is_use_offest=!1;A.x=r;A.y=u;A.mouseThrough=!0;var C;Array.isArray(a)?C=a[0].split("|"):C=a.split("|");A.sHitText=C[1];A.on(Laya.Event.CLICK,this,function(B){this.onHitTextClick(B);if(""!=h)this.onCmdClick(h)});A.zOrder=0}b.x+=w.width;n&&20<w.height&&(b.y=w.height)}return b};e.setFrameHitArea=function(a,b){a.hitArea=new Laya.HitArea;a.hitArea.hit=
new Laya.Graphics;a.hitArea.hit.drawRect(-a.x,-a.y,b.width,b.height,"#ff9900")};e.getItemShowIdxByMakeIndex=function(a,b,d,n){if(b)for(b=0;b<n.length;b++)if(n[b]&&d==n[b].MakeIndex)return[n[b].s.Looks,n[b]];return[a]};e.LineText_ITEMSHOW=function(a,b,d){var n=-1,c=-1;if(Array.isArray(a))var h=a[0].split(":"),m=a[1];else h=a.split(":");if(h&&4<h.length){var g=new Laya.Image;a=parseInt(h[3]);for(var l=parseInt(h[4]),p,q=0;q<g_Showitem.length;q++)if(h[1]==g_Showitem[q].s.nIdx&&h[1]==g_Showitem[q].MakeIndex){n=
q;c=g_Showitem[q].s.Looks;p=g_Showitem[q];break}q=this.getItemShowIdxByMakeIndex(c,-1==c,h[1],g_BagItemsList);c=void 0!=q[0]?q[0]:c;var r=q[1]?q[1]:void 0;q=this.getItemShowIdxByMakeIndex(c,-1==c,h[1],g_UserItemList);c=q[0];r=r?r:q[1];if(h[2]&&0<parseInt(h[2])){var u=new Laya.Text;u.color="#ffffff";u.align="right";u.text=h[2];GameUtil.setCanAddTxtStroke(u)}if(-1!=c){q=this.getUrl("items",c);if(-1!=n)g.on(Laya.Event.CLICK,this,this.onShowItemClick,[n]);else g.on(Laya.Event.CLICK,this,function(){GameUtil.NewShowItemsInf(p?
p:r)},[]);Laya.loader.getRes(q)?g.skin=q:GameUtil.loadImg(c,"items",function(w){g.skin=w});if("1"==h[5]||"3"==h[5]){var v=new Laya.Image;v.pos(b.x+a,b.y+l);GameUtil.loadImg(265,"prguse",function(w,z){v.skin=w;d.addChild(v);h[6]&&h[7]&&g.pos(parseInt(h[6]),parseInt(h[7]));"3"==h[5]&&g.pos((v.width-g.width)/2,(v.height-g.height)/2);v.addChild(g);e.setFrameHitArea(g,v);u&&(v.addChild(u),u.pos(v.width-u.width,v.height-u.height))})}else g.pos(b.x+a,b.y+l),d.addChild(g),u&&(g.addChild(u),u.pos(g.width-
u.width,g.height-u.height));b.x="1"==h[5]?b.x+g.width:"2"==h[5]?b.x+(g.width+a):"3"==h[5]?b.x+(42+a):"4"==h[5]?b.x+(42+a):b.x+g.width}else g.pos(b.x+a,b.x+l),d.addChild(g),b.x+=g.width}if(m&&(n=m.split(""),m=m.toUpperCase(),-1!=m.indexOf("AUTOCOLOR")||-1!=m.indexOf("FCOLOR")||-1!=m.indexOf("SCOLOR")?(n=m.indexOf("="),m=m.substr(n+1,m.length),-1!=m.indexOf("$")?sColor="#"+Get3RGB(m.substr(2,6)):-1==m.indexOf(",")?sColor=Get2RGB(m%256):(m=m.split(","),""==m[m.length-1]&&m.pop(),boIsAColor=!0)):"@"==
n[0]&&(boIsline=boIsCmd=!0,sCmd=m),""!=sCmd&&g))g.on(Laya.Event.CLICK,this,this.onCmdClick,[sCmd]);return b};e.LineText_GIMG=function(a,b,d){var n=Array.isArray(a)?a[0].split(":"):a.split(":"),c=parseInt(n[2]),h=n[1].split("~");a=b.x+parseInt(n[3]);n=b.y+parseInt(n[4]);var m=h[0],g=h[1];if(-1!=c&&c<g_pak_list.length){new Laya.Point(a,n);h=new Laya.Image;c=g_pak_list[c];sNewPak=this.getUrl(c,m);h.skin=sNewPak;if(d=Animationmodule.playframe(!0,d,"data/"+c+"/",m,g,80,!0))d.x=a,d.y=n,d.mouseThrough=!0,
d.zOrder=0;b.x+=h.width}return b};e.LineText_IMG=function(a,b,d,n){if(Array.isArray(a)){var c=a[0];a=a[1]}else c=a,a="";var h=!1;if(-1!=c.indexOf("|")){var m=c.split("|");c=c.replace("|"+m[1],"");h=!0}c=c.split(":");var g=parseInt(c[1]),l=parseInt(c[2]),p=new Laya.Image;(l=g_imgNpcPak[l])&&(l=l.toLocaleLowerCase());p.skin=this.getUrl(l,g);p.pos(b.x,b.y);c[3]&&c[4]&&p.pos(b.x+parseInt(c[3]),b.y+parseInt(c[4]));h&&""!=m[1]&&(p.sHitText=m[1],p.on(Laya.Event.CLICK,this,this.onHitTextClick),p.BoIsOpen=
!1);if(""!=a)p.on(Laya.Event.CLICK,this,this.onCmdClick,[a]);d.addChild(p);b.x+=p.width;n&&20<p.height&&(b.y=p.height);return b};e.LineText_ITEMBOX=function(a,b,d){var n=this;a=a.split(":");b=parseInt(a[1]);var c=parseInt(a[2]),h=parseInt(a[3]),m=parseInt(a[4]),g=parseInt(a[5]);parseInt(a[6]);parseInt(a[7]);g_npc_opt_list=a[8];g_Show_Bag_Type="npc_dlg_options";if(-1!=c&&(c=this.getUrl(g_pak_list[c],h))&&""!=c){var l=new Laya.Image;l.BoxId=b;l.BoxType=a[8];l.skin=c;l.pos(m,g);l.name="lb_img";g_npc_opt_boxid=
b;d.addChild(l);DragItem.testType=DragItem.dragItemType.OkBar;var p=new DragItem;d={itemsData:void 0,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.OkBar};p.setData(d,g_npc_opt_boxid);l.addChild(p);p.setWidthAndHeight(p.parent.width,p.parent.height);-1!=b&&(l.sHitText=a[9],l.on(Laya.Event.CLICK,this,function(q){q=q.target instanceof DragItem?{target:q.target.parent}:q;n.onHitTextClick(q);e.onItemBoxClick(q)}));if(g_boxItemArr[g_npc_opt_boxid])d={itemsData:g_boxItemArr[g_npc_opt_boxid],
selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.OkBar},p.showItemUI(d,g_npc_opt_boxid);else for(d=0;d<g_boxItemArr.length;d++)g_boxItemArr[d]&&GameUtil.AddItemNewBag(g_boxItemArr[d]);Laya.stage.on("draw_npc_items",this,function(q,r,u,v){null==q||void 0==q?l.BoxId==u&&(v?l._childs[1]&&l._childs[1]instanceof Laya.Label&&l._childs[1].removeSelf():n.delOkFrameSpecialHandle(r,l,u)||l._childs[0]&&l._childs[0]instanceof DragItem&&l._childs[0].hideItemExceptBgFrame()):
l.BoxId==g_npc_opt_boxid&&(p.showItemUI({itemsData:q,selectIndex:void 0,hasBgFrame:!1,maxUnlockCount:void 0,itemType:DragItem.dragItemType.OkBar},g_npc_opt_boxid),p.parent&&p.setWidthAndHeight(p.parent.width,p.parent.height))})}};e.hideSuspensionTip=function(a){a.numChildren&&(a=a.getChildByName("buff_k"))&&(a.visible=!1)};e.delOkFrameSpecialHandle=function(a,b,d){if(!a)return!1;b.BoxId==d&&b._childs[0]&&b._childs[0]instanceof DragItem&&b._childs[0].hideItemExceptBgFrame();return!0};e.addItemTxtNums=
function(a,b){if(a&&a.Dura&&!(0>[17,18,40,41,42].indexOf(a.s.StdMode))){var d=new Laya.Label;d.color=16777215;d.text="x"+(a.Dura+1);d.right=5;d.bottom=5;d.name="count";GameUtil.setCanAddTxtStroke(d);b.addChild(d)}};e.LineText_FONT=function(a,b,d,n){var c=n="",h="";if(Array.isArray(a)){for(n=0;n<a.length;n++)c+=a[n]+(n+1==a.length?"":"/");var m=c.split(":");n=a[1];h=GameUtil.extractRemarkInfoNPC(a[0])}else m=a.split(":"),GameUtil.extractRemarkInfoNPC(a);if(7<=m.length){var g=c=a=0,l=new Laya.Text;
l.fontSize=g_npcTxtSize;l.text=GameUtil.clearRemarkInfoNPC(m[1]);m[2]&&m[3]&&(a=parseInt(m[2]),c=parseInt(m[3]));m[4]&&(l.fontSize=parseInt(m[4]),boFSize=!0);m[5]&&(g=parseInt(m[5]),3==g&&(l.underline=!0),2==g&&(boFSize=l.italic=!0),1==g&&(boFSize=l.bold=!0));g="#ffffff";m[7]&&(g=-1!=m[7].indexOf("/@")?m[7].split("/@")[0]:m[7],g=Get2RGB(g));-1<m[1].indexOf("|")&&(l.on(Laya.Event.CLICK,this,function(){if(!d.getChildByName("buff_k")){var p=m[1].split("|")[1],q=new Laya.Image;q.name="buff_k";q.skin=
"gameres/ui/buffkuang.png";q.sizeGrid="4,4,4,4";q.width=GameUtil.getTxtWidthByContent(parseInt(m[4]),p)+12;q.height=g_npcTxtSize+6;q.pos(l.x+20,l.y+20);var r=new Laya.Text;r.text=p;r.x=r.y=3;r.fontSize=g_npcTxtSize;r.color=16777215;q.addChild(r);d.addChild(q)}d.getChildByName("buff_k").visible=!0}),d.on(Laya.Event.CLICK,this,function(){!l.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&d.getChildByName("buff_k")&&(d.getChildByName("buff_k").visible=!1)}));l.color=g;""!=h&&(l.sHitText=h);""!=n&&
-1!=n.indexOf("@")&&("#ffffff"==g&&(g="#e1f408"),l.on(Laya.Event.CLICK,this,this.onCmdClick,[n,l]),l.on(Laya.Event.CLICK,this,this.onHitTextClick),this.fontsizeToBigOnClick(l));"fontex"!=m[0].toLowerCase()?(l.pos(b.x+a,b.y+c),b.x+=GameApi.newcount(l)+GameApi.GetSpWidth(l.text),b.y+=cur_use_app&&window.conch?c+l.height-1:c+l.height):l.pos(a,c);d.addChild(l)}return b};e.fontsizeToBigOnClick=function(a,b,d){if(a){if(!a.hasMOUSE_DOWN&&(a.on(Laya.Event.MOUSE_DOWN,this,function(){a.hasMOUSE_DOWN="hasMOUSE_DOWN";
a.fontSize+=2;b&&(b.fontSize+=2);if(a._events.click&&!a._events.click.length)a._events.click.caller(a._events.click.args);else for(var n in a._events.click)a._events.click[n].caller(a._events.click[n].args)}),b&&d))b.on(Laya.Event.MOUSE_DOWN,this,function(){b.fontSize+=2;if(a._events.click&&!a._events.click.length){var n=a._events.click.args;a._events.click.args.length&&1==a._events.click.args.length&&(n=n[0]);a._events.click.method(n)}else for(var c in a._events.click)n=a._events.click.args,a._events.click.args.length&&
1==a._events.click.args.length&&(n=n[0]),a._events.click[c].method(n)});if(!a.hasMOUSE_UP&&(a.on(Laya.Event.MOUSE_UP,this,function(){a.hasMOUSE_UP="hasMOUSE_UP";a.fontSize-=2;b&&(b.fontSize-=2)}),b&&d))b.on(Laya.Event.MOUSE_UP,this,function(){b.fontSize-=2})}};e.downTest=function(a,b){a.fontSize+=2;b()};e.changePoint=function(a){return-1<a.indexOf("\u00b7")&&" "==a[a.length-1]?(a=a.replace(/\u00b7/gim," \u00b7 "),a.substr(0,a.length-1)):a};e.MakeNpcLabel=function(a,b,d,n,c,h){var m=[],g=g_npcTxtSize,
l="",p="",q="#ffffff",r=!1,u=!1,v=!1,w=!1,z="",A=!1,C=!1;h=void 0===h?!1:h;m.x=d;m.y=n;if(Array.isArray(a)){if(1<a.length){if(a[0]&&""!=a[0]){a[0]=this.changePoint(a[0]);l=a[0].split("");var B=a[0].indexOf("{");d=a[0].indexOf("}");if("}"==l[l.length-1]&&-1!=B)if(l=l.join(""),n=l.indexOf("{"),B=l.indexOf("}"),h=l.substr(n+1,B),-1!=h.toUpperCase().indexOf("FCOLOR")||-1!=h.toUpperCase().indexOf("SCOLOR"))a[0]=l.substr(0,n),q=l.substr(n+8,d-n-8),q=-1!=q.indexOf("$")?"#"+Get3RGB(q.substr(2,6)):Get2RGB(q),
a[1]&&-1!=a[1].indexOf("@")&&(C=!0),u=!1;else{if(-1!=h.toUpperCase().indexOf("AUTOCOLOR")){h=a[0].toUpperCase().split("{AUTOCOLOR=");if(h[1]){-1!=h[1].indexOf("}")&&(h[1]=h[1].replace("}",""));var D=h[1].split(",");""==D[D.length-1]&&D.pop();A=!0}a[0]=l.substr(0,n)}}else-1!=a[0].toUpperCase().indexOf("IMGEX")?(m=e.LineText_IMGEX(a,m,b),v=!0):-1!=a[0].toUpperCase().indexOf("PLAYIMG")?(""!=a[1]&&-1!=a[1].indexOf("@")&&(m=e.LineText_PLAYIMG(a,m,b)),v=!0):-1!=a[0].toUpperCase().indexOf("FONT")?(m=e.LineText_FONT(a,
m,b),v=!0):-1!=a[0].toUpperCase().indexOf("ITEMSHOW")?(m=e.LineText_ITEMSHOW(a,m,b),v=!0):-1!=a[0].toUpperCase().indexOf("IMG")&&(m=e.LineText_IMG(a,m,b),v=!0);B=a[0].toUpperCase().indexOf("|");-1!=B?(l=a[0].substr(0,B),-1!=l.indexOf("TEXT:")&&(l=l.substr(l.indexOf(":")+1)),w=a[0].substr(B+1,a[0].length-B),-1==w.indexOf("#")&&(w=w.split(":")),3==w.length?(z=w[0],m.x+=parseInt(w[1]),m.y+=parseInt(w[2])):z=a[0].substr(B+1,a[0].length-B),""!=a[1]&&-1!=a[1].indexOf("@")&&(z+="/"+a[1]),w=!0):l=a[0]}""!=
a[1]&&(h=a[1].split(""),-1!=a[1].toUpperCase().indexOf("AUTOCOLOR")||-1!=a[1].toUpperCase().indexOf("FCOLOR")||-1!=a[1].toUpperCase().indexOf("SCOLOR")?(B=a[1].indexOf("="),h=a[1].substr(B+1,a[1].length),-1!=h.indexOf("$")?q="#"+Get3RGB(h.substr(2,6)):-1==h.indexOf(",")?q=Get2RGB(h%256):(D=h.split(","),""==D[D.length-1]&&D.pop(),A=!0)):"@"==h[0]&&(r=u=!0,p=a[1],a[2]&&(-1<p.indexOf("sell")||-1<p.indexOf("repair"))&&(SELL_ITEM_TYPE=a[2].split(","))))}}else if(""!=a){for(;-1!=a.toUpperCase().indexOf("{#NEW")&&
-1!=a.toUpperCase().indexOf("}");)B=a.indexOf("{#NEW"),n=a.indexOf("}"),n=a.substr(B+5,n-B-5),d=n.indexOf("("),B=n.indexOf(")"),-1!=d&&-1!=B&&(d=n.substr(d+1,B-d-1),""!=d&&(d=GameUtil.GetMissGloba(d,"",0),n="{#NEW"+n+"}",a=a.replace(n,d)));if(-1!=a.toUpperCase().indexOf("TEXT")&&-1!=a.indexOf("|"))-1!=a.toUpperCase().indexOf("{FCOLOR=")&&(d=a.toUpperCase().split("{FCOLOR="),d[1]&&(q=d[1].slice(0,d[1].indexOf("}")),q=-1!=q.indexOf("$")?"#"+Get3RGB(q.substr(2,6)):Get2RGB(q),c=!1),d[0]&&(B=d[0].indexOf("|"),
-1!=B&&(l=d[0].substr(0,B),-1!=l.toUpperCase().indexOf("TEXT")&&(l=l.split(":")[1]),w=d[0].substr(B+1,d[0].length-B),-1==w.indexOf("#")&&(w=w.split(":")),3==w.length?(z=w[0],m.x+=parseInt(w[1]),m.y+=parseInt(w[2])):z=d[0].substr(B+1,d[0].length-B),w=!0)));else{if(-1!=a.toUpperCase().indexOf("TEXT")){if(-1!=a.toUpperCase().indexOf("{FCOLOR=")){var E=a.toUpperCase().split("{FCOLOR=");d=E[0].split(":");d.push(E[1].slice(0,E[1].indexOf("}")));d[4]&&(q=d[4],q=-1!=q.indexOf("$")?"#"+Get3RGB(q.substr(2,
6)):Get2RGB(q))}else d=a.split(":");3<d.length&&(v=new Laya.Text,v.fontSize=g_npcTxtSize,d[4]?v.color=q:-1!=a.toUpperCase().indexOf("AUTOCOLOR")?(h=a.toUpperCase().split("{AUTOCOLOR="),h[1]&&(-1!=h[1].indexOf("}")&&(h[1]=h[1].replace("}","")),D=h[1].split(","),""==D[D.length-1]&&D.pop(),A=!0),A&&D&&(v.m_ColorList=D,v.m_nColorIndex=0,v.color=Get2RGB(v.m_ColorList[0]),f.push(v))):v.color="#ffffff",v.text=d[1],a=parseInt(d[2]),q=0,""!=d[3]&&(q=parseInt(d[3])),v.pos(m.x+a,m.y+q),b.addChild(v),m.x+=a+
v.width+GameApi.GetSpWidth(v.text),m.y+=q);return m}-1!=a.toUpperCase().indexOf("IMGEX")?(m=e.LineText_IMGEX(a,m,b),v=!0):-1!=a.toUpperCase().indexOf("PLAYIMG")?(m=e.LineText_PLAYIMG(a,m,b),v=!0):-1!=a.toUpperCase().indexOf("ITEMSHOW")?(m=e.LineText_ITEMSHOW(a,m,b),v=!0):-1!=a.toUpperCase().indexOf("ITEMBOX")?(e.LineText_ITEMBOX(a,m,b),v=!0):-1!=a.toUpperCase().indexOf("GIMG")?(m=e.LineText_GIMG(a,m,b),v=!0):-1!=a.toUpperCase().indexOf("IMG")&&(m=e.LineText_IMG(a,m,b),v=!0)}-1!=a.toUpperCase().indexOf("FONT")?
(m=e.LineText_FONT(a,m,b,h),v=!0):(B=a.indexOf("|"),-1!=B?(l=a.substr(0,B),z=a.substr(B+1,a.length-B),a.constructor==Array&&""!=a[1]&&-1!=a[1].indexOf("@")&&(z+="/"+a[1]),w=!0):l=a)}if((""!=l||v)&&!v){v=new Laya.Text;h=new Laya.Image;h.skin="gameres/ui/lb_bg_img.png";v.fontSize=g;A&&D?(v.m_ColorList=D,v.m_nColorIndex=0,v.color=Get2RGB(v.m_ColorList[0]),f.push(v)):v.color=q;u&&!C&&(v.color="#e1f408");r&&(v.underline=!0);if(w)v.sHitText=z,v.on(Laya.Event.CLICK,this,this.onHitTextClick),v.BoIsOpen=!1;
else if(""!=p)h.on(Laya.Event.CLICK,this,this.onCmdClick,[p]);c&&(v.color="#f40d0d");if(-1!=l.toUpperCase().indexOf("TEXT:")){E=l.split(":");null==E[2]&&null==E[3]&&(q=a[0].split(":"),E[2]=q[2],E[3]=q[3]);E[1]&&(l=E[1]);E[2]&&E[3]&&v.pos(m.x+parseInt(E[2]),m.y+parseInt(E[3]));var F=!0}else NaN==m.x?v.pos(16,30):v.pos(m.x,m.y);v.text=l;m.x+=GameApi.newcount(v)+GameApi.GetSpWidth(v.text);a[1]&&-1!=a[1].indexOf("@")?(h.width=v.width+15,h.height=v.height+10,F?h.pos(m.x-h.width+9+parseInt(E[2]),m.y-4+
parseInt(E[3])):h.pos(m.x-h.width+9,m.y-4),b.addChild(h),b.addChild(v),this.fontsizeToBigOnClick(h,v,F)):b.addChild(v)}return m};e.ShowAllNPCTxT=function(a,b){g_TempNPCLabe&&(g_TempNPCLabe=!1);b.removeChildren();f=[];var d=a.split("\\"),n=-1,c=30,h=16,m=!1;for(sNewNpcStr=a;;){n+=1;if(n>=d.length)break;if(""!=d[n]){d[n]=this.GetStringA(d[n]);for(a=this.CheckTagCMD(d[n]);""!=a&&-1!=d[n].indexOf(a[0])&&-1!=d[n].indexOf(a[1]);){if(d[n].split("")[0]!=a[0]){var g=d[n].indexOf(a[0]);var l=d[n].split(a[0]);
d[n]=d[n].substr(g,d[n].length);""!=l[0]&&(g=l[0],g=this.MakeNpcLabel(g,b,c,h,m),c=g.x,h=g.y)}g=d[n].indexOf(a[0]);l=d[n].indexOf(a[1]);-1!=g&&-1!=l?(m=!0,g=d[n].substr(g+1,l-g-1),d[n]=d[n].substr(l+1,d[n].length),(l=this.QRCodeHandle(g,b,c,h))?g=l:("{}"!=a&&""!=g&&-1!=g.indexOf("/")&&(g=g.split("/"),g[1].split(""),m=!1),g=this.MakeNpcLabel(g,b,c,h,m)),m=!1,g&&(c=g.x,h=g.y)):(g=this.MakeNpcLabel(d[n],b,c,h,m),c=g.x,h=g.y)}g=this.MakeNpcLabel(d[n],b,c,h,m);h=g.y;h+=16;c=30}}f?(Laya.timer.clear(this,
e.TextColor),Laya.timer.loop(600,this,e.TextColor)):Laya.timer.clear(this,e.TextColor)};e.QRCodeHandle=function(a,b,d,n){if(-1<a.indexOf("QRCode")){a=a.split("|");var c=a[0].split(":");a={linkStr:a[1],lengthNum:Math.abs(c[2]),xPos:d+parseInt(c[3]),yPos:n+parseInt(c[4])};GameUtil.parseQRCodeByLink(a,b);return{x:d,y:n}}};e.TextColor=function(){for(var a=0;a<f.length;a++){var b=f[a];b&&(b.m_nColorIndex>=b.m_ColorList.length&&(b.m_nColorIndex=0),b.m_nColorIndex<b.m_ColorList.length&&(b.color=Get2RGB(b.m_ColorList[b.m_nColorIndex]),
b.m_nColorIndex+=1))}};e.sendnpccmd=function(a,b){30<b.length&&(b=b.substr(0,60));a=a+String.fromCharCode(13)+b;b=0;-1!=a.indexOf("@InPut")&&(b=99);Sendmessage.SendNpcCMD(a,G_NPC_ID,b)};e.onCmdMouseOver=function(a){Laya.stage.event("show_remark",a)};e.onCmdMouseOut=function(){Laya.stage.event("close_remark")};e.onCmdClick=function(a,b){GameUtil.PlayMusicFormat(S_BUTTON_3);if("string"==typeof a&&-1!=a.toUpperCase().indexOf("@EXIT"))g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1,GameApi.ShowNewNpcDlg(!1),
npc_img_name="gameres/png/npc_di.png";else if("@"==a[0]&&"@"==a[1]&&-1==a.indexOf("@@dealybme"))if(-1!=a.indexOf("@@buildguildnow"))Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:"\u8bf7\u8f93\u5165\u884c\u4f1a\u540d\u79f0",callfn:function(n){e.sendnpccmd(a,n)}}]);else{b=a.indexOf("(")+1;var d=a.indexOf(")");b=a.substr(b,d-b);""!=b?Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:b,callfn:function(n){e.sendnpccmd(a,n)}}]):Laya.stage.event("show_alert_dlg",[{ipttype:"string",
type:4,txt:"\u8f93\u5165\u4fe1\u606f",callfn:function(n){e.sendnpccmd(a,n)}}])}else"@\u539f\u5730\u590d\u6d3b"==a||"@\u5b89\u5168\u590d\u6d3b"==a?(g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1,Sendmessage.SendNpcCMD(a,G_NPC_ID,0),GameApi.ShowNewNpcDlg(!1),g_TempNPCLabe=!0):(Sendmessage.SendNpcCMD(a,G_NPC_ID,0),g_TempNPCLabe=!0,"@\u5220\u96640"==a?g_deleteStr="0":"@\u5220\u96641"==a&&(g_deleteStr="1"))};e.onItemBoxClick=function(a){a&&(g_npc_opt_boxid=a.target.BoxId);if(a.target&&
a.target._childs[0]&&a.target._childs[0].itemImg){a.target._childs[0].itemImg.skin="";a.target._childs[1]&&a.target._childs[1].removeSelf();var b=!0}if(g_boxItemArr[g_npc_opt_boxid]){b||a.target.removeChildren();if(a=g_boxItemArr[g_npc_opt_boxid])Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,a.MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,a.MakeIndex,1);g_boxItemArr[g_npc_opt_boxid]=null;GameUtil.AddItemNewBag(a)}else"npc_dlg_options"==g_Show_Bag_Type&&(g_OpenIdx=7,GameApi.ShowScreen(!0,
a.target.BoxType,3));GameUtil.PlayMusicFormat(S_BUTTON_3)};e.LoadIngimage=function(a,b,d){var n=0,c=a.split("\\");this.dlg_height=0;for(g_ItemImg=[];;)if(n<c.length){if(""!=c[n]){if(0==n||1==n){var h=c[n].split("\r");1<h.length&&""!=h[0]&&(c[n]=h[1])}if(-1!=c[n].indexOf("<")){h=c[n].split("<");for(var m=0;m<h.length;m++)if(""!=h[m])for(var g=h[m].split(">"),l=0;l<g.length;l++)if(""!=g[l]){var p=g[l].toUpperCase();if(-1!=p.indexOf("ITEMBOX")){var q=p.split(":"),r=parseInt(q[2]);p=parseInt(q[3]);parseInt(q[4]);
parseInt(q[5]);parseInt(q[6]);parseInt(q[7]);if(-1!=r&&r<g_pak_list.length){q=g_pak_list[r];var u=("000000"+p).slice(-6),v="data/"+q+"/"+u;(u=Laya.loader.getRes(v))||g_ItemImg.push(v)}}else if(-1!=p.indexOf("PLAYIMG")){if(q=p.split(":"),u=parseInt(q[1]),p=parseInt(q[2]),r=parseInt(q[3]),-1!=u&&u<g_pak_list.length){q=g_pak_list[u];for(var w=0;w<r;w++)u=("000000"+p).slice(-6),v="data/"+q+"/"+u,(u=Laya.loader.getRes(v))||g_ItemImg.push(v)}}else if(-1!=p.indexOf("ITEMSHOW")){if(q=p.split(":"),4<q.length){for(l=
p=0;l<g_Showitem.length;l++)if(q[1]==g_Showitem[l].s.nIdx){p=g_Showitem[l].s.Looks;break}r=p;q="";1E4<=p&&(q=Math.floor(p/1E4),r=p%1E4);u=("000000"+r).slice(-6);p="data/items"+q+"/"+u;(u=Laya.loader.getRes(p))||g_ItemImg.push(p)}}else-1!=p.indexOf("IMGEX")?(q=p.split(":"),5<q.length&&(p=parseInt(q[1]),0<=p&&p<g_pak_list.length&&(r=parseInt(q[2]),q=g_pak_list[p],u=("000000"+r).slice(-6),p="data/"+q+"/"+u,(u=Laya.loader.getRes(p))||g_ItemImg.push(p)))):-1!=p.indexOf("IMG")&&(q=p.split(":"),1<q.length&&
(p=parseInt(q[2]),0<=p&&p<g_imgNpcPak.length&&(r=parseInt(q[1]),(q=g_imgNpcPak[p])&&(q=q.toLocaleLowerCase()),u=("000000"+r).slice(-6),p="data/"+q+"/"+u,(u=Laya.loader.getRes(p))||g_ItemImg.push(p))))}}}n+=1}else break;d||(this.nIndex=0,this.LoadIngimageEx(a,b))};e.CheckTagCMD=function(a){for(var b=["<>","{}"],d=0;d<b.length;d++)if(-1!=a.indexOf(b[d][0]))return b[d];return""};e.LoadIngimageEx=function(a,b){0<g_ItemImg.length?(g_ItemImg.push("data/items/000000"),GameUtil.loadImgEx(g_ItemImg,function(){b&&
(a=a.replace(/\ue7e3/g,"\r\n"),e.ShowAllNPCTxT(a,b),g_Hit_Text=b)})):b&&(e.ShowAllNPCTxT(a,b),g_Hit_Text=b)};e.onHitTextClick=function(a){var b=a.target.sHitText;if(b){var d=Laya.stage.getChildByName("yangdaweigood"),n=3,c=0;d=d?d:new Laya.Image;d.removeChildren();g_main_npcdialog=d;g_main_npcdialogopen=!0;d.visilbe=!0;d.name="yangdaweigood";d.skin="gameres/ui/buffkuang.png";d.sizeGrid="4,4,4,4";d.width=100;d.height=100;d.pos(Laya.stage.mouseX,Laya.stage.mouseY);var h="";Laya.stage.addChild(d);if(b&&
-1!=b.indexOf("/@")){var m=b.split("/@");b=m[0].split("^");if(a.target.BoIsOpen){if(-1!=m[1].indexOf("@"))-1!=m[1].indexOf("inputstring")&&(-1!=m[1].indexOf("(")&&-1!=m[1].indexOf(")")?(h=m[1],h=h.substring(h.indexOf("(")+1,h.indexOf(")"))):h="\u8f93\u5165\u4fe1\u606f:"),Laya.stage.event("show_alert_dlg",[{type:4,txt:h,ipttype:"string",callfn:function(q){Sendmessage.SendNpcCMD("@"+m[1]+"\r"+q,G_NPC_ID,99)}}]);else if(Sendmessage.SendNpcCMD("@"+m[1],G_NPC_ID,0),"\u539f\u5730\u590d\u6d3b"==m[1]||"\u5b89\u5168\u590d\u6d3b"==
m[1])g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1,GameApi.ShowNewNpcDlg(!1);GameUtil.PlayMusicFormat(S_BUTTON_3)}}else b=b.split("^");for(h=0;h<b.length;h++){if(""!=b[h]){if(-1!=b[h].indexOf("#")){var g=b[h].split("#"),l=g[0].split("|");l=null==l[1]?Get2RGB(l[0]):Get2RGB(l[1]);g=g[1]}else l="#ffffff",g=b[h].split("|"),g=null==g[1]?g[0]:g[1];-1!=g.indexOf(":")&&(g=g.split(":")[0]);var p=new Laya.Text;p.fontSize=g_npcTxtSize;p.color=l;p.text=g;p.pos(3,n);p.width>c&&(c=p.width+7);
d.addChild(p)}n+=16}a.target.BoIsOpen=!0;d.pos(Laya.stage.mouseX,Laya.stage.mouseY);d.width=c;d.height=20*b.length}};e.onShowItemClick=function(a){-1!=a&&a<g_Showitem.length&&null!=g_Showitem[a]&&(g_OpenIdx=5,g_MoveItems.Items=g_Showitem[a],GameUtil.NewShowItemsInf(g_MoveItems.Items))};e.FindNewTaskByID=function(a){for(var b=0;b<g_newTaskList.length;b++)if(g_newTaskList[b][0]===a)return g_newTaskList[b];return null};e.CheckSameTaskByID=function(a){for(var b=0;b<g_newTaskNodeList.length;b++)if(g_newTaskNodeList[b].name==
a+"")return b;return-1};e.GetSameTaskByID=function(a){for(var b=0;b<g_newTaskNodeList.length;b++)if(g_newTaskNodeList[b].name==a+"")return g_newTaskNodeList[b];return null};e.ReflashTaskShow=function(){for(var a=0,b=0;b<g_newTaskNodeList.length;b++)g_newTaskNodeList[b].y=a,a+=g_newTaskNodeList[b].height};e.ReplaceNewTaskVar=function(a,b){var d=-1;return a.replace(/%s/ig,function(){d++;return d<b.length?b[d]:""})};e.DelNewTaskShow=function(a){if(this.FindNewTaskByID(a)){var b=this.CheckSameTaskByID(a);
-1!=b&&(a=g_taskPanel.getChildByName(a+""))&&(g_newTaskNodeList.splice(b,1),a.removeSelf(),this.ReflashTaskShow(),g_taskPanel.refresh())}};e.AddNewTaskShow=function(a,b,d){var n=this.FindNewTaskByID(a);if(n&&b){var c=g_newTaskNodeList;d||(d=[]);var h=this.CheckSameTaskByID(a);if(-1==h){h=new Laya.HTMLDivElement;switch(b){case 1:h.innerHTML="<br>"+n[1]+"<br>"+n[2];break;case 2:h.innerHTML="<br>"+n[1]+"<br>"+this.ReplaceNewTaskVar(n[3],d);break;case 3:h.innerHTML="<br>"+n[1]+"<br>"+n[4]}d=new Laya.Button("gameres/ui/btn_newtask.png");
d.stateNum=2;d.height=65<h.contextHeight?h.contextHeight+5:65;h.y+=5;h.name="html_task";h.mouseEnabled=!1;d.name=a+"";d.addChild(h);d.on(Laya.Event.CLICK,this,function(m){Sendmessage.sendNewTask(m)},[a]);d.order=n[6];g_taskPanel.addChild(d);c.push(d);c.sort(function(m,g){return m.order-g.order});console.log(c);this.NewTaskAddEffect(n,d,b);this.ReflashTaskShow()}else if(a=c[h])if(h=a.getChildByName("html_task")){switch(b){case 1:h.innerHTML="<br>"+n[1]+"<br>"+n[2];break;case 2:h.innerHTML="<br>"+n[1]+
"<br>"+this.ReplaceNewTaskVar(n[3],d);break;case 3:h.innerHTML="<br>"+n[1]+"<br>"+n[4];break;default:return}a.height=65<h.contextHeight?h.contextHeight+5:65;this.NewTaskAddEffect(n,a,b);this.ReflashTaskShow()}}};e.NewTaskAddEffect=function(a,b,d){var n=0;switch(d){case 1:case 2:case 3:n=a[5][d-1]}if(b&&0!=n){a=72;var c=a+11;switch(n){case 2:a=84;c=a+11;break;case 3:a=96,c=a+11}for(var h=1;3>=h;h++){var m=b.getChildByName("taskeffcet"+h);m&&h!=d&&m.removeSelf();if(m&&h==d){m.scale(200/185,b.height/
62);return}}d=Animationmodule.playframe(!1,b,"gameres/animation/task/",a,c,100,!0,!1);d.scale(200/185,b.height/62);d.name="taskeffcet"+n}};e.newTaskHandle=function(a,b){if(a)switch(a.record){case 1:case 3:this.AddNewTaskShow(a.param,a.record);break;case 2:b=b.split("|");this.AddNewTaskShow(a.param,a.record,b);break;case 4:this.DelNewTaskShow(a.param);break;case 5:b=b.split("\u0001");var d=Number(b[1]),n=Number(b[2]);isNaN(d)&&(d=0);isNaN(n)&&(n=0);g_newTaskNpcIcon={map:b[0].toLowerCase(),x:a.param,
y:a.tag,type:a.series,offsetx:d,offsety:n};this.SetNewTaskNpc(g_newTaskNpcIcon);break;case 6:g_newTaskNpcIcon=null,this.DelNewTaskNpc()}};e.SetNewTaskNpc=function(a){for(var b=0;b<ObjectManage.object_list.length;b++){var d=ObjectManage.object_list[b];if(d&&2==d.type){var n=d.getChildByName("tasknpc");n&&n.removeSelf();this.SetNewTaskNpcIcon(d,a)}}};e.DelNewTaskNpc=function(a){for(a=0;a<ObjectManage.object_list.length;a++){var b=ObjectManage.object_list[a];b&&2==b.type&&(b=b.getChildByName("tasknpc"))&&
b.removeSelf()}};e.SetNewTaskNpcIcon=function(a,b){if(a&&b&&Mapdata.cur_id==b.map&&a.grid.x==b.x&&a.grid.y==b.y){var d=new Laya.Point(25+b.offsetx,-80+b.offsety),n=0,c=7;2==b.type&&(n=8,c=15);Animationmodule.playframe(!1,a,"gameres/animation/tasknpc/",n,c,120,!0,!1,d).name="tasknpc"}};e.getUrl=function(a,b){var d="",n=b;1E4<=b&&(d=Math.floor(b/1E4),n=b%1E4);b=("000000"+n).slice(-6);return GameUtil.getImageSetNameByPath("data/"+a+d+"/"+b).replace(".atlas","/"+b+".png")};return e}(),GameUtil=function(){function e(){this.SkillRockeNum=
this.SkillListType=null;this.boShowBoundary=!1;this.getWidth_lab=this.canvas2D=null;this.currLoadMusic={}}e.GetItemType=function(c){var h=-1;if(void 0==c)return h;5==c.StdMode||6==c.StdMode||95==c.StdMode?h=U_WEAPON:10==c.StdMode||11==c.StdMode?h=U_DRESS:15==c.StdMode?h=U_HELMET:19==c.StdMode||20==c.StdMode||21==c.StdMode?h=U_NECKLACE:22==c.StdMode||23==c.StdMode?(h=U_RINGL,1<=c.Expand1&&12>=c.Expand1&&4<=c.OverLap&&7>=c.OverLap&&(h=U_GODBLESS1+c.Expand1-1)):24==c.StdMode||26==c.StdMode?h=U_ARMRINGR:
29==c.StdMode||30==c.StdMode?h=U_RIGHTHAND:70<=c.StdMode&&74>=c.StdMode?h=U_ICON:25==c.StdMode||51==c.StdMode||96==c.StdMode?h=U_BUJUK:52==c.StdMode||62==c.StdMode||28==c.StdMode?h=U_BOOTS:7==c.StdMode||53==c.StdMode||63==c.StdMode?h=U_CHARM:54==c.StdMode||64==c.StdMode||27==c.StdMode?h=U_BELT:16==c.StdMode?h=U_HAT:48==c.StdMode?h=U_SHIELD:65==c.StdMode?h=U_DRUM:66==c.StdMode||67==c.StdMode?h=U_FASHIONDRESS:68==c.StdMode||69==c.StdMode?h=U_FASHIONWEAPON:178==c.StdMode?h=U_FASHIONHELMET:75==c.StdMode||
76==c.StdMode||77==c.StdMode?h=U_FASHIONNECKLACE:79==c.StdMode||80==c.StdMode?h=U_FASHIONARMRINGR:81==c.StdMode||82==c.StdMode?h=U_FASHIONRINGL:83==c.StdMode?h=U_FASHIONRIGHTHAND:84==c.StdMode||85==c.StdMode?h=U_FASHIONBELT:86==c.StdMode||87==c.StdMode?h=U_FASHIONBOOTS:88==c.StdMode||89==c.StdMode?h=U_FASHIONCHARM:78==c.StdMode&&(h=U_HORSE);if(h==U_RINGL||h==U_ARMRINGR||h==U_HELMET||h==U_NECKLACE)if(4==c.OverLap)h=U_GODBLESS1;else if(6==c.OverLap)h=U_JEWELRYGODBLESSANYPOS;else if(7==c.OverLap)h=U_ANYPOS;
else if(2==c.OverLap)if(1<=c.Expand1&&6>=c.Expand1)h=U_JEWELRY1+c.Expand1-1;else if(0==c.Expand1||7==c.Expand1)h=U_JEWELRYRandom;return h};e.UserInFriendHMD=function(c){for(var h=0;h<G_Friend_HMD_List.length;h++)if(G_Friend_HMD_List[h].split(":")[0]==c)return!0;return!1};e.UserInFriendList=function(c){c.split(",");for(var h=0;h<G_Friend_List.length;h++)if(G_Friend_List[h].split(",")==c)return G_FightSetList[h]=c,!0;return!1};e.InstanceOfMem=function(c){for(var h=0;h<Laya.stage._childs.length;++h){var m=
Laya.stage._childs[h];if(m.__super==c)return m}return!1};e.hasArrive=function(c,h,m){return c.distance(h.x,h.y)<m};e.reverse8dis=function(c){if(0==c)return 4;if(1==c)return 5;if(2==c)return 6;if(3==c)return 7;if(4==c)return 0;if(5==c)return 1;if(6==c)return 2;if(7==c)return 3};e.equalcoordinate=function(c,h,m,g){m=(h.x-c.x)/m;x=c.x+g*m;y=(c.y*(h.x-c.x)+(c.x+g*m-c.x)*(h.y-c.y))/(h.x-c.x);return new Laya.Point(Math.floor(x),Math.floor(y))};e.getpointdir=function(c,h,m){if(c.x==h.x&&c.y==h.y)return 0;
c=new Laya.Point(h.x-c.x,h.y-c.y);c.normalize();m*=Math.sqrt(1/(c.x*c.x+c.y*c.y));return new Laya.Point(m*c.x,m*c.y)};e.ParseUIPos=function(c){if(c==U_ARMRINGL)return 9;if(c==U_RINGL)return 3;if(c==U_BUJUK)return 4;if(c==U_BELT)return 5;if(c==U_BOOTS)return 6;if(c==U_CHARM)return 7;if(c==U_RINGR)return 8;if(c==U_ARMRINGR)return 2;if(c==U_RIGHTHAND)return 1;if(c==U_NECKLACE)return 10;if(c==U_HORSE)return 11;if(c==U_HELMET)return 12;if(c==U_DRESS)return 13;if(c==U_WEAPON)return 14};e.getmoverule=function(c,
h,m){var g=2;h&&m&&(c=this.getorientation(c,h),h=this.getorientation(h,m),c==h?g=3:g=2);return g};e.getMovePoint=function(c,h,m){var g=new Laya.Point;switch(h){case DIR_UP:g.x=c.x;g.y=c.y-m;break;case DIR_RIGHT_UP:g.x=c.x+m;g.y=c.y-m;break;case DIR_RIGHT:g.x=c.x+m;g.y=c.y;break;case DIR_RIGHT_DOWN:g.x=c.x+m;g.y=c.y+m;break;case DIR_DOWN:g.x=c.x;g.y=c.y+m;break;case DIR_LEFT_DOWN:g.x=c.x-m;g.y=c.y+m;break;case DIR_LEFT:g.x=c.x-m;g.y=c.y;break;case DIR_LEFT_UP:g.x=c.x-m,g.y=c.y-m}0>g.x&&(g.x=0);0>g.y&&
(g.y=0);return g};e.getmovedir=function(c,h,m,g){m=new Laya.Point;m.x=c-g/1.414;m.y=h+g/1.414*.667;return m};e.getAngle=function(c,h){c=Math.atan2(c.y-h.y,c.x-h.x);0<c?c=180*c/Math.PI:c=180*(2*Math.PI+c)/Math.PI;return c};e.getorientation16=function(c){return c>22.5-22.4&&44.9>=c?13:22.6<c&&67.4>=c?14:45.1<c&&89.9>=c?15:67.6<c&&112.4>=c?0:90.1<c&&134.9>=c?1:112.6<c&&157.4>=c?2:135.1<c&&179.9>=c?3:157.6<c&&202.4>=c?4:180.1<c&&224.9>=c?5:202.6<c&&247.4>=c?6:225.1<c&&269.9>=c?7:247.6<c&&292.4>=c?8:270.1<
c&&314.9>=c?9:292.6<c&&337.4>=c?10:315.1<c&&359.9>=c?11:12};e.get8orientation=function(c){return 22.6<c&&67.4>=c?7:67.6<c&&112.4>=c?0:112.6<c&&157.4>=c?1:157.6<c&&202.4>=c?2:202.6<c&&247.4>=c?3:247.6<c&&292.4>=c?4:292.6<c&&337.4>=c?5:6};e.getorientation=function(c,h){var m=c.x<h.x?1:c.x==h.x?0:-1;2<Math.abs(c.y-h.y)&&c.x>=h.x-1&&c.x<=h.x+1&&(m=0);var g=c.y<h.y?1:c.y==h.y?0:-1;2<Math.abs(c.x-h.x)&&c.y>=h.y-1&&c.y<=h.y+1&&(g=0);if(0==m&&-1==g)return DIR_UP;if(1==m&&-1==g)return DIR_RIGHT_UP;if(1==m&&
0==g)return DIR_RIGHT;if(1==m&&1==g)return DIR_RIGHT_DOWN;if(0==m&&1==g)return DIR_DOWN;if(-1==m&&1==g)return DIR_LEFT_DOWN;if(-1==m&&0==g)return DIR_LEFT;if(-1==m&&-1==g)return DIR_LEFT_UP};e.setbodycolor=function(c,h,m){if(null!=h)if(0!=(h&67108864)?(c.setbodycolor(3),m==playerID&&(c.paralysis_state=!0,Actionlock=!1)):0!=(h&1073741824)?(c.setbodycolor(1),this.playerActionLockReset(m,c)):0!=(h&2147483648)?(c.setbodycolor(2),this.playerActionLockReset(m,c)):0!=(h&536870912)?(c.setbodycolor(4),this.playerActionLockReset(m,
c)):0!=(h&134217728)?(c.setbodycolor(5),this.playerActionLockReset(m,c)):0!=(h&524288)?(c.setbodycolor(6),this.playerActionLockReset(m,c)):(c.setbodycolor(0),m==playerID&&(Actionlock=!1,c.paralysis_state=!1)),c.setInvisable(0!=(h&8388608)),0!=(h&1048576)&&0==(h&67108864)){if(THumFeature(c.data.fea.buffer))var g=THumFeature(c.data.fea.buffer).btJob;2==g?Skillmodule.EQsecure(29,c,58):Skillmodule.EQsecure(29,c,31)}else m&&Skillmodule.closeEQsecure(m)};e.checkParalysisM2=function(c){var h=1==g_ClientConfig.boParalyCanWalk,
m=1==g_ClientConfig.boParalyCanRun,g=1==g_ClientConfig.boParalyCanSpell,l=1==g_ClientConfig.boParalyCanHit;return c==E_PARALYSISACTIVE.WALK?h:c==E_PARALYSISACTIVE.RUN?m:c==E_PARALYSISACTIVE.MAGIC?g:c==E_PARALYSISACTIVE.ATTACK?l:!1};e.playerActionLockReset=function(c,h){c==playerID&&(Actionlock=!1,h.paralysis_state=!1)};e.getJobName=function(c){switch(c){case 0:return"\u6218\u58eb";case 1:return"\u6cd5\u5e08";case 2:return"\u9053\u58eb"}};e.getprefixname=function(c,h){return(Array(h).join("0")+c).slice(-h)};
e.loadDressSurface=function(c,h){};e.conversions2=function(c,h){};e.delhalo=function(c){if(c=ObjectManage.findobject(c)){object.is_halo=!1;var h=c.getChildByName("halo");h&&h.removeSelf();Animationmodule.removeAniname("halo");Laya.stage.event("del_unlock_icon");this.resetBackupLockID();backupLockID=void 0;lockingList=[];h=lockingID;attackerID=lockingID=0;chaseing=!1;Fightmodule.path_list=[];Objectcontrol.use_attack=!1;Laya.stage.event("show_target_head",[!1,h]);3==c.type&&c.txt_Img&&(c.txt_Img.visible=
!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName,c.txt_name.y=c.txt_Img.visible?c.txt_Img.x+c.txt_Img.height-25:-25);!0===GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName&&3==c.type&&(c.txt_name.text=c.txt_name.lines[c.txt_name.lines.length-1])}};e.loseLockIdCount;e.loseLockIdCountdown=function(){this.loseLockIdCount+=1;if(5>=this.loseLockIdCount){var c=ObjectManage.findobject(backupLockID);c&&(e.addhalo(c),this.loseLockIdCount=void 0,Laya.timer.clear(this,this.loseLockIdCountdown))}else this.resetBackupLockID(),
this.loseLockIdCount=void 0,Laya.timer.clear(this,this.loseLockIdCountdown)};e.clearResByUrl=function(c,h){h=void 0===h?!1:h;0!=c.indexOf("gameres/animation")&&c.indexOf(".atlas")!=c.length-6&&0!=c.indexOf("map/")&&(c=e.getImageSetNameByPath(c));h?Laya.loader.clearTextureRes(c):Laya.loader.clearRes(c,!0)};e.addhalo=function(c){c.is_halo=!0;this.delhalo(lockingID);g_magicId=-1;g_magicType=0;g_boMagicGood=!1;var h=c.getChildByName("halo");h&&h.removeSelf();c.data&&(1==c.type?h=Animationmodule.playframe(!0,
c,"gameres/animation/halo/",550,555,100,!0,!1):3==c.type&&(h=Animationmodule.playframe(!0,c,"gameres/animation/halo/",556,561,100,!0,!1)),h&&(h.name="halo",h.x-=18,h.y-=18,h.zOrder=0),3==c.type&&1==GlobalCfglist.nameshow3&&c.txt_Img&&(c.txt_Img.visible=!0,c.txt_name.y=c.txt_Img.x+c.txt_Img.height-25),3==c.type&&1==GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName&&(c.txt_name.visible=!0,c.txt_name.update(c.txt_name.cur_name,null,c)),backupLockID=lockingID=c.data.record,lockingList.push(c.data.record),
Laya.stage.event("add_unlock_icon"),Laya.stage.event("show_target_head",[!0]))};e.resetBackupLockID=function(){backupLockID=void 0};e.clickfly=function(){clickname&&(Sendmessage.SendNpcCMD(clickname,rw_recog),clickname=null)};e.getcomplete=function(){taskcomplete&&(Sendmessage.SendNpcCMD(taskcomplete,rw_recog),taskcomplete=null)};e.onLa_CLICK=function(c){Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,rw_recog,0,0,0,"@"+c.target.name);Laya.stage.event("UPDATETASK",[""]);Laya.Tween.to(c.target,{scaleX:.7,
scaleY:.7},150)};e.onLa_CLICK_OVER=function(c){Laya.Tween.to(c.target,{scaleX:1,scaleY:1},150)};e.onRWWin_CLICK=function(){};e.GetMissGloba=function(c,h,m){for(var g=!1,l=h,p=0;p<g_GlobalList.length;p++)if(g_GlobalList[p].sName==c){0==m?l=g_GlobalList[p].nCount:(g_GlobalList[p].nCount=h,""!=sNewNpcStr&&0<parseInt(h)&&Laya.stage.event("Show_NewNpc",[sNewNpcStr]));g=!0;break}g||(m=new TaskGloba,m.sName=c,m.nCount=h,g_GlobalList.push(m));return l};e.movestep=function(c,h,m,g){var l=new Laya.Point;switch(c){case 0:0>
m.y?l.y=32*h.y+m.y:l.y=32*(h.y-g)+m.y;break;case 1:0<m.x?l.x=48*h.x+m.x:l.x=48*(h.x+g)+m.x;0>m.y?l.y=32*h.y+m.y:l.y=32*(h.y-g)+m.y;break;case 2:0<m.x?l.x=48*h.x+m.x:l.x=48*(h.x+g)+m.x;break;case 3:0<m.x?l.x=48*h.x+m.x:l.x=48*(h.x+g)+m.x;0<m.y?l.y=32*h.y+m.y:l.y=32*(h.y+g)+m.y;break;case 4:0<m.y?l.y=32*h.y+m.y:l.y=32*(h.y+g)+m.y;break;case 5:0>m.x?l.x=48*h.x+m.x:l.x=48*(h.x-g)+m.x;0<m.y?l.y=32*h.y+m.y:l.y=32*(h.y+g)+m.y;break;case 6:0>m.x?l.x=48*h.x+m.x:l.x=48*(h.x-g)+m.x;break;case 7:0>m.x?l.x=48*
h.x+m.x:l.x=48*(h.x-g)+m.x,0>m.y?l.y=32*h.y+m.y:l.y=32*(h.y-g)+m.y}return l};e.moverule=function(c,h,m){var g=Mapmodule.CanMove(c,h,m);if(2==m||3==m){var l=ObjectManage.hasobstacle(c,h,m);var p=ObjectManage.hasobstacle(c,h,1,m);if(p&&l)l=!0;else if(!p&&!l)l=!1;else if(!p&&l)l=!1;else if(p&&!l)return[e.getMovePoint(c,h,1),!0]}else l=ObjectManage.hasobstacle(c,h,m);return g&&l?e.getMovePoint(c,h,m):!1};e.canUseYeMan=function(c,h,m){var g=Mapmodule.CanMove(c,h,m),l=ObjectManage.hasobstacleID(c,h);return!g||
l&&(!l||1!=l.type&&3!=l.type)?!1:e.getMovePoint(c,h,m)};e.moveshift=function(c,h,m,g,l,p){var q=l=0;p=48*h;var r=32*h;m>g&&(m=g);switch(c){case 0:c=Math.round((g-m)/g-1E-5)*h;l=0;q=c==h?-Math.round(r/g*m):Math.round(r/g*(g-m));break;case 1:c=Math.round((g-m+(6<=g?2:0))/g-1E-5)*h;c==h?(l=Math.round(p/g*m),q=-Math.round(r/g*m)):(l=-Math.round(p/g*(g-m)),q=Math.round(r/g*(g-m)));break;case 2:c=Math.round((g-m)/g-1E-5)*h;l=c==h?Math.round(p/g*m):-Math.round(p/g*(g-m));q=0;break;case 3:c=Math.round((g-
m-(6<=g?2:0))/g-1E-5)*h;c==h?(l=Math.round(p/g*m),q=Math.round(r/g*m)):(l=-Math.round(p/g*(g-m)),q=-Math.round(r/g*(g-m)));break;case 4:c=Math.round((g-m-(6<=g?1:0))/g-1E-5)*h;l=0;q=c==h?Math.round(r/g*m):-Math.round(r/g*(g-m));break;case 5:c=Math.round((g-m-(6<=g?2:0))/g-1E-5)*h;c==h?(l=-Math.round(p/g*m),q=Math.round(r/g*m)):(l=Math.round(p/g*(g-m)),q=-Math.round(r/g*(g-m)));break;case 6:c=Math.round((g-m)/g-1E-5)*h;l=c==h?-Math.round(p/g*m):Math.round(p/g*(g-m));q=0;break;case 7:c=Math.round((g-
m+(6<=g?2:0))/g-1E-5)*h,c==h?(l=-Math.round(p/g*m),q=-Math.round(r/g*m)):(l=Math.round(p/g*(g-m)),q=Math.round(r/g*(g-m)))}return new Laya.Point(l,q)};e.GetDiyNpcData=function(c){for(var h=null,m=0;m<g_DiyNPCList.length;m++)if(c==g_DiyNPCList[m].Index){h=g_DiyNPCList[m];break}return h};e.rulebymon=function(c,h,m,g,l){var p=this.getActonModel(c,h),q=0,r=0,u=0;if(50==c)if(DiyNpc=this.GetDiyNpcData(h),null!=DiyNpc){if(0==DiyNpc.UseDirs[g])for(var v=0;v<DiyNpc.UseDirs.length;v++)DiyNpc.UseDirs[v]&&(g=
v);if(DiyNpc.UseDirs[g]){var w=[];c=[];if(1==m){var z=g_pak_list[DiyNpc.ImgFrames[g].StandBaseImg.FileID];p=DiyNpc.ImgFrames[g].StandBaseImg.Speed;m=DiyNpc.ImgFrames[g].StandBaseImg.ImageID;q=DiyNpc.ImgFrames[g].StandBaseImg.Count;sublen=DiyNpc.ImgFrames[g].StandAddImg.Count;subidx=DiyNpc.ImgFrames[g].StandAddImg.ImageID;subfile=g_pak_list[DiyNpc.ImgFrames[g].StandAddImg.FileID]}else z=g_pak_list[DiyNpc.ImgFrames[g].ActBaseImg.FileID],p=DiyNpc.ImgFrames[g].ActBaseImg.Speed,m=DiyNpc.ImgFrames[g].ActBaseImg.ImageID,
q=DiyNpc.ImgFrames[g].ActBaseImg.Count,sublen=DiyNpc.ImgFrames[g].ActAddImg.Count,subidx=DiyNpc.ImgFrames[g].ActAddImg.ImageID,subfile=g_pak_list[DiyNpc.ImgFrames[g].ActAddImg.FileID];for(v=m;v<m+q;v++)w.push(this.getprefixname(v,6));for(v=subidx;v<subidx+sublen;v++)c.push(this.getprefixname(v,6));v=[];v.file=z;v.ftime=p;v.frames=w;-1!=subfile&&(v.sub_file=subfile);v.sub_frames=c;return v}}else{w=this.loadNpcSurface(c,h);var A=this.getNpcOffSet(h);z="npc";0<w&&(z="npc"+w);r=g%3;w=0}else w=parseInt(h/
10)+1,A=e.getMonsterOffSet(h),r=g,1E3<=h?(w=0,z="graphics/mon/"+h,3700<=h&&3800>h?(z="mon",w=parseInt(h/100)+1):156==c&&0<h&&(z="shijiemon")):950<=h&&960>h?(z="mon-kulou",w=0):z="mon";83!=c||904!=h&&800!=h||(z="dragon",w=A=0,7==m&&(m=3));if(obj_config){var C=0==w?"":w;w=[];g=this.getstatenamebymon(m);var B=obj_config[p][g].frame,D=obj_config[p][g].frame,E=obj_config[p][g].skip,F=obj_config[p][g].start;50==c&&45==h?(g="ActStand",r=0,B=obj_config[p][g].frame,F=0):34==c&&131==h?r=0:34==c&&141==h?r=0:
43==c&&41==h?r=0:33==c&&140==h?r=0:50==c&&34==h?(r=0,g="ActStand",B=4,u=2130):83!=c||904!=h&&800!=h?23==c&&37==h&&"ActDeath"==g?r=0:49==c&&63==h&&"ActDeath"==g?r=0:13!=c||10!=h||"ActDeath"!=g&&"ActStand"!=g?100==c&&173==h&&"ActDie"==g?B=6:50!=c||78!=h&&83!=h&&84!=h&&85!=h&&86!=h&&87!=h?50!=c||67!=h&&68!=h&&69!=h&&70!=h&&71!=h&&72!=h?50!=c||64!=h&&65!=h&&66!=h&&82!=h?50!=c||60!=h&&61!=h?19==c&&1005==h&&"ActDie"==g?B=5:78==c&&221==h&&"ActDie"==g?(B=10,r/=2):156==c&&242==h?"ActAttack"==g||"ActStand"==
g?(A=1090,B=4):"ActWalk"==g?A=1090:"ActDie"==g?(A=1090,B=10):"ActStruck"==g&&(A=1090):50==c&&89==h?(B=1,r=0,g="ActStand",u=12,q=9,F=0):160==c&&324==h?(r=0,"ActDie"==g&&(A=2370)):109==c&&325==h?r=0:109==c&&326==h?r=0:161==c&&327==h?(r=0,"ActDie"==g&&(A=3040,B=18)):112==c&&336==h?r=0:112==c&&337==h?r=0:162==c&&370==h?"ActAttack"==g?A=90:"ActStand"==g?A=170:"ActDie"==g?A=90:"ActDeath"==g?(g="ActWalk",A=-80,B=9):"ActStruck"==g&&(A=90):165==c&&3712==h?10==m?(A=6370,g="ActAttack",D=B=8,E=2,F=0):11==m?(A=
6290,g="ActAttack",D=B=8,E=2,F=0):12==m?(A=6450,g="ActAttack",D=B=8,E=2,F=0):"ActDie"==g&&(A=6130,D=B=16,E=4,F=0):165==c&&3713==h?10==m?(A=7180,g="ActAttack",D=B=8,E=2,F=0):11==m?(A=7100,g="ActAttack",D=B=10,F=E=0):"ActDie"==g&&(A=6940,D=B=14,E=6,F=0):19==c&&290==h?("ActWalk"==g&&(A=440),"ActDie"==g&&(D=10,E=0,F=260)):19==c&&291==h?("ActWalk"==g?(A=440,F=0):"ActStand"==g&&(A=360),"ActStruck"==g&&(A=600,D=2,F=E=0),"ActDie"==g&&(A=620,D=10,F=E=0)):19==c&&292==h?("ActWalk"==g?(A=800,F=0):"ActStand"==
g&&(A=720),"ActDie"==g&&(A=980,D=10,F=E=0),"ActStruck"==g&&(A=960,D=2,F=E=0)):99==c&&900==h?(z="effect",r=0,C="","ActStand"==g?(B=0,w.push("000080")):"ActStruck"==g?(B=4,A=80):"ActDie"==g&&(B=10,A=80,F=24)):98==c&&901==h?(z="effect",r=0,C="","ActDie"==g?(B=5,A=168,F=0):(B=0,null==l&&(l=0),w.push("000"+(168+l)))):98==c&&902==h?(z="effect",r=0,C="","ActDie"==g?(B=5,A=184,F=0):(B=0,null==l&&(l=0),w.push("000"+(184+l)))):98==c&&903==h?(z="effect",r=0,C="","ActDie"==g?(B=5,A=200,F=0):(B=0,null==l&&(l=
0),w.push("000"+(200+l)))):50!=c||308!=h&&312!=h&&313!=h&&314!=h&&315!=h&&316!=h&&317!=h?50!=c||318!=h&&319!=h&&320!=h&&324!=h&&325!=h&&326!=h&&327!=h&&328!=h&&329!=h&&300!=h?50!=c||88!=h&&321!=h&&322!=h&&323!=h?50==c&&310==h?(B=4,F=0,g="ActStand",q=u=0):50==c&&311==h?"ActAttack"==g&&(B=15,A=770,r=F=0):50==c&&46==h&&(B=4,F=r=0,g="ActStand",q=u=0):(B=1,F=r=0,g="ActStand",q=u=0):(B=1,F=r=0,g="ActStand",q=u=0):(B=1,F=r=0,g="ActStand",q=u=0):(r=1,g="ActStand",B=4,F=0):(r=0,g="ActStand",B=4,F=0):(r=0,
g="ActStand",u=B=4,F=0):(r=0,g="ActStand",B=10,F=0):(r=0,"ActDeath"==g&&(A=10,F=0,B=8)):r=0;for(v=0;v<B;v++){var G=""+this.getprefixname(A+F+v+r*(D+E),6);w.push(G)}c=[];if(0!=u)if(1E3<u)for(v=0;10>v;v++)c.push(this.getprefixname(u+q+v,6));else for(v=1;v<=u;v++)c.push(this.getprefixname(parseInt(G)+q+v,6));v=[];v.file=z+C;v.ftime=obj_config[p][g].ftime;v.frames=w;v.sub_frames=c;return v}};e.ruleByDiyMon=function(c,h){1==c.cur_state&&(g_diyMonState=0);for(var m=[],g=h.BaseAction[g_diyMonState],l=g.ActionInfo,
p=[],q=l.ActionArr[1],r=l.ActionArr[2],u=l.ActionArr[0],v=0;v<q;v++){var w=""+this.getprefixname(u+v+c.cur_dir*(q+r),6);p.push(w)}v=g.ActionEffInfo;q=[];r=v.ActionArr[1];u=v.ActionArr[2];v=v.ActionArr[0];for(w=0;w<r;w++){var z=""+this.getprefixname(v+w+c.cur_dir*(r+u),6);q.push(z)}m.file=g_pak_list[h.ActionFileIdx-1];m.sub_file=g_pak_list[g.EffFileIdx-1];m.ftime=l.ActionArr[3];m.frames=p;m.sub_frames=q;return m};e.diyMonSpecilHit=function(c,h,m,g){c=c.ClientMonMagicInfo;var l=ObjectManage.findobject(g);
if(null!=l)if(g=c.btFlyMaigcType[m],1==g||2==g){g=c.EffFileIdxArr[m];var p=c.AttMaigcEffInfo[m].ActionArr[0],q=c.AttMaigcEffInfo[m].ActionArr[1],r=c.AttMaigcEffInfo[m].ActionArr[2],u=e.getAngle(h.grid,l.grid);u=e.getorientation16(u);g="data/"+g_pak_list[g-1]+"/";p+=u*(q+r);q=p+q-1;r=c.BowFileIdxArr[m];u=c.AttBowMagic[m].ActionArr[0];m=c.AttBowMagic[m].ActionArr[1];var v="data/"+g_pak_list[r-1]+"/",w=u,z=w+m-1;h=new Laya.Point(h.grid.x,h.grid.y);var A=Animationmodule.playframe(!0,Mapmodule.root,g,
p,q,100,!0,!1);A&&(A.pos(48*h.x,32*h.y),h=60*l.grid.distance(h.x,h.y),Laya.Tween.to(A,{x:48*l.grid.x,y:32*l.grid.y},h,null,Laya.Handler.create(this,function(){Animationmodule.removeAni(A);Animationmodule.playframe(!0,l,v,w,z,100,!1,!0)})))}else r=c.EffFileIdxArr[m],u=c.AttMaigcEffInfo[m].ActionArr[0],m=c.AttMaigcEffInfo[m].ActionArr[1],v="data/"+g_pak_list[r-1]+"/",w=u,z=w+m-1,A=Animationmodule.playframe(!0,l,v,w,z,100,!1,!0)};e.getstatenamebymon=function(c){var h="ActStand";switch(c){case 0:case 1:h=
"ActStand";break;case 2:h="ActWalk";break;case 3:h="ActAttack";break;case 4:h="ActCritical";break;case 5:h="ActStruck";break;case 6:h="ActDie";break;case 7:h="ActDeath";break;case 8:h="ActAttack2";break;case 9:h="ActWalk";break;case 10:h="ActAttack";break;case 11:h="ActAttack";break;case 12:h="ActAttack"}return h};e.getstatenamebyplayer=function(c){var h="ActStand";switch(c){case 1:h="ActStand";break;case 2:h="ActWalk";break;case 3:h="ActRun";break;case 4:h="ActRushLeft";break;case 5:h="ActRushRight";
break;case 6:h="ActWarMode";break;case 7:h="ActHit";break;case 8:h="ActHeavyHit";break;case 9:h="ActBigHit";break;case 10:h="ActFireHitReady";break;case 11:h="ActSpell";break;case 12:h="ActSitdown";break;case 13:h="ActStruck";break;case 14:h="ActDie"}return h};e.getresfilename=function(c,h,m,g){var l="";g=g?"":"data/";switch(h){case 1:l=g+c.file+"/";break;case 2:l=g+c.file+"/";break;case 3:l=g+c.file+"/";break;case 4:c.use_hores?l=g+"l-hairhorse/":l=g+c.hair_file+"/";break;case 5:l=g+c.weapon_file+
"/";break;case 6:l=g+"l-horse/";break;case 7:l=g+c.wing_file+"/";break;case 8:l=g+c.wapeff_file+"/";break;case 11:l=g+c.shield_file+"/";break;case 12:l=g+c.shdeff_file+"/";break;case 13:l=g+m+"/"}return l};e.rulebyhat=function(c,h,m,g){var l=8>h?3600+1200*h+600*c:1200*(h-8)+600*c;c=[];if(obj_config){m=this.getstatenamebyplayer(m);for(var p=0;p<obj_config.HA[m].frame;p++){var q=""+this.getprefixname(l+obj_config.HA[m].start+p+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6);c.push(q)}}g=[];g.ftime=
obj_config.HA[m].ftime;g.frames=c;g.file=8>h?"hair2":"hair3";return g};e.rulebyhair=function(c,h,m,g,l){var p=0;if(6>c)if(4>c||0<m)switch(h){case 0:p=1200*c;break;case 1:p=600*(2*c+1)}else switch(c){case 4:p=3600;break;case 5:p=4800;break;default:p=-1}else 254==c&&(h=0),m_btHair=255,p=600*(4+2*h);c=[];if(obj_config)for(g=this.getstatenamebyplayer(g),h=0;h<obj_config.HA[g].frame;h++)m=""+this.getprefixname(p+obj_config.HA[g].start+h+l*(obj_config.HA[g].frame+obj_config.HA[g].skip),6),c.push(m);l=[];
l.ftime=obj_config.HA[g].ftime;l.frames=c;l.file="hair2";return l};e.rulebydressforhores=function(c,h,m,g){var l=600*c,p=g_UserItemList[15],q=e.getMyObject();1==g_ridingShow&&(null!=p?(l=p.s.Reserved,l=0==q.skin_feature.btGender?0==parseInt(l%10)?10800:1200*(parseInt(l%10)-1):0==parseInt(l%10)?11400:1200*(parseInt(l%10)-.5)):l=0!=Math.floor((c-h)/2)?600*(2+h):l=600*h);q=[];if(obj_config)for(m=this.getstatenamebyplayer(m),c=0;c<obj_config.HA[m].frame;c++)h=""+this.getprefixname(l+obj_config.HA[m].start+
c+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6),q.push(h);g=[];g.file="l-humhorse";g.ftime=obj_config.HA[m].ftime;g.frames=q;return g};e.rulebyhores=function(c,h,m,g){h=600*(c-1);c=[];if(obj_config){m=this.getstatenamebyplayer(m);for(var l=0;l<obj_config.HA[m].frame;l++){var p=""+this.getprefixname(h+obj_config.HA[m].start+l+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6);c.push(p)}}g=[];g.ftime=obj_config.HA[m].ftime;g.frames=c;g.file="l-horse";return g};e.rulebydress=function(c,h,m,g){h=
"hum";if(2100<=c){var l=Math.floor(c/100);h+=l-16;c-=100*l}else 2006<=c?(h="hum4",c-=2006):2E3<=c?(h="hum3",c-=1962):200<=c?(h="graphics/human/"+Math.floor(c/2),c%=2):160<=c?(h="hum3",c-=160):130<=c?(h="hum2",c-=130):h="hum";c*=600;l=[];if(obj_config){m=this.getstatenamebyplayer(m);for(var p=0;p<obj_config.HA[m].frame;p++){var q=""+this.getprefixname(c+obj_config.HA[m].start+p+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6);l.push(q)}}g=[];g.xid=c;g.ftime=obj_config.HA[m].ftime;g.frames=l;g.file=
h;return g};e.GetJSDateTimeFromDelphi8Bytes=function(c){for(var h=new ArrayBuffer(8),m=new Uint8Array(h),g=0;8>g;g++)m[g]=c[g];c=new Float64Array(h);var l=new Date(parseInt(864E5*(c[0]-25569)-288E5));c=l.getFullYear();h=l.getMonth()+1;h=10>h?"0"+h:h;m=l.getDate();m=10>m?"0"+m:m;g=l.getHours();g=10>g?"0"+g:g;var p=l.getMinutes();p=10>p?"0"+p:p;l=l.getSeconds();return c+"-"+h+"-"+m+" "+g+":"+p+":"+(10>l?"0"+l:l)};e.getformattimestamp=function(c){var h=new Date(c);c=h.getFullYear();var m=h.getMonth()+
1;m=10>m?"0"+m:m;var g=h.getDate();g=10>g?"0"+g:g;var l=h.getHours();l=10>l?"0"+l:l;var p=h.getMinutes();h=h.getSeconds();return c+"-"+m+"-"+g+" "+l+":"+(10>p?"0"+p:p)+":"+(10>h?"0"+h:h)};e.rulebyweaponeeffect=function(c,h,m,g,l){if(0==g_pak_list.length)return null;var p=0,q="";if(0<=c){if(240<=c&&247>=c){switch(c){case 240:p=600*m;break;case 241:p=1200+600*m;break;case 242:p=6E3+600*m;break;case 243:p=8400+600*m;break;case 244:p=9600+600*m;break;case 245:p=10800+600*m;break;case 246:p=12600+600*
m;break;case 247:p=13200+600*m}q="humeffect2"}else 0<=c&&c<g_pak_list.length&&(p=h+600*m,q=g_pak_list[c]);c=[];if(obj_config)for(g=this.getstatenamebyplayer(g),h=0;h<obj_config.HA[g].frame;h++)m=""+this.getprefixname(p+obj_config.HA[g].start+h+l*(obj_config.HA[g].frame+obj_config.HA[g].skip),6),c.push(m);l=[];l.ftime=obj_config.HA[g].ftime;l.frames=c;l.file=q;return l}};e.HumBodyEffect=function(c){c.wing_frames=[];c.obj_wing&&c.obj_wing.graphics.clear();var h=c.getChildByName("HumBodyEffect");null==
h&&(h=Animationmodule.playframe(!1,c,"data/effect/",352,371,280,!0,!1))&&(h.name="HumBodyEffect")};e.rulebywing=function(c,h,m,g){switch(c){case 50:var l=352;c="effect";break;case 242:l=2400+600*h;c="humeffect2";break;case 243:l=3600+600*h;c="humeffect2";break;case 244:l=4800+600*h;c="humeffect2";break;case 245:l=7200+600*h;c="humeffect2";break;default:l=600*(c-1),c="humeffect"}h=[];if(obj_config){m=this.getstatenamebyplayer(m);for(var p=0;p<obj_config.HA[m].frame;p++){var q=""+this.getprefixname(l+
obj_config.HA[m].start+p+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6);h.push(q)}}g=[];g.ftime=obj_config.HA[m].ftime;g.frames=h;g.file=c;return g};e.DreesEffect=function(c,h,m,g,l){m="";var p=-1;6E4<c&&(c-=65536);0<=c&&c<g_pak_list.length?(m=g_pak_list[c],p=h):-9==c&&(m="humeffect",p=1200*h);if(""!=m&&0<=p){c=[];if(obj_config)for(g=this.getstatenamebyplayer(g),h=0;h<obj_config.HA[g].frame;h++){var q=""+this.getprefixname(p+obj_config.HA[g].start+h+l*(obj_config.HA[g].frame+obj_config.HA[g].skip),
6);c.push(q)}l=[];l.ftime=obj_config.HA[g].ftime;l.frames=c;l.file=m;return l}};e.rulebyShieldEffect=function(c,h,m,g,l){m="";var p=-1;6E4<c&&(c-=65536);0<=c&&c<g_pak_list.length?(m=g_pak_list[c],p=h):-9==c&&(m="humeffect",p=1200*h);if(""!=m&&0<=p){c=[];if(obj_config)for(g=this.getstatenamebyplayer(g),h=0;h<obj_config.HA[g].frame;h++){var q=""+this.getprefixname(p+obj_config.HA[g].start+h+l*(obj_config.HA[g].frame+obj_config.HA[g].skip),6);c.push(q)}l=[];l.ftime=obj_config.HA[g].ftime;l.frames=c;
l.file=m;return l}};e.rulebyShield=function(c,h,m,g){h=[];--c;if(0<=c){c*=600;if(obj_config){m=this.getstatenamebyplayer(m);for(var l=0;l<obj_config.HA[m].frame;l++){var p=""+this.getprefixname(c+obj_config.HA[m].start+l+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6);h.push(p)}}g=[];g.ftime=obj_config.HA[m].ftime;g.frames=h;g.file="s-shield";return g}};e.rulebyWeapon=function(c,h,m,g){if(2100<=c){var l=Math.floor(c/100);h="weapon"+(l-15);c=600*(c-100*l)}else 1024<=c&&1100>c?(c=600*(c-1024),h=
"weapon2"):1254<=c&&2E3>c?(c=600*(c-1254),h="weapon3"):2078<=c?(c=600*(c-2078),h="weapon5"):2024<=c?(c=600*(c-2024),h="weapon4"):2E3<=c?(c=600*(c-1976),h="weapon3"):200<=c&&2E3>=c?(l=Math.floor(c/2),c=600*(0+h),h="graphics/weapon/"+l):176<=c?(c=600*(c-176),h="weapon3"):130<=c?(c=600*(c-130),h="weapon2"):(c*=600,h="weapon");l=[];if(obj_config){m=this.getstatenamebyplayer(m);for(var p=0;p<obj_config.HA[m].frame;p++){var q=""+this.getprefixname(c+obj_config.HA[m].start+p+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),
6);l.push(q)}}g=[];g.ftime=obj_config.HA[m].ftime;g.frames=l;g.file=h;return g};e.loadDressSurfaceByHit=function(c,h){var m=0,g=Math.floor((c-h)/2);1E3>g?(204>=g&&(m=0),160<=g?c=2*(g-181)+h:80<=g?(c=2*(g-80)+h,m=3):c=65<=g?2*(g-65+12)+h:c):(m=Math.floor((g-100)/50)+2,c=2*Math.floor((g-100)%50)+h);return{nAppr:m,nDress:c}};e.loadHairSurfaceByHit=function(){};e.loadWeaponSurfaceByHit=function(c,h){};e.loadNpcSurface=function(c,h){var m=0;50==c&&(m=2E3<=h?10:1E3<=h?9:500<=h?1:300>h?0:300<=h&&328>=h?
2:0);return m};e.getNpcOffSet=function(c){return 23>=c?60*c:24==c||25==c?60*(c-24)+1470:26==c||28==c||29==c||30==c||31==c||33<=c&&41>=c?60*(c-26)+1620:27==c||32==c?60*(c-26)+1620-30:42<=c&&47>=c?2580+60*(c-42):48==c?2960:49==c||50==c?3040:51<=c&&54>=c?3041+(c-51):55<=c&&62>=c?3060+60*(c-55):63==c?3600:64<=c&&72>=c?3750+10*(c-64):73<=c&&75>=c?3840+60*(c-73):76==c?3980:77==c?4E3:78==c?4030:79==c?4060:80==c?4120:81==c?4180:82==c?4240:83<=c&&88>=c?4490+10*(c-83):89==c?4560:90==c?4600:91<=c&&100>=c?4630+
10*(c-91):101==c?4770:102==c?4810:300<=c&&310>=c?70*(c-300):311==c?740:312<=c&&317>=c?810+10*(c-312):318<=c&&320>=c?870+30*(c-318):321<=c&&323>=c?970+10*(c-321):324==c?1020:325==c?1030:326==c?1060:327==c?1061:328==c?1062:500<=c&&699>=c?60*(c-500):700<=c&&900>=c?70*(c-700):1E3<=c&&1999>=c?c-1E3:2E3<=c&&3E3>=c?c-2E3:3E3<=c&&4E3>=c?60*(c-3E3):1E3<=c?60*(c-1E3):200<c?70*(c-200):60*(c-200)};var f=0,a=0,b=0,d=0;e.Shift=function(c,h,m,g,l){var p=l.x;l=l.y;var q=48*h,r=32*h;b=l;d=p;switch(c){case 0:ss=parseInt(Math.round(g-
m)/g)*h;f=0;d=p+ss;a=ss==h?-parseInt(Math.round(r/g*m)):parseInt(Math.round(r/g*(g-m)));break;case 1:c=6<=g?c=2:c=0;ss=parseInt(Math.round(g-m+c)/g)*h;b=l-ss;d=p+ss;ss==h?(f=parseInt(Math.round(q/g*m)),a=-parseInt(Math.round(r/g*m))):(f=-parseInt(Math.round(q/g*(g-m))),a=parseInt(Math.round(r/g*(g-m))));break;case 2:ss=parseInt(Math.round(g-m)/g)*h;b=l-ss;ss==h?f=parseInt(Math.round(q/g*m)):a=-parseInt(Math.round(q/g*(g-m)));a=0;break;case 3:c=6<=g?c=2:c=0;ss=parseInt(Math.round(g-m-c)/g)*h;b=l-ss;
b=p-ss;ss==h?(f=parseInt(Math.round(q/g*m)),a=parseInt(Math.round(r/g*m))):(f=-parseInt(Math.round(q/g*(g-m))),a=-parseInt(Math.round(r/g*(g-m))));break;case 4:c=6<=g?c=1:c=0;ss=parseInt(Math.round(g-m-c)/g)*h;f=0;d=p-ss;a=ss==h?parseInt(Math.round(r/g*m)):-parseInt(Math.round(r/g*(g-m)));break;case 5:c=6<=g?c=2:c=0;ss=parseInt(Math.round(g-m-c)/g)*h;b=l+ss;d=p-ss;ss==h?(f=-parseInt(Math.round(q/g*m)),a=parseInt(Math.round(r/g*m))):(f=parseInt(Math.round(q/g*(g-m))),a=-parseInt(Math.round(r/g*(g-
m))));break;case 6:ss=parseInt(Math.round(g-m)/g)*h;b=l+ss;f=ss==h?-parseInt(Math.round(q/g*m)):parseInt(Math.round(q/g*(g-m)));a=0;break;case 7:c=6<=g?c=2:c=0,ss=parseInt(Math.round(g-m+c)/g)*h,b=l+ss,d=p+ss,ss==h?(f=-parseInt(Math.round(q/g*m)),parseInt(Math.round(r/g*m))):(f=parseInt(Math.round(q/g*(g-m))),a=parseInt(Math.round(r/g*(g-m))))}};e.Countdir=function(c){c=0<c?180*c/Math.PI:180*(2*Math.PI+c)/Math.PI;return 10<c&&80>=c?3:80<c&&100>=c?2:100<c&&170>=c?1:170<c&&190>=c?0:190<c&&260>=c?7:
260<c&&280>=c?6:280<c&&350>=c?5:4};e.GetDirByTargetPoint=function(c,h,m,g){return this.Countdir(Math.atan2(c-m,h-g))};e.GetNextPoint=function(c,h,m){0==m&&(h+=1);4==m&&--h;6==m&&(c+=1);2==m&&--c;7==m&&(c+=1,h+=1);1==m&&(--c,--h);5==m&&(c+=1,--h);3==m&&(--c,--h);return{x:c,y:h}};e.convertMapToScreen=function(c,h){return{x:48*(c-b)+532-f,y:48*(h-d)+336-a}};e.convertScreenToMap=function(c,h){c=parseInt(Math.round(c-576+f)/48)+b;h=parseInt(Math.round(h-368+a)/32)+d;return{x:c,y:h}};e.getActonModel=function(c,
h){switch(c){case 9:return"MA9";case 10:return"MA10";case 11:return"MA11";case 12:return"MA12";case 13:return"MA13";case 14:return"MA14";case 15:return"MA15";case 16:return"MA16";case 17:return"MA14";case 18:return"MA14";case 19:switch(h){case 258:return"MA258";case 264:return"MA264";default:return"MA19"}case 20:return"MA19";case 21:return"MA19";case 22:return"MA15";case 23:return"MA14";case 24:return"MA12";case 30:return"MA17";case 31:return"MA17";case 32:return"MA24";case 33:return"MA25";case 34:return"MA30";
case 35:return"MA31";case 36:return"MA32";case 37:return"MA19";case 40:return"MA19";case 41:return"MA20";case 42:return"MA20";case 43:return"MA21";case 45:return"MA19";case 47:return"MA22";case 48:return"MA23";case 49:return"MA23";case 50:switch(h){case 23:return"MA36";case 24:return"MA37";case 25:return"MA37";case 26:return"MA35";case 27:return"MA37";case 28:return"MA35";case 29:return"MA35";case 30:return"MA35";case 31:return"MA35";case 32:return"MA37";case 33:return"MA35";case 34:return"MA35";
case 35:return"MA41";case 36:return"MA41";case 37:return"MA41";case 38:return"MA41";case 39:return"MA41";case 40:return"MA41";case 41:return"MA41";case 42:return"MA46";case 43:return"MA46";case 44:return"MA36";case 45:return"MA36";case 46:return"MA36";case 48:return"MA41";case 49:return"MA41";case 50:return"MA41";case 51:return"MA35";case 52:return"MA41";case 53:return"MA41";case 71:return"MA50";case 76:return"MA35";case 99:return"MA60";case 100:return"MA1";case 101:return"MA101";case 102:return"MA60";
case 304:return"MA60";case 305:return"MA60";case 306:return"MA60";case 309:return"MA60";case 310:return"MA210";default:return"MA35"}case 52:return"MA19";case 53:return"MA19";case 54:return"MA28";case 55:return"MA29";case 56:return"MA56";case 60:return"MA33";case 61:return"MA33";case 62:return"MA33";case 63:return"MA34";case 64:return"MA19";case 65:return"MA19";case 66:return"MA19";case 67:return"MA19";case 68:return"MA19";case 69:return"MA19";case 70:return"MA33";case 71:return"MA33";case 72:return"MA33";
case 73:return"MA19";case 74:return"MA19";case 75:return"MA39";case 76:return"MA38";case 77:return"MA39";case 78:return"MA40";case 79:return"MA19";case 80:return"MA42";case 81:return"MA43";case 83:return"MA44";case 84:return"MA45";case 85:return"MA45";case 86:return"MA45";case 87:return"MA45";case 88:return"MA45";case 89:return"MA45";case 90:return"MA30";case 98:return"MA27";case 99:return"MA26";case 100:return"MA19";case 101:return"MA19";case 102:return"MA102";case 103:return"MA103";case 104:return"MA104";
case 105:return"MA33";case 106:return"MA106";case 107:return"MA107";case 108:return"MA108";case 109:return"MA109";case 110:return"MA110";case 151:return"MA151";case 111:return"MA19";case 112:return"MA112";case 113:return"MA113";case 114:return"MA114";case 115:return"MA115";case 116:return"MA33";case 155:return"MA155a";case 92:return"MA92";case 27:return"MA92";case 29:return"MA92";case 150:return"MA92";default:return"MA19"}};e.getMonsterOffSet=function(c){if(1E3<c&&3700<=c&&3800>c){var h=parseInt(c/
100);c%=100}else if(1E3>=c)h=parseInt(c/10),c%=10;else return 0;switch(h){case 0:return 280*c;case 1:return 230*c;case 4:return 1==c?600:360*c;case 5:return 430*c;case 6:return 440*c;case 13:switch(c){case 2:return 440;case 3:return 550;default:return 360*c}case 15:return 1<=c&&3>=c?360*c:0;case 17:switch(c){case 2:return 920;case 3:return 1280;default:return 350*c}case 18:switch(c){case 1:return 520;case 2:return 950;case 3:return 1574;case 4:return 1934;case 5:return 2294;case 6:return 2654;case 7:return 3014;
default:return 0}case 19:switch(c){case 1:return 370;case 2:return 810;case 3:return 1250;case 4:return 1630;case 5:return 2010;case 6:return 2390;default:return 0}case 20:switch(c){case 1:return 360;case 2:return 720;case 3:return 1080;case 4:return 1440;case 5:return 1800;case 6:return 2350;case 7:return 3060;default:return 0}case 21:switch(c){case 1:return 460;case 2:return 820;case 3:return 1180;case 4:return 1540;case 5:return 1900;case 6:return 2440;case 7:return 2570;case 8:return 2700;default:return 0}case 22:switch(c){case 1:return 430;
case 2:return 1290;case 3:return 1810;default:return 0}case 23:switch(c){case 1:return 340;case 2:return 680;case 3:return 1180;case 4:return 1770;case 5:return 2610;case 6:return 2950;case 7:return 3290;case 8:return 3750;case 9:return 4460;default:return 0}case 24:switch(c){case 1:return 510;case 2:return 1020;case 3:return 1030;case 4:return 1090;default:return 0}case 25:switch(c){case 1:return 510;case 2:return 1020;case 3:return 1370;case 4:return 1720;case 5:return 2070;case 6:return 2740;case 7:return 3780;
case 8:return 3820;case 9:return 4170;default:return 0}case 26:switch(c){case 1:return 340;case 2:return 680;case 3:return 1190;case 4:return 2100;case 5:return 2440;case 6:return 2540;case 7:return 3570;default:return 0}case 27:switch(c){case 1:return 350;case 2:return 780;case 3:return 1130;case 4:return 1560;case 5:return 1910;default:return 0}case 28:return 0<=c&&8>=c?360*c:0;case 29:case 32:switch(c){case 1:return 440;case 2:return 820;case 3:return 1360;case 4:return 2650;case 5:return 2680;
case 6:return 2790;case 7:return 2900;case 8:return 3500;case 9:return 3930;default:return 0}case 33:switch(c){case 1:return 720;case 2:return 1160;case 3:return 1840;case 4:return 2540;case 5:return 2900;case 6:return 3250;case 7:return 3310;default:return 20}case 34:switch(c){case 1:return 680;case 2:return 1030;default:return 0}case 37:switch(c){case 1:return 610;case 2:return 1050;case 3:return 1420;case 4:return 1860;case 5:return 2230;case 6:return 2670;case 7:return 3190;case 8:return 3710;
case 9:return 4390;case 10:return 4750;case 11:return 5270;case 12:return 5870;case 13:return 6680;default:return 0}case 44:switch(c){case 1:return 340;case 2:return 690;case 3:return 1060;case 4:return 1420;case 5:return 1880;case 6:return 2810;case 7:return 3830;case 8:return 4760;case 9:return 5860;default:return 0}case 45:switch(c){case 1:return 1030;case 2:return 3610;case 3:return 4100;case 4:return 4610;case 5:return 5190;case 6:return 6010;case 7:return 6600;case 8:return 7100;case 9:return 7610;
default:return 0}case 52:switch(c){case 1:return 520;case 2:return 1040;case 3:return 1560;case 4:return 2170;case 5:return 3240;case 6:return 4E3;case 7:return 4560;case 8:return 5560;case 9:return 5980;default:return 0}case 80:switch(c){case 1:return 80;case 2:return 300;case 3:return 301;case 4:return 302;case 5:return 320;case 6:return 321;case 7:return 322;case 8:return 321;default:return 0}case 90:switch(c){case 1:return 168;case 2:return 184;case 3:return 200;case 4:return 1770;case 5:return 1780;
case 6:return 1790;default:return 0}default:return 360*c}};e.GetMagicJob=function(c){return 0==c?"\u6218\u58eb\u79d8\u7c4d":1==c?"\u6cd5\u5e08\u79d8\u7c4d":2==c?"\u9053\u58eb\u79d8\u7c4d":3==c?"\u523a\u5ba2\u79d8\u7c4d":98==c?"\u5408\u51fb\u79d8\u7c4d":"\u901a\u7528\u79d8\u7c4d"};var n=!0;e.GetDuraStr=function(c,h,m){1==g_ItemInfoFromShop&&(c=h);return n?Math.round(c/m)+"/"+Math.round(h/m):Math.round(c/m)};e.ShowItemValue=function(c,h){return c};e.GetColor=function(c){return 0<c?"#00ff00":"#ffffff"};
e.GetColorString=function(c){return 0==c?"":"(+"+c+")"};e.GetTakeOnPosition=function(c,h,m,g){c||(c=-1);m||(m=-1);g||(g=-1);h=-1;5==c||6==c||95==c?h=U_WEAPON:10==c||11==c?h=U_DRESS:15==c?h=U_HELMET:19==c||20==c||21==c?h=U_NECKLACE:22==c?h=U_RINGL:23==c?h=U_RINGL:24==c||26==c?h=U_ARMRINGR:30==c||29==c?h=U_RIGHTHAND:70<=c&&74>=c?h=U_ICON:25==c||51==c||96==c?h=U_BUJUK:52==c||62==c||28==c?h=U_BOOTS:7==c||53==c||63==c?h=U_CHARM:54==c||27==c||64==c?h=U_BELT:16==c?h=U_HAT:48==c?h=U_SHIELD:65==c?h=U_DRUM:
66==c||67==c?h=U_FASHIONDRESS:68==c||69==c?h=U_FASHIONWEAPON:178==c?h=U_FASHIONHELMET:75<=c&&77>=c?h=U_FASHIONNECKLACE:79==c||80==c?h=U_FASHIONARMRINGR:81==c||82==c?h=U_FASHIONRINGL:83==c?h=U_FASHIONRIGHTHAND:84==c||85==c?h=U_FASHIONBELT:86==c||87==c?h=U_FASHIONBOOTS:88==c||89==c?h=U_FASHIONCHARM:78==c&&(h=U_HORSE);if(h==U_RINGL||h==U_ARMRINGR||h==U_HELMET||h==U_NECKLACE)switch(g){case 4:case 6:case 7:h=U_ANYPOS;case 2:switch(m){case 1:case 2:case 3:case 4:case 5:case 6:h=U_JEWELRY1+m-1;break;case 0:case 7:h=
U_JEWELRYRandom}}return h};e.GetGemInfo=function(c,h){var m="";if(1==h){h=c.StdMode;var g=c.Shape;var l=c.AniCount;c=c.MaxMAC}else h=c.s.StdMode,g=c.s.Shape,l=c.s.AniCount,c=c.s.MaxMAC;if(46==h&&3==g)switch(l){case 1:m="\u9632\u5fa1:+"+c;break;case 2:m="\u9b54\u5fa1:+"+c;break;case 3:m="\u653b\u51fb\u529b:+"+c;break;case 4:m="\u9b54\u6cd5\u529b:+"+c;break;case 5:m="\u9053\u672f\u529b:+"+c;break;case 6:m="\u751f\u547d\u503c:+"+c;break;case 7:m="\u9b54\u6cd5\u503c:+"+c;break;case 8:m="\u51c6\u786e:+"+
c;break;case 9:m="\u654f\u6377:+"+c;break;case 10:m="\u5e78\u8fd0:+"+c;break;case 11:1<=c&&10>=c?m="\u653b\u51fb\u901f\u5ea6:+"+c+"0%":10<c&&(m="\u653b\u51fb\u901f\u5ea6:+100%");break;case 12:1<=c&&10>=c?m="\u9b54\u6cd5\u8eb2\u907f:+"+c+"0%":10<c&&(m="\u9b54\u6cd5\u8eb2\u907f:+100%");break;case 13:1<=c&&10>=c?m="\u6bd2\u7269\u8eb2\u907f:+"+c+"0%":10<c&&(m="\u6bd2\u7269\u8eb2\u907f:+100%");break;case 14:1<=c&&10>=c?m="\u4e2d\u6bd2\u6062\u590d:+"+c+"0%":10<c&&(m="\u4e2d\u6bd2\u6062\u590d:+100%");break;
case 15:1<=c&&10>=c?m="\u4f53\u529b\u6062\u590d:+"+c+"0%":10<c&&(m="\u4f53\u529b\u6062\u590d:+100%");break;case 16:1<=c&&10>=c?m="\u9b54\u6cd5\u6062\u590d:+"+c+"0%":10<c&&(m="\u9b54\u6cd5\u6062\u590d:+100%");break;case 17:m="\u8d1f\u91cd(\u7a7f\u6234):+"+c;break;case 18:m="\u8d1f\u91cd(\u80cc\u5305):+"+c;break;case 19:m="\u9632\u5fa1\u4e0b\u9650:+"+c;break;case 20:m="\u9b54\u5fa1\u4e0b\u9650:+"+c;break;case 21:m="\u653b\u51fb\u529b\u4e0b\u9650:+"+c;break;case 22:m="\u9b54\u6cd5\u529b\u4e0b\u9650:+"+
c;break;case 23:m="\u9053\u672f\u529b\u4e0b\u9650:+"+c;break;case 24:m="\u8bc5\u5492:+"+c}return m};e.GetGemInfoEX=function(c,h){var m="";if(1==h){h=c.StdMode;var g=c.Shape;var l=c.AC;_MaxAC=c.MaxAC}else h=c.s.StdMode,g=c.s.Shape,l=c.s.AC,_MaxAC=c.s.MaxAC;if(46==h&&3==g)switch(l){case 1:m="\u66b4\u51fb\u51e0\u7387:+"+_MaxAC+"%";break;case 2:m="\u653b\u51fb\u4f24\u5bb3:+"+_MaxAC+"%";break;case 3:m="\u7269\u4f24\u51cf\u5c11:+"+_MaxAC+"%";break;case 4:m="\u9b54\u4f24\u51cf\u5c11:+"+_MaxAC+"%";break;
case 5:m="\u5ffd\u89c6\u9632\u5fa1:+"+_MaxAC+"%";break;case 6:m="\u4f24\u5bb3\u53cd\u5f39:+"+_MaxAC+"%";break;case 7:m="\u4eba\u7269\u66b4\u7387:+"+_MaxAC+"%";break;case 8:m="\u4f53\u529b\u589e\u52a0:+"+_MaxAC;break;case 9:m="\u9b54\u529b\u589e\u52a0:+"+_MaxAC;break;case 10:m="\u6012\u6c14\u6062\u590d:+"+_MaxAC+"%";break;case 11:m="\u5408\u51fb\u4f24\u5bb3:+"+_MaxAC+"%";break;case 12:m="\u9632\u6b62\u9ebb\u75f9";break;case 13:m="\u9632\u6b62\u62a4\u8eab";break;case 14:m="\u9632\u6b62\u590d\u6d3b";
break;case 15:m="\u9ebb\u75f9";break;case 16:m="\u590d\u6d3b";break;case 17:m="\u62a4\u8eab";break;case 18:m="\u8d1f\u91cd";break;case 19:m="\u8679\u9b54\u5438\u8840";break;case 20:m="\u6280\u5de7";break;case 21:m="\u63a2\u6d4b";break;case 22:m="\u9b54\u8840";break;case 23:m="\u4f53\u529b\u589e\u52a0:+"+_MaxAC+"%";break;case 24:m="\u9b54\u529b\u589e\u52a0:+"+_MaxAC+"%"}return m};e.GetLegTZInfo=function(c,h,m){this.GetTakeOnPosition(c.s.StdMode,c.s.Shape);var g=[];if(GomSuitOpen){if(!(1>Gomsuitlist.length)){for(var l=
0;l<Gomsuitlist.length;l++){var p=Gomsuitlist[l];if(!p.suitname||-1!=(p.suititem+"|").indexOf(c.s.Name+"|")){if(p.suitname&&null!=p.suitnum){if(-1!=p.suitname.indexOf("/"))var q=p.suitname.split("/"),r=q[0]?q[0]:250,u=q[1];else r=250,u=p.suitname;var v=p.suitnum,w=GameApi.GomUseItemCnt(p.suititem,m);h.push(u+"("+w+"/"+v+")/*/"+Get2RGB(r))}if(p.suititem){v=p.suititem.split("|");w="";r=null;null==lookHumData?r=g_UserItemList:m?r=lookHumData.UseItems:r=g_UserItemList;for(q=0;q<r.length;++q)null!=r[q]&&
(w+="|"+r[q].s.Name+"|");for(q=0;q<v.length;q++)if(r=57,v[q]){if(-1!=v[q].indexOf("/")){u=v[q].split("/");var z=u[1]}else z=v[q];var A="|"+z+"|";-1!=w.indexOf(A)&&(r=150,-1!=v[q].indexOf("/")&&(u=v[q].split("/"))&&null!=u[0]&&(r=u[0]),w=w.replace(A,""));h.push(z+"/*/"+Get2RGB(r))}}p.suitdesc&&(p.suitdesc.split("\\"),h.push({name:"desc",str:p.suitdesc}))}}if(0!=g.length)for(q=0;q<g.length;q++){p=[];l=g[q].split("~@");for(w=0;w<l.length;w++)if(-1!=l[w].indexOf("\u5957\u88c5\u540d"))var C=l[w];else if(-1!=
l[w].indexOf(c.s.DBName))var B=l[w];else if(-1!=l[w].indexOf("\u5907\u6ce8"))var D=l[w];l=C.split("~&");u=l[0].split("~#")[1];r=l[1].split("~#")[1];v=l[2].split("~#")[1];w=GameApi.GetUseItemCnt(B,m,!0);h.push(u+"("+w+"/"+v+")/*/"+Get2RGB(r));GameApi.GetUseItemLJ(c.s.Name,c.tag,v,B,h,m,!0);l=D.split("~&");for(v=0;v<l.length-1;v++)w=l[v].split("~#")[1],p.push(w);for(v=1;v<p.length;v+=2)l=p[v],w=Get2RGB(p[v-1]),h.push(l+"/*/"+w)}}}else if(!(1>Allsuitlist.length)){for(l=0;l<Allsuitlist.length;++l)if(p=
Allsuitlist[l],C=p.split("~@"),-1!=p.indexOf(c.s.DBName)){for(w=0;w<C.length;w++)if(v=C[w],-1!=v.indexOf(c.s.DBName)){r=v;break}C=r.split("~&");for(B=0;B<C.length;B++)if(C[B].split("~#")[1]==c.s.DBName){g.push(p);break}}if(0!=g.length)for(C=0;C<g.length;C++){l=g[C];B=l.split("~@");for(w=0;w<B.length;w++)if(v=B[w],-1!=v.indexOf(c.s.DBName)){q=v;break}D=q.split("~&");v=D.length-1;w=GameApi.GetUseItemCnt(D,m,!1);h.push("\u5957\u88c5\u6fc0\u6d3b\u6761\u4ef6: "+w+" / "+v+"/*/"+clWhite);GameApi.GetUseItemLJ(c.s.Name,
c.tag,v,D,h,m,!1);h.push("\u6fc0\u6d3b\u6548\u679c:/*/"+clWhite);D="";p=clGray;w>=v&&(p=Get2RGB(254));for(v=0;v<Suitelementlist.length;v++)-1!=l.indexOf(Suitelementlist[v])&&(D=e.Suitvalue(Suitelementlist[v],B,D,p,h,v));""!=D&&h.push(D+"/*/"+p)}}};e.WineInfos=function(c,h){var m=[];if(null==c)return m;0!=h?(m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff"),m.push("\u5bb9\u91cf: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#00ff00"),m.push("\u54c1\u8d28: "+c.s.Rource+"/*/#ffffff"),m.push("\u9152\u7cbe\u5ea6: "+
c.s.Reserved+"\u00b0/*/#00ff00")):m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");switch(h){case 1:m.push("\u767d\u9152\uff0c\u9152\u4f53\u9187\u539a\uff0c\u53e3\u611f\u7ef5\u957f\uff0c\u591a\u4e3a\u8c6a\u4fa0\u6240\u559c/*/#ffffff");break;case 2:m.push("\u767d\u9152\uff0c\u7565\u5e26\u7518\u751c\uff0c\u5e26\u6709\u6d53\u539a\u7684\u4e61\u571f\u6c14\u606f/*/#ffffff");break;case 3:m.push("\u767d\u9152\uff0c\u5e26\u6709\u9ad8\u539f\u7684\u72ec\u7279\u98ce\u60c5\uff0c\u53e3\u611f\u9187\u548c/*/#ffffff");
break;case 4:m.push("\u767d\u9152\uff0c\u4ee5\u679c\u5473\u5165\u9152\uff0c\u4e0d\u7ecf\u610f\u95f4\u50ac\u4eba\u5165\u9189\u4e61/*/#ffffff");break;case 5:m.push("\u9ec4\u9152\uff0c\u9152\u6027\u67d4\u548c\uff0c\u6a59\u9ec4\u6e05\u4eae\uff0c\u6709\u6696\u80c3\u4e4b\u529f\u6548/*/#ffffff");break;case 6:m.push("\u9ec4\u9152\uff0c\u7ea2\u66f2\u4f5c\u5f15\uff0c\u5165\u53e3\u7518\u751c\u5374\u65e0\u7c98\u7a20\u4e4b\u611f/*/#ffffff");break;case 7:m.push("\u9ec4\u9152\uff0c\u9152\u8272\u7ea2\u8910\uff0c\u76c8\u76c5\u4e0d\u6ea2\uff0c\u591a\u6d41\u4f20\u4e8e\u6c11\u95f4/*/#ffffff");
break;case 8:m.push("\u6709\u5f3a\u7b4b\u5065\u9aa8\u4e4b\u7528\uff0c\u9700\u9152\u91cf"+c.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 9:m.push("\u6b64\u9152\u53ef\u517b\u5fc3\u548c\u8840\uff0c\u9700\u9152\u91cf"+c.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 10:m.push("\u53ef\u4f7f\u4eba\u8eab\u624b\u66f4\u4e3a\u7075\u6d3b\uff0c\u9700\u9152\u91cf"+c.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 11:m.push("\u53ef\u575a\u7b4b\u9aa8\uff0c\u8010\u5bd2\u6691\uff0c\u9700\u9152\u91cf"+
c.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 12:m.push("\u53ef\u76ca\u6c14\u8865\u80be\uff0c\u9700\u9152\u91cf"+c.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff")}return m};e.CountItemInfos=function(c,h){var m=[];m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");if(4>h||5==h)6==h||99==h?(m.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(c.Dura,c.DuraMax,1)+" \u6b21/*/#0040ff"),1==c.s.btValue[0]?(m.push("\u8bb0\u5f55\u5730\u56fe: "+c.s.DBName+"/*/"+clYellow),m.push("\u8bb0\u5f55X\u5750\u6807: "+
c.s.AC+"/*/"+clYellow),m.push("\u8bb0\u5f55y\u5750\u6807: "+c.s.MAC+"/*/"+clYellow)):m.push("\u672a\u8bb0\u5f55\u5730\u56fe\u5750\u6807/*/#ffffff")):m.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(c.Dura,c.DuraMax,100)+" \u6b21/*/#0040ff");return m};e.SkillBookInfo1=function(c,h){var m=[];m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");0==h?m.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+" \u6b21/*/#ffffff"):1==h?m.push("HP: "+this.GetDuraStr(c.Dura,c.DuraMax,1)+" \u6b21/*/#ffffff"):
2==h?m.push("MP: "+this.GetDuraStr(c.Dura,c.DuraMax,1)+" \u6b21/*/#ffffff"):3==h&&m.push("HPMP: "+this.GetDuraStr(c.Dura,c.DuraMax,1)+" \u6b21/*/#ffffff");h=ObjectManage.findobject(playerID);0==c.s.Need&&h.m_Abil.Level>=c.s.NeedLevel&&m.push("\u6240\u9700\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");return m};e.SkillBookInfo2=function(c,h){var m=[],g="#ff0000",l=ObjectManage.findobject(playerID);m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");if(!(l==l&&0<c.s.Name.indexOf("\u82f1\u96c4")||l==l&&0==
c.s.Name.indexOf("\u82f1\u96c4"))){switch(h){case 0:0==l.skin_feature.btJob&&l.m_Abil.Level>=c.s.DuraMax&&(g="#00ff00");break;case 1:1==l.skin_feature.btJob&&l.m_Abil.Level>=c.s.DuraMax&&(g="#00ff00");break;case 2:2==l.skin_feature.btJob&&l.m_Abil.Level>=c.s.DuraMax&&(g="#00ff00");break;case 3:3==l.skin_feature.btJob&&l.m_Abil.Level>=c.s.DuraMax&&(g="#00ff00");break;default:l.m_Abil.Level>=c.s.DuraMax&&(g="#00ff00")}m.push("\u6240\u9700\u804c\u4e1a: "+this.GetMagicJob(c.s.Shape)+"/*/"+g);m.push("\u6240\u9700\u7b49\u7ea7: "+
c.s.DuraMax+"/*/"+g)}return m};e.WeaponInfos=function(c){var h=[];h.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");3>c.Dura/1E3?h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ff0000"):h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ffffff");if(0!=c.s.MaxDC||0!=c.s.DC){var m="\u653b\u51fb: "+c.s.DC+"-"+c.s.MaxDC;m=this.ShowItemValue(m,c.s.btValue[0]);h.push(m+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0]))}if(0!=c.s.MaxMC||0!=c.s.MC)m=
"\u9b54\u6cd5: "+c.s.MC+"-"+c.s.MaxMC,m=this.ShowItemValue(m,c.s.btValue[1]),h.push(m+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1]));if(0!=c.s.MaxSC||0!=c.s.SC)m="\u9053\u672f: "+c.s.SC+"-"+c.s.MaxSC,m=this.ShowItemValue(m,c.s.btValue[2]),h.push(m+this.GetColorString(c.s.btValue[2])+"/*/"+this.GetColor(c.s.btValue[2]));-1>=c.s.Source&&-50<=c.s.Source&&(m="\u795e\u5723: +"+-c.s.Source,m=this.ShowItemValue(m,c.s.btValue[7]),h.push(m+this.GetColorString(c.s.btValue[7])+"/*/"+
this.GetColor(c.s.btValue[7])));-51>=c.s.Source&&-100<=c.s.Source&&(m="\u795e\u5723: -"+(-c.s.Source-50),h.push(m+this.GetColorString(c.s.btValue[7])+"/*/"+this.GetColor(c.s.btValue[7])));if(48==c.s.StdMode){if(0!=c.s.MaxAC||0!=c.s.AC)m="\u9632\u5fa1: "+c.s.AC+"-"+c.s.MaxAC,m=this.ShowItemValue(m,c.s.btValue[3]),h.push(m+this.GetColorString(c.s.btValue[3])+"/*/"+this.GetColor(c.s.btValue[3]));if(0!=c.s.MaxMAC||0!=c.s.MAC)m="\u9b54\u9632: "+c.s.MAC+"-"+c.s.MaxMAC,m=this.ShowItemValue(m,c.s.btValue[4]),
h.push(m+this.GetColorString(c.s.btValue[4])+"/*/"+this.GetColor(c.s.btValue[4]))}else 0<c.s.MaxAC&&(m="\u51c6\u786e: +"+c.s.MaxAC,this.ShowItemValue(m,c.s.btValue[5]),h.push(m+this.GetColorString(c.s.btValue[5])+"/*/"+this.GetColor(c.s.btValue[5]))),0<c.s.MaxMAC&&(m=10<c.s.MaxMAC?"\u653b\u51fb\u901f\u5ea6: +"+(c.s.MaxMAC-10):0<c.s.MaxMAC&&10>=c.s.MaxMAC?"\u653b\u51fb\u901f\u5ea6: -"+c.s.MaxMAC:"\u653b\u51fb\u901f\u5ea6: "+c.s.MaxMAC,h.push(m+this.GetColorString(c.s.btValue[6])+"/*/"+this.GetColor(c.s.btValue[6]))),
0<c.s.AC&&(m="\u5e78\u8fd0: +"+c.s.AC,this.ShowItemValue(m,c.s.btValue[3]),h.push(m+this.GetColorString(c.s.btValue[3])+"/*/"+this.GetColor(c.s.btValue[3]))),0<c.s.MAC&&(m="\u8bc5\u5492: +"+c.s.MAC,h.push(m+"/*/"+this.GetColor(c.s.btValue[4])));0<c.s.HP&&h.push("\u4f53\u529b\u503c: +"+c.s.HP+"/*/#00ff00");0<c.s.MP&&h.push("\u9b54\u6cd5\u503c: +"+c.s.MP+"/*/#00ff00");m=ObjectManage.findobject(playerID);var g="#ff0000",l="";switch(c.s.Need){case 0:case 18:case 22:m.m_Abil.Level>=c.s.NeedLevel&&(g="#00ff00");
h.push("\u6240\u9700\u7b49\u7ea7: "+c.s.NeedLevel+"/*/"+g);break;case 10:case 11:case 12:case 13:var p=m.skin_feature.btJob,q=CodeUtil._LOWORD(c.s.NeedLevel);p==q&&(g="#00ff00");p="\u672a\u77e5";switch(q){case 0:p="\u6218\u58eb";break;case 1:p="\u6cd5\u5e08";break;case 2:p="\u9053\u58eb"}h.push("\u6240\u9700\u804c\u4e1a: "+p+"/*/"+g);10==c.s.Need&&(l="\u6240\u9700\u7b49\u7ea7: ",m.m_Abil.Level>=CodeUtil._HIWORD(c.s.NeedLevel)&&(g="#00ff00"));11==c.s.Need&&(l="\u9700\u8981\u653b\u51fb: ",m.m_Abil.MaxDc>=
CodeUtil._HIWORD(c.s.NeedLevel)&&(g="#00ff00"));12==c.s.Need&&(l="\u9b54\u6cd5\u6240\u9700: ",m.m_Abil.MaxMC>=CodeUtil._HIWORD(c.s.NeedLevel)&&(g="#00ff00"));13==c.s.Need&&(l="\u9053\u672f\u6240\u9700: ",m.m_Abil.MAXSC>=CodeUtil._HIWORD(c.s.NeedLevel)&&(g="#00ff00"));h.push(l+CodeUtil._HIWORD(c.s.NeedLevel)+"/*/"+g);break;case 1:case 19:case 23:m.m_Abil.MaxDC>=c.s.NeedLevel&&(g="#00ff00");h.push("\u9700\u8981\u653b\u51fb: "+c.s.NeedLevel+"/*/"+g);break;case 2:case 20:case 24:m.m_Abil.MaxMC>=c.s.NeedLevel&&
(g="#00ff00");h.push("\u9b54\u6cd5\u6240\u9700: "+c.s.NeedLevel+"/*/"+g);break;case 3:case 21:case 25:m.m_Abil.MAXSC>=c.s.NeedLevel&&(g="#00ff00");h.push("\u9053\u672f\u6240\u9700: "+c.s.NeedLevel+"/*/"+g);break;case 4:h.push("\u6240\u9700\u8f6c\u751f\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");break;case 40:h.push("\u6240\u9700\u8f6c\u751f&\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");break;case 41:h.push("\u6240\u9700\u8f6c\u751f&\u653b\u51fb: "+c.s.NeedLevel+"/*/#ffffff");break;case 42:h.push("\u6240\u9700\u8f6c\u751f&\u9b54\u6cd5: "+
c.s.NeedLevel+"/*/#ffffff");break;case 43:h.push("\u6240\u9700\u8f6c\u751f&\u9053\u672f: "+c.s.NeedLevel+"/*/#ffffff");break;case 44:h.push("\u6240\u9700\u8f6c\u751f&\u58f0\u671b: "+c.s.NeedLevel+"/*/#ffffff");break;case 5:h.push("\u6240\u9700\u58f0\u671b: "+c.s.NeedLevel+"/*/#ffffff");break;case 6:h.push("\u884c\u4f1a\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 7:h.push("\u6c99\u57ce\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 70:h.push("\u6c99\u57ce\u57ce\u4e3b\u4e13\u7528/*/#ffffff");break;
case 8:h.push("\u4f1a\u5458\u4e13\u7528/*/#ffffff");break;case 81:case 82:h.push("\u4f1a\u5458\u7c7b\u578b: "+CodeUtil._LOWORD(c.s.NeedLevel)+"/*/#ffffff"),h.push("\u4f1a\u5458\u7b49\u7ea7>="+CodeUtil._HIWORD(c.s.NeedLevel)+"/*/#ffffff")}return h};e.ClothesTypeInfo=function(c){var h=[],m=c.s.StdMode;if(10==m||11==m||65<=m&&67>=m){h.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");3>c.Dura/1E3?h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ff0000"):h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,
c.DuraMax,1E3)+"/*/#ffffff");0==c.s.MaxAC&&0==c.s.AC||h.push("\u9632\u5fa1: "+c.s.AC+"-"+c.s.MaxAC+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0]));0==c.s.MaxMAC&&0==c.s.MAC||h.push("\u9b54\u9632: "+c.s.MAC+"-"+c.s.MaxMAC+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1]));0==c.s.MaxDC&&0==c.s.DC||h.push("\u653b\u51fb: "+c.s.DC+"-"+c.s.MaxDC+this.GetColorString(c.s.btValue[2])+"/*/"+this.GetColor(c.s.btValue[2]));(0!=c.s.MaxMC||c.s.MC)&&h.push("\u9b54\u6cd5: "+
c.s.MC+"-"+c.s.MaxMC+this.GetColorString(c.s.btValue[3])+"/*/"+this.GetColor(c.s.btValue[3]));0==c.s.MaxSC&&0==c.s.SC||h.push("\u9053\u672f: "+c.s.SC+"-"+c.s.MaxSC+this.GetColorString(c.s.btValue[4])+"/*/"+this.GetColor(c.s.btValue[4]));0<c.s.HP&&h.push("\u4f53\u529b\u503c: +"+c.s.HP+"/*/#00ff00");0<c.s.MP&&h.push("\u9b54\u6cd5\u503c: +"+c.s.MP+"/*/#00ff00");m="#ff0000";var g=ObjectManage.findobject(playerID);switch(c.s.Need){case 0:case 18:case 22:g.m_Abil.Level>=c.s.NeedLevel&&(m="#00ff00");h.push("\u6240\u9700\u7b49\u7ea7: "+
c.s.NeedLevel+"/*/"+m);break;case 10:case 11:case 12:case 13:var l=g.skin_feature.btJob,p=CodeUtil._LOWORD(c.s.NeedLevel);l==p&&(m="#00ff00");l="\u672a\u77e5";switch(p){case 0:l="\u6218\u58eb";break;case 1:l="\u6cd5\u5e08";break;case 2:l="\u9053\u58eb"}h.push("\u6240\u9700\u804c\u4e1a: "+l+"/*/"+m);p="";switch(c.s.Need){case 10:p="\u6240\u9700\u7b49\u7ea7\uff1a";g.m_Abil.Level>=CodeUtil._HIWORD(c.s.NeedLevel)&&(m="#00ff00");break;case 11:p="\u9700\u8981\u653b\u51fb\uff1a";g.m_Abil.MaxDc>=CodeUtil._HIWORD(c.s.NeedLevel)&&
(m="#00ff00");break;case 12:p="\u9b54\u6cd5\u6240\u9700\uff1a";g.m_Abil.MaxMC>=CodeUtil._HIWORD(c.s.NeedLevel)&&(m="#00ff00");break;case 13:p="\u9053\u672f\u6240\u9700\uff1a",g.m_Abil.MAXSC>=CodeUtil._HIWORD(c.s.NeedLevel)&&(m="#00ff00")}h.push(p+CodeUtil._HIWORD(c.s.NeedLevel)+"/*/"+m);break;case 1:case 19:case 23:g.m_Abil.MaxDC>=c.s.NeedLevel&&(m="#00ff00");h.push("\u9700\u8981\u653b\u51fb: "+c.s.NeedLevel+"/*/"+m);break;case 2:case 20:case 24:g.m_Abil.MaxMC>=c.s.NeedLevel&&(m="#00ff00");h.push("\u6240\u9700\u9b54\u6cd5: "+
c.s.NeedLevel+"/*/"+m);break;case 3:case 21:case 25:g.m_Abil.MaxSc>=c.s.NeedLevel&&(m="#00ff00");h.push("\u6240\u9700\u9053\u672f: "+c.s.NeedLevel+"/*/"+m);break;case 4:h.push("\u6240\u9700\u8f6c\u751f\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");break;case 40:h.push("\u6240\u9700\u8f6c\u751f&\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");break;case 41:h.push("\u6240\u9700\u8f6c\u751f&\u653b\u51fb: "+c.s.NeedLevel+"/*/#ffffff");break;case 42:h.push("\u6240\u9700\u8f6c\u751f&\u9b54\u6cd5: "+c.s.NeedLevel+
"/*/#ffffff");break;case 43:h.push("\u6240\u9700\u8f6c\u751f&\u9053\u672f: "+c.s.NeedLevel+"/*/#ffffff");break;case 44:h.push("\u6240\u9700\u8f6c\u751f&\u58f0\u671b: "+c.s.NeedLevel+"/*/#ffffff");break;case 5:h.push("\u6240\u9700\u58f0\u671b: "+c.s.NeedLevel+"/*/#ffffff");break;case 6:h.push("\u884c\u4f1a\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 60:h.push("\u884c\u4f1a\u638c\u95e8\u4e13\u7528/*/#ffffff");break;case 7:h.push("\u6c99\u57ce\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 70:h.push("\u6c99\u57ce\u57ce\u4e3b\u4e13\u7528/*/#ffffff");
break;case 8:h.push("\u4f1a\u5458\u4e13\u7528/*/#ffffff");break;case 81:case 82:h.push("\u4f1a\u5458\u7c7b\u578b: "+CodeUtil._LOWORD(c.s.NeedLevel)+"/*/#ffffff"),h.push("\u4f1a\u5458\u7b49\u7ea7>="+CodeUtil._HIWORD(c.s.NeedLevel)+"/*/#ffffff")}}return h};e.EquipmentInfos=function(c){var h=[],m=c.s.StdMode;if(15==m||16==m||19<=m&&24>=m||26<=m&&30>=m||51<=m&&54>=m||62<=m&&64>=m||75<=m&&89>=m||178==m){var g=ObjectManage.findobject(playerID);m=!1;(15==c.s.StdMode||16==c.s.StdMode||22==c.s.StdMode||23==
c.s.StdMode||24==c.s.StdMode||26==c.s.StdMode)&&130<=c.s.Shape&&132>=c.s.Shape&&(m=!0);if(!m){h.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");53==c.s.StdMode?1==c.s.AniCount?h.push("HP: "+this.GetDuraHPStoneStr(c.Dura,c.DuraMax)+"/*/#ffffff"):2==c.s.AniCount?h.push("MP: "+this.GetDuraMPStoneStr(c.Dura,c.DuraMax)+"/*/#ffffff"):3==c.s.AniCount?h.push("HPMP: "+this.GetDuraHPStoneStr(c.Dura,c.DuraMax)+"/*/#ffffff"):3>c.Dura/1E3?h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ff0000"):
h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ffffff"):3>c.Dura/1E3?h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ff0000"):h.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ffffff");m=c.s.StdMode;switch(m){case 20:case 52:case 24:0!=c.s.MaxAC&&h.push("\u51c6\u786e: +"+c.s.MaxAC+"/*/"+this.GetColor(c.s.btValue[0]));0!=c.s.MaxMAC&&h.push("\u654f\u6377: +"+c.s.MaxMAC+"/*/"+this.GetColor(c.s.btValue[1]));break;case 19:0!=c.s.MaxAC?h.push("\u9b54\u6cd5\u8eb2\u907f: +"+
c.s.MaxAC+"0%"+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0])):0<c.s.MAC&&h.push("\u8bc5\u5492: +"+c.s.MAC);0<c.s.MaxMAC&&h.push("\u5e78\u8fd0: +"+c.s.MaxMAC+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1]));break;case 28:0!=c.s.AniCount&&h.push("\u8d1f\u91cd: "+CodeUtil._LOWORD(c.s.AniCount)+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0]));break;case 21:case 54:0<c.s.AC?h.push("\u653b\u51fb\u901f\u5ea6: +"+c.s.AC+"/*/#ffffff"):
c.s.MAC&&h.push("\u653b\u51fb\u901f\u5ea6: -"+c.s.MAC+"/*/#ffffff");0<c.s.MaxAC&&h.push("\u4f53\u529b\u6062\u590d: +"+c.s.MaxAC+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0]));0<c.s.MaxMAC&&h.push("\u9b54\u6cd5\u6062\u590d: +"+c.s.MaxMAC+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1]));break;case 23:0<c.s.AC&&h.push("\u653b\u51fb\u901f\u5ea6: +"+c.s.AC+"/*/#ffffff"),c.s.MAC&&h.push("\u653b\u51fb\u901f\u5ea6: -"+c.s.MAC+"/*/#ffffff"),0<c.s.MaxAC&&h.push("\u6bd2\u7269\u8eb2\u907f: +"+
c.s.MaxAC+"0% "+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0])),0<c.s.MaxMAC&&h.push("\u4e2d\u6bd2\u6062\u590d: +"+c.s.MaxMAC+"0% "+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1]))}52!=c.s.StdMode&&19!=c.s.StdMode&&20!=c.s.StdMode&&21!=c.s.StdMode&&23!=c.s.StdMode&&24!=c.s.StdMode&&54!=c.s.StdMode&&(0==c.s.MaxAC&&0==c.s.AC||h.push("\u9632\u5fa1: "+c.s.AC+"-"+c.s.MaxAC+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0])),0==c.s.MaxMAC&&
0==c.s.MAC||h.push("\u9b54\u9632: "+c.s.MAC+"-"+c.s.MaxMAC+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1])));0==c.s.MaxDC&&0==c.s.DC||h.push("\u653b\u51fb: "+c.s.DC+"-"+c.s.MaxDC+this.GetColorString(c.s.btValue[2])+"/*/"+this.GetColor(c.s.btValue[2]));0==c.s.MaxMC&&0==c.s.MC||h.push("\u9b54\u6cd5: "+c.s.MC+"-"+c.s.MaxMC+this.GetColorString(c.s.btValue[3])+"/*/"+this.GetColor(c.s.btValue[3]));0==c.s.MaxSC&&0==c.s.SC||h.push("\u9053\u672f: "+c.s.SC+"-"+c.s.MaxSC+this.GetColorString(c.s.btValue[4])+
"/*/"+this.GetColor(c.s.btValue[4]));0<c.s.HP&&h.push("\u4f53\u529b\u503c: "+c.s.HP+"/*/#00ff00");0<c.s.MP&&h.push("\u9b54\u6cd5\u503c: "+c.s.MP+"/*/#00ff00");m="#ff0000";switch(c.s.Need){case 0:case 18:case 22:g.m_Abil.Level>=c.s.NeedLevel&&(m="#00ff00");h.push("\u6240\u9700\u7b49\u7ea7: "+c.s.NeedLevel+"/*/"+m);break;case 10:case 11:case 12:case 13:var l=g.skin_feature.btJob,p=CodeUtil._LOWORD(c.s.NeedLevel);l==p&&(m="#00ff00");l="\u672a\u77e5";switch(p){case 0:l="\u6218\u58eb";break;case 1:l="\u6cd5\u5e08";
break;case 2:l="\u9053\u58eb"}h.push("\u6240\u9700\u804c\u4e1a: "+l+"/*/"+m);p="";10==c.s.Need&&(p="\u6240\u9700\u7b49\u7ea7: ",g.m_Abil.Level>=CodeUtil._HIWORD(c.s.NeedLevel)&&(m="#00ff00"));11==c.s.Need&&(p="\u9700\u8981\u653b\u51fb: ",g.m_Abil.MaxDc>=CodeUtil._HIWORD(c.s.NeedLevel)&&(m="#00ff00"));12==c.s.Need&&(p="\u9b54\u6cd5\u6240\u9700: ",g.m_Abil.MaxMC>=CodeUtil._HIWORD(c.s.NeedLevel)&&(m="#00ff00"));13==c.s.Need&&(p="\u9053\u672f\u6240\u9700: ",g.m_Abil.MAXSC>=CodeUtil._HIWORD(c.s.NeedLevel)&&
(m="#00ff00"));h.push(p+CodeUtil._HIWORD(c.s.NeedLevel)+"/*/"+m);break;case 1:case 19:case 23:g.m_Abil.MaxDC>=c.s.NeedLevel?h.push("\u653b\u51fb\u6240\u9700: "+c.s.NeedLevel+"/*/#00ff00"):h.push("\u653b\u51fb\u6240\u9700: "+c.s.NeedLevel+"/*/#ff0000");break;case 2:case 20:case 24:g.m_Abil.MaxDC>=c.s.NeedLevel?h.push("\u6240\u9700\u9b54\u6cd5: "+c.s.NeedLevel+"/*/#00ff00"):h.push("\u6240\u9700\u9b54\u6cd5: "+c.s.NeedLevel+"/*/#ff0000");break;case 3:case 21:case 25:g.m_Abil.MaxDC>=c.s.NeedLevel?h.push("\u6240\u9700\u9053\u672f: "+
c.s.NeedLevel+"/*/#00ff00"):h.push("\u6240\u9700\u9053\u672f: "+c.s.NeedLevel+"/*/#ff0000");break;case 4:h.push("\u6240\u9700\u8f6c\u751f\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");break;case 40:h.push("\u6240\u9700\u8f6c\u751f&\u7b49\u7ea7: "+c.s.NeedLevel+"/*/#ffffff");break;case 41:h.push("\u6240\u9700\u8f6c\u751f&\u653b\u51fb: "+c.s.NeedLevel+"/*/#ffffff");break;case 42:h.push("\u6240\u9700\u8f6c\u751f&\u9b54\u6cd5: "+c.s.NeedLevel+"/*/#ffffff");break;case 43:h.push("\u6240\u9700\u8f6c\u751f&\u9053\u672f: "+
c.s.NeedLevel+"/*/#ffffff");break;case 44:h.push("\u6240\u9700\u8f6c\u751f&\u58f0\u671b: "+c.s.NeedLevel+"/*/#ffffff");break;case 5:h.push("\u6240\u9700\u58f0\u671b: "+c.s.NeedLevel+"/*/#ffffff");break;case 6:h.push("\u884c\u4f1a\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 60:h.push("\u884c\u4f1a\u638c\u95e8\u4e13\u7528/*/#ffffff");break;case 7:h.push("\u6c99\u57ce\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 70:h.push("\u6c99\u57ce\u57ce\u4e3b\u4e13\u7528/*/#ffffff");break;case 8:h.push("\u4f1a\u5458\u4e13\u7528/*/#ffffff");
break;case 81:case 82:h.push("\u4f1a\u5458\u7c7b\u578b: "+CodeUtil._LOWORD(c.s.NeedLevel)+"/*/#ffffff"),h.push("\u4f1a\u5458\u7b49\u7ea7>="+CodeUtil._HIWORD(c.s.NeedLevel)+"/*/#ffffff")}}}return h};e.EquipmentSuitInfos=function(c){var h=c.s.StdMode,m=[];if(5==h||6==h||10==h||11==h||15==h||16==h||48==h||18<=h&&30>=h||51<=h&&54>=h||62<=h&&69>=h||70<=h&&89>=h||178==h)this.boShowBoundary&&m.push("-/*/#ffffff"),0<c.s.NewValue[0]&&m.push("\u66b4\u51fb\u51e0\u7387\u589e\u52a0: "+c.s.NewValue[0]+"%/*/"+clAqua),
0<c.s.NewValue[1]&&m.push("\u589e\u52a0\u653b\u51fb\u4f24\u5bb3: "+c.s.NewValue[1]+"%/*/"+clAqua),0<c.s.NewValue[2]&&m.push("\u7269\u7406\u4f24\u5bb3\u51cf\u5c11: "+c.s.NewValue[2]+"%/*/"+clAqua),0<c.s.NewValue[3]&&m.push("\u9b54\u6cd5\u4f24\u5bb3\u51cf\u5c11: "+c.s.NewValue[3]+"%/*/"+clAqua),0<c.s.NewValue[4]&&m.push("\u5ffd\u89c6\u76ee\u6807\u9632\u5fa1: "+c.s.NewValue[4]+"%/*/"+clAqua),0<c.s.NewValue[5]&&m.push("\u6240\u6709\u4f24\u5bb3\u53cd\u5f39: "+c.s.NewValue[5]+"%/*/"+clAqua),0<c.s.NewValue[6]&&
m.push("\u4eba\u7269\u4f53\u8d28\u589e\u52a0: "+c.s.NewValue[6]+"/*/"+clAqua),0<c.s.NewValue[7]&&m.push("\u88c5\u5907\u9644\u52a0\u7ecf\u9a8c: "+c.s.NewValue[7]+"%/*/"+clAqua),0<c.s.NewValue[8]&&m.push("\u6012\u6c14\u6062\u590d\u589e\u52a0: "+c.s.NewValue[8]+"%/*/"+clAqua),0<c.s.NewValue[9]&&m.push("\u5408\u51fb\u653b\u51fb\u589e\u52a0: "+c.s.NewValue[9]+"%/*/"+clAqua),0<c.s.NewValue[10]&&m.push("\u589e\u52a0\u76ee\u6807\u66b4\u7387: "+c.s.NewValue[10]+"%/*/"+clAqua),0<c.s.NewValue[11]&&(h=MagicMgr.getInstance().FindMagicFromStatic(c.s.NewValue[11]),
0<c.s.NewValue[12]&&null!=h&&m.push("\u589e\u52a0["+h+"]\u6280\u80fd\u5a01\u529b"+c.s.NewValue[12]+"%/*/"+clAqua)),0<c.s.NewValue[13]&&m.push("\u4eba\u7269\u9b54\u529b\u589e\u52a0: "+c.s.NewValue[13]+"/*/"+clAqua),0<c.s.NewValue[14]&&m.push("\u4eba\u7269\u4f53\u529b\u589e\u52a0: "+c.s.NewValue[14]+"%/*/"+clAqua),0<c.s.NewValue[15]&&m.push("\u4eba\u7269\u9b54\u529b\u589e\u52a0: "+c.s.NewValue[15]+"%/*/"+clAqua);return m};e.TitleInfos=function(c){var h=[];if(70<=c.s.StdMode&&74>=c.s.StdMode){if(0<c.DuraMax)if(3600<=
c.s.NeedLevel){var m=parseInt(c.s.NeedLevel/3600),g=parseInt(c.s.NeedLevel%3600/60);h.push("\u5269\u4f59\u65f6\u95f4: "+(m+" \u5c0f\u65f6 ")+(0<g?g+" \u5206":""))}else h.push("\u5269\u4f59\u65f6\u95f4: "+parseInt(c.s.NeedLevel/60)+" \u5206");else h.push("[\u6c38\u4e45\u79f0\u53f7]");73==c.s.StdMode&&(0==c.s.MaxAC&&0==c.s.AC||h.push("\u9632\u5fa1: "+c.s.AC+"-"+c.s.MaxAC+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0])),0==c.s.MaxMAC&&0==c.s.MAC||h.push("\u9b54\u9632: "+c.s.MAC+
"-"+c.s.MaxMAC+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1])));0==c.s.MaxDC&&0==c.s.DC||h.push("\u653b\u51fb: "+c.s.DC+"-"+c.s.MaxDC+this.GetColorString(c.s.btValue[2])+"/*/"+this.GetColor(c.s.btValue[2]));0==c.s.MaxMC&&0==c.s.MC||h.push("\u9b54\u6cd5: "+c.s.MC+"-"+c.s.MaxMC+this.GetColorString(c.s.btValue[3])+"/*/"+this.GetColor(c.s.btValue[3]));0==c.s.MaxSC&&0==c.s.SC||h.push("\u9053\u672f: "+c.s.SC+"-"+c.s.MaxSC+this.GetColorString(c.s.btValue[4])+"/*/"+this.GetColor(c.s.btValue[4]));
0<c.s.HP&&h.push("\u4f53\u529b\u503c: "+c.s.HP+"/*/#00ff00");0<c.s.MP&&h.push("\u9b54\u6cd5\u503c: "+c.s.MP+"/*/#00ff00");70==c.s.StdMode&&(0!=c.s.MaxAC&&h.push("\u9b54\u6cd5\u8eb2\u907f: +"+c.s.MaxAC+"0%"+this.GetColorString(c.s.btValue[0])+"/*/"+this.GetColor(c.s.btValue[0])),0<c.s.MAC&&h.push("\u8bc5\u5492: +"+c.s.MAC),0<c.s.MaxMAC&&h.push("\u5e78\u8fd0: +"+c.s.MaxMAC+this.GetColorString(c.s.btValue[1])+"/*/"+this.GetColor(c.s.btValue[1])));71==c.s.StdMode&&(0!=c.s.MaxAC&&h.push("\u51c6\u786e: +"+
c.s.MaxAC+"/*/"+this.GetColor(c.s.btValue[0])),0!=c.s.MaxMAC&&h.push("\u654f\u6377: +"+c.s.MaxMAC+"/*/"+this.GetColor(c.s.btValue[1])));72==c.s.StdMode&&(0!=c.s.AC&&h.push("\u653b\u51fb\u901f\u5ea6: +"+c.s.AC+"/*/"+this.GetColor(c.s.btValue[0])),0!=c.s.MAC&&h.push("\u653b\u51fb\u901f\u5ea6: -"+c.s.MAC+"/*/"+this.GetColor(c.s.btValue[1])),0!=c.s.MaxAC&&h.push("\u4f53\u529b\u6062\u590d: +"+c.s.MaxAC+"0%/*/"+this.GetColor(c.s.btValue[0])),0!=c.s.MaxMAC&&h.push("\u9b54\u6cd5\u6062\u590d: +"+c.s.MaxMAC+
"0%/*/"+this.GetColor(c.s.btValue[1])));74==c.s.StdMode&&(0!=c.s.AC&&h.push("\u653b\u51fb\u901f\u5ea6: +"+c.s.AC+"/*/"+this.GetColor(c.s.btValue[0])),0!=c.s.MaxAC&&h.push("\u6bd2\u7269\u8eb2\u907f: +"+c.s.MaxAC+"0%/*/"+this.GetColor(c.s.btValue[1])),0!=c.s.MaxMAC&&h.push("\u4e2d\u6bd2\u6062\u590d: +"+c.s.MaxMAC+"0%/*/"+this.GetColor(c.s.btValue[0])))}return h};e.PaperPoisonInfos=function(c){var h=[];25==c.s.StdMode&&(h.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff"),3==c.s.Shape?h.push("\u6570\u91cf: "+
c.Dura+"/"+c.DuraMax+"/*/#00ff00"):0==c.s.Shape||1==c.s.Shape||2==c.s.Shape||5==c.s.Shape?8==c.s.Source?h.push("\u6570\u91cf: "+this.GetDuraStr(c.Dura,100*c.s.MAC,100)+"/*/#00ff00"):h.push("\u6570\u91cf: "+this.GetDuraStr(c.Dura,c.DuraMax,g_ClientConfig.nMagicItemRate)+"/*/#00ff00"):8==c.s.Shape?h.push("\u5bb9\u91cf: "+parseInt(c.Dura/100)+"/"+parseInt(c.DuraMax)+"/*/#00ff00"):6==c.s.Shape?h.push("\u6b21\u6570: "+parseInt(c.Dura/100)+"/"+parseInt(c.DuraMax/100)+"/*/#00ff00"):9==c.s.Shape?h.push("\u5bb9\u91cf: "+
parseInt(c.Dura)+"/"+parseInt(c.DuraMax)+"/*/#ffffff"):10==c.s.Shape&&h.push("\u5bb9\u91cf: "+parseInt(c.Dura/100)+"/"+parseInt(c.DuraMax)+"/*/#ffffff"),0==c.s.Source&&(0!=c.s.MaxAC&&h.push("\u9632\u5fa1: "+c.s.AC+"-"+c.s.MaxAC+"/*/"+this.GetColor(c.s.btValue[0])),0!=c.s.MaxMAC&&h.push("\u9b54\u9632: "+c.s.MAC+"-"+c.s.MaxMAC+"/*/"+this.GetColor(c.s.btValue[1])),0!=c.s.MaxDC&&h.push("\u653b\u51fb: "+c.s.DC+"-"+c.s.MaxDC+"/*/"+this.GetColor(c.s.btValue[1])),0!=c.s.MaxMC&&h.push("\u9b54\u6cd5: "+c.s.MC+
"-"+c.s.MaxMC+"/*/"+this.GetColor(c.s.btValue[1])),0!=c.s.MaxSC&&h.push("\u9053\u672f: "+c.s.SC+"-"+c.s.MaxSC+"/*/"+this.GetColor(c.s.btValue[1]))));return h};e.StrengthenEquip=function(c){var h=[];if(55<=c.s.StdMode&&59>=c.s.StdMode){h.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");59!=c.s.StdMode&&(58==c.s.StdMode&&h.push("\u968f\u673a\u589e\u52a0: "+c.s.Source+"\u5c5e\u6027\u70b9/*/#00ff00"),0<c.s.AniCount&&h.push("+"+c.s.AniCount+"\u4ee5\u4e0b\u88c5\u5907/*/#00ff00"));h.push("\u6210\u529f\u673a\u7387"+
c.s.DuraMax+"%/*/#ff0000");if(55==c.s.StdMode||57==c.s.StdMode){if(57!=c.s.StdMode||2!=c.s.Shape)0<c.s.MaxAC&&h.push("\u9632\u5fa1+"+c.s.MaxAC+"/*/#ffffff"),c.s.MaxMAC&&h.push("\u9b54\u5fa1+"+c.s.MaxMAC+"/*/#ffffff");if(57!=c.s.StdMode||1!=c.s.Shape)0<c.s.MaxDC&&h.push("\u653b\u51fb+"+c.s.MaxDC+"/*/#ffffff"),0<c.s.MaxMC&&h.push("\u9b54\u6cd5+"+c.s.MaxMC+"/*/#ffffff"),0<c.s.MaxSC&&h.push("\u9053\u672f+"+c.s.MaxSC+"/*/#ffffff")}56==c.s.StdMode&&1<=c.s.NeedLevel&&100>=c.s.NeedLevel&&h.push("\u5931\u8d25\u540e\u51cf\u53bb\u76f8\u5173\u5c5e\u6027:\u51e0\u7387"+
c.s.NeedLevel+"%/*/#ffffff");if(58==c.s.StdMode){if(1<=c.s.Need&&100>=c.s.Need){var m="\u6e05\u96f6";var g=c.s.Need}else 101<=c.s.Need&&200>=c.s.Need?(m="\u6d88\u5931",g=c.s.Need-100):(m="\u4e0d\u53d8",g=100);0<g?h.push("\u5931\u8d25\u540e\u5c5e\u6027["+m+"']:\u51e0\u7387"+g+"%/*/#ffffff"):(g=-1,1<=c.s.Need&&100>=c.s.Need?(m="\u6e05\u96f6",g=c.s.Need):101<=c.s.Need&&200>=c.s.Need?(m="\u6d88\u5931",g=c.s.Need-100):201<=c.s.Need&&300>=c.s.Need&&(m="\u4e0d\u53d8",g=c.s.Need-200),0<g&&h.push("\u5931\u8d25\u540e\u5c5e\u6027["+
m+"']:\u51e0\u7387"+g+"%/*/#ffffff"))}h.push("\u7528\u4e8e["+this.GetUpgradeItemName(c.s.Shape)+"]/*/#ffffff")}return h};e.SetGemstones=function(c){var h=[];switch(c.s.StdMode){case 66:case 67:case 68:case 69:case 75:case 76:case 77:case 178:case 79:case 80:case 81:case 82:case 83:case 84:case 86:case 88:case 5:case 6:case 10:case 11:case 15:case 16:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 51:case 52:case 53:case 54:case 62:case 64:case 30:case 48:case 201:if(0<
c.nFlutCount){this.boShowBoundary&&h.push("-/*/#ffffff");for(var m=0,g=0;g<c.nFlutCount&&!(8<c.nFlutCount);g++)if(""!=c.GemItem[g].Name&&c.nGemCount>m){var l=this.GetGemInfo(c.GemItem[g],!0);l=""!=l?l+" "+this.GetGemInfoEX(c.GemItem[g],!0):this.GetGemInfoEX(c.GemItem[g],!0);h.push(c.GemItem[g].Name+":"+l+"/*/"+Get2RGB(c.GemItem[g].w26));m++}else h.push("\u672a\u9576\u5d4c\u5b9d\u77f3/*/"+clGray)}}return h};e.ItemDescs=function(c){var h=[];if(g_ItemDesc)for(var m,g,l=0;l<g_ItemDesc.length;l++)m=g_ItemDesc[l].indexOf("="),
g=g_ItemDesc[l].indexOf("\uff1d"),g=-1<m?m:g,m=g_ItemDesc[l].substring(0,g).trim(),g=g_ItemDesc[l].substring(g+1),m&&m==c.s.DBName&&g&&h.push({name:"desc",str:g});return h};e.GetItemInfo=function(c,h){var m=[];if(c){var g=c.s.StdMode;var l=c.s.Shape;0<c.s.btValue[10]&&-1==c.s.Name.indexOf("(*)")&&(c.s.Name="(*)"+c.s.Name);if(""!=c.s.Name){var p=c.s.Name;p=this.trimSpecialUnicode(p);c.s.IsBind&&(p+=" \u5df2\u7ed1\u5b9a");m.push(p+"/*/"+Get2RGB(c.s.Color));if((15==g||19<=g&&26>=g)&&130<=l&&132>=l)m.push("????/*/#ffffff");
else if(0<=this.GetTakeOnPosition(g,l)&&0<c.s.btUpgradeCount){var q=parseInt(c.s.btUpgradeCount/10),r=c.s.btUpgradeCount%10;p="";for(var u=0;u<q;u++)p+="\u2605";for(q=0;q<r;q++)p+="\u25cf";for(r=0;r<p.length;r+=10)m.push(p.substr(r,10))}}switch(g){case 0:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");0<c.s.AC&&m.push("HP: +"+c.s.AC+"/*/#00ff00");0<c.s.MAC&&m.push("MP: "+c.s.MAC+"/*/#00ff00");break;case 1:(0!=l&&3>l||4<l&&8>l)&&m.push("\u6301\u7eed\u4f7f\u7528: "+this.GetDuraStr(c.Dura,c.DuraMax,
1E3)+" \u5c0f\u65f6/*/#ffffff");(2<c.s.Shape&&5>c.s.Shape||7<c.s.Shape&&11>c.s.Shape)&&m.push("\u7d2f\u79ef\u4f7f\u7528: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+" \u5c0f\u65f6/*/#ffffff");m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");break;case 2:g=this.CountItemInfos(c,l);m=m.concat(g);break;case 3:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");break;case 7:g=this.SkillBookInfo1(c,l),m=m.concat(g);case 9:case 41:case 12:case 13:case 14:case 44:case 211:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");
break;case 8:m.push("\u54c1\u8d28: "+c.s.AC+"/*/#ffffff");break;case 60:g=this.WineInfos(c,l);0!=g.length&&(m=m.concat(g));break;case 4:g=this.SkillBookInfo2(c,l);0!=g.length&&(m=m.concat(g));break;case 5:case 6:case 48:case 68:case 69:g=this.WeaponInfos(c);0!=g.length&&(m=m.concat(g));break;case 25:g=this.TitleInfos(c);0!=g.length&&(m=m.concat(g));break;case 95:(0<c.s.AC||c.s.MaxAC)&&m.push("\u9493\u529b: "+c.s.AC+"-"+c.s.MaxAC+"/*/#ffffff");3>c.Dura/1E3?m.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,
c.DuraMax,1E3)+"/*/#ff0000"):m.push("\u6301\u4e45: "+this.GetDuraStr(c.Dura,c.DuraMax,1E3)+"/*/#ffffff");m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");break;case 96:(0<c.s.AC||0<c.s.MaxAC)&&m.push("\u4e0a\u94a9\u51e0\u7387\u589e\u52a0: "+c.s.AC+"-"+c.s.MaxAC+"/*/#ffffff");m.push("\u6570\u91cf: "+c.Dura+"-"+c.DuraMax+"/*/#ffffff");m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");break;case 40:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");0==c.s.Shape&&m.push("\u54c1\u8d28: "+this.GetDuraStr(c.Dura,
c.DuraMax,1E3)+"/*/#ffffff");break;case 42:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");break;case 43:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");m.push("\u7eaf\u5ea6: "+Math.round(c.Dura/1E3)+"/*/#ffffff");break;case 49:g=0==c.s.AniCount?g_GameGoldNum.key:g_GameCionNum.key;l=c.s.Need;m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");c.Dura>=c.DuraMax&&4!=g_OpenIdx?(m.push("\u7ecf\u9a8c\u503c\u5bb9\u91cf("+c.DuraMax+")\u4e07  /*/#ffffff"),m.push("\u53ef\u6d88\u8017"+l+g+"\u91ca\u653e/*/#ffffff")):
(4==g_OpenIdx&&(c.Dura=0),m.push("\u7d2f\u79ef\u7ecf\u9a8c"+c.Dura+"/"+c.DuraMax+"\u4e07 /*/#ffffff"));break;case 31:0==c.s.AniCount||0!=c.s.Shape&&3!=c.s.Shape||1!=c.s.Source||m.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(c.Dura,c.DuraMax,1)+"/*/#ffffff");m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff");break;case 149:m.push("\u91cd\u91cf: "+c.s.Weight+"/*/#ffffff"),m.push("\u5f00\u542f\u5b9d\u7bb1\u94a5\u5319\uff0c\u79fb\u52a8\u5230\u5b9d\u7bb1\u5185\u65e2\u53ef/*/#ffffff")}g=this.ClothesTypeInfo(c);
0!=g.length&&(m=m.concat(g));g=this.EquipmentInfos(c);0!=g.length&&(m=m.concat(g));g=this.TitleInfos(c);0!=g.length&&(m=m.concat(g));g=this.PaperPoisonInfos(c);0!=g.length&&(m=m.concat(g));g=this.StrengthenEquip(c);0!=g.length&&(m=m.concat(g));g=this.EquipmentSuitInfos(c);0!=g.length&&(m=m.concat(g));g=this.GetGemInfo(c);""!=g&&m.push(g+"/*/"+clLime);g=this.GetGemInfoEX(c);""!=g&&m.push(g+"/*/"+clLime);if(101==c.s.Need||102==c.s.Need||103==c.s.Need||104==c.s.Need)this.convertSecondToMinutes(c.s.NeedLevel),
m.push("\u9650\u65f6\u88c5\u5907: "+c.s.NeedLevel+"\u79d2/*/"+clLime);g=this.SetGemstones(c);0!=g.length&&(m=m.concat(g));c.TUserItemAdd&&c.TUserItemAdd.nMakeIndex&&m.push({name:"custom",obj:c.TUserItemAdd});this.GetLegTZInfo(c,m,h);h=c.s.StdMode;(5==h||6==h||10==h||11==h||15==h||16==h||19<=h&&24>=h||25==h||26<=h&&30>=h||48==h||53==h||62<=h&&69>=h||78==h||75==h||76==h||77==h||79<=h&&89>=h||178==h)&&g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(h=GameApi.GetItemScore(c),
m.push("\u88c5\u5907\u8bc4\u5206: "+h+"/*/#ffffff"));h=this.ItemDescs(c);0!=h.length&&(m=m.concat(h));return null!=c.ItemSrc?this.ItemsMakeInf(c.ItemSrc,m):m}};e.GetItemMinfo=function(c){};e.ItemsMakeInf=function(c,h){if(0<c.MakeType&&51>c.MakeType){h.push(" /*/"+clYellow);h.push("[\u7269\u54c1\u6765\u6e90]/*/#a2b5cd");switch(c.MakeType){case 1:h.push("\u7269\u54c1\u6765\u6e90: GM\u5236\u9020/*/"+clYellow);h.push("\u5236\u9020\u8005: "+c.MakePlay+"/*/"+clYellow);break;case 2:h.push("\u7269\u54c1\u6765\u6e90: NPC\u5236\u9020/*/"+
clYellow);h.push("\u83b7\u53d6\u4eba: "+c.MakePlay+"/*/"+clYellow);h.push("NPC: "+c.MakeObject+"/*/"+clYellow);break;case 3:case 13:h.push("\u7269\u54c1\u6765\u6e90: \u5546\u5e97\u8d2d\u4e70/*/"+clYellow);h.push("\u8d2d\u4e70\u4eba: "+c.MakePlay+"/*/"+clYellow);break;case 4:h.push("\u7269\u54c1\u6765\u6e90: \u6740\u602a\u6389\u843d/*/"+clYellow);h.push("\u5730\u56fe: "+c.MakeMap+"/*/"+clYellow);h.push("\u602a\u7269: "+c.MakeObject+"/*/"+clYellow);h.push("\u51fb\u6740\u8005: "+c.MakePlay+"/*/"+clYellow);
break;case 15:h.push("\u7269\u54c1\u6765\u6e90: \u65b0\u4eba\u8d60\u9001/*/"+clYellow);h.push("\u8d60\u9001\u4eba: "+c.MakePlay+"/*/"+clYellow);break;case 5:case 7:h.push("\u7269\u54c1\u6765\u6e90: \u7cfb\u7edf\u7ed9\u4e0e/*/"+clYellow);h.push("\u7ecf\u624b\u4eba: "+c.MakePlay+"/*/"+clYellow);break;case 6:h.push("\u7269\u54c1\u6765\u6e90: \u6316\u77ff\u83b7\u53d6/*/"+clYellow);h.push("\u5730\u56fe: "+c.MakeMap+"/*/"+clYellow);h.push("\u7ecf\u624b\u4eba: "+c.MakePlay+"/*/"+clYellow);break;case 8:h.push("\u7269\u54c1\u6765\u6e90: \u5b9d\u7bb1\u83b7\u53d6/*/"+
clYellow);h.push("\u5f00\u7bb1\u4eba: "+c.MakePlay+"/*/"+clYellow);h.push("\u5b9d\u7bb1: "+c.MakeObject+"/*/"+clYellow);break;case 9:h.push("\u7269\u54c1\u6765\u6e90: \u6316\u8089\u83b7\u53d6/*/"+clYellow),h.push("\u5730\u56fe: "+c.MakeMap+"/*/"+clYellow),h.push("\u7ecf\u624b\u4eba: "+c.MakePlay+"/*/"+clYellow),h.push("\u602a\u7269: "+c.MakeObject+"/*/"+clYellow)}h.push("\u65f6\u95f4: "+c.MakeDate+"/*/"+clYellow)}return h};e.GetUpgradeItemName=function(c){if(19<=c&&21<=c)return"\u9879\u94fe";switch(c){case 10:case 11:c=
"\u8863\u670d";break;case 5:case 6:c="\u6b66\u5668";break;case 15:c="\u5934\u76d4";break;case 22:case 23:c="\u6212\u6307";break;case 24:case 26:c="\u624b\u956f";break;case 52:case 62:case 28:c="\u978b";break;case 7:case 53:case 63:c="\u5b9d\u77f3";break;case 54:case 64:case 27:c="\u8170\u5e26";break;case 16:c="\u6597\u7b20";break;case 65:c="\u519b\u9f13";break;default:c="\u6240\u6709\u88c5\u5907"}return c};e.GetMagicItemDuraStr=function(c,h){n=!1;return 0==n?Math.round(c/g_nMagicItemRate)+"/"+Math.round(h/
g_nMagicItemRate):Math.round(c/g_nMagicItemRate)};e.GetDuraHPStoneStr=function(c,h){if(g_HPStoneDec)return parseInt(Math.round(c/1E3))+"\u4e07/"+parseInt(Math.round(h/1E3))+"\u4e07"};e.GetDuraMPStoneStr=function(c,h){if(g_MPStoneDec)return parseInt(Math.round(c/1E3))+"\u4e07/"+parseInt(Math.round(h/1E3))+"\u4e07"};e.ParseNameFormat=function(c){var h="",m=0,g=c;1E4<=c&&(m=Math.floor(c/1E4),g=c%1E4);g+="";for(var l=g.length;5>l;l++)h+="0";return 1E4<=c&&0!=m?"data/items"+m+"/"+h+g+".png":"data/items/"+
h+c+".png"};e.onfloorImageFormat=function(c){var h="",m=0,g=c;1E4<=c&&(m=Math.floor(c/1E4),g=c%1E4);for(var l=g.toString().length;5>l;l++)h+="0";return 1E4<=c&&0!=m?"data/dnitems"+m+"/"+h+g+".png":"data/dnitems/"+h+c+".png"};e.onroleImageFormat=function(c){var h="",m=0,g=c;1E4<=c&&(m=Math.floor(c/1E4),g=c%1E4);for(var l=g.toString().length;5>l;l++)h+="0";return 1E4<=c&&0!=m?"data/stateitem"+m+"/"+h+g+".png":"data/stateitem/"+h+c+".png"};e.ParseNameFormatSkill=function(c){var h=e.getprefixname(c,6),
m="";1E4<=c&&(m=Math.floor(c/1E4));resName=this.getImageSetNameByPath("data/magicon"+m+"/"+h);return resName=resName.replace(".atlas","/"+h+".png")};e.ParseNameFormat3=function(c){var h="",m=0,g=c;1E4<=c&&(m=Math.floor(c/1E4),g=c%1E4);for(var l=g.toString().length;5>l;l++)h+="0";return 1E4<=c&&0!=m?"data/dnitems"+m+"/"+h+g+".png":"data/dnitems/"+h+c+".png"};e.GetHumWinoffset=function(c){c=c.s.Looks;var h="stateitem";if(1E4<=c){var m=Math.floor(c/1E4);c%=1E4;h="stateitem1";0!=m&&(h="stateitem"+m)}return Offsetmodule.getoffset(h,
parseInt(c))};e.ParseMagicNameFormat=function(c){for(var h="",m=c.toString().length;5>m;m++)h+="0";return"data/magicion/"+h+c+".png"};e.ParseMagicResName=function(c){for(var h="",m=c.toString().length;5>m;m++)h+="0";return"gameres/ui/magic_res/"+h+c+".png"};e.IsRepleaseItem=function(c){if(null==c||void 0==c)return!1;c=e.GetItemType(c.s);for(var h=ItemMgr.getInstance().UseItemList,m=0,g=0;g<h.length;g++){var l=e.GetItemType(h[g].s);c==l&&m++}if(5<=c&&8>=c){if(!(2>m))return!0}else if(0<m)return!0;return!1};
e.CheckItemCanTakeOn=function(c,h){if(c==h)return!0;if(5==c||6==c)if(5==h||6==h)return!0;if(7==c||8==c)if(7==h||8==h)return!0;return!1};e.CheckItemPos=function(c,h){h=e.ParsePos(h);return c==h?!0:!1};e.ParsePos=function(c){if(1==c)return U_RIGHTHAND;if(2==c)return U_ARMRINGR;if(3==c)return U_RINGL;if(4==c)return U_BUJUK;if(5==c)return U_BELT;if(6==c)return U_BOOTS;if(7==c)return U_CHARM;if(8==c)return U_RINGR;if(9==c)return U_ARMRINGL;if(10==c)return U_NECKLACE;if(11==c)return U_HORSE;if(12==c)return U_HELMET;
if(13==c)return U_DRESS;if(14==c)return U_WEAPON};e.WeaponAttackSound=function(c,h,m,g){switch(c){case SM_THROW:case SM_HIT:case SM_HIT+1:case SM_HIT+2:case SM_POWERHIT:case SM_43HIT:case SM_LONGHIT:case SM_WIDEHIT:case SM_FIREHIT:case SM_CRSHIT:case SM_TWNHIT:case SM_66HIT:switch(Math.floor(h/2)){case 6:case 20:var l=s_hit_short;break;case 1:l=s_hit_wooden;break;case 2:case 13:case 9:case 5:case 14:case 22:l=s_hit_sword;break;case 4:case 17:case 10:case 15:case 16:case 23:l=s_hit_do;break;case 3:case 7:case 11:l=
s_hit_axe;break;case 24:l=s_hit_club;break;case 8:case 12:case 18:case 21:l=s_hit_long;break;default:l=s_hit_fist}break;case SM_101HIT:0==m?l=s_cboZs1_start_m:l=s_cboZs1_start_w;break;case SM_100HIT:l=s_cboZs2_start;break;case SM_102HIT:0==m?l=s_cboZs3_start_m:l=s_cboZs3_start_w;break;case SM_103HIT:l=s_cboZs4_start;break;case SM_60HIT:l=s_60HIT;break;case SM_61HIT:l=s_61HIT;break;case SM_62HIT:l=s_61HIT;break;case SM_SWORDHIT:0==m?l=s_hit_ZRJF_M:l=s_hit_ZRJF_W;break;case SM_STRUCK:if(c=Math.floor(h/
2),3==Math.floor(g/2))switch(c){case 6:l=s_struck_armor_sword;break;case 1:case 2:case 4:case 5:case 9:case 10:case 13:case 14:case 15:case 16:case 17:l=s_struck_armor_sword;break;case 3:case 7:case 11:l=s_struck_armor_axe;break;case 8:case 12:case 18:l=s_struck_armor_longstick;break;default:l=s_struck_armor_fist}else switch(c){case 6:l=s_struck_body_sword;break;case 1:case 2:case 4:case 5:case 9:case 10:case 13:case 14:case 15:case 16:case 17:l=s_struck_body_sword;break;case 3:case 7:case 11:l=s_struck_body_axe;
break;case 8:case 12:case 18:l=s_struck_body_longstick;break;default:l=s_struck_body_fist}}e.PlayMusicFormat(l)};e.SkillStartSound=function(c,h){if(sound_json){var m=0;h&&(m=h);c=1E4+10*c+m;for(m=0;m<sound_json.length;++m)if(sound_json[m].id==c&&sound_json[m].type)return"wav/"+sound_json[m].type}};e.SkillFireSound=function(c){if(sound_json){c=10*c+10001;for(var h=0;h<sound_json.length;++h)if(sound_json[h].id==c&&sound_json[h].type)return"wav/"+sound_json[h].type}};e.SkillExplosionSound=function(c){if(sound_json){c=
10*c+10002;for(var h=0;h<sound_json.length;++h)if(sound_json[h].id==c&&sound_json[h].type)return"wav/"+sound_json[h].type}};e.ClickSound=function(c){switch(c.s.StdMode){case 0:e.PlayMusicFormat(s_click_drug);break;case 31:e.PlayMusicFormat(s_itmclick);break;case 5:case 6:e.PlayMusicFormat(s_click_weapon);break;case 10:case 11:e.PlayMusicFormat(s_click_armor);break;case 22:case 23:e.PlayMusicFormat(s_click_ring);break;case 24:case 26:e.PlayMusicFormat(s_click_armring);break;case 19:case 20:case 21:e.PlayMusicFormat(s_click_necklace);
break;case 15:e.PlayMusicFormat(s_click_helmet);break;default:e.PlayMusicFormat(s_itmclick)}};e.PlayMusicFormat=function(c){c=void 0===c?"":c;if(1==s_temp_play)Laya.SoundManager.playSound(c);else{var h="",m=c.split(".");c=c.split("/");""!=m[0]&&(0!=c.length&&(h=c[c.length-1]),""!=S_LIMIT_FORMAT?(h=m[0]+"."+S_LIMIT_FORMAT,Laya.SoundManager.playSound(h)):(this.currLoadMusic={},null==SOUND_PLAY[h]?e.CheckIsHaveMusic(m[0]+".ogg",E_MUSICFORMAT.OGG):Laya.SoundManager.playSound(SOUND_PLAY[h])))}};e.RuningPlayCall=
function(c,h){c="";null!=this.currLoadMusic.ogg?c=this.currLoadMusic.ogg.url:null!=this.currLoadMusic.mp3?c=this.currLoadMusic.mp3.url:null!=this.currLoadMusic.wav&&(c=this.currLoadMusic.wav.url);if(""!=c){h="";var m=c.split("/");0!=m.length&&(h=m[m.length-1]);SOUND_PLAY[h]=c;Laya.SoundManager.playSound(c)}this.currLoadMusic={}};e.CheckIsHaveMusic=function(c,h){Laya.loader.load(c,Laya.Handler.create(this,function(m){switch(h){case E_MUSICFORMAT.OGG:this.currLoadMusic.ogg=m;break;case E_MUSICFORMAT.MP3:this.currLoadMusic.mp3=
m;break;case E_MUSICFORMAT.WAV:this.currLoadMusic.wav=m}1<=Object.keys(this.currLoadMusic).length&&this.RuningPlayCall(c,h)}.bind(this)))};e.hasmining=function(c,h){var m=ItemMgr.getInstance().FindUseItemByPos(U_WEAPON);return m&&m.s&&6==m.s.StdMode&&19==m.s.Shape?0==Mapmodule.CanMove(c,h,1):!1};e.hasexcavate=function(){var c=ObjectManage.findobject(lockingID);return c?c.is_die:!1};e.timetosec=function(c){var h=Math.floor(c/3600),m=Math.floor(c/60)%60;c%=60;var g;10>h?g="0"+h+":":g=h+":";10>m&&(g+=
"0");g+=m+":";10>c&&(g+="0");return g+c};e.strtoTime=function(c){c=c.split(":");return 3600*c[0]+60*c[1]+1*c[2]};e.GetPakRes=function(c,h){if(c<g_pak_list.length)return c=g_pak_list[c],h=(Array(5).join("0")+(0+h)).slice(-5),"data/"+c+"/"+h+".png"};e.checkBlendMode=function(c,h){"\u8d85\u7ea7\u795e\u79d8\u9762\u7eb1"!=c&&"\u6218\u8bb0\u52cb\u7ae0\u00b7Lv5"!=c&&-1==c.indexOf("\u9ec4\u91d1")||!h._style||(h.blendMode="overlay")};e.updatebuff=function(c,h){function m(){for(var z=0;z<g_buffID.length;z++)if(g_buffID[z].key==
g){var A=p.getChildByName(g_buffID[z].key);if(A)A=A.getChildByName("time");else break;0<g_buffID[z].value?A.text=e.timetosec(--g_buffID[z].value):(Laya.timer.clear(this,m),g_TimeIndex=-1,q=!0)}}if(null!=h&&null!=h.root){c=DecodeString(c).split("/");var g=parseInt(c[0]),l=c[6],p=h.root.onLine_bonus;g_TimeIndex=parseInt(c[6]);if(!(1>g||20<g)){(h=p.getChildByName(g))&&h.removeSelf();var q=!1,r=new Laya.Button("gameres/ui/btn_tab.png");r.stateNum=2;r.name=g;r.on(Laya.Event.CLICK,this,function(){for(var z=
1;z<p._childs.length;z++)p._childs[z].name!=g&&(p._childs[z].getChildByName("buff_kuang").visible=!1);z=r.getChildByName("buff_kuang");z.visible=!z.visible;z.visible||(z=60091,-1==g_TimeIndex&&q||(z=60092),Sendmessage.sendActorBuffClick(z,g))});p.addChild(r);for(var u=1;u<p._childs.length;u++)p._childs[u].pos(13+70*(u-1),17);if(""!=c[8]){h=c[8].split("#");if(1<h.length&&(u=h[1].split("|"),u=new Laya.Label(u[0].slice(0,4)+"..."),r.labelColors=Get2RGB(parseInt(h[0])),r.label=u.text,""!=l))if(buff_use_time=
parseInt(l),h=new Laya.Label,h.name="time",h.color="#ffe100",h.fontSize=16,h.pos(5,30),r.addChild(h),0>buff_use_time&&(buff_use_time=1),h.text=e.timetosec(--buff_use_time),0==g_buffID.length)g_buffID.push({key:g,value:buff_use_time});else{h=!0;for(u=0;u<g_buffID.length;u++)if(g_buffID[u].key==g){g_buffID[u].value=buff_use_time;h=!1;break}h&&g_buffID.push({key:g,value:buff_use_time})}Laya.timer.loop(1E3,this,m)}if(""!=c[7]){l=new Laya.Image("gameres/ui/buffkuang.png");l.name="buff_kuang";l.visible=
!1;l.sizeGrid="4,4,4,4";l.width=100;l.height=100;l.pos(0,30);r.addChild(l);h=c[7].split("|");for(u=c=0;u<h.length;++u){var v=h[u].split("#"),w=new Laya.Label(v[1]);w.fontSize=14;isNaN(parseInt(v[0]))?w.color="#FFFFFF":w.color=Get2RGB(parseInt(v[0]));w.pos(20,20*u+20);l.addChild(w);w.width>c&&(c=w.width)}l.width=c+50;l.height=30*h.length+20;l.pos((p.width-l.width)/2-l.parent.x,80)}}}};e.GetStringWith=function(c){if(null==this.lbl||void 0==this.lbl)this.lbl=new Laya.Text;this.lbl.text=c;c=this.lbl.width;
for(var h="",m=0;9999>m;m++)if(h+=" ",this.lbl.text=h,this.lbl.width>c)return h+"";return""};e.GetColorText=function(c,h,m,g,l){h.indexOf("{");h.indexOf("}");m=0;var p="";g=0;for(var q=!1;m<h.length;){if("}"==h[m]){if(q&&0<p.length){p=p.split("|");var r=new Laya.Label(p[0]);r.fontSize=18;r.color=Get2RGB(p[1].split(":")[0]);c.addChild(r);r.pos(g,0);g+=r.width;p="";q=!1}}else"{"==h[m]?(r=new Laya.Label(p),r.fontSize=18,r.color=l?l:Get2RGB(255),c.addChild(r),r.pos(g,0),g+=r.width,p="",q=!0):m==h.length-
1?(r=new Laya.Label(p+=h[m]),r.fontSize=18,r.color=l?l:Get2RGB(255),c.addChild(r),r.pos(g,0),g+=r.width):p+=h[m];m++}return g};e.slice=function(c,h,m){for(var g=0,l=new Uint8Array(m-h);h<m;h++,g++)l[g]=c[h];return l};e.splitStr=function(c,h){var m=Laya.stage.getChildByName("splitStr");null==m&&(m=new Laya.Text,Laya.stage.addChild(m),m.name="splitStr",m.visible=!1);for(var g="",l=0;l<c.length;l++)if(g+=c[l],m.text=g,m.width>h)return{idx:l,str:c.substring(l,c.length)};return null};e.israngeskill=function(c){return 20==
c||11==c||12==c||14==c||27==c||38==c||119==c||121==c||17==c||this.checkManualSkill(c,GlobalCfglist.manualHurricaneSkill,47)||this.checkManualSkill(c,GlobalCfglist.manualIceRoar,31)||this.checkManualSkill(c,GlobalCfglist.manualBombFire,21)||this.checkManualSkill(c,GlobalCfglist.manualIncendiaryShower,51)||99==c||85==c||40==c||46==c};e.checkManualSkill=function(c,h,m){return h?c==m:!1};e.checkFastLightLockRelease=function(c){return 8==c?!GlobalCfglist.manualFastLight:!0};e.isselfskill=function(c){return 29==
c||19==c||2==c||2==c||15==c||16==c||28==c||5==c||13==c||24==c||25==c||26==c};e.numtopng=function(c,h,m){c+="";var g=[];switch(h){case 150:m?g.push("gameres/ui/000161.png"):g.push("gameres/ui/000160.png");break;case 170:m?g.push("gameres/ui/000181.png"):g.push("gameres/ui/000180.png");break;case 190:m?g.push("gameres/ui/000201.png"):g.push("gameres/ui/000200.png");break;case 130:m?g.push("gameres/ui/000141.png"):g.push("gameres/ui/000140.png");break;case 210:m?g.push("gameres/ui/000221.png"):g.push("gameres/ui/000220.png");
break;case 230:m?g.push("gameres/ui/000241.png"):g.push("gameres/ui/000240.png")}for(m=0;m<c.length;++m){var l=parseInt(c[m]);l="gameres/ui/"+e.getprefixname(l+h,6)+".png";g.push(l)}return g};e.showvaule=function(c,h,m,g){if(2!=m.type){var l=[],p=new Laya.Point(25,-(m.sp.height/2)),q=0;switch(h){case SM_STRUCK_BLAST:l=this.numtopng(c,150,g);break;case SM_HEROGROUPATTACK:l=this.numtopng(c,150,g);break;case SM_REBOUND:l=this.numtopng(c,170,g);break;case SM_NPCHSPELLCHANGED:l=0<c?this.numtopng(c,190,
g):this.numtopng(Math.abs(c),210,g);break;case E_ROLE_CHANGE_HP:l=this.numtopng(c,210,g);break;case E_ROLE_CHANGE_MP:l=this.numtopng(c,230,g);break;case E_ROLE_POISONING_RED:if(c=Animationmodule.playframe(!1,m,"gameres/animation/goneWord/",360,364,200,!1,!0,p))c.name="hongdu";break;case E_ROLE_POISONING_GRE:if(c=Animationmodule.playframe(!1,m,"gameres/animation/goneWord/",370,374,200,!1,!0,p))c.name="lvdu";break;case E_ROLE_ALIVE:Animationmodule.playframe(!1,m,"gameres/animation/goneWord/",380,384,
200,!1,!0,p);break;case E_ROLE_LULL:if(c=Animationmodule.playframe(!1,m,"gameres/animation/goneWord/",390,394,200,!1,!0,p))c.name="mabi";break;default:l=this.numtopng(c,130,g)}if(c=e.InstanceOfMem(GameSceneUI))for(h=this.getBloodGonePosX(m,l.length,10),g=0;g<l.length;++g)p=new Laya.Image(l[g]),200<m.sp.height&&(m.sp.height=170),p.pos(h+q,m.Blood.y-30),c.maplayer.addChild(p),p.zOrder=999999,p.alpha=.2,p.scaleX=.8,p.scaleY=.8,Laya.Tween.to(p,{y:p.y-60,alpha:1,scaleX:1,scaleY:1},300,Laya.Ease.cubicInOut,
Laya.Handler.create(this,this.delvaule2,[p])),q+=0==g?17:10}};e.getBloodGonePosX=function(c,h,m){c=c.Blood.x+c.Blood.width/2;h=ontHalfLen=(m*h+7)/2;return c-h+2};e.delvaule2=function(c){Laya.Tween.to(c,{alpha:0,scaleX:.8,scaleY:.8},400,Laya.Ease.quartIn,Laya.Handler.create(e,e.delvaule,[c]))};e.delvaule=function(c){c.removeSelf()};e.ShowNewBag=function(c){var h=e.InstanceOfMem(NewBagUI);c?h?0==h.visible&&(h.visible=!0,Laya.loader.getRes("gameres/png/00018_new.png")||(h.removeSelf(),h=new NewBag,Laya.stage.addChild(h))):
(h=new NewBag,Laya.stage.addChild(h)):h&&(h.visible=!1)};e.ShowNewTeamGroup=function(c){var h=e.InstanceOfMem(TreamGroupUI);c?h?0==h.visible&&(h.visible=!0):(h=new TeamGroup,Laya.stage.addChild(h)):h&&h.BtnClick_exit()};e.ShowNewHeroBag=function(c){var h=e.InstanceOfMem(NewHeroBagUI);c?h||(h=new NewHeroBag,Laya.stage.addChild(h)):h&&h.removeSelf()};e.ShowNewDoudizhu=function(c){var h=e.InstanceOfMem(doudizhuUI);c?h||(h=new UIdoudizhu,Laya.stage.addChild(h)):h&&UIdoudizhu.removeSelf()};e.IntBagList=
function(){g_BagItemsList=[];for(var c=0;c<e.MaxBagItems();c++)g_BagItemsList.push(null)};e.IntHeroBagList=function(){g_HeroBagItemsList=[];for(var c=0;46>c;c++)g_HeroBagItemsList.push(null)};e.LoadBagItemIcon=function(c,h){var m=[];if(null!=c)for(var g=0;g<c.length;g++)if(null!=c[g]){var l=e.ParseNameFormat(c[g].s.Looks);""!=l&&(l=l.replace(".png",""),l=this.getImageSetNameByPath(l),""!=l&&m.push(l))}Laya.loader.load(m,Laya.Handler.create(this,function(){0==h?Laya.stage.event("ShowDrug_Items"):1==
h&&Laya.stage.event("Update_Npc_Items2")}),null,Laya.Loader.ATLAS)};e.LoadBagItemIcon2=function(c){if(null!=c){this.trimSpecialUnicode(c.s.DBName);for(var h=!0,m=0;m<g_BagItemsList.length;m++){var g=g_BagItemsList[m];if(g&&g.MakeIndex==c.MakeIndex){h=!1;break}}h&&(e.isMultiple(c)?0==c.s.StdMode?Laya.stage.event("item_hint",[c,c.Dura]):Laya.stage.event("item_hint",[c,c.Dura+1]):Laya.stage.event("item_hint",[c,1]));e.AddItemNewBag(c)}};e.GetItemNewBag=function(c){null!=c&&""!=c.s.Name&&this.SelfAddItem(c)};
e.SelfAddItem=function(c){e.MaxBagItems();for(var h=0;h<e.MaxBagItems();h++)if(null==g_BagItemsList[h]){for(var m=!0,g=0;g<g_boxItemArr.length;g++)if(g_boxItemArr[g]&&g_boxItemArr[g].MakeIndex==c.MakeIndex){m=!1;break}for(g=0;g<g_BagItemsList.length;g++){var l=g_BagItemsList[g];if(l&&l.MakeIndex==c.MakeIndex){m=!1;break}}m&&(g_BagItemsList[h]=c);break}g_OpenBag&&Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems");Laya.stage.event("ShowDrug_Items");Laya.stage.event("show_bag_hint")};
e.HeroAddItem=function(c){if(null!=c&&""!=c.s.Name){for(var h=0;h<g_HeroBagItemsList.length;h++)if(null==g_HeroBagItemsList[h]){g_HeroBagItemsList[h]=c;break}g_OpenHeroBag&&Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems")}};e.AddItemNewBag=function(c){null!=c&&""!=c.s.Name&&this.SelfAddItem(c)};e.DelBagItems=function(c){var h=!1;if(-1!=c){for(var m=0;m<g_BagItemsList.length;m++)if(null!=g_BagItemsList[m]&&g_BagItemsList[m].MakeIndex==c){g_BagItemsList[m]=null;
h=!0;break}Laya.stage.event("Show_Bag_Item_ico");e.InstanceOfMem(ScreenWUI)&&Laya.stage.event("Screen_Refresh_SearchItems");return h}};e.DelBagItemByName=function(c){var h=!1;if(""!=c){for(var m=0;m<g_BagItemsList.length;m++)if(null!=g_BagItemsList[m]&&g_BagItemsList[m].s.Name==c){g_WaitItems.Items=g_BagItemsList[m];Sendmessage.sendEat(0,g_BagItemsList[m].MakeIndex,g_BagItemsList[m].s.Name);g_BagItemsList[m]=null;h=!0;break}Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems");
return h}};e.DelHeroBagItems=function(c){if(-1!=c){for(var h=0;h<g_HeroBagItemsList.length;h++)if(null!=g_HeroBagItemsList[h]&&g_HeroBagItemsList[h].MakeIndex==c){g_HeroBagItemsList[h]=null;break}Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems")}};e.GetTakeOnPosition22=function(c,h,m,g){h=-1;switch(c){case 5:case 6:case 95:h=U_WEAPON;break;case 10:case 11:h=U_DRESS;break;case 15:h=U_HELMET;break;case 19:case 20:case 21:h=U_NECKLACE;break;case 22:h=1<=m&&12>=
m&&4<=g&&7>=g?40+m-1:U_RINGL;break;case 23:h=U_RINGL;break;case 24:case 26:h=U_ARMRINGR;break;case 30:case 29:h=U_RIGHTHAND;break;case 70:case 71:case 72:case 73:case 74:h=U_ICON;break;case 25:case 51:case 96:h=U_BUJUK;break;case 52:case 62:case 28:h=U_BOOTS;break;case 7:case 53:case 63:h=U_CHARM;break;case 54:case 27:case 64:h=U_BELT;break;case 16:h=U_HAT;break;case 48:h=U_SHIELD;break;case 65:h=U_DRUM;break;case 66:case 67:h=U_FASHIONDRESS;break;case 68:case 69:h=U_FASHIONWEAPON;break;case 178:h=
U_FASHIONHELMET;break;case 75:case 76:case 77:h=U_FASHIONNECKLACE;break;case 79:case 80:h=U_FASHIONARMRINGR;break;case 81:case 82:h=U_FASHIONARMRINGL;break;case 83:h=U_FASHIONRIGHTHAND;break;case 84:case 85:h=U_FASHIONBELT;break;case 86:case 87:h=U_FASHIONBOOTS;break;case 88:case 89:h=U_FASHIONCHARM;break;case 78:h=U_HORSE}if(h==U_RINGL||h==U_ARMRINGR||h==U_HELMET||h==U_NECKLACE)if(4==g&&(h=40),6==g&&(h=207),7==g&&(h=208),2==g)if(1<=m&&6>=m)h=30+m-1;else if(0==m||7==m)h=209;return h};e.GetHumPos=
function(c){var h=-1;switch(c){case 5:case 6:case 95:h=U_WEAPON;break;case 10:case 11:h=U_DRESS;break;case 15:h=U_HELMET;break;case 19:case 20:case 21:h=U_NECKLACE;break;case 22:h=U_RINGL;break;case 23:h=U_RINGL;break;case 24:case 26:h=U_ARMRINGR;break;case 30:case 29:h=U_RIGHTHAND;break;case 70:case 71:case 72:case 73:case 74:h=U_ICON;break;case 25:case 51:case 96:h=U_BUJUK;break;case 52:case 62:case 28:h=U_BOOTS;break;case 7:case 53:case 63:h=U_CHARM;break;case 54:case 27:case 64:h=U_BELT;break;
case 16:h=U_HAT;break;case 48:h=U_SHIELD;break;case 65:h=U_DRUM;break;case 66:case 67:h=U_FASHIONDRESS;break;case 68:case 69:h=U_FASHIONWEAPON;break;case 178:h=U_FASHIONHELMET;break;case 75:case 76:case 77:h=U_FASHIONNECKLACE;break;case 79:case 80:h=U_FASHIONARMRINGR;break;case 81:case 82:h=U_FASHIONARMRINGL;break;case 83:h=U_FASHIONRIGHTHAND;break;case 84:case 85:h=U_FASHIONBELT;break;case 86:case 87:h=U_FASHIONBOOTS;break;case 88:case 89:h=U_FASHIONCHARM;break;case 78:h=U_HORSE}return h};e.IntUserItems=
function(c){g_UserItemList=[];for(var h=0;h<c;h++)g_UserItemList.push(null)};e.IntHeroItems=function(c){g_HeroItemList=[];for(var h=0;h<c;h++)g_HeroItemList.push(null)};e.GetUserItems=function(c){if(-1!=c)for(var h=0;h<g_UserItemList.length;h++)if(null!=g_UserItemList[h]&&g_UserItemList[h].MakeIndex==c)return g_UserItemList[h]};e.GetBagItems=function(c){if(-1!=c)for(var h=0;h<g_BagItemsList.length;h++)if(null!=g_BagItemsList[h]&&g_BagItemsList[h].MakeIndex==c)return g_BagItemsList[h]};e.getBagItemByDBName=
function(c){if(c)for(var h=0;h<g_BagItemsList.length;h++)if(null!=g_BagItemsList[h]&&g_BagItemsList[h].s.DBName==c)return g_BagItemsList[h]};e.DelUserItems=function(c){var h=!1;if(-1!=c){for(var m=0;m<g_UserItemList.length;m++)if(null!=g_UserItemList[m]&&g_UserItemList[m].MakeIndex==c){c=g_UserItemList[m];g_UserItemList[m]=null;GlobalCfglist.d_autoskill_3&&Gameconfig.add_Use_Up(c);h=!0;Laya.stage.event("Show_Item_ico",-1);break}return h}};e.DelHeroItems=function(c){if(-1!=c){for(var h=0;h<g_HeroItemList.length;h++)if(null!=
g_HeroItemList[h]&&g_HeroItemList[h].MakeIndex==c){g_HeroItemList[h]=null;break}Laya.stage.event("Show_HeroItem_ico",-1)}};e.UpdateHeroItems=function(c){for(var h=!1,m=-1,g=0;g<g_HeroBagItemsList.length;g++)if(null!=g_HeroBagItemsList[g]&&g_HeroBagItemsList[g].MakeIndex==c.MakeIndex){m=c.Dura-g_HeroBagItemsList[g].Dura;g_HeroBagItemsList[g]=c;Laya.stage.event("Show_HeroBag_Item_ico",-1);h=!0;break}if(!h)for(g=0;g<g_HeroItemList.length;g++)if(g_HeroItemList[g]&&g_HeroItemList[g].MakeIndex==c.MakeIndex){m=
Math.abs(c.Dura-g_HeroItemList[g].Dura);g_HeroItemList[g]=c;break}return m};e.UpdateItems=function(c){for(var h=!1,m=-1,g=0;g<g_BagItemsList.length;g++)if(null!=g_BagItemsList[g]&&g_BagItemsList[g].MakeIndex==c.MakeIndex&&(m=c.Dura-g_BagItemsList[g].Dura,-1!=e.CheckHaveGlobalList(g_BagItemsList,c)||-1==e.CheckHaveGlobalList(g_StoreItemList,c))){g_BagItemsList[g]=c;Laya.stage.event("Show_Bag_Item_ico",-1);h=!0;e.isMultiple(c)&&0!=m&&Laya.stage.event("item_hint",[c,m]);break}if(!h){h=!1;for(g=0;g<g_UserItemList.length;g++)if(g_UserItemList[g]&&
g_UserItemList[g].MakeIndex==c.MakeIndex){m=Math.abs(c.Dura-g_UserItemList[g].Dura);g_UserItemList[g]=c;h=!0;Laya.stage.event("showDuraHum");break}if(!h&&c){if(-1==e.CheckHaveGlobalList(g_BagItemsList,c))return Laya.stage.event("ShowDrug_Items"),m;e.AddItemNewBag(c)}}Laya.stage.event("ShowDrug_Items");return m};e.CheckHaveGlobalList=function(c,h){for(var m=0;m<c.length;m++)if(null!=c[m]&&c[m].MakeIndex==h.MakeIndex)return m;return-1};e.UpdateUserItems=function(c){if(null!=c)for(var h=0;h<g_UserItemList.length;h++)if(null!=
g_UserItemList[h]&&g_UserItemList[h].MakeIndex==c.MakeIndex){g_UserItemList[h]=c;break}};e.UpdateUserItemsForIdx=function(c,h,m){c<g_UserItemList.length&&null!=g_UserItemList[c]&&(g_UserItemList[c].Dura=h,g_UserItemList[c].DuraMax=m)};e.ShowNewLogo=function(c,h,m,g){this.SkillListType=h;this.SkillRockeNum=m;m={target:null};var l=e.InstanceOfMem(HumWinUI);if(c){l?l&&0==l.visible?(l.visible=!0,Laya.loader.getRes("gameres/png/00029_new.png")||(l.removeSelf(),l=new HumWin,Laya.stage.addChild(l))):null!=
g&&(c=l._childs[0].getChildByName(g),null!=c?m.target=c:m.target.name=g.toString(),l.ontab1_Click(m)):(l=new HumWin,null!=g&&(c=l._childs[0].getChildByName(g),null!=c?m.target=c:m.target.name=g.toString(),l.ontab1_Click(m)),Laya.stage.addChild(l));if(1==h)l.onState_skill();l.ShowItemico(-1)}else l&&(l.visible=!1)};e.ShowHeroWin=function(c,h,m,g){this.SkillListType=h;this.SkillRockeNum=m;m=e.InstanceOfMem(HeroWinUI);var l={target:{name:g}};if(c){m?null!=g&&(c=m._childs[0].getChildByName(g),null!=c?
l.target=c:l.target.name=g.toString(),m.ontab1_Click(l)):(m=new HeroWin,null!=g&&(c=m._childs[0].getChildByName(g),null!=c?l.target=c:l.target.name=g.toString(),m.ontab1_Click(l)),Laya.stage.addChild(m));if(1==h)m.onState_skill();m.ShowItemico(-1)}else m&&m.removeSelf()};e.NewShowItemsClose=function(){var c=e.InstanceOfMem(NewItemInfoUI);c||(c=new NewItemInfo,Laya.stage.addChild(c));c.removeSelf()};e.NewShowItemsInf=function(c,h,m,g){function l(F){u&&u.ShowInfo(q,F,m,c)}function p(F){A&&A.ShowInfo(C,
F,m,z)}if(c){m||(m=Laya.stage.width/2);var q=e.GetItemInfo(c,h),r=GameApi.GetItemScore(c),u=Laya.stage.getChildByName("comparison");u||(u=new NewItemInfo,u.name="comparison",u.x=null==m?100:m-u.width/2,Laya.stage.addChild(u),u.Item_bg.y=(Laya.stage.height-u.height)/2);u.item=c;var v=70<=c.s.StdMode&&74>=c.s.StdMode?0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items":"items";if(1!=g_OpenIdx&&g_serverconfigtxt.boItemCompare){var w=
e.GetItemType(c.s),z=g_UserItemList[w];if(z){var A=Laya.stage.getChildByName("comparison1"),C=e.GetItemInfo(z,h),B=GameApi.GetItemScore(z);A||(A=new NewItemInfo,A.name="comparison1",null!=m&&(A.x=u.x+u.Item_bg.width+4),Laya.stage.addChild(A),A.Item_bg.y=u.Item_bg.y);A.item=z;var D=70<=z.s.StdMode&&74>=z.s.StdMode?0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items":"items";A.but_bg.visible=!1;if(5==w||6==w||7==w||8==w){var E=
null;switch(w){case 5:E=g_UserItemList[6];A.change_idx=6;break;case 6:E=g_UserItemList[5];A.change_idx=5;break;case 7:E=g_UserItemList[8];A.change_idx=8;break;case 8:E=g_UserItemList[7],A.change_idx=7}E&&(A.change_item=E,A.change_type=h,A.change_x=m,A.change_side.visible=!0)}r==B?(u.gradeColor=2,A.gradeColor=2):B||0==B?r>B?(u.gradeColor=1,A.gradeColor=0):r<B&&(u.gradeColor=0,A.gradeColor=1):u.gradeColor=1}else Laya.stage.removeChildByName("comparison1")}c&&(h=c.s.Looks,74>=c.s.StdMode&&70<=c.s.StdMode&&
(h+=1),e.loadImg(h,v,l,!0));z&&(v=z.s.Looks,74>=z.s.StdMode&&70<=z.s.StdMode&&(v+=1),e.loadImg(v,D,p,!0));g&&(u&&(u.but_bg.visible=!1),A&&(A.but_bg.visible=!1))}};e.NewShowMagicInf=function(){if(1==this.SkillListType)e.AddSkill(this.SkillRockeNum);else{var c=GameApi.GetMagicDes(g_MoveSkill.Def.sMagicName),h=[];if(null!=g_MoveSkill){h.push(g_MoveSkill.Def.sMagicName+"/*/#ffffff");var m="";e.getJobName(g_MoveSkill.Def.btJob)&&(m=e.getJobName(g_MoveSkill.Def.btJob));h.push("\u9002\u7528\u804c\u4e1a: "+
m+"/*/#ffffff");c&&h.push(c+"/*/#ffffff");c=g_MoveSkill.Def.btEffect;38==g_MoveSkill.Def.wMagicId&&(c=4);46==g_MoveSkill.Def.wMagicId&&(c=42);39==g_MoveSkill.Def.wMagicId&&(c=0);c=this.ParseNameFormatSkill(2*c);1E3<=g_MoveSkill.Def.wMagicId&&1500>=g_MoveSkill.Def.wMagicId&&(m=Skillmodule.findCustomSkill(g_MoveSkill.Def.wMagicId,g_MoveSkill.Level))&&(c=GameMission.getUrl(g_pak_list[m.iconFileIndex],m.wIconImageIndex));g_MoveItems.Items=null;m=e.InstanceOfMem(NewItemInfoUI);m||(m=new NewItemInfo,Laya.stage.addChild(m));
m.ShowInfo(h,c)}}};e.AddSkill=function(c){if(null!=g_MoveSkill)if("\u57fa\u672c\u5251\u672f"==g_MoveSkill.Def.sMagicName||"\u653b\u6740\u5251\u672f"==g_MoveSkill.Def.sMagicName||"\u7cbe\u795e\u529b\u6218\u6cd5"==g_MoveSkill.Def.sMagicName||"\u62a4\u4f53\u795e\u76fe"==g_MoveSkill.Def.sMagicName)Laya.stage.event("show_log",[{txt:"\u88ab\u52a8\u6280\u80fd\u65e0\u6cd5\u4e3b\u52a8\u5e03\u7f6e",color:"#ff0000"}]);else{for(var h=0;h<g_SetupMagicList.length;h++)if(null!=g_SetupMagicList[h]&&g_MoveSkill.Def.wMagicId==
g_SetupMagicList[h].Def.wMagicId){GameApi.SetSkillKey(g_SetupMagicList[h].Def.wMagicId,0);Laya.stage.event("remove_magic",h);g_SetupMagicList[h]=null;break}null!=g_SetupMagicList[c]&&(GameApi.SetSkillKey(g_SetupMagicList[c].Def.wMagicId,0),Laya.stage.event("remove_magic",c));g_SetupMagicList[c]=g_MoveSkill;GameApi.SetSkillKey(g_SetupMagicList[c].Def.wMagicId,c+49);null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);Laya.stage.event("Magic_Refresh");
Laya.stage.event("update_icon",c)}};e.ShowItemeffect=function(c,h,m){if(null!=h||void 0!=h){var g=h.s.EffectFileIndex,l=h.s.EffectStartOffSet,p=h.s.EffectImageCount,q=h.s.EffectFrameTime,r=this.cutoffset(g_pak_list[g]);if((h=c.getChildByName("effect"))&&(65535==g||0==g))h.removeSelf();else if(65535!=g&&null==h&&0!=g){h=[];for(m=l;m<=l+p-1;m++){var u=("000000"+m).slice(-6);u=e.getImageSetNameByPath("data/"+g_pak_list[g]+"/"+u);""!=u&&h.push(u)}this.loadImgEx(h,function(){var v=Offsetmodule.getoffsets("data/"+
g_pak_list[g]+"/",l,l+p-1);v=0<v.length?new Laya.Point(c.width/2-v[0].x,c.height/2-v[0].y):new Laya.Point(c.width/2,c.height/2);if(v=Animationmodule.playframe(!0,c,"data/"+g_pak_list[g]+"/",l,l+p-1,q,!0,!1,v,null,null,null,"data/"+g_pak_list[g]+"/",!r))v.name="effect"})}}};e.setitemoff=function(c,h){var m=new Laya.Point;c==U_WEAPON?(m.x=-20+h.x,m.y=52+h.y):c==U_DRESS?(m.x=-71+h.x,m.y=-18+h.y):c==U_HELMET?(m.x=-69+h.x,m.y=16+h.y):c==U_SHIELD?(m.x=-50+h.x,m.y=-24+h.y):c==U_HAT?(m.x=-69+h.x,m.y=20+h.y):
c==U_FASHIONDRESS?(m.x=-64+h.x,m.y=-18+h.y):c==U_FASHIONWEAPON?(m.x=-20+h.x,m.y=52+h.y):c==U_FASHIONHELMET&&(m.x=-75+h.x,m.y=21+h.y);return m};e.hasuseblend=function(c){return 1890==c?!0:!1};e.ShowItemeffectEx=function(c,h,m,g,l){if(null!=m){c=m.s.BodyEffectFileIndex;var p=null,q=m.s.BodyEffectStartOffSet,r=m.s.BodyEffectImageCount,u=m.s.BodyEffectFrameTime;if(0<c&&c<g_pak_list.length){var v=g_pak_list[c];void 0==g&&(g=this.cutoffset(v));var w=h.getChildByName("bodyeffect");if(w&&(65535==c||0==c))Animationmodule.removeAni(w);
else if(65535!=c&&null==w&&0!=c){if(g)switch(l){case U_WEAPON:var z=new Laya.Point(-25,55);break;case U_DRESS:z=new Laya.Point(-75,-18);break;case U_HELMET:z=new Laya.Point(0,0);break;case U_HAT:z=new Laya.Point(0,0);break;case U_FASHIONDRESS:z=new Laya.Point(-178,-142);break;case U_FASHIONWEAPON:z=new Laya.Point(-131,-77);break;case U_FASHIONHELMET:z=new Laya.Point(0,0);break;case U_SHIELD:z=new Laya.Point(-118,-30)}else z=new Laya.Point(h.width/2,h.height/2);"stateitem"==v&&(p="data/stateitem/");
if(w=Animationmodule.playframe(!0,h,"data/"+v+"/",q,q+r-1,u,!0,!1,z,null,null,null,p,!g))w.name="bodyeffect"+m.MakeIndex}}}};e.ShowNewStore=function(c,h){var m=e.InstanceOfMem(NewStoreRomUI);c?(m||(m=new NewStore,Laya.stage.addChild(m)),m.ShowItemico(h)):m&&m.removeSelf()};e.DelStoreItems=function(c){if(-1!=c)for(var h=0;h<g_StoreItemList.length;h++)if(null!=g_StoreItemList[h]&&g_StoreItemList[h].MakeIndex==c){g_StoreItemList[h]=null;Laya.stage.event("Show_Store_Item_ico",g_StoreLimitCount);break}};
e.AddStoreItems=function(c,h){if(void 0!=h&&0<=h)g_StoreItemList[h]=c,Laya.stage.event("Show_Store_Item_ico",[g_StoreLimitCount]);else if(null!=c){h=!1;for(var m=0;m<g_StoreItemList.length;m++)if(null==g_StoreItemList[m]){g_StoreItemList[m]=c;Laya.stage.event("Show_Store_Item_ico",[g_StoreLimitCount]);h=!0;break}h||(g_StoreItemList.push(c),Laya.stage.event("Show_Store_Item_ico",[g_StoreLimitCount]))}};e.ReStoreItems=function(c){console.log("ReStoreItems",c)};e.checkUseCiSha=function(){return GlobalCfglist.z_autoskill_1&&
this.hasCiShaSkill};e.hasCiShaSkill;e.isCiShaSkill=function(c){return c&&c.Def?13==c.Def.btEffect&&12==c.Def.wMagicId:!1};e.AddMagic=function(c){null!=c&&(Laya.stage.event("item_hint",[c.Def.sMagicName,"skill",3]),this.isCiShaSkill(c)&&(this.hasCiShaSkill=!0),g_UserMagicList.push(c),Laya.stage.event("Magic_Refresh"))};e.AddHeroMagic=function(c){null!=c&&(g_HeroMagicList.push(c),Laya.stage.event("HeroMagic_Refresh"))};e.DelMagic=function(c){for(var h=0;h<g_UserMagicList.length;h++)if(null!=g_UserMagicList[h]&&
g_UserMagicList[h].Def.wMagicId==c){g_SetupMagicList[g_UserMagicList[h].Key-49]=null;this.isCiShaSkill(g_UserMagicList[h])&&(this.hasCiShaSkill=!1);g_UserMagicList.splice(h,1);Laya.stage.event("Magic_Refresh");Laya.stage.event("update_icon");break}};e.DelHeroMagic=function(c){for(var h=0;h<g_HeroMagicList.length;h++)if(null!=g_HeroMagicList[h]&&g_HeroMagicList[h].Def.wMagicId==c){g_HeroMagicList.splice(h,1);Laya.stage.event("HeroMagic_Refresh");break}};e.UpdateMagicLvExp=function(c,h,m,g){for(var l=
0;l<g_UserMagicList.length;l++)if(null!=g_UserMagicList[l]&&g_UserMagicList[l].Def.wMagicId==c){c=m-g_UserMagicList[l].CurTrain;0<c&&Laya.stage.event("item_hint",[g_UserMagicList[l].Def.sMagicName,c,2]);g_UserMagicList[l].Level=h;g_UserMagicList[l].CurTrain=m;g_UserMagicList[l].btStrengLevel=g;break}};e.UpdateHeroMagicLvExp=function(c,h,m,g){for(g=0;g<g_HeroMagicList.length;g++)if(null!=g_HeroMagicList[g]&&g_HeroMagicList[g].Def.wMagicId==c){g_HeroMagicList[g].Level=h;g_HeroMagicList[g].CurTrain=
m;Laya.stage.event("HeroMagic_Refresh");break}};e.CountMoveDown=function(c){7==c?c=0:c++;return c};e.CountMoveUp=function(c){0==c?c=7:c--;return c};e.escapedir=function(c){var h=[];0==c?(h.push(4),h.push(5),h.push(6),h.push(7),h.push(0),h.push(1),h.push(2),h.push(3)):1==c?(h.push(5),h.push(6),h.push(7),h.push(0),h.push(1),h.push(2),h.push(3),h.push(4)):2==c?(h.push(6),h.push(7),h.push(0),h.push(1),h.push(2),h.push(3),h.push(4),h.push(5)):3==c?(h.push(7),h.push(0),h.push(1),h.push(2),h.push(3),h.push(4),
h.push(5),h.push(6)):4==c?(h.push(0),h.push(1),h.push(2),h.push(3),h.push(4),h.push(5),h.push(6),h.push(7)):5==c?(h.push(1),h.push(2),h.push(3),h.push(4),h.push(5),h.push(6),h.push(7),h.push(0)):6==c?(h.push(2),h.push(3),h.push(4),h.push(5),h.push(6),h.push(7),h.push(0),h.push(1)):7==c&&(h.push(3),h.push(4),h.push(5),h.push(6),h.push(7),h.push(0),h.push(1),h.push(2));return h};e.rollMsg=function(c){var h=c[0];if(h){var m=new Laya.Image,g=e.InstanceOfMem(GameSceneUI);if(g){g.addChildAt(m,g._childs.indexOf(g.gameMain));
m.width=Laya.stage.width;m.height=25;m.x=0;m.y=20;m.name="roll_img";m.skin="gameres/ui/img_roll.png";var l=e.msgSetColor(h.txt,h.fcolor,h.bcolor,16);if(m&&l){var p=function(){l.x-=2;if(l.x<-l.width){if(0<--h.count)e.rollMsg(c);else if(c[0]){var q=c[0].y;c.shift();0<c.length?e.rollMsg(c):delete G_RollMsg[q]}m&&m.removeSelf();Laya.timer.clear(this,p)}};m.addChild(l);l.x=m.width;h.y&&m.pos(h.x,h.y);Laya.timer.loop(20,this,p,[h.y])}}}};e.superMsg=function(c,h,m){if(ObjectManage.findobject(playerID)){var g=
Laya.stage.getChildByName("superTxt");1>c.length||(g||(Laya.stage.addChild(c[0]),c[0].name="superTxt",c[0].alpha=1,c[0].x=(Laya.stage.width-c[0].width)/2,c[0].y=h),Laya.timer.once(3E3,this,function(){var l=ObjectManage.findobject(playerID);l&&(Laya.Tween.to(c[0],{y:h-c[0].height,alpha:0},1500,null,Laya.Handler.create(this,function(){c[0].removeSelf();c.shift();1>c.length&&l&&(0<--m?0<g_superMsg.length&&(c=c.concat(g_superMsg[0]),e.superMsg(c,h,m)):(g_superMsg.shift(),0<g_superMsg.length&&(c=c.concat(g_superMsg[0]),
e.superMsg(c,g_superMsg[0].nY,g_superMsg[0].nCount))))})),c[1]&&l&&(c[1].name="superTxt",c[1].alpha=0,c[1].x=(Laya.stage.width-c[1].width)/2,c[1].y=h+c[1].fontSize,Laya.stage.addChild(c[1]),Laya.Tween.to(c[1],{y:h,alpha:1},1500,null,Laya.Handler.create(this,function(){0<c.length&&e.superMsg(c,h,m)}))))}))}};e.msgSetColor=function(c,h,m,g){var l=new Laya.Panel;l.width=0;l.y=4;-1!=c.indexOf("{")&&-1!=c.indexOf("}")&&(c=c.replace(/{/g,"<"),c=c.replace(/}/g,">"));if(-1==c.indexOf("<")||-1==c.indexOf(">")||
-1==c.toUpperCase().indexOf("/FCOLOR")&&-1==c.indexOf("|"))return l=new Laya.Label,l.fontSize=g,l.text=c,l.align="center",l.y=5,l.stroke=1,h&&l&&(l.color=Get2RGB(h)),m&&l&&(l.strokeColor=Get2RGB(m)),l;for(var p=[];-1!=c.indexOf("<")&&-1!=c.indexOf(">");){if(0!=c.indexOf("<")){var q=c.indexOf("<");p.push(c.substring(0,q));c=c.substring(q)}q=c.indexOf("<");var r=c.indexOf(">");-1!=q&&-1!=r?(p.push(c.substring(q+1,r)),c=c.substring(r+1)):p.push(c)}""!=c&&p.push(c);for(c=0;c<p.length;c++)q=new Laya.Label,
q.fontSize=g,-1!=p[c].toUpperCase().indexOf("/FCOLOR=")?(r=p[c].toUpperCase().split("/FCOLOR="),r[0]&&(q.text=r[0]),r[1]&&(q.color=Get2RGB(parseInt(r[1])))):-1!=p[c].indexOf("|")?(r=p[c].split("|"),q.text=r[0],-1!=r[1].indexOf(":")&&(r=r[1].split(":"),3==r.length&&(q.color=Get2RGB(r[0]),"0"==r[2]?q.borderColor=Get2RGB(r[1]):(q.stroke=2,q.strokeColor=Get2RGB(r[1]))))):(q.text=p[c],q.color=Get2RGB(h)),q.align="center",m&&q&&(q.stroke=1,q.strokeColor=Get2RGB(m)),q.x=l.width,q.y=1,cur_use_app?l.width+=
q.width+3:l.width+=q.width,l.addChild(q);return l};e.newLineMsg=function(c,h){var m=Laya.stage.getChildByName("newline"+h);if(!m&&c[0]&&(m=c[0],Laya.stage.addChild(m),m.nTime))if(1==m.nMode)m.alpha=.1,m.y+=m.y,Laya.Tween.to(m,{y:m.y/2,alpha:1},1500,null,Laya.Handler.create(this,function(){Laya.timer.once(1E3*m.nTime-1500,this,function(){Laya.Tween.to(m,{y:m.y/2,alpha:.1},1500,null,Laya.Handler.create(this,function(){m.removeSelf();c.shift();c[0]&&this.newLineMsg(c,h)}))})}));else Laya.timer.once(1E3*
m.nTime,this,function(){m.removeSelf();c.shift();c[0]&&this.newLineMsg(c,h)})};e.countDownMsg=function(){function c(q,r,u){q.time--;u&&u[1]?q.text=u[0]+h(q.time)+u[1]:u&&u[0]&&(q.text=u[0]+h(q.time));for(r=0;r<G_countDownMsg.length;r++)G_countDownMsg[r].y=g-18*(G_countDownMsg.length-r),0>G_countDownMsg[r].time&&(G_countDownMsg[r].removeSelf(),G_countDownMsg.splice(r,1));0==G_countDownMsg.length&&Laya.timer.clear(this,c)}function h(q){var r=q%60;return 60>l.time?r+"\u79d2":~~(q/60)+"\u5206"+r+"\u79d2"}
var m=e.InstanceOfMem(GameSceneUI),g=500;m&&(g=m.gameMain.root.chat_node.localToGlobal(new Laya.Point(0,0)).y);for(m=0;m<G_countDownMsg.length;m++)G_countDownMsg[m].y=g-18*(G_countDownMsg.length-m);for(m=0;m<G_countDownMsg.length;m++){var l=G_countDownMsg[m];if(l){if(-1!=l.text.indexOf("%d")){var p=l.text.split("%d");l.text=l.text.replace("%d",h(l.time))}else-1!=l.text.indexOf("%s")&&(p=l.text.split("%s"),l.text=l.text.replace("%s",h(l.time)));Laya.stage.addChild(l);Laya.timer.loop(1E3,this,c,[l,
m,p])}}};e.printcaller=function(){};e.DelUserIcon=function(c){if(-1!=c)for(var h=0;h<g_IconCList.length;h++)if(null!=g_IconCList[h]&&g_IconCList[h].MakeIndex==c){g_UserItemList[U_ICON]&&g_UserItemList[U_ICON].MakeIndex==c&&(g_UserItemList[U_ICON]=null);g_IconCList.splice(h,1);Laya.stage.event("Show_Item_ico",-1);break}};e.Suitvalue=function(c,h,m,g,l,p){for(var q=0;q<h.length;q++)if(-1!=h[q].indexOf(c)){var r=h[q].split("~!");if(r[0]!=c)return m;break}""!=m?(15<=p&&20>=p?r[1]+="0%":24<=p&&34>=p?r[1]+=
"%":46<=p&&(r[1]+="%"),c="\u62a4\u8eab"==c||"\u590d\u6d3b"==c||"\u9ebb\u75f9"==c||"\u9632\u6b62\u62a4\u8eab"==c||"\u9632\u6b62\u590d\u6d3b"==c||"\u9632\u6b62\u9ebb\u75f9"==c||"\u6280\u5de7"==c||"\u63a2\u6d4b"==c||"\u8d1f\u91cd"==c?c:c+"+"+r[1],m=m+"  "+c,l.push(m+"/*/"+g),c=new Laya.Text,c.text=m,180<c.textWidth&&l.push("/*/"+g),m=""):(15<=p&&20>=p?r[1]+="0%":24<=p&&34>=p?r[1]+="%":46<=p&&(r[1]+="%"),m="\u62a4\u8eab"==c||"\u590d\u6d3b"==c||"\u9ebb\u75f9"==c||"\u9632\u6b62\u62a4\u8eab"==c||"\u9632\u6b62\u590d\u6d3b"==
c||"\u9632\u6b62\u9ebb\u75f9"==c||"\u6280\u5de7"==c||"\u63a2\u6d4b"==c||"\u8d1f\u91cd"==c?c:c+"+"+r[1]);return m};e.ShowPersonalStore=function(c){var h=e.InstanceOfMem(PersonalStoreUI);c?h||(h=new PersonalStore,Laya.stage.addChild(h)):h&&h.removeSelf()};e.ShowStore=function(c){var h=e.InstanceOfMem(StoreUI);c?h||(h=new StoreWin,Laya.stage.addChild(h)):h&&h.removeSelf()};e.ShowMyShop=function(c){var h=e.InstanceOfMem(MyStoreUI);c?h||(h=new MyStoreWin,Laya.stage.addChild(h)):h&&h.removeSelf()};e.ShowItemNum=
function(c,h,m,g){e.loadImg(c.s.Looks,"items",function(l){l=new Laya.Image(l);1<h._childs.length?h.removeChild(h._childs[1]):0<h._childs.length&&"laya.ui.Image"==h._childs[0].__className&&h.removeChild(h._childs[0]);h.addChild(l);e.ShowItemeffect(l,c);if((17==c.s.StdMode||18==c.s.StdMode||41==c.s.StdMode||40==c.s.StdMode||42==c.s.StdMode||31==c.s.StdMode&&-1!=c.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<c.s.Reserved&&0<c.Dura){var p=new Laya.Text;p.color="#ffffff";p.text="x"+(c.Dura+1);e.setCanAddTxtStroke(p);
p.align="right";p.width=30;l.addChild(p)}else 0==c.s.StdMode&&5==c.s.Source&&0<c.Dura&&(p=new Laya.Text,p.color="#ffffff",p.align="right",p.width=30,p.text="x"+c.Dura,e.setCanAddTxtStroke(p),l.addChild(p));m&&g&&(l.pos(m-l.width/2,g-l.height/2),e.setTxtFixedPos(l,h.width,h.height))})};e.ShowMoneyType=function(c){var h="";0==c?h=g_GameGoldNum.key:1==c?h=g_GamePointNum.key:2==c?h=g_GameCionNum.key:3==c?h=g_nGameDiamond.key:4==c&&(h=g_nGameGird.key);return h};e.ShowbtItemType=function(c){var h="";0==
c?h="\u88c5\u9970":1==c?h="\u8865\u7ed9":2==c?h="\u5f3a\u5316":3==c?h="\u597d\u53cb":4==c?h="\u9650\u91cf":5==c&&(h="\u5947\u73cd");return h};e.ShowSelectedIdx=function(c){var h=0;"\u4e0d\u9650"==c?h=0:c==g_GameGoldNum.key?h=0:c==g_GamePointNum.key?h=1:c==g_GameCionNum.key?h=2:c==g_nGameDiamond.key?h=3:c==g_nGameGird.key&&(h=4);return h};e.ApplyDoorState=function(c,h,m){if(AStart.cur_matx&&AStart.cur_matx[0]&&c<AStart.cur_matx.length&&h<AStart.cur_matx[0].length){AStart.cur_matx[h-2][c]=!1;AStart.cur_matx[h-
1][c+1]=!1;AStart.cur_matx[h-2][c+1]=!1;var g=m==dsClose?!0:!1;AStart.cur_matx[h][c]=g;AStart.cur_matx[h-1][c]=g;AStart.cur_matx[h-2][c]=g;AStart.cur_matx[h-1][c+1]=g;AStart.cur_matx[h-2][c+1]=g;AStart.cur_matx[h-1][c-1]=g;AStart.cur_matx[h][c-1]=g;AStart.cur_matx[h+1][c-1]=g;AStart.cur_matx[h][c-2]=g;m==dsOpen&&(AStart.cur_matx[h-2][c]=!0,AStart.cur_matx[h-1][c+1]=!0,AStart.cur_matx[h-2][c+1]=!0)}};e.JudgeMagicMp=function(c,h){if(c&&h&&c.Def&&void 0!=c.Level&&h.m_Abil){var m=c.Def.wSpell/(c.Def.btTrainLv+
1)*(c.Level+1),g=Math.round(m),l=Math.floor(m);0==l%2&&.5==m-l&&(g=l);g+=c.Def.btDefSpell;if(h.m_Abil.MP>=g)return!0}return!1};e.IfOpenBlend=function(c,h){if(IsBlendFileName&&""!=IsBlendFileName){-1!=c.indexOf("/")&&(c=c.split("/"),c=c[c.length-2]);for(var m=0;m<IsBlendFileName.length;m++){var g=IsBlendFileName[m].split(","),l=g[0],p=g[1];g=g[2];if(c&&l&&l==c&&(-1==h||h>=p&&h<=g))return!0}}return!1};e.GetItemTypeEx=function(c){var h=-1;if(void 0==c)return h;5==c.StdMode||6==c.StdMode||95==c.StdMode?
h=U_WEAPON:10==c.StdMode||11==c.StdMode?h=U_DRESS:15==c.StdMode?h=U_HELMET:19==c.StdMode||20==c.StdMode||21==c.StdMode?h=U_NECKLACE:22==c.StdMode||23==c.StdMode?(h=U_RINGL,1<=c.Expand1&&12>=c.Expand1&&4<=c.OverLap&&7>=c.OverLap&&(h=U_GODBLESS1+c.Expand1-1)):24==c.StdMode||26==c.StdMode?h=U_ARMRINGR:29==c.StdMode||30==c.StdMode?h=U_RIGHTHAND:70<=c.StdMode&&74>=c.StdMode?h=U_ICON:25==c.StdMode||51==c.StdMode||96==c.StdMode?h=U_BUJUK:52==c.StdMode||62==c.StdMode||28==c.StdMode?h=U_BOOTS:7==c.StdMode||
53==c.StdMode||63==c.StdMode?h=U_CHARM:54==c.StdMode||64==c.StdMode||27==c.StdMode?h=U_BELT:16==c.StdMode?h=U_HAT:48==c.StdMode?h=U_SHIELD:65==c.StdMode?h=U_DRUM:66==c.StdMode||67==c.StdMode?h=U_FASHIONDRESS:68==c.StdMode||69==c.StdMode?h=U_FASHIONWEAPON:178==c.StdMode?h=U_FASHIONHELMET:75==c.StdMode||76==c.StdMode||77==c.StdMode?h=U_FASHIONNECKLACE:79==c.StdMode||80==c.StdMode?h=U_FASHIONARMRINGR:81==c.StdMode||82==c.StdMode?h=U_FASHIONRINGL:83==c.StdMode?h=U_FASHIONRIGHTHAND:84==c.StdMode||85==
c.StdMode?h=U_FASHIONBELT:86==c.StdMode||87==c.StdMode?h=U_FASHIONBOOTS:88==c.StdMode||89==c.StdMode?h=U_FASHIONCHARM:78==c.StdMode&&(h=U_HORSE);return h};e.ReadShieldPak=function(c,h,m,g){--c;if(0<=c)var l=600*c,p="s-shield";c=[];if(obj_config)for(m=this.getstatenamebyplayer(m),h=0;h<obj_config.HA[m].frame;h++){var q=""+this.getprefixname(l+obj_config.HA[m].start+h+g*(obj_config.HA[m].frame+obj_config.HA[m].skip),6);c.push(q)}g=[];g.ftime=obj_config.HA[m].ftime;g.frames=c;g.file=p;return g};e.scoreComparison=
function(c){if(c&&g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen){var h=e.GetItemType(c.s);if(19<=c.s.StdMode&&24>=c.s.StdMode||26==c.s.StdMode||15==c.s._childsStdMode){if(2==c.s.OverLap||3==c.s.OverLap){if(0==c.s.Expand1||7==c.s.Expand1||null==c.s.Expand1){for(h=30;36>h;h++)if(this.isShowArrow(h,c))return!0;return!1}return this.isShowArrow(29+c.s.Expand1,c)}if(4==c.s.OverLap||5==c.s.OverLap){if(0==c.s.Expand1||13==c.s.Expand1||null==c.s.Expand1){for(h=40;52>h;h++)if(this.isShowArrow(h,c))return!0;return!1}return this.isShowArrow(39+
c.s.Expand1,c)}if(6==c.s.OverLap||7==c.s.OverLap){if(0==c.s.Expand1){for(h=30;52>h;h++){if(this.isShowArrow(h,c))return!0;35==h&&(h=39)}return!1}if(7==c.s.Expand1){if(this.isShowArrow(47,c))return!0;for(h=30;36>h;h++)if(this.isShowArrow(h,c))return!0;return!1}if(13==c.s.Expand1){for(h=40;52>h;h++)if(this.isShowArrow(h,c))return!0;return!1}if(1<=c.s.Expand1&&6>=c.s.Expand1)return this.isShowArrow(29+c.s.Expand1,c)||this.isShowArrow(39+c.s.Expand1,c);if(8<=c.s.Expand1&&12>=c.s.Expand1)return this.isShowArrow(39+
c.s.Expand1,c)}}return h==U_ARMRINGR?this.isShowArrow(5,c)||this.isShowArrow(6,c):h==U_RINGL?this.isShowArrow(7,c)||this.isShowArrow(8,c):this.isShowArrow(h,c)}return!1};e.isShowArrow=function(c,h){if(g_ItemScoreRecord.boJobShowItemScore){var m=ObjectManage.findobject(playerID),g=0;m&&m.skin_feature&&(g=m.skin_feature.btGender);var l=THumFeature(m.data.fea.buffer).btJob;m=h.s.StdMode;if((10==h.s.Need||11==h.s.Need||12==h.s.Need||13==h.s.Need)&&l!=CodeUtil._LOWORD(h.s.NeedLevel)||(10==m||66==m)&&0!=
g||(11==m||67==m)&&1!=g)return!1;if(g_UserItemList[c]){if(1==l){g=h.s.MaxMC;var p=g_UserItemList[c].s.MaxMC;if(g>p)return!0;if(g<p)return!1}if(2==l){l=h.s.MaxSC;g=g_UserItemList[c].s.MaxSC;if(l>g)return!0;if(l<g)return!1}l=h.s.MaxDC;g=g_UserItemList[c].s.MaxDC;if(l>g)return!0;if(l<g)return!1;l=GameApi.GetItemScore(h);if((g=GameApi.GetItemScore(g_UserItemList[c]))||0==g){if(l>g)return!0;if(l<g)return!1}else return!0;if(0==m){if(h.s.NeedLevel>g_UserItemList[c].s.NeedLevel)return!0;if(h.s.NeedLevel<
g_UserItemList[c].s.NeedLevel)return!1}if(10==m){if(CodeUtil._HIWORD(h.s.NeedLevel)>CodeUtil._HIWORD(g_UserItemList[c].s.NeedLevel))return!0;if(CodeUtil._HIWORD(h.s.NeedLevel)<CodeUtil._HIWORD(g_UserItemList[c].s.NeedLevel))return!1}return h.s.Weight>g_UserItemList[c].s.Weight?!0:!1}return!0}l=GameApi.GetItemScore(h);g_UserItemList[c]&&(g=GameApi.GetItemScore(g_UserItemList[c]));return l==g?!1:g||0==g?l>g?!0:!1:!0};e.check_showItem=function(c){for(var h=0;h<c.length;h++){var m=c[h];if(m){for(var g=
[];-1!=m.indexOf("<")&&-1!=m.indexOf("\\")&&-1!=m.indexOf(">");){if(0!=m.indexOf("<")){var l=m.indexOf("<");g.push(m.substring(0,l));m=m.substring(l)}l=m.indexOf("<");var p=m.indexOf(">");-1!=l&&-1!=p?(g.push(m.substring(0,p+1)),m=m.substring(p+1)):g.push(m)}""!=m&&g.push(m);if(1<g.length){m=[];for(l=0;l<c.length;l++)if(l==h)for(p=0;p<g.length;p++)m.push(g[p]);else m.push(c[l]);c=m}}}return c};e.makeLable=function(c,h,m,g,l,p){p=[];for(var q,r=0;r<c.length;r++){var u=c[r];if(u)if(q=u.indexOf("</:"),
-1!=q){var v=new Laya.Image;v.bg=m;v.type=l;v.size(22,22);v.y-=5;u=u.substring(q+3,u.length-1);u=u.toLowerCase();v.skin="gameres/ui/chat_face/"+u+".png";v.name="face";p.push(v)}else if(-1!=u.indexOf("IMG:HTTP")){r=c.indexOf("IMG:HTTP");var w=c.substr(0,r),z=c.substr(r+4);u=new Laya.Sprite;u.bg=m;u.type=l;u.name="sprite";u.loadImage(z,this.getTextWidthByMeasure(18,A.text)+10,0,80,80);p.push(u);u.on(Laya.Event.CLICK,this,function(){var E=new Laya.Sprite;E.loadImage(z);E.name="openimage";E.pos(browser_width/
2-E.width/2,browser_height/2-E.height/2);E.zOrder=9999999;E.on(Laya.Event.CLICK,this,function(){E.removeSelf()});Laya.stage.addChild(E)})}else{var A=new Laya.Sprite;A.name="label";A.fontSize=18;A.type=l;A.bg=m;if(-1!=u.indexOf("|name")){A.text=u.substr(0,u.indexOf("|name"));w=A.text;0==w.indexOf("(!)")?w=w.substr(3):0==w.indexOf("\u7ec4\u961f\uff1a")?w=w.substr(3):-1!=w.indexOf("[Lv")&&(w=w.substr(0,A.text.indexOf("[")));if(g)A.on(Laya.Event.CLICK,this,function(){Laya.stage.event("get_chat_name",
[w])});A.graphics.fillText(A.text,0,0,"18px Arial",Get2RGB(parseInt(h)));A.width=this.getTextWidthByMeasure(18,A.text);A.height=18}else if(-1!=u.indexOf("<[")&&-1!=u.indexOf("]>")&&-1!=u.indexOf("\\")){A.name="item";v=u.split("\\");u=v[0].substr(2);v=v[1].substring(0,v[1].length-2);A.text=u;A.color=Get2RGB(parseInt(h));this.resetGraphicsTxtAttr(A);A.width=this.getTextWidthByMeasure(18,A.text);A.height=18;for(u=0;u<g_showChatItem.length;u++)if(v==g_showChatItem[u].MakeIndex){var C=g_showChatItem[u];
break}if(C&&(A.item=C,A.color="#fd1313",this.resetGraphicsTxtAttr(A),A.underline=!0,g))A.on(Laya.Event.CLICK,this,function(){e.NewShowItemsInf(C)})}else if(-1!=u.indexOf("{pos|")){A.name="pos";var B=u.split("|");if(B[3])var D=B[3].substr(0,B[3].length-1);D&&B[1]&&(A.text=D+B[1],this.resetGraphicsTxtAttr(A),A.width=this.getTextWidthByMeasure(18,A.text),A.height=18);0==B[1].indexOf("(")&&-1!=B[1].indexOf(",")&&B[1].indexOf(")")==B[1].length-1&&(B[1].substring(1,B[1].indexOf(",")),B[1].substring(B[1].indexOf(",")+
1,B[1].indexOf(")")));A.color="#fd1313";this.resetGraphicsTxtAttr(A);A.underline=!0;if(g)A.on(Laya.Event.CLICK,this,function(){if(!autohookstate&&0==B[1].indexOf("(")&&-1!=B[1].indexOf(",")&&B[1].indexOf(")")==B[1].length-1){var E=B[1].substring(1,B[1].indexOf(",")),F=B[1].substring(B[1].indexOf(",")+1,B[1].indexOf(")"));Mapdata.cur_id==B[2]?(E=new Laya.Point(parseInt(E),parseInt(F)),Movemodule.autoMove(E)):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u73a9\u5bb6\u4e0e\u4f60\u4e0d\u5728\u540c\u4e00\u5f20\u5730\u56fe!",
callfn:function(){}}])}})}else-1!=u.indexOf("{")&&-1!=u.indexOf("}")&&-1!=u.indexOf("|")?(v=u.substring(u.indexOf("{")+1,u.indexOf("|")),u=u.substring(u.indexOf("|")+1,u.indexOf("}")),-1!=u.indexOf(":")&&(u=u.split(":")),A.name="label",A.text=v,A.color=Get2RGB(parseInt(u[0]))):(A.name="label",A.text=u.replace(/\\/g,"/"),A.color=Get2RGB(parseInt(h))),A.width=this.getTextWidthByMeasure(18,A.text),A.height=18,this.resetGraphicsTxtAttr(A);p.push(A)}}return p};e.resetGraphicsTxtAttr=function(c){c.graphics.clear();
c.graphics.fillText(c.text,0,0,"18px Arial",c.color)};e.makeBigNum=function(c){1E5<=parseInt(c)&&1E8>parseInt(c)?c=parseInt(c/1E4)+"\u4e07":1E8<=parseInt(c)&&(c=parseInt(c/1E8)+"\u4ebf");return c};e.extractRemarkInfoNPC=function(c){var h="",m=0;if("string"!=typeof c||-1==c.indexOf("|"))return"";for(c=c.split("|")[1];":"!=c[m]&&!(m>=c.length);)h+=c[m],m++;return h};e.clearRemarkInfoNPC=function(c){return"string"!=typeof c?"":-1==c.indexOf("|")?c:c.split("|")[0]};e.dismantlingItemDescText=function(c){for(var h=
c.length,m=0,g="",l=[];null!=c[m]&&m<h;)g+=c[m],"\n"==c[m]&&(l.push(g),g=""),m++;g_ItemDesc=l};e.bubbleSort=function(c,h){h=void 0===h?1:h;var m=[];m=m.concat(c);for(var g=0;g<m.length;g++)for(var l=0;l<m.length;l++)switch(h){case 1:m[l]>m[l+1]&&(c=m[l+1],m[l+1]=m[l],m[l]=c);break;case 2:m[l]<m[l+1]&&(c=m[l+1],m[l+1]=m[l],m[l]=c)}return m};e.valueLimit=function(c,h,m){m=void 0===m?0:m;return null!=h&&void 0!=h&&c>h?h:null!=m&&void 0!=m&&c<m?m:c};e.getTxtWidthByContent=function(c,h){this.canvas2D||
(this.canvas2D=Laya.Browser.canvas.getContext("2d")||Laya.Browser.createElement("canvas").getContext("2d"));this.canvas2D.font=c+" Arial";return this.canvas2D.measureText(h).width};e.getTxtHeightByContent=function(c,h){this.canvas2D||(this.canvas2D=Laya.Browser.canvas.getContext("2d")||Laya.Browser.createElement("canvas").getContext("2d"));this.canvas2D.font=c+" Arial";return this.canvas2D.measureText(h).height};e.GetWearItemWeight=function(c){for(var h=0,m=0;m<g_UserItemList.length;m++)if(m!=c&&
1!=m&&2!=m){var g=g_UserItemList[m];g&&(h+=g.s.Weight)}return h};e.CheckEquipItem=function(c,h){var m=ObjectManage.findobject(playerID);if(!m||0>h&&!m&&!c||null==m.m_Abil||(10==c.s.StdMode||3==g_ClientConfig.btShowItemType&&66==c.s.StdMode)&&0!=m.skin_feature.btGender||(11==c.s.StdMode||3==g_ClientConfig.btShowItemType&&67==c.s.StdMode)&&1!=m.skin_feature.btGender||16==c.s.StdMode&&2==c.s.AniCount)return!1;if(h==U_WEAPON||h==U_RIGHTHAND){if(c.s.Weight>m.m_Abil.MaxHandWeight)return!1}else if(c.s.Weight+
this.GetWearItemWeight(h)>m.m_Abil.MaxWearWeight)return!1;switch(c.s.Need){case 0:case 18:case 22:m=0===g_rolelevel?m.m_Abil.Level:g_rolelevel;if(m>=c.s.NeedLevel)return!0;break;case 10:case 11:case 12:case 13:h=m.skin_feature.btJob;var g=CodeUtil._LOWORD(c.s.NeedLevel);if(h==g)switch(c.s.Need){case 10:m=0===g_rolelevel?m.m_Abil.Level:g_rolelevel;if(m>=CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 11:if(m.m_Abil.MaxDc>=CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 12:if(m.m_Abil.MaxMC>=
CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 13:if(m.m_Abil.MaxSC>=CodeUtil._HIWORD(c.s.NeedLevel))return!0}break;case 1:case 19:case 23:if(m.m_Abil.MaxDC>=c.s.NeedLevel)return!0;break;case 2:case 20:case 24:if(m.m_Abil.MaxMC>=c.s.NeedLevel)return!0;break;case 3:case 21:case 25:if(m.m_Abil.MaxSC>=c.s.NeedLevel)return!0;break;case 4:if(g_relevel>=c.s.NeedLevel)return!0;break;case 40:case 41:case 42:case 43:case 44:if(g_relevel>=CodeUtil._LOWORD(c.s.NeedLevel))switch(c.s.Need){case 40:m=0===
g_rolelevel?m.m_Abil.Level:g_rolelevel;if(m>=CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 41:if(m.m_Abil.MaxDC>=CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 42:if(m.m_Abil.MaxMC>=CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 43:if(m.m_Abil.MaxSC>=CodeUtil._HIWORD(c.s.NeedLevel))return!0;break;case 44:if(g_gamePopNum.value>=CodeUtil._HIWORD(c.s.NeedLevel))return!0}break;case 5:if(g_gamePopNum.value>=c.s.NeedLevel)return!0;break;case 6:if(""!=G_Guild_Name&&-1===G_Guild_Name.indexOf("[\u638c\u95e8\u4eba]"))return!0;
break;case 60:if(""!=G_Guild_Name&&-1!=G_Guild_Name.indexOf("[\u638c\u95e8\u4eba]"))return!0;break;case 7:if(U_WEAPON==m.skin_feature.btCaseltGuild)return!0;break;case 70:if(U_RIGHTHAND==m.skin_feature.btCaseltGuild)return!0;break;case 101:case 102:case 103:case 104:return!0}return!1};e.getEquipPosRL=function(c,h){if(h==U_RINGL||h==U_FASHIONRINGL){var m=g_UserItemList[h+1],g=g_UserItemList[h];m=m?GameApi.GetItemScore(m):0;g=g?GameApi.GetItemScore(g):0;if(c<=m&&c<=g||c>m&&c<=g||c>m&&c>g&&m<g)return h+
1;if(c<m&&c>g||c>m&&c>g&&m>g)return h}if(h==U_ARMRINGR||h==U_FASHIONARMRINGR)if(m=g_UserItemList[h-1],g=g_UserItemList[h],m=m?GameApi.GetItemScore(m):0,g=g?GameApi.GetItemScore(g):0,c<=m&&c<=g||c>m&&c<=g||c>m&&c>g&&m<g)return h-1;return h};e.CheckAutoItemList=function(c){var h=!0;if(c)for(var m=0;m<g_autoEquipItemList.length;m++)if(g_autoEquipItemList[m][0].MakeIndex==c.MakeIndex){h=!1;break}return h};e.AddAutoItemList=function(c,h){c&&this.CheckAutoItemList(c)&&(g_autoEquipItemList.push([c,h]),1===
g_autoEquipItemList.length&&(c=g_autoEquipItemList[0][0],h=g_autoEquipItemList[0][1],g_WaitItems.Items=c,g_WaitItems.Index=h,e.DelBagItems(c.MakeIndex),Sendmessage.sendTakeOnItem(h,c.MakeIndex,c.s.Name)))};e.SendAutoItemList=function(c){for(var h=0,m=0;m<g_autoEquipItemList.length;m++){var g=g_autoEquipItemList[m][0];if(g&&g.MakeIndex==c){h=m;break}}g_autoEquipItemList.splice(h,1);0<g_autoEquipItemList.length&&(c=g_autoEquipItemList[0][0],h=g_autoEquipItemList[0][1],m=GameApi.GetItemScore(c),0<m?
(h=e.getEquipPosRL(m,h),g_autoEquipItemList[0][1]=h,g=g_UserItemList[h],!g||g&&GameApi.GetItemScore(g)<m?(g_WaitItems.Items=c,g_WaitItems.Index=h,e.DelBagItems(c.MakeIndex),Sendmessage.sendTakeOnItem(h,c.MakeIndex,c.s.Name)):e.SendAutoItemList(c.MakeIndex)):e.SendAutoItemList(c.MakeIndex))};e.PlayerAutoHandleItem=function(c,h){if(c)switch(h){case 0:if(h=GameApi.GetItemScore(c),0<h){var m=e.GetItemType(c.s);if(!(0>m)&&this.CheckEquipItem(c,m)&&(m=e.getEquipPosRL(h,m),this.scoreComparison(c))){var g=
{PlayerEquipItem:function(q,r,u,v,w){v&&(u=e.getEquipPosRL(q,u),e.scoreComparison(r)&&e.AddAutoItemList(r,u),Laya.timer.clear(w,w.PlayerEquipItem),Laya.timer.clear(w,w.countDown),v.removeSelf())},closeAutoItem:function(q,r){q&&(Laya.timer.clear(r,r.PlayerEquipItem),Laya.timer.clear(r,r.countDown),q.removeSelf())},countDown:function(q,r){q&&(q.countTime=0<q.countTime?q.countTime-1:0,q.btn_use.label="\u4f7f\u7528("+q.countTime+")")}};if(GlobalCfglist.autoWear){var l=new AutoItemUI;l.right=200;l.bottom=
200;l.zOrder=9998;Laya.stage.addChild(l);l.countTime=5;l.lab_itemName.text=c.s.Name;e.loadImg(c.s.Looks,"items",function(q){l.img_item.skin=q});var p=l.img_itembg.getChildByName("effect");p&&Animationmodule.removeAni(p);this.ShowItemeffect(l.img_itembg,c);l.img_itembg.on(Laya.Event.CLICK,this,this.NewShowItemsInf,[c]);l.btn_use.on(Laya.Event.CLICK,g,g.PlayerEquipItem,[h,c,m,l,g]);l.btn_close.on(Laya.Event.CLICK,g,g.closeAutoItem,[l,g]);Laya.timer.once(5E3,g,g.PlayerEquipItem,[h,c,m,l,g]);Laya.timer.loop(1E3,
g,g.countDown,[l,g])}}}}};e.HeroAutoHandleItem=function(c,h){if(c)switch(h){case 0:GameApi.GetItemScore(c)}};e.autoSetDrugItem=function(c){if(null!=c&&3>=c.s.StdMode&&"\u4fee\u590d\u795e\u6c34"!=c.s.Name){for(var h=!0,m=0;m<g_DrugItemsList.length;m++)null!=g_DrugItemsList[m]&&c.s.Name==g_DrugItemsList[m].s.Name&&(h=!1);if(h){for(m=0;m<g_DrugItemsList.length;m++)if(null==g_DrugItemsList[m]){g_DrugItemsList[m]=c;Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",
[m]);break}c=[];for(h=0;h<g_DrugItemsList.length;++h)m=g_DrugItemsList[h],null!=m?c.push({looks:m.s.Looks,mode:m.s.StdMode}):c.push({looks:null,mode:null});c=JSON.stringify(c);e.setSaveData("druglist",c);Laya.stage.event("Show_Bag_Item_ico")}}};e.setCanAddTxtStroke=function(c){c.stroke=2;c.strokeColor="#030303"};e.setTxtFixedPos=function(c,h,m,g,l){if(0<c._childs.length){var p=c._childs[0];g=isNaN(g)?c.x:g;c=isNaN(l)?c.y:l;p.pos(-g+h-p.width-3,-c+(m?m:h)-p.height-3)}};e.checkEx=function(c){return c?
0==c.indexOf("graphics/")?c:"data/"+c:"data/"};e.getSpaceTime=function(c){if(g_initTimes){var h=Laya.Browser.now()-g_initTimes;g_initTimes=Laya.Browser.now();c?console.log(c+"\u95f4\u9694\u65f6\u95f4\u4e3a"+h+"\u6beb\u79d2\uff01\uff01"):console.log("\u95f4\u9694\u65f6\u95f4\u4e3a"+h+"\u6beb\u79d2\uff01\uff01")}else console.log("\u5f00\u59cb\u8ba1\u7b97\u95f4\u9694\u503c"),console.log("\u521d\u59cb\u5316\u65f6\u95f4\u95f4\u9694\u503c"),g_initTimes=Laya.Browser.now();return h};e.clearMapItemCacheAssets=
function(){for(var c in g_item_clearlist)c&&(this.clearResByUrl(c),delete g_item_clearlist[c])};e.addChildToGameSceneMapLayer=function(c,h,m){if(h=h?h:this.InstanceOfMem(GameSceneUI).maplayer)h.addChild(c),m&&(c.zOrder=m)};e.getAngleByRadian=function(c){return 0<c?180*c/Math.PI:180*(2*Math.PI+c)/Math.PI};e.getMoveDirNumberByAngle=function(c){return 247.5<c&&292.5>=c?0:292.5<c&&337.5>=c?1:22.5<c&&67.5>=c?3:67.5<c&&112.5>=c?4:112.5<c&&157.5>=c?5:157.5<c&&202.5>=c?6:202.5<c&&247.5>=c?7:2};e.updateNeiGuanHair=
function(c,h,m){c.removeChildren();h=this.getNeiGuanHairResNum(h,m);e.loadImg(h,"prguse",function(g,l){l=Offsetmodule.getoffsetfromatlas(l.atlas,l.img);var p=new Laya.Image;p.skin=g;p.pos(-82+l.x,8+l.y);c.addChild(p)});c.y=1==g_GameType?35:39};e.getNeiGuanHairResNum=function(c,h){switch(c){case 0:return 0===h?440:441;case 1:return 0===h?442:443;case 2:return 0===h?444:445;case 3:return 0===h?446:447}};e.createZipByTempData=function(c,h,m){m||(m="application/octet-stream");var g=document.createElement("a");
h=new Blob([h],{type:m});g.href=window.URL.createObjectURL(h);g.download=c;g.click()};e.getName=function(c,h,m){if(2==c)return m[0];-1!=h.indexOf("\n")&&(c=h.split("\n"),h=c[c.length-1]);if(h)return h};e.getImageSetNameByPath=function(c){var h="";if(g_getAtlas[c])return g_getAtlas[c];var m=c.split("/"),g=m.length;if(2>g)return h;for(var l=g_atlasRule,p=0;p<g-1;){if("undefined"==typeof l[m[p]])return h;l=l[m[p]];p++}m=m[g-1];g=parseInt(m);for(rangeSlice in l){var q=rangeSlice.indexOf("-");p=parseInt(rangeSlice.substr(0,
q));q=parseInt(rangeSlice.substr(q+1,rangeSlice.length));if(g>=p&&g<=q){h=l[rangeSlice];imageSetIndexStr=("000000"+(Math.floor((g-p)/h)*h+p).toString()).slice(-6);h=c.replace(m,imageSetIndexStr)+".atlas";break}}return g_getAtlas[c]=h};e.loadImg=function(c,h,m,g){var l="",p=c;1E4<=c&&(l=Math.floor(c/1E4),p=c%1E4);p=("000000"+p).slice(-6);c=e.getImageSetNameByPath("data/"+h+l+"/"+p);h=c.replace(".atlas","/"+p+".png");p={atlas:c,img:p};""!=c&&""!=h?Laya.loader.load(c,Laya.Handler.create(this,m,[h,p]),
null,Laya.Loader.ATLAS):g&&m()};e.loadImgEx=function(c,h){for(var m=[],g=[],l=0;l<c.length;l++){var p=c[l].split("/"),q=e.getImageSetNameByPath(c[l]);""!=q&&m.push(q);p[2]&&(p=q.replace(".atlas","/"+p[2]+".png"),g.push(p))}Laya.loader.load(m,Laya.Handler.create(this,h,[g]),null,Laya.Loader.ATLAS)};e.getFile=function(c){1E4<=c&&(file=Math.floor(c/1E4));return""};e.convertSecondToMinutes=function(c,h){h=void 0===h?0:h;c/=60;return 0==h?Math.round(c):parseFloat(c.toFixed(h))};e.MaxBagItems=function(){return g_ClientConfig.boExtendDB?
MAXBAGITEM+g_extendBagItemCount:MAXBAGITEM};e.LimitMaxBagItems=function(){return g_ClientConfig.boExtendDB?MAXBAGITEM+g_ClientConfig.maxExtendItemCount:MAXBAGITEM};e.UpdateExtendBagItemCount=function(){var c=e.InstanceOfMem(NewBagUI);c&&c.Bag_Refresh()};e.intervalFrameDeal=function(c,h,m){var g=$jscomp.getRestArguments.apply(3,arguments);if(1==g_intervalDeal)Laya.timer.once(c,h,m);else m.apply(h,g)};e.FindSoundByID=function(){};e.cutChatInfoStr=function(c,h){};e.getMyObject=function(){return ObjectManage.findobject(playerID)};
e.getCatcherInList=function(c){if(!(1>catcherList.length))for(var h=0;h<catcherList.length;h++)if(catcherList[h].data.record===c)return catcherList[h]};e.getGolbalPointX=function(c){var h=new Laya.Point;h.setTo(c.x,c.y);return c.localToGlobal(h).x};e.isYuDanShuang=function(c){if(c)return-1<c.txt_name.text.indexOf("\u96e8\u53cc\u5355")};e.getSpaceTime1=function(c){if(g_newInitTimes){var h=Laya.Browser.now()-g_newInitTimes;g_newInitTimes=Laya.Browser.now();c?console.log(c+"\u95f4\u9694\u65f6\u95f4\u4e3a"+
h+"\u6beb\u79d2\uff01\uff01"):console.log("\u95f4\u9694\u65f6\u95f4\u4e3a"+h+"\u6beb\u79d2\uff01\uff01")}else console.log("\u5f00\u59cb\u8ba1\u7b97\u95f4\u9694\u503c"),console.log("\u521d\u59cb\u5316\u65f6\u95f4\u95f4\u9694\u503c"),g_newInitTimes=Laya.Browser.now();return h};e.onShowTip=function(c,h,m,g){Laya.stage.event("show_alert_dlg",[{type:void 0===h?1:h,txt:c,callfn:m,callcancelfun:g}])};e.replacePlaceholder=function(c,h){return c.replace("|",h)};e.openWin=function(c,h,m,g){c||(c=new m,h.addChild(c),
c.x=(h.width-c.width)/2,c.y=(h.height-c.height)/2,c.visible=!1);c.visible=g?!c.visible:!0;return c};e.trimSpecialUnicode=function(c){for(var h,m="",g=0;g<c.length;g++)h=c[g].charCodeAt(0).toString(10),m=59299==h?m+" ":m+c[g];return m};e.getPureName=function(c){return c&&c.txt_name&&c.txt_name.lines&&0!=c.txt_name.lines.length?c.txt_name.lines[c.txt_name.lines.length-1]:""};e.showOperationBtnsSort=function(c,h){for(var m,g=[],l=h.length,p=0;p<l;p++)m=h[p],c.length<l&&c.push({x:m.x,y:m.y}),m.visible&&
g.push(m);for(h=0;h<g.length;h++)g[h].x=c[h].x,g[h].y=c[h].y;return g.length};e.getCurrencyByGoldType=function(c){switch(c){case 1:return g_GameCionNum?g_GameCionNum.key:"\u91d1\u5e01";case 2:return g_bindCionNum?g_bindCionNum.key:"\u7ed1\u5b9a\u91d1\u5e01";case 3:return g_GameGoldNum?g_GameGoldNum.key:"\u5143\u5b9d";case 4:return g_bindGoldNum?g_bindGoldNum.key:"\u7ed1\u5b9a\u5143\u5b9d";case 5:return g_GamePointNum?g_GamePointNum.key:"\u6e38\u620f\u70b9";case 6:return g_nGameDiamond?g_nGameDiamond.key:
"\u91d1\u521a\u77f3";case 7:return g_nGameGird?g_nGameGird.key:"\u7075\u7b26";case 8:return g_gameGlory?g_gameGlory.key:"\u8363\u8a89\u70b9";case 9:return g_gamePopNum?g_gamePopNum.key:"\u58f0\u671b\u70b9"}};e.setCurrencyKey=function(c){!c||1>c.length||(g_GameCionNum.key=c[0],g_bindCionNum.key=c[1],g_GameGoldNum.key=c[2],g_bindGoldNum.key=c[3],g_GamePointNum.key=c[4],g_nGameDiamond.key=c[5],g_nGameGird.key=c[6],g_gameGlory.key=c[7],g_gamePopNum.key=c[8])};e.isRectOverlap=function(c,h){return!(c.right<
h.left||c.bottom>h.top||h.right<c.left||h.bottom>h.top)};e.checkPosPointIsTrue=function(c,h){return 2>c.distance(h.x,h.y)};e.checkOpenAuctionHouseHandle=function(c,h){if(Objectcontrol.self_obj.m_Abil.Level<c||g_relevel<h)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e0a\u67b6\u6761\u4ef6\u4e3a\u7b49\u7ea7\u4e0d\u5c0f\u4e8e"+c+"\u7ea7,\u8f6c\u751f\u7b49\u7ea7\u4e0d\u5c0f\u4e8e"+h+"\u7ea7"}]);else return!0};e.getCurrencyNumByGoldType=function(c){switch(c){case 1:return g_GameCionNum?g_GameCionNum.value:
0;case 2:return g_bindCionNum?g_bindCionNum.value:0;case 3:return g_GameGoldNum?g_GameGoldNum.value:0;case 4:return g_bindGoldNum?g_bindGoldNum.value:0;case 5:return g_GamePointNum?g_GamePointNum.value:0;case 6:return g_nGameDiamond?g_nGameDiamond.value:0;case 7:return g_nGameGird?g_nGameGird.value:0;case 8:return g_gameGlory?g_gameGlory.value:0;case 9:return g_gamePopNum?g_gamePopNum.value:0}};e.getCurrencyIconSkinByGoldType=function(c){if(!g_GameConfigWEB.h5DIYGolds)return"";switch(c){case 1:var h=
"g_GameCionNum";break;case 2:h="g_bindCionNum";break;case 3:h="g_GameGoldNum";break;case 4:h="g_bindGoldNum";break;case 5:h="g_GamePointNum";break;case 6:h="g_nGameDiamond";break;case 7:h="g_nGameGird";break;case 8:h="g_gameGlory";break;case 9:h="g_gamePopNum"}for(c=0;c<g_GameConfigWEB.h5DIYGolds.length;c++)if(info=g_GameConfigWEB.h5DIYGolds[c],info.varName==h)return info.showUI;return""};e.getItemTypeNameByStdMode=function(c,h){switch(c){case 4:return 0==h?"\u6218\u58eb":1==h?"\u6cd5\u5e08":"\u9053\u58eb";
case 5:case 6:return"\u6b66\u5668";case 10:return"\u7537\u6027\u8863\u670d";case 11:return"\u5973\u6027\u8863\u670d";case 15:return"\u5934\u76d4";case 16:return"\u6597\u7b20";case 19:case 20:case 21:return"\u9879\u94fe";case 22:case 23:return"\u6212\u6307";case 24:case 26:return"\u624b\u956f";case 29:case 30:return"\u52cb\u7ae0";case 78:return"\u9a6c\u724c";case 48:return"\u76fe\u724c";case 49:return"\u805a\u7075\u73e0";case 53:case 63:return"\u5b9d\u77f3";case 62:case 28:return"\u978b\u5b50";case 27:case 64:return"\u8170\u5e26";
case 65:return"\u519b\u9f13";case 66:case 67:case 68:case 69:case 75:case 76:case 77:case 178:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:return"\u65f6\u88c5"}};e.getStdModeByName=function(c,h){switch(c){case "\u6b66\u5668":return[5,6];case "\u7537\u6027\u8863\u670d":return[10];case "\u5973\u6027\u8863\u670d":return[11];case "\u5934\u76d4":return[15];case "\u6597\u7b20":return[16];case "\u9879\u94fe":return[19,20,21];case "\u6212\u6307":return[22,23];case "\u624b\u956f":return[24,
26];case "\u52cb\u7ae0":return[29,30];case "\u9a6c\u724c":return[78];case "\u76fe\u724c":return[48];case "\u805a\u7075\u73e0":return[49];case "\u5b9d\u77f3":return[53,63];case "\u978b\u5b50":return[62,28];case "\u8170\u5e26":return[64,27];case "\u519b\u9f13":return[65];case "\u65f6\u88c5":return[178,66,67,68,69,75,76,77,79,80,81,82,83,84,85,86,87,88,89];case "\u9053\u58eb":return{stdmode:4,job:2};case "\u6cd5\u5e08":return{stdmode:4,job:1};case "\u6218\u58eb":return{stdmode:4,job:0}}};e.GetDateTimeFromDelphi8Bytes=
function(c){for(var h=new ArrayBuffer(8),m=new Uint8Array(h),g=0;8>g;g++)m[g]=c[g];c=new Float64Array(h);return parseInt(864E5*(c[0]-25569)-288E5)};e.auctionLastTime=function(c){var h=g_serverRunixTime&&0<g_serverRunixTime?g_serverRunixTime:Date.now();var m=Math.floor((h-c)/1E3);return m<g_customItemAttr.AuctionShelvesTimeLimited?(m=g_customItemAttr.AuctionShelvesTimeLimited-m,c=Math.floor(m/3600),h=Math.floor(m%3600/60),m%=60,(10>c?"0"+c:c)+":"+(10>h?"0"+h:h)+":"+(10>m?"0"+m:m)):"00:00:00"};e.aucitonMoneyParse=
function(c){return 1E8<=c?(c=(c/1E8).toFixed(1),c+"\u4ebf"):1E4<=c?(c=(c/1E4).toFixed(1),1E4<=c&&(c=9999),c+"\u4e07"):c+""};e.auctionCountDownHandle=function(c){timeArr=c.split(":");c=parseInt(timeArr[0]);var h=parseInt(timeArr[1]);var m=parseInt(timeArr[2]);if(0<m)return--m,(10>c?"0"+c:c)+":"+(10>h?"0"+h:h)+":"+(10>m?"0"+m:m);m=59;if(0<h)return--h,(10>c?"0"+c:c)+":"+(10>h?"0"+h:h)+":"+(10>m?"0"+m:m);h=59;return 0<c?(--c,(10>c?"0"+c:c)+":"+(10>h?"0"+h:h)+":"+(10>m?"0"+m:m)):"00:00:00"};e.checkMaterialItemCanBeStacked=
function(c,h){if(c&&c.s)return(-1<[17,18,40,41,42].indexOf(c.s.StdMode)||31==c.s.StdMode&&-1!=c.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<c.s.Reserved&&1<c.s.Reserved1&&(h?0<=c.Dura:0<c.Dura)};e.checkDrugItemCanBeStacked=function(c,h){if(c&&c.s)return 0==c.s.StdMode&&5==c.s.Source&&(h?0<=c.Dura:0<c.Dura)};e.checkItemCanBreakUp=function(c){return this.checkMaterialItemCanBeStacked(c)||this.checkDrugItemCanBeStacked(c)};e.setDevicesValue=function(){g_Termial=window.conch?3:this.isBoxEnvironment()?
4:1};e.isBoxEnvironment=function(){if(window.location&&window.location.href){var c=window.location.href;if(""!=c)return-1<c.indexOf("box=true")}};e.isSameDir=function(c,h){switch(c){case 0:return-1<[7,0,1].indexOf(h);case 1:return-1<[0,1,2].indexOf(h);case 2:return-1<[1,2,3].indexOf(h);case 3:return-1<[2,3,4].indexOf(h);case 4:return-1<[3,4,5].indexOf(h);case 5:return-1<[4,5,6].indexOf(h);case 6:return-1<[5,6,7].indexOf(h);case 7:return-1<[6,7,0].indexOf(h)}return!1};e.isMultiple=function(c){var h=
c.s.StdMode;return(17==h||18==h||41==h||40==h||42==h||31==h&&-1!=c.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<c.s.Reserved&&0<=c.Dura||0==h&&5==c.s.Source&&0<=c.Dura};e.getPureGuildName=function(c){return c&&c.grildname?c.grildname.split("/")[0]:""};e.isUseAppr=function(c){for(var h=0;h<g_diymonsterlist.length;h++){var m=g_diymonsterlist[h];if(m&&m.MonAppr==c)return 0==m.ActionFileIdx}};e.getWidth_count=0;e.getTextWidthByMeasure=function(c,h){if(!h||!c)return 0;if(!this.getWidth_lab||2E3<=e.getWidth_count)e.getWidth_count=
0,this.getWidth_lab=null,this.getWidth_lab=new Laya.Label;c!==this.getWidth_lab.fontSize&&(this.getWidth_lab.fontSize=c);e.getWidth_count++;this.getWidth_lab.text=h;return this.getWidth_lab.width};e.creatIframe=function(c){var h=Laya.Browser.document.createElement("iframe");h.width=browser_width;h.height=browser_height;h.id="cqb";h.style.position="absolute";h.src=c;Laya.Browser.document.body.appendChild(h)};e.cutoffset=function(c){for(var h=!1,m=0;m<g_cutoffset.length;m++)if("data\\"+c==g_cutoffset[m]){h=
!0;break}return h};e.checkObjDirContrary=function(c,h){return isNaN(c)||isNaN(h)?!1:4==Math.abs(c-h)?!0:!1};e.checkAttackDirObjOnRange=function(c,h,m,g){var l=h.x,p=m.x;h=h.y;m=m.y;switch(c){case 0:return l==p&&h-g<=m&&m<h;case 1:return l<p&&p<=l+g&&h-g<=m&&m<h;case 2:return h==m&&l<p&&p<=l+g;case 3:return l<p&&p<=l+g&&h<m&&m<=h+g;case 4:return l==p&&h<m&&m<=h+g;case 5:return p<l&&p>=l-g&&h<m&&m<=h+g;case 6:return h==m&&p<l&&p>=l-g;case 7:return p<l&&p>=l-g&&h-g<=m&&m<h}return!1};e.drawerEffect=function(c,
h,m){c&&Laya.Tween.to(c,h,void 0===m?300:m)};e.reLogin=function(){var c=e.InstanceOfMem(GameSceneUI);c&&(Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,c,c.onSvrConnect),c.mouseEnabled=!1);c=new Laya.Image("gameres/png/img_mask.png");c.width=Laya.stage.width;c.height=Laya.stage.height;c.mouseThrough=!1;c.name="relinkMask";Laya.stage.addChild(c);c.zOrder=999999999;var h=Laya.stage.getChildByName("disconnection");null==h&&(h=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),h=Animationmodule.playframe(!1,
c,"gameres/animation/disconnection/",1,8,100,!0,!1,h),h.name="disconnection",h.zOrder=999999);Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,reEntry,reEntry.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,reEntry,reEntry.onSvrConnect);g_isReLog=!0;Sendmessage.clsocket.setIPPortCount();Sendmessage.clsocket.End();reEntry.reqservering=!0;reEntry.linkLoginSvr()};e.GetTypeCount=function(c){for(var h=0,m=0;m<g_BagItemsList.length;m++){var g=g_BagItemsList[m];null!=g&&g.s.StdMode==c.s.StdMode&&g.s.AniCount==
c.s.AniCount&&g.s.Shape==c.s.Shape&&g.s.AC==c.s.AC&&g.s.MAC==c.s.MAC&&(h=0==c.s.StdMode&&5==c.s.Source&&0<c.DuraMax?h+g_BagItemsList[m].Dura:2!=c.s.StdMode||5!=c.s.Shape&&3!=c.s.Shape?h+1:h+Math.ceil(g_BagItemsList[m].Dura/100))}return h};e.parseQRCodeByLink=function(c,h){var m=new QRCode(-1,QRErrorCorrectLevel.H);m.addData(c.linkStr);m.make();var g=Math.floor(c.lengthNum/m.moduleCount),l=this;setTimeout(function(){for(var p=new Laya.Sprite,q=new Laya.Sprite,r=0;r<m.moduleCount;r++)for(var u=0;u<
m.moduleCount;u++)m.isDark(r,u)&&(q.graphics.drawRect(u*g,r*g,g,g,"#ffffff"),p.addChild(q));h.addChildAt(p,0);p.x=c.xPos;p.y=c.yPos;p.width=p.height=c.lengthNum;p.on(Laya.Event.CLICK,l,e.onClickQrCodeHandler,[c.linkStr]);p.on(Laya.Event.REMOVED,l,e.removeQrCode,[p])},200)};e.onClickQrCodeHandler=function(c){c&&sendtonative("onQrCodeResult",JSON.stringify({data:c}))};e.removeQrCode=function(c){c&&(c.off(Laya.Event.REMOVED,this,e.removeQrCode,[c]),c.off(Laya.Event.CLICK,this,e.onClickQrCodeHandler))};
e.isConsumableItem=function(c){if(void 0!=c&&null!=c&&!(3<c.s.StdMode)&&"\u4fee\u590d\u795e\u6c34"!=c.s.Name)return!0};e.isIosAndOtherSDK=function(){return!Laya.Browser.onAndroid&&g_serverconfigtxt&&g_serverconfigtxt.brapp_id};e.getSaveData=function(c){return e.isIOSAndQSY?e.getSettingDataByName(c):Laya.LocalStorage.getItem(c)};e.setSaveData=function(c,h){return e.isIOSAndQSY?e.setSettingDataInIOS(c,h):Laya.LocalStorage.setItem(c,h)};e.settingData;e.isIOSAndQSY;e.addMessageListen=function(){window&&
window.addEventListener("message",function(c){"http://h5.qsyyx.com"==c.origin&&c.data&&(e.settingData=c.data)})};e.getSettingDataByName=function(c){if(c&&e.settingData&&e.settingData!={})for(var h=e.settingData,m=0,g=h.length;m<g;m++){var l=h[m];if(l.keyName==c)return l.value}};e.getSettingDataInIOS=function(c){if(window&&window.parent){var h={type:"get"};h.keyName=c;window.parent.postMessage(h,"*")}};e.setSettingDataInIOS=function(c,h){if(window&&window.parent){for(var m=e.settingData&&0<e.settingData.length?
e.settingData:[],g=!1,l=0,p=m.length;l<p;l++){var q=m[l];if(q.keyName==c){g=!0;q.value=h;break}}g||m.push({keyName:c,value:h});window.parent.postMessage({type:"set",data:m},"*")}};e.addTipMask=function(c){if(c&&g_isTuLongShengYu){var h=c.getChildByName("tipMask");if(h)h.visible=!0;else{h=new Laya.Image;h.skin="gameres/ui/tipMask.png";h.name="tipMask";h.x=-c.x;h.y=-c.y;h.width=Laya.stage.width;h.height=Laya.stage.height;if(c.close)h.on(Laya.Event.CLICK,c,c.close);c.addChildAt(h,0)}}};e.removeTipMask=
function(c){c&&g_isTuLongShengYu&&(c=c.getChildByName("tipMask"))&&(c.visible=!1)};e.onAppPause=function(){Laya.SoundManager.setMusicVolume(0);Laya.SoundManager.setSoundVolume(0)};e.onAppResume=function(){Laya.SoundManager.setMusicVolume(1);Laya.SoundManager.setSoundVolume(1)};e.maxBag=function(){if(!g_BagItemsList[g_BagItemsList.length-1])return!1;for(var c=0;c<g_BagItemsList.length;c++)if(!g_BagItemsList[c])return!1;return!0};e.setStageVolumeAndShow=function(){Laya.SoundManager.soundVolume=1;Mapmodule.clearMapImage();
Mapmodule.refreshMapRes();Objectcontrol&&Objectcontrol.self_obj&&Objectcontrol.self_obj.grid&&Mapmodule.drawMap(Objectcontrol.self_obj.grid.x,Objectcontrol.self_obj.grid.y);for(var c in Laya.stage._childs){var h=Laya.stage._childs[c];h.visible=h.noOpenUI&&1==h.noOpenUI?!1:!0;h.noOpenUI=null}};e.hideIndex=[];e.hideName=[];e.setStageVolumeAndHide=function(){Laya.SoundManager.soundVolume=0;for(var c in Laya.stage._childs){var h=Laya.stage._childs[c];h.visible||(h.noOpenUI=!0);h.visible=!1}};return e}(),
ToolsUtil=function(){function e(){}e.isJson=function(f){if("string"==typeof f)try{if("#"==f[0])return!1;if(-1<f.indexOf("{"))return JSON.parse(f),!0}catch(a){console.log(a)}return!1};return e}();function CreateRole(e,f,a,b){e=new object;e.create(1,f,1,4,"stand");null!=a&&e&&(f=new object,f.create(2,a,1,4,"stand"),f.zOrder=2,e.addChild(f),e.bind(f));null!=b&&e&&(a=new object,a.create(3,b,1,4,"stand"),a.zOrder=2,e.addChild(a),e.bind(a));return e}
function ChangeProp(e,f,a,b,d){null!=a&&e.InitPlayerframedata(a);for(f=0;f<e.bind_list.length;++f)a=e.bind_list[f],0==f&&b?a.InitPlayerframedata(b):1==f&&d&&a.InitPlayerframedata(d);e.playAni(null,"stand",!0)}function transformstruct(e,f){Laya.loader.load(e,Laya.Handler.create(this,onanalyzetxt,[e,f]),null,Laya.Loader.TEXT)}
function hasArraydata(e){for(var f="",a="",b=!1,d=0;d<e.length&&"]"!=e[d];++d){if("["==e[d]){b=!0;continue}b?a+=e[d]:f+=e[d]}return b?(e=[],e.name=f,e.num=parseInt(a),e):null}
function printoffer(e,f,a,b,d){var n=hasArraydata(a);e=Math.min(e,4);0!=f%e&&(f+=e-1);a=a.substring(0,a.length-1);n&&(a=n.name,d=8);switch(d){case 1:console.log("      ","obj.",a," = (buff[",f,"] + (buff[",f+1,"] << 8)  + (buff[",f+2,"] << 16)  + (buff[",f+3,"] << 24)) >>>\u30000;","      ",b);break;case 2:console.log("      ","obj.",a," = (buff[",f,"] + (buff[",f+1,"] << 8)  + (buff[",f+2,"] << 16)  + (buff[",f+3,"] << 24));","      ",b);break;case 3:console.log("      ","obj.",a," = (buff[",f,"] + (buff[",
f+1,"] << 8)) >>> 0;","      ",b);break;case 4:console.log("      ","obj.",a," = (buff[",f,"] + (buff[",f+1,"] << 8));","      ",b);break;case 5:console.log("      ","obj.",a," = parseInt(buff[",f,"]);","      ",b);break;case 6:console.log("      ","obj.",a," = parseInt(buff[",f,"]) >>> 0;","      ",b);break;case 7:console.log("      ","obj.",a," = parseInt(buff[",f,"]);","      ",b);break;case 8:console.log("      ","obj.",a," = byteArray2String( buff.slice(",f,",",f+n.num-1,") ,",n.num,");","      ",
b)}return f=n?f+n.num:f+e}function discernType(e,f,a,b){return"int"==e?printoffer(4,b,f,a,2):"bool"==e?printoffer(1,b,f,a,5):"char"==e?printoffer(1,b,f,a,7):"short"==e?printoffer(2,b,f,a,4):"unsigned char"==e?printoffer(1,b,f,a,6):"unsigned short"==e?printoffer(2,b,f,a,3):"unsigned int"==e?printoffer(4,b,f,a,1):0}
function onanalyzetxt(e,f){var a=Laya.loader.getRes(e);if(a){e=a.split("\n");console.log("\n");console.log("\n");console.log("function ",f,"(buff)");console.log("{");console.log("   var obj = new Object;");f=0;for(var b=2;b<e.length-1;++b){a=e[b].split("\t");for(var d=[],n=0;n<a.length;++n)""!=a[n]&&"\r"!=a[n]&&d.push(a[n]);for(a=0;a<d.length;a+=3)f=discernType(d[a],d[a+1],d[a+2],f)}console.log("   return obj; ");console.log("};");console.log("\n");console.log("\n")}}
var saveAs=saveAs||function(e){if(!("undefined"===typeof e||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var f=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in f,b=/constructor/i.test(e.HTMLElement)||e.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),n=function(l){(e.setImmediate||e.setTimeout)(function(){throw l;},0)},c=function(l){setTimeout(function(){"string"===typeof l?(e.URL||e.webkitURL||e).revokeObjectURL(l):l.remove()},4E4)},h=function(l){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?
new Blob([String.fromCharCode(65279),l],{type:l.type}):l},m=function(l,p,q){q||(l=h(l));var r=this,u="application/octet-stream"===l.type,v=function(){var z=["writestart","progress","write","writeend"];z=[].concat(z);for(var A=z.length;A--;){var C=r["on"+z[A]];if("function"===typeof C)try{C.call(r,r)}catch(B){n(B)}}};r.readyState=r.INIT;if(a){var w=(e.URL||e.webkitURL||e).createObjectURL(l);setTimeout(function(){f.href=w;f.download=p;var z=new MouseEvent("click");f.dispatchEvent(z);v();c(w);r.readyState=
r.DONE})}else(function(){if((d||u&&b)&&e.FileReader){var z=new FileReader;z.onloadend=function(){var A=d?z.result:z.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(A,"_blank")||(e.location.href=A);r.readyState=r.DONE;v()};z.readAsDataURL(l);r.readyState=r.INIT}else w||(w=(e.URL||e.webkitURL||e).createObjectURL(l)),u?e.location.href=w:e.open(w,"_blank")||(e.location.href=w),r.readyState=r.DONE,v(),c(w)})()},g=m.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(l,
p,q){p=p||l.name||"download";q||(l=h(l));return navigator.msSaveOrOpenBlob(l,p)};g.abort=function(){};g.readyState=g.INIT=0;g.WRITING=1;g.DONE=2;g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null;return function(l,p,q){return new m(l,p||l.name||"download",q)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});
function changeOrientation(e){var f=document.documentElement.clientWidth,a=document.documentElement.clientHeight;f<a&&(console.log(f+" "+a),e.width(a),e.height(f),e.css("top",(a-f)/2),e.css("left",-((a-f)/2)),e.css("transform","rotate(90deg)"),e.css("transform-origin","50% 50%"));var b="onorientationchange"in window?"orientationchange":"resize";window.addEventListener(b,function(){console.log(b);setTimeout(function(){var d=document.documentElement.clientWidth,n=document.documentElement.clientHeight;
d>n?(e.width(d),e.height(n),e.css("top",0),e.css("left",0),e.css("transform","none")):(e.width(n),e.height(d),e.css("top",(n-d)/2),e.css("left",-((n-d)/2)),e.css("transform","rotate(90deg)"));e.css("transform-origin","50% 50%")},300)},!1)}
(function(){function e(){e.__super.call(this);this.noticeIcon=this.ui=null;this.lastShowMailIdx=this.onSelectIndex=-1;this.newMailCount=0;this.Init()}Laya.class(e,"mail",laya.display.Sprite);var f=e.prototype;f.Init=function(){Laya.stage.on("get_user_mail",this,this.getUserMail);Laya.stage.on("get_mail_content",this,this.updateMailContent);Laya.stage.on("update_mail_state",this,this.updateMailState);Laya.stage.on("delete_all_mail",this,this.deleteAllMail);Laya.stage.on("add_new_mail",this,this.addNewMail);
Laya.stage.on("new_mail_notice",this,this.newMailNotice);g_mailLogo.on(Laya.Event.CLICK,this,this.openMail)};f.newMailNotice=function(){g_mailLogo.visible=!0;Laya.stage.event("makeHintPos")};f.updateMailList=function(a,b){-1!=this.onSelectIndex&&this.onSelectIndex==b?(a.getChildByName("img_skin").skin="gameres/png/select_mailVeiw.png",(b=this.getContentMail(a.dataSource.nMailIdx))?(a.dataSource.state=b.btState,this.updateMailContent(b)):Sendmessage.sendGetMailContent(a.dataSource.nMailIdx)):a.getChildByName("img_skin").skin=
"gameres/png/mail_veiw2.png";b=a.getChildByName("lab_state");var d=a.getChildByName("lab_sendName"),n=a.getChildByName("lab_caption"),c=a.getChildByName("lab_date"),h=a.getChildByName("lab_limited");0<a.dataSource.nLimited?(h.visible=!0,c.visible=!1):(h.visible=!1,c.visible=!0);7<n.text.length&&(n.text=n.text.substr(0,6));switch(a.dataSource.state){case 0:b.text="\u672a\u8bfb";b.color="#c8c1b9";d.color="#e2720c";n.color="#e2b984";a.gray=!1;break;case 1:b.text="\u5df2\u8bfb";b.color="#c8c1b9";d.color=
"#e2720c";n.color="#e2b984";a.gray=!1;break;case 2:b.text="\u5df2\u8bfb",b.color="#808080",d.color="#808080",n.color="#808080",a.gray=!0}};f.getContentMail=function(a){for(var b=0;b<g_mailList.length;b++)if(g_mailList[b].nMailIdx==a&&null!=g_mailList[b].content)return g_mailList[b];return null};f.selectMailList=function(a){this.onSelectIndex=a};f.createMailUI=function(){if(!this.ui){this.ui=new MailUI;this.ui.list_mailList.vScrollBarSkin="";this.ui.list_mailList.selectEnable=!0;this.ui.list_mailList.selectHandler=
new Laya.Handler(this,this.selectMailList);this.ui.list_mailList.renderHandler=new Laya.Handler(this,this.updateMailList);this.ui.list_itemList.hScrollBarSkin="";this.ui.list_itemList.renderHandler=new Laya.Handler(this,this.updateMailItems);this.ui.list_itemList.array=[];this.ui.text_mome.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText);this.ui.StartPos=new Laya.Point(0,0);this.ui.textStartPosY=0;this.ui.box_move.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.ui.btn_getItem.visible=!1;this.ui.btn_deleteMail.visible=
!1;this.ui.img_mailExtract.visible=!1;this.ui.btn_getAllItem.on(Laya.Event.CLICK,this,this.onGetAllItem);this.ui.btn_deleteMail.on(Laya.Event.CLICK,this,this.ondeleteMail);this.ui.btn_deleteAll.on(Laya.Event.CLICK,this,this.ondeleteAllMail);this.ui.btn_close.on(Laya.Event.CLICK,this,this.onClose);for(var a=[],b=0;b<g_mailList.length;b++){var d=g_mailList[b];a.push({nMailIdx:d.nMailIdx,lab_sendName:d.sSendName,lab_caption:d.sCaption,state:d.btState,lab_date:this.getHowMuchTime(d.SendDate),lab_limited:this.getLimitedDate(d.SendDate,
d.nLimited),nLimited:d.nLimited})}this.ui.list_mailList.array=a;this.ui.lab_maxMailCount.text=g_mailMaxCount;this.ui.lab_currentMailCount.text=this.ui.list_mailList.length;Laya.stage.addChild(this.ui)}};f.getLimitedDate=function(a,b){if(0>=b)return"";a=(new Date(a)).getTime();var d=(new Date).getTime();b=864E5*b-(d-a);if(0>=b)return"\u5df2\u8fc7\u671f";b=parseInt(b/1E3);a=parseInt(b/86400);if(1<=a)return a+"\u5929\u540e\u8fc7\u671f";a=parseInt(b/3600);if(1<=a)return a+"\u5c0f\u65f6\u540e\u8fc7\u671f";
a=parseInt(b/60);return 1<=a?a+"\u5206\u949f\u540e\u8fc7\u671f":b+"\u79d2\u540e\u8fc7\u671f"};f.getHowMuchTime=function(a){a=(new Date(a)).getTime();a=(new Date).getTime()-a;if(0>=a)return"\u672a\u77e5";a=parseInt(a/1E3);var b=parseInt(a/86400);if(1<=b)return b+"\u5929\u524d";a=parseInt(a/3600);return 1<=a?a+"\u5c0f\u65f6\u524d":"\u521a\u521a"};f.getUserMail=function(a){this.isGetMail=!0;this.newMailCount=a;this.createMailUI()};f.openMail=function(){this.isGetMail?this.createMailUI():(g_mailList=
[],Sendmessage.sendGetMail())};f.updateMailContent=function(a,b){if((!b||a.nMailIdx==this.lastShowMailIdx)&&a&&this.ui){this.ui.text_caption.text=" \u6807 \u9898 : "+a.sCaption;this.ui.text_sendName.text=" \u53d1 \u9001 \u8005 : "+a.sSendName;this.ui.text_time.text=" \u65f6 \u95f4 : "+a.SendDate;this.ui.text_mome.text=a.content.sMemo.replace(/\\/g,"\n");this.ui.btn_getItem.on(Laya.Event.CLICK,this,this.onGetItem);this.ui.lab_limited.text="";this.ui.img_mailExtract.visible=!1;0<a.nLimited&&(this.ui.lab_limited.text=
"\u9650\u65f6: "+a.nLimited+" \u5929");this.ui.list_itemList.array=[];this.ui.list_itemList.hScrollBarSkin="";b=[];for(var d=!0,n=0;n<a.content.items.length;n++)0<a.content.items[n].nCurrentCount&&(d=!1);this.ui.btn_getItem.visible=!0;this.ui.btn_getItem.gray=!1;this.ui.btn_deleteMail.visible=!0;this.lastShowMailIdx=a.nMailIdx;if(2<=a.btState||d)for(this.ui.btn_getItem.gray=!0,this.ui.btn_getItem.off(Laya.Event.CLICK,this,this.onGetItem),a.btState=2,this.ui.img_mailExtract.visible=!0,n=0;n<a.content.items.length;n++)d=
a.content.items[n],b.push({item:d.item,nCount:d.nCount,btIndex:d.btIndex});else for(n=0;n<a.content.items.length;n++)d=a.content.items[n],b.push({item:d.item,nCount:d.nCurrentCount,btIndex:d.btIndex});this.ui.list_itemList.array=b;this.ui.lab_currentMailCount.text=this.ui.list_mailList.length}};f.clearContent=function(){this.ui&&(this.ui.text_caption.text="",this.ui.text_sendName.text="",this.ui.text_time.text="",this.ui.text_mome.text="",this.ui.lab_limited.text="",this.ui.btn_getItem.visible=!1,
this.ui.btn_deleteMail.visible=!1,this.ui.list_itemList.array=[],this.ui.list_itemList.refresh())};f.deleteMailView=function(a){if(this.ui)for(var b=0;b<this.ui.list_mailList.array.length;b++)if(this.ui.list_mailList.array[b].nMailIdx==a){this.ui.list_mailList.array.splice(b,1);this.ui.list_mailList.refresh();this.ui.list_mailList.selectedIndex=-1;break}};f.updateMailItems=function(a){function b(n){d.getChildByName("img_item").skin=n;GameUtil.ShowItemeffect(d,a.dataSource.item);g_OpenIdx=-1;d.on(Laya.Event.CLICK,
this,GameUtil.NewShowItemsInf,[a.dataSource.item,null,d.x]);d.getChildByName("lab_maxCount").text=a.dataSource.nCount;a.slotIndex=a.dataSource.btIndex}var d=a.getChildByName("img_itembg");a.dataSource.item&&GameUtil.loadImg(a.dataSource.item.s.Looks,"items",b)};f.updateMailState=function(a,b){if(this.ui)for(var d=this.ui.list_mailList.array,n=0;n<d.length;n++)if(d[n].nMailIdx==a.nMailIdx){d[n].state=a.btState;null==b?2<=a.btState&&0<this.newMailCount&&(this.newMailCount--,this.checkMailNotice()):
1==b&&2<=a.btState&&0<this.newMailCount&&(this.newMailCount--,this.checkMailNotice());this.ui.list_mailList.refresh();break}};f.onGetItem=function(){if(-1!=this.lastShowMailIdx)var a=this.getContentMail(this.lastShowMailIdx);a&&2>a.btState&&Sendmessage.sendGetMailItem(this.lastShowMailIdx)};f.onGetAllItem=function(){if(0<g_mailList.length)for(var a=0;a<g_mailList.length;a++)if(2>g_mailList[a].btState){Sendmessage.sendGetAllMailItem();break}};f.ondeleteMail=function(){if(this.ui&&-1!=this.lastShowMailIdx){var a=
this.getContentMail(this.lastShowMailIdx);if(a&&2<=a.btState){a=this.lastShowMailIdx;this.lastShowMailIdx=-1;Sendmessage.sendDeleteMail(a);for(var b=0;b<g_mailList.length;b++)if(g_mailList[b].nMailIdx==a){g_mailList.splice(b,1);break}this.clearContent();this.deleteMailView(a);this.ui.lab_currentMailCount.text=this.ui.list_mailList.length}}};f.ondeleteAllMail=function(){if(0<g_mailList.length)for(var a=0;a<g_mailList.length;a++)if(1<=g_mailList[a].btState){Sendmessage.sendDeleteAllMail();break}};f.deleteAllMail=
function(a){for(var b=0;b<a.length;b++)for(var d=0;d<g_mailList.length;d++)if(a[b]==g_mailList[d].nMailIdx){g_mailList.splice(d,1);break}if(this.ui){for(b=0;b<a.length;b++){var n=this.ui.list_mailList.array;for(d=0;d<n.length;d++)if(a[b]==n[d].nMailIdx){n[d].nMailIdx==this.lastShowMailIdx&&(this.lastShowMailIdx=-1,this.clearContent(),this.ui.list_mailList.selectedIndex=-1,this.ui.img_mailExtract.visible=!1);n.splice(d,1);break}}this.ui.list_mailList.refresh();this.ui.lab_currentMailCount.text=this.ui.list_mailList.length}};
f.onClose=function(){this.onSelectIndex=this.lastShowMailIdx=-1;this.ui.removeSelf();this.ui=null};f.addNewMail=function(a){this.newMailCount++;this.checkMailNotice();if(this.ui){var b=this.ui.list_mailList,d=-1;0<b.length&&-1!=b.selectedIndex&&-1!=this.lastShowMailIdx&&(d=b.selectedIndex+1);b.array.unshift({nMailIdx:a.nMailIdx,lab_sendName:a.sSendName,lab_caption:a.sCaption,state:a.btState,lab_date:this.getHowMuchTime(a.SendDate),lab_limited:this.getLimitedDate(a.SendDate,a.nLimited),nLimited:a.nLimited});
-1!=d&&(b.selectedIndex=d);b.refresh();this.ui.lab_currentMailCount.text=b.length}};f.checkMailNotice=function(){0>=this.newMailCount&&g_mailLogo&&g_mailLogo.visible?(g_mailLogo.visible=!1,Laya.stage.event("makeHintPos")):0<this.newMailCount&&g_mailLogo&&!g_mailLogo.visible&&this.newMailNotice()};f.clearEvent=function(){g_mailLogo.off(Laya.Event.CLICK,this,this.openMail);Laya.stage.offAll("get_user_mail");Laya.stage.offAll("get_mail_content");Laya.stage.offAll("update_mail_state");Laya.stage.offAll("delete_all_mail");
Laya.stage.offAll("add_new_mail");Laya.stage.offAll("new_mail_notice")};f.onMouseDown=function(a){this.ui.StartPos.x=a.stageX;this.ui.StartPos.y=a.stageY;this.ui.box_move.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.ui.box_move.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.ui.box_move.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseUp=function(){this.ui.box_move.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseMove=function(a){this.ui.x+=a.stageX-this.ui.StartPos.x;this.ui.y+=
a.stageY-this.ui.StartPos.y;this.ui.StartPos.x=a.stageX;this.ui.StartPos.y=a.stageY};f.startScrollText=function(a){this.ui.textStartPosY=this.ui.text_mome.mouseY;this.ui.text_mome.on(Laya.Event.MOUSE_MOVE,this,this.scrollText);this.ui.text_mome.on(Laya.Event.MOUSE_UP,this,this.finiseScrollText);this.ui.text_mome.on(Laya.Event.MOUSE_OUT,this,this.finiseScrollText)};f.scrollText=function(a){a=this.ui.text_mome.mouseY;this.ui.text_mome.scrollY+=this.ui.textStartPosY-a;this.ui.textStartPosY=a};f.finiseScrollText=
function(a){this.ui.text_mome.off(Laya.Event.MOUSE_MOVE,this,this.scrollText);this.ui.text_mome.off(Laya.Event.MOUSE_UP,this,this.finiseScrollText)}})();
var VersionMgr=function(){function e(){this.init();Laya.stage.on("checkUpdateVersion",this,this.checkUpdateVersion)}_proto=e.prototype;_proto.init=function(){this.versionNumbList=[{2021:"2023"},{2022:"2021"}];this.curVersionNumb="2022";this.serverVersionNumb};_proto.checkUpdateVersion=function(){this.versionNumbList&&0!=this.versionNumbList.length&&this.serverVersionNumb&&""!=this.serverVersionNumb&&!this.isVersionSame()&&(console.log("loadCodeAndUpdate"),this.loadCodeAndUpdate())};_proto.loadCodeAndUpdate=
function(){if(window.appcache){console.log("has window.appcache");console.log("\u6e38\u620f\u5f00\u59cb\u66f4\u65b0\uff0c\u8bf7\u7b49\u5f85");var f=new XMLHttpRequest;f.open("GET","http://app1cs.zjzst.com/data/codeforapp.js",!0);f.responseType="arraybuffer";f.onload=function(a){if(4==f.readyState&&200==f.status){console.log("XMLHttpRequest onload success");a=f.response;console.log("arrayBuffer:::"+a);var b=window.appcache.hashstr("js/codeforapp.js");console.log("fid:::"+b);a&&window.appcache.updateFile(b,
0,a,!0)&&(console.log("openTipWin"),Versionmgr.openTipWin())}};f.onerror=function(a){console.log("\u52a0\u8f7d\u7f51\u7edccodeforapp.js\u51fa\u9519")};f.send(null)}};_proto.showTip=function(f){Laya.stage.event("show_alert_dlg",[{type:1,txt:f,callfn:function(){}}])};_proto.openTipWin=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u66f4\u65b0\u5b8c\u6bd5\uff0c\u8bf7\u91cd\u8fdb",callfn:function(){Laya.Browser.window.location.reload()}}])};_proto.isVersionSame=function(){return this.curVersionNumb===
this.getNeedVersionNumbByServer()};_proto.getNeedVersionNumbByServer=function(){var f;for(f in this.versionNumbList){var a=this.versionNumbList[f];var b=Object.keys(a)[0];if(b==this.serverVersionNumb)return a[b]}};_proto.setServerVersionNumb=function(f){this.serverVersionNumb=f};return e}(),crystal=function(e){function f(){f.__super.call(this);this.init()}Laya.class(f,"crystal",crystalUI);e=f.prototype;e.init=function(){this.httpUrl="https://api.96time.website";this.isLogin=!1;this.latitude="30.472857";
this.longitude="114.420166";this.userid=this.token=this.myCQB=this.price=this.exchangePer=this.exchangeType=this.exchangeNum=this.phone=0;Laya.stage.on("update_cqbInfo",this,this.updateCQB);Laya.stage.on("update_crystal",this,this.crystalInfo);Laya.stage.on("reLogin",this,this.reLogin);this.btn_close.on(Laya.Event.CLICK,this,this.close);this.btn_smelt.on(Laya.Event.CLICK,this,this.buyCQB);this.btn_change.on(Laya.Event.CLICK,this,this.sellCQB);this.btn_cregister_close.on(Laya.Event.CLICK,this,this.closePopup,
[this.bg_register]);this.btn_cell_close.on(Laya.Event.CLICK,this,this.closePopup,[this.bg_cell]);this.btn_login_close.on(Laya.Event.CLICK,this,this.closePopup,[this.bg_login]);this.btn_register_code.on(Laya.Event.CLICK,this,this.getCheckCode,[this.ipt_register_account]);this.btn_cell_code.on(Laya.Event.CLICK,this,this.getCheckCode,[this.ipt_cell_account]);this.btn_register.on(Laya.Event.CLICK,this,this.sendRegister);this.btn_bind_ok.on(Laya.Event.CLICK,this,this.bindAccount);this.btn_bind_close.on(Laya.Event.CLICK,
this,this.closeHint);this.btn_cell.on(Laya.Event.CLICK,this,this.sendCellLogin);this.btn_login.on(Laya.Event.CLICK,this,this.sendLogin);this.btn_buycqb_minus.on(Laya.Event.CLICK,this,this.minusCqbNum);this.btn_buycqb_plus.on(Laya.Event.CLICK,this,this.plusCqbNum);this.btn_buycqb_max.on(Laya.Event.CLICK,this,this.maxCqbNum);this.btn_sellcqb_minus.on(Laya.Event.CLICK,this,this.minusSellNum);this.btn_sellcqb_plus.on(Laya.Event.CLICK,this,this.plusSellNum);this.btn_sellcqb_max.on(Laya.Event.CLICK,this,
this.maxSellNum);this.btn_buycqb_ok.on(Laya.Event.CLICK,this,this.sendBuyCQB);this.btn_sellcqb_ok.on(Laya.Event.CLICK,this,this.sendSellCQB);this.btn_buycqb_cancel.on(Laya.Event.CLICK,this,this.closeBuy);this.btn_sellcqb_cancel.on(Laya.Event.CLICK,this,this.closeSell);this.btn_spsw_close.on(Laya.Event.CLICK,this,this.closeSpsw);this.btn_spsw_cancel.on(Laya.Event.CLICK,this,this.closeSpsw);this.btn_spsw_ok.on(Laya.Event.CLICK,this,this.sendExchangeMsg);this.lab_buycqb_num.on(Laya.Event.INPUT,this,
this.onBuyNumChange);this.lab_sellcqb_num.on(Laya.Event.INPUT,this,this.onSellNumChange);this.btn_cqbtrade.on(Laya.Event.CLICK,this,this.cqbTrade);this.crystalInfo()};e.updateCQB=function(a,b){this.lab_owniron.text=g_nGameGird.value;this.lab_havesmelt.text=g_nGameGird.value;a&&b&&""!=a&&(a=JSON.parse(a),this.lab_cqb_all2.text=a.TotalNum,1==b&&(this.myCQB+=parseFloat(a.TradeNum)),2==b&&(this.myCQB-=parseFloat(a.TradeNum)),this.lab_havecqb.text=parseInt(this.myCQB),console.log("updateCQB:",this.myCQB))};
e.onBuyNumChange=function(){var a=parseInt(this.lab_havesmelt.text/this.exchangePer);0>this.lab_buycqb_num.text?this.lab_buycqb_num.text=0:this.lab_buycqb_num.text>a&&(this.lab_buycqb_num.text=a);this.lab_costsmelt.text=this.lab_buycqb_num.text*this.exchangePer;this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)-parseInt(this.lab_costsmelt.text)};e.onSellNumChange=function(){var a=parseInt(this.lab_change2.text);0>this.lab_sellcqb_num.text?this.lab_sellcqb_num.text=0:this.lab_sellcqb_num.text>
this.myCQB&&(this.lab_sellcqb_num.text=this.myCQB);this.lab_havecqb.text=parseInt(this.lab_havecqb.text-this.lab_sellcqb_num.text);this.lab_changecoin.text=parseInt(this.lab_sellcqb_num.text*a)};e.crystalInfo=function(){this.lab_owniron.text=g_nGameGird.value;this.lab_havesmelt.text=g_nGameGird.value;if(""!=g_crystalInfo){var a=JSON.parse(g_crystalInfo);this.exchangePer=parseInt(a.ExchangePer);this.price=parseFloat(a.Price);this.lab_smelt1.text=this.exchangePer;this.lab_change2.text=parseInt(this.price*
a.ExchangeGame*(1-a.Commision/100));this.lab_exchange.text="1:"+this.exchangePer;this.lab_price.text=this.price;this.lab_havecqb.text=parseInt(this.myCQB);this.lab_cqb_all2.text=a.CristalCount;this.lab_cqb_all1.text=a.CristalAdd}};e.buyCQB=function(){this.bg_bind.visible=!this.isLogin;this.bg_buy.visible=this.isLogin;this.bg_cqb.mouseEnabled=!1};e.minusCqbNum=function(){0<this.lab_buycqb_num.text&&(this.lab_buycqb_num.text=parseInt(this.lab_buycqb_num.text)-1,0>this.lab_buycqb_num.text&&(this.lab_buycqb_num.text=
0),this.lab_costsmelt.text=parseInt(this.lab_costsmelt.text)-this.exchangePer,this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)+this.exchangePer)};e.plusCqbNum=function(){this.lab_havesmelt.text>=this.exchangePer&&(this.lab_buycqb_num.text=parseInt(this.lab_buycqb_num.text)+1,this.lab_costsmelt.text=parseInt(this.lab_costsmelt.text)+this.exchangePer,this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)-this.exchangePer)};e.maxCqbNum=function(){this.lab_havesmelt.text=g_nGameGird.value;
this.lab_buycqb_num.text=0;this.lab_costsmelt.text=0;var a=parseInt(this.lab_havesmelt.text/this.exchangePer);this.lab_buycqb_num.text=a;this.lab_costsmelt.text=this.exchangePer*a;this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)-parseInt(this.lab_costsmelt.text)};e.minusSellNum=function(){if(0<this.lab_sellcqb_num.text){var a=parseInt(this.lab_change2.text);this.lab_havecqb.text=parseInt(this.lab_havecqb.text)+1;this.lab_sellcqb_num.text=parseInt(this.lab_sellcqb_num.text)-1;this.lab_changecoin.text=
parseInt(this.lab_changecoin.text)-a}};e.plusSellNum=function(){if(0<this.lab_havecqb.text){var a=parseInt(this.lab_change2.text);this.lab_havecqb.text=parseInt(this.lab_havecqb.text)-1;this.lab_sellcqb_num.text=parseInt(this.lab_sellcqb_num.text)+1;this.lab_changecoin.text=parseInt(this.lab_changecoin.text)+a}};e.maxSellNum=function(){this.lab_havecqb.text=parseInt(this.myCQB);this.lab_sellcqb_num.text=0;this.lab_changecoin.text=0;var a=parseInt(this.lab_change2.text);this.lab_havecqb.text=0;this.lab_sellcqb_num.text=
parseInt(this.myCQB);this.lab_changecoin.text=parseInt(this.myCQB*a)};e.sendBuyCQB=function(){"0"==this.lab_buycqb_num.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u51b6\u70bc\u6570\u91cf\u4e0d\u80fd\u4e3a0\uff01",callfn:function(){}}]):parseInt(this.lab_buycqb_num.text)>parseInt(this.lab_cqb_all2.text)?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u672a\u5151\u6362CQB\u603b\u91cf\u4e0d\u8db3\uff01",callfn:function(){}}]):0!=this.lab_buycqb_num.text&&(this.exchangeNum=this.lab_buycqb_num.text,
this.exchangeType=CM_BUYCRISTAL,this.closeBuy(),this.sendExchangeMsg())};e.sendSellCQB=function(){"0"==this.lab_sellcqb_num.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5151\u6362\u6570\u91cf\u4e0d\u80fd\u4e3a0\uff01",callfn:function(){}}]):(this.exchangeNum=this.lab_sellcqb_num.text,this.exchangeType=CM_SELLCRISTAL,this.sendExchangeMsg())};e.sellCQB=function(){this.bg_bind.visible=!this.isLogin;this.bg_sell.visible=this.isLogin;this.bg_cqb.mouseEnabled=!1;this.isLogin&&this.getMyCQB()};
e.showSpsw=function(){this.bg_cqb.mouseEnabled=!1;this.bg_secondPsw.visible=!0};e.closeSpsw=function(){this.bg_cqb.mouseEnabled=!0;this.bg_secondPsw.visible=!1;this.ipt_secondPsw.text="";this.exchangeType=this.exchangeNum=0};e.sendExchangeMsg=function(){if(0!=this.exchangeType&&0!=this.exchangeNum){var a=this.exchangeType,b={sname:g_RoleName,phone:this.phone,num:this.exchangeNum,token:this.token,password:this.ipt_secondPsw.text};b=JSON.stringify(b);Sendmessage.sendCqbExchange(a,b);this.closeSell()}};
e.showPopup=function(a){this.bg_login.visible=!1;this.bg_cell.visible=!1;this.bg_register.visible=!1;a&&(a.visible=!0)};e.bindAccount=function(){this.bg_bind.visible=!1;this.bg_cell.visible=!0;this.bg_cqb.mouseEnabled=!1};e.closeHint=function(){this.bg_bind.visible=!1;this.bg_cqb.mouseEnabled=!0};e.closePopup=function(a){a&&(a.visible=!1,this.bg_cqb.mouseEnabled=!0)};e.getCheckCode=function(a,b){function d(){m--;g.label="\u91cd\u65b0\u83b7\u53d6("+m+")";0>=m&&(g.disabled=!1,g.label="\u83b7\u53d6\u9a8c\u8bc1\u7801",
Laya.timer.clear(this,d))}function n(l){l&&(200==l.code?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:l.message,callfn:function(){}}]))}if(a&&b&&b.target)if(""==a.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(11!=a.text.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u9519\u8bef\uff01",
callfn:function(){}}]);else{var c=this.httpUrl+"/api/user/v1.0/smsCode",h=new Laya.HttpRequest;h.once(Laya.Event.COMPLETE,this,n);h.once(Laya.Event.ERROR,this,function(l){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u53d1\u9001\u5931\u8d25\uff01",callfn:function(){}}])});a={sign:"aaa",phone:a.text};a=JSON.stringify(a);h.send(c,a,"post","json",["Content-Type","application/json;charset=UTF-8"]);var m=60,g=b.target;g.disabled=!0;Laya.timer.loop(1E3,this,d)}};e.sendRegister=function(){function a(c){c&&
(c.msg&&"SUCCESS\uff5e"!=c.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:c.msg,callfn:function(){}}]):c.result&&(n.userid=c.result.userId,n.token=c.result.token,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u6210\u529f\uff01",callfn:function(){}}])))}if(""==this.ipt_register_account.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_register_code.text)Laya.stage.event("show_alert_dlg",
[{type:1,txt:"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_register_psw.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else{var b=new Laya.HttpRequest;b.once(Laya.Event.COMPLETE,this,a);b.once(Laya.Event.ERROR,this,function(c){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u5931\u8d25\uff01",callfn:function(){}}])});var d={action:"AppSignInSignUp",object:{latitude:this.latitude,
longitude:this.longitude,mobile:this.ipt_register_account.text,inviterNum:this.ipt_register_invite.text,passWord:this.ipt_register_psw.text,msgcode:this.ipt_register_code.text}};d=JSON.stringify(d);b.send(this.httpUrl,d,"post","json",["Content-Type","application/json;charset=UTF-8"])}var n=this};e.sendCellLogin=function(){function a(h){h&&(200==h.code?(c.token=h.data.token,c.phone=this.ipt_cell_account.text,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u6210\u529f\uff01",callfn:function(){}}]),
c.closePopup(c.bg_cell),c.lab_cqb_state.text="\u6b63\u5e38",c.lab_cqb_state.color="#28ff00",c.isLogin=!0,c.getMyCQB()):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u5931\u8d25\uff01",callfn:function(){}}]))}if(""==this.ipt_cell_account.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_cell_code.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",
callfn:function(){}}]);else{var b=this.httpUrl+"/api/user/v1.0/login",d=new Laya.HttpRequest;d.once(Laya.Event.COMPLETE,this,a);d.once(Laya.Event.ERROR,this,function(h){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u5931\u8d25\uff01",callfn:function(){}}])});var n={phone:this.ipt_cell_account.text,code:this.ipt_cell_code.text};n=JSON.stringify(n);d.send(b,n,"post","json",["Content-Type","application/json;charset=UTF-8"])}var c=this};e.sendLogin=function(){function a(c){c&&(c.msg&&"SUCCESS\uff5e"!=
c.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:c.msg,callfn:function(){}}]):c.result&&(n.userid=c.result.userId,n.token=c.result.token,n.phone=this.ipt_login_account.text,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u6210\u529f\uff01",callfn:function(){}}]),n.closePopup(n.bg_login),n.lab_cqb_state.text="\u6b63\u5e38",n.lab_cqb_state.color="#28ff00",n.isLogin=!0,n.getMyCQB()))}if(""==this.ipt_login_account.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",
callfn:function(){}}]);else if(""==this.ipt_login_psw.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else{var b=new Laya.HttpRequest;b.once(Laya.Event.COMPLETE,this,a);b.once(Laya.Event.ERROR,this,function(c){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u5931\u8d25\uff01",callfn:function(){}}])});var d={action:"AppSignInSignUp",object:{mobile:this.ipt_login_account.text,passWord:this.ipt_login_psw.text}};d=JSON.stringify(d);
b.send(this.httpUrl,d,"post","json",["Content-Type","application/json;charset=UTF-8"])}var n=this};e.getMyCQB=function(a){var b=new Laya.HttpRequest,d=this.httpUrl+"/api/outSideCall/v2.0/getCrystalDetail";b.once(Laya.Event.COMPLETE,this,function(c){c&&(200==c.code?(a&&window.open("http://h5.96time.website/home?token="+this.token),n.myCQB=c.data.crystalTotal,n.lab_havecqb.text=parseInt(c.data.crystalTotal),console.log("MyCQB:",n.myCQB)):a?n.reLogin():Laya.stage.event("show_alert_dlg",[{type:1,txt:c.message,
callfn:function(){}}]))});b.send(d,"{}","post","json",["Content-Type","application/json;charset=UTF-8","Authorization","Bearer "+this.token]);var n=this};e.cqbTrade=function(){this.isLogin?(g_crystal_token=this.token,cur_use_app?sendtonative("openShop",this.token):this.getMyCQB(!0)):this.bindAccount()};e.reLogin=function(){this.bg_bind.visible=!1;this.bg_buy.visible=!1;this.bg_sell.visible=!1;this.bg_login.visible=!1;this.bg_cell.visible=!0;this.bg_register.visible=!1;this.isLogin=this.bg_secondPsw.visible=
!1;this.userid=this.token=this.myCQB=this.price=this.exchangePer=this.exchangeType=this.exchangeNum=this.phone=0};e.closeBuy=function(){this.bg_buy.visible=!1;this.bg_cqb.mouseEnabled=!0;this.lab_havesmelt.text=g_nGameGird.value;this.lab_buycqb_num.text=0;this.lab_costsmelt.text=0};e.closeSell=function(){this.bg_sell.visible=!1;this.bg_cqb.mouseEnabled=!0;this.lab_havecqb.text=parseInt(this.myCQB);this.lab_sellcqb_num.text=0;this.lab_changecoin.text=0};e.close=function(){this.visible=!1;this.bg_bind.visible=
!1;this.bg_buy.visible=!1;this.bg_sell.visible=!1;this.bg_login.visible=!1;this.bg_cell.visible=!1;this.bg_register.visible=!1;this.bg_secondPsw.visible=!1;this.bg_cqb.mouseEnabled=!0};return f}(crystalUI),RelationManager=function(){function e(){this.init()}var f=null,a=e.prototype;a.init=function(){this.f_friendList=[];this.f_friendRequestList=[];this.f_maxFriendNum=0;this.f_blackList=[];this.f_selectIndex=0;this.f_selectItemIndex=-1;this.teamGropList=[];this.t_nearTeamList=[];this.t_applyTeamList=
[];Laya.stage.on("send_friend_info",this,this.sendFriendOperation);Laya.stage.on("update_friend_info",this,this.updateFriendInfoByName);Laya.stage.on("friend_info_handle",this,this.onFriendOption);Laya.stage.on("friend_apply",this,this.receiveFriendApply);Laya.stage.on("addFriendTip_add_ok",this,this.onAddOk);Laya.stage.on("addFriendTip_del_ok",this,this.onDelOk);Laya.stage.on("showApplyTeamTip",this,this.showApplyTeamTip)};a.sendFriendOperation=function(b,d){Sendmessage.FriendOpition(b,d)};a.requestFriendInfoByName=
function(b){Sendmessage.FriendInfo(b)};a.updateFriendInfoByName=function(b){};a.getNeedUpdateListData=function(){if(0==this.f_selectIndex||1==this.f_selectIndex)return this.f_friendList;if(2==this.f_selectIndex)return this.f_blackList};a.onFriendOption=function(b,d){this.testParse(b,d);switch(b.record){case 0:this.parseData(b,d);break;case 1:this.onFriendAdd(b,d);break;case 2:this.onFriendDel(b,d);break;case 3:this.onFriendOnlineNotice(b,d);break;case 4:this.blackListTipHandle(b.tag,d);break;case 5:GameUtil.onShowTip("\u79fb\u9664\u9ed1\u540d\u5355"+
(1==b.tag?"\u6210\u529f":"\u5931\u8d25")),1==b.tag&&(this.onDelByName(this.f_blackList,this.getPlayerName(d)),Laya.stage.event("update_friend_list"))}};a.testParse=function(b,d){if(d&&""!=d)for(b=DecodeString(d).split("|"),d=0;d<b.length;d++)""!=b[d]&&console.log("test parse:",b[d])};a.parseData=function(b,d){if(d&&""!=d){0==b.param&&0==b.record&&(this.f_maxFriendNum=b.tag);d=DecodeString(d).split("|");var n=d.length;listData=0==b.param?this.f_friendList:this.f_blackList;var c=ObjectManage.findobject(playerID);
if(0<n)for(var h=0;h<n;h++)""!=d[h]&&(b=d[h].split(","),-1<this.existNameInList(listData,b[0])||-1<this.getObjName(c).indexOf(b[0])||listData.push({name:b[0],level:b[3],job:GameUtil.getJobName(parseInt(b[1])),guild:""==b[5]?"- -":b[5],offlineDate:this.getOfflineDate(b[6],"1"==b[4]),online:"1"==b[4]?!0:!1}));Laya.stage.event("update_friend_list")}};a.getOfflineDate=function(b,d){return d?"\u5728\u7ebf":""==b?"- -":this.getOfflineTime(b)};a.getOfflineTime=function(b){var d=new Date;b=new Date(b);var n=
d.getFullYear();var c=b.getFullYear();if(0<n-c)return"\u79bb\u7ebf"+(n-c)+"\u5e74";n=d.getMonth();c=b.getMonth();if(0<n-c)return"\u79bb\u7ebf"+(n-c)+"\u4e2a\u6708";n=d.getDate();c=b.getDate();if(0<n-c)return"\u79bb\u7ebf"+(n-c)+"\u5929";n=d.getHours();c=b.getHours();if(0<n-c)return"\u79bb\u7ebf"+(n-c)+"\u5c0f\u65f6";d=d.getMinutes();b=b.getMinutes();return 0<d-b?"\u79bb\u7ebf"+(d-b)+"\u5206\u949f":"\u5728\u7ebf"};a.existName=function(b,d){for(var n in b)if(b[n].name==d)return!0;return!1};a.blackListTipHandle=
function(b,d){switch(b){case 1:GameUtil.onShowTip("\u52a0\u5165\u9ed1\u540d\u5355\u6210\u529f");this.onDelByName(this.f_friendList,this.getPlayerName(d),!0);Laya.stage.event("update_friend_list");break;case 2:GameUtil.onShowTip("\u5df2\u7ecf\u8fbe\u5230\u9ed1\u540d\u5355\u6570\u91cf\u4e0a\u9650");break;case 3:GameUtil.onShowTip("\u5df2\u7ecf\u5728\u9ed1\u540d\u5355\u4e2d");break;case 4:GameUtil.onShowTip("\u4e0d\u662f\u597d\u53cb\u65e0\u6cd5\u52a0\u5165\u9ed1\u540d\u5355");break;case 5:GameUtil.onShowTip("\u81ea\u5df1\u65e0\u6cd5\u52a0\u5165\u9ed1\u540d\u5355")}};
a.onQuestFriendListInfo=function(b){if(b&&""!=b&&(b=DecodeString(b).split("|"),0<b.length))for(var d,n=b.length,c=0;c<n;c++)""!=b[c]&&-1<b[c].indexOf(",")&&(d=b[c].split(",")[0],this.requestFriendInfoByName(d))};a.onFriendAdd=function(b,d){if(!this.isAddFriend(b.tag))if(this.isFriendApply(b.tag))this.f_friendRequestList.push(this.getPlayerName(d)),Laya.stage.event("redHintCheck",["friend"]);else if(this.isAddFail(b.tag))GameUtil.onShowTip(FRIEND_TIP[b.tag]);else if(this.isAddSuccess(b.tag))GameUtil.onShowTip(this.getPlayerName(d)+
FRIEND_TIP.N);else if(this.isInBlackList(b.tag))GameUtil.onShowTip(FRIEND_TIP.J);else 12==b.tag&&(b=d.split(","),this.f_friendList.push({name:this.getPlayerName(b[0]),level:b[3],job:GameUtil.getJobName(parseInt(b[1])),guild:""==b[5]?"- -":this.getPlayerName(b[5]),offlineDate:this.getOfflineDate(b[6],"1"==b[4]),online:"1"==b[4]?!0:!1}),Laya.stage.event("update_friend_list"))};a.isAddFriend=function(b){return 0==b||1==b};a.isAddFail=function(b){return 2==b||3==b||4==b||5==b};a.isFriendApply=function(b){return 10==
b};a.isAddSuccess=function(b){return 11==b};a.isInBlackList=function(b){return 6==b};a.getPlayerName=function(b){return gbkByteArr2UcsStr(this.getCharCodeByStr(b))};a.getCharCodeByStr=function(b){for(var d=[],n=0;n<b.length;n++)d[n]=b.charCodeAt(n);return d};a.onFriendDel=function(b,d){if(this.isDelFriendFail(b.tag))GameUtil.onShowTip(FRIEND_TIP.O);else this.onDelByName(this.f_friendList,this.getPlayerName(d)),Laya.stage.event("update_friend_list")};a.isDelFriendFail=function(b){return 1!=b};a.onDelByName=
function(b,d,n){if(b)for(var c=b.length,h=0;h<c;h++)b[h].name==d&&(n&&this.f_blackList.push(b[h]),b.splice(h,1))};a.onFriendOnlineNotice=function(b,d){if(0==b.tag)this.onPlayerOffLine(this.getPlayerName(d));else this.onPlayerOnLine(this.getPlayerName(d))};a.onPlayerOffLine=function(b){this.changeOnlineInList(b,!1);this.updateFriendListRightNow()};a.onPlayerOnLine=function(b){this.changeOnlineInList(b,!0);this.updateFriendListRightNow()};a.changeOnlineInList=function(b,d){for(var n=this.f_friendList.length,
c,h=0;h<n;h++)c=this.f_friendList[h],c.name==b&&(c.online=d,c.offlineDate=d?"\u5728\u7ebf":"\u79bb\u7ebf")};a.updateFriendListRightNow=function(){0==this.f_selectIndex&&Laya.stage.event("update_friend_list")};a.receiveFriendApply=function(){var b=this.f_friendRequestList[0];b&&(Laya.stage.event("show_alert_dlg",[{type:2,txt:b+FRIEND_TIP.A,callfn:function(){Laya.stage.event("send_friend_info",[1,b])},callcancelfun:function(){Laya.stage.event("friend_apply")}}]),this.f_friendRequestList.shift())};a.onAddOk=
function(b){if(""==b)GameUtil.onShowTip("\u8bf7\u8f93\u5165\u540d\u5b57");else{var d=-1<this.existNameInList(this.getSelectListData(),b);0==this.f_selectIndex||1==this.f_selectIndex?this.addFriendHandle(d,b):2==this.f_selectIndex&&this.addBlackListHandle(d,b)}};a.existNameInList=function(b,d){if(b&&0<b.length)for(var n=b.length,c=0;c<n;c++)if(d==b[c].name)return c;return-1};a.addFriendHandle=function(b,d){if(b)GameUtil.onShowTip(FRIEND_TIP.C);else GameUtil.onShowTip(FRIEND_TIP.B),this.sendFriendOperation(1,
d)};a.addBlackListHandle=function(b,d){if(d.length>FRIEND_TIP.LIMITLENGTH)GameUtil.onShowTip(FRIEND_TIP.I);else if(b)GameUtil.onShowTip(FRIEND_TIP.J);else this.addBlackList(d),Laya.stage.event("update_friend_list")};a.addBlackList=function(b){this.f_blackList.push(b)};a.onDelOk=function(b){if(0==this.f_selectIndex){var d=this.f_friendList;this.sendFriendOperation(2,b)}else 2==this.f_selectIndex&&(d=this.f_blackList);this.removeNameFromList(d,b)&&Laya.stage.event("update_friend_list")};a.removeNameFromList=
function(b,d){if(!b)return!1;for(var n=b.length,c=0;c<n;c++)if(d==b[c].name)return b.splice(c,1),!0;return!1};a.getSelectListData=function(b){b=b?b:this.f_selectIndex;if(0==b)return this.f_friendList;if(1==b)return this.getNearPlayerData(",");if(2==b)return this.f_blackList};a.getPlayerIdByName=function(b){for(var d=this.getPlayerObj(),n=0;n<d.length;n++)if(-1<this.getObjName(d[n]).indexOf(b))return d[n].data.record};a.getNearPlayerData=function(b){b=this.getPlayerObj();for(var d=[],n,c=0;c<b.length;c++)n=
b[c].data.fea,wRace=THumFeature(n.buffer).wRace,b[c]&&n&&1!=wRace&&150!=wRace&&!this.isMySelf(b[c])&&""!=this.getObjName(b[c])&&this.isUsualPeople(b[c])&&d.push({name:this.getObjName(b[c]),level:this.getObjLevel(b[c]),job:this.getObjJob(b[c]),guild:this.getObjGuildName(b[c]),offlineDate:"- -",online:!0});return d};a.getPlayerObj=function(){var b=ObjectManage.object_list,d=[];var n=Object.keys(b);for(var c=0;c<n.length;c++)3==b[n[c]].type&&d.push(b[n[c]]);return d};a.isMySelf=function(b){return b.data.record==
playerID};a.getObjName=function(b){return GameUtil.getPureName(b)};a.isUsualPeople=function(b){return 0==THumFeature(b.data.fea.buffer).boLeader};a.getObjGuildName=function(b){return"- -"};a.getObjGender=function(b){return 0==THumFeature(b.data.fea.buffer).nSex?"\u7537":"\u5973"};a.getObjJob=function(b){return GameUtil.getJobName(THumFeature(b.data.fea.buffer).btJob)};a.getObjLevel=function(b){return b.level?b.level:""};a.getSelectItemName=function(){if(this.isSelectedItem()){var b=this.getSelectListData()[this.f_selectItemIndex].split(":");
2<b.length&&(b=b[0])}return b};a.isSelectedItem=function(){return-1<this.f_selectItemIndex&&this.getSelectListData()[this.f_selectItemIndex]};a.getBlackList=function(){var b=GameUtil.getSaveData("blackList");return b?b.split(","):[]};a.setBlackList=function(){for(var b="",d=this.f_blackList.length,n=0;n<d;n++)b+=this.f_blackList[n],b+=this.isNotLastAddChar(n);GameUtil.setSaveData("blackList",b)};a.isNotLastAddChar=function(b){return b<this.f_blackList.length-1?",":""};a.removeMsgEvent=function(){Laya.stage.offAllCaller(this)};
a.showApplyTeamTip=function(){if(!(1>this.t_applyTeamList.length)){var b=this.t_applyTeamList[0].name;GameUtil.onShowTip("\u662f\u5426\u540c\u610f"+b+"\u52a0\u5165\u961f\u4f0d",2,function(){Sendmessage.sendGroupAccept(b)},function(){Sendmessage.sendGroupRefuse(b)});this.t_applyTeamList.shift()}};a.getTeamInviteListByType=function(b){if(0==b)return this.getNearPlayerData(",");if(1==b)return this.filterTeamInviteList(this.f_friendList)};a.filterTeamInviteList=function(b){var d=[],n;for(n in b){var c=
!1;for(var h in this.teamGropList)if(this.teamGropList[h].name==b[n].name){c=!0;break}c||d.push(b[n])}return d};return{getInstance:function(){null==f&&(f=new e);return f}}}(),AddFriendTip=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"AddFriendTip",AddFriendTipUI);var f=e.prototype;f.init=function(){this.eventStr;Laya.stage.on("beOpenAddFriendTip",this,this.beOpen);this.close_btn.on(Laya.Event.CLICK,this,this.onClose);this.cancel_btn.on(Laya.Event.CLICK,this,this.onClose);
this.sure_btn.on(Laya.Event.CLICK,this,this.onSure);this.paste_txt.on(Laya.Event.CLICK,this,this.onPaste)};f.onClose=function(){this.visible=!1};f.beOpen=function(a,b){this.title_txt.changeText(a);"\u6dfb\u52a0\u597d\u53cb"==a&&(this.paste_txt.visible=void 0!=g_copyName&&null!=g_copyName&&""!=g_copyName);this.eventStr=b};f.onSure=function(){this.eventStr&&""!=this.eventStr&&(Laya.stage.event(this.eventStr,this.content_input.text),this.onClose())};f.onPaste=function(){this.content_input.text=g_copyName};
return e}(AddFriendTip),FriendInfoTip=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"FriendInfoTip",FriendOperationTipUI);var f=e.prototype;f.init=function(){this.posList=[];Laya.stage.on("updateFriendInfo",this,this.showUI);this.close_btn.on(Laya.Event.CLICK,this,this.onClose);this.checkPlayer_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.makeDeal_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.dealFriend_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);
this.privateChat_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.beBad_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.addFriend_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.cancelBeBad_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.inviteGroup_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.inviteMem_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn)};f.showUI=function(a,b,d){this.name_txt.text=void 0===b?"":b;this.showOperationsBtnsByType(a,
d);a=this.showOperationNodesSort(this.posList);this.autoBgHeight(a);this.setCenterPosOnParent()};f.setCenterPosOnParent=function(){this.x=(this.parent.bg_img.width-this.bg_img.width)/2;this.y=(this.parent.bg_img.height-this.bg_img.height)/2};f.onClickOperationBtn=function(a){var b=this.name_txt.text;switch(a.target.name){case "checkPlayer_btn":this.onCheckPlayer();break;case "makeDeal_btn":this.onMakeDeal();break;case "dealFriend_btn":this.onDel(b);break;case "privateChat_btn":this.onPrivateChat(b);
break;case "beBad_btn":this.onBeBad(b);break;case "addFriend_btn":this.onAddFriend(b);break;case "cancelBeBad_btn":this.cancelBeBad(b);break;case "inviteGroup_btn":this.onInviteGroup(b);break;case "inviteMem_btn":this.onInviteGuild(b)}};f.onCheckPlayer=function(){var a;if(a=RelationManager.getInstance().getPlayerIdByName(this.name_txt.text)){var b=ObjectManage.findobject(a);Sendmessage.sendQueryState(a,b.grid.x,b.grid.y)}};f.onMakeDeal=function(){Sendmessage.StartTrade()};f.onDel=function(a){if(a)GameUtil.onShowTip(GameUtil.replacePlaceholder(FRIEND_TIP.E,
a),2,this.onDelSureCallBack.bind(this,a))};f.onDelSureCallBack=function(a){this.onClose();Laya.stage.event("addFriendTip_del_ok",a)};f.onPrivateChat=function(a){Laya.stage.event("show_chat_dlg",["/"+a+" ",!0])};f.onBeBad=function(a){Laya.stage.event("send_friend_info",[4,a])};f.onAddFriend=function(a){if(""==a)GameUtil.onShowTip(FRIEND_TIP.D);else if(this.isAlreadyAddFriend(a))GameUtil.onShowTip(FRIEND_TIP.C);else this.sendFriendApply(a)};f.isAlreadyAddFriend=function(a){return-1<RelationManager.getInstance().existNameInList(RelationManager.getInstance().f_friendList,
a)};f.sendFriendApply=function(a){GameUtil.onShowTip(FRIEND_TIP.B);Laya.stage.event("send_friend_info",[1,a])};f.cancelBeBad=function(a){Laya.stage.event("send_friend_info",[5,a])};f.onInviteGroup=function(a){Sendmessage.sendAddGroupMember(a)};f.onInviteGuild=function(a){Sendmessage.GuildOperate(10,a)};f.showOperationsBtnsByType=function(a,b){this.checkPlayer_btn.visible=b;this.makeDeal_btn.visible=b&&(0==a||1==a);this.dealFriend_btn.visible=0==a;this.privateChat_btn.visible=b&&(0==a||1==a);this.beBad_btn.visible=
0==a;this.addFriend_btn.visible=1==a;this.cancelBeBad_btn.visible=2==a;this.inviteGroup_btn.visible=(0==a||1==a)&&this.meetInviteGroup();this.inviteMem_btn.visible=(0==a||1==a)&&this.meetInviteMem()};f.meetInviteGroup=function(){return G_BaseSetList[0].val&&0<G_Team_Grop_List.length};f.meetInviteMem=function(){var a=ObjectManage.findobject(playerID).grildname;if(a)return-1<a.indexOf("\u638c\u95e8\u4eba")};f.showOperationNodesSort=function(a){for(var b,d=[],n=this.btns_box._childs.length,c=0;c<n;c++)b=
this.btns_box._childs[c],a.length<n&&a.push({x:b.x,y:b.y}),b.visible&&d.push(b);for(b=0;b<d.length;b++)d[b].x=a[b].x,d[b].y=a[b].y,1==d.length&&(d[b].x=97);return d.length};f.autoBgHeight=function(a){this.bg_img.visible=!0;switch(a){case 1:case 2:this.bg_img.height=130;break;case 3:case 4:this.bg_img.height=180;break;case 5:case 6:this.bg_img.height=250;break;default:this.bg_img.height=310}};f.onClose=function(){this.visible=!1};return e}(FriendInfoTip),SetingItem=function(){function e(){e.__super.call(this);
this.init()}Laya.class(e,"SetingItem",SetingItemUI);var f=e.prototype;f.init=function(){this.item_list.vScrollBarSkin="";this.item_list.selectEnable=!0;this.item_list.renderHandler=new Laya.Handler(this,this.updateItem);this.item_list.mouseHandler=new Laya.Handler(this,this.clickItem);this.close_btn.on(Laya.Event.CLICK,this,this.onClose);Laya.stage.on("updateSetingItem",this,this.showUI)};f.showUI=function(a,b,d){this.titleType=a;this.objName=d;this.title_txt.changeText(a?"\u6280\u80fd\u8bbe\u7f6e":
"\u836f\u54c1\u8bbe\u7f6e");this.item_list.array=b;this.item_list.refresh()};f.updateItem=function(a,b){if(b=a.dataSource)GameUtil.loadImg(b.icon[0],b.icon[1],function(d){a.getChildByName("icon_img").skin=d}),a.getChildByName("name_lab").changeText(b.name),a.getChildByName("desc_lab").changeText(b.desc),a.getChildByName("desc_lab").wordWrap=!0};f.clickItem=function(a,b){"click"==a.type&&(a=a.target,Laya.stage.event("synchronousIcon",[a.getChildByName("icon_img").skin,this.objName,a.dataSource.icon,
this.titleType]),GlobalCfglist[this.objName]=a.dataSource.name,this.onClose())};f.onClose=function(){this.visible=!1};return e}(SetingItem),SetingPickUp=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"SetingPickUp",SetingPickUpUI);var f=e.prototype;f.init=function(){this.pickUp_list.vScrollBarSkin="";this.pickUp_list.selectEnable=!0;this.pickUp_list.renderHandler=new Laya.Handler(this,this.updateItem);this.close_btn.on(Laya.Event.CLICK,this,this.onClose);Laya.stage.on("updateSetingPickUp",
this,this.showUI)};f.showUI=function(a){this.pickUp_list.array=a;this.pickUp_list.refresh()};f.updateItem=function(a,b){if(a.dataSource){b=a.dataSource;var d=a.getChildByName("showName_check");var n=a.getChildByName("autoPick_check");a.getChildByName("name_lab").changeText(b.itemname);d.selected=b.isshow;n.selected=b.prompt;d.hasClick||(d.hasClick=!0,d.on(Laya.Event.CLICK,this,this.onShowChange));n.hasClick||(n.hasClick=!0,n.on(Laya.Event.CLICK,this,this.onAutoPickChange))}};f.onShowChange=function(a){a.target.parent.dataSource.isshow=
a.target.selected;Gameconfig.setItemlist()};f.onAutoPickChange=function(a){a.target.parent.dataSource.ispickup=a.target.selected;a.target.parent.dataSource.prompt=a.target.selected;Gameconfig.setItemlist()};f.onClose=function(){this.visible=!1};return e}(SetingPickUp),TeamInviteList=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"TeamInviteList",TeamInviteListUI);var f=e.prototype;f.init=function(){this.initList();this.near_btn.on(Laya.Event.CLICK,this,this.showUI.bind(this,
0));this.friend_btn.on(Laya.Event.CLICK,this,this.showUI.bind(this,1));this.close_btn.on(Laya.Event.CLICK,this,this.onClose);Laya.stage.on("updateTeamInviteList",this,this.updateList);this.showUI(0)};f.initList=function(){this.invite_list.selectEnable=!0;this.invite_list.renderHandler=new Laya.Handler(this,this.updateItem);this.invite_list.mouseHandler=new Laya.Handler(this,this.clickItem)};f.showUI=function(a){var b=RelationManager.getInstance().getTeamInviteListByType(a);this.near_btn.selected=
0==a;this.friend_btn.selected=1==a;this.updateList(b)};f.updateList=function(a){this.invite_list.array=a;this.invite_list.refresh()};f.updateItem=function(a,b){if(a.dataSource){var d=["name","level","guild"];var n=a.getChildByName("invite_btn");for(var c=0;3>c;c++){var h=a.getChildByName("content_txt_"+c);h.changeText(a.dataSource[d[c]])}n.hasClick||(n.hasClick="true",n.on(Laya.Event.CLICK,this,this.onInvite.bind(this,a.dataSource.name)));a.getChildByName("selectEffect_img").visible=b==this.invite_list.selectedIndex}};
f.clickItem=function(a,b){if("click"==a.type)if("invite_btn"==a.target.name){if(a.target.dataSource)this.onInvite(a.target.dataSource.name)}else a.target.getChildByName("selectEffect_img").visible=!0};f.onInvite=function(a){Sendmessage.sendAddGroupMember(a)};f.onClose=function(){Laya.stage.event("showSocialWinCloseBtn");this.visible=!1};return e}(TeamInviteList),TeamOperationTip=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"TeamOperationTip",TeamOperationTipUI);var f=e.prototype;
f.init=function(){this.posList=[];Laya.stage.on("updateTeamOperationTipUI",this,this.showUI);this.addClickEvent()};f.addClickEvent=function(){this.sendPos_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.exitTeam_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.check_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.privateChat_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.makeDeak_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.outTeam_btn.on(Laya.Event.CLICK,
this,this.onClickOperationBtn);this.inviteMem_btn.on(Laya.Event.CLICK,this,this.onClickOperationBtn);this.close_btn.on(Laya.Event.CLICK,this,this.onClose)};f.showUI=function(a,b,d){this.name_txt.text=b;this.showOperationsBtnsByType(d,a);a=this.showOperationBtnsSort(this.posList);this.autoBgHeight(a);this.setCenterPosOnParent()};f.setCenterPosOnParent=function(){this.x=(this.parent.bg_img.width-this.bg_img.width)/2;this.y=(this.parent.bg_img.height-this.bg_img.height)/2};f.showOperationsBtnsByType=
function(a,b){this.sendPos_btn.visible=b&&a;this.exitTeam_btn.visible=b&&a;this.check_btn.visible=!b&&a||!a;this.privateChat_btn.visible=this.check_btn.visible;this.makeDeak_btn.visible=this.check_btn.visible;this.outTeam_btn.visible=a&&!b;this.inviteMem_btn.visible=a&&!b&&this.meetInviteMem()};f.meetInviteMem=function(){var a=ObjectManage.findobject(playerID).grildname;if(a)return-1<a.indexOf("\u638c\u95e8\u4eba")};f.showOperationBtnsSort=function(a){for(var b,d=[],n=this.btns_box._childs.length,
c=0;c<n;c++)b=this.btns_box._childs[c],a.length<n&&a.push({x:b.x,y:b.y}),b.visible&&d.push(b);for(b=0;b<d.length;b++)d[b].x=a[b].x,d[b].y=a[b].y,1==d.length&&(d[b].x=130);return d.length};f.onClickOperationBtn=function(a){var b=this.name_txt.text;switch(a.target.name){case "sendPos_btn":this.onSendPos();break;case "exitTeam_btn":this.onExitTeam(b);break;case "outTeam_btn":this.onOutTeam(b);break;case "check_btn":this.onCheck(b);break;case "privateChat_btn":this.onPrivateChat(b);break;case "makeDeak_btn":this.onMakeDeal();
break;case "inviteMem_btn":this.onInviteGuild(b)}};f.onSendPos=function(){Laya.stage.event("show_chat_node",!0);Laya.stage.event("sendCaptainPosInTeam")};f.onExitTeam=function(a){a&&""!=a&&(Sendmessage.sendDelGroupMember(a),this.onClose())};f.onOutTeam=function(a){a&&""!=a&&(Sendmessage.sendDelGroupMember(a),this.onClose())};f.onCheck=function(a){if(a=RelationManager.getInstance().getPlayerIdByName(a)){var b=ObjectManage.findobject(a);Sendmessage.sendQueryState(a,b.grid.x,b.grid.y)}else GameUtil.onShowTip("\u73a9\u5bb6\u4e0d\u5728\u9644\u8fd1\uff0c\u65e0\u6cd5\u67e5\u770b")};
f.onPrivateChat=function(a){Laya.stage.event("show_chat_dlg",["/"+a+" ",!0])};f.onMakeDeal=function(){Sendmessage.StartTrade()};f.onInviteGuild=function(a){Sendmessage.GuildOperate(10,a)};f.autoBgHeight=function(a){this.bg_img.visible=!0;switch(a){case 1:case 2:this.bg_img.height=130;break;case 3:case 4:this.bg_img.height=180;break;case 5:case 6:this.bg_img.height=250;break;default:this.bg_img.height=310}};f.onClose=function(){this.visible=!1};return e}(TeamOperationTip),UIRedPackOpen=function(){function e(){e.__super.call(this);
this.init()}Laya.class(e,"UIRedPackOpen",RedPackOpenUI);var f=e.prototype;f.init=function(){this.sendRedPack;Laya.stage.on("redPackOpen",this,this.beOpen);Laya.stage.on("openRedOpen",this,this.opens);Laya.stage.on("closeRedPackOpen",this,this.onClose);this.gainDetails_lab.on(Laya.Event.CLICK,this,this.openGainDetailsWin);this.close_btn.on(Laya.Event.CLICK,this,this.onClose)};f.beOpen=function(a,b,d,n){this.headIcon_img.skin=a;this.ownerName_lab.changeText("\u6765\u81ea"+b+"~");this.greeting_lab.changeText(d);
this.goldNum_lab.changeText(n);this.x=(this.parent.RedWindows.width-this.bg_img.width)/2;this.y=(this.parent.RedWindows.height-this.bg_img.height)/2};f.opens=function(){this.visible=!0};f.onClose=function(){this.visible=!1};f.openGainDetailsWin=function(){var a=GameUtil.InstanceOfMem(SendRedPackUI);a||(a=new UISendPak,Laya.stage.addChild(a));a.visible=!0;a.GetRedPackList()};return e}(UIRedPackOpen),UISocialWin=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UISocialWin",SocialWinUI);
var f=e.prototype;f.init=function(){this.selectIndex=0;this.addFriendTip;this.openWinObjList=[void 0,void 0,void 0,null];this.openWinClassList=[UIRedPak,UIFriend,UITeamGroup,null];this.startPos=new Laya.Point;this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.addMsgEvent();this.close_btn.on(Laya.Event.CLICK,this,this.onClose);this.redPacket_btn.on(Laya.Event.CLICK,this,this.onSocialDirectory.bind(this,0));this.friend_btn.on(Laya.Event.CLICK,this,this.onSocialDirectory.bind(this,1));this.temp_btn.on(Laya.Event.CLICK,
this,this.onSocialDirectory.bind(this,2));this.mail_btn.visible=!1;this.setTabShowByConfig()};f.setTabShowByConfig=function(){var a=g_GameConfigWEB.funActivity.fun;a&&(0==a.hongBao&&this.redPacket_btn.removeSelf(),0==a.haoYou&&this.friend_btn.removeSelf(),0==a.zuDui&&this.temp_btn.removeSelf())};f.addMsgEvent=function(){Laya.stage.on("updateSocialDirectory",this,this.onSocialDirectory);Laya.stage.on("openAddFriendTip",this,this.openAddFriendTip)};f.getIndexByFirstOpen=function(a,b){if(1!=b)return a;
switch(this.socialDirectory_box._childs[0]){case this.redPacket_btn:return 0;case this.friend_btn:return 1;case this.temp_btn:return 2;default:return 0}};f.onSocialDirectory=function(a,b){a=this.getIndexByFirstOpen(a,b);b=this.openWinObjList[a];null!==b&&(this.addFriendTip&&(this.addFriendTip.visible=!1),1==a&&Laya.stage.event("send_friend_info",[0,""]),this.close_btn.visible=!0,this.selectIndex=a,this.dirctorySelectedHandle(a),this.close_btn.zOrder=3,this.openWinObjList[a]=GameUtil.openWin(b,this,
this.openWinClassList[a]),this.openWinObjList[a].zOrder=a,this.closeOtherWin())};f.closeOtherWin=function(){for(var a=0;a<this.openWinObjList.length;a++)a!=this.selectIndex&&this.closeOpenWin(a)};f.dirctorySelectedHandle=function(a){this.redPacket_btn.selected=0==a;this.friend_btn.selected=1==a;this.temp_btn.selected=2==a};f.openAddFriendTip=function(a,b){this.addFriendTip=GameUtil.openWin(this.addFriendTip,this,AddFriendTip);this.addFriendTip.zOrder=100;Laya.stage.event("beOpenAddFriendTip",[a,b])};
f.onClose=function(){this.visible=!1;this.closeOpenWin(this.selectIndex)};f.closeOpenWin=function(a){switch(a){case 0:Laya.stage.event("closeRedPack");break;case 1:Laya.stage.event("closeFriend");break;case 2:Laya.stage.event("closeTeamGroup")}};f.onMouseDown=function(a){if("close_btn"==a.target.name&&a.target.parent==this)this.onClose();else this.getNoMoveObj().hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startPos.x=a.stageX,this.startPos.y=a.stageY,this.on(Laya.Event.MOUSE_MOVE,this,
this.onMouseMove),this.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp))};f.getNoMoveObj=function(){switch(this.selectIndex){case 0:return this.openWinObjList[this.selectIndex].redPack_list;case 1:return this.openWinObjList[this.selectIndex].friend_list;case 2:return this.openWinObjList[this.selectIndex].team_list}};f.onMouseUp=function(){this.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseMove=function(a){this.x+=a.stageX-this.startPos.x;this.y+=
a.stageY-this.startPos.y;this.startPos.x=a.stageX;this.startPos.y=a.stageY};return e}(UISocialWin),UIHangHui21=function(){function e(){e.__super.call(this);this.Init()}g_SelectRoleIdx=-1;g_SelectTitleIdx=0;Laya.class(e,"UIHangHui1",HangHui21UI);var f=e.prototype;f.Init=function(){this.startpos=new Laya.Point;this.titleSelectIdx=0;this.titleSelectName="\u6240\u6709\u6210\u5458";this.memberSelectIdx=-1;this.memberSelectName="";this.applySelectIdx=-1;this.applySelectName="";this.relationSelectIdx=-1;
this.relationSelectState=this.relationSelectName="";this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_exit.on(Laya.Event.CLICK,this,this.onExit);this.vbtn_info.on(Laya.Event.CLICK,this,this.onShowUi,[1]);this.vbtn_member.on(Laya.Event.CLICK,this,this.onShowUi,[2]);this.vbtn_apply.on(Laya.Event.CLICK,this,this.onShowUi,[3]);this.vbtn_alliance.on(Laya.Event.CLICK,this,this.onShowUi,[4]);this.btn_showGuildList.on(Laya.Event.CLICK,this,this.onShowGuildList);this.btn_infoEdit.on(Laya.Event.CLICK,
this,this.onInfoEdit);this.btn_closeEditInfo.on(Laya.Event.CLICK,this,this.onCloseEdit);this.btn_editGuild.on(Laya.Event.CLICK,this,this.onEditGuildInfo);this.btn_addTitle.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_editTitle.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_delTitle.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_changePresident.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_quitGuild.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_memberchat.on(Laya.Event.CLICK,
this,this.onBtnClick);this.btn_jointeam.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_addfriend.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_memberkick.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_settitle.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_memberinfo_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_settitle_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_setpresident_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_titledel_close.on(Laya.Event.CLICK,
this,this.onBtnClick);this.btn_memberkick_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_edittitle_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_addtitle_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_memberkick_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_memberkick_ok.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_setpresident_ok.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_setpresident_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_settitle_ok.on(Laya.Event.CLICK,
this,this.onBtnClick);this.btn_settitle_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_addtitle_ok.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_addtitle_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_edittitle_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_edittitle_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_edittitle_ok.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_titledel_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_titledel_ok.on(Laya.Event.CLICK,
this,this.onBtnClick);this.btn_quitGuild_ok.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_quitGuild_cancel.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_quitGuild_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_apply_ok.on(Laya.Event.CLICK,this,this.onApplyDecide,[!0]);this.btn_apply_refuse.on(Laya.Event.CLICK,this,this.onApplyDecide,[!1]);this.btn_apply_cleanList.on(Laya.Event.CLICK,this,this.onRefuseAll);this.check_allowAlliance.on(Laya.Event.CLICK,this,this.onAllowAlliance);
this.btn_relation_search.on(Laya.Event.CLICK,this,this.onShowSearch);this.btn_search_cancel.on(Laya.Event.CLICK,this,this.onCloseSearch);this.btn_search_close.on(Laya.Event.CLICK,this,this.onCloseSearch);this.btn_search_ok.on(Laya.Event.CLICK,this,this.onSearchRetation);this.btn_manage_close.on(Laya.Event.CLICK,this,this.onCloseManage);this.btn_mgt_follow.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_mgt_war.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_mgt_allance.on(Laya.Event.CLICK,this,
this.onBtnClick);this.btn_alliance_close.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_alliance_ok.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_alliance_refuse.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_cancel_allance.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_cancel_follow.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_cancel_war.on(Laya.Event.CLICK,this,this.onBtnClick);this.btn_relation_manage.on(Laya.Event.CLICK,this,this.onBtnClick);Laya.stage.on("update_guild_info",
this,this.SetHangHuiBaseInfo);Laya.stage.on("update_guild_chat",this,this.updateGuildChat);this.list_guildChat.vScrollBarSkin="";this.list_guildChat.selectEnable=!0;this.updateGuildChat();Laya.stage.on("update_guald_title",this,this.updateMemberTitle);this.list_guild_title.vScrollBarSkin="";this.list_guild_title.selectEnable=!0;this.list_guild_title.selectHandler=new Laya.Handler(this,this.onTitleSelect);this.list_guild_title.renderHandler=new Laya.Handler(this,this.onTitleRender);Laya.stage.on("update_guald_user",
this,this.updateMemberList);this.list_guildMember.vScrollBarSkin="";this.list_guildMember.selectEnable=!0;this.list_guildMember.selectHandler=new Laya.Handler(this,this.onMemberSelect);this.list_guildMember.renderHandler=new Laya.Handler(this,this.onMemberRender);Laya.stage.on("upadte_applyList",this,this.updateApplyList);this.list_apply.vScrollBarSkin="";this.list_apply.selectEnable=!0;this.list_apply.selectHandler=new Laya.Handler(this,this.onApplySelect);this.list_apply.renderHandler=new Laya.Handler(this,
this.onApplyRender);Laya.stage.on("updata_relationList",this,this.updateRelationList);this.list_relation.vScrollBarSkin="";this.list_relation.selectEnable=!0;this.list_relation.selectHandler=new Laya.Handler(this,this.onRelationSelect);this.list_relation.renderHandler=new Laya.Handler(this,this.onRelationRender);Sendmessage.sendGuildMemberList(0);Sendmessage.sendGuildMemberList(1);Sendmessage.sendGuildMemberList(2);Sendmessage.sendGuildMemberList(3);this.SetHangHuiBaseInfo();this.setMasterBtn()};
f.setMasterBtn=function(){this.btn_infoEdit.disabled=0==G_Guald_Admin;this.btn_addTitle.disabled=0==G_Guald_Admin;this.btn_editTitle.disabled=0==G_Guald_Admin;this.btn_apply_cleanList.disabled=0==G_Guald_Admin;this.btn_apply_refuse.disabled=0==G_Guald_Admin;this.check_allowAlliance.disabled=0==G_Guald_Admin;this.btn_relation_search.disabled=0==G_Guald_Admin;this.btn_relation_manage.disabled=0==G_Guald_Admin;this.btn_apply_ok.disabled=0==G_Guald_Admin;this.btn_delTitle.disabled=0==G_Guald_Admin};f.onShowUi=
function(a){if(a)switch(this.bg_guildInfo.visible=!1,this.bg_memberList.visible=!1,this.bg_applyList.visible=!1,this.bg_relation.visible=!1,this.vbtn_info.selected=!1,this.vbtn_member.selected=!1,this.vbtn_apply.selected=!1,this.vbtn_alliance.selected=!1,a){case 1:this.bg_guildInfo.visible=!0;this.vbtn_info.selected=!0;Sendmessage.sendGuildMemberList(0);break;case 2:this.bg_memberList.visible=!0;this.vbtn_member.selected=!0;0!=G_Guald_Admin&&(this.btn_editTitle.disabled=0==this.titleSelectIdx);Sendmessage.sendGuildMemberList(1);
break;case 3:this.bg_applyList.visible=!0;this.vbtn_apply.selected=!0;Sendmessage.sendGuildMemberList(2);break;case 4:this.bg_relation.visible=!0,this.vbtn_alliance.selected=!0,Sendmessage.sendGuildMemberList(3)}};f.onTitleSelect=function(a){this.titleSelectIdx=a;this.list_guild_title.array[a]&&this.list_guild_title.array[a].btn_memberTitle&&(this.titleSelectName=this.list_guild_title.array[a].btn_memberTitle.label,0!=G_Guald_Admin&&(this.btn_delTitle.disabled=0==a||1==a||2==a,this.btn_editTitle.disabled=
0==a));this.memberSelectIdx=-1;this.memberSelectName="";this.updateMemberList()};f.onMemberSelect=function(a){this.memberSelectIdx=a;this.bg_memberInfo.visible=!0};f.onApplySelect=function(a){this.applySelectIdx=a};f.onRelationSelect=function(a){this.relationSelectIdx=a;if(1==G_Guald_Admin&&this.list_relation.array[a]){var b=this.list_relation.array[a].lb_relation_online.text;this.btn_relation_manage.visible=!1;this.btn_cancel_allance.visible=!1;this.btn_cancel_follow.visible=!1;"\u4e2d\u7acb"==b?
this.btn_relation_manage.visible=!0:"\u5173\u6ce8"==b?this.btn_cancel_follow.visible=!0:"\u8054\u76df"==b?this.btn_cancel_allance.visible=!0:"\u7533\u8bf7\u8054\u76df"==b&&(this.bg_alliance.visible=!0,this.lb_alliance_name.text=this.list_relation.array[a].lb_relation_guildName.text,this.btn_relation_manage.visible=!0)}};f.updateMemberTitle=function(){this.list_guild_title.array=[];this.list_guild_title.array.push({btn_memberTitle:{label:"\u6240\u6709\u6210\u5458"}});this.btn_delTitle.disabled=0==
this.titleSelectIdx||1==this.titleSelectIdx||2==this.titleSelectIdx;this.cmb_settitle.labels="";for(var a=0;a<G_Guald_Title_List.length;a++){var b=G_Guald_Title_List[a].split(",")[0];""!=b&&this.list_guild_title.array.push({btn_memberTitle:{label:b}});this.cmb_settitle.labels+=b;a!=G_Guald_Title_List.length-1&&(this.cmb_settitle.labels+=",")}this.list_guild_title.refresh()};f.onTitleRender=function(a,b){a.getChildByName("btn_memberTitle").selected=b==this.titleSelectIdx};f.onMemberRender=function(a,
b){b=b==this.memberSelectIdx;if(a.getChildByName("img_member_chose").visible=b)this.memberSelectName=a.getChildByName("lb_member_name").text,this.lb_menberInfo.text=this.memberSelectName,this.btn_settitle.disabled=this.memberSelectName==G_Guald_Admin_Name};f.onApplyRender=function(a,b){b=b==this.applySelectIdx;a.getChildByName("img_apply_chose").visible=b;a.getChildByName("lb_relation_online");b&&(this.applySelectName=a.getChildByName("lb_apply_name").text)};f.onRelationRender=function(a,b){b=b==
this.relationSelectIdx;if(a.getChildByName("img_relation_chose").visible=b)this.relationSelectName=a.getChildByName("lb_relation_guildName").text,this.relationSelectState=a.getChildByName("lb_relation_online").text};f.updateMemberList=function(){this.list_guildMember.array=[];this.memberSelectIdx=-1;this.memberSelectName="";var a=[];if("\u6240\u6709\u6210\u5458"==this.titleSelectName)for(var b=0;b<G_Guald_Title_List.length;b++)a.push(G_Guald_Title_List[b]);else a.push(G_Guald_Title_List[this.titleSelectIdx-
1]);for(var d=0;d<a.length;d++){var n=a[d];if(n)for(n=n.split(","),b=3;b<n.length;b++){var c=n[b];if(-1!=c.indexOf("|")){c=c.split("|");var h="#d8d3cf",m="\u5728\u7ebf";"0"==c[1]&&(h=this.getOffLineTime(c[5]),m=0<h?"\u79bb\u7ebf"+h+"\u5929":"\u79bb\u7ebf\u5c0f\u4e8e1\u5929",h="#776b5d");this.list_guildMember.array.push({lb_member_name:{text:c[0]},lb_member_position:{text:n[0]},lb_member_level:{text:c[4]},lb_member_sex:{text:this.GetSex(c[3])},lb_member_job:{text:this.GetJob(c[2])},lb_member_online:{text:m,
color:h}})}}}this.list_guildMember.refresh()};f.updateApplyList=function(a){if(a&&""!=a&&(this.list_apply.array=[],this.applySelectIdx=-1,this.applySelectName="",a=a.split(";"),3<a.length)){for(var b=3;b<a.length;b++){var d=a[b];if(-1!=d.indexOf(",")){d=d.split(",");var n="#d8d3cf",c="\u5728\u7ebf";"FALSE"==d[1]&&(n="#776b5d",c="\u79bb\u7ebf");this.list_apply.array.push({lb_apply_name:{text:d[0]},lb_apply_job:{text:this.GetJob(d[2])},lb_apply_level:{text:d[3]},lb_apply_online:{text:c,color:n}})}}this.list_apply.refresh()}};
f.updateRelationList=function(){this.list_relation.array=[];this.cmb_search.labels="\u6240\u6709\u884c\u4f1a";this.relationSelectIdx=-1;this.relationSelectState=this.relationSelectName="";for(var a=0;a<G_Guald_HangHui_World_List.length;a++){var b=G_Guald_HangHui_World_List[a].split(",");if(b[0]!=G_Guild_Name){this.cmb_search.labels+=","+b[0];var d=this.getRelation(b[0]);this.list_relation.array.push({lb_relation_idx:{text:a+1},lb_relation_guildName:{text:b[0]},lb_relation_presidentName:{text:b[1]},
lb_relation_memberNum:{text:b[2]+"/"+b[3]},lb_relation_online:{text:d}})}}this.list_relation.refresh()};f.getRelation=function(a){var b=G_WaiJiaoStr.split("/"),d=b[0].split(",");for(k=0;k<d.length;k++){var n=d[k].split("|");if(a==n[0])return"\u5173\u6ce8"}n=b[1].split(",");for(k=0;k<n.length;k++)if(a==n[k])return"\u7533\u8bf7\u8054\u76df";d=b[2].split(",");for(k=0;k<d.length;k++)if(n=d[k].split("|"),a==n[0])return"\u5ba3\u6218";b=b[3].split(",");for(k=0;k<b.length;k++)if(a==b[k])return"\u8054\u76df";
return"\u4e2d\u7acb"};f.onInfoEdit=function(){this.ipt_guildName.text=G_Guild_Name;this.ipt_guildNotic.text="";this.bg_editGuildInfo.visible=!0};f.updateGuildChat=function(){var a=this.makeGuildInfoStr();this.list_guildChat.array=[];for(var b=0;b<a.length;b++)""!=a[b]&&this.list_guildChat.array.push({lb_guildInfoChat:{text:a[b]}});this.list_guildChat.refresh()};f.makeGuildInfoStr=function(){for(var a=[],b=0;b<g_guildEventInfo.length;b++){var d=g_guildEventInfo[b],n="",c=this.infoTimeStr(d[4]);switch(d[0]){case 1:n=
c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u521b\u5efa\u4e86\u884c\u4f1a";break;case 2:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u6279\u51c6\u300c"+d[2]+"\u300d\u52a0\u5165\u884c\u4f1a";break;case 3:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u9080\u8bf7\u300c"+d[2]+"\u300d\u52a0\u5165\u884c\u4f1a";break;case 4:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u5c06\u300c"+d[2]+"\u300d\u8e22\u51fa\u884c\u4f1a";break;case 5:n=c+" \u6210\u5458\u300c"+d[1]+"\u300d\u9000\u51fa\u884c\u4f1a";break;case 6:n=c+" \u4f1a\u957f\u300c"+
d[1]+"\u300d\u5c06\u300c"+d[2]+"\u300d"+d[3];break;case 7:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u8f6c\u8ba9\u4f1a\u957f\u804c\u52a1\u7ed9\u300c"+d[2]+"\u300d";break;case 8:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u4e0e\u300c"+d[2]+"\u300d\u8fdb\u884c\u4e86\u8054\u76df";break;case 9:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u4e0e\u300c"+d[2]+"\u300d\u53d6\u6d88\u4e86\u8054\u76df";break;case 10:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u5c06\u300c"+d[2]+"\u300d\u8bbe\u7f6e\u6210\u654c\u5bf9";break;case 11:n=
c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u5bf9\u300c"+d[2]+"\u300d\u8fdb\u884c\u4e86\u5173\u6ce8";break;case 12:n=c+" \u4f1a\u957f\u300c"+d[1]+"\u300d\u5bf9\u300c"+d[2]+"\u300d\u53d6\u6d88\u4e86\u5173\u6ce8"}a.push(n)}return a};f.infoTimeStr=function(a){if(a)return this.getOffLineTime(a),a.split(" ")[0]+""};f.onEditGuildInfo=function(){this.bg_editGuildInfo.visible=!1;for(var a=this.ipt_guildNotic.text.split("\n"),b="",d=0;d<a.length;d++)b+=a[d]+"\n";a=0;d="1";this.check_onlyOl.selected&&-1==this.cb_levelLimit.selectedIndex?
a=1:this.check_onlyOl.selected&&-1!=this.cb_levelLimit.selectedIndex&&(a=2,d=40+20*this.cb_levelLimit.selectedIndex);0==a&&Sendmessage.GuildManagereCruit2(1,"0");1!=a&&2!=a||Sendmessage.GuildManagereCruit2(1,"1");Sendmessage.GuildManagereCruit2(2,d+"");Sendmessage.guildEditorNotice(b)};f.onCloseEdit=function(){this.bg_editGuildInfo.visible=!1};f.SetHangHuiBaseInfo=function(){this.bg_guildName.text=G_Guild_Name;this.bg_presidentName.text=G_Guald_Admin_Name;this.lb_memberNum.text=G_Guald_OnlineCount+
" / "+G_Guald_NowCount;this.ta_guildNotic.text=G_Guald_Notice_List;this.setMasterBtn()};f.onShowGuildList=function(){Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui_world"}]);Laya.stage.event("update_world_list")};f.onApplyDecide=function(a){-1!=this.applySelectIdx&&""!=this.applySelectName&&(a?Sendmessage.SendManagerAdd(0,this.applySelectName+";"):Sendmessage.SendManagerAdd(1,this.applySelectName+";"),Sendmessage.sendGuildMemberList(2))};f.onAllowAlliance=function(){Sendmessage.sendSay("@\u5141\u8bb8\u8054\u76df");
0!=G_Guald_Can_Lianmeng?(G_Guald_Can_Lianmeng=0,this.check_allowAlliance.selected=!1):(this.check_allowAlliance.selected=!0,G_Guald_Can_Lianmeng=1)};f.onBtnClick=function(a){if(a&&a.target&&a.target.name)switch(a.target.name){case "btn_addTitle":this.bg_addtitle.visible=!0;break;case "btn_addtitle_close":case "btn_addtitle_cancel":this.bg_addtitle.visible=!1;this.ipt_addtitle_name.text="";this.ipt_addtitle_num.text="";break;case "btn_addtitle_ok":""==this.ipt_addtitle_name.text?Laya.stage.event("show_log",
[{txt:"\u5c01\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]):""==this.ipt_addtitle_num.text?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u4eba\u6570",color:"#ff0000"}]):""!=this.ipt_addtitle_name.text&&""!=this.ipt_addtitle_num.text&&(Sendmessage.GuildManagerEditor(this.ipt_addtitle_name.text,parseInt(this.ipt_addtitle_num.text),0),this.bg_addtitle.visible=!1,this.ipt_addtitle_name.text="",this.ipt_addtitle_num.text="");break;case "btn_editTitle":this.bg_edittitle.visible=!0;this.ipt_edittitle_name.text=
this.titleSelectName;break;case "btn_edittitle_close":case "btn_edittitle_cancel":this.bg_edittitle.visible=!1;this.ipt_edittitle_name.text="";this.ipt_edittitle_num.text="";break;case "btn_edittitle_ok":""==this.ipt_edittitle_name.text?Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]):""==this.ipt_edittitle_num.text?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u4eba\u6570",color:"#ff0000"}]):"\u6240\u6709\u6210\u5458"==this.ipt_edittitle_name.text?
Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u540d\u4e0d\u53ef\u6539\u4e3a\u6240\u6709\u6210\u5458",color:"#ff0000"}]):""!=this.ipt_edittitle_name.text&&""!=this.ipt_edittitle_num.text&&(Sendmessage.GuildManagerEditor(this.titleSelectName+";"+this.ipt_edittitle_name.text,this.ipt_edittitle_num.text,1),this.bg_edittitle.visible=!1,this.ipt_edittitle_name.text="",this.ipt_edittitle_num.text="");break;case "btn_delTitle":this.lb_titledel_name.text=this.titleSelectName;this.lb_titledel_end.x=this.lb_titledel_name.x+
this.lb_titledel_name.width;this.bg_titledel.visible=!0;break;case "btn_titledel_close":case "btn_titledel_cancel":this.bg_titledel.visible=!1;this.lb_titledel_name.text="";break;case "btn_titledel_ok":""!=this.lb_titledel_name.text&&(Sendmessage.GuildManagerEditor(this.lb_titledel_name.text,0,2),this.bg_titledel.visible=!1);break;case "btn_changePresident":this.bg_setpresident.visible=!0;this.lb_setpresident_name.text=this.memberSelectName;this.lb_setpresident_end.x=this.lb_setpresident_name.x+this.lb_setpresident_name.width;
this.closeMemberInfo();break;case "btn_quitGuild":this.bg_quitGuild.visible=!0;break;case "btn_quitGuild_close":case "btn_quitGuild_cancel":this.bg_quitGuild.visible=!1;break;case "btn_quitGuild_ok":G_Guald_Admin?Laya.stage.event("show_log",[{txt:"\u4f1a\u957f\u8bf7\u5728\u8f6c\u8ba9\u4f1a\u957f\u5934\u8854\u4e4b\u540e\u518d\u9000\u51fa\u884c\u4f1a\u3002",color:"#ff0000"}]):Sendmessage.GuildOperate(8,"");this.bg_quitGuild.visible=!0;break;case "btn_memberchat":""!=this.lb_menberInfo.text&&Laya.stage.event("show_chat_dlg",
["/"+this.lb_menberInfo.text+" ",!0]);break;case "btn_jointeam":""!=this.lb_menberInfo.text&&(0<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(this.lb_menberInfo.text):Sendmessage.sendCreateGroup(this.lb_menberInfo.text));break;case "btn_addfriend":""!=this.lb_menberInfo.text&&Sendmessage.FriendOpition(1,this.lb_menberInfo.text);break;case "btn_memberkick":this.bg_memberkick.visible=!0;this.lb_memberkick_name.text=this.memberSelectName;this.lb_memberkick_end.x=this.lb_memberkick_name.x+this.lb_memberkick_name.width;
this.closeMemberInfo();break;case "btn_settitle":this.cmb_settitle.selectedIndex=1;this.bg_settitle.visible=!0;this.closeMemberInfo();break;case "btn_settitle_close":case "btn_settitle_cancel":this.bg_settitle.visible=!1;break;case "btn_settitle_ok":""!=this.cmb_settitle.selectedLabel&&Sendmessage.GuildOperate(5,this.cmb_settitle.selectedLabel+"/"+this.memberSelectName),Sendmessage.sendGuildMemberList(1),this.bg_settitle.visible=!1;case "btn_memberinfo_close":this.closeMemberInfo();break;case "btn_memberkick_close":case "btn_memberkick_cancel":this.bg_memberkick.visible=
!1;this.lb_memberkick_name.text="";break;case "btn_memberkick_ok":""!=this.lb_memberkick_name.text&&Sendmessage.GuildOperate(9,this.lb_memberkick_name.text);this.bg_memberkick.visible=!1;this.lb_memberkick_name.text="";this.updateMemberList();break;case "btn_setpresident_close":case "btn_setpresident_cancel":this.bg_setpresident.visible=!1;this.lb_setpresident_name.text="";break;case "btn_setpresident_ok":""!=this.lb_setpresident_name.text&&Sendmessage.GuildOperate(7,this.lb_setpresident_name.text);
this.bg_setpresident.visible=!1;this.lb_setpresident_name.text="";this.updateMemberList();break;case "btn_relation_manage":this.bg_relation_manage.visible=!0;break;case "btn_mgt_follow":this.bg_relation_manage.visible=!1;Sendmessage.GuildOperate(1,this.relationSelectName);Sendmessage.sendGuildMemberList(3);break;case "btn_mgt_war":this.bg_relation_manage.visible=!1;Sendmessage.GuildOperate(3,this.relationSelectName);Sendmessage.sendGuildMemberList(3);break;case "btn_mgt_allance":this.bg_relation_manage.visible=
!1;Sendmessage.GuildOperate(2,this.relationSelectName);Sendmessage.sendGuildMemberList(3);break;case "btn_alliance_close":this.bg_alliance.visible=!1;break;case "btn_alliance_ok":this.bg_alliance.visible=!1;Sendmessage.GuildOperate(221,this.relationSelectName);Sendmessage.sendGuildMemberList(3);break;case "btn_alliance_refuse":this.bg_alliance.visible=!1;Sendmessage.GuildOperate(222,this.relationSelectName);Sendmessage.sendGuildMemberList(3);break;case "btn_cancel_allance":Sendmessage.GuildOperate(22,
this.relationSelectName);Sendmessage.sendGuildMemberList(3);break;case "btn_cancel_follow":Sendmessage.GuildOperate(11,this.relationSelectName),Sendmessage.sendGuildMemberList(3)}};f.closeMemberInfo=function(){this.bg_memberInfo.visible=!1;this.lb_menberInfo.text="";this.memberSelectIdx=-1};f.onShowSearch=function(){this.bg_search.visible=!0};f.onCloseSearch=function(){this.bg_search.visible=!1};f.onCloseManage=function(){this.bg_relation_manage.visible=!1};f.onSearchRetation=function(){var a=this.cmb_search.selectedLabel;
this.list_relation.array=[];for(var b=0;b<G_Guald_HangHui_World_List.length;b++){var d=G_Guald_HangHui_World_List[b].split(",");if(d[0]!=G_Guald_Name&&(a==d[0]||"\u6240\u6709\u884c\u4f1a"==a)){var n=this.getRelation(d[0]);this.list_relation.array.push({lb_relation_idx:{text:b+1},lb_relation_guildName:{text:d[0]},lb_relation_presidentName:{text:d[1]},lb_relation_memberNum:{text:d[2]+"/"+d[3]},lb_relation_online:{text:n}})}}this.list_relation.refresh();this.onCloseSearch()};f.onRefuseAll=function(){Sendmessage.guildRefuseAll();
this.list_apply.array=[];this.applySelectIdx=-1;this.applySelectName="";this.list_apply.refresh()};f.GetJob=function(a){return 0==a?"\u6218\u58eb":1==a?"\u6cd5\u5e08":"\u9053\u58eb"};f.GetSex=function(a){return 0==a?"\u7537":"\u5973"};f.getOffLineTime=function(a){a=new Date(a);var b=new Date,d=0;b>a&&(d=parseInt(Math.abs(b-a)/1E3/60/60/24));return d};f.onMouseDown=function(a){this.list_apply.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,
this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};f.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};f.onExit=function(){this.visible=!1;this.onShowUi(0)};return e}(HangHui21UI),setSkill=function(e){function f(){f.__super.call(this);
this.init()}function a(){a.__super.call(this);this.size(90,82);this.y=2;this.setinfo=function(c,h){this.removeChildren();var m=new Laya.Image;m.skin="gameres/ui/setskill_chosen.png";m.size(72,72);this.addChild(m);m.pos(9,-6);m.visible=d==h;h=new Laya.Button;h.size(60,60);h.stateNum=2;h.name="btn_skill";this.addChild(h);m=c.Def.btEffect;38==c.Def.wMagicId&&(m=4);46==c.Def.wMagicId&&(m=42);39==c.Def.wMagicId&&(m=0);GameUtil.getFile(2*m);h.skin=GameUtil.ParseMagicResName(2*m);h.pos(15,0);h=new Laya.Text;
h.fontSize=16;h.color="#d8b34e";h.text=c.Def.sMagicName;h.width=90;h.align="center";h.pos(0,65);this.addChild(h)}}var b=new Laya.Point(0,0),d=-1,n=null;Laya.class(f,"setSkill",SetSkillUI);Laya.class(a,"SkillRender",Laya.Box);e=f.prototype;e.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.close);this.btn_reset.on(Laya.Event.CLICK,this,this.onReset);this.btn_right.on(Laya.Event.CLICK,this,this.changePan,[!0]);this.btn_left.on(Laya.Event.CLICK,this,this.changePan,[!1]);var c=GameUtil.getSaveData("skillrocktype");
null==c&&(c=1);this.changePan(1==c);this.setBtnEvent();this.darwSkillList();this.endY=this.endX=this.startY=this.startX=0;this.list_selfskill.vScrollBarSkin="";this.list_selfskill.selectEnable=!0;this.list_selfskill.itemRender=a;this.list_selfskill.renderHandler=new Laya.Handler(this,this.onRender);this.list_selfskill.selectHandler=new Laya.Handler(this,this.Skillselect);this.list_selfskill.array=g_UserMagicList;Laya.stage.on("update_skill_list",this,this.UpdateSelfSkill)};e.setBtnEvent=function(){this.pan1_list=
[this.pan1_btn1,this.pan1_btn2,this.pan1_btn3,this.pan1_btn4,this.pan1_btn5,this.pan1_btn6,this.pan1_btn7,this.pan1_btn8];this.pan2_list=[this.pan2_btn1,this.pan2_btn2,this.pan2_btn3,this.pan2_btn4,this.pan2_btn5,this.pan2_btn6,this.pan2_btn7,this.pan2_btn8];for(var c=0;c<this.pan1_list.length;c++)this.pan1_list[c].on(Laya.Event.CLICK,this,this.setSkillIcon);for(c=0;c<this.pan2_list.length;c++)this.pan2_list[c].on(Laya.Event.CLICK,this,this.setSkillIcon)};e.onRender=function(c,h){c.setinfo(c.dataSource,
h);d==h&&(n=c.dataSource)};e.UpdateSelfSkill=function(){this.list_selfskill.refresh()};e.Skillselect=function(c){d=c;this.startX=this.mouseX;this.startY=this.mouseY};e.setSkillIcon=function(c){c=parseInt(c.target.name);if(0<=c&&8>c&&n&&-1!=d)if("\u57fa\u672c\u5251\u672f"==n.Def.sMagicName||"\u653b\u6740\u5251\u672f"==n.Def.sMagicName||"\u7cbe\u795e\u529b\u6218\u6cd5"==n.Def.sMagicName||"\u62a4\u4f53\u795e\u76fe"==n.Def.sMagicName)Laya.stage.event("show_log",[{txt:"\u88ab\u52a8\u6280\u80fd\u65e0\u6cd5\u4e3b\u52a8\u5e03\u7f6e",
color:"#ff0000"}]);else{var h=this.getSkin(n);this.endX=this.mouseX;this.endY=this.mouseY;this.dragAnimation(c,h)}};e.dragAnimation=function(c,h){if(0!=this.startX&&0!=this.startY&&0!=this.endX&&0!=this.endY){var m=new Laya.Button;2==m.stateNum;m.skin=h;m.size(50,50);m.pos(this.startX-50,this.startY-50);this.set_bg.addChild(m);var g=this;Laya.Tween.to(m,{x:this.endX-50,y:this.endY-50},300,null,Laya.Handler.create(this,function(){m.removeSelf();g.setSkillInfo(c,h)}));this.endY=this.endX=this.startY=
this.startX=0}};e.setSkillInfo=function(c,h){for(var m=0;m<g_SetupMagicList.length;m++)null!=g_SetupMagicList[m]&&n.Def.wMagicId==g_SetupMagicList[m].Def.wMagicId&&(GameApi.SetSkillKey(g_SetupMagicList[m].Def.wMagicId,0),Laya.stage.event("remove_magic",m),g_SetupMagicList[m]=null,this.pan1_list[m].skin="gameres/ui/att_base.png",this.pan2_list[m].skin="gameres/ui/att_base.png");null!=g_SetupMagicList[c]&&(GameApi.SetSkillKey(g_SetupMagicList[c].Def.wMagicId,0),activate_ok==g_SetupMagicList[c]&&(activate_ok=
null),Laya.stage.event("remove_magic",c));g_SetupMagicList[c]=n;GameApi.SetSkillKey(g_SetupMagicList[c].Def.wMagicId,c+49);null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);this.pan1_list[c].skin=h;this.pan2_list[c].skin=h;GameApi.SetSkillKey(g_SetupMagicList[c].Def.wMagicId,c+49);Laya.stage.event("update_icon",c);n=null;d=-1;this.list_selfskill.selectedIndex=-1;this.UpdateSelfSkill()};e.getSkin=function(c){var h=c.Def.btEffect;
38==c.Def.wMagicId&&(h=4);46==c.Def.wMagicId&&(h=42);39==c.Def.wMagicId&&(h=0);return GameUtil.ParseMagicResName(2*h)};e.darwSkillList=function(){for(var c=0;c<g_SetupMagicList.length;c++)if(g_SetupMagicList[c]&&8>c){var h=this.getSkin(g_SetupMagicList[c]);this.pan1_list[c].skin=h;this.pan2_list[c].skin=h}};e.onReset=function(){for(var c=0;c<g_UserMagicList.length;c++)null!=g_UserMagicList[c]&&GameApi.SetSkillKey(g_UserMagicList[c].Def.wMagicId,0);for(c=0;c<g_SetupMagicList.length;c++)Laya.stage.event("remove_magic",
c),g_SetupMagicList[c]=null,this.pan1_list[c].skin="gameres/ui/att_base.png",this.pan2_list[c].skin="gameres/ui/att_base.png";Laya.stage.event("add_magic_attack");Laya.stage.event("Magic_Refresh");Animationmodule.removeAniname("skilllockani");activate_ok=null};e.changePan=function(c){this.pan_skilltype1.visible=!c;this.btn_right.visible=!c;this.pan_skilltype2.visible=c;(this.btn_left.visible=c)?(Laya.stage.event("change_type",[1]),GameUtil.setSaveData("skillrocktype",1)):(Laya.stage.event("change_type",
[2]),GameUtil.setSaveData("skillrocktype",2))};e.onMouseDown=function(c){b.x=c.stageX;b.y=c.stageY;this.pan_drag.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.pan_drag.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.pan_drag.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseUp=function(){this.pan_drag.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};e.onMouseMove=function(c){this.set_bg.x+=c.stageX-b.x;this.set_bg.y+=c.stageY-b.y;b.x=c.stageX;b.y=c.stageY};e.close=function(){d=-1;n=
null;Laya.stage.off("update_skill_list",this,this.UpdateSelfSkill);this.removeSelf()};return f}(SetSkillUI),SaleAuctionTip=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"SaleAuctionTip",SaleAuctionTipUI);var f=e.prototype;f.init=function(){Laya.stage.on("updateSaleAuctionItem",this,this.setItemUI);Laya.stage.on("closeSaleAuctionTip",this,this.onClose);Laya.stage.on("sendWordShelvesOnItemBreakUp",this,this.sendWordShelvesOnItemBreakUp);this.close_btn.on(Laya.Event.CLICK,this,
this.onClose);this.cancel_btn.on(Laya.Event.CLICK,this,this.onClose);this.cancelShelves_btn.on(Laya.Event.CLICK,this,this.onClose);this.wordShelves_btn.on(Laya.Event.CLICK,this,this.onWordShelves);this.noShelves_btn.on(Laya.Event.CLICK,this,this.onNoShelves);this.item_box.on(Laya.Event.CLICK,this,this.onItem);this.cut_btn.on(Laya.Event.CLICK,this,this.onCut);this.add_btn.on(Laya.Event.CLICK,this,this.onAdd);this.bidPrice_input.on(Laya.Event.BLUR,this,this.priceLimit);this.onceProce_input.on(Laya.Event.BLUR,
this,this.priceLimit);this.currency_com.on(Laya.Event.CHANGE,this,this.onSelectCurrencySale);this.selectCurrencyType;this.hasCountDown};f.priceLimit=function(a){var b=parseInt(a.text);b=0<b?b:1;21E8<b&&(b=21E8,GameUtil.onShowTip("\u6700\u5927\u91d1\u989d\u4e3a21\u4ebf"));a.text=b};f.showUI=function(a){a&&a.data&&((this.isShelves=a.isShelves)?(this.title_txt.text="\u4e0a\u67b6\u9053\u5177",this.setItemUI(a.data),this.sale_box.visible=!0,this.cancelSale_box.visible=!1,this.currency_com.labels=g_auctionCurrency.labels,
this.currency_com.selectedIndex=0,this.full=a.full,this.limitAddNum=this.getLimitAddNum(a.data)):(this.title_txt.text="\u4e0b\u67b6\u9053\u5177",this.full=!1,this.sale_box.visible=!1,this.cancelSale_box.visible=!0,a=a.data,this.setItemUI(g_aucitonItemList[a.nRecog+""]),this.lastTime_lab.text=GameUtil.auctionLastTime(a.dateCompareNum),this.showShelvesNum_lab.text=a.wCount,this.icon_img.skin=this.icon1_img.skin=GameUtil.getCurrencyIconSkinByGoldType(a.btMoneyType),this.bid_input.text=a.nCurrentPrice,
this.once_input.text=a.nBuyOutPrice,this.unShelvesOrderID=a.nRecog,this.hasCountDown||(this.hasCountDown=!0,Laya.timer.loop(1E3,this,this.countDown))))};f.countDown=function(){this.isShelves||(this.lastTime_lab.text=GameUtil.auctionCountDownHandle(this.lastTime_lab.text))};f.setItemUI=function(a){a&&(this.itemData=a);this.itemData&&(this.itemName_lab.text=this.itemData.s.DBName,this.itemName_lab.color=Get2RGB(this.itemData.s.Color),GameUtil.ShowItemNum(this.itemData,this.item_box,this.item_box.width/
2,this.item_box.height/2))};f.onItem=function(){this.itemData&&GameUtil.NewShowItemsInf(this.itemData,null,Laya.stage.width/2,!0)};f.onSelectCurrencySale=function(){this.selectCurrencyType=g_auctionCurrency.currencyList[this.currency_com.selectedIndex];this.bidIcon_img.skin=this.oncePriceIcon_img.skin=GameUtil.getCurrencyIconSkinByGoldType(this.selectCurrencyType)};f.onWordShelves=function(){if(this.full)GameUtil.onShowTip("\u4e0a\u67b6\u6570\u91cf\u5df2\u6ee1\uff0c\u65e0\u6cd5\u4e0a\u67b6");else this.itemData&&
GameUtil.checkOpenAuctionHouseHandle(g_customItemAttr.AuctionNeedLevel[this.selectCurrencyType],g_customItemAttr.AuctionNeedRenewLevel[this.selectCurrencyType])&&(GameUtil.checkItemCanBreakUp(this.itemData)&&parseInt(this.shelvesNum_input.text)<this.limitAddNum?(GameUtil.DelBagItems(this.itemData.MakeIndex),Sendmessage.blessbottle(parseInt(this.shelvesNum_input.text),this.itemData.MakeIndex,this.itemData.s.Name),g_auctionBreakUpInfo={name:this.itemData.s.Name,nums:parseInt(this.shelvesNum_input.text)}):
Sendmessage.sendSaleAuction(this.itemData.MakeIndex,this.selectCurrencyType,this.bidPrice_input.text,this.onceProce_input.text),GameUtil.isMultiple(this.itemData)?Laya.stage.event("item_hint",[this.itemData,-this.itemData.Dura]):Laya.stage.event("item_hint",[this.itemData,-1]),Laya.stage.event("ShowDrug_Items"))};f.sendWordShelvesOnItemBreakUp=function(a){Sendmessage.sendSaleAuction(a,this.selectCurrencyType,this.bidPrice_input.text,this.onceProce_input.text)};f.onNoShelves=function(){Sendmessage.sendOffSaleAuction(this.unShelvesOrderID)};
f.onCut=function(){var a=parseInt(this.shelvesNum_input.text)-1;this.shelvesNum_input.text=1<a?a:1};f.getLimitAddNum=function(a){return GameUtil.checkMaterialItemCanBeStacked(a)?a.Dura+1:GameUtil.checkDrugItemCanBeStacked(a)?a.Dura:1};f.onAdd=function(){var a=parseInt(this.shelvesNum_input.text)+1;this.shelvesNum_input.text=a>this.limitAddNum?this.limitAddNum:a};f.onClose=function(){this.hasCountDown=!1;Laya.timer.clear(this,this.countDown);g_auctionBreakUpInfo=null;this.shelvesNum_input.text="1";
this.visible=!1};return e}(SaleAuctionTip),ShelvesItem=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"ShelvesItem",shelvesItemUI);var f=e.prototype;f.init=function(){Laya.stage.on("updateShelvesItemData",this,this.updateItemData);Laya.stage.on("shelvesitem_countdown",this,this.updateCountDown)};f.showUI=function(a){this.data=a;this.itemName_lab.text=a.sItemName;var b=GameUtil.getCurrencyIconSkinByGoldType(a.btMoneyType);this.bidIcon_img.skin=this.oncePriceIcon_img.skin=b;this.bidPrice_lab.text=
GameUtil.aucitonMoneyParse(a.nCurrentPrice);this.oncePrice_lab.text=GameUtil.aucitonMoneyParse(a.nBuyOutPrice);this.lastTime_lab.text=GameUtil.auctionLastTime(a.dateCompareNum);this.rate_lab.text=Math.floor(g_customItemAttr.AuctionTax[a.btMoneyType]/100)+"%";this.updateItemData()};f.updateCountDown=function(){this.lastTime_lab.text=GameUtil.auctionCountDownHandle(this.lastTime_lab.text)};f.updateItemData=function(){if(this.data){var a=g_aucitonItemList[this.data.nRecog+""];a&&(GameUtil.ShowItemNum(a,
this.item_box,this.item_box.width/2,this.item_box.height/2),this.itemName_lab.color=Get2RGB(a.s.Color))}};return e}(ShelvesItem),UIAuctionBidTip=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UIAuctionBidTip",BidTipUI);var f=e.prototype;f.init=function(){Laya.stage.on("closeAuctionBidTip",this,this.onClose);this.close_btn.on(Laya.Event.CLICK,this,this.onClose);this.cancel_btn.on(Laya.Event.CLICK,this,this.onClose);this.bid_btn.on(Laya.Event.CLICK,this,this.onBid);this.bidMoney_input.on(Laya.Event.BLUR,
this,this.changeBidMoney);this.item_box.on(Laya.Event.CLICK,this,this.onItem);this.data};f.showUI=function(a){this.data=a;this.title_txt.changeText(a.title);this.curBidMoney_txt.changeText(a.priceMoney);this.itemData=a.itemData;GameUtil.ShowItemNum(a.itemData,this.item_box,this.item_box.width/2,this.item_box.height/2);this.icon_img.skin=this.icon1_img.skin=GameUtil.getCurrencyIconSkinByGoldType(a.moneyType);this.itemName_lab.text=a.itemName;this.itemName_lab.color=a.itemNameColor;this.bidMoney_input.color=
a.moneyColor;this.minAddPrice=this.getMinAddBidNum();this.bidMoney_input.text=this.minAddPrice;this.icon1_img.visible=a.isBid;this.bidMoney_input.visible=a.isBid;this.bidMoney_bg.visible=a.isBid;this.bid_txt.visible=a.isBid};f.onItem=function(){this.itemData&&GameUtil.NewShowItemsInf(this.itemData,null,Laya.stage.width/2,!0)};f.onBid=function(){this.data.isBid?this.bidPriceGreaterHandle()||Sendmessage.sendPlusAuctionPrice(this.data.orderID,this.bidMoney_input.text):Sendmessage.sendOnePriceBuyAuction(this.data.orderID)};
f.bidPriceGreaterHandle=function(){var a=this;if(parseInt(this.bidMoney_input.text)>this.data.onceMoney)return GameUtil.onShowTip("\u5f53\u524d\u7ade\u4ef7\u5df2\u8d85\u8fc7\u4e00\u53e3\u4ef7\uff0c\u662f\u5426\u76f4\u63a5\u4e00\u53e3\u4ef7\u8d2d\u4e70",2,function(){Sendmessage.sendOnePriceBuyAuction(a.data.orderID)}),!0};f.changeBidMoney=function(a){a=parseInt(a.text);a=a>this.minAddPrice?a+"":this.minAddPrice+"";21E8<a&&(a=21E8,GameUtil.onShowTip("\u6700\u5927\u91d1\u989d\u4e3a21\u4ebf"));this.bidMoney_input.text=
a};f.getMinAddBidNum=function(){var a=g_customItemAttr.AuctionPlusPrice[this.data.moneyType]+this.data.priceMoney;return 0<a?a:1};f.onClose=function(){this.bidMoney_input.text=this.minAddPrice;this.visible=!1};return e}(UIAuctionBidTip),UIAuctionHouseWin=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UIAuctionHouseWin",AuctionHouseWinUI);var f=e.prototype;f.init=function(){this.tabTypeEnum={wordAuction:0,myAuction:1,myShelves:2};this.curTabType=this.tabTypeEnum.wordAuction;
this.currencyList;this.shelvesOrCancelTip;this.nav_panel.vScrollBarSkin="";this.startPos=new Laya.Point;this.noAuction_img.visible=!1;this.hasCountDown;this.curMoneyType;this.curCategoryType;this.equipCategory="\u6b66\u5668 \u7537\u6027\u8863\u670d \u5973\u6027\u8863\u670d \u5934\u76d4 \u6597\u7b20 \u9879\u94fe \u6212\u6307 \u624b\u956f \u52cb\u7ae0 \u9a6c\u724c \u76fe\u724c \u805a\u7075\u73e0 \u5b9d\u77f3 \u978b\u5b50 \u8170\u5e26 \u519b\u9f13 \u65f6\u88c5".split(" ");this.skillCategory=["\u9053\u58eb",
"\u6218\u58eb","\u6cd5\u5e08"];this.createNavigationLabel(this.equipCategory,this.equip_btn,"_equip");this.createNavigationLabel(this.skillCategory,this.skill_btn,"_skill");this.initList();this.addMsgEvent();this.addClickEvent();Sendmessage.sdCM_SERVERUNIXTIME();this.setShowPanelByTab(this.tabTypeEnum.wordAuction)};f.createCountDown=function(){this.hasCountDown||(this.hasCountDown=!0,Laya.timer.loop(1E3,this,this.countDown))};f.countDown=function(){Laya.stage.event("shelvesitem_countdown");Laya.stage.event("auctionitem_countdown")};
f.clearTimer=function(){this.hasCountDown=!1;Laya.timer.clear(this,this.countDown)};f.addMsgEvent=function(){Laya.stage.on("update_all_auctionData",this,this.updateAuctionData);Laya.stage.on("updateAuctionHouseMoney",this,this.updateMoney);Laya.stage.on("Auction_create_currency",this,this.createCurrency);Laya.stage.on("updateWordAuciton",this,this.updateWordAuciton);Laya.stage.on("updateMyShelvesInfo",this,this.updateMyShelvesInfo);Laya.stage.on("updateMyAuctionWin",this,this.updateMyAuctionWin);
Laya.stage.on("closeAuctionHouseWin",this,this.onClose);Laya.stage.on("updateBagListOnMyShelves",this,this.updateBagListOnMyShelves)};f.addClickEvent=function(){this.initTabClick();this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.moneyFilter_com.on(Laya.Event.CHANGE,this,this.changeAuctionSort);this.timeFilter_com.on(Laya.Event.CHANGE,this,this.changeAuctionSort);this.close_btn.on(Laya.Event.CLICK,this,this.onClose);this.all_btn.on(Laya.Event.CLICK,this,this.filerAuctionByCategory.bind(this,
0));this.equip_btn.on(Laya.Event.CLICK,this,this.filerAuctionByCategory.bind(this,1));this.skill_btn.on(Laya.Event.CLICK,this,this.filerAuctionByCategory.bind(this,2));this.material_btn.on(Laya.Event.CLICK,this,this.filerAuctionByCategory.bind(this,3));this.other_btn.on(Laya.Event.CLICK,this,this.filerAuctionByCategory.bind(this,4))};f.filerAuctionByCategory=function(a,b){var d=this.equip_btn.getChildByName("limitBox_equip"),n=this.skill_btn.getChildByName("limitBox_skill");if(!(d&&d.visible&&d.hitTestPoint(Laya.stage.mouseX,
Laya.stage.mouseY)||n&&n.visible&&n.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))){this.all_btn.selected=!1;this.equip_btn.selected=!1;this.skill_btn.selected=!1;this.material_btn.selected=!1;this.other_btn.selected=!1;b.target.selected=!0;b=this.currencyList[this.moneyFilter_com.selectedIndex-1];switch(a){case 0:this.curCategoryType=void 0;this.updateAuctionHouseData(this.getFilterDataNew([this.moneyDataFilter],[[b]]));break;case 1:this.curCategoryType=this.equipStdModes();a=this.equip_btn.getChildByName("limitBox_equip");
a.visible=!a.visible;this.skill_btn._childs[0].visible=!1;this.selectItemHandle(this.skill_btn._childs[0]);this.resetSortNavigation();this.updateAuctionHouseData(this.getFilterDataNew([this.categoryFilter,this.moneyDataFilter],[this.equipStdModes(),[b]]));break;case 2:this.curCategoryType=this.skillStdModes();a=this.skill_btn.getChildByName("limitBox_skill");a.visible=!a.visible;this.equip_btn._childs[0].visible=!1;this.selectItemHandle(this.equip_btn._childs[0]);this.resetSortNavigation();this.updateAuctionHouseData(this.getFilterDataNew([this.categoryFilter,
this.moneyDataFilter],[this.skillStdModes(),[b]]));break;case 3:this.curCategoryType=this.materialStdModes();this.updateAuctionHouseData(this.getFilterDataNew([this.categoryFilter,this.moneyDataFilter],[this.materialStdModes(),[b]]));break;case 4:this.curCategoryType=this.otherStdModes(),this.updateAuctionHouseData(this.getFilterDataNew([this.categoryFilter,this.moneyDataFilter],[this.otherStdModes(),[b]]))}this.nav_panel.refresh()}};f.resetSortNavigation=function(){for(var a,b=0,d=0;d<this.sort_vbox._childs.length;d++)a=
this.sort_vbox._childs[d],a.y=b,b+=a.height+(a._childs[0]&&a._childs[0].visible?a._childs[0].measureHeight:0)};f.createNavigationLabel=function(a,b,d){var n=new Laya.Box;n.name="limitBox"+d;n.x=b.x;n.y=41;n.visible=!1;b.addChild(n);for(var c=0;c<a.length;c++){var h=a[c];var m=new Laya.Button;m.skin="gameres/ui/auction_select.png";m.stateNum=2;m.label=h;m.labelColors="#f7ef8c,#f7ef8c,#f7ef8c,#f7ef8c";m.labelSize=16;m.labelStroke=1;m.x=b.x;m.y=27*c;m.nameIndex=c;n.addChild(m);m.on(Laya.Event.CLICK,
this,this.smallCategoryClick.bind(this,b.getChildByName("limitBox"+d)))}};f.selectItemHandle=function(a,b){for(var d in a._childs)a._childs[d].selected=!1;b&&b.target&&(b.target.selected=!0)};f.getMoneyData=function(){return[this.currencyList[this.moneyFilter_com.selectedIndex-1]]};f.smallCategoryClick=function(a,b){this.selectItemHandle(a,b);this.curCategoryType=GameUtil.getStdModeByName(b.target.label);a=this.getFilterDataNew([this.categoryFilter,this.moneyDataFilter],[GameUtil.getStdModeByName(b.target.label),
this.getMoneyData()]);this.updateAuctionHouseData(a)};f.initList=function(){this.auctionHouse_list.repeatX=1;this.auctionHouse_list.vScrollBarSkin="";this.auctionHouse_list.selectEnable=!0;this.auctionHouse_list.itemRender=UIAuctionItem;this.auctionHouse_list.renderHandler=new Laya.Handler(this,this.auctionHouseUpdateItem);this.myAuction_list.repeatX=1;this.myAuction_list.selectEnable=!0;this.myAuction_list.vScrollBarSkin="";this.myAuction_list.itemRender=UIAuctionItem;this.myAuction_list.renderHandler=
new Laya.Handler(this,this.myAuctionUpdateItem);this.saleAuction_list.repeatX=2;this.saleAuction_list.vScrollBarSkin="";this.saleAuction_list.itemRender=ShelvesItem;this.saleAuction_list.mouseHandler=new Laya.Handler(this,this.saleAuctionClickItem);this.saleAuction_list.renderHandler=new Laya.Handler(this,this.saleAuctionUpdateItem);this.bag_list.selectEnable=!0;this.bag_list.vScrollBarSkin="";this.bag_list.mouseHandler=new Laya.Handler(this,this.bagListClickItem);this.bag_list.renderHandler=new Laya.Handler(this,
this.bagListUpdateItem)};f.changeAuctionSort=function(a){switch(a.target){case this.timeFilter_com:a=this.sortAuctionByTimeUpOrDown(this.auctionHouse_list.array,0==this.timeFilter_com.selectedIndex);this.updateAuctionHouseData(a);break;case this.moneyFilter_com:0==this.moneyFilter_com.selectedIndex?(this.curMoneyType=void 0,a=this.getFilterDataNew([this.categoryFilter],[this.curCategoryType])):(this.curMoneyType=[this.currencyList[this.moneyFilter_com.selectedIndex-1]],a=this.getFilterDataNew([this.categoryFilter,
this.moneyDataFilter],[this.curCategoryType,this.curMoneyType])),this.updateAuctionHouseData(a)}};f.updateAuctionData=function(){var a=this.getFilterDataNew([this.categoryFilter,this.moneyDataFilter],[this.curCategoryType,this.curMoneyType]);this.updateAuctionHouseData(a)};f.updateWordAuciton=function(){this.all_btn.selected=!1;this.equip_btn.selected=!1;this.skill_btn.selected=!1;this.material_btn.selected=!1;this.other_btn.selected=!1;this.all_btn.selected=!0;this.nav_panel.refresh();this.updateAuctionHouseData(this.getFilterDataNew([this.categoryFilter,
this.moneyDataFilter],[this.curCategoryType,this.curMoneyType]))};f.updateAuctionHouseData=function(a){this.auctionHouse_list.array=a;this.auctionHouse_list.refresh();this.createCountDown();this.noAuction_img.visible=0==a.length&&this.curTabType!=this.tabTypeEnum.myShelves};f.initTabClick=function(){for(var a=this.tab_box.numChildren,b=0;b<a;b++)this.tab_box._childs[b].on(Laya.Event.CLICK,this,this.onTabDirectory.bind(this,b))};f.auctionHouseUpdateItem=function(a,b){a.dataSource&&(a.dataSource.isMyAuction=
!1,Sendmessage.sendRequestDetailAuction(a.dataSource.nRecog),a.updateShowUI(a.dataSource))};f.myAuctionUpdateItem=function(a,b){a.dataSource&&(a.dataSource.isMyAuction=!0,Sendmessage.sendRequestDetailAuction(a.dataSource.nRecog),a.updateShowUI(a.dataSource))};f.bagListUpdateItem=function(a,b){a.dataSource&&(b=a.getChildByName("shelvesItem_img"),GameUtil.ShowItemNum(a.dataSource,b,b.width/2,b.height/2))};f.bagListClickItem=function(a,b){"click"==a.type&&(this.shelvesOrCancelTip=GameUtil.openWin(this.shelvesOrCancelTip,
this,SaleAuctionTip),b=this.limitAuction_txt.text.split("/"),this.shelvesOrCancelTip.showUI({data:a.target.dataSource,isShelves:!0,full:b[0]===b[1]}))};f.saleAuctionUpdateItem=function(a,b){a.dataSource&&(Sendmessage.sendRequestDetailAuction(a.dataSource.nRecog),a.showUI(a.dataSource))};f.saleAuctionClickItem=function(a,b){"click"==a.type&&(this.shelvesOrCancelTip=GameUtil.openWin(this.shelvesOrCancelTip,this,SaleAuctionTip),this.shelvesOrCancelTip.showUI({data:a.target.dataSource,isShelves:!1}))};
f.onTabDirectory=function(a){this.curTabType=a;this.setShowPanelByTab(a);0==a&&(this.noAuction_img.visible=0==this.auctionHouse_list.array.length&&this.curTabType!=this.tabTypeEnum.myShelves,this.updateAuctionHouseData(this.getFilterDataNew([this.categoryFilter,this.moneyDataFilter],[this.curCategoryType,this.curMoneyType])));1==a?this.updateMyAuctionWin():2==a&&this.updateMyShelvesInfo()};f.updateMyAuctionWin=function(){var a=ObjectManage.findobject(playerID);this.onMyAuction(this.getFilterDataNew([this.bidNameFilter],
[GameUtil.getPureName(a)]))};f.myShelvesHandle=function(a){this.limitAuction_txt.changeText(a.length+"/"+g_customItemAttr.AuctionMaxItemsPersonalLimited);this.updateBagListOnMyShelves();this.saleAuction_list.array=a;this.saleAuction_list.refresh();this.createCountDown()};f.updateBagListOnMyShelves=function(){this.bag_list.array=this.getCanShelvesItemData();this.bag_list.refresh()};f.updateMyShelvesInfo=function(){var a=ObjectManage.findobject(playerID);this.myShelvesHandle(this.getFilterDataNew([this.ownerNameFilter],
[GameUtil.getPureName(a)]))};f.setShowPanelByTab=function(a){var b=a==this.tabTypeEnum.wordAuction,d=a==this.tabTypeEnum.myAuction;a=a==this.tabTypeEnum.myShelves;this.wordAuction_panel.visible=b;this.timeFilter_com.visible=b;this.moneyFilter_com.visible=b;this.myAuction_panel.visible=d;if(this.myShelves_panel.visible=a)this.noAuction_img.visible=!1;this.tab_box._childs[0].selected=b;this.tab_box._childs[1].selected=d;this.tab_box._childs[2].selected=a};f.onMyAuction=function(a){this.myAuction_list.array=
a;this.myAuction_list.refresh();this.noAuction_img.visible=0==a.length&&this.curTabType==this.tabTypeEnum.myAuction;this.createCountDown()};f.createCurrency=function(){var a=0;this.currencyList=[];for(var b=1;b<g_customItemAttr.AuctionEnabledMoneyType.length;b++){var d=g_customItemAttr.AuctionEnabledMoneyType[b]?b:0;if(0!=d){this.currencyList.push(d);var n=new Laya.Box;this.currency_box.addChild(n);var c=new Laya.Image,h=new Laya.Label;c.skin=GameUtil.getCurrencyIconSkinByGoldType(d);c.name="icon";
c.x=0;h.x=c.width;h.y=(c.height-16)/2;h.name="nums";h.color=16777215;h.fontSize=16;h.currencyType=d;h.stroke=2;var m=GameUtil.aucitonMoneyParse(GameUtil.getCurrencyNumByGoldType(d));h.changeText(m);this.moneyFilter_com.labels+=GameUtil.getCurrencyByGoldType(d)+",";n.addChild(c);n.addChild(h);n.x=a;n.width+=20;a=n.x+n.width}}d=this.moneyFilter_com.labels.substring(0,this.moneyFilter_com.labels.length-1);this.moneyFilter_com.labels="\u5168\u90e8,"+d;g_auctionCurrency={labels:d,currencyList:this.currencyList};
this.moneyFilter_com.selectedIndex=0};f.updateMoney=function(a){var b=this.currencyList.indexOf(a);-1<b&&(this.currency_box._childs[b].getChildByName("nums").changeText(GameUtil.aucitonMoneyParse(GameUtil.getCurrencyNumByGoldType(a))),Laya.stage.event("auctionitem_updateBuyColor"))};f.setCurrencyMoney=function(){for(var a=0;a<this.currency_box._childs.length;a++){var b=this.currency_box._childs[a].getChildByName("nums");b.changeText(GameUtil.aucitonMoneyParse(GameUtil.getCurrencyNumByGoldType(b.currencyType)))}};
f.onClose=function(){this.clearTimer();this.visible=!1;this.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.off(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.off(Laya.Event.MOUSE_OUT,this,this.onMouseUp)};f.onMouseDown=function(a){if("close_btn"==a.target.name&&this.close_btn==a)this.onClose();this.nav_panel.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.auctionHouse_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.myAuction_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||
this.saleAuction_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.bag_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startPos.x=a.stageX,this.startPos.y=a.stageY,this.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),this.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp))};f.onMouseUp=function(){this.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseMove=function(a){this.x+=a.stageX-this.startPos.x;this.y+=a.stageY-this.startPos.y;
this.startPos.x=a.stageX;this.startPos.y=a.stageY};f.getFilterData=function(a,b,d,n){for(var c=[],h=0;h<g_auctionList.length;h++)d?-1<g_auctionList[h].sOwner.indexOf(d)&&c.push(g_auctionList[h]):n?-1<g_auctionList[h].sHighestBidder.indexOf(n)&&c.push(g_auctionList[h]):b?-1<b.indexOf(g_auctionList[h].btMoneyType)&&c.push(g_auctionList[h]):a?null!=a.job||void 0!=a.job?a.stdmode==g_auctionList[h].btStdMode&&a.job==g_auctionList[h].wShape&&c.push(g_auctionList[h]):-1<a.indexOf(g_auctionList[h].btStdMode)&&
c.push(g_auctionList[h]):c.push(g_auctionList[h]);return this.sortAuctionByTimeUpOrDown(c,0==this.timeFilter_com.selectedIndex)};f.bidNameFilter=function(a,b){return-1<b.sHighestBidder.indexOf(a)};f.ownerNameFilter=function(a,b){return-1<b.sOwner.indexOf(a)};f.moneyDataFilter=function(a,b){return-1<a.indexOf(b.btMoneyType)};f.categoryFilter=function(a,b){return 4==a.stdmode?void 0==a.job||null==a.job?!1:a.stdmode==b.btStdMode&&a.job==b.wShape:-1<a.indexOf(b.btStdMode)};f.jobFilter=function(a,b){return void 0==
a.job||null==a.job?!1:a.stdmode==b.btStdMode&&a.job==b.wShape};f.getFilterDataNew=function(a,b){for(var d,n=[],c=0;c<g_auctionList.length;c++)d=g_auctionList[c],(!b||this.filterResultByConditionNumber(a[0],d,b[0])&&this.filterResultByConditionNumber(a[1],d,b[1])&&this.filterResultByConditionNumber(a[2],d,b[2])&&this.filterResultByConditionNumber(a[3],d,b[3]))&&n.push(d);return this.sortAuctionByTimeUpOrDown(n,0==this.timeFilter_com.selectedIndex)};f.filterResultByConditionNumber=function(a,b,d){return void 0!=
a&&null!=a&&d&&(void 0!=d[0]&&null!=d[0]||d.stdmode)?a(d,b):!0};f.getCategoryListByType=function(a){for(var b=[],d,n=0;n<a.length;n++)d=GameUtil.getItemTypeNameByStdMode(a[n].btStdMode,a[n].wShape),0>b.indexOf(d)&&b.push(d);return b};f.isEquipStdMode=function(a){return-1<[5,6,10,11,15,16,19,20,21,22,23,24,26,78,48,49,53,63,62,64,65].indexOf(a)};f.equipStdModes=function(){return[5,6,10,11,15,16,19,20,21,22,23,24,26,78,48,49,53,63,62,64,65]};f.isSkillStdMode=function(a){return 4==a};f.skillStdModes=
function(){return[4]};f.isMaterialStdMode=function(a){return-1<[17,18,40,41,42].indexOf(a)};f.materialStdModes=function(){return[17,18,40,41,42]};f.isOtherStdMode=function(a){return-1<[0,1,2,3,31].indexOf(a)};f.otherStdModes=function(){return[0,1,2,3,31]};f.sortAuctionByTimeUpOrDown=function(a,b){upFunc=function(d,n){return d.dateCompareNum-n.dateCompareNum};downFunc=function(d,n){return n.dateCompareNum-d.dateCompareNum};return a.sort(b?upFunc:downFunc)};f.getCanShelvesItemData=function(){for(var a,
b=[],d=0;d<g_BagItemsList.length;d++)(a=g_BagItemsList[d])&&!a.s.IsBind&&b.push(a);return b};return e}(UIAuctionHouseWin),UIAuctionItem=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UIAuctionItem",AuctionItemUI);var f=e.prototype;f.init=function(){this.data;this.itemData;this.myName;this.kidOrBuyTip;Laya.stage.on("updateAuctionItemShow",this,this.updateShowUI);Laya.stage.on("updateItemData",this,this.updateItemUI);Laya.stage.on("auctionitem_countdown",this,this.updateCountDown);
Laya.stage.on("auctionitem_updateBuyColor",this,this.updateBuyColor);this.bidding_btn.on(Laya.Event.CLICK,this,this.onBidding);this.buy_btn.on(Laya.Event.CLICK,this,this.onBuy);this.item_box.on(Laya.Event.CLICK,this,this.onItemClick)};f.onItemClick=function(){this.itemData&&GameUtil.NewShowItemsInf(this.itemData,null,Laya.stage.width/2,!0)};f.updateShowUI=function(a){this.data=a;if(!this.myName){var b=ObjectManage.findobject(playerID);this.myName=GameUtil.getPureName(b)}this.changePosByOpenPage(a.isMyAuction);
this.isMyAuction=a.isMyAuction;this.bidding_btn.visible=!this.isMyAuction;this.lastTime_lab.text=GameUtil.auctionLastTime(a.dateCompareNum);b=GameUtil.getCurrencyIconSkinByGoldType(a.btMoneyType);this.currencyIcon_img.skin=this.currencyIcon1_img.skin=b;this.bidMoney_lab.text=GameUtil.aucitonMoneyParse(a.nCurrentPrice);this.bidMoney_lab.color=this.canBuy(a.nCurrentPrice,a.btMoneyType)?"#ffffff":"#ff0400";this.oncePrice_lab.text=GameUtil.aucitonMoneyParse(a.nBuyOutPrice);this.oncePrice_lab.color=this.canBuy(a.nBuyOutPrice,
a.btMoneyType)?"#ffffff":"#ff0400";this.isBiding()&&(this.bidTip_txt.text="\u7ade\u4ef7\u4e2d");this.isHighPrice()&&(this.bidTip_txt.text="\u60a8\u7684\u51fa\u4ef7\u6700\u9ad8");this.bidTip_txt.visible=this.isBiding()||this.isHighPrice();this.myAuction_txt.visible=-1<a.sOwner.indexOf(this.myName)};f.updateBuyColor=function(){this.data&&(this.bidMoney_lab.color=this.canBuy(this.data.nCurrentPrice,this.data.btMoneyType)?"#ffffff":"#ff0400")};f.isBiding=function(){return this.data.sHighestBidder&&""!=
this.data.sHighestBidder};f.isHighPrice=function(){return-1<this.data.sHighestBidder.indexOf(this.myName)};f.canBuy=function(a,b){return 0<=GameUtil.getCurrencyNumByGoldType(b)-a};f.updateItemUI=function(){if(this.data){var a=g_aucitonItemList[""+this.data.nRecog];a&&(this.itemData=a,GameUtil.ShowItemNum(a,this.item_box,this.item_box.width/2,this.item_box.height/2),this.itemName_lab.text=this.data.sItemName,this.itemName_lab.color=Get2RGB(a.s.Color))}};f.changePosByOpenPage=function(a){a?(this.box1.x=
20,this.box2.x=205,this.box3.x=319,this.box4.x=482):(this.box1.x=7,this.box2.x=184,this.box3.x=257,this.box4.x=388)};f.updateCountDown=function(){this.lastTime_lab.text=GameUtil.auctionCountDownHandle(this.lastTime_lab.text);if("00:00:00"==this.lastTime_lab.text&&this.data){var a=this.data.nRecog,b=g_auctionList.length;if(1>b)this.isMyAuction?Laya.stage.event("updateMyAuctionWin"):Laya.stage.event("update_all_auctionData");else for(var d=0;d<b;d++)if(g_auctionList[d]&&g_auctionList[d].nRecog==a){g_auctionList.splice(d,
1);this.isMyAuction?setTimeout(function(){Laya.stage.event("updateMyAuctionWin")},100):Laya.stage.event("update_all_auctionData");break}}};f.onBidding=function(){this.auctionHouseWinUI&&0!=this.auctionHouseWinUI||(this.auctionHouseWinUI=GameUtil.InstanceOfMem(GameSceneUI));this.kidOrBuyTip=GameUtil.openWin(this.kidOrBuyTip,this.auctionHouseWinUI,UIAuctionBidTip);this.kidOrBuyTip.showUI({title:"\u7ade\u4ef7",itemData:this.itemData,itemName:this.data.sItemName,itemNameColor:this.itemName_lab.color,
priceMoney:this.data.nCurrentPrice,onceMoney:this.data.nBuyOutPrice,orderID:this.data.nRecog,moneyColor:this.bidMoney_lab.color,moneyType:this.data.btMoneyType,isBid:!0})};f.onBuy=function(){this.auctionHouseWinUI&&0!=this.auctionHouseWinUI||(this.auctionHouseWinUI=GameUtil.InstanceOfMem(GameSceneUI));this.kidOrBuyTip=GameUtil.openWin(this.kidOrBuyTip,this.auctionHouseWinUI,UIAuctionBidTip);this.kidOrBuyTip.showUI({title:"\u4e00\u53e3\u4ef7",itemData:this.itemData,itemName:this.data.sItemName,itemNameColor:this.itemName_lab.color,
priceMoney:this.data.nBuyOutPrice,orderID:this.data.nRecog,moneyColor:this.oncePrice_lab.color,moneyType:this.data.btMoneyType,isBid:!1})};return e}(UIAuctionItem),UIRank=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UIRank",RankWinUI);var f=e.prototype;f.init=function(){this.initList();this.initMsgEvent();this.initClickEvent();this.startPos=new Laya.Point;this.rankData=[];this.tabIndex=0;this.selectRoleData;this.selectFashionShow;this.setFashionValue()};f.initList=function(){this.rank_list.visible=
!1;this.rank_list.selectEnable=!0;this.rank_list.vScrollBarSkin="";this.rank_list.renderHandler=new Laya.Handler(this,this.updateItem);this.rank_list.mouseHandler=new Laya.Handler(this,this.clickItem)};f.setFashionValue=function(){var a=GameUtil.getSaveData("rankFashionShow"),b=GameUtil.getSaveData("rankFrameShow");this.selectFashionShow=a=a?"true"==a?!0:!1:!0;this.fashionShow_check.selected=a;this.rangeShow_check.selected=b?"true"==b?!0:!1:!0};f.updateListData=function(){this.rank_list.visible||
(this.rank_list.visible=!0);this.rank_list.selectedIndex=0;this.rank_list.array=0<this.rankData[this.tabIndex].length?this.rankData[this.tabIndex]:[];this.rank_list.refresh()};f.updateItem=function(a,b){if(a.dataSource){var d=a.dataSource,n=a.getChildAt(0);rank_lab=a.getChildAt(1);rankName_lab=a.getChildAt(2);rankLevel_lab=a.getChildAt(3);rankGuild_lab=a.getChildAt(4);selectFrame_img=a.getChildAt(5);a=b+1;n.visible=2>=b;n.skin=n.visible?"gameres/ui/rankIcon_"+b+".png":"";rank_lab.visible=!n.visible;
rank_lab.changeText(a+"");n=this.getColorByRanking(a);rankName_lab.changeText(d.name);rankName_lab.color=n;rankLevel_lab.changeText(d.level+"\u7ea7");rankLevel_lab.color=n;rankGuild_lab.visible=""!=d.guildName;rankGuild_lab.visible&&(rankGuild_lab.changeText(d.guildName),rankGuild_lab.color=n);selectFrame_img.visible=b==this.rank_list.selectedIndex}};f.getColorByRanking=function(a){switch(a){case 1:return"#ff0418";case 2:return"#ffd604";case 3:return"#d7bc2e";default:return"#ffffff"}};f.clickItem=
function(a,b){"click"==a.type&&a.target.dataSource&&(b=a.target.dataSource.name,a.target.getChildAt(5).visible=!0,Sendmessage.requestRankNameState(b))};f.initMsgEvent=function(){Laya.stage.on("updateRankData",this,this.updateRankDataByType);Laya.stage.on("updateRankRole",this,this.updateRankRole);Laya.stage.on("closeRankWin",this,this.onClose)};f.initClickEvent=function(){this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.look_btn.on(Laya.Event.CLICK,this,this.onLook);this.close_btn.on(Laya.Event.CLICK,
this,this.onClose);this.rangeShow_check.on(Laya.Event.CHANGE,this,this.onRangeShow);this.fashionShow_check.on(Laya.Event.CHANGE,this,this.onFashionShow);for(var a,b=0;b<this.tab_box._childs.length;b++)a=this.tab_box._childs[b],a.on(Laya.Event.CLICK,this,this.onClickTabByIndex.bind(this,b))};f.onClickTabByIndex=function(a){this.tabIndex=a;this.setSelectTabUI(a);Sendmessage.requestRankDataByType(this.tabIndex)};f.setSelectTabUI=function(a){this.levelTab_btn.selected=0==a;this.zsTab_btn.selected=1==
a;this.fsTab_btn.selected=2==a;this.dsTab_btn.selected=3==a};f.updateShowUI=function(){this.rankData&&this.rankData[this.tabIndex]&&this.rankData[this.tabIndex][0]&&Sendmessage.requestRankNameState(this.rankData[this.tabIndex][0].name);this.updateListData();this.showMyRankingAndGuild()};f.showMyRankingAndGuild=function(){this.myRank_lab.text=this.getMyRank(GameUtil.getPureName(Objectcontrol.self_obj));var a=GameUtil.getPureGuildName(Objectcontrol.self_obj);this.myGuild_lab.text=a?a:"\u65e0"};f.onLook=
function(){this.selectRoleData&&GameApi.ShowLookHum(!0,this.selectRoleData)};f.onRangeShow=function(){this.rangeShow_check.selected?(this.roleShow_panel.x=436,this.roleShow_panel.width=214):(this.roleShow_panel.x=350,this.roleShow_panel.width=300);GameUtil.setSaveData("rankFrameShow",this.rangeShow_check.selected)};f.onFashionShow=function(){this.selectFashionShow=this.fashionShow_check.selected;GameUtil.setSaveData("rankFashionShow",this.fashionShow_check.selected);this.selectRoleData&&this.updateRankRole(this.selectRoleData)};
f.updateRankDataByType=function(a,b){this.rankData[b]||(this.rankData[b]=[]);this.rankData[b]=a;this.updateShowUI()};f.updateRankRole=function(a){if(a){this.selectRoleData=a;var b=THumFeature(a.Feature.buffer),d=b.btGender;this.hum_img.skin=this.getHumSkin(this.selectFashionShow,d);GameUtil.updateNeiGuanHair(this.hair_img,b.btHair,d);HumItems=a.UseItems;HumIconItems=a.UserIconList;this.selectFashionShow?(this.hair_img.visible=!1,this.shield_img.visible=!1,this.updatePosByFashionOrEquip(!0),this.initFashionPart(this.dress_img,
U_FASHIONDRESS),this.initFashionPart(this.weapon_img,U_FASHIONWEAPON),this.initFashionPart(this.hat_img,U_FASHIONHELMET)):(this.hair_img.visible=!0,this.shield_img.visible=!0,this.updatePosByFashionOrEquip(!1),this.initPart(this.dress_img,U_DRESS),this.initPart(this.weapon_img,U_WEAPON),this.initPart(this.shield_img,U_SHIELD),this.initPart(this.hat_img,U_HAT))}};f.updatePosByFashionOrEquip=function(a){a?(this.dress_img.x=59,this.dress_img.y=72,this.weapon_img.x=19,this.weapon_img.y=5,this.hat_img.x=
68,this.hat_img.y=21):(this.dress_img.x=68.5,this.dress_img.y=70,this.weapon_img.x=18,this.weapon_img.y=5,this.hat_img.x=62,this.hat_img.y=30)};f.getHumSkin=function(a,b){return a?0==b?"gameres/png/00376-2.png":"gameres/png/00377-2.png":0==b?"gameres/png/00376-1.png":"gameres/png/00377-1.png"};f.getMyRank=function(a){var b=this.rankData[this.tabIndex];if(!this.rankData||!b)return"\u672a\u4e0a\u699c";for(var d,n=0,c=b.length;n<c;n++)if(d=b[n],-1<d.name.indexOf(a))return n+1+"";return"\u672a\u4e0a\u699c"};
f.onClose=function(){this.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.off(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.off(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.visible=!1};f.onMouseDown=function(a){if("close_btn"==a.target.name)this.onClose();else this.rank_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startPos.x=a.stageX,this.startPos.y=a.stageY,this.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),this.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.on(Laya.Event.MOUSE_OUT,
this,this.onMouseUp))};f.onMouseUp=function(){this.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};f.onMouseMove=function(a){this.x+=a.stageX-this.startPos.x;this.y+=a.stageY-this.startPos.y;this.startPos.x=a.stageX;this.startPos.y=a.stageY};f.initPart=function(a,b){a.removeChildren();if(null!=HumItems[b]&&0<HumItems[b].MakeIndex){var d=new Laya.Image,n=HumItems[b].s.Looks;b==U_WEAPON||b==U_DRESS||b==U_HELMET?(HumItems[b].tag=b,this.LoadImageEx(n,d,!0,b,"stateitem"),GameUtil.ShowItemeffectEx(this,
a,HumItems[b],!0,b)):b==U_SHIELD||b==U_HAT?(this.LoadImageEx(n,d,!0,b,"stateitem"),GameUtil.ShowItemeffectEx(this,a,HumItems[b],!0,b)):(this.LoadImageEx(n,d,!1,b,"stateitem"),GameUtil.ShowItemeffectEx(this,a,HumItems[b]));a.addChild(d)}};f.initFashionPart=function(a,b){a.removeChildren();if(null!=HumItems[b]&&0<HumItems[b].MakeIndex){var d=HumItems[b].s.Looks,n=new Laya.Image;a.addChild(n);b==U_FASHIONDRESS||b==U_FASHIONWEAPON||b==U_FASHIONHELMET?(this.LoadImageEx(d,n,!0,b,"stateitem"),GameUtil.ShowItemeffectEx(this,
a,HumItems[b],!0,b)):(this.LoadImageEx(d,n,!1,b,"stateitem"),GameUtil.ShowItemeffectEx(this,a,HumItems[b]))}};f.LoadImageEx=function(a,b,d,n,c){var h=this;GameUtil.loadImg(a,c,function(m,g){if(d&&""!=m&&g)switch(g=Offsetmodule.getoffsetfromatlas(g.atlas,g.img),b.skin=m,h.hair_img.y=1==g_GameType?35:39,n){case U_WEAPON:1==g_GameType?b.pos(-25+g.x,40+g.y):b.pos(-20+g.x,52+g.y);break;case U_DRESS:1==g_GameType?b.pos(-75+g.x,-28+g.y):b.pos(-73+g.x,-18+g.y);break;case U_HELMET:1==g_GameType?b.pos(-69+
g.x,14+g.y):b.pos(-69+g.x,18+g.y);break;case U_SHIELD:b.pos(-50+g.x,-24+g.y);break;case U_HAT:b.pos(-69+g.x,20+g.y);break;case U_FASHIONDRESS:1==g_GameType?b.pos(-67+g.x,-27+g.y):b.pos(-64+g.x,-18+g.y);break;case U_FASHIONWEAPON:1==g_GameType?b.pos(-27+g.x,40+g.y):b.pos(-20+g.x,52+g.y);break;case U_FASHIONHELMET:b.pos(-74.5+g.x,28+g.y)}else b.skin=m,b.pos(24.5-b.width/2,24.5-b.height/2)})};return e}(UIRank),ReEntry=function(){function e(){this.init()}var f=e.prototype;f.init=function(){this.reqservering=
!0};f.linkLoginSvr=function(){if(g_server_area){var a=g_server_area;checkNative();var b=null==g_serverconfigtxt.gamelist?a.sServerip:a.serverAddr,d=null==g_serverconfigtxt.gamelist?a.nPort:a.port;-1!=b.indexOf("http:")?sendtonative("gotowebview","openurl:"+b):(Sendmessage.connectLoginSvr(b,d),null==g_serverconfigtxt.gamelist?(GAME_IP=a.sServerip,GAME_PORT=parseInt(a.nPort),port_key=a.sPassWord):(GAME_IP=a.serverAddr,GAME_PORT=parseInt(a.port),port_key=a.passWord))}};f.onSvrConnect=function(){if(this.reqservering)this.reqservering=
!1,Sendmessage.sendreqserver(server_uuid);else{isSocketConnected=!0;var a=g_serverconfigtxt&&g_serverconfigtxt.onGDYPlatform?[g_relogname.toLowerCase()+"@2",g_relogpsw]:[g_relogname.toLowerCase(),g_relogpsw];Sendmessage.sendLogin(a[0],a[1]);LoginFunction(g_relogname,g_relogpsw)}};f.onMsgFromSvr=function(a){if("!"===a[a.length-1]){var b=a.substring(0,a.length-1);a=b.substring(0,16);b=b.substring(16,b.length);a=DecodeMessage(a);b=DecodeString(b);switch(a.ident){case SM_PASSOK_SELECTSERVER:a=b.split("/");
Sendmessage.sendSelectServer(a[0]);break;case SM_PASSWD_FAIL:-3==a.record&&(a=g_serverconfigtxt&&g_serverconfigtxt.onGDYPlatform?[g_relogname.toLowerCase()+"@2",g_relogpsw]:[g_relogname.toLowerCase(),g_relogpsw],Sendmessage.sendLogin(a[0],a[1]),LoginFunction(g_relogname,g_relogpsw));break;case SM_SELECTSERVER_OK:Laya.stage.off(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr),Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect),roleNetParam=b.split("/"),Sendmessage.roleNetParam=roleNetParam,
roleNetParam.push(g_relogname),MsgFromLogin=roleNetParam,Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,rerole,rerole.onMsgFromSvr),Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,rerole,rerole.onSvrConnect),rerole.getParamFromLogin()}}};return e}(),ReRole=function(){function e(){this.init()}var f=e.prototype;f.init=function(){};f.getParamFromLogin=function(){Sendmessage.connectRoleSvr(GAME_IP,parseInt(MsgFromLogin[1]))};f.onSvrConnect=function(){var a=MsgFromLogin[3].toLowerCase(),b=MsgFromLogin[2];(a,b)&&Sendmessage.sendQueryRole(a,
b)};f.onMsgFromSvr=function(a){if("!"===a[a.length-1]){var b=a.substring(0,a.length-1);a=b.substring(0,16);b=b.substring(16,b.length);a=DecodeMessage(a);b=DecodeString(b);switch(a.ident){case SM_QUERYCHR:Laya.timer.once(500,this,function(){Sendmessage.sendSelectRole(MsgFromLogin[3].toLowerCase(),g_RoleNameOnly)});break;case SM_STARTPLAY:Mapmodule.cur_x=0;Mapmodule.cur_y=0;Mapmodule.sceneid=null;b=b.split("/");a=b[0];b=b[1];var d=MsgFromLogin[2],n=MsgFromLogin[3].toLowerCase();a={ip:a,port:b,code:d,
name:g_RoleNameOnly,uid:n};if(b=GameUtil.InstanceOfMem(GameSceneUI))Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,b,b.onSvrConnect),b.getDataForRoleScene(a);Laya.stage.off(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);getinfoforsdk(g_RoleName,g_levelForCaiji,"1",g_ServerName)}}};return e}(),DragItem=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"DragItem",Laya.Image);var f=e.prototype;e.dragItemType={bagItem:0,
wareHouseItem:1,jiaoyiItem:2,shortcutBar:3,OkBar:4,HumanItem:5,Shoushi:6,shenyou:7,fashion:8};e.testType;f.init=function(){this.hasCheckDragItem=!1;this.setDefaultValueByItemType(e.testType,!0);this.type=e.testType;this.isLock=!1;this.itemImg=new Laya.Image;this.addChild(this.itemImg)};f.setDefaultValueByItemType=function(a,b){switch(a){case e.dragItemType.bagItem:this.width=this.height=50;break;case e.dragItemType.wareHouseItem:this.width=this.height=60;break;case e.dragItemType.jiaoyiItem:this.width=
this.height=50;break;case e.dragItemType.shortcutBar:this.width=this.height=40;break;case e.dragItemType.OkBar:this.width=this.height=40;break;case e.dragItemType.HumanItem:this.parent&&(this.width=this.parent.width,this.height=this.parent.height);break;case e.dragItemType.Shoushi:case e.dragItemType.shenyou:this.width=this.height=44;break;case e.dragItemType.fashion:this.parent&&(this.width=this.parent.width,this.height=this.parent.height)}b&&this.addEvent(a)};f.setWidthAndHeight=function(a,b){this.width=
a;this.height=b};f.setData=function(a,b){a&&(itemsData=a.itemsData,this.itemType=a.itemType);itemsData&&(this.itemData=itemsData[b]);this.indexInList=b};f.showItemUI=function(a,b,d){if(!this.noSliding){this.itemImg.removeChildren();var n=a.hasBgFrame,c=a.maxUnlockCount,h=a.selectIndex,m=a.itemsData,g=a.itemType;this.itemType=a.itemType;this.itemData=0<m.length?m[b]:m;this.indexInList=b;this.bgFrameHander(n,c,h,b);var l;this.itemType==e.dragItemType.shortcutBar?this.itemPictureSingleHandler(m,b):this.itemType==
e.dragItemType.OkBar?this.itemPictureOkHandler(m,b):l=this.itemPictureHander(m,b);d||(l||this.emptyItemHander(m[b]),l&&g==e.dragItemType.bagItem&&this.contrastArrowHander(m[b]))}};f.bgFrameHander=function(a,b,d,n){this.isLock=!1;a&&(this.skin=this.itemType==e.dragItemType.wareHouseItem||this.itemType==e.dragItemType.bagItem?"gameres/ui/newItemFrame.png":"gameres/ui/img_bag_bg.png",b&&0<b&&n>b?(this.skin=this.itemType==e.dragItemType.bagItem?"gameres/ui/new_bag_lock.png":"gameres/ui/lock_img.png",
this.isLock=!0):d==n&&this.itemType!=e.dragItemType.wareHouseItem&&this.itemType!=e.dragItemType.bagItem&&(this.skin="gameres/ui/img_bag_bg1.png"))};f.itemPictureHander=function(a,b){if(null!=b&&void 0!=b&&!(b>=a.length)&&a[b]&&a[b].s&&!this.isLock){var d=this;GameUtil.loadImg(a[b].s.Looks,"items",function(c){if(!d.isLock){var h=d.itemImg;h.visible=!0;h.skin=c;h._style&&(h.blendMode="overlay");h.x=d.width/2-h.width/2;h.y=d.height/2-h.height/2;a&&a[b]&&GameUtil.ShowItemeffect(d,a[b],b);d.addItemNumTxtHander(a[b],
h.x,h.y)}});var n=this.getChildByName("effect");n&&Animationmodule.removeAni(n);return!0}};f.itemPictureSingleHandler=function(a,b){if(null!=b&&void 0!=b&&!(b>=a.length)&&a[b]&&a[b].s){var d=this;this.setCenterOnParent();GameUtil.loadImg(g_DrugItemsList[b].s.Looks,"items",function(n){if(!d.isLock){var c=d.itemImg;c.visible=!0;c.skin=n;c.x=d.width/2-c.width/2;c.y=d.height/2-c.height/2;c._childs[0]&&(c._childs[0].x=40-c._childs[0].width-(c.x+d.x)-4,c._childs[0].y=40-c._childs[0].height-(c.y+d.y)-2)}});
a=new Laya.Text;a.text=""+GameUtil.GetTypeCount(g_DrugItemsList[b]);a.color="#f4ebeb";a.align="right";this.itemImg.addChild(a)}};f.setCenterOnParent=function(){this.parent&&(this.x=(this.parent.width-this.width)/2,this.y=(this.parent.height-this.height)/2)};f.itemPictureOkHandler=function(a,b){if(null!=b&&void 0!=b&&a&&a.s){var d=this;GameUtil.loadImg(a.s.Looks,"items",function(n){if(!d.isLock){var c=d.itemImg;c.visible=!0;g_boxItemArr[b]=a;c.skin=n;GameMission.addItemTxtNums(a,d.parent);d.parent&&
(c.x=d.parent.width/2-c.width/2,c.y=d.parent.height/2-c.height/2)}});Laya.stage.on("changeCountText",this,this.changeCountText)}};f.changeCountText=function(a){var b=this.parent.getChildByName("count");0<=a.Dura?(a=a.Dura+1,b&&b.changeText("x"+a)):(b&&b.removeSelf(),this.itemImg.visible=!1)};f.updateLb_img=function(){var a=[],b=this.parent.parent;for(i in b._childs)"lb_img"==b._childs[i].name&&a.push(b._childs[i]);if(a[0]&&a[0]._childs[0])var d=a[0]._childs[0]._childs[0];if(a[1]&&a[0]._childs[0])var n=
a[1]._childs[0]._childs[0];n&&null!=n.skin&&"1"==g_deleteStr?(n.visible=!1,(a=this.parent.getChildByName("count"))&&a.removeSelf()):d&&null!=d.skin&&"0"==g_deleteStr&&(d.visible=!1)};f.emptyItemHander=function(a){this.itemImg.visible=!1;(a=this.getChildByName("effect"))&&Animationmodule.removeAni(a);(a=this.getChildByName("score"))&&(g_ItemScoreRecord.boStartArrow?Animationmodule.removeAni(a):a.removeSelf())};f.contrastArrowHander=function(a){if(g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boBagShow){var b=
this.getChildByName("score");b&&Animationmodule.removeAni(b);b=a.s.StdMode;(5==b||6==b||10==b||11==b||15==b||16==b||19<=b&&24>=b||25==b&&1==g_ClientConfig.boItem25Value||26<=b&&30>=b||48==b||51==b||53==b||62<=b&&69>=b||78==b||75==b||76==b||77==b||79<=b&&89>=b||178==b)&&GameUtil.scoreComparison(a)&&(a=Animationmodule.playframe(!1,this,"gameres/animation/equipment_comparison/","00000","00003",280,!0,!1))&&(a.pos(35,28),a.zOrder=99999,a.name="score")}};f.addItemNumTxtHander=function(a,b,d){this.itemImg.removeChildren();
if(GameUtil.checkMaterialItemCanBeStacked(a,!0)){if(this.itemImg._childs[0])var n=this.itemImg._childs[0];else n=new Laya.Text,this.itemImg.addChild(n);n.color="#ffffff";n.align="right";n.width=40;n.text="x"+(a.Dura+1);GameUtil.setCanAddTxtStroke(n);GameUtil.setTxtFixedPos(this.itemImg,this.width,null,b,d)}else GameUtil.checkDrugItemCanBeStacked(a)&&(this.itemImg._childs[0]?n=this.itemImg._childs[0]:(n=new Laya.Text,this.itemImg.addChild(n)),n.color="#ffffff",n.align="right",n.width=40,n.text="x"+
a.Dura,GameUtil.setCanAddTxtStroke(n),GameUtil.setTxtFixedPos(this.itemImg,this.width))};f.addEvent=function(a){this.on(Laya.Event.MOUSE_DOWN,this,this.dragStart);this.on(Laya.Event.MOUSE_UP,this,this.dragEnd);this.on(Laya.Event.MOUSE_OVER,this,this.dragOver);this.on(Laya.Event.REMOVED,this,this.clearEvent);this.addCheckClickHandler(a)};f.addCheckClickHandler=function(a){if(cur_use_app||2==g_Termial)Laya.stage.on("clearCheckClickHandler",this,this.clearCheckClickHandler),this.hasCheckDragItem||(this.hasCheckDragItem=
!0,a=e.getListeningNameByItemType(a),Laya.stage.on(a,this,this.appClickCheck))};e.getListeningNameByItemType=function(a){switch(a){case e.dragItemType.bagItem:return"bagCheckDragItem";case e.dragItemType.wareHouseItem:return"wareHouseCheckDragItem";case e.dragItemType.jiaoyiItem:return"jiaoyiCheckDragItem";case e.dragItemType.shortcutBar:return"shortCheckDragItem";case e.dragItemType.OkBar:return"OkCheckDragItem";case e.dragItemType.HumanItem:return"humanCheckDragItem";case e.dragItemType.Shoushi:return"ShoushiCheckDragItem";
case e.dragItemType.shenyou:return"shenyouCheckDragItem";case e.dragItemType.fashion:return"fashionCheckDragItem"}};f.clearCheckClickHandler=function(a){a==this.type&&(a=e.getListeningNameByItemType(a),Laya.stage.offAll(a));Laya.stage.off("clearCheckClickHandler",this,this.clearCheckClickHandler)};f.appClickCheck=function(){this._style&&this.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.dragOver()};f.dragStart=function(){this.on(Laya.Event.MOUSE_OUT,this,this.dragOut);this.noSlidingHandler()};
f.dragOut=function(){var a=0;0<this.startTime&&(a=Laya.Browser.now()-this.startTime);(0==a||300<=a)&&this.itemData&&this.itemImg&&this.itemImg.visible?(this.startTime=null,this.hideItemExceptBgFrame(),Laya.stage.event("dragItemHandle",{dragItemType:this.itemType,skinRes:this.itemImg.skin,foldType:!1,indexInList:this.indexInList,itemData:this.itemData}),Laya.stage.on("showItemExceptBgFrame",this,this.showItemExceptBgFrame),Laya.stage.on("throwOnTheGround",this,this.throwOnTheGround)):Laya.stage.event("restoreListScroll");
this.off(Laya.Event.MOUSE_OUT,this,this.dragOut)};f.noSlidingHandler=function(){if(this.parent)var a=this.parent.parent;a&&a instanceof Laya.List&&(a.scrollBar&&a.scrollBar.offAll(Laya.Event.CHANGE),this.noSliding=!0,Laya.stage.on("restoreListScroll",this,this.restoreListScroll))};f.restoreListScroll=function(){if(this.parent)var a=this.parent.parent;a&&a instanceof Laya.List&&a.scrollBar&&(a.scrollBar.on(Laya.Event.CHANGE,a,a.onScrollBarChange),Laya.stage.off("restoreListScroll",this,this.restoreListScroll));
this.noSliding=!1};f.dragOver=function(a){g_dragOnItem=!0;g_canReceiveDrag?(g_dragItemData&&this.canReplacePosition()?(this.isSameItemSuperpose()||this.updateParentListData(),g_dragItemData=null,this.off(Laya.Event.MOUSE_OUT,this,this.dragOut),Laya.stage.offAll("showItemExceptBgFrame")):g_dragItemData&&this.isLock&&e.backToOriginHandler(),g_dragItemData=null,g_canReceiveDrag=!1):(Laya.stage.event("restoreListScroll"),this.noSliding=!1)};f.dragEnd=function(){Laya.stage.event("restoreListScroll");this.off(Laya.Event.MOUSE_OUT,
this,this.dragOut)};f.isSameItemSuperpose=function(){if(this.itemData&&this.itemType==e.dragItemType.bagItem&&g_dragItemData.itemData.s.DBName===this.itemData.s.DBName){if(g_dragItemData.indexInList==this.indexInList)return e.backToOriginHandler(),!0;if(GameUtil.checkMaterialItemCanBeStacked(this.itemData,!0)&&GameUtil.checkMaterialItemCanBeStacked(g_dragItemData.itemData,!0)){if(this.itemData.Dura+1==this.itemData.DuraMax)return e.backToOriginHandler(),!0;g_WaitItems.index=g_dragItemData.indexInList;
Sendmessage.sendStackThing(g_dragItemData.itemData.MakeIndex,this.itemData.MakeIndex,g_dragItemData.itemData.s.DBName,0);Laya.stage.event("Show_Bag_Item_ico");return!0}if(GameUtil.checkDrugItemCanBeStacked(this.itemData,!0)&&GameUtil.checkDrugItemCanBeStacked(g_dragItemData.itemData,!0)){if(this.itemData.Dura==this.itemData.DuraMax)return e.backToOriginHandler(),!0;g_WaitItems.index=g_dragItemData.indexInList;Sendmessage.sendStackDrug(g_dragItemData.itemData.MakeIndex,this.itemData.MakeIndex,g_dragItemData.itemData.s.DBName,
0);Laya.stage.event("Show_Bag_Item_ico");return!0}}};f.canReplacePosition=function(){return!this.isLock};f.updateParentListData=function(){if(this.parent)var a=this.parent.parent;if(a&&a instanceof Laya.List){if(g_dragItemData.dragItemType==this.itemType)switch(this.itemType){case e.dragItemType.bagItem:var b=g_BagItemsList[g_dragItemData.indexInList];g_BagItemsList[g_dragItemData.indexInList]=g_BagItemsList[this.indexInList];g_BagItemsList[this.indexInList]=b;break;case e.dragItemType.wareHouseItem:b=
g_StoreItemList[g_dragItemData.indexInList],g_StoreItemList[g_dragItemData.indexInList]=g_StoreItemList[this.indexInList],g_StoreItemList[this.indexInList]=b}else switch(g_dragItemData.dragItemType){case e.dragItemType.bagItem:this.itemType==e.dragItemType.wareHouseItem?this.itemData&&0!=this.itemData.length?e.backToOriginHandler():NewItemInfo.storeItemToWareHouse(g_dragItemData.itemData,this.indexInList):this.itemType==e.dragItemType.jiaoyiItem&&NewItemInfo.pushToJiaoYiHandle(g_dragItemData.itemData,
this.indexInList);break;case e.dragItemType.wareHouseItem:this.itemType==e.dragItemType.bagItem?NewItemInfo.moveItemToBackpack(g_dragItemData.itemData,this.indexInList)||e.backToOriginHandler():e.backToOriginHandler();break;case e.dragItemType.HumanItem:this.itemType==e.dragItemType.bagItem&&(g_OpenIdx=1,g_MoveItems.Index=g_dragItemData.indexInList,g_MoveItems.Items=g_UserItemList[g_dragItemData.indexInList],this.isLock||(null==this.itemData||void 0==this.itemData?NewItemInfo.toUnloadEquip(g_dragItemData.itemData,
g_dragItemData.indexInList):this.isSameEquip()?NewItemInfo.equipmentItems(this.itemData,g_dragItemData.itemData.tag):e.backToOriginHandler()));break;case e.dragItemType.fashion:this.itemType==e.dragItemType.bagItem&&(g_OpenIdx=1,g_MoveItems.Index=g_dragItemData.indexInList,g_MoveItems.Items=g_UserItemList[g_dragItemData.indexInList],GameUtil.NewShowItemsInf(g_MoveItems.Items),this.isLock||(null==this.itemData||void 0==this.itemData?NewItemInfo.toUnloadEquip(g_dragItemData.itemData,g_dragItemData.indexInList):
this.isSameEquip()?NewItemInfo.equipmentItems(this.itemData,g_dragItemData.itemData.tag):e.backToOriginHandler()));break;case e.dragItemType.jiaoyiItem:this.itemType==e.dragItemType.bagItem&&(e.backToOriginHandler(),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4ea4\u6613\u7684\u7269\u54c1\u4e0d\u53ef\u4ee5\u53d6\u56de\uff0c\u8981\u53d6\u56de\u7269\u54c1\u8bf7\u53d6\u6d88\u518d\u91cd\u65b0\u4ea4\u6613\uff01\uff01\uff01",callfn:function(){}}]));case e.dragItemType.shortcutBar:this.itemType==e.dragItemType.bagItem?
(b=g_DrugItemsList[g_dragItemData.indexInList],g_DrugItemsList[g_dragItemData.indexInList]=null,Laya.stage.event("ShowDrug_Items")):e.backToOriginHandler();break;case e.dragItemType.OkBar:if(this.itemType==e.dragItemType.bagItem){Laya.stage.event("draw_npc_items",[null,null,g_dragItemData.indexInList,!0]);g_npc_opt_boxid=g_dragItemData.indexInList;if(b=g_dragItemData.itemData)Sendmessage.NpcDlgOptions(G_NPC_ID,g_dragItemData.indexInList,b.MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_dragItemData.indexInList,
b.MakeIndex,1);g_boxItemArr[g_dragItemData.indexInList]=null;GameUtil.AddItemNewBag(b)}break;case e.dragItemType.Shoushi:this.itemType==e.dragItemType.bagItem&&(this.isLock?e.backToOriginHandler():null==this.itemData||void 0==this.itemData?NewItemInfo.toUnloadEquip(g_dragItemData.itemData,g_dragItemData.indexInList):e.backToOriginHandler());break;case e.dragItemType.shenyou:this.itemType==e.dragItemType.bagItem&&(this.isLock?e.backToOriginHandler():null==this.itemData||void 0==this.itemData?NewItemInfo.toUnloadEquip(g_dragItemData.itemData,
g_dragItemData.indexInList):e.backToOriginHandler())}a.refresh()}else if(g_dragItemData.dragItemType==this.itemType)switch(this.itemType){case e.dragItemType.shortcutBar:b=g_DrugItemsList[g_dragItemData.indexInList];g_DrugItemsList[g_dragItemData.indexInList]=g_DrugItemsList[this.indexInList];g_DrugItemsList[this.indexInList]=b;Laya.stage.event("ShowDrug_Items");break;default:e.backToOriginHandler()}else switch(g_dragItemData.dragItemType){case e.dragItemType.shortcutBar:e.backToOriginHandler();break;
case e.dragItemType.bagItem:this.itemType==e.dragItemType.HumanItem?this.isSameEquip()?NewItemInfo.equipmentItems(g_dragItemData.itemData,this.indexInList):e.backToOriginHandler():this.itemType==e.dragItemType.fashion?this.isSameEquip()?NewItemInfo.equipmentItems(g_dragItemData.itemData,this.indexInList):e.backToOriginHandler():this.itemType==e.dragItemType.shortcutBar?this.canIntoShortcutBar(g_dragItemData.itemData)?(g_DrugItemsList[this.indexInList]=g_BagItemsList[g_dragItemData.indexInList],Laya.stage.event("ShowDrug_Items"),
Laya.stage.event("Show_Bag_Item_ico")):e.backToOriginHandler():this.itemType==e.dragItemType.OkBar?this.isMatchingOkBar()?(a=this.itemImg&&this.itemImg.visible&&this.itemImg.skin&&""!=this.itemImg.skin&&this.itemData&&this.itemData.MakeIndex!=g_dragItemData.itemData.MakeIndex,b=this.itemData,g_npc_opt_boxid=this.indexInList,Laya.stage.event("draw_npc_items",g_dragItemData.itemData),Sendmessage.NpcDlgOptions(G_NPC_ID,this.indexInList,g_dragItemData.itemData.MakeIndex,0),GameUtil.DelBagItems(g_dragItemData.itemData.MakeIndex),
a&&(g_BagItemsList[g_dragItemData.indexInList]=b)):e.backToOriginHandler():this.itemType==e.dragItemType.Shoushi?this.canIntoShouShiBox(g_dragItemData.itemData,this.name)?NewItemInfo.equipmentItems(g_dragItemData.itemData,this.indexInList):e.backToOriginHandler():this.itemType==e.dragItemType.shenyou&&(this.canIntoShenYouBox(g_dragItemData.itemData,this.name)?NewItemInfo.equipmentItems(g_dragItemData.itemData,this.indexInList):e.backToOriginHandler());break;default:e.backToOriginHandler()}};f.hideItemExceptBgFrame=
function(){this.itemImg.visible=!1;var a=this.getChildByName("effect");a&&(a.visible=!1);if(a=this.getChildByName("score"))a.visible=!1};f.showItemExceptBgFrame=function(a){if("true"!=(void 0===a?!1:a)){this.itemImg.visible=!0;if(a=this.getChildByName("effect"))a.visible=!0;if(a=this.getChildByName("score"))a.visible=!0}Laya.stage.off("showItemExceptBgFrame",this,this.showItemExceptBgFrame)};f.throwOnTheGround=function(a){g_MoveItems.Items=a;g_MoveItems.Index=-1;null!=g_MoveItems.Items&&((17==g_MoveItems.Items.s.StdMode||
18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&1<g_MoveItems.Items.Dura?Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u4e22\u5f03\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:function(b){0<
parseInt(b)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendDropItem(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,parseInt(b)),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_selfdropitem.push(g_WaitItems.Items.MakeIndex),Laya.stage.event("ShowDrug_Items"))},callcancelfun:function(){e.backToOriginHandler()}}]):(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),
Sendmessage.sendDropItem(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,1),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_selfdropitem.push(g_WaitItems.Items.MakeIndex),Laya.stage.event("ShowDrug_Items"),-1!=g_DrugButNumber&&this.canIntoShortcutBar(g_WaitItems.Items)&&(a=GameApi.autofillrule(g_WaitItems.Items.s.StdMode,g_WaitItems.Items.s.Looks),0!=a.length&&GameApi.autofillitem(a))),Laya.stage.off("throwOnTheGround",this,this.throwOnTheGround))};f.clearEvent=function(){this.offAll(Laya.Event.MOUSE_DOWN);
this.offAll(Laya.Event.MOUSE_UP);this.offAll(Laya.Event.MOUSE_OVER);this.off(Laya.Event.MOUSE_OUT,this,this.dragOut);this.off(Laya.Event.REMOVED,this,this.clearEvent)};f.isSameEquip=function(){var a=this.itemData?GameUtil.GetItemType(this.itemData.s):this.indexInList,b=GameUtil.GetItemType(g_dragItemData.itemData.s);return(5!=a&&6!=a||5!=b&&6!=b)&&(7!=a&&8!=a||7!=b&&8!=b)&&(24!=a&&25!=a||24!=b&&25!=b)&&(22!=a&&23!=a||22!=b&&23!=b)?a==b:!0};f.isMatchingOkBar=function(){var a=this.parent;if(a)return"*"==
a.BoxType?!0:-1<a.BoxType.split(",").indexOf(g_dragItemData.itemData.s.StdMode+"")};f.canIntoShortcutBar=function(a){if(void 0!=a&&null!=a&&!(3<a.s.StdMode)&&"\u4fee\u590d\u795e\u6c34"!=a.s.Name){for(var b=0;b<g_DrugItemsList.length;b++)if(g_DrugItemsList[b]&&a.s.DBName==g_DrugItemsList[b].s.DBName)return;return!0}};f.canIntoShouShiBox=function(a,b){if(a&&a.s){var d=a.s.OverLap;if(2==d||3==d||6==d||7==d)if(a=a.s.Expand1,a==b||0==a||7==a)return!0}};f.canIntoShenYouBox=function(a,b){if(a&&a.s){var d=
a.s.OverLap;if(4==d||5==d||6==d||7==d)if(a=a.s.Expand1,a==parseInt(b)||0==a)return!0}};e.backToOriginHandler=function(){g_canReceiveDrag&&(g_canReceiveDrag=!1,Laya.stage.event("showItemExceptBgFrame"))};return e}();function QR8bitByte(e){this.mode=QRMode.MODE_8BIT_BYTE;this.data=e}QR8bitByte.prototype={getLength:function(e){return this.data.length},write:function(e){for(var f=0;f<this.data.length;f++)e.put(this.data.charCodeAt(f),8)}};
function QRCode(e,f){this.typeNumber=e;this.errorCorrectLevel=f;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}
QRCode.prototype={addData:function(e){e=new QR8bitByte(e);this.dataList.push(e);this.dataCache=null},isDark:function(e,f){if(0>e||this.moduleCount<=e||0>f||this.moduleCount<=f)throw Error(e+","+f);return this.modules[e][f]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){var e;for(e=1;40>e;e++){for(var f=QRRSBlock.getRSBlocks(e,this.errorCorrectLevel),a=new QRBitBuffer,b=0,d=0;d<f.length;d++)b+=f[d].dataCount;for(d=0;d<this.dataList.length;d++)f=this.dataList[d],
a.put(f.mode,4),a.put(f.getLength(),QRUtil.getLengthInBits(f.mode,e)),f.write(a);if(a.getLengthInBits()<=8*b)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,f){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[a][b]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,
this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(e,f);7<=this.typeNumber&&this.setupTypeNumber(e);null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,f)},setupPositionProbePattern:function(e,f){for(var a=-1;7>=a;a++)if(!(-1>=e+a||this.moduleCount<=e+a))for(var b=-1;7>=b;b++)-1>=f+b||this.moduleCount<=f+b||(this.modules[e+a][f+b]=0<=a&&6>=a&&(0==b||6==b)||0<=b&&6>=
b&&(0==a||6==a)||2<=a&&4>=a&&2<=b&&4>=b?!0:!1)},getBestMaskPattern:function(){for(var e=0,f=0,a=0;8>a;a++){this.makeImpl(!0,a);var b=QRUtil.getLostPoint(this);if(0==a||e>b)e=b,f=a}return f},createMovieClip:function(e,f,a){e=e.createEmptyMovieClip(f,a);this.make();for(f=0;f<this.modules.length;f++){a=1*f;for(var b=0;b<this.modules[f].length;b++){var d=1*b;this.modules[f][b]&&(e.beginFill(0,100),e.moveTo(d,a),e.lineTo(d+1,a),e.lineTo(d+1,a+1),e.lineTo(d,a+1),e.endFill())}}return e},setupTimingPattern:function(){for(var e=
8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=0==e%2)},setupPositionAdjustPattern:function(){for(var e=QRUtil.getPatternPosition(this.typeNumber),f=0;f<e.length;f++)for(var a=0;a<e.length;a++){var b=e[f],d=e[a];if(null==this.modules[b][d])for(var n=-2;2>=n;n++)for(var c=-2;2>=c;c++)this.modules[b+n][d+c]=-2==n||2==n||-2==c||2==c||0==n&&0==c?!0:!1}},setupTypeNumber:function(e){for(var f=
QRUtil.getBCHTypeNumber(this.typeNumber),a=0;18>a;a++){var b=!e&&1==(f>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=b}for(a=0;18>a;a++)b=!e&&1==(f>>a&1),this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=b},setupTypeInfo:function(e,f){f=QRUtil.getBCHTypeInfo(this.errorCorrectLevel<<3|f);for(var a=0;15>a;a++){var b=!e&&1==(f>>a&1);6>a?this.modules[a][8]=b:8>a?this.modules[a+1][8]=b:this.modules[this.moduleCount-15+a][8]=b}for(a=0;15>a;a++)b=!e&&1==(f>>a&1),8>a?this.modules[8][this.moduleCount-
a-1]=b:9>a?this.modules[8][15-a-1+1]=b:this.modules[8][15-a-1]=b;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,f){for(var a=-1,b=this.moduleCount-1,d=7,n=0,c=this.moduleCount-1;0<c;c-=2)for(6==c&&c--;;){for(var h=0;2>h;h++)if(null==this.modules[b][c-h]){var m=!1;n<e.length&&(m=1==(e[n]>>>d&1));QRUtil.getMask(f,b,c-h)&&(m=!m);this.modules[b][c-h]=m;d--;-1==d&&(n++,d=7)}b+=a;if(0>b||this.moduleCount<=b){b-=a;a=-a;break}}}};QRCode.PAD0=236;QRCode.PAD1=17;
QRCode.createData=function(e,f,a){f=QRRSBlock.getRSBlocks(e,f);for(var b=new QRBitBuffer,d=0;d<a.length;d++){var n=a[d];b.put(n.mode,4);b.put(n.getLength(),QRUtil.getLengthInBits(n.mode,e));n.write(b)}for(d=e=0;d<f.length;d++)e+=f[d].dataCount;if(b.getLengthInBits()>8*e)throw Error("code length overflow. ("+b.getLengthInBits()+">"+8*e+")");for(b.getLengthInBits()+4<=8*e&&b.put(0,4);0!=b.getLengthInBits()%8;)b.putBit(!1);for(;!(b.getLengthInBits()>=8*e);){b.put(QRCode.PAD0,8);if(b.getLengthInBits()>=
8*e)break;b.put(QRCode.PAD1,8)}return QRCode.createBytes(b,f)};
QRCode.createBytes=function(e,f){for(var a=0,b=0,d=0,n=Array(f.length),c=Array(f.length),h=0;h<f.length;h++){var m=f[h].dataCount,g=f[h].totalCount-m;b=Math.max(b,m);d=Math.max(d,g);n[h]=Array(m);for(var l=0;l<n[h].length;l++)n[h][l]=255&e.buffer[l+a];a+=m;l=QRUtil.getErrorCorrectPolynomial(g);m=(new QRPolynomial(n[h],l.getLength()-1)).mod(l);c[h]=Array(l.getLength()-1);for(l=0;l<c[h].length;l++)g=l+m.getLength()-c[h].length,c[h][l]=0<=g?m.get(g):0}for(l=h=0;l<f.length;l++)h+=f[l].totalCount;e=Array(h);
for(l=a=0;l<b;l++)for(h=0;h<f.length;h++)l<n[h].length&&(e[a++]=n[h][l]);for(l=0;l<d;l++)for(h=0;h<f.length;h++)l<c[h].length&&(e[a++]=c[h][l]);return e};
for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,
30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var f=e<<10;0<=QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G15);)f^=
QRUtil.G15<<QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G15);return(e<<10|f)^QRUtil.G15_MASK},getBCHTypeNumber:function(e){for(var f=e<<12;0<=QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G18);)f^=QRUtil.G18<<QRUtil.getBCHDigit(f)-QRUtil.getBCHDigit(QRUtil.G18);return e<<12|f},getBCHDigit:function(e){for(var f=0;0!=e;)f++,e>>>=1;return f},getPatternPosition:function(e){return QRUtil.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,f,a){switch(e){case QRMaskPattern.PATTERN000:return 0==(f+a)%
2;case QRMaskPattern.PATTERN001:return 0==f%2;case QRMaskPattern.PATTERN010:return 0==a%3;case QRMaskPattern.PATTERN011:return 0==(f+a)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(f/2)+Math.floor(a/3))%2;case QRMaskPattern.PATTERN101:return 0==f*a%2+f*a%3;case QRMaskPattern.PATTERN110:return 0==(f*a%2+f*a%3)%2;case QRMaskPattern.PATTERN111:return 0==(f*a%3+(f+a)%2)%2;default:throw Error("bad maskPattern:"+e);}},getErrorCorrectPolynomial:function(e){for(var f=new QRPolynomial([1],0),a=0;a<
e;a++)f=f.multiply(new QRPolynomial([1,QRMath.gexp(a)],0));return f},getLengthInBits:function(e,f){if(1<=f&&10>f)switch(e){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw Error("mode:"+e);}else if(27>f)switch(e){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw Error("mode:"+e);}else if(41>f)switch(e){case QRMode.MODE_NUMBER:return 14;
case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw Error("mode:"+e);}else throw Error("type:"+f);},getLostPoint:function(e){for(var f=e.getModuleCount(),a=0,b=0;b<f;b++)for(var d=0;d<f;d++){for(var n=0,c=e.isDark(b,d),h=-1;1>=h;h++)if(!(0>b+h||f<=b+h))for(var m=-1;1>=m;m++)0>d+m||f<=d+m||(0!=h||0!=m)&&c==e.isDark(b+h,d+m)&&n++;5<n&&(a+=3+n-5)}for(b=0;b<f-1;b++)for(d=0;d<f-1;d++)if(n=0,e.isDark(b,d)&&n++,e.isDark(b+1,d)&&n++,e.isDark(b,
d+1)&&n++,e.isDark(b+1,d+1)&&n++,0==n||4==n)a+=3;for(b=0;b<f;b++)for(d=0;d<f-6;d++)e.isDark(b,d)&&!e.isDark(b,d+1)&&e.isDark(b,d+2)&&e.isDark(b,d+3)&&e.isDark(b,d+4)&&!e.isDark(b,d+5)&&e.isDark(b,d+6)&&(a+=40);for(d=0;d<f;d++)for(b=0;b<f-6;b++)e.isDark(b,d)&&!e.isDark(b+1,d)&&e.isDark(b+2,d)&&e.isDark(b+3,d)&&e.isDark(b+4,d)&&!e.isDark(b+5,d)&&e.isDark(b+6,d)&&(a+=40);for(d=n=0;d<f;d++)for(b=0;b<f;b++)e.isDark(b,d)&&n++;return a+Math.abs(100*n/f/f-50)/5*10}},QRMath={glog:function(e){if(1>e)throw Error("glog("+
e+")");return QRMath.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;256<=e;)e-=255;return QRMath.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;
function QRPolynomial(e,f){if(void 0==e.length)throw Error(e.length+"/"+f);for(var a=0;a<e.length&&0==e[a];)a++;this.num=Array(e.length-a+f);for(f=0;f<e.length-a;f++)this.num[f]=e[f+a]}
QRPolynomial.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var f=Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var b=0;b<e.getLength();b++)f[a+b]^=QRMath.gexp(QRMath.glog(this.get(a))+QRMath.glog(e.get(b)));return new QRPolynomial(f,0)},mod:function(e){if(0>this.getLength()-e.getLength())return this;for(var f=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),a=Array(this.getLength()),b=0;b<this.getLength();b++)a[b]=
this.get(b);for(b=0;b<e.getLength();b++)a[b]^=QRMath.gexp(QRMath.glog(e.get(b))+f);return(new QRPolynomial(a,0)).mod(e)}};function QRRSBlock(e,f){this.totalCount=e;this.dataCount=f}
QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,
44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,
75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,
117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,
75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,
54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];
QRRSBlock.getRSBlocks=function(e,f){var a=QRRSBlock.getRsBlockTable(e,f);if(void 0==a)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+f);e=a.length/3;f=[];for(var b=0;b<e;b++)for(var d=a[3*b],n=a[3*b+1],c=a[3*b+2],h=0;h<d;h++)f.push(new QRRSBlock(n,c));return f};
QRRSBlock.getRsBlockTable=function(e,f){switch(f){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+3]}};function QRBitBuffer(){this.buffer=[];this.length=0}
QRBitBuffer.prototype={get:function(e){return 1==(this.buffer[Math.floor(e/8)]>>>7-e%8&1)},put:function(e,f){for(var a=0;a<f;a++)this.putBit(1==(e>>>f-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0);e&&(this.buffer[f]|=128>>>this.length%8);this.length++}};
(function(e){var f={loginCallback:null,platformCallback:null,isSimulatorCallback:null,realNameCallback:null,bindPhoneCallback:null,resumeCallback:null,pauseCallback:null,login:function(a){this.loginCallback=a;window.$App?$App.appLogin(""):window.webkit.messageHandlers.appLogin.postMessage("")},getPlatformType:function(a){this.platformCallback=a;window.$App?$App.getPlatformType(""):window.webkit.messageHandlers.getPlatformType.postMessage("")},isSimulator:function(a){this.isSimulatorCallback=a;window.$App?
$App.isSimulator(""):window.webkit.messageHandlers.isSimulator.postMessage("")},openPay:function(a){window.$App?$App.openPay(a):window.webkit.messageHandlers.openPay.postMessage(a)},exit:function(){window.$App?$App.exit():window.webkit.messageHandlers.exit.postMessage("")},exitLogin:function(){window.$App?$App.exitLogin():window.webkit.messageHandlers.exitLogin.postMessage("")},uploadRoleInfo:function(a){window.$App?$App.uploadRoleInfo(a):window.webkit.messageHandlers.uploadRoleInfo.postMessage(a)},
realName:function(a){this.realNameCallback=a;window.$App?$App.realName(""):window.webkit.messageHandlers.realName.postMessage("")},bindPhone:function(a){this.bindPhoneCallback=a;window.$App?$App.bindPhone(""):window.webkit.messageHandlers.bindPhone.postMessage("")},init:function(a){return window.$App||window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.appLogin?!0:!1},onResume:function(a){this.resumeCallback=a},loadingComplete:function(){window.$App?$App.loadingComplete(""):
window.webkit.messageHandlers.loadingComplete.postMessage("")},onPause:function(a){this.pauseCallback=a}};e.GameSdk=f;"undefined"!==typeof module&&module.exports&&(module.exports=f)})(this||window);var game_view_pause=!1;function receiveUserInfo(e){GameSdk.loginCallback(e)}function receiveOnResume(e){game_view_pause&&(GameSdk.resumeCallback(),game_view_pause=!1)}function receiveOnPause(e){game_view_pause||(game_view_pause=!0,GameSdk.pauseCallback())}
function receivePlatform(e){GameSdk.platformCallback(e)}function receiveIsSimulator(e){GameSdk.isSimulatorCallback(e)}function receiveRealName(e){GameSdk.realNameCallback(e)}function receivePhoneInfo(e){GameSdk.bindPhoneCallback(e)}function receiveGameSdkType(e){setgametype(e)}
var UIFleixbleList=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UIFleixbleList",FlexibleListUI);var f=e.prototype;f.init=function(){this.initList();this.itemNumInPage=6;this.totalPageNum=this.curPageIndex=0;this.lastPage_btn.on(Laya.Event.CLICK,this,this.onChangePage,[!0]);this.nextPage_btn.on(Laya.Event.CLICK,this,this.onChangePage,[!1]);Laya.stage.on("closeFieixbleList",this,this.onClose);Laya.stage.on("setFleixbleListData",this,this.setData)};f.initList=function(){this.flexible_list.mouseHandler=
new Laya.Handler(this,this.clickItem);this.flexible_list.renderHandler=new Laya.Handler(this,this.updateItem)};f.setData=function(a,b,d){this.data=JSON.parse(a).items;this.sortByReceiveState();this.flexible_list.width=b;this.flexible_list.height=d;this.flexible_list.repeatY=this.itemNumInPage;this.flexible_list.repeatX=1;this.updateListArray()};f.updateListArray=function(){this.flexible_list.array=this.data;this.totalPageNum=this.flexible_list.totalPage=Math.ceil(this.data.length/this.itemNumInPage);
this.setPageShowState();this.setPageBtnState()};f.updateItem=function(a,b){a.dataSource&&this.showItemHandler(a)};f.showItemHandler=function(a){var b=a.dataSource;b&&(this.setAttrHandler(b.font,"font",a.getChildAt(0)),this.setAttrHandler(b.image,"image",a.getChildAt(1)),this.setAttrHandler(b.itemShow,"itemShow",a.getChildAt(2)),this.setAttrHandler(b.animation,"animation",a.getChildAt(3)),this.setAttrHandler(b.progress,"progress",a.getChildAt(4)))};f.setAttrHandler=function(a,b,d){if(a&&!(0>=a.length)){d.visible=
!0;for(var n in d._childs)d._childs[n].visible=!1;for(n=0;n<a.length;n++){var c=a[n];if(d._childs[n]){var h=d._childs[n];h.hasValue&&h.off(Laya.Event.CLICK,this,this.onClickValue);h.hasItemClicks&&h.off(Laya.Event.CLICK,this,this.onClickItem)}else h=this.getObjByType(b),d.addChild(h);h.visible=!0;switch(b){case "font":this.setFontAttr(c,h);break;case "image":this.setImageAttr(c,h);break;case "itemShow":this.setItemShowAttr(c,h);break;case "animation":this.setAnimationAttr(c,h);break;case "progress":this.setProgressAttr(c,
h)}}}};f.getObjByType=function(a){switch(a){case "font":return new Laya.Text;case "image":return new Laya.Button;case "itemShow":a=new Laya.Image;a.skin="gameres/ui/00018.png";a.width=a.height=50;var b=new Laya.Image;b.centerX=b.centerY=0;a.addChild(b);b=new Laya.Label;b.visible=!1;a.addChild(b);return a;case "animation":return new Laya.Sprite;case "progress":return a=new Laya.Image,b=new Laya.Image,b.sizeGrid="2,2,2,2",a.addChild(b),a}};f.setFontAttr=function(a,b){a.content&&(b.text=a.content);a.color&&
(b.color=a.color);a.size&&(b.fontSize=a.size);a.x&&(b.x=a.x);a.y&&(b.y=a.y);a.value&&(b.on(Laya.Event.CLICK,this,this.onClickValue,[!0,a.value]),b.hasValue=!0)};f.setImageAttr=function(a,b){if(a.file&&a.imageID){var d=GameMission.getUrl(g_pak_list[a.file],a.imageID);b.stateNum=1;a.stateNum&&(b.stateNum=a.stateNum);b.skin="";(d=Laya.loader.getRes(d))?b.skin=d.url:GameUtil.loadImg(a.imageID,g_pak_list[a.file],function(n){b.skin=n})}if(a.redDot)d=b.getChildByName("redDot"),d||(d=new Laya.Image,d.skin=
"gameres/ui/hd.png",d.name="redDot",d.top=2,d.right=2,b.addChild(d)),d.visible=!0;else if(d=b.getChildByName("redDot"))d.visible=!1;a.x&&(b.x=a.x);a.y&&(b.y=a.y);a.value&&(b.on(Laya.Event.CLICK,this,this.onClickValue,[!0,a.value]),b.hasValue=!0)};f.setItemShowAttr=function(a,b){if(a.itemID){var d=-1,n=this.getItemInfo(a.itemID);n&&(d=n.s.Looks);var c=GameMission.getItemShowIdxByMakeIndex(d,-1==d,a.itemID,g_BagItemsList);d=void 0!=c[0]?c[0]:d;d=GameMission.getItemShowIdxByMakeIndex(d,-1==d,a.itemID,
g_UserItemList)[0];c=GameMission.getUrl("items",d);b._childs[0].skin="";(c=Laya.loader.getRes(c))?b._childs[0].skin=c.url:GameUtil.loadImg(d,"items",function(h){b._childs[0].skin=h});b.on(Laya.Event.CLICK,this,this.onClickValue,[!1,n]);b.hasItemClicks=!0}else a.value&&(b.on(Laya.Event.CLICK,this,this.onClickValue,[!0,a.value]),b.hasValue=!0);a.count&&0<a.count?(d=b._childs[1],d.visible=!0,d.fontSize=a.countSize,d.text=a.count+"",d.color=a.countColor,d.x=a.countX,d.y=a.countY):b._childs[1].visible=
!1;a.x&&(b.x=a.x);a.y&&(b.y=a.y)};f.getItemInfo=function(a){if(g_fleixbleItemShow){for(var b=0;b<g_fleixbleItemShow.length;b++){var d=g_fleixbleItemShow[b];if(d&&d.MakeIndex==a)return d}for(b=0;b<g_Showitem.length;b++)if(a==g_Showitem[b].s.nIdx&&a==g_Showitem[b].MakeIndex)return g_Showitem[b]}};f.setAnimationAttr=function(a,b){var d=g_pak_list[a.id];"true"==a.show||"1"==a.show?b._childs[0]?b._childs[0].visible=!0:a.drawMode&&0!=a.drawMode?0<a.drawMode&&(d=Animationmodule.playframe(!0,b,"data/"+d+
"/",a.start,a.start+a.playNum-1,a.speed,!1,!0),d.x=d.y=0):(d=Animationmodule.playframe(!0,b,"data/"+d+"/",a.start,a.start+a.playNum-1,a.speed,!0,!1),d.x=d.y=0):b.removeChildren();a.x&&(b.x=a.x);a.y&&(b.y=a.y)};f.setProgressAttr=function(a,b){a.bgFile&&a.bgID&&(GameUtil.loadImg(a.bgID,g_pak_list[a.bgFile],function(d){b.skin=d}),a.proImageFile&&a.proImageID&&GameUtil.loadImg(a.proImageID,g_pak_list[a.proImageFile],function(d){b._childs[0].skin=d;null!=a.rate&&void 0!=a.rate&&(b._childs[0].width=Math.floor(b.width*
a.rate/100))}));a.x&&(b.x=a.x);a.y&&(b.y=a.y)};f.onClickValue=function(a,b){a?Sendmessage.SendNpcCMD(b,G_NPC_ID,0):b&&GameUtil.NewShowItemsInf(b)};f.onClickItem=function(a){GameUtil.NewShowItemsInf(a)};f.clickItem=function(a,b){};f.onChangePage=function(a,b){this.curPageIndex=GameUtil.valueLimit(a?this.curPageIndex-1:this.curPageIndex+1,this.totalPageNum-1);this.flexible_list.page!=this.curPageIndex&&(this.flexible_list.page=this.curPageIndex);this.setPageBtnState();this.setPageShowState()};f.setPageBtnState=
function(){this.lastPage_btn.mouseEnabled=0!=this.curPageIndex;this.lastPage_btn.gray=!this.lastPage_btn.mouseEnabled;this.nextPage_btn.mouseEnabled=this.curPageIndex!=this.totalPageNum-1;this.nextPage_btn.gray=!this.nextPage_btn.mouseEnabled};f.setPageShowState=function(){this.showPage_txt.text=this.curPageIndex+1+"/"+this.totalPageNum};f.onClose=function(){Laya.stage.off("closeFieixbleList",this,this.onClose);Laya.stage.off("setFleixbleListData",this,this.setData);this.destroy()};f.sortByReceiveState=
function(){this.data&&this.data.sort(function(a,b){return parseInt(a.state)-parseInt(b.state)})};return e}(UIFleixbleList),UILeaderBossWin=function(){function e(){e.__super.call(this);this.init()}Laya.class(e,"UILeaderBossWin",LeaderBossUI);var f=e.prototype;f.init=function(){this.leftSelectIndex=-1;this.addEvent();this.initList()};f.addEvent=function(){Laya.stage.on("setLeaderBossData",this,this.setData);Laya.stage.on("closeLeaderBossWin",this,this.onClose)};f.initList=function(){this.leftList.vScrollBarSkin=
"";this.leftList.mouseHandler=new Laya.Handler(this,this.clickLeftItem);this.leftList.renderHandler=new Laya.Handler(this,this.updateLeftItem);this.bottomList.vScrollBarSkin="";this.bottomList.mouseHandler=new Laya.Handler(this,this.clickBottomList);this.bottomList.renderHandler=new Laya.Handler(this,this.updateBottomList)};f.setData=function(a){if(!this.isSameLeftListData(a)){this.data=a;var b=this.data.LeftItems;this.setRes(b.bgID,b.bgFile,b,!1);this.setRes(b.selectID,b.selectFile,b,!0);this.setListBaseInfo(this.leftList,
this.data.leftInfo)}this.data=a;a=this.data.bottomItems;this.setListBaseInfo(this.bottomList,this.data.bottomInfo);this.bottomData=a.datas;this.bottomList.array=a.datas};f.isSameLeftListData=function(a){return this.data?JSON.stringify(this.data.LeftItems)===JSON.stringify(a.LeftItems):!1};f.setListBaseInfo=function(a,b,d,n){a&&(a.x=b.x,a.y=b.y,a.width=b.w,a.height=b.h)};f.setRes=function(a,b,d,n){var c=this,h=GameMission.getUrl(g_pak_list[a],b);(h=Laya.loader.getRes(h))?n?this.leftSelect=h.url:(this.leftBg=
h.url,this.leftList.array=d.font):GameUtil.loadImg(b,g_pak_list[a],function(m){n?c.leftSelect=m:(c.leftBg=m,c.leftList.array=d.font)})};f.updateLeftItem=function(a,b){a.dataSource&&this.showBtnUI(a,b)};f.showBtnUI=function(a,b){a.inDiyList=!0;this.leftBg&&(a.skin=this.leftBg);var d=a.dataSource;d.text&&(a.label=d.text);d.fontSize&&(a.labelSize=d.fontSize);d.color&&(a.labelColors=d.color+","+d.color+","+d.color+","+d.color);d.value&&(a.hasValues=d.value);if(a=a.getChildByName("select_img"))a.skin=
this.leftSelect,a.visible=-1!=this.leftSelectIndex&&b==this.leftSelectIndex};f.clickLeftItem=function(a,b){if("click"==a.type){a.target.hasValues&&Sendmessage.SendNpcCMD(a.target.hasValues,G_NPC_ID,0);b=this.leftList._childs[0]._childs;for(var d in b)b[d].getChildByName("select_img").visible=!1;a.target.getChildByName("select_img").visible=!0}};f.updateBottomList=function(a,b){a.dataSource&&(a.inDiyList=!0,this.showBottomUI(a,b))};f.showBottomUI=function(a,b){if(b=this.bottomData[b])this.setAttrHandler(b.font,
"font",a.getChildAt(0)),this.setAttrHandler([b.image],"image",a.getChildAt(1))};f.setAttrHandler=function(a,b,d){if(!a||0>=a.length)d.visible=!1;else{d.visible=!0;for(var n in d._childs)d._childs[n].visible=!1;for(n=0;n<a.length;n++){var c=a[n];if(c){if(d._childs[n]){var h=d._childs[n];h.hasValue&&h.off(Laya.Event.CLICK,this,this.onClickValue);h.hasItemClicks&&h.off(Laya.Event.CLICK,this,this.onClickItem)}else h=this.getObjByType(b),d.addChild(h);h.inDiyList=!0;h.visible=!0;switch(b){case "font":this.setFontAttr(c,
h);break;case "image":this.setImageAttr(c,h)}}}}};f.getObjByType=function(a){switch(a){case "font":return new Laya.Text;case "image":return new Laya.Button}};f.setFontAttr=function(a,b){a.content&&(b.text=a.content);a.color&&(b.color=a.color);a.fontSize&&(b.fontSize=a.fontSize);a.x&&(b.x=a.x);a.y&&(b.y=a.y);a.value&&(b.on(Laya.Event.CLICK,this,this.onClickValue,[!0,a.value]),b.hasValue=!0)};f.setImageAttr=function(a,b){if(a.file&&a.imageID){var d=GameMission.getUrl(g_pak_list[a.file],a.imageID);b.stateNum=
1;a.stateNum&&(b.stateNum=a.stateNum);b.skin="";(d=Laya.loader.getRes(d))?b.skin=d.url:GameUtil.loadImg(a.imageID,g_pak_list[a.file],function(n){b.skin=n})}a.x&&(b.x=a.x);a.y&&(b.y=a.y);a.value&&(b.on(Laya.Event.CLICK,this,this.onClickValue,[!0,a.value]),b.hasValue=!0)};f.onClickValue=function(a,b){a?Sendmessage.SendNpcCMD(b,G_NPC_ID,0):b&&GameUtil.NewShowItemsInf(b)};f.clickBottomList=function(a,b){};f.onClose=function(){this.removeSelf();Laya.stage.off("setLeaderBossData",this,this.setData);Laya.stage.off("closeLeaderBossWin",
this,this.onClose)};return e}(UILeaderBossWin);
